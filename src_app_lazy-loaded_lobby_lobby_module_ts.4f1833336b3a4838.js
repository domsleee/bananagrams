"use strict";(self.webpackChunkbananagrams=self.webpackChunkbananagrams||[]).push([["src_app_lazy-loaded_lobby_lobby_module_ts"],{5732:(L,c,i)=>{i.r(c),i.d(c,{LobbyModule:()=>T});var m=i(6362),u=i(523),d=i(9765),b=i(3918),e=i(9685),p=i(3315),y=i(2467),v=i(1312),h=i(9565),l=i(587),g=i(7317);function S(o,a){if(1&o&&(e.TgZ(0,"li"),e._uU(1),e.qZA()),2&o){const t=a.$implicit,n=e.oxw();e.ekj("strikethrough",t.disconnected),e.xp6(1),e.lnq(" ",t.name,"",t.id===n.hostId?"(host)":"","",t.id===(null==n.gameServiceState.myPlayer?null:n.gameServiceState.myPlayer.id)?"(you)":""," ")}}const f=[{path:":id",component:(()=>{class o{constructor(t,n,r,s,M){this.gameService=t,this.peerToPeerService=n,this.gameHostService=r,this.navigationService=s,this.baseHref=M,this.rejoining=!1,this.copied=!1}ngOnInit(){var t=this;return(0,b.Z)(function*(){t.isHost=t.peerToPeerService.getIsHost(),t.hostId=t.peerToPeerService.getHostId(),t.gameServiceState=t.gameService.state,t.gameService.initFromPeerToPeer(),t.subs=[t.gameService.gameStart$.subscribe(n=>t.gotoGame())],t.name="guest"+(1e3*Math.random()).toFixed(0).padStart(4,"0"),t.setName(null)})()}gotoGame(){this.navigationService.gotoGame()}ngOnDestroy(){this.subs.forEach(t=>t.unsubscribe)}setName(t){this.gameService.updatePlayer(this.name)}startGame(){this.gameHostService.startGame()}rejoin(){this.rejoining=!0,setTimeout(()=>this.rejoining=!1,500),this.setIsSpectatorAndGotoGame(!1)}joinAsSpectator(){this.setIsSpectatorAndGotoGame(!0)}copyJoinLink(){navigator.clipboard.writeText(window.location.href),this.copied=!0,setTimeout(()=>this.copied=!1,2e3)}setIsSpectatorAndGotoGame(t){this.gameService.getOrCreateMyPlayer().isSpectator=t,this.gameService.sendPlayerUpdateMessage(this.gameService.getOrCreateMyPlayer()),this.gameServiceState.inGame&&this.gotoGame()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(p.h),e.Y36(y.l),e.Y36(v.Y),e.Y36(h.f),e.Y36(m.mr))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-lobby"]],decls:18,vars:11,consts:[[1,"container"],[1,"banana-img","mat-elevation-z2",3,"src"],[3,"strikethrough",4,"ngFor","ngForOf"],[1,"name-div"],["type","text","maxlength","32",3,"ngModel","ngModelChange","keydown.enter"],["mat-stroked-button","","color","primary",1,"big-button",2,"display","inline-block",3,"disabled","click"],["mat-stroked-button","","color","primary",1,"block-button",3,"disabled","click"],["mat-raised-button","",1,"block-button",3,"disabled","click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"img",1),e.TgZ(2,"p"),e._uU(3),e.qZA(),e.TgZ(4,"ul"),e.YNc(5,S,2,5,"li",2),e.qZA(),e.TgZ(6,"div",3)(7,"input",4),e.NdJ("ngModelChange",function(s){return n.name=s})("keydown.enter",function(s){return n.setName(s)}),e.qZA(),e.TgZ(8,"button",5),e.NdJ("click",function(s){return n.setName(s)}),e._uU(9,"Set name"),e.qZA()(),e.TgZ(10,"button",6),e.NdJ("click",function(){return n.copyJoinLink()}),e._uU(11),e.qZA(),e.TgZ(12,"button",6),e.NdJ("click",function(){return n.rejoin()}),e._uU(13,"Rejoin"),e.qZA(),e.TgZ(14,"button",6),e.NdJ("click",function(){return n.joinAsSpectator()}),e._uU(15,"Spectate"),e.qZA(),e.TgZ(16,"button",7),e.NdJ("click",function(){return n.startGame()}),e._uU(17,"Start game"),e.qZA()()),2&t&&(e.xp6(1),e.MGl("src","",n.baseHref,"assets/banana.jpeg",e.LSH),e.xp6(2),e.AsE("",n.gameServiceState.players.length," players. ",n.gameServiceState.totalPeerCount," in room."),e.xp6(2),e.Q6J("ngForOf",n.gameServiceState.players),e.xp6(2),e.Q6J("ngModel",n.name),e.xp6(1),e.Q6J("disabled",!n.name||0===n.gameServiceState.totalPeerCount||n.rejoining),e.xp6(2),e.Q6J("disabled",n.copied),e.xp6(1),e.Oqu(n.copied?"Copied!":"Copy join link"),e.xp6(1),e.Q6J("disabled",n.isHost||n.rejoining||!n.gameServiceState.inGame),e.xp6(2),e.Q6J("disabled",n.isHost||n.rejoining||!n.gameServiceState.inGame),e.xp6(2),e.Q6J("disabled",!n.isHost||null===n.gameServiceState.myPlayer))},dependencies:[m.sg,l.Fj,l.JJ,l.nD,l.On,g.lW],styles:[".strikethrough[_ngcontent-%COMP%]{text-decoration:line-through}button[_ngcontent-%COMP%]{margin-top:1em}button.block-button[_ngcontent-%COMP%]{width:100%}input[_ngcontent-%COMP%]{line-height:2.5em;width:200px;display:flex;flex:1 1 auto}div.name-div[_ngcontent-%COMP%]{display:flex}div.name-div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:0}div.container[_ngcontent-%COMP%]{display:block}li[_ngcontent-%COMP%]{color:var(--text-color)}"]}),o})()},{path:"**",redirectTo:d.n.HOME}];let C=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[u.Bz.forChild(f),u.Bz]}),o})(),T=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[m.ez,C,l.u5,g.ot]}),o})()}}]);
//# sourceMappingURL=src_app_lazy-loaded_lobby_lobby_module_ts.4f1833336b3a4838.js.map