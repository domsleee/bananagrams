(self.webpackChunkbananagrams=self.webpackChunkbananagrams||[]).push([["main"],{559:(Xt,q,T)=>{"use strict";var M={};T.r(M),T.d(M,{fixNegotiationNeeded:()=>qw,shimAddTrackRemoveTrack:()=>Gw,shimAddTrackRemoveTrackWithNative:()=>zw,shimGetDisplayMedia:()=>V2,shimGetSendersWithDtmf:()=>Uw,shimGetStats:()=>$w,shimGetUserMedia:()=>jw,shimMediaStream:()=>Vw,shimOnTrack:()=>Bw,shimPeerConnection:()=>Lv,shimSenderReceiverGetStats:()=>Hw});var B={};T.r(B),T.d(B,{shimGetDisplayMedia:()=>Kw,shimGetUserMedia:()=>Ww,shimPeerConnection:()=>jv,shimReplaceTrack:()=>Yw});var ne={};T.r(ne),T.d(ne,{shimAddTransceiver:()=>nT,shimCreateAnswer:()=>oT,shimCreateOffer:()=>iT,shimGetDisplayMedia:()=>H2,shimGetParameters:()=>rT,shimGetUserMedia:()=>Qw,shimOnTrack:()=>Jw,shimPeerConnection:()=>Vv,shimRTCDataChannel:()=>tT,shimReceiverGetStats:()=>Xw,shimRemoveStream:()=>eT,shimSenderGetStats:()=>Zw});var R={};T.r(R),T.d(R,{shimAudioContext:()=>pT,shimCallbacksAPI:()=>cT,shimConstraints:()=>uT,shimCreateOfferLegacy:()=>hT,shimGetUserMedia:()=>lT,shimLocalStreamsAPI:()=>sT,shimRTCIceServerUrls:()=>dT,shimRemoteStreamsAPI:()=>aT,shimTrackEventTransceiver:()=>fT});var Te={};function ut(n){return"function"==typeof n}T.r(Te),T.d(Te,{removeExtmapAllowMixed:()=>Uv,shimAddIceCandidateNullOrEmpty:()=>nh,shimConnectionState:()=>Bv,shimMaxMessageSize:()=>su,shimRTCIceCandidate:()=>th,shimSendThrowTypeError:()=>au});let ft=!1;const P={Promise:void 0,set useDeprecatedSynchronousErrorHandling(n){if(n){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else ft&&console.log("RxJS: Back to a better error behavior. Thank you. <3");ft=n},get useDeprecatedSynchronousErrorHandling(){return ft}};function k(n){setTimeout(()=>{throw n},0)}const X={closed:!0,next(n){},error(n){if(P.useDeprecatedSynchronousErrorHandling)throw n;k(n)},complete(){}},Ce=Array.isArray||(n=>n&&"number"==typeof n.length);function he(n){return null!==n&&"object"==typeof n}const W=(()=>{function n(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((e,r)=>`${r+1}) ${e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return n.prototype=Object.create(Error.prototype),n})();class le{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let t;if(this.closed)return;let{_parentOrParents:e,_ctorUnsubscribe:r,_unsubscribe:i,_subscriptions:o}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,e instanceof le)e.remove(this);else if(null!==e)for(let s=0;s<e.length;++s)e[s].remove(this);if(ut(i)){r&&(this._unsubscribe=void 0);try{i.call(this)}catch(s){t=s instanceof W?ze(s.errors):[s]}}if(Ce(o)){let s=-1,a=o.length;for(;++s<a;){const c=o[s];if(he(c))try{c.unsubscribe()}catch(d){t=t||[],d instanceof W?t=t.concat(ze(d.errors)):t.push(d)}}}if(t)throw new W(t)}add(t){let e=t;if(!t)return le.EMPTY;switch(typeof t){case"function":e=new le(t);case"object":if(e===this||e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof le)){const o=e;e=new le,e._subscriptions=[o]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}let{_parentOrParents:r}=e;if(null===r)e._parentOrParents=this;else if(r instanceof le){if(r===this)return e;e._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return e;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[e]:i.push(e),e}remove(t){const e=this._subscriptions;if(e){const r=e.indexOf(t);-1!==r&&e.splice(r,1)}}}var n;function ze(n){return n.reduce((t,e)=>t.concat(e instanceof W?e.errors:e),[])}le.EMPTY=((n=new le).closed=!0,n);const w="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class N extends le{constructor(t,e,r){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=X;break;case 1:if(!t){this.destination=X;break}if("object"==typeof t){t instanceof N?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new j(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new j(this,t,e,r)}}[w](){return this}static create(t,e,r){const i=new N(t,e,r);return i.syncErrorThrowable=!1,i}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class j extends N{constructor(t,e,r,i){super(),this._parentSubscriber=t;let o,s=this;ut(e)?o=e:e&&(o=e.next,r=e.error,i=e.complete,e!==X&&(s=Object.create(e),ut(s.unsubscribe)&&this.add(s.unsubscribe.bind(s)),s.unsubscribe=this.unsubscribe.bind(this))),this._context=s,this._next=o,this._error=r,this._complete=i}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;P.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:r}=P;if(this._error)r&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)r?(e.syncErrorValue=t,e.syncErrorThrown=!0):k(t),this.unsubscribe();else{if(this.unsubscribe(),r)throw t;k(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);P.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(r){if(this.unsubscribe(),P.useDeprecatedSynchronousErrorHandling)throw r;k(r)}}__tryOrSetError(t,e,r){if(!P.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,r)}catch(i){return P.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=i,t.syncErrorThrown=!0,!0):(k(i),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}const oe="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ne(n){return n}function re(n){return 0===n.length?Ne:1===n.length?n[0]:function(e){return n.reduce((r,i)=>i(r),e)}}let ae=(()=>{class n{constructor(e){this._isScalar=!1,e&&(this._subscribe=e)}lift(e){const r=new n;return r.source=this,r.operator=e,r}subscribe(e,r,i){const{operator:o}=this,s=function me(n,t,e){if(n){if(n instanceof N)return n;if(n[w])return n[w]()}return n||t||e?new N(n,t,e):new N(X)}(e,r,i);if(s.add(o?o.call(s,this.source):this.source||P.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),P.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s}_trySubscribe(e){try{return this._subscribe(e)}catch(r){P.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=r),function $(n){for(;n;){const{closed:t,destination:e,isStopped:r}=n;if(t||r)return!1;n=e&&e instanceof N?e:null}return!0}(e)?e.error(r):console.warn(r)}}forEach(e,r){return new(r=ce(r))((i,o)=>{let s;s=this.subscribe(a=>{try{e(a)}catch(c){o(c),s&&s.unsubscribe()}},o,i)})}_subscribe(e){const{source:r}=this;return r&&r.subscribe(e)}[oe](){return this}pipe(...e){return 0===e.length?this:re(e)(this)}toPromise(e){return new(e=ce(e))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=t=>new n(t),n})();function ce(n){if(n||(n=P.Promise||Promise),!n)throw new Error("no Promise impl found");return n}const tt=(()=>{function n(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return n.prototype=Object.create(Error.prototype),n})();class en extends le{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const r=e.indexOf(this.subscriber);-1!==r&&e.splice(r,1)}}class xt extends N{constructor(t){super(t),this.destination=t}}let Le=(()=>{class n extends ae{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[w](){return new xt(this)}lift(e){const r=new ko(this,this);return r.operator=e,r}next(e){if(this.closed)throw new tt;if(!this.isStopped){const{observers:r}=this,i=r.length,o=r.slice();for(let s=0;s<i;s++)o[s].next(e)}}error(e){if(this.closed)throw new tt;this.hasError=!0,this.thrownError=e,this.isStopped=!0;const{observers:r}=this,i=r.length,o=r.slice();for(let s=0;s<i;s++)o[s].error(e);this.observers.length=0}complete(){if(this.closed)throw new tt;this.isStopped=!0;const{observers:e}=this,r=e.length,i=e.slice();for(let o=0;o<r;o++)i[o].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(e){if(this.closed)throw new tt;return super._trySubscribe(e)}_subscribe(e){if(this.closed)throw new tt;return this.hasError?(e.error(this.thrownError),le.EMPTY):this.isStopped?(e.complete(),le.EMPTY):(this.observers.push(e),new en(this,e))}asObservable(){const e=new ae;return e.source=this,e}}return n.create=(t,e)=>new ko(t,e),n})();class ko extends Le{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):le.EMPTY}}function Pe(n){return n&&"function"==typeof n.schedule}function Ae(n,t){return function(r){if("function"!=typeof n)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return r.lift(new Qr(n,t))}}class Qr{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new gs(t,this.project,this.thisArg))}}class gs extends N{constructor(t,e,r){super(t),this.project=e,this.count=0,this.thisArg=r||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(r){return void this.destination.error(r)}this.destination.next(e)}}const pe=n=>t=>{for(let e=0,r=n.length;e<r&&!t.closed;e++)t.next(n[e]);t.complete()},Cr=function Jr(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}(),Sr=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function vs(n){return!!n&&"function"!=typeof n.subscribe&&"function"==typeof n.then}const Zn=n=>{if(n&&"function"==typeof n[oe])return(n=>t=>{const e=n[oe]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)})(n);if(Sr(n))return pe(n);if(vs(n))return(n=>t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,k),t))(n);if(n&&"function"==typeof n[Cr])return(n=>t=>{const e=n[Cr]();for(;;){let r;try{r=e.next()}catch(i){return t.error(i),t}if(r.done){t.complete();break}if(t.next(r.value),t.closed)break}return"function"==typeof e.return&&t.add(()=>{e.return&&e.return()}),t})(n);{const e=`You provided ${he(n)?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(e)}};function Dr(n,t){return new ae(e=>{const r=new le;let i=0;return r.add(t.schedule(function(){i!==n.length?(e.next(n[i++]),e.closed||r.add(this.schedule())):e.complete()})),r})}function Wt(n,t){return t?function _a(n,t){if(null!=n){if(function wr(n){return n&&"function"==typeof n[oe]}(n))return function Zr(n,t){return new ae(e=>{const r=new le;return r.add(t.schedule(()=>{const i=n[oe]();r.add(i.subscribe({next(o){r.add(t.schedule(()=>e.next(o)))},error(o){r.add(t.schedule(()=>e.error(o)))},complete(){r.add(t.schedule(()=>e.complete()))}}))})),r})}(n,t);if(vs(n))return function ht(n,t){return new ae(e=>{const r=new le;return r.add(t.schedule(()=>n.then(i=>{r.add(t.schedule(()=>{e.next(i),r.add(t.schedule(()=>e.complete()))}))},i=>{r.add(t.schedule(()=>e.error(i)))}))),r})}(n,t);if(Sr(n))return Dr(n,t);if(function vn(n){return n&&"function"==typeof n[Cr]}(n)||"string"==typeof n)return function ya(n,t){if(!n)throw new Error("Iterable cannot be null");return new ae(e=>{const r=new le;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(t.schedule(()=>{i=n[Cr](),r.add(t.schedule(function(){if(e.closed)return;let o,s;try{const a=i.next();o=a.value,s=a.done}catch(a){return void e.error(a)}s?e.complete():(e.next(o),this.schedule())}))})),r})}(n,t)}throw new TypeError((null!==n&&typeof n||n)+" is not observable")}(n,t):n instanceof ae?n:new ae(Zn(n))}class ba extends N{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class Oo extends N{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function Ca(n,t){if(t.closed)return;if(n instanceof ae)return n.subscribe(t);let e;try{e=Zn(n)(t)}catch(r){t.error(r)}return e}function cn(n,t,e=Number.POSITIVE_INFINITY){return"function"==typeof t?r=>r.pipe(cn((i,o)=>Wt(n(i,o)).pipe(Ae((s,a)=>t(i,s,o,a))),e)):("number"==typeof t&&(e=t),r=>r.lift(new Au(n,e)))}class Au{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new Uc(t,this.project,this.concurrent))}}class Uc extends Oo{constructor(t,e,r=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=r,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const r=this.index++;try{e=this.project(t,r)}catch(i){return void this.destination.error(i)}this.active++,this._innerSub(e)}_innerSub(t){const e=new ba(this),r=this.destination;r.add(e);const i=Ca(t,e);i!==e&&r.add(i)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function vi(n=Number.POSITIVE_INFINITY){return cn(Ne,n)}function ys(n,t){return t?Dr(n,t):new ae(pe(n))}function _s(){return function(t){return t.lift(new Qh(t))}}class Qh{constructor(t){this.connectable=t}call(t,e){const{connectable:r}=this;r._refCount++;const i=new Ea(t,r),o=e.subscribe(i);return i.closed||(i.connection=r.connect()),o}}class Ea extends N{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:r}=this,i=t._connection;this.connection=null,i&&(!r||i===r)&&i.unsubscribe()}}class bs extends ae{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new le,t.add(this.source.subscribe(new Jh(this.getSubject(),this))),t.closed&&(this._connection=null,t=le.EMPTY)),t}refCount(){return _s()(this)}}const $c=(()=>{const n=bs.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:n._subscribe},_isComplete:{value:n._isComplete,writable:!0},getSubject:{value:n.getSubject},connect:{value:n.connect},refCount:{value:n.refCount}}})();class Jh extends xt{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}class Xr{constructor(t,e){this.subjectFactory=t,this.selector=e}call(t,e){const{selector:r}=this,i=this.subjectFactory(),o=r(i).subscribe(t);return o.add(e.subscribe(i)),o}}function Xh(){return new Le}function Tt(n){for(let t in n)if(n[t]===Tt)return t;throw Error("Could not find renamed property on target object.")}function Xn(n,t){for(const e in t)t.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(n[e]=t[e])}function nt(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(nt).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const t=n.toString();if(null==t)return""+t;const e=t.indexOf("\n");return-1===e?t:t.substring(0,e)}function ei(n,t){return null==n||""===n?null===t?"":t:null==t||""===t?n:n+" "+t}const Ru=Tt({__forward_ref__:Tt});function Pt(n){return n.__forward_ref__=Pt,n.toString=function(){return nt(this())},n}function De(n){return Re(n)?n():n}function Re(n){return"function"==typeof n&&n.hasOwnProperty(Ru)&&n.__forward_ref__===Pt}class Y extends Error{constructor(t,e){super(function Sa(n,t){return`NG0${Math.abs(n)}${t?": "+t.trim():""}`}(t,e)),this.code=t}}function Se(n){return"string"==typeof n?n:null==n?"":String(n)}function ti(n,t){throw new Y(-201,!1)}function er(n,t){null==n&&function at(n,t,e,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${e} ${r} ${t} <=Actual]`))}(t,n,null,"!=")}function de(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Lt(n){return{providers:n.providers||[],imports:n.imports||[]}}function Fo(n){return Ta(n,Ds)||Ta(n,Nu)}function Ta(n,t){return n.hasOwnProperty(t)?n[t]:null}function yi(n){return n&&(n.hasOwnProperty(Ma)||n.hasOwnProperty(Ji))?n[Ma]:null}const Ds=Tt({\u0275prov:Tt}),Ma=Tt({\u0275inj:Tt}),Nu=Tt({ngInjectableDef:Tt}),Ji=Tt({ngInjectorDef:Tt});var xe=(()=>((xe=xe||{})[xe.Default=0]="Default",xe[xe.Host=1]="Host",xe[xe.Self=2]="Self",xe[xe.SkipSelf=4]="SkipSelf",xe[xe.Optional=8]="Optional",xe))();let No;function Dt(n){const t=No;return No=n,t}function ws(n,t,e){const r=Fo(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:e&xe.Optional?null:void 0!==t?t:void ti(nt(n))}function fr(n){return{toString:n}.toString()}var xn=(()=>((xn=xn||{})[xn.OnPush=0]="OnPush",xn[xn.Default=1]="Default",xn))(),hr=(()=>(function(n){n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom"}(hr||(hr={})),hr))();const Rt=(()=>"undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof global&&global||"undefined"!=typeof window&&window||"undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self)(),ct={},dt=[],_i=Tt({\u0275cmp:Tt}),Zi=Tt({\u0275dir:Tt}),Lo=Tt({\u0275pipe:Tt}),Ts=Tt({\u0275mod:Tt}),Kt=Tt({\u0275fac:Tt}),Ms=Tt({__NG_ELEMENT_ID__:Tt});let zt=0;function yn(n){return fr(()=>{const e=!0===n.standalone,r={},i={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===xn.OnPush,directiveDefs:null,pipeDefs:null,standalone:e,dependencies:e&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||dt,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||hr.Emulated,id:"c"+zt++,styles:n.styles||dt,_:null,setInput:null,schemas:n.schemas||null,tView:null},o=n.dependencies,s=n.features;return i.inputs=Ia(n.inputs,r),i.outputs=Ia(n.outputs),s&&s.forEach(a=>a(i)),i.directiveDefs=o?()=>("function"==typeof o?o():o).map(Bu).filter(bi):null,i.pipeDefs=o?()=>("function"==typeof o?o():o).map(Pn).filter(bi):null,i})}function Bu(n){return Ct(n)||tn(n)}function bi(n){return null!==n}function jt(n){return fr(()=>({type:n.type,bootstrap:n.bootstrap||dt,declarations:n.declarations||dt,imports:n.imports||dt,exports:n.exports||dt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Ia(n,t){if(null==n)return ct;const e={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),e[i]=r,t&&(t[i]=o)}return e}const Ie=yn;function Ct(n){return n[_i]||null}function tn(n){return n[Zi]||null}function Pn(n){return n[Lo]||null}function Bn(n,t){const e=n[Ts]||null;if(!e&&!0===t)throw new Error(`Type ${nt(n)} does not have '\u0275mod' property.`);return e}function Rn(n){return Array.isArray(n)&&"object"==typeof n[1]}function pr(n){return Array.isArray(n)&&!0===n[1]}function Ra(n){return 0!=(8&n.flags)}function ka(n){return 2==(2&n.flags)}function Oa(n){return 1==(1&n.flags)}function gr(n){return null!==n.template}function lp(n){return 0!=(256&n[2])}function io(n,t){return n.hasOwnProperty(Kt)?n[Kt]:null}class La{constructor(t,e,r){this.previousValue=t,this.currentValue=e,this.firstChange=r}isFirstChange(){return this.firstChange}}function On(){return Os}function Os(n){return n.type.prototype.ngOnChanges&&(n.setInput=Wu),qu}function qu(){const n=Fs(this),t=null==n?void 0:n.current;if(t){const e=n.previous;if(e===ct)n.previous=t;else for(let r in t)e[r]=t[r];n.current=null,this.ngOnChanges(t)}}function Wu(n,t,e,r){const i=Fs(n)||function vp(n,t){return n[Bo]=t}(n,{previous:ct,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[e],c=s[a];o[a]=new La(c&&c.currentValue,t,s===ct),n[r]=t}On.ngInherit=!0;const Bo="__ngSimpleChanges__";function Fs(n){return n[Bo]||null}function Ft(n){for(;Array.isArray(n);)n=n[0];return n}function Uo(n,t){return Ft(t[n])}function It(n,t){return Ft(t[n.index])}function ja(n,t){return n.data[t]}function Yt(n,t){const e=t[n];return Rn(e)?e:e[0]}function Ns(n){return 64==(64&n[2])}function ii(n,t){return null==t?null:n[t]}function Xu(n){n[18]=0}function Ei(n,t){n[5]+=t;let e=n,r=n[3];for(;null!==r&&(1===t&&1===e[5]||-1===t&&0===e[5]);)r[5]+=t,e=r,r=r[3]}const $e={lFrame:Bs(null),bindingsEnabled:!0};function Jc(){return $e.bindingsEnabled}function J(){return $e.lFrame.lView}function rt(){return $e.lFrame.tView}function Va(n){return $e.lFrame.contextLView=n,n[8]}function mr(n){return $e.lFrame.contextLView=null,n}function nn(){let n=Xc();for(;null!==n&&64===n.type;)n=n.parent;return n}function Xc(){return $e.lFrame.currentTNode}function Fn(n,t){const e=$e.lFrame;e.currentTNode=n,e.isParent=t}function Ba(){return $e.lFrame.isParent}function el(){$e.lFrame.isParent=!1}function oi(){return $e.lFrame.bindingIndex}function oo(){return $e.lFrame.bindingIndex++}function si(n){const t=$e.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+n,e}function $n(n,t){const e=$e.lFrame;e.bindingIndex=e.bindingRootIndex=n,nr(t)}function nr(n){$e.lFrame.currentDirectiveIndex=n}function zo(){return $e.lFrame.currentQueryIndex}function Go(n){$e.lFrame.currentQueryIndex=n}function Di(n){const t=n[1];return 2===t.type?t.declTNode:1===t.type?n[6]:null}function il(n,t,e){if(e&xe.SkipSelf){let i=t,o=n;for(;!(i=i.parent,null!==i||e&xe.Host||(i=Di(o),null===i||(o=o[15],10&i.type))););if(null===i)return!1;t=i,n=o}const r=$e.lFrame=id();return r.currentTNode=t,r.lView=n,!0}function Vs(n){const t=id(),e=n[1];$e.lFrame=t,t.currentTNode=e.firstChild,t.lView=n,t.tView=e,t.contextLView=n,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function id(){const n=$e.lFrame,t=null===n?null:n.child;return null===t?Bs(n):t}function Bs(n){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=t),t}function od(){const n=$e.lFrame;return $e.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const sd=od;function qo(){const n=od();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function dn(){return $e.lFrame.selectedIndex}function wi(n){$e.lFrame.selectedIndex=n}function At(){const n=$e.lFrame;return ja(n.tView,n.selectedIndex)}function Us(n,t){for(let e=t.directiveStart,r=t.directiveEnd;e<r;e++){const o=n.data[e].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:d,ngOnDestroy:p}=o;s&&(n.contentHooks||(n.contentHooks=[])).push(-e,s),a&&((n.contentHooks||(n.contentHooks=[])).push(e,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(e,a)),c&&(n.viewHooks||(n.viewHooks=[])).push(-e,c),d&&((n.viewHooks||(n.viewHooks=[])).push(e,d),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(e,d)),null!=p&&(n.destroyHooks||(n.destroyHooks=[])).push(e,p)}}function Ua(n,t,e){f(n,t,3,e)}function l(n,t,e,r){(3&n[2])===e&&f(n,t,e,r)}function u(n,t){let e=n[2];(3&e)===t&&(e&=2047,e+=1,n[2]=e)}function f(n,t,e,r){const o=null!=r?r:-1,s=t.length-1;let a=0;for(let c=void 0!==r?65535&n[18]:0;c<s;c++)if("number"==typeof t[c+1]){if(a=t[c],null!=r&&a>=r)break}else t[c]<0&&(n[18]+=65536),(a<o||-1==o)&&(h(n,e,t,c),n[18]=(4294901760&n[18])+c+2),c++}function h(n,t,e,r){const i=e[r]<0,o=e[r+1],a=n[i?-e[r]:e[r]];if(i){if(n[2]>>11<n[18]>>16&&(3&n[2])===t){n[2]+=2048;try{o.call(a)}finally{}}}else try{o.call(a)}finally{}}const m=-1;class v{constructor(t,e,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=r}}function L(n,t,e){let r=0;for(;r<e.length;){const i=e[r];if("number"==typeof i){if(0!==i)break;r++;const o=e[r++],s=e[r++],a=e[r++];n.setAttribute(t,s,a,o)}else{const o=i,s=e[++r];ue(o)?n.setProperty(t,o,s):n.setAttribute(t,o,s),r++}}return r}function ee(n){return 3===n||4===n||6===n}function ue(n){return 64===n.charCodeAt(0)}function te(n,t){if(null!==t&&0!==t.length)if(null===n||0===n.length)n=t.slice();else{let e=-1;for(let r=0;r<t.length;r++){const i=t[r];"number"==typeof i?e=i:0===e||be(n,e,i,null,-1===e||2===e?t[++r]:null)}}return n}function be(n,t,e,r,i){let o=0,s=n.length;if(-1===t)s=-1;else for(;o<n.length;){const a=n[o++];if("number"==typeof a){if(a===t){s=-1;break}if(a>t){s=o-1;break}}}for(;o<n.length;){const a=n[o];if("number"==typeof a)break;if(a===e){if(null===r)return void(null!==i&&(n[o+1]=i));if(r===n[o+1])return void(n[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(n.splice(s,0,t),o=s+1),n.splice(o++,0,e),null!==r&&n.splice(o++,0,r),null!==i&&n.splice(o++,0,i)}function ke(n){return n!==m}function je(n){return 32767&n}function yt(n,t){let e=function pt(n){return n>>16}(n),r=t;for(;e>0;)r=r[15],e--;return r}let Je=!0;function gt(n){const t=Je;return Je=n,t}let zA=0;const Ti={};function ol(n,t){const e=Mp(n,t);if(-1!==e)return e;const r=t[1];r.firstCreatePass&&(n.injectorIndex=t.length,Tp(r.data,n),Tp(t,null),Tp(r.blueprint,null));const i=ld(n,t),o=n.injectorIndex;if(ke(i)){const s=je(i),a=yt(i,t),c=a[1].data;for(let d=0;d<8;d++)t[o+d]=a[s+d]|c[s+d]}return t[o+8]=i,o}function Tp(n,t){n.push(0,0,0,0,0,0,0,0,t)}function Mp(n,t){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===t[n.injectorIndex+8]?-1:n.injectorIndex}function ld(n,t){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let e=0,r=null,i=t;for(;null!==i;){if(r=I_(i),null===r)return m;if(e++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|e<<16}return m}function ud(n,t,e){!function GA(n,t,e){let r;"string"==typeof e?r=e.charCodeAt(0)||0:e.hasOwnProperty(Ms)&&(r=e[Ms]),null==r&&(r=e[Ms]=zA++);const i=255&r;t.data[n+(i>>5)]|=1<<i}(n,t,e)}function E_(n,t,e){if(e&xe.Optional||void 0!==n)return n;ti()}function S_(n,t,e,r){if(e&xe.Optional&&void 0===r&&(r=null),0==(e&(xe.Self|xe.Host))){const i=n[9],o=Dt(void 0);try{return i?i.get(t,r,e&xe.Optional):ws(t,r,e&xe.Optional)}finally{Dt(o)}}return E_(r,0,e)}function D_(n,t,e,r=xe.Default,i){if(null!==n){if(1024&t[2]){const s=function QA(n,t,e,r,i){let o=n,s=t;for(;null!==o&&null!==s&&1024&s[2]&&!(256&s[2]);){const a=w_(o,s,e,r|xe.Self,Ti);if(a!==Ti)return a;let c=o.parent;if(!c){const d=s[21];if(d){const p=d.get(e,Ti,r);if(p!==Ti)return p}c=I_(s),s=s[15]}o=c}return i}(n,t,e,r,Ti);if(s!==Ti)return s}const o=w_(n,t,e,r,Ti);if(o!==Ti)return o}return S_(t,e,r,i)}function w_(n,t,e,r,i){const o=function KA(n){if("string"==typeof n)return n.charCodeAt(0)||0;const t=n.hasOwnProperty(Ms)?n[Ms]:void 0;return"number"==typeof t?t>=0?255&t:YA:t}(e);if("function"==typeof o){if(!il(t,n,r))return r&xe.Host?E_(i,0,r):S_(t,e,r,i);try{const s=o(r);if(null!=s||r&xe.Optional)return s;ti()}finally{sd()}}else if("number"==typeof o){let s=null,a=Mp(n,t),c=m,d=r&xe.Host?t[16][6]:null;for((-1===a||r&xe.SkipSelf)&&(c=-1===a?ld(n,t):t[a+8],c!==m&&M_(r,!1)?(s=t[1],a=je(c),t=yt(c,t)):a=-1);-1!==a;){const p=t[1];if(T_(o,a,p.data)){const g=WA(a,t,e,s,r,d);if(g!==Ti)return g}c=t[a+8],c!==m&&M_(r,t[1].data[a+8]===d)&&T_(o,a,t)?(s=p,a=je(c),t=yt(c,t)):a=-1}}return i}function WA(n,t,e,r,i,o){const s=t[1],a=s.data[n+8],p=dd(a,s,e,null==r?ka(a)&&Je:r!=s&&0!=(3&a.type),i&xe.Host&&o===a);return null!==p?sl(t,s,p,a):Ti}function dd(n,t,e,r,i){const o=n.providerIndexes,s=t.data,a=1048575&o,c=n.directiveStart,p=o>>20,_=i?a+p:n.directiveEnd;for(let E=r?a:a+p;E<_;E++){const D=s[E];if(E<c&&e===D||E>=c&&D.type===e)return E}if(i){const E=s[c];if(E&&gr(E)&&E.type===e)return c}return null}function sl(n,t,e,r){let i=n[e];const o=t.data;if(function b(n){return n instanceof v}(i)){const s=i;s.resolving&&function ep(n,t){const e=t?`. Dependency path: ${t.join(" > ")} > ${n}`:"";throw new Y(-200,`Circular dependency in DI detected for ${n}${e}`)}(function st(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Se(n)}(o[e]));const a=gt(s.canSeeViewProviders);s.resolving=!0;const c=s.injectImpl?Dt(s.injectImpl):null;il(n,r,xe.Default);try{i=n[e]=s.factory(void 0,o,n,r),t.firstCreatePass&&e>=r.directiveStart&&function so(n,t,e){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){const s=Os(t);(e.preOrderHooks||(e.preOrderHooks=[])).push(n,s),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n,s)}i&&(e.preOrderHooks||(e.preOrderHooks=[])).push(0-n,i),o&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n,o),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n,o))}(e,o[e],t)}finally{null!==c&&Dt(c),gt(a),s.resolving=!1,sd()}}return i}function T_(n,t,e){return!!(e[t+(n>>5)]&1<<n)}function M_(n,t){return!(n&xe.Self||n&xe.Host&&t)}class Ha{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,r){return D_(this._tNode,this._lView,t,r,e)}}function YA(){return new Ha(nn(),J())}function Nn(n){return fr(()=>{const t=n.prototype.constructor,e=t[Kt]||Ip(t),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const o=i[Kt]||Ip(i);if(o&&o!==e)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Ip(n){return Re(n)?()=>{const t=Ip(De(n));return t&&t()}:io(n)}function I_(n){const t=n[1],e=t.type;return 2===e?t.declTNode:1===e?n[6]:null}const qa="__parameters__";function Ka(n,t,e){return fr(()=>{const r=function Ap(n){return function(...e){if(n){const r=n(...e);for(const i in r)this[i]=r[i]}}}(t);function i(...o){if(this instanceof i)return r.apply(this,o),this;const s=new i(...o);return a.annotation=s,a;function a(c,d,p){const g=c.hasOwnProperty(qa)?c[qa]:Object.defineProperty(c,qa,{value:[]})[qa];for(;g.length<=p;)g.push(null);return(g[p]=g[p]||[]).push(s),c}}return e&&(i.prototype=Object.create(e.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}class ve{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=de({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ar(n,t){void 0===t&&(t=n);for(let e=0;e<n.length;e++){let r=n[e];Array.isArray(r)?(t===n&&(t=n.slice(0,e)),Ar(r,t)):t!==n&&t.push(r)}return t}function ao(n,t){n.forEach(e=>Array.isArray(e)?ao(e,t):t(e))}function x_(n,t,e){t>=n.length?n.push(e):n.splice(t,0,e)}function fd(n,t){return t>=n.length-1?n.pop():n.splice(t,1)[0]}function ll(n,t){const e=[];for(let r=0;r<n;r++)e.push(t);return e}function xr(n,t,e){let r=Ya(n,t);return r>=0?n[1|r]=e:(r=~r,function ex(n,t,e,r){let i=n.length;if(i==t)n.push(e,r);else if(1===i)n.push(r,n[0]),n[0]=e;else{for(i--,n.push(n[i-1],n[i]);i>t;)n[i]=n[i-2],i--;n[t]=e,n[t+1]=r}}(n,r,t,e)),r}function Pp(n,t){const e=Ya(n,t);if(e>=0)return n[1|e]}function Ya(n,t){return function k_(n,t,e){let r=0,i=n.length>>e;for(;i!==r;){const o=r+(i-r>>1),s=n[o<<e];if(t===s)return o<<e;s>t?i=o:r=o+1}return~(i<<e)}(n,t,1)}const ul={},kp="__NG_DI_FLAG__",pd="ngTempTokenPath",cx=/\n/gm,O_="__source";let dl;function Qa(n){const t=dl;return dl=n,t}function ux(n,t=xe.Default){if(void 0===dl)throw new Y(-203,!1);return null===dl?ws(n,void 0,t):dl.get(n,t&xe.Optional?null:void 0,t)}function Q(n,t=xe.Default){return(function Lu(){return No}()||ux)(De(n),t)}function qt(n,t=xe.Default){return"number"!=typeof t&&(t=0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)),Q(n,t)}function Op(n){const t=[];for(let e=0;e<n.length;e++){const r=De(n[e]);if(Array.isArray(r)){if(0===r.length)throw new Y(900,!1);let i,o=xe.Default;for(let s=0;s<r.length;s++){const a=r[s],c=dx(a);"number"==typeof c?-1===c?i=a.token:o|=c:i=a}t.push(Q(i,o))}else t.push(Q(r))}return t}function fl(n,t){return n[kp]=t,n.prototype[kp]=t,n}function dx(n){return n[kp]}const Wo=fl(Ka("Optional"),8),Ja=fl(Ka("SkipSelf"),4);var yr=(()=>((yr=yr||{})[yr.Important=1]="Important",yr[yr.DashCase=2]="DashCase",yr))();const Vp=new Map;let Ax=0;const Up="__ngContext__";function Hn(n,t){Rn(t)?(n[Up]=t[20],function Px(n){Vp.set(n[20],n)}(t)):n[Up]=t}function Hp(n,t){return undefined(n,t)}function ml(n){const t=n[3];return pr(t)?t[3]:t}function zp(n){return tb(n[13])}function Gp(n){return tb(n[4])}function tb(n){for(;null!==n&&!pr(n);)n=n[4];return n}function Xa(n,t,e,r,i){if(null!=r){let o,s=!1;pr(r)?o=r:Rn(r)&&(s=!0,r=r[0]);const a=Ft(r);0===n&&null!==e?null==i?ab(t,e,a):$s(t,e,a,i||null,!0):1===n&&null!==e?$s(t,e,a,i||null,!0):2===n?function Zp(n,t,e){const r=vd(n,t);r&&function Xx(n,t,e,r){n.removeChild(t,e,r)}(n,r,t,e)}(t,a,s):3===n&&t.destroyNode(a),null!=o&&function nP(n,t,e,r,i){const o=e[7];o!==Ft(e)&&Xa(t,n,r,o,i);for(let a=10;a<e.length;a++){const c=e[a];vl(c[1],c,n,t,r,o)}}(t,n,o,e,i)}}function Wp(n,t,e){return n.createElement(t,e)}function rb(n,t){const e=n[9],r=e.indexOf(t),i=t[3];512&t[2]&&(t[2]&=-513,Ei(i,-1)),e.splice(r,1)}function Kp(n,t){if(n.length<=10)return;const e=10+t,r=n[e];if(r){const i=r[17];null!==i&&i!==n&&rb(i,r),t>0&&(n[e-1][4]=r[4]);const o=fd(n,10+t);!function Gx(n,t){vl(n,t,t[11],2,null,null),t[0]=null,t[6]=null}(r[1],r);const s=o[19];null!==s&&s.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-65}return r}function ib(n,t){if(!(128&t[2])){const e=t[11];e.destroyNode&&vl(n,t,e,3,null,null),function Kx(n){let t=n[13];if(!t)return Yp(n[1],n);for(;t;){let e=null;if(Rn(t))e=t[13];else{const r=t[10];r&&(e=r)}if(!e){for(;t&&!t[4]&&t!==n;)Rn(t)&&Yp(t[1],t),t=t[3];null===t&&(t=n),Rn(t)&&Yp(t[1],t),e=t&&t[4]}t=e}}(t)}}function Yp(n,t){if(!(128&t[2])){t[2]&=-65,t[2]|=128,function Zx(n,t){let e;if(null!=n&&null!=(e=n.destroyHooks))for(let r=0;r<e.length;r+=2){const i=t[e[r]];if(!(i instanceof v)){const o=e[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],c=o[s+1];try{c.call(a)}finally{}}else try{o.call(i)}finally{}}}}(n,t),function Jx(n,t){const e=n.cleanup,r=t[7];let i=-1;if(null!==e)for(let o=0;o<e.length-1;o+=2)if("string"==typeof e[o]){const s=e[o+1],a="function"==typeof s?s(t):Ft(t[s]),c=r[i=e[o+2]],d=e[o+3];"boolean"==typeof d?a.removeEventListener(e[o],c,d):d>=0?r[i=d]():r[i=-d].unsubscribe(),o+=2}else{const s=r[i=e[o+1]];e[o].call(s)}if(null!==r){for(let o=i+1;o<r.length;o++)(0,r[o])();t[7]=null}}(n,t),1===t[1].type&&t[11].destroy();const e=t[17];if(null!==e&&pr(t[3])){e!==t[3]&&rb(e,t);const r=t[19];null!==r&&r.detachView(n)}!function Rx(n){Vp.delete(n[20])}(t)}}function ob(n,t,e){return function sb(n,t,e){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return e[0];if(2&r.flags){const i=n.data[r.directiveStart].encapsulation;if(i===hr.None||i===hr.Emulated)return null}return It(r,e)}(n,t.parent,e)}function $s(n,t,e,r,i){n.insertBefore(t,e,r,i)}function ab(n,t,e){n.appendChild(t,e)}function cb(n,t,e,r,i){null!==r?$s(n,t,e,r,i):ab(n,t,e)}function vd(n,t){return n.parentNode(t)}function lb(n,t,e){return db(n,t,e)}let ng,db=function ub(n,t,e){return 40&n.type?It(n,e):null};function yd(n,t,e,r){const i=ob(n,r,t),o=t[11],a=lb(r.parent||t[6],r,t);if(null!=i)if(Array.isArray(e))for(let c=0;c<e.length;c++)cb(o,i,e[c],a,!1);else cb(o,i,e,a,!1)}function _d(n,t){if(null!==t){const e=t.type;if(3&e)return It(t,n);if(4&e)return Jp(-1,n[t.index]);if(8&e){const r=t.child;if(null!==r)return _d(n,r);{const i=n[t.index];return pr(i)?Jp(-1,i):Ft(i)}}if(32&e)return Hp(t,n)()||Ft(n[t.index]);{const r=hb(n,t);return null!==r?Array.isArray(r)?r[0]:_d(ml(n[16]),r):_d(n,t.next)}}return null}function hb(n,t){return null!==t?n[16][6].projection[t.projection]:null}function Jp(n,t){const e=10+n+1;if(e<t.length){const r=t[e],i=r[1].firstChild;if(null!==i)return _d(r,i)}return t[7]}function Xp(n,t,e,r,i,o,s){for(;null!=e;){const a=r[e.index],c=e.type;if(s&&0===t&&(a&&Hn(Ft(a),r),e.flags|=4),64!=(64&e.flags))if(8&c)Xp(n,t,e.child,r,i,o,!1),Xa(t,n,i,a,o);else if(32&c){const d=Hp(e,r);let p;for(;p=d();)Xa(t,n,i,p,o);Xa(t,n,i,a,o)}else 16&c?pb(n,t,r,e,i,o):Xa(t,n,i,a,o);e=s?e.projectionNext:e.next}}function vl(n,t,e,r,i,o){Xp(e,r,n.firstChild,t,i,o,!1)}function pb(n,t,e,r,i,o){const s=e[16],c=s[6].projection[r.projection];if(Array.isArray(c))for(let d=0;d<c.length;d++)Xa(t,n,i,c[d],o);else Xp(n,t,c,s[3],i,o,!0)}function gb(n,t,e){n.setAttribute(t,"style",e)}function eg(n,t,e){""===e?n.removeAttribute(t,"class"):n.setAttribute(t,"class",e)}class zs{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Pr(n){return n instanceof zs?n.changingThisBreaksApplicationSecurity:n}const EP=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Et=(()=>((Et=Et||{})[Et.NONE=0]="NONE",Et[Et.HTML=1]="HTML",Et[Et.STYLE=2]="STYLE",Et[Et.SCRIPT=3]="SCRIPT",Et[Et.URL=4]="URL",Et[Et.RESOURCE_URL=5]="RESOURCE_URL",Et))();function ec(n){const t=function _l(){const n=J();return n&&n[12]}();return t?t.sanitize(Et.URL,n)||"":function Mi(n,t){const e=function hP(n){return n instanceof zs&&n.getTypeName()||null}(n);if(null!=e&&e!==t){if("ResourceURL"===e&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${e} (see https://g.co/ng/security#xss)`)}return e===t}(n,"URL")?Pr(n):function Ed(n){return(n=String(n)).match(EP)?n:"unsafe:"+n}(Se(n))}const ag=new ve("ENVIRONMENT_INITIALIZER"),Ib=new ve("INJECTOR",-1),Ab=new ve("INJECTOR_DEF_TYPES");class xb{get(t,e=ul){if(e===ul){const r=new Error(`NullInjectorError: No provider for ${nt(t)}!`);throw r.name="NullInjectorError",r}return e}}function FP(...n){return{\u0275providers:Pb(0,n)}}function Pb(n,...t){const e=[],r=new Set;let i;return ao(t,o=>{const s=o;cg(s,e,[],r)&&(i||(i=[]),i.push(s))}),void 0!==i&&Rb(i,e),e}function Rb(n,t){for(let e=0;e<n.length;e++){const{providers:i}=n[e];ao(i,o=>{t.push(o)})}}function cg(n,t,e,r){if(!(n=De(n)))return!1;let i=null,o=yi(n);const s=!o&&Ct(n);if(o||s){if(s&&!s.standalone)return!1;i=n}else{const c=n.ngModule;if(o=yi(c),!o)return!1;i=c}const a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){const c="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const d of c)cg(d,t,e,r)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let d;r.add(i);try{ao(o.imports,p=>{cg(p,t,e,r)&&(d||(d=[]),d.push(p))})}finally{}void 0!==d&&Rb(d,t)}if(!a){const d=io(i)||(()=>new i);t.push({provide:i,useFactory:d,deps:dt},{provide:Ab,useValue:i,multi:!0},{provide:ag,useValue:()=>Q(i),multi:!0})}const c=o.providers;null==c||a||ao(c,p=>{t.push(p)})}}return i!==n&&void 0!==n.providers}const NP=Tt({provide:String,useValue:Tt});function lg(n){return null!==n&&"object"==typeof n&&NP in n}function Gs(n){return"function"==typeof n}const ug=new ve("Set Injector scope."),Dd={},jP={};let dg;function wd(){return void 0===dg&&(dg=new xb),dg}class Ko{}class Fb extends Ko{constructor(t,e,r,i){super(),this.parent=e,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,hg(t,s=>this.processProvider(s)),this.records.set(Ib,tc(void 0,this)),i.has("environment")&&this.records.set(Ko,tc(void 0,this));const o=this.records.get(ug);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Ab.multi,dt,xe.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();for(const t of this._onDestroyHooks)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(t){this._onDestroyHooks.push(t)}runInContext(t){this.assertNotDestroyed();const e=Qa(this),r=Dt(void 0);try{return t()}finally{Qa(e),Dt(r)}}get(t,e=ul,r=xe.Default){this.assertNotDestroyed();const i=Qa(this),o=Dt(void 0);try{if(!(r&xe.SkipSelf)){let a=this.records.get(t);if(void 0===a){const c=function HP(n){return"function"==typeof n||"object"==typeof n&&n instanceof ve}(t)&&Fo(t);a=c&&this.injectableDefInScope(c)?tc(fg(t),Dd):null,this.records.set(t,a)}if(null!=a)return this.hydrate(t,a)}return(r&xe.Self?wd():this.parent).get(t,e=r&xe.Optional&&e===ul?null:e)}catch(s){if("NullInjectorError"===s.name){if((s[pd]=s[pd]||[]).unshift(nt(t)),i)throw s;return function fx(n,t,e,r){const i=n[pd];throw t[O_]&&i.unshift(t[O_]),n.message=function hx(n,t,e,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=nt(t);if(Array.isArray(t))i=t.map(nt).join(" -> ");else if("object"==typeof t){let o=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):nt(a)))}i=`{${o.join(", ")}}`}return`${e}${r?"("+r+")":""}[${i}]: ${n.replace(cx,"\n  ")}`}("\n"+n.message,i,e,r),n.ngTokenPath=i,n[pd]=null,n}(s,t,"R3InjectorError",this.source)}throw s}finally{Dt(o),Qa(i)}}resolveInjectorInitializers(){const t=Qa(this),e=Dt(void 0);try{const r=this.get(ag.multi,dt,xe.Self);for(const i of r)i()}finally{Qa(t),Dt(e)}}toString(){const t=[],e=this.records;for(const r of e.keys())t.push(nt(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Y(205,!1)}processProvider(t){let e=Gs(t=De(t))?t:De(t&&t.provide);const r=function BP(n){return lg(n)?tc(void 0,n.useValue):tc(Nb(n),Dd)}(t);if(Gs(t)||!0!==t.multi)this.records.get(e);else{let i=this.records.get(e);i||(i=tc(void 0,Dd,!0),i.factory=()=>Op(i.multi),this.records.set(e,i)),e=t,i.multi.push(t)}this.records.set(e,r)}hydrate(t,e){return e.value===Dd&&(e.value=jP,e.value=e.factory()),"object"==typeof e.value&&e.value&&function $P(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=De(t.providedIn);return"string"==typeof e?"any"===e||this.scopes.has(e):this.injectorDefTypes.has(e)}}function fg(n){const t=Fo(n),e=null!==t?t.factory:io(n);if(null!==e)return e;if(n instanceof ve)throw new Y(204,!1);if(n instanceof Function)return function VP(n){const t=n.length;if(t>0)throw ll(t,"?"),new Y(204,!1);const e=function sp(n){const t=n&&(n[Ds]||n[Nu]);if(t){const e=function Qi(n){if(n.hasOwnProperty("name"))return n.name;const t=(""+n).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${e}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${e}" class.`),t}return null}(n);return null!==e?()=>e.factory(n):()=>new n}(n);throw new Y(204,!1)}function Nb(n,t,e){let r;if(Gs(n)){const i=De(n);return io(i)||fg(i)}if(lg(n))r=()=>De(n.useValue);else if(function Ob(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...Op(n.deps||[]));else if(function kb(n){return!(!n||!n.useExisting)}(n))r=()=>Q(De(n.useExisting));else{const i=De(n&&(n.useClass||n.provide));if(!function UP(n){return!!n.deps}(n))return io(i)||fg(i);r=()=>new i(...Op(n.deps))}return r}function tc(n,t,e=!1){return{factory:n,value:t,multi:e?[]:void 0}}function zP(n){return!!n.\u0275providers}function hg(n,t){for(const e of n)Array.isArray(e)?hg(e,t):zP(e)?hg(e.\u0275providers,t):t(e)}class Lb{}class WP{resolveComponentFactory(t){throw function qP(n){const t=Error(`No component factory found for ${nt(n)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=n,t}(t)}}let bl=(()=>{class n{}return n.NULL=new WP,n})();function KP(){return nc(nn(),J())}function nc(n,t){return new fn(It(n,t))}let fn=(()=>{class n{constructor(e){this.nativeElement=e}}return n.__NG_ELEMENT_ID__=KP,n})();function YP(n){return n instanceof fn?n.nativeElement:n}class Cl{}let lo=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function QP(){const n=J(),e=Yt(nn().index,n);return(Rn(e)?e:n)[11]}(),n})(),JP=(()=>{class n{}return n.\u0275prov=de({token:n,providedIn:"root",factory:()=>null}),n})();class Yo{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const ZP=new Yo("14.2.12"),pg={};function mg(n){return n.ngOriginalError}class Ii{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t);this._console.error("ERROR",t),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(t){let e=t&&mg(t);for(;e&&mg(e);)e=mg(e);return e||null}}function uo(n){return n instanceof Function?n():n}function Bb(n,t,e){let r=n.length;for(;;){const i=n.indexOf(t,e);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const o=t.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}e=i+1}}const Ub="ng-template";function lR(n,t,e){let r=0;for(;r<n.length;){let i=n[r++];if(e&&"class"===i){if(i=n[r],-1!==Bb(i.toLowerCase(),t,0))return!0}else if(1===i){for(;r<n.length&&"string"==typeof(i=n[r++]);)if(i.toLowerCase()===t)return!0;return!1}}return!1}function $b(n){return 4===n.type&&n.value!==Ub}function uR(n,t,e){return t===(4!==n.type||e?n.value:Ub)}function dR(n,t,e){let r=4;const i=n.attrs||[],o=function pR(n){for(let t=0;t<n.length;t++)if(ee(n[t]))return t;return n.length}(i);let s=!1;for(let a=0;a<t.length;a++){const c=t[a];if("number"!=typeof c){if(!s)if(4&r){if(r=2|1&r,""!==c&&!uR(n,c,e)||""===c&&1===t.length){if(ai(r))return!1;s=!0}}else{const d=8&r?c:t[++a];if(8&r&&null!==n.attrs){if(!lR(n.attrs,d,e)){if(ai(r))return!1;s=!0}continue}const g=fR(8&r?"class":c,i,$b(n),e);if(-1===g){if(ai(r))return!1;s=!0;continue}if(""!==d){let _;_=g>o?"":i[g+1].toLowerCase();const E=8&r?_:null;if(E&&-1!==Bb(E,d,0)||2&r&&d!==_){if(ai(r))return!1;s=!0}}}}else{if(!s&&!ai(r)&&!ai(c))return!1;if(s&&ai(c))continue;s=!1,r=c|1&r}}return ai(r)||s}function ai(n){return 0==(1&n)}function fR(n,t,e,r){if(null===t)return-1;let i=0;if(r||!e){let o=!1;for(;i<t.length;){const s=t[i];if(s===n)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=t[++i];for(;"string"==typeof a;)a=t[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function gR(n,t){let e=n.indexOf(4);if(e>-1)for(e++;e<n.length;){const r=n[e];if("number"==typeof r)return-1;if(r===t)return e;e++}return-1}(t,n)}function Hb(n,t,e=!1){for(let r=0;r<t.length;r++)if(dR(n,t[r],e))return!0;return!1}function mR(n,t){e:for(let e=0;e<t.length;e++){const r=t[e];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function zb(n,t){return n?":not("+t.trim()+")":t}function vR(n){let t=n[0],e=1,r=2,i="",o=!1;for(;e<n.length;){let s=n[e];if("string"==typeof s)if(2&r){const a=n[++e];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!ai(s)&&(t+=zb(o,i),i=""),r=s,o=o||!ai(r);e++}return""!==i&&(t+=zb(o,i)),t}const qe={};function Ve(n){Gb(rt(),J(),dn()+n,!1)}function Gb(n,t,e,r){if(!r)if(3==(3&t[2])){const o=n.preOrderCheckHooks;null!==o&&Ua(t,o,e)}else{const o=n.preOrderHooks;null!==o&&l(t,o,0,e)}wi(e)}function Yb(n,t=null,e=null,r){const i=Qb(n,t,e,r);return i.resolveInjectorInitializers(),i}function Qb(n,t=null,e=null,r,i=new Set){const o=[e||dt,FP(n)];return r=r||("object"==typeof n?void 0:nt(n)),new Fb(o,t||wd(),r||null,i)}let _r=(()=>{class n{static create(e,r){var i;if(Array.isArray(e))return Yb({name:""},r,e,"");{const o=null!==(i=e.name)&&void 0!==i?i:"";return Yb({name:o},e.parent,e.providers,o)}}}return n.THROW_IF_NOT_FOUND=ul,n.NULL=new xb,n.\u0275prov=de({token:n,providedIn:"any",factory:()=>Q(Ib)}),n.__NG_ELEMENT_ID__=-1,n})();function V(n,t=xe.Default){const e=J();return null===e?Q(n,t):D_(nn(),e,De(n),t)}function Cg(){throw new Error("invalid")}function Md(n,t){return n<<17|t<<2}function ci(n){return n>>17&32767}function Eg(n){return 2|n}function fo(n){return(131068&n)>>2}function Sg(n,t){return-131069&n|t<<2}function Dg(n){return 1|n}function p0(n,t){const e=n.contentQueries;if(null!==e)for(let r=0;r<e.length;r+=2){const i=e[r],o=e[r+1];if(-1!==o){const s=n.data[o];Go(i),s.contentQueries(2,t[o],o)}}}function xd(n,t,e,r,i,o,s,a,c,d,p){const g=t.blueprint.slice();return g[0]=i,g[2]=76|r,(null!==p||n&&1024&n[2])&&(g[2]|=1024),Xu(g),g[3]=g[15]=n,g[8]=e,g[10]=s||n&&n[10],g[11]=a||n&&n[11],g[12]=c||n&&n[12]||null,g[9]=d||n&&n[9]||null,g[6]=o,g[20]=function xx(){return Ax++}(),g[21]=p,g[16]=2==t.type?n[16]:g,g}function oc(n,t,e,r,i){let o=n.data[t];if(null===o)o=function Rg(n,t,e,r,i){const o=Xc(),s=Ba(),c=n.data[t]=function XR(n,t,e,r,i,o){return{type:e,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,e,t,r,i);return null===n.firstChild&&(n.firstChild=c),null!==o&&(s?null==o.child&&null!==c.parent&&(o.child=c):null===o.next&&(o.next=c)),c}(n,t,e,r,i),function nd(){return $e.lFrame.inI18n}()&&(o.flags|=64);else if(64&o.type){o.type=e,o.value=r,o.attrs=i;const s=function Ls(){const n=$e.lFrame,t=n.currentTNode;return n.isParent?t:t.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return Fn(o,!0),o}function sc(n,t,e,r){if(0===e)return-1;const i=t.length;for(let o=0;o<e;o++)t.push(r),n.blueprint.push(r),n.data.push(null);return i}function kg(n,t,e){Vs(t);try{const r=n.viewQuery;null!==r&&Ug(1,r,e);const i=n.template;null!==i&&g0(n,t,i,1,e),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&p0(n,t),n.staticViewQueries&&Ug(2,n.viewQuery,e);const o=n.components;null!==o&&function QR(n,t){for(let e=0;e<t.length;e++)gk(n,t[e])}(t,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{t[2]&=-5,qo()}}function Pd(n,t,e,r){const i=t[2];if(128!=(128&i)){Vs(t);try{Xu(t),function Si(n){return $e.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==e&&g0(n,t,e,2,r);const s=3==(3&i);if(s){const d=n.preOrderCheckHooks;null!==d&&Ua(t,d,null)}else{const d=n.preOrderHooks;null!==d&&l(t,d,0,null),u(t,0)}if(function hk(n){for(let t=zp(n);null!==t;t=Gp(t)){if(!t[2])continue;const e=t[9];for(let r=0;r<e.length;r++){const i=e[r],o=i[3];0==(512&i[2])&&Ei(o,1),i[2]|=512}}}(t),function fk(n){for(let t=zp(n);null!==t;t=Gp(t))for(let e=10;e<t.length;e++){const r=t[e],i=r[1];Ns(r)&&Pd(i,r,i.template,r[8])}}(t),null!==n.contentQueries&&p0(n,t),s){const d=n.contentCheckHooks;null!==d&&Ua(t,d)}else{const d=n.contentHooks;null!==d&&l(t,d,1),u(t,1)}!function KR(n,t){const e=n.hostBindingOpCodes;if(null!==e)try{for(let r=0;r<e.length;r++){const i=e[r];if(i<0)wi(~i);else{const o=i,s=e[++r],a=e[++r];$n(s,o),a(2,t[o])}}}finally{wi(-1)}}(n,t);const a=n.components;null!==a&&function YR(n,t){for(let e=0;e<t.length;e++)pk(n,t[e])}(t,a);const c=n.viewQuery;if(null!==c&&Ug(2,c,r),s){const d=n.viewCheckHooks;null!==d&&Ua(t,d)}else{const d=n.viewHooks;null!==d&&l(t,d,2),u(t,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),t[2]&=-41,512&t[2]&&(t[2]&=-513,Ei(t[3],-1))}finally{qo()}}}function g0(n,t,e,r,i){const o=dn(),s=2&r;try{wi(-1),s&&t.length>22&&Gb(n,t,22,!1),e(r,i)}finally{wi(o)}}function Og(n,t,e){!Jc()||(function ik(n,t,e,r){const i=e.directiveStart,o=e.directiveEnd;n.firstCreatePass||ol(e,t),Hn(r,t);const s=e.initialInputs;for(let a=i;a<o;a++){const c=n.data[a],d=gr(c);d&&lk(t,e,c);const p=sl(t,n,a,e);Hn(p,t),null!==s&&uk(0,a-i,p,c,0,s),d&&(Yt(e.index,t)[8]=p)}}(n,t,e,It(e,t)),128==(128&e.flags)&&function ok(n,t,e){const r=e.directiveStart,i=e.directiveEnd,o=e.index,s=function nl(){return $e.lFrame.currentDirectiveIndex}();try{wi(o);for(let a=r;a<i;a++){const c=n.data[a],d=t[a];nr(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&S0(c,d)}}finally{wi(-1),nr(s)}}(n,t,e))}function Fg(n,t,e=It){const r=t.localNames;if(null!==r){let i=t.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?e(t,n):n[s];n[i++]=a}}}function v0(n){const t=n.tView;return null===t||t.incompleteFirstPass?n.tView=Ng(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):t}function Ng(n,t,e,r,i,o,s,a,c,d){const p=22+r,g=p+i,_=function JR(n,t){const e=[];for(let r=0;r<t;r++)e.push(r<n?null:qe);return e}(p,g),E="function"==typeof d?d():d;return _[1]={type:n,blueprint:_,template:e,queries:null,viewQuery:a,declTNode:t,data:_.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:c,consts:E,incompleteFirstPass:!1}}function y0(n,t,e,r){const i=I0(t);null===e?i.push(r):(i.push(e),n.firstCreatePass&&A0(n).push(r,i.length-1))}function _0(n,t,e){for(let r in n)if(n.hasOwnProperty(r)){const i=n[r];(e=null===e?{}:e).hasOwnProperty(r)?e[r].push(t,i):e[r]=[t,i]}return e}function b0(n,t){const r=t.directiveEnd,i=n.data,o=t.attrs,s=[];let a=null,c=null;for(let d=t.directiveStart;d<r;d++){const p=i[d],g=p.inputs,_=null===o||$b(t)?null:dk(g,o);s.push(_),a=_0(g,d,a),c=_0(p.outputs,d,c)}null!==a&&(a.hasOwnProperty("class")&&(t.flags|=16),a.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=s,t.inputs=a,t.outputs=c}function Rr(n,t,e,r,i,o,s,a){const c=It(t,e);let p,d=t.inputs;!a&&null!=d&&(p=d[r])?($g(n,e,p,r,i),ka(t)&&C0(e,t.index)):3&t.type&&(r=function ek(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=s?s(i,t.value||"",r):i,o.setProperty(c,r,i))}function C0(n,t){const e=Yt(t,n);16&e[2]||(e[2]|=32)}function Lg(n,t,e,r){let i=!1;if(Jc()){const o=function sk(n,t,e){const r=n.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];Hb(e,s.selectors,!1)&&(i||(i=[]),ud(ol(e,t),n,s.type),gr(s)?(D0(n,e),i.unshift(s)):i.push(s))}return i}(n,t,e),s=null===r?null:{"":-1};if(null!==o){i=!0,w0(e,n.data.length,o.length);for(let p=0;p<o.length;p++){const g=o[p];g.providersResolver&&g.providersResolver(g)}let a=!1,c=!1,d=sc(n,t,o.length,null);for(let p=0;p<o.length;p++){const g=o[p];e.mergedAttrs=te(e.mergedAttrs,g.hostAttrs),T0(n,e,t,d,g),ck(d,g,s),null!==g.contentQueries&&(e.flags|=8),(null!==g.hostBindings||null!==g.hostAttrs||0!==g.hostVars)&&(e.flags|=128);const _=g.type.prototype;!a&&(_.ngOnChanges||_.ngOnInit||_.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e.index),a=!0),!c&&(_.ngOnChanges||_.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e.index),c=!0),d++}b0(n,e)}s&&function ak(n,t,e){if(t){const r=n.localNames=[];for(let i=0;i<t.length;i+=2){const o=e[t[i+1]];if(null==o)throw new Y(-301,!1);r.push(t[i],o)}}}(e,r,s)}return e.mergedAttrs=te(e.mergedAttrs,e.attrs),i}function E0(n,t,e,r,i,o){const s=o.hostBindings;if(s){let a=n.hostBindingOpCodes;null===a&&(a=n.hostBindingOpCodes=[]);const c=~t.index;(function rk(n){let t=n.length;for(;t>0;){const e=n[--t];if("number"==typeof e&&e<0)return e}return 0})(a)!=c&&a.push(c),a.push(r,i,s)}}function S0(n,t){null!==n.hostBindings&&n.hostBindings(1,t)}function D0(n,t){t.flags|=2,(n.components||(n.components=[])).push(t.index)}function ck(n,t,e){if(e){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)e[t.exportAs[r]]=n;gr(t)&&(e[""]=n)}}function w0(n,t,e){n.flags|=1,n.directiveStart=t,n.directiveEnd=t+e,n.providerIndexes=t}function T0(n,t,e,r,i){n.data[r]=i;const o=i.factory||(i.factory=io(i.type)),s=new v(o,gr(i),V);n.blueprint[r]=s,e[r]=s,E0(n,t,0,r,sc(n,e,i.hostVars,qe),i)}function lk(n,t,e){const r=It(t,n),i=v0(e),o=n[10],s=Rd(n,xd(n,i,null,e.onPush?32:16,r,t,o,o.createRenderer(r,e),null,null,null));n[t.index]=s}function Ai(n,t,e,r,i,o){const s=It(n,t);!function jg(n,t,e,r,i,o,s){if(null==o)n.removeAttribute(t,i,e);else{const a=null==s?Se(o):s(o,r||"",i);n.setAttribute(t,i,a,e)}}(t[11],s,o,n.value,e,r,i)}function uk(n,t,e,r,i,o){const s=o[t];if(null!==s){const a=r.setInput;for(let c=0;c<s.length;){const d=s[c++],p=s[c++],g=s[c++];null!==a?r.setInput(e,g,d,p):e[p]=g}}}function dk(n,t){let e=null,r=0;for(;r<t.length;){const i=t[r];if(0!==i)if(5!==i){if("number"==typeof i)break;n.hasOwnProperty(i)&&(null===e&&(e=[]),e.push(i,n[i],t[r+1])),r+=2}else r+=2;else r+=4}return e}function M0(n,t,e,r){return new Array(n,!0,!1,t,null,0,r,e,null,null)}function pk(n,t){const e=Yt(t,n);if(Ns(e)){const r=e[1];48&e[2]?Pd(r,e,r.template,e[8]):e[5]>0&&Vg(e)}}function Vg(n){for(let r=zp(n);null!==r;r=Gp(r))for(let i=10;i<r.length;i++){const o=r[i];if(Ns(o))if(512&o[2]){const s=o[1];Pd(s,o,s.template,o[8])}else o[5]>0&&Vg(o)}const e=n[1].components;if(null!==e)for(let r=0;r<e.length;r++){const i=Yt(e[r],n);Ns(i)&&i[5]>0&&Vg(i)}}function gk(n,t){const e=Yt(t,n),r=e[1];(function mk(n,t){for(let e=t.length;e<n.blueprint.length;e++)t.push(n.blueprint[e])})(r,e),kg(r,e,e[8])}function Rd(n,t){return n[13]?n[14][4]=t:n[13]=t,n[14]=t,t}function Bg(n){for(;n;){n[2]|=32;const t=ml(n);if(lp(n)&&!t)return n;n=t}return null}function kd(n,t,e,r=!0){const i=t[10];i.begin&&i.begin();try{Pd(n,t,n.template,e)}catch(s){throw r&&P0(t,s),s}finally{i.end&&i.end()}}function Ug(n,t,e){Go(0),t(n,e)}function I0(n){return n[7]||(n[7]=[])}function A0(n){return n.cleanup||(n.cleanup=[])}function P0(n,t){const e=n[9],r=e?e.get(Ii,null):null;r&&r.handleError(t)}function $g(n,t,e,r,i){for(let o=0;o<e.length;){const s=e[o++],a=e[o++],c=t[s],d=n.data[s];null!==d.setInput?d.setInput(c,i,r,a):c[a]=i}}function ho(n,t,e){const r=Uo(t,n);!function nb(n,t,e){n.setValue(t,e)}(n[11],r,e)}function Od(n,t,e){let r=e?n.styles:null,i=e?n.classes:null,o=0;if(null!==t)for(let s=0;s<t.length;s++){const a=t[s];"number"==typeof a?o=a:1==o?i=ei(i,a):2==o&&(r=ei(r,a+": "+t[++s]+";"))}e?n.styles=r:n.stylesWithoutHost=r,e?n.classes=i:n.classesWithoutHost=i}function Fd(n,t,e,r,i=!1){for(;null!==e;){const o=t[e.index];if(null!==o&&r.push(Ft(o)),pr(o))for(let a=10;a<o.length;a++){const c=o[a],d=c[1].firstChild;null!==d&&Fd(c[1],c,d,r)}const s=e.type;if(8&s)Fd(n,t,e.child,r);else if(32&s){const a=Hp(e,t);let c;for(;c=a();)r.push(c)}else if(16&s){const a=hb(t,e);if(Array.isArray(a))r.push(...a);else{const c=ml(t[16]);Fd(c[1],c,a,r,!0)}}e=i?e.projectionNext:e.next}return r}class El{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return Fd(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(pr(t)){const e=t[8],r=e?e.indexOf(this):-1;r>-1&&(Kp(t,r),fd(e,r))}this._attachedToViewContainer=!1}ib(this._lView[1],this._lView)}onDestroy(t){y0(this._lView[1],this._lView,null,t)}markForCheck(){Bg(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){kd(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Y(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Wx(n,t){vl(n,t,t[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Y(902,!1);this._appRef=t}}class vk extends El{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;kd(t[1],t,t[8],!1)}checkNoChanges(){}get context(){return null}}class Hg extends bl{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=Ct(t);return new Sl(e,this.ngModule)}}function R0(n){const t=[];for(let e in n)n.hasOwnProperty(e)&&t.push({propName:n[e],templateName:e});return t}class _k{constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,r){const i=this.injector.get(t,pg,r);return i!==pg||e===pg?i:this.parentInjector.get(t,e,r)}}class Sl extends Lb{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=function yR(n){return n.map(vR).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return R0(this.componentDef.inputs)}get outputs(){return R0(this.componentDef.outputs)}create(t,e,r,i){let o=(i=i||this.ngModule)instanceof Ko?i:null==i?void 0:i.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new _k(t,o):t,a=s.get(Cl,null);if(null===a)throw new Y(407,!1);const c=s.get(JP,null),d=a.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",g=r?function ZR(n,t,e){return n.selectRootElement(t,e===hr.ShadowDom)}(d,r,this.componentDef.encapsulation):Wp(d,p,function yk(n){const t=n.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(p)),_=this.componentDef.onPush?288:272,E=Ng(0,null,null,1,0,null,null,null,null,null),D=xd(null,E,null,_,null,null,a,d,c,s,null);let F,H;Vs(D);try{const K=function Ek(n,t,e,r,i,o){const s=e[1];e[22]=n;const c=oc(s,22,2,"#host",null),d=c.mergedAttrs=t.hostAttrs;null!==d&&(Od(c,d,!0),null!==n&&(L(i,n,d),null!==c.classes&&eg(i,n,c.classes),null!==c.styles&&gb(i,n,c.styles)));const p=r.createRenderer(n,t),g=xd(e,v0(t),null,t.onPush?32:16,e[22],c,r,p,o||null,null,null);return s.firstCreatePass&&(ud(ol(c,e),s,t.type),D0(s,c),w0(c,e.length,1)),Rd(e,g),e[22]=g}(g,this.componentDef,D,a,d);if(g)if(r)L(d,g,["ng-version",ZP.full]);else{const{attrs:ie,classes:z}=function _R(n){const t=[],e=[];let r=1,i=2;for(;r<n.length;){let o=n[r];if("string"==typeof o)2===i?""!==o&&t.push(o,n[++r]):8===i&&e.push(o);else{if(!ai(i))break;i=o}r++}return{attrs:t,classes:e}}(this.componentDef.selectors[0]);ie&&L(d,g,ie),z&&z.length>0&&eg(d,g,z.join(" "))}if(H=ja(E,22),void 0!==e){const ie=H.projection=[];for(let z=0;z<this.ngContentSelectors.length;z++){const se=e[z];ie.push(null!=se?Array.from(se):null)}}F=function Sk(n,t,e,r){const i=e[1],o=function nk(n,t,e){const r=nn();n.firstCreatePass&&(e.providersResolver&&e.providersResolver(e),T0(n,r,t,sc(n,t,1,null),e),b0(n,r));const i=sl(t,n,r.directiveStart,r);Hn(i,t);const o=It(r,t);return o&&Hn(o,t),i}(i,e,t);if(n[8]=e[8]=o,null!==r)for(const a of r)a(o,t);if(t.contentQueries){const a=nn();t.contentQueries(1,o,a.directiveStart)}const s=nn();return!i.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(wi(s.index),E0(e[1],s,0,s.directiveStart,s.directiveEnd,t),S0(t,o)),o}(K,this.componentDef,D,[Dk]),kg(E,D,null)}finally{qo()}return new Ck(this.componentType,F,nc(H,D),D,H)}}class Ck extends class GP{}{constructor(t,e,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.instance=e,this.hostView=this.changeDetectorRef=new vk(i),this.componentType=t}setInput(t,e){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[t])){const o=this._rootLView;$g(o[1],o,i,t,e),C0(o,this._tNode.index)}}get injector(){return new Ha(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function Dk(){const n=nn();Us(J()[1],n)}function lt(n){let t=function k0(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),e=!0;const r=[n];for(;t;){let i;if(gr(n))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Y(903,!1);i=t.\u0275dir}if(i){if(e){r.push(i);const s=n;s.inputs=zg(n.inputs),s.declaredInputs=zg(n.declaredInputs),s.outputs=zg(n.outputs);const a=i.hostBindings;a&&Ik(n,a);const c=i.viewQuery,d=i.contentQueries;if(c&&Tk(n,c),d&&Mk(n,d),Xn(n.inputs,i.inputs),Xn(n.declaredInputs,i.declaredInputs),Xn(n.outputs,i.outputs),gr(i)&&i.data.animation){const p=n.data;p.animation=(p.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(n),a===lt&&(e=!1)}}t=Object.getPrototypeOf(t)}!function wk(n){let t=0,e=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=t+=i.hostVars,i.hostAttrs=te(i.hostAttrs,e=te(e,i.hostAttrs))}}(r)}function zg(n){return n===ct?{}:n===dt?[]:n}function Tk(n,t){const e=n.viewQuery;n.viewQuery=e?(r,i)=>{t(r,i),e(r,i)}:t}function Mk(n,t){const e=n.contentQueries;n.contentQueries=e?(r,i,o)=>{t(r,i,o),e(r,i,o)}:t}function Ik(n,t){const e=n.hostBindings;n.hostBindings=e?(r,i)=>{t(r,i),e(r,i)}:t}let Nd=null;function qs(){if(!Nd){const n=Rt.Symbol;if(n&&n.iterator)Nd=n.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const r=t[e];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(Nd=r)}}}return Nd}function Dl(n){return!!function Gg(n){return null!==n&&("function"==typeof n||"object"==typeof n)}(n)&&(Array.isArray(n)||!(n instanceof Map)&&qs()in n)}function zn(n,t,e){return!Object.is(n[t],e)&&(n[t]=e,!0)}function Ws(n,t,e,r){const i=zn(n,t,e);return zn(n,t+1,r)||i}function In(n,t,e,r){const i=J();return zn(i,oo(),t)&&(rt(),Ai(At(),i,n,t,e,r)),In}function cc(n,t,e,r){return zn(n,oo(),e)?t+Se(e)+r:qe}function uc(n,t,e,r,i,o,s,a){const d=function Ld(n,t,e,r,i){const o=Ws(n,t,e,r);return zn(n,t+2,i)||o}(n,oi(),e,i,s);return si(3),d?t+Se(e)+r+Se(i)+o+Se(s)+a:qe}function dc(n,t,e,r,i,o,s,a,c,d){const g=function Vr(n,t,e,r,i,o){const s=Ws(n,t,e,r);return Ws(n,t+2,i,o)||s}(n,oi(),e,i,s,c);return si(4),g?t+Se(e)+r+Se(i)+o+Se(s)+a+Se(c)+d:qe}function Ln(n,t,e,r,i,o,s,a){const c=J(),d=rt(),p=n+22,g=d.firstCreatePass?function Nk(n,t,e,r,i,o,s,a,c){const d=t.consts,p=oc(t,n,4,s||null,ii(d,a));Lg(t,e,p,ii(d,c)),Us(t,p);const g=p.tViews=Ng(2,p,r,i,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,d);return null!==t.queries&&(t.queries.template(t,p),g.queries=t.queries.embeddedTView(p)),p}(p,d,c,t,e,r,i,o,s):d.data[p];Fn(g,!1);const _=c[11].createComment("");yd(d,c,_,g),Hn(_,c),Rd(c,c[p]=M0(_,c,_,g)),Oa(g)&&Og(d,c,g),null!=s&&Fg(c,g,a)}function Xe(n,t,e){const r=J();return zn(r,oo(),t)&&Rr(rt(),At(),r,n,t,r[11],e,!1),Xe}function qg(n,t,e,r,i){const s=i?"class":"style";$g(n,e,t.inputs[s],s,r)}function Ge(n,t,e,r){const i=J(),o=rt(),s=22+n,a=i[11],c=i[s]=Wp(a,t,function wp(){return $e.lFrame.currentNamespace}()),d=o.firstCreatePass?function jk(n,t,e,r,i,o,s){const a=t.consts,d=oc(t,n,2,i,ii(a,o));return Lg(t,e,d,ii(a,s)),null!==d.attrs&&Od(d,d.attrs,!1),null!==d.mergedAttrs&&Od(d,d.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,d),d}(s,o,i,0,t,e,r):o.data[s];Fn(d,!0);const p=d.mergedAttrs;null!==p&&L(a,c,p);const g=d.classes;null!==g&&eg(a,c,g);const _=d.styles;return null!==_&&gb(a,c,_),64!=(64&d.flags)&&yd(o,i,c,d),0===function Ho(){return $e.lFrame.elementDepthCount}()&&Hn(c,i),function _p(){$e.lFrame.elementDepthCount++}(),Oa(d)&&(Og(o,i,d),function m0(n,t,e){if(Ra(t)){const i=t.directiveEnd;for(let o=t.directiveStart;o<i;o++){const s=n.data[o];s.contentQueries&&s.contentQueries(1,e[o],o)}}}(o,d,i)),null!==r&&Fg(i,d),Ge}function We(){let n=nn();Ba()?el():(n=n.parent,Fn(n,!1));const t=n;!function bp(){$e.lFrame.elementDepthCount--}();const e=rt();return e.firstCreatePass&&(Us(e,n),Ra(n)&&e.queries.elementEnd(n)),null!=t.classesWithoutHost&&function I(n){return 0!=(16&n.flags)}(t)&&qg(e,t,J(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function O(n){return 0!=(32&n.flags)}(t)&&qg(e,t,J(),t.stylesWithoutHost,!1),We}function ir(n,t,e,r){return Ge(n,t,e,r),We(),ir}function jd(){return J()}function Tl(n){return!!n&&"function"==typeof n.then}const Yg=function G0(n){return!!n&&"function"==typeof n.subscribe};function Bt(n,t,e,r){const i=J(),o=rt(),s=nn();return function W0(n,t,e,r,i,o,s,a){const c=Oa(r),p=n.firstCreatePass&&A0(n),g=t[8],_=I0(t);let E=!0;if(3&r.type||a){const H=It(r,t),K=a?a(H):H,ie=_.length,z=a?He=>a(Ft(He[r.index])):r.index;let se=null;if(!a&&c&&(se=function Bk(n,t,e,r){const i=n.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===e&&i[o+1]===r){const a=t[7],c=i[o+2];return a.length>c?a[c]:null}"string"==typeof s&&(o+=2)}return null}(n,t,i,r.index)),null!==se)(se.__ngLastListenerFn__||se).__ngNextListenerFn__=o,se.__ngLastListenerFn__=o,E=!1;else{o=Y0(r,t,g,o,!1);const He=e.listen(K,i,o);_.push(o,He),p&&p.push(i,z,ie,ie+1)}}else o=Y0(r,t,g,o,!1);const D=r.outputs;let F;if(E&&null!==D&&(F=D[i])){const H=F.length;if(H)for(let K=0;K<H;K+=2){const vt=t[F[K]][F[K+1]].subscribe(o),sn=_.length;_.push(o,vt),p&&p.push(i,r.index,sn,-(sn+1))}}}(o,i,i[11],s,n,t,0,r),Bt}function K0(n,t,e,r){try{return!1!==e(r)}catch(i){return P0(n,i),!1}}function Y0(n,t,e,r,i){return function o(s){if(s===Function)return r;Bg(2&n.flags?Yt(n.index,t):t);let c=K0(t,0,r,s),d=o.__ngNextListenerFn__;for(;d;)c=K0(t,0,d,s)&&c,d=d.__ngNextListenerFn__;return i&&!1===c&&(s.preventDefault(),s.returnValue=!1),c}}function Gn(n=1){return function Ep(n){return($e.lFrame.contextLView=function Sp(n,t){for(;n>0;)t=t[15],n--;return t}(n,$e.lFrame.contextLView))[8]}(n)}function Uk(n,t){let e=null;const r=function hR(n){const t=n.attrs;if(null!=t){const e=t.indexOf(5);if(0==(1&e))return t[e+1]}return null}(n);for(let i=0;i<t.length;i++){const o=t[i];if("*"!==o){if(null===r?Hb(n,o,!0):mR(r,o))return i}else e=i}return e}function Vd(n,t,e,r,i){const o=J(),s=cc(o,t,e,r);return s!==qe&&Rr(rt(),At(),o,n,s,o[11],i,!1),Vd}function oC(n,t,e,r,i){const o=n[e+1],s=null===t;let a=r?ci(o):fo(o),c=!1;for(;0!==a&&(!1===c||s);){const p=n[a+1];zk(n[a],t)&&(c=!0,n[a+1]=r?Dg(p):Eg(p)),a=r?ci(p):fo(p)}c&&(n[e+1]=r?Eg(o):Dg(o))}function zk(n,t){return null===n||null==t||(Array.isArray(n)?n[1]:n)===t||!(!Array.isArray(n)||"string"!=typeof t)&&Ya(n,t)>=0}const Cn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function sC(n){return n.substring(Cn.key,Cn.keyEnd)}function aC(n,t){const e=Cn.textEnd;return e===t?-1:(t=Cn.keyEnd=function Kk(n,t,e){for(;t<e&&n.charCodeAt(t)>32;)t++;return t}(n,Cn.key=t,e),vc(n,t,e))}function vc(n,t,e){for(;t<e&&n.charCodeAt(t)<=32;)t++;return t}function Qg(n,t,e){return li(n,t,e,!1),Qg}function qn(n,t){return li(n,t,null,!0),qn}function fC(n){!function ui(n,t,e,r){const i=rt(),o=si(2);i.firstUpdatePass&&pC(i,null,o,r);const s=J();if(e!==qe&&zn(s,o,e)){const a=i.data[dn()];if(yC(a,r)&&!hC(i,o)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;null!==c&&(e=ei(c,e||"")),qg(i,a,s,e,r)}else!function rO(n,t,e,r,i,o,s,a){i===qe&&(i=dt);let c=0,d=0,p=0<i.length?i[0]:null,g=0<o.length?o[0]:null;for(;null!==p||null!==g;){const _=c<i.length?i[c+1]:void 0,E=d<o.length?o[d+1]:void 0;let F,D=null;p===g?(c+=2,d+=2,_!==E&&(D=g,F=E)):null===g||null!==p&&p<g?(c+=2,D=p):(d+=2,D=g,F=E),null!==D&&mC(n,t,e,r,D,F,s,a),p=c<i.length?i[c]:null,g=d<o.length?o[d]:null}}(i,a,s,s[11],s[o+1],s[o+1]=function nO(n,t,e){if(null==e||""===e)return dt;const r=[],i=Pr(e);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if("object"==typeof i)for(const o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else"string"==typeof i&&t(r,i);return r}(n,t,e),r,o)}}(xr,Ri,n,!0)}function Ri(n,t){for(let e=function qk(n){return function lC(n){Cn.key=0,Cn.keyEnd=0,Cn.value=0,Cn.valueEnd=0,Cn.textEnd=n.length}(n),aC(n,vc(n,0,Cn.textEnd))}(t);e>=0;e=aC(t,e))xr(n,sC(t),!0)}function li(n,t,e,r){const i=J(),o=rt(),s=si(2);o.firstUpdatePass&&pC(o,n,s,r),t!==qe&&zn(i,s,t)&&mC(o,o.data[dn()],i,i[11],n,i[s+1]=function iO(n,t){return null==n||("string"==typeof t?n+=t:"object"==typeof n&&(n=nt(Pr(n)))),n}(t,e),r,s)}function hC(n,t){return t>=n.expandoStartIndex}function pC(n,t,e,r){const i=n.data;if(null===i[e+1]){const o=i[dn()],s=hC(n,e);yC(o,r)&&null===t&&!s&&(t=!1),t=function Zk(n,t,e,r){const i=function rl(n){const t=$e.lFrame.currentDirectiveIndex;return-1===t?null:n[t]}(n);let o=r?t.residualClasses:t.residualStyles;if(null===i)0===(r?t.classBindings:t.styleBindings)&&(e=Ml(e=Jg(null,n,t,e,r),t.attrs,r),o=null);else{const s=t.directiveStylingLast;if(-1===s||n[s]!==i)if(e=Jg(i,n,t,e,r),null===o){let c=function Xk(n,t,e){const r=e?t.classBindings:t.styleBindings;if(0!==fo(r))return n[ci(r)]}(n,t,r);void 0!==c&&Array.isArray(c)&&(c=Jg(null,n,t,c[1],r),c=Ml(c,t.attrs,r),function eO(n,t,e,r){n[ci(e?t.classBindings:t.styleBindings)]=r}(n,t,r,c))}else o=function tO(n,t,e){let r;const i=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<i;o++)r=Ml(r,n[o].hostAttrs,e);return Ml(r,t.attrs,e)}(n,t,r)}return void 0!==o&&(r?t.residualClasses=o:t.residualStyles=o),e}(i,o,t,r),function $k(n,t,e,r,i,o){let s=o?t.classBindings:t.styleBindings,a=ci(s),c=fo(s);n[r]=e;let p,d=!1;if(Array.isArray(e)){const g=e;p=g[1],(null===p||Ya(g,p)>0)&&(d=!0)}else p=e;if(i)if(0!==c){const _=ci(n[a+1]);n[r+1]=Md(_,a),0!==_&&(n[_+1]=Sg(n[_+1],r)),n[a+1]=function jR(n,t){return 131071&n|t<<17}(n[a+1],r)}else n[r+1]=Md(a,0),0!==a&&(n[a+1]=Sg(n[a+1],r)),a=r;else n[r+1]=Md(c,0),0===a?a=r:n[c+1]=Sg(n[c+1],r),c=r;d&&(n[r+1]=Eg(n[r+1])),oC(n,p,r,!0),oC(n,p,r,!1),function Hk(n,t,e,r,i){const o=i?n.residualClasses:n.residualStyles;null!=o&&"string"==typeof t&&Ya(o,t)>=0&&(e[r+1]=Dg(e[r+1]))}(t,p,n,r,o),s=Md(a,c),o?t.classBindings=s:t.styleBindings=s}(i,o,t,e,s,r)}}function Jg(n,t,e,r,i){let o=null;const s=e.directiveEnd;let a=e.directiveStylingLast;for(-1===a?a=e.directiveStart:a++;a<s&&(o=t[a],r=Ml(r,o.hostAttrs,i),o!==n);)a++;return null!==n&&(e.directiveStylingLast=a),r}function Ml(n,t,e){const r=e?1:2;let i=-1;if(null!==t)for(let o=0;o<t.length;o++){const s=t[o];"number"==typeof s?i=s:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),xr(n,s,!!e||t[++o]))}return void 0===n?null:n}function mC(n,t,e,r,i,o,s,a){if(!(3&t.type))return;const c=n.data,d=c[a+1];Bd(function s0(n){return 1==(1&n)}(d)?vC(c,t,e,i,fo(d),s):void 0)||(Bd(o)||function o0(n){return 2==(2&n)}(d)&&(o=vC(c,null,e,i,a,s)),function rP(n,t,e,r,i){if(t)i?n.addClass(e,r):n.removeClass(e,r);else{let o=-1===r.indexOf("-")?void 0:yr.DashCase;null==i?n.removeStyle(e,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=yr.Important),n.setStyle(e,r,i,o))}}(r,s,Uo(dn(),e),i,o))}function vC(n,t,e,r,i,o){const s=null===t;let a;for(;i>0;){const c=n[i],d=Array.isArray(c),p=d?c[1]:c,g=null===p;let _=e[i+1];_===qe&&(_=g?dt:void 0);let E=g?Pp(_,r):p===r?_:void 0;if(d&&!Bd(E)&&(E=Pp(c,r)),Bd(E)&&(a=E,s))return a;const D=n[i+1];i=s?ci(D):fo(D)}if(null!==t){let c=o?t.residualClasses:t.residualStyles;null!=c&&(a=Pp(c,r))}return a}function Bd(n){return void 0!==n}function yC(n,t){return 0!=(n.flags&(t?16:32))}function St(n,t=""){const e=J(),r=rt(),i=n+22,o=r.firstCreatePass?oc(r,i,1,t,null):r.data[i],s=e[i]=function qp(n,t){return n.createText(t)}(e[11],t);yd(r,e,s,o),Fn(o,!1)}function Zo(n){return po("",n,""),Zo}function po(n,t,e){const r=J(),i=cc(r,n,t,e);return i!==qe&&ho(r,dn(),i),po}function Ud(n,t,e,r,i){const o=J(),s=function lc(n,t,e,r,i,o){const a=Ws(n,oi(),e,i);return si(2),a?t+Se(e)+r+Se(i)+o:qe}(o,n,t,e,r,i);return s!==qe&&ho(o,dn(),s),Ud}function Zg(n,t,e,r,i,o,s){const a=J(),c=uc(a,n,t,e,r,i,o,s);return c!==qe&&ho(a,dn(),c),Zg}function Xg(n,t,e,r,i,o,s,a,c){const d=J(),p=dc(d,n,t,e,r,i,o,s,a,c);return p!==qe&&ho(d,dn(),p),Xg}const _c="en-US";let NC=_c;function rm(n,t,e,r,i){if(n=De(n),Array.isArray(n))for(let o=0;o<n.length;o++)rm(n[o],t,e,r,i);else{const o=rt(),s=J();let a=Gs(n)?n:De(n.provide),c=Nb(n);const d=nn(),p=1048575&d.providerIndexes,g=d.directiveStart,_=d.providerIndexes>>20;if(Gs(n)||!n.multi){const E=new v(c,i,V),D=om(a,t,i?p:p+_,g);-1===D?(ud(ol(d,s),o,a),im(o,n,t.length),t.push(a),d.directiveStart++,d.directiveEnd++,i&&(d.providerIndexes+=1048576),e.push(E),s.push(E)):(e[D]=E,s[D]=E)}else{const E=om(a,t,p+_,g),D=om(a,t,p,p+_),F=E>=0&&e[E],H=D>=0&&e[D];if(i&&!H||!i&&!F){ud(ol(d,s),o,a);const K=function S1(n,t,e,r,i){const o=new v(n,e,V);return o.multi=[],o.index=t,o.componentProviders=0,aE(o,i,r&&!e),o}(i?E1:C1,e.length,i,r,c);!i&&H&&(e[D].providerFactory=K),im(o,n,t.length,0),t.push(a),d.directiveStart++,d.directiveEnd++,i&&(d.providerIndexes+=1048576),e.push(K),s.push(K)}else im(o,n,E>-1?E:D,aE(e[i?D:E],c,!i&&r));!i&&r&&H&&e[D].componentProviders++}}}function im(n,t,e,r){const i=Gs(t),o=function LP(n){return!!n.useClass}(t);if(i||o){const c=(o?De(t.useClass):t).prototype.ngOnDestroy;if(c){const d=n.destroyHooks||(n.destroyHooks=[]);if(!i&&t.multi){const p=d.indexOf(e);-1===p?d.push(e,[r,c]):d[p+1].push(r,c)}else d.push(e,c)}}}function aE(n,t,e){return e&&n.componentProviders++,n.multi.push(t)-1}function om(n,t,e,r){for(let i=e;i<r;i++)if(t[i]===n)return i;return-1}function C1(n,t,e,r){return sm(this.multi,[])}function E1(n,t,e,r){const i=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=sl(e,e[1],this.providerFactory.index,r);o=a.slice(0,s),sm(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],sm(i,o);return o}function sm(n,t){for(let e=0;e<n.length;e++)t.push((0,n[e])());return t}function $t(n,t=[]){return e=>{e.providersResolver=(r,i)=>function b1(n,t,e){const r=rt();if(r.firstCreatePass){const i=gr(n);rm(e,r.data,r.blueprint,i,!0),rm(t,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,t)}}class Qs{}class cE{}class lE extends Qs{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Hg(this);const r=Bn(t);this._bootstrapComponents=uo(r.bootstrap),this._r3Injector=Qb(t,e,[{provide:Qs,useValue:this},{provide:bl,useValue:this.componentFactoryResolver}],nt(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class am extends cE{constructor(t){super(),this.moduleType=t}create(t){return new lE(this.moduleType,t)}}class w1 extends Qs{constructor(t,e,r){super(),this.componentFactoryResolver=new Hg(this),this.instance=null;const i=new Fb([...t,{provide:Qs,useValue:this},{provide:bl,useValue:this.componentFactoryResolver}],e||wd(),r,new Set(["environment"]));this.injector=i,i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}function qd(n,t,e=null){return new w1(n,t,e).injector}let T1=(()=>{class n{constructor(e){this._injector=e,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e.id)){const r=Pb(0,e.type),i=r.length>0?qd([r],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e.id,i)}return this.cachedInjectors.get(e.id)}ngOnDestroy(){try{for(const e of this.cachedInjectors.values())null!==e&&e.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=de({token:n,providedIn:"environment",factory:()=>new n(Q(Ko))}),n})();function uE(n){n.getStandaloneInjector=t=>t.get(T1).getOrCreateStandaloneInjector(n)}function lm(n){return t=>{setTimeout(n,void 0,t)}}const Qt=class Z1 extends Le{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,r){var i,o,s;let a=t,c=e||(()=>null),d=r;if(t&&"object"==typeof t){const g=t;a=null===(i=g.next)||void 0===i?void 0:i.bind(g),c=null===(o=g.error)||void 0===o?void 0:o.bind(g),d=null===(s=g.complete)||void 0===s?void 0:s.bind(g)}this.__isAsync&&(c=lm(c),a&&(a=lm(a)),d&&(d=lm(d)));const p=super.subscribe({next:a,error:c,complete:d});return t instanceof le&&t.add(p),p}};function X1(){return this._results[qs()]()}class um{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=qs(),r=um.prototype;r[e]||(r[e]=X1)}get changes(){return this._changes||(this._changes=new Qt)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const r=this;r.dirty=!1;const i=Ar(t);(this._changesDetected=!function ZA(n,t,e){if(n.length!==t.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=t[r];if(e&&(i=e(i),o=e(o)),o!==i)return!1}return!0}(r._results,i,e))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let go=(()=>{class n{}return n.__NG_ELEMENT_ID__=nF,n})();const eF=go,tF=class extends eF{constructor(t,e,r){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=r}createEmbeddedView(t,e){const r=this._declarationTContainer.tViews,i=xd(this._declarationLView,r,t,16,null,r.declTNode,null,null,null,null,e||null);i[17]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[19];return null!==s&&(i[19]=s.createEmbeddedView(r)),kg(r,i,t),new El(i)}};function nF(){return Wd(nn(),J())}function Wd(n,t){return 4&n.type?new tF(t,n,nc(n,t)):null}let di=(()=>{class n{}return n.__NG_ELEMENT_ID__=rF,n})();function rF(){return DE(nn(),J())}const iF=di,EE=class extends iF{constructor(t,e,r){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=r}get element(){return nc(this._hostTNode,this._hostLView)}get injector(){return new Ha(this._hostTNode,this._hostLView)}get parentInjector(){const t=ld(this._hostTNode,this._hostLView);if(ke(t)){const e=yt(t,this._hostLView),r=je(t);return new Ha(e[1].data[r+8],e)}return new Ha(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=SE(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,e,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const s=t.createEmbeddedView(e||{},o);return this.insert(s,i),s}createComponent(t,e,r,i,o){const s=t&&!function cl(n){return"function"==typeof n}(t);let a;if(s)a=e;else{const g=e||{};a=g.index,r=g.injector,i=g.projectableNodes,o=g.environmentInjector||g.ngModuleRef}const c=s?t:new Sl(Ct(t)),d=r||this.parentInjector;if(!o&&null==c.ngModule){const _=(s?d:this.parentInjector).get(Ko,null);_&&(o=_)}const p=c.create(d,i,void 0,o);return this.insert(p.hostView,a),p}insert(t,e){const r=t._lView,i=r[1];if(function Zu(n){return pr(n[3])}(r)){const p=this.indexOf(t);if(-1!==p)this.detach(p);else{const g=r[3],_=new EE(g,g[6],g[3]);_.detach(_.indexOf(t))}}const o=this._adjustIndex(e),s=this._lContainer;!function Yx(n,t,e,r){const i=10+r,o=e.length;r>0&&(e[i-1][4]=t),r<o-10?(t[4]=e[i],x_(e,10+r,t)):(e.push(t),t[4]=null),t[3]=e;const s=t[17];null!==s&&e!==s&&function Qx(n,t){const e=n[9];t[16]!==t[3][3][16]&&(n[2]=!0),null===e?n[9]=[t]:e.push(t)}(s,t);const a=t[19];null!==a&&a.insertView(n),t[2]|=64}(i,r,s,o);const a=Jp(o,s),c=r[11],d=vd(c,s[7]);return null!==d&&function qx(n,t,e,r,i,o){r[0]=i,r[6]=t,vl(n,r,e,1,i,o)}(i,s[6],c,r,d,a),t.attachToViewContainerRef(),x_(dm(s),o,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=SE(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),r=Kp(this._lContainer,e);r&&(fd(dm(this._lContainer),e),ib(r[1],r))}detach(t){const e=this._adjustIndex(t,-1),r=Kp(this._lContainer,e);return r&&null!=fd(dm(this._lContainer),e)?new El(r):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function SE(n){return n[8]}function dm(n){return n[8]||(n[8]=[])}function DE(n,t){let e;const r=t[n.index];if(pr(r))e=r;else{let i;if(8&n.type)i=Ft(r);else{const o=t[11];i=o.createComment("");const s=It(n,t);$s(o,vd(o,s),i,function eP(n,t){return n.nextSibling(t)}(o,s),!1)}t[n.index]=e=M0(r,t,i,n),Rd(t,e)}return new EE(e,n,t)}class fm{constructor(t){this.queryList=t,this.matches=null}clone(){return new fm(this.queryList)}setDirty(){this.queryList.setDirty()}}class hm{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const r=null!==t.contentQueries?t.contentQueries[0]:e.length,i=[];for(let o=0;o<r;o++){const s=e.getByIndex(o);i.push(this.queries[s.indexInDeclarationView].clone())}return new hm(i)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==xE(t,e).matches&&this.queries[e].setDirty()}}class wE{constructor(t,e,r=null){this.predicate=t,this.flags=e,this.read=r}}class pm{constructor(t=[]){this.queries=t}elementStart(t,e){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let r=0;r<this.length;r++){const i=null!==e?e.length:0,o=this.getByIndex(r).embeddedTView(t,i);o&&(o.indexInDeclarationView=r,null!==e?e.push(o):e=[o])}return null!==e?new pm(e):null}template(t,e){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class gm{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new gm(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let r=t.parent;for(;null!==r&&8&r.type&&r.index!==e;)r=r.parent;return e===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const o=r[i];this.matchTNodeWithReadOption(t,e,aF(e,o)),this.matchTNodeWithReadOption(t,e,dd(e,t,o,!1,!1))}else r===go?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,dd(e,t,r,!1,!1))}matchTNodeWithReadOption(t,e,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===fn||i===di||i===go&&4&e.type)this.addMatch(e.index,-2);else{const o=dd(e,t,i,!1,!1);null!==o&&this.addMatch(e.index,o)}else this.addMatch(e.index,r)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function aF(n,t){const e=n.localNames;if(null!==e)for(let r=0;r<e.length;r+=2)if(e[r]===t)return e[r+1];return null}function lF(n,t,e,r){return-1===e?function cF(n,t){return 11&n.type?nc(n,t):4&n.type?Wd(n,t):null}(t,n):-2===e?function uF(n,t,e){return e===fn?nc(t,n):e===go?Wd(t,n):e===di?DE(t,n):void 0}(n,t,r):sl(n,n[1],e,t)}function TE(n,t,e,r){const i=t[19].queries[r];if(null===i.matches){const o=n.data,s=e.matches,a=[];for(let c=0;c<s.length;c+=2){const d=s[c];a.push(d<0?null:lF(t,o[d],s[c+1],e.metadata.read))}i.matches=a}return i.matches}function mm(n,t,e,r){const i=n.queries.getByIndex(e),o=i.matches;if(null!==o){const s=TE(n,t,i,e);for(let a=0;a<o.length;a+=2){const c=o[a];if(c>0)r.push(s[a/2]);else{const d=o[a+1],p=t[-c];for(let g=10;g<p.length;g++){const _=p[g];_[17]===_[3]&&mm(_[1],_,d,r)}if(null!==p[9]){const g=p[9];for(let _=0;_<g.length;_++){const E=g[_];mm(E[1],E,d,r)}}}}}return r}function Kd(n){const t=J(),e=rt(),r=zo();Go(r+1);const i=xE(e,r);if(n.dirty&&function Ju(n){return 4==(4&n[2])}(t)===(2==(2&i.metadata.flags))){if(null===i.matches)n.reset([]);else{const o=i.crossesNgTemplate?mm(e,t,r,[]):TE(e,t,i,r);n.reset(o,YP),n.notifyOnChanges()}return!0}return!1}function ME(n,t,e){const r=rt();r.firstCreatePass&&(function AE(n,t,e){null===n.queries&&(n.queries=new pm),n.queries.track(new gm(t,e))}(r,new wE(n,t,e),-1),2==(2&t)&&(r.staticViewQueries=!0)),function IE(n,t,e){const r=new um(4==(4&e));y0(n,t,r,r.destroy),null===t[19]&&(t[19]=new hm),t[19].queries.push(new fm(r))}(r,J(),t)}function xE(n,t){return n.queries.getByIndex(t)}function Jd(...n){}const Zd=new ve("Application Initializer");let Xd=(()=>{class n{constructor(e){this.appInits=e,this.resolve=Jd,this.reject=Jd,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const e=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const o=this.appInits[i]();if(Tl(o))e.push(o);else if(Yg(o)){const s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});e.push(s)}}Promise.all(e).then(()=>{r()}).catch(i=>{this.reject(i)}),0===e.length&&r(),this.initialized=!0}}return n.\u0275fac=function(e){return new(e||n)(Q(Zd,8))},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Nl=new ve("AppId",{providedIn:"root",factory:function YE(){return`${Em()}${Em()}${Em()}`}});function Em(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const QE=new ve("Platform Initializer"),ef=new ve("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),JE=new ve("appBootstrapListener"),Ec=new ve("AnimationModuleType");let kF=(()=>{class n{log(e){console.log(e)}warn(e){console.warn(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const ki=new ve("LocaleId",{providedIn:"root",factory:()=>qt(ki,xe.Optional|xe.SkipSelf)||function OF(){return"undefined"!=typeof $localize&&$localize.locale||_c}()});class NF{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}let Sm=(()=>{class n{compileModuleSync(e){return new am(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const r=this.compileModuleSync(e),o=uo(Bn(e).declarations).reduce((s,a)=>{const c=Ct(a);return c&&s.push(new Sl(c)),s},[]);return new NF(r,o)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const VF=(()=>Promise.resolve(0))();function Dm(n){"undefined"==typeof Zone?VF.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Ut{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Qt(!1),this.onMicrotaskEmpty=new Qt(!1),this.onStable=new Qt(!1),this.onError=new Qt(!1),"undefined"==typeof Zone)throw new Y(908,!1);Zone.assertZonePatched();const i=this;if(i._nesting=0,i._outer=i._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const o=Zone.AsyncStackTaggingZoneSpec;i._inner=i._inner.fork(new o("Angular"))}Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&e,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function BF(){let n=Rt.requestAnimationFrame,t=Rt.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&t){const e=n[Zone.__symbol__("OriginalDelegate")];e&&(n=e);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function HF(n){const t=()=>{!function $F(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Rt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Tm(n),n.isCheckStableRunning=!0,wm(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Tm(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,r,i,o,s,a)=>{try{return eS(n),e.invokeTask(i,o,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||n.shouldCoalesceRunChangeDetection)&&t(),tS(n)}},onInvoke:(e,r,i,o,s,a,c)=>{try{return eS(n),e.invoke(i,o,s,a,c)}finally{n.shouldCoalesceRunChangeDetection&&t(),tS(n)}},onHasTask:(e,r,i,o)=>{e.hasTask(i,o),r===i&&("microTask"==o.change?(n._hasPendingMicrotasks=o.microTask,Tm(n),wm(n)):"macroTask"==o.change&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(e,r,i,o)=>(e.handleError(i,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ut.isInAngularZone())throw new Y(909,!1)}static assertNotInAngularZone(){if(Ut.isInAngularZone())throw new Y(909,!1)}run(t,e,r){return this._inner.run(t,e,r)}runTask(t,e,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,t,UF,Jd,Jd);try{return o.runTask(s,e,r)}finally{o.cancelTask(s)}}runGuarded(t,e,r){return this._inner.runGuarded(t,e,r)}runOutsideAngular(t){return this._outer.run(t)}}const UF={};function wm(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Tm(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function eS(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function tS(n){n._nesting--,wm(n)}class zF{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Qt,this.onMicrotaskEmpty=new Qt,this.onStable=new Qt,this.onError=new Qt}run(t,e,r){return t.apply(e,r)}runGuarded(t,e,r){return t.apply(e,r)}runOutsideAngular(t){return t()}runTask(t,e,r,i){return t.apply(e,r)}}const nS=new ve(""),tf=new ve("");let Ll,Mm=(()=>{class n{constructor(e,r,i){this._ngZone=e,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Ll||(function GF(n){Ll=n}(i),i.addToWindow(r)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ut.assertNotInAngularZone(),Dm(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Dm(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(e)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),e(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:e,timeoutId:o,updateCb:i})}whenStable(e,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,r,i){return[]}}return n.\u0275fac=function(e){return new(e||n)(Q(Ut),Q(Im),Q(tf))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})(),Im=(()=>{class n{constructor(){this._applications=new Map}registerApplication(e,r){this._applications.set(e,r)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,r=!0){var i;return null!==(i=null==Ll?void 0:Ll.findTestabilityInTree(this,e,r))&&void 0!==i?i:null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),Oi=null;const rS=new ve("AllowMultipleToken"),Am=new ve("PlatformDestroyListeners");class iS{constructor(t,e){this.name=t,this.token=e}}function sS(n,t,e=[]){const r=`Platform: ${t}`,i=new ve(r);return(o=[])=>{let s=xm();if(!s||s.injector.get(rS,!1)){const a=[...e,...o,{provide:i,useValue:!0}];n?n(a):function KF(n){if(Oi&&!Oi.get(rS,!1))throw new Y(400,!1);Oi=n;const t=n.get(cS);(function oS(n){const t=n.get(QE,null);t&&t.forEach(e=>e())})(n)}(function aS(n=[],t){return _r.create({name:t,providers:[{provide:ug,useValue:"platform"},{provide:Am,useValue:new Set([()=>Oi=null])},...n]})}(a,r))}return function QF(n){const t=xm();if(!t)throw new Y(401,!1);return t}()}}function xm(){var n;return null!==(n=null==Oi?void 0:Oi.get(cS))&&void 0!==n?n:null}let cS=(()=>{class n{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,r){const i=function uS(n,t){let e;return e="noop"===n?new zF:("zone.js"===n?void 0:n)||new Ut(t),e}(null==r?void 0:r.ngZone,function lS(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(r)),o=[{provide:Ut,useValue:i}];return i.run(()=>{const s=_r.create({providers:o,parent:this.injector,name:e.moduleType.name}),a=e.create(s),c=a.injector.get(Ii,null);if(!c)throw new Y(402,!1);return i.runOutsideAngular(()=>{const d=i.onError.subscribe({next:p=>{c.handleError(p)}});a.onDestroy(()=>{nf(this._modules,a),d.unsubscribe()})}),function dS(n,t,e){try{const r=e();return Tl(r)?r.catch(i=>{throw t.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>n.handleError(r)),r}}(c,i,()=>{const d=a.injector.get(Xd);return d.runInitializers(),d.donePromise.then(()=>(function LC(n){er(n,"Expected localeId to be defined"),"string"==typeof n&&(NC=n.toLowerCase().replace(/_/g,"-"))}(a.injector.get(ki,_c)||_c),this._moduleDoBootstrap(a),a))})})}bootstrapModule(e,r=[]){const i=fS({},r);return function qF(n,t,e){const r=new am(e);return Promise.resolve(r)}(0,0,e).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(e){const r=e.injector.get(jl);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!e.instance.ngDoBootstrap)throw new Y(403,!1);e.instance.ngDoBootstrap(r)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Y(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const e=this._injector.get(Am,null);e&&(e.forEach(r=>r()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(e){return new(e||n)(Q(_r))},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function fS(n,t){return Array.isArray(t)?t.reduce(fS,n):Object.assign(Object.assign({},n),t)}let jl=(()=>{class n{constructor(e,r,i){this._zone=e,this._injector=r,this._exceptionHandler=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new ae(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),s=new ae(a=>{let c;this._zone.runOutsideAngular(()=>{c=this._zone.onStable.subscribe(()=>{Ut.assertNotInAngularZone(),Dm(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const d=this._zone.onUnstable.subscribe(()=>{Ut.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{c.unsubscribe(),d.unsubscribe()}});this.isStable=function xu(...n){let t=Number.POSITIVE_INFINITY,e=null,r=n[n.length-1];return Pe(r)?(e=n.pop(),n.length>1&&"number"==typeof n[n.length-1]&&(t=n.pop())):"number"==typeof r&&(t=n.pop()),null===e&&1===n.length&&n[0]instanceof ae?n[0]:vi(t)(ys(n,e))}(o,s.pipe(function Cs(){return n=>_s()(function Pu(n,t){return function(r){let i;if(i="function"==typeof n?n:function(){return n},"function"==typeof t)return r.lift(new Xr(i,t));const o=Object.create(r,$c);return o.source=r,o.subjectFactory=i,o}}(Xh)(n))}()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(e,r){const i=e instanceof Lb;if(!this._injector.get(Xd).done)throw!i&&function Gt(n){const t=Ct(n)||tn(n)||Pn(n);return null!==t&&t.standalone}(e),new Y(405,false);let s;s=i?e:this._injector.get(bl).resolveComponentFactory(e),this.componentTypes.push(s.componentType);const a=function WF(n){return n.isBoundToModule}(s)?void 0:this._injector.get(Qs),d=s.create(_r.NULL,[],r||s.selector,a),p=d.location.nativeElement,g=d.injector.get(nS,null);return null==g||g.registerApplication(p),d.onDestroy(()=>{this.detachView(d.hostView),nf(this.components,d),null==g||g.unregisterApplication(p)}),this._loadComponent(d),d}tick(){if(this._runningTick)throw new Y(101,!1);try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const r=e;this._views.push(r),r.attachToAppRef(this)}detachView(e){const r=e;nf(this._views,r),r.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(JE,[]).concat(this._bootstrapListeners).forEach(i=>i(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>nf(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new Y(406,!1);const e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(e){return new(e||n)(Q(Ut),Q(Ko),Q(Ii))},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function nf(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}let pS=!0,gS=!1,Sc=(()=>{class n{}return n.__NG_ELEMENT_ID__=eN,n})();function eN(n){return function tN(n,t,e){if(ka(n)&&!e){const r=Yt(n.index,t);return new El(r,r)}return 47&n.type?new El(t[16],t):null}(nn(),J(),16==(16&n))}class _S{constructor(){}supports(t){return Dl(t)}create(t){return new aN(t)}}const sN=(n,t)=>t;class aN{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||sN}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,r=this._removalsHead,i=0,o=null;for(;e||r;){const s=!r||e&&e.currentIndex<CS(r,i,o)?e:r,a=CS(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(e=e._next,null==s.previousIndex)i++;else{o||(o=[]);const d=a-i,p=c-i;if(d!=p){for(let _=0;_<d;_++){const E=_<o.length?o[_]:o[_]=0,D=E+_;p<=D&&D<d&&(o[_]=E+1)}o[s.previousIndex]=p-d}}a!==c&&t(s,a,c)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Dl(t))throw new Y(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let i,o,s,e=this._itHead,r=!1;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)o=t[a],s=this._trackByFn(a,o),null!==e&&Object.is(e.trackById,s)?(r&&(e=this._verifyReinsertion(e,o,s,a)),Object.is(e.item,o)||this._addIdentityChange(e,o)):(e=this._mismatch(e,o,s,a),r=!0),e=e._next}else i=0,function kk(n,t){if(Array.isArray(n))for(let e=0;e<n.length;e++)t(n[e]);else{const e=n[qs()]();let r;for(;!(r=e.next()).done;)t(r.value)}}(t,a=>{s=this._trackByFn(i,a),null!==e&&Object.is(e.trackById,s)?(r&&(e=this._verifyReinsertion(e,a,s,i)),Object.is(e.item,a)||this._addIdentityChange(e,a)):(e=this._mismatch(e,a,s,i),r=!0),e=e._next,i++}),this.length=i;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,r,i){let o;return null===t?o=this._itTail:(o=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,o,i)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,o,i)):t=this._addAfter(new cN(e,r),o,i),t}_verifyReinsertion(t,e,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?t=this._reinsertAfter(o,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const i=t._prevRemoved,o=t._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(t,e,r),this._addToMoves(t,r),t}_moveAfter(t,e,r){return this._unlink(t),this._insertAfter(t,e,r),this._addToMoves(t,r),t}_addAfter(t,e,r){return this._insertAfter(t,e,r),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,r){const i=null===e?this._itHead:e._next;return t._next=i,t._prev=e,null===i?this._itTail=t:i._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new bS),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,r=t._next;return null===e?this._itHead=r:e._next=r,null===r?this._itTail=e:r._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new bS),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class cN{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class lN{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===e||e<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){const e=t._prevDup,r=t._nextDup;return null===e?this._head=r:e._nextDup=r,null===r?this._tail=e:r._prevDup=e,null===this._head}}class bS{constructor(){this.map=new Map}put(t){const e=t.trackById;let r=this.map.get(e);r||(r=new lN,this.map.set(e,r)),r.add(t)}get(t,e){const i=this.map.get(t);return i?i.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function CS(n,t,e){const r=n.previousIndex;if(null===r)return r;let i=0;return e&&r<e.length&&(i=e[r]),r+t+i}function SS(){return new af([new _S])}let af=(()=>{class n{constructor(e){this.factories=e}static create(e,r){if(null!=r){const i=r.factories.slice();e=e.concat(i)}return new n(e)}static extend(e){return{provide:n,useFactory:r=>n.create(e,r||SS()),deps:[[n,new Ja,new Wo]]}}find(e){const r=this.factories.find(i=>i.supports(e));if(null!=r)return r;throw new Y(901,!1)}}return n.\u0275prov=de({token:n,providedIn:"root",factory:SS}),n})();const pN=sS(null,"core",[]);let gN=(()=>{class n{constructor(e){}}return n.\u0275fac=function(e){return new(e||n)(Q(jl))},n.\u0275mod=jt({type:n}),n.\u0275inj=Lt({}),n})();let cf=null;function Fi(){return cf}const Nt=new ve("DocumentToken");let lf=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=de({token:n,factory:function(){return function _N(){return Q(wS)}()},providedIn:"platform"}),n})();const bN=new ve("Location Initialized");let wS=(()=>{class n extends lf{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Fi().getBaseHref(this._doc)}onPopState(e){const r=Fi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",e,!1),()=>r.removeEventListener("popstate",e)}onHashChange(e){const r=Fi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",e,!1),()=>r.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,r,i){TS()?this._history.pushState(e,r,i):this.location.hash=i}replaceState(e,r,i){TS()?this._history.replaceState(e,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return n.\u0275fac=function(e){return new(e||n)(Q(Nt))},n.\u0275prov=de({token:n,factory:function(){return function CN(){return new wS(Q(Nt))}()},providedIn:"platform"}),n})();function TS(){return!!window.history.pushState}function Fm(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function MS(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function yo(n){return n&&"?"!==n[0]?"?"+n:n}let Zs=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=de({token:n,factory:function(){return qt(IS)},providedIn:"root"}),n})();const Xs=new ve("appBaseHref");let IS=(()=>{class n extends Zs{constructor(e,r){var i,o,s;super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=null!==(s=null!==(i=null!=r?r:this._platformLocation.getBaseHrefFromDOM())&&void 0!==i?i:null===(o=qt(Nt).location)||void 0===o?void 0:o.origin)&&void 0!==s?s:""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Fm(this._baseHref,e)}path(e=!1){const r=this._platformLocation.pathname+yo(this._platformLocation.search),i=this._platformLocation.hash;return i&&e?`${r}${i}`:r}pushState(e,r,i,o){const s=this.prepareExternalUrl(i+yo(o));this._platformLocation.pushState(e,r,s)}replaceState(e,r,i,o){const s=this.prepareExternalUrl(i+yo(o));this._platformLocation.replaceState(e,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,e)}}return n.\u0275fac=function(e){return new(e||n)(Q(lf),Q(Xs,8))},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),EN=(()=>{class n extends Zs{constructor(e,r){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(e){const r=Fm(this._baseHref,e);return r.length>0?"#"+r:r}pushState(e,r,i,o){let s=this.prepareExternalUrl(i+yo(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(e,r,s)}replaceState(e,r,i,o){let s=this.prepareExternalUrl(i+yo(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(e,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,e)}}return n.\u0275fac=function(e){return new(e||n)(Q(lf),Q(Xs,8))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})(),uf=(()=>{class n{constructor(e){this._subject=new Qt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const r=this._locationStrategy.getBaseHref();this._baseHref=MS(AS(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){var e;null===(e=this._urlChangeSubscription)||void 0===e||e.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,r=""){return this.path()==this.normalize(e+yo(r))}normalize(e){return n.stripTrailingSlash(function DN(n,t){return n&&t.startsWith(n)?t.substring(n.length):t}(this._baseHref,AS(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,r="",i=null){this._locationStrategy.pushState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+yo(r)),i)}replaceState(e,r="",i=null){this._locationStrategy.replaceState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+yo(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){var r,i;null===(i=(r=this._locationStrategy).historyGo)||void 0===i||i.call(r,e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{var r;const i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(null===(r=this._urlChangeSubscription)||void 0===r||r.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",r){this._urlChangeListeners.forEach(i=>i(e,r))}subscribe(e,r,i){return this._subject.subscribe({next:e,error:r,complete:i})}}return n.normalizeQueryParams=yo,n.joinWithSlash=Fm,n.stripTrailingSlash=MS,n.\u0275fac=function(e){return new(e||n)(Q(Zs))},n.\u0275prov=de({token:n,factory:function(){return function SN(){return new uf(Q(Zs))}()},providedIn:"root"}),n})();function AS(n){return n.replace(/\/index.html$/,"")}function jS(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const r=e.indexOf("="),[i,o]=-1==r?[e,""]:[e.slice(0,r),e.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}class lL{constructor(t,e,r,i){this.$implicit=t,this.ngForOf=e,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let $l=(()=>{class n{constructor(e,r,i){this._viewContainer=e,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const r=this._viewContainer;e.forEachOperation((i,o,s)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new lL(i.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)r.remove(null===o?void 0:o);else if(null!==o){const a=r.get(o);r.move(a,s),US(a,i)}});for(let i=0,o=r.length;i<o;i++){const a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}e.forEachIdentityChange(i=>{US(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(e,r){return!0}}return n.\u0275fac=function(e){return new(e||n)(V(di),V(go),V(af))},n.\u0275dir=Ie({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function US(n,t){n.context.$implicit=t.item}let bf=(()=>{class n{constructor(e,r){this._viewContainer=e,this._context=new dL,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){$S("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){$S("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,r){return!0}}return n.\u0275fac=function(e){return new(e||n)(V(di),V(go))},n.\u0275dir=Ie({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class dL{constructor(){this.$implicit=null,this.ngIf=null}}function $S(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${nt(t)}'.`)}let GS=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=jt({type:n}),n.\u0275inj=Lt({}),n})();const qS="browser";let $L=(()=>{class n{}return n.\u0275prov=de({token:n,providedIn:"root",factory:()=>new HL(Q(Nt),window)}),n})();class HL{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function zL(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const s=o.getElementById(t)||o.querySelector(`[name="${t}"]`);if(s)return s}i=r.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),r=e.left+this.window.pageXOffset,i=e.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=WS(this.window.history)||WS(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function WS(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class KS{}class Jm extends class cj extends class yN{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function vN(n){cf||(cf=n)}(new Jm)}onAndCancel(t,e,r){return t.addEventListener(e,r,!1),()=>{t.removeEventListener(e,r,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function lj(){return zl=zl||document.querySelector("base"),zl?zl.getAttribute("href"):null}();return null==e?null:function uj(n){Ef=Ef||document.createElement("a"),Ef.setAttribute("href",n);const t=Ef.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){zl=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return jS(document.cookie,t)}}let Ef,zl=null;const ZS=new ve("TRANSITION_ID"),fj=[{provide:Zd,useFactory:function dj(n,t,e){return()=>{e.get(Xd).donePromise.then(()=>{const r=Fi(),i=t.querySelectorAll(`style[ng-transition="${n}"]`);for(let o=0;o<i.length;o++)r.remove(i[o])})}},deps:[ZS,Nt,_r],multi:!0}];let pj=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})();const Sf=new ve("EventManagerPlugins");let Df=(()=>{class n{constructor(e,r){this._zone=r,this._eventNameToPlugin=new Map,e.forEach(i=>i.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,r,i){return this._findPluginFor(r).addEventListener(e,r,i)}addGlobalEventListener(e,r,i){return this._findPluginFor(r).addGlobalEventListener(e,r,i)}getZone(){return this._zone}_findPluginFor(e){const r=this._eventNameToPlugin.get(e);if(r)return r;const i=this._plugins;for(let o=0;o<i.length;o++){const s=i[o];if(s.supports(e))return this._eventNameToPlugin.set(e,s),s}throw new Error(`No event manager plugin found for event ${e}`)}}return n.\u0275fac=function(e){return new(e||n)(Q(Sf),Q(Ut))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})();class XS{constructor(t){this._doc=t}addGlobalEventListener(t,e,r){const i=Fi().getGlobalEventTarget(this._doc,t);if(!i)throw new Error(`Unsupported event target ${i} for event ${e}`);return this.addEventListener(i,e,r)}}let eD=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(e){const r=new Set;e.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})(),Gl=(()=>{class n extends eD{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,r,i){e.forEach(o=>{const s=this._doc.createElement("style");s.textContent=o,i.push(r.appendChild(s))})}addHost(e){const r=[];this._addStylesToHost(this._stylesSet,e,r),this._hostNodes.set(e,r)}removeHost(e){const r=this._hostNodes.get(e);r&&r.forEach(tD),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(e,i,r)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(tD))}}return n.\u0275fac=function(e){return new(e||n)(Q(Nt))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})();function tD(n){Fi().remove(n)}const Zm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Xm=/%COMP%/g;function wf(n,t,e){for(let r=0;r<t.length;r++){let i=t[r];Array.isArray(i)?wf(n,i,e):(i=i.replace(Xm,n),e.push(i))}return e}function iD(n){return t=>{if("__ngUnwrap__"===t)return n;!1===n(t)&&(t.preventDefault(),t.returnValue=!1)}}let Tf=(()=>{class n{constructor(e,r,i){this.eventManager=e,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new ev(e)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;switch(r.encapsulation){case hr.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new bj(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(e),i}case 1:case hr.ShadowDom:return new Cj(this.eventManager,this.sharedStylesHost,e,r);default:if(!this.rendererByCompId.has(r.id)){const i=wf(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(e){return new(e||n)(Q(Df),Q(Gl),Q(Nl))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})();class ev{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(Zm[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){(sD(t)?t.content:t).appendChild(e)}insertBefore(t,e,r){t&&(sD(t)?t.content:t).insertBefore(e,r)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let r="string"==typeof t?document.querySelector(t):t;if(!r)throw new Error(`The selector "${t}" did not match any elements`);return e||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,r,i){if(i){e=i+":"+e;const o=Zm[i];o?t.setAttributeNS(o,e,r):t.setAttribute(e,r)}else t.setAttribute(e,r)}removeAttribute(t,e,r){if(r){const i=Zm[r];i?t.removeAttributeNS(i,e):t.removeAttribute(`${r}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,r,i){i&(yr.DashCase|yr.Important)?t.style.setProperty(e,r,i&yr.Important?"important":""):t.style[e]=r}removeStyle(t,e,r){r&yr.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,r){t[e]=r}setValue(t,e){t.nodeValue=e}listen(t,e,r){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,iD(r)):this.eventManager.addEventListener(t,e,iD(r))}}function sD(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class bj extends ev{constructor(t,e,r,i){super(t),this.component=r;const o=wf(i+"-"+r.id,r.styles,[]);e.addStyles(o),this.contentAttr=function vj(n){return"_ngcontent-%COMP%".replace(Xm,n)}(i+"-"+r.id),this.hostAttr=function yj(n){return"_nghost-%COMP%".replace(Xm,n)}(i+"-"+r.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const r=super.createElement(t,e);return super.setAttribute(r,this.contentAttr,""),r}}class Cj extends ev{constructor(t,e,r,i){super(t),this.sharedStylesHost=e,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=wf(i.id,i.styles,[]);for(let s=0;s<o.length;s++){const a=document.createElement("style");a.textContent=o[s],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,r){return super.insertBefore(this.nodeOrShadowRoot(t),e,r)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Ej=(()=>{class n extends XS{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,i){return e.addEventListener(r,i,!1),()=>this.removeEventListener(e,r,i)}removeEventListener(e,r,i){return e.removeEventListener(r,i)}}return n.\u0275fac=function(e){return new(e||n)(Q(Nt))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})();const aD=["alt","control","meta","shift"],Sj={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Dj={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let wj=(()=>{class n extends XS{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,r,i){const o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Fi().onAndCancel(e,o.domEventName,s))}static parseEventName(e){const r=e.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=n._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),aD.forEach(d=>{const p=r.indexOf(d);p>-1&&(r.splice(p,1),s+=d+".")}),s+=o,0!=r.length||0===o.length)return null;const c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(e,r){let i=Sj[e.key]||e.key,o="";return r.indexOf("code.")>-1&&(i=e.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),aD.forEach(s=>{s!==i&&(0,Dj[s])(e)&&(o+=s+".")}),o+=i,o===r)}static eventCallback(e,r,i){return o=>{n.matchEventFullKeyCode(o,e)&&i.runGuarded(()=>r(o))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return n.\u0275fac=function(e){return new(e||n)(Q(Nt))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})();const lD=[{provide:ef,useValue:qS},{provide:QE,useValue:function Tj(){Jm.makeCurrent()},multi:!0},{provide:Nt,useFactory:function Ij(){return function aP(n){ng=n}(document),document},deps:[]}],Aj=sS(pN,"browser",lD),uD=new ve(""),dD=[{provide:tf,useClass:class hj{addToWindow(t){Rt.getAngularTestability=(r,i=!0)=>{const o=t.findTestabilityInTree(r,i);if(null==o)throw new Error("Could not find testability for element.");return o},Rt.getAllAngularTestabilities=()=>t.getAllTestabilities(),Rt.getAllAngularRootElements=()=>t.getAllRootElements(),Rt.frameworkStabilizers||(Rt.frameworkStabilizers=[]),Rt.frameworkStabilizers.push(r=>{const i=Rt.getAllAngularTestabilities();let o=i.length,s=!1;const a=function(c){s=s||c,o--,0==o&&r(s)};i.forEach(function(c){c.whenStable(a)})})}findTestabilityInTree(t,e,r){if(null==e)return null;const i=t.getTestability(e);return null!=i?i:r?Fi().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}},deps:[]},{provide:nS,useClass:Mm,deps:[Ut,Im,tf]},{provide:Mm,useClass:Mm,deps:[Ut,Im,tf]}],fD=[{provide:ug,useValue:"root"},{provide:Ii,useFactory:function Mj(){return new Ii},deps:[]},{provide:Sf,useClass:Ej,multi:!0,deps:[Nt,Ut,ef]},{provide:Sf,useClass:wj,multi:!0,deps:[Nt]},{provide:Tf,useClass:Tf,deps:[Df,Gl,Nl]},{provide:Cl,useExisting:Tf},{provide:eD,useExisting:Gl},{provide:Gl,useClass:Gl,deps:[Nt]},{provide:Df,useClass:Df,deps:[Sf,Ut]},{provide:KS,useClass:pj,deps:[]},[]];let hD=(()=>{class n{constructor(e){}static withServerTransition(e){return{ngModule:n,providers:[{provide:Nl,useValue:e.appId},{provide:ZS,useExisting:Nl},fj]}}}return n.\u0275fac=function(e){return new(e||n)(Q(uD,12))},n.\u0275mod=jt({type:n}),n.\u0275inj=Lt({providers:[...fD,...dD],imports:[GS,gN]}),n})(),pD=(()=>{class n{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return n.\u0275fac=function(e){return new(e||n)(Q(Nt))},n.\u0275prov=de({token:n,factory:function(e){let r=null;return r=e?new e:function Pj(){return new pD(Q(Nt))}(),r},providedIn:"root"}),n})();function Ee(...n){let t=n[n.length-1];return Pe(t)?(n.pop(),Dr(n,t)):ys(n)}"undefined"!=typeof window&&window;class $r extends Le{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new tt;return this._value}next(t){super.next(this._value=t)}}const If=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})();class Vj extends N{notifyNext(t,e,r,i,o){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class Bj extends N{constructor(t,e,r){super(),this.parent=t,this.outerValue=e,this.outerIndex=r,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function Uj(n,t,e,r,i=new Bj(n,e,r)){if(!i.closed)return t instanceof ae?t.subscribe(i):Zn(t)(i)}const yD={};function rv(...n){let t,e;return Pe(n[n.length-1])&&(e=n.pop()),"function"==typeof n[n.length-1]&&(t=n.pop()),1===n.length&&Ce(n[0])&&(n=n[0]),ys(n,e).lift(new $j(t))}class $j{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Hj(t,this.resultSelector))}}class Hj extends Vj{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(yD),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let r=0;r<e;r++)this.add(Uj(this,t[r],void 0,r))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,r){const i=this.values,s=this.toRespond?i[r]===yD?--this.toRespond:this.toRespond:0;i[r]=e,0===s&&(this.resultSelector?this._tryResultSelector(i):this.destination.next(i.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(r){return void this.destination.error(r)}this.destination.next(e)}}function Af(...n){return function zj(){return vi(1)}()(Ee(...n))}const Dc=new ae(n=>n.complete());function xf(n){return n?function Gj(n){return new ae(t=>n.schedule(()=>t.complete()))}(n):Dc}function _D(n){return new ae(t=>{let e;try{e=n()}catch(i){return void t.error(i)}return(e?Wt(e):xf()).subscribe(t)})}function ea(n,t){return new ae(t?e=>t.schedule(qj,0,{error:n,subscriber:e}):e=>e.error(n))}function qj({error:n,subscriber:t}){t.error(n)}function Hr(n,t){return"function"==typeof t?e=>e.pipe(Hr((r,i)=>Wt(n(r,i)).pipe(Ae((o,s)=>t(r,o,i,s))))):e=>e.lift(new Wj(n))}class Wj{constructor(t){this.project=t}call(t,e){return e.subscribe(new Kj(t,this.project))}}class Kj extends Oo{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const r=this.index++;try{e=this.project(t,r)}catch(i){return void this.destination.error(i)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const r=new ba(this),i=this.destination;i.add(r),this.innerSubscription=Ca(t,r),this.innerSubscription!==r&&i.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;(!t||t.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const bD=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();function ta(n){return t=>0===n?xf():t.lift(new Yj(n))}class Yj{constructor(t){if(this.total=t,this.total<0)throw new bD}call(t,e){return e.subscribe(new Qj(t,this.total))}}class Qj extends N{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,r=++this.count;r<=e&&(this.destination.next(t),r===e&&(this.destination.complete(),this.unsubscribe()))}}function iv(...n){const t=n[n.length-1];return Pe(t)?(n.pop(),e=>Af(n,e,t)):e=>Af(n,e)}function bo(n,t){return function(r){return r.lift(new Jj(n,t))}}class Jj{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new Zj(t,this.predicate,this.thisArg))}}class Zj extends N{constructor(t,e,r){super(t),this.predicate=e,this.thisArg=r,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(r){return void this.destination.error(r)}e&&this.destination.next(t)}}function Pf(n=null){return t=>t.lift(new Xj(n))}class Xj{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new eV(t,this.defaultValue))}}class eV extends N{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function CD(n=rV){return t=>t.lift(new tV(n))}class tV{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new nV(t,this.errorFactory))}}class nV extends N{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)}}}function rV(){return new If}function es(n,t){const e=arguments.length>=2;return r=>r.pipe(n?bo((i,o)=>n(i,o,r)):Ne,ta(1),e?Pf(t):CD(()=>new If))}function ts(n,t){return cn(n,t,1)}function ns(){}function Sn(n,t,e){return function(i){return i.lift(new iV(n,t,e))}}class iV{constructor(t,e,r){this.nextOrObserver=t,this.error=e,this.complete=r}call(t,e){return e.subscribe(new oV(t,this.nextOrObserver,this.error,this.complete))}}class oV extends N{constructor(t,e,r,i){super(t),this._tapNext=ns,this._tapError=ns,this._tapComplete=ns,this._tapError=r||ns,this._tapComplete=i||ns,ut(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||ns,this._tapError=e.error||ns,this._tapComplete=e.complete||ns)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}function rs(n){return function(e){const r=new sV(n),i=e.lift(r);return r.caught=i}}class sV{constructor(t){this.selector=t}call(t,e){return e.subscribe(new aV(t,this.selector,this.caught))}}class aV extends Oo{constructor(t,e,r){super(t),this.selector=e,this.caught=r}error(t){if(!this.isStopped){let e;try{e=this.selector(t,this.caught)}catch(o){return void super.error(o)}this._unsubscribeAndRecycle();const r=new ba(this);this.add(r);const i=Ca(e,r);i!==r&&this.add(i)}}}function ED(n,t){let e=!1;return arguments.length>=2&&(e=!0),function(i){return i.lift(new cV(n,t,e))}}class cV{constructor(t,e,r=!1){this.accumulator=t,this.seed=e,this.hasSeed=r}call(t,e){return e.subscribe(new lV(t,this.accumulator,this.seed,this.hasSeed))}}class lV extends N{constructor(t,e,r,i){super(t),this.accumulator=e,this._seed=r,this.hasSeed=i,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let r;try{r=this.accumulator(this.seed,t,e)}catch(i){this.destination.error(i)}this.seed=r,this.destination.next(r)}}function ov(n){return function(e){return 0===n?xf():e.lift(new uV(n))}}class uV{constructor(t){if(this.total=t,this.total<0)throw new bD}call(t,e){return e.subscribe(new dV(t,this.total))}}class dV extends N{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,r=this.total,i=this.count++;e.length<r?e.push(t):e[i%r]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const r=this.count>=this.total?this.total:this.count,i=this.ring;for(let o=0;o<r;o++){const s=e++%r;t.next(i[s])}}t.complete()}}function SD(n,t){const e=arguments.length>=2;return r=>r.pipe(n?bo((i,o)=>n(i,o,r)):Ne,ov(1),e?Pf(t):CD(()=>new If))}class hV{constructor(t,e){this.predicate=t,this.inclusive=e}call(t,e){return e.subscribe(new pV(t,this.predicate,this.inclusive))}}class pV extends N{constructor(t,e,r){super(t),this.predicate=e,this.inclusive=r,this.index=0}_next(t){const e=this.destination;let r;try{r=this.predicate(t,this.index++)}catch(i){return void e.error(i)}this.nextOrComplete(t,r)}nextOrComplete(t,e){const r=this.destination;Boolean(e)?r.next(t):(this.inclusive&&r.next(t),r.complete())}}class mV{constructor(t){this.value=t}call(t,e){return e.subscribe(new vV(t,this.value))}}class vV extends N{constructor(t,e){super(t),this.value=e}_next(t){this.destination.next(this.value)}}function Rf(n){return t=>t.lift(new yV(n))}class yV{constructor(t){this.callback=t}call(t,e){return e.subscribe(new _V(t,this.callback))}}class _V extends N{constructor(t,e){super(t),this.add(new le(e))}}const Ze="primary",ql=Symbol("RouteTitle");class bV{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function wc(n){return new bV(n)}function CV(n,t,e){const r=e.path.split("/");if(r.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||r.length<n.length))return null;const i={};for(let o=0;o<r.length;o++){const s=r[o],a=n[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Ni(n,t){const e=n?Object.keys(n):void 0,r=t?Object.keys(t):void 0;if(!e||!r||e.length!=r.length)return!1;let i;for(let o=0;o<e.length;o++)if(i=e[o],!DD(n[i],t[i]))return!1;return!0}function DD(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),r=[...t].sort();return e.every((i,o)=>r[o]===i)}return n===t}function wD(n){return Array.prototype.concat.apply([],n)}function TD(n){return n.length>0?n[n.length-1]:null}function jn(n,t){for(const e in n)n.hasOwnProperty(e)&&t(n[e],e)}function is(n){return Yg(n)?n:Tl(n)?Wt(Promise.resolve(n)):Ee(n)}const DV={exact:function AD(n,t,e){if(!ra(n.segments,t.segments)||!kf(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const r in t.children)if(!n.children[r]||!AD(n.children[r],t.children[r],e))return!1;return!0},subset:xD},MD={exact:function wV(n,t){return Ni(n,t)},subset:function TV(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>DD(n[e],t[e]))},ignored:()=>!0};function ID(n,t,e){return DV[e.paths](n.root,t.root,e.matrixParams)&&MD[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function xD(n,t,e){return PD(n,t,t.segments,e)}function PD(n,t,e,r){if(n.segments.length>e.length){const i=n.segments.slice(0,e.length);return!(!ra(i,e)||t.hasChildren()||!kf(i,e,r))}if(n.segments.length===e.length){if(!ra(n.segments,e)||!kf(n.segments,e,r))return!1;for(const i in t.children)if(!n.children[i]||!xD(n.children[i],t.children[i],r))return!1;return!0}{const i=e.slice(0,n.segments.length),o=e.slice(n.segments.length);return!!(ra(n.segments,i)&&kf(n.segments,i,r)&&n.children[Ze])&&PD(n.children[Ze],t,o,r)}}function kf(n,t,e){return t.every((r,i)=>MD[e](n[i].parameters,r.parameters))}class na{constructor(t,e,r){this.root=t,this.queryParams=e,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=wc(this.queryParams)),this._queryParamMap}toString(){return AV.serialize(this)}}class et{constructor(t,e){this.segments=t,this.children=e,this.parent=null,jn(e,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Of(this)}}class Wl{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=wc(this.parameters)),this._parameterMap}toString(){return FD(this)}}function ra(n,t){return n.length===t.length&&n.every((e,r)=>e.path===t[r].path)}let RD=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=de({token:n,factory:function(){return new av},providedIn:"root"}),n})();class av{parse(t){const e=new jV(t);return new na(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${Kl(t.root,!0)}`,r=function RV(n){const t=Object.keys(n).map(e=>{const r=n[e];return Array.isArray(r)?r.map(i=>`${Ff(e)}=${Ff(i)}`).join("&"):`${Ff(e)}=${Ff(r)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams),i="string"==typeof t.fragment?`#${function xV(n){return encodeURI(n)}(t.fragment)}`:"";return`${e}${r}${i}`}}const AV=new av;function Of(n){return n.segments.map(t=>FD(t)).join("/")}function Kl(n,t){if(!n.hasChildren())return Of(n);if(t){const e=n.children[Ze]?Kl(n.children[Ze],!1):"",r=[];return jn(n.children,(i,o)=>{o!==Ze&&r.push(`${o}:${Kl(i,!1)}`)}),r.length>0?`${e}(${r.join("//")})`:e}{const e=function IV(n,t){let e=[];return jn(n.children,(r,i)=>{i===Ze&&(e=e.concat(t(r,i)))}),jn(n.children,(r,i)=>{i!==Ze&&(e=e.concat(t(r,i)))}),e}(n,(r,i)=>i===Ze?[Kl(n.children[Ze],!1)]:[`${i}:${Kl(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ze]?`${Of(n)}/${e[0]}`:`${Of(n)}/(${e.join("//")})`}}function kD(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ff(n){return kD(n).replace(/%3B/gi,";")}function cv(n){return kD(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Nf(n){return decodeURIComponent(n)}function OD(n){return Nf(n.replace(/\+/g,"%20"))}function FD(n){return`${cv(n.path)}${function PV(n){return Object.keys(n).map(t=>`;${cv(t)}=${cv(n[t])}`).join("")}(n.parameters)}`}const kV=/^[^\/()?;=#]+/;function Lf(n){const t=n.match(kV);return t?t[0]:""}const OV=/^[^=?&#]+/,NV=/^[^&#]+/;class jV{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new et([],{}):new et([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(r[Ze]=new et(t,e)),r}parseSegment(){const t=Lf(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Y(4009,!1);return this.capture(t),new Wl(Nf(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Lf(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const i=Lf(this.remaining);i&&(r=i,this.capture(r))}t[Nf(e)]=Nf(r)}parseQueryParam(t){const e=function FV(n){const t=n.match(OV);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const s=function LV(n){const t=n.match(NV);return t?t[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const i=OD(e),o=OD(r);if(t.hasOwnProperty(i)){let s=t[i];Array.isArray(s)||(s=[s],t[i]=s),s.push(o)}else t[i]=o}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Lf(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Y(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=Ze);const s=this.parseChildren();e[o]=1===Object.keys(s).length?s[Ze]:new et([],s),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Y(4011,!1)}}function lv(n){return n.segments.length>0?new et([],{[Ze]:n}):n}function jf(n){const t={};for(const r of Object.keys(n.children)){const o=jf(n.children[r]);(o.segments.length>0||o.hasChildren())&&(t[r]=o)}return function VV(n){if(1===n.numberOfChildren&&n.children[Ze]){const t=n.children[Ze];return new et(n.segments.concat(t.segments),t.children)}return n}(new et(n.segments,t))}function ia(n){return n instanceof na}function $V(n,t,e,r,i){var o;if(0===e.length)return Tc(t.root,t.root,t.root,r,i);const a=function jD(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new LD(!0,0,n);let t=0,e=!1;const r=n.reduce((i,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return jn(o.outlets,(c,d)=>{a[d]="string"==typeof c?c.split("/"):c}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===s?(o.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?e=!0:".."===a?t++:""!=a&&i.push(a))}),i):[...i,o]},[]);return new LD(e,t,r)}(e);return a.toRoot()?Tc(t.root,t.root,new et([],{}),r,i):function c(p){var g;const _=function zV(n,t,e,r){if(n.isAbsolute)return new Mc(t.root,!0,0);if(-1===r)return new Mc(e,e===t.root,0);return function VD(n,t,e){let r=n,i=t,o=e;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Y(4005,!1);i=r.segments.length}return new Mc(r,!1,i-o)}(e,r+(Yl(n.commands[0])?0:1),n.numberOfDoubleDots)}(a,t,null===(g=n.snapshot)||void 0===g?void 0:g._urlSegment,p),E=_.processChildren?Jl(_.segmentGroup,_.index,a.commands):dv(_.segmentGroup,_.index,a.commands);return Tc(t.root,_.segmentGroup,E,r,i)}(null===(o=n.snapshot)||void 0===o?void 0:o._lastPathIndex)}function Yl(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Ql(n){return"object"==typeof n&&null!=n&&n.outlets}function Tc(n,t,e,r,i){let s,o={};r&&jn(r,(c,d)=>{o[d]=Array.isArray(c)?c.map(p=>`${p}`):`${c}`}),s=n===t?e:ND(n,t,e);const a=lv(jf(s));return new na(a,o,i)}function ND(n,t,e){const r={};return jn(n.children,(i,o)=>{r[o]=i===t?e:ND(i,t,e)}),new et(n.segments,r)}class LD{constructor(t,e,r){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=r,t&&r.length>0&&Yl(r[0]))throw new Y(4003,!1);const i=r.find(Ql);if(i&&i!==TD(r))throw new Y(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Mc{constructor(t,e,r){this.segmentGroup=t,this.processChildren=e,this.index=r}}function dv(n,t,e){if(n||(n=new et([],{})),0===n.segments.length&&n.hasChildren())return Jl(n,t,e);const r=function qV(n,t,e){let r=0,i=t;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=e.length)return o;const s=n.segments[i],a=e[r];if(Ql(a))break;const c=`${a}`,d=r<e.length-1?e[r+1]:null;if(i>0&&void 0===c)break;if(c&&d&&"object"==typeof d&&void 0===d.outlets){if(!UD(c,d,s))return o;r+=2}else{if(!UD(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,t,e),i=e.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const o=new et(n.segments.slice(0,r.pathIndex),{});return o.children[Ze]=new et(n.segments.slice(r.pathIndex),n.children),Jl(o,0,i)}return r.match&&0===i.length?new et(n.segments,{}):r.match&&!n.hasChildren()?fv(n,t,e):r.match?Jl(n,0,i):fv(n,t,e)}function Jl(n,t,e){if(0===e.length)return new et(n.segments,{});{const r=function GV(n){return Ql(n[0])?n[0].outlets:{[Ze]:n}}(e),i={};return jn(r,(o,s)=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=dv(n.children[s],t,o))}),jn(n.children,(o,s)=>{void 0===r[s]&&(i[s]=o)}),new et(n.segments,i)}}function fv(n,t,e){const r=n.segments.slice(0,t);let i=0;for(;i<e.length;){const o=e[i];if(Ql(o)){const c=WV(o.outlets);return new et(r,c)}if(0===i&&Yl(e[0])){r.push(new Wl(n.segments[t].path,BD(e[0]))),i++;continue}const s=Ql(o)?o.outlets[Ze]:`${o}`,a=i<e.length-1?e[i+1]:null;s&&a&&Yl(a)?(r.push(new Wl(s,BD(a))),i+=2):(r.push(new Wl(s,{})),i++)}return new et(r,{})}function WV(n){const t={};return jn(n,(e,r)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[r]=fv(new et([],{}),0,e))}),t}function BD(n){const t={};return jn(n,(e,r)=>t[r]=`${e}`),t}function UD(n,t,e){return n==e.path&&Ni(t,e.parameters)}class Co{constructor(t,e){this.id=t,this.url=e}}class hv extends Co{constructor(t,e,r="imperative",i=null){super(t,e),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class oa extends Co{constructor(t,e,r){super(t,e),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Vf extends Co{constructor(t,e,r,i){super(t,e),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class $D extends Co{constructor(t,e,r,i){super(t,e),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class KV extends Co{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class YV extends Co{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class QV extends Co{constructor(t,e,r,i,o){super(t,e),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class JV extends Co{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ZV extends Co{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class XV{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class eB{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class tB{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nB{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rB{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class iB{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class HD{constructor(t,e,r){this.routerEvent=t,this.position=e,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class zD{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=pv(t,this._root);return e?e.children.map(r=>r.value):[]}firstChild(t){const e=pv(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=gv(t,this._root);return e.length<2?[]:e[e.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return gv(t,this._root).map(e=>e.value)}}function pv(n,t){if(n===t.value)return t;for(const e of t.children){const r=pv(n,e);if(r)return r}return null}function gv(n,t){if(n===t.value)return[t];for(const e of t.children){const r=gv(n,e);if(r.length)return r.unshift(t),r}return[]}class Eo{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Ic(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class GD extends zD{constructor(t,e){super(t),this.snapshot=e,mv(this,t)}toString(){return this.snapshot.toString()}}function qD(n,t){const e=function sB(n,t){const s=new Bf([],{},{},"",{},Ze,t,null,n.root,-1,{});return new KD("",new Eo(s,[]))}(n,t),r=new $r([new Wl("",{})]),i=new $r({}),o=new $r({}),s=new $r({}),a=new $r(""),c=new Li(r,i,s,a,o,Ze,t,e.root);return c.snapshot=e.root,new GD(new Eo(c,[]),e)}class Li{constructor(t,e,r,i,o,s,a,c){var d,p;this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.title=null!==(p=null===(d=this.data)||void 0===d?void 0:d.pipe(Ae(g=>g[ql])))&&void 0!==p?p:Ee(void 0),this._futureSnapshot=c}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Ae(t=>wc(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Ae(t=>wc(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function WD(n,t="emptyOnly"){const e=n.pathFromRoot;let r=0;if("always"!==t)for(r=e.length-1;r>=1;){const i=e[r],o=e[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function aB(n){return n.reduce((t,e)=>{var r;return{params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign(Object.assign(Object.assign({},e.data),t.resolve),null===(r=e.routeConfig)||void 0===r?void 0:r.data),e._resolvedData)}},{params:{},data:{},resolve:{}})}(e.slice(r))}class Bf{constructor(t,e,r,i,o,s,a,c,d,p,g,_){var E;this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.title=null===(E=this.data)||void 0===E?void 0:E[ql],this.routeConfig=c,this._urlSegment=d,this._lastPathIndex=p,this._correctedLastPathIndex=null!=_?_:p,this._resolve=g}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=wc(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=wc(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class KD extends zD{constructor(t,e){super(e),this.url=t,mv(this,e)}toString(){return YD(this._root)}}function mv(n,t){t.value._routerState=n,t.children.forEach(e=>mv(n,e))}function YD(n){const t=n.children.length>0?` { ${n.children.map(YD).join(", ")} } `:"";return`${n.value}${t}`}function vv(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,Ni(t.queryParams,e.queryParams)||n.queryParams.next(e.queryParams),t.fragment!==e.fragment&&n.fragment.next(e.fragment),Ni(t.params,e.params)||n.params.next(e.params),function EV(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!Ni(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.url.next(e.url),Ni(t.data,e.data)||n.data.next(e.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function yv(n,t){const e=Ni(n.params,t.params)&&function MV(n,t){return ra(n,t)&&n.every((e,r)=>Ni(e.parameters,t[r].parameters))}(n.url,t.url);return e&&!(!n.parent!=!t.parent)&&(!n.parent||yv(n.parent,t.parent))}function Zl(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const r=e.value;r._futureSnapshot=t.value;const i=function lB(n,t,e){return t.children.map(r=>{for(const i of e.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Zl(n,r,i);return Zl(n,r)})}(n,t,e);return new Eo(r,i)}{if(n.shouldAttach(t.value)){const o=n.retrieve(t.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>Zl(n,a)),s}}const r=function uB(n){return new Li(new $r(n.url),new $r(n.params),new $r(n.queryParams),new $r(n.fragment),new $r(n.data),n.outlet,n.component,n)}(t.value),i=t.children.map(o=>Zl(n,o));return new Eo(r,i)}}const _v="ngNavigationCancelingError";function QD(n,t){const{redirectTo:e,navigationBehaviorOptions:r}=ia(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=JD(!1,0,t);return i.url=e,i.navigationBehaviorOptions=r,i}function JD(n,t,e){const r=new Error("NavigationCancelingError: "+(n||""));return r[_v]=!0,r.cancellationCode=t,e&&(r.url=e),r}function ZD(n){return XD(n)&&ia(n.url)}function XD(n){return n&&n[_v]}class dB{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Xl,this.attachRef=null}}let Xl=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(e,r){const i=this.getOrCreateContext(e);i.outlet=r,this.contexts.set(e,i)}onChildOutletDestroyed(e){const r=this.getContext(e);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let r=this.getContext(e);return r||(r=new dB,this.contexts.set(e,r)),r}getContext(e){return this.contexts.get(e)||null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Uf=!1;let bv=(()=>{class n{constructor(e,r,i,o,s){this.parentContexts=e,this.location=r,this.changeDetector=o,this.environmentInjector=s,this.activated=null,this._activatedRoute=null,this.activateEvents=new Qt,this.deactivateEvents=new Qt,this.attachEvents=new Qt,this.detachEvents=new Qt,this.name=i||Ze,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){var e;(null===(e=this.parentContexts.getContext(this.name))||void 0===e?void 0:e.outlet)===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Y(4012,Uf);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Y(4012,Uf);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Y(4012,Uf);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,r){this.activated=e,this._activatedRoute=r,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,r){if(this.isActivated)throw new Y(4013,Uf);this._activatedRoute=e;const i=this.location,s=e._futureSnapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new fB(e,a,i.injector);if(r&&function hB(n){return!!n.resolveComponentFactory}(r)){const d=r.resolveComponentFactory(s);this.activated=i.createComponent(d,i.length,c)}else this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:null!=r?r:this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(e){return new(e||n)(V(Xl),V(di),function za(n){return function qA(n,t){if("class"===t)return n.classes;if("style"===t)return n.styles;const e=n.attrs;if(e){const r=e.length;let i=0;for(;i<r;){const o=e[i];if(ee(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof e[i];)i++;else{if(o===t)return e[i+1];i+=2}}}return null}(nn(),n)}("name"),V(Sc),V(Ko))},n.\u0275dir=Ie({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class fB{constructor(t,e,r){this.route=t,this.childContexts=e,this.parent=r}get(t,e){return t===Li?this.route:t===Xl?this.childContexts:this.parent.get(t,e)}}let Cv=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=yn({type:n,selectors:[["ng-component"]],standalone:!0,features:[uE],decls:1,vars:0,template:function(e,r){1&e&&ir(0,"router-outlet")},dependencies:[bv],encapsulation:2}),n})();function ew(n,t){var e;return n.providers&&!n._injector&&(n._injector=qd(n.providers,t,`Route: ${n.path}`)),null!==(e=n._injector)&&void 0!==e?e:t}function Sv(n){const t=n.children&&n.children.map(Sv),e=t?Object.assign(Object.assign({},n),{children:t}):Object.assign({},n);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==Ze&&(e.component=Cv),e}function zr(n){return n.outlet||Ze}function tw(n,t){const e=n.filter(r=>zr(r)===t);return e.push(...n.filter(r=>zr(r)!==t)),e}function eu(n){var t;if(!n)return null;if(null!==(t=n.routeConfig)&&void 0!==t&&t._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const r=e.routeConfig;if(null!=r&&r._loadedInjector)return r._loadedInjector;if(null!=r&&r._injector)return r._injector}return null}class yB{constructor(t,e,r,i){this.routeReuseStrategy=t,this.futureState=e,this.currState=r,this.forwardEvent=i}activate(t){const e=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,r,t),vv(this.futureState.root),this.activateChildRoutes(e,r,t)}deactivateChildRoutes(t,e,r){const i=Ic(e);t.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),jn(i,(o,s)=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(t,e,r){const i=t.value,o=e?e.value:null;if(i===o)if(i.component){const s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(t,e,s.children)}else this.deactivateChildRoutes(t,e,r);else o&&this.deactivateRouteAndItsChildren(e,r)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const r=e.getContext(t.value.outlet),i=r&&t.value.component?r.children:e,o=Ic(t);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){const r=e.getContext(t.value.outlet),i=r&&t.value.component?r.children:e,o=Ic(t);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(t,e,r){const i=Ic(e);t.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new iB(o.value.snapshot))}),t.children.length&&this.forwardEvent(new nB(t.value.snapshot))}activateRoutes(t,e,r){var i;const o=t.value,s=e?e.value:null;if(vv(o),o===s)if(o.component){const a=r.getOrCreateContext(o.outlet);this.activateChildRoutes(t,e,a.children)}else this.activateChildRoutes(t,e,r);else if(o.component){const a=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const c=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),a.children.onOutletReAttached(c.contexts),a.attachRef=c.componentRef,a.route=c.route.value,a.outlet&&a.outlet.attach(c.componentRef,c.route.value),vv(c.route.value),this.activateChildRoutes(t,null,a.children)}else{const c=eu(o.snapshot),d=null!==(i=null==c?void 0:c.get(bl))&&void 0!==i?i:null;a.attachRef=null,a.route=o,a.resolver=d,a.injector=c,a.outlet&&a.outlet.activateWith(o,a.injector),this.activateChildRoutes(t,null,a.children)}}else this.activateChildRoutes(t,null,r)}}class nw{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class $f{constructor(t,e){this.component=t,this.route=e}}function _B(n,t,e){const r=n._root;return tu(r,t?t._root:null,e,[r.value])}function Ac(n,t){const e=Symbol(),r=t.get(n,e);return r===e?"function"!=typeof n||function Ss(n){return null!==Fo(n)}(n)?t.get(n):n:r}function tu(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Ic(t);return n.children.forEach(s=>{(function CB(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,s=t?t.value:null,a=e?e.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const c=function EB(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!ra(n.url,t.url);case"pathParamsOrQueryParamsChange":return!ra(n.url,t.url)||!Ni(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!yv(n,t)||!Ni(n.queryParams,t.queryParams);default:return!yv(n,t)}}(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new nw(r)):(o.data=s.data,o._resolvedData=s._resolvedData),tu(n,t,o.component?a?a.children:null:e,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new $f(a.outlet.component,s))}else s&&nu(t,a,i),i.canActivateChecks.push(new nw(r)),tu(n,null,o.component?a?a.children:null:e,r,i)})(s,o[s.value.outlet],e,r.concat([s.value]),i),delete o[s.value.outlet]}),jn(o,(s,a)=>nu(s,e.getContext(a),i)),i}function nu(n,t,e){const r=Ic(n),i=n.value;jn(r,(o,s)=>{nu(o,i.component?t?t.children.getContext(s):null:t,e)}),e.canDeactivateChecks.push(new $f(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}function ru(n){return"function"==typeof n}function Dv(n){return n instanceof If||"EmptyError"===(null==n?void 0:n.name)}const Hf=Symbol("INITIAL_VALUE");function xc(){return Hr(n=>rv(n.map(t=>t.pipe(ta(1),iv(Hf)))).pipe(Ae(t=>{for(const e of t)if(!0!==e){if(e===Hf)return Hf;if(!1===e||e instanceof na)return e}return!0}),bo(t=>t!==Hf),ta(1)))}function rw(n){return function _t(...n){return re(n)}(Sn(t=>{if(ia(t))throw QD(0,t)}),Ae(t=>!0===t))}const wv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function iw(n,t,e,r,i){const o=Tv(n,t,e);return o.matched?function VB(n,t,e,r){const i=t.canMatch;return i&&0!==i.length?Ee(i.map(s=>{const a=Ac(s,n);return is(function IB(n){return n&&ru(n.canMatch)}(a)?a.canMatch(t,e):n.runInContext(()=>a(t,e)))})).pipe(xc(),rw()):Ee(!0)}(r=ew(t,r),t,e).pipe(Ae(s=>!0===s?o:Object.assign({},wv))):Ee(o)}function Tv(n,t,e){var r;if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?Object.assign({},wv):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const o=(t.matcher||CV)(e,n,t);if(!o)return Object.assign({},wv);const s={};jn(o.posParams,(c,d)=>{s[d]=c.path});const a=o.consumed.length>0?Object.assign(Object.assign({},s),o.consumed[o.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:o.consumed,remainingSegments:e.slice(o.consumed.length),parameters:a,positionalParamSegments:null!==(r=o.posParams)&&void 0!==r?r:{}}}function zf(n,t,e,r,i="corrected"){if(e.length>0&&function $B(n,t,e){return e.some(r=>Gf(n,t,r)&&zr(r)!==Ze)}(n,e,r)){const s=new et(t,function UB(n,t,e,r){const i={};i[Ze]=r,r._sourceSegment=n,r._segmentIndexShift=t.length;for(const o of e)if(""===o.path&&zr(o)!==Ze){const s=new et([],{});s._sourceSegment=n,s._segmentIndexShift=t.length,i[zr(o)]=s}return i}(n,t,r,new et(e,n.children)));return s._sourceSegment=n,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:[]}}if(0===e.length&&function HB(n,t,e){return e.some(r=>Gf(n,t,r))}(n,e,r)){const s=new et(n.segments,function BB(n,t,e,r,i,o){const s={};for(const a of r)if(Gf(n,e,a)&&!i[zr(a)]){const c=new et([],{});c._sourceSegment=n,c._segmentIndexShift="legacy"===o?n.segments.length:t.length,s[zr(a)]=c}return Object.assign(Object.assign({},i),s)}(n,t,e,r,n.children,i));return s._sourceSegment=n,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:e}}const o=new et(n.segments,n.children);return o._sourceSegment=n,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:e}}function Gf(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function ow(n,t,e,r){return!!(zr(n)===r||r!==Ze&&Gf(t,e,n))&&("**"===n.path||Tv(t,n,e).matched)}function sw(n,t,e){return 0===t.length&&!n.children[e]}const qf=!1;class Wf{constructor(t){this.segmentGroup=t||null}}class aw{constructor(t){this.urlTree=t}}function iu(n){return ea(new Wf(n))}function cw(n){return ea(new aw(n))}class WB{constructor(t,e,r,i,o){this.injector=t,this.configLoader=e,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0}apply(){const t=zf(this.urlTree.root,[],[],this.config).segmentGroup,e=new et(t.segments,t.children);return this.expandSegmentGroup(this.injector,this.config,e,Ze).pipe(Ae(o=>this.createUrlTree(jf(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(rs(o=>{if(o instanceof aw)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof Wf?this.noMatchError(o):o}))}match(t){return this.expandSegmentGroup(this.injector,this.config,t.root,Ze).pipe(Ae(i=>this.createUrlTree(jf(i),t.queryParams,t.fragment))).pipe(rs(i=>{throw i instanceof Wf?this.noMatchError(i):i}))}noMatchError(t){return new Y(4002,qf)}createUrlTree(t,e,r){const i=lv(t);return new na(i,e,r)}expandSegmentGroup(t,e,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(t,e,r).pipe(Ae(o=>new et([],o))):this.expandSegment(t,r,e,r.segments,i,!0)}expandChildren(t,e,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return Wt(i).pipe(ts(o=>{const s=r.children[o],a=tw(e,o);return this.expandSegmentGroup(t,a,s,o).pipe(Ae(c=>({segment:c,outlet:o})))}),ED((o,s)=>(o[s.outlet]=s.segment,o),{}),SD())}expandSegment(t,e,r,i,o,s){return Wt(r).pipe(ts(a=>this.expandSegmentAgainstRoute(t,e,r,a,i,o,s).pipe(rs(d=>{if(d instanceof Wf)return Ee(null);throw d}))),es(a=>!!a),rs((a,c)=>{if(Dv(a))return sw(e,i,o)?Ee(new et([],{})):iu(e);throw a}))}expandSegmentAgainstRoute(t,e,r,i,o,s,a){return ow(i,e,o,s)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(t,e,i,o,s):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,r,i,o,s):iu(e):iu(e)}expandSegmentAgainstRouteUsingRedirect(t,e,r,i,o,s){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,r,i,s):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,r,i,o,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,r,i){const o=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?cw(o):this.lineralizeSegments(r,o).pipe(cn(s=>{const a=new et(s,{});return this.expandSegment(t,a,e,s,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,r,i,o,s){const{matched:a,consumedSegments:c,remainingSegments:d,positionalParamSegments:p}=Tv(e,i,o);if(!a)return iu(e);const g=this.applyRedirectCommands(c,i.redirectTo,p);return i.redirectTo.startsWith("/")?cw(g):this.lineralizeSegments(i,g).pipe(cn(_=>this.expandSegment(t,e,r,_.concat(d),s,!1)))}matchSegmentAgainstRoute(t,e,r,i,o){return"**"===r.path?(t=ew(r,t),r.loadChildren?(r._loadedRoutes?Ee({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(t,r)).pipe(Ae(a=>(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,new et(i,{})))):Ee(new et(i,{}))):iw(e,r,i,t).pipe(Hr(({matched:s,consumedSegments:a,remainingSegments:c})=>{var d;return s?(t=null!==(d=r._injector)&&void 0!==d?d:t,this.getChildConfig(t,r,i).pipe(cn(g=>{var _;const E=null!==(_=g.injector)&&void 0!==_?_:t,D=g.routes,{segmentGroup:F,slicedSegments:H}=zf(e,a,c,D),K=new et(F.segments,F.children);if(0===H.length&&K.hasChildren())return this.expandChildren(E,D,K).pipe(Ae(He=>new et(a,He)));if(0===D.length&&0===H.length)return Ee(new et(a,{}));const ie=zr(r)===o;return this.expandSegment(E,K,D,H,ie?Ze:o,!0).pipe(Ae(se=>new et(a.concat(se.segments),se.children)))}))):iu(e)}))}getChildConfig(t,e,r){return e.children?Ee({routes:e.children,injector:t}):e.loadChildren?void 0!==e._loadedRoutes?Ee({routes:e._loadedRoutes,injector:e._loadedInjector}):function jB(n,t,e,r){const i=t.canLoad;return void 0===i||0===i.length?Ee(!0):Ee(i.map(s=>{const a=Ac(s,n);return is(function DB(n){return n&&ru(n.canLoad)}(a)?a.canLoad(t,e):n.runInContext(()=>a(t,e)))})).pipe(xc(),rw())}(t,e,r).pipe(cn(i=>i?this.configLoader.loadChildren(t,e).pipe(Sn(o=>{e._loadedRoutes=o.routes,e._loadedInjector=o.injector})):function GB(n){return ea(JD(qf,3))}())):Ee({routes:[],injector:t})}lineralizeSegments(t,e){let r=[],i=e.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Ee(r);if(i.numberOfChildren>1||!i.children[Ze])return ea(new Y(4e3,qf));i=i.children[Ze]}}applyRedirectCommands(t,e,r){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,r)}applyRedirectCreateUrlTree(t,e,r,i){const o=this.createSegmentGroup(t,e.root,r,i);return new na(o,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const r={};return jn(t,(i,o)=>{if("string"==typeof i&&i.startsWith(":")){const a=i.substring(1);r[o]=e[a]}else r[o]=i}),r}createSegmentGroup(t,e,r,i){const o=this.createSegments(t,e.segments,r,i);let s={};return jn(e.children,(a,c)=>{s[c]=this.createSegmentGroup(t,a,r,i)}),new et(o,s)}createSegments(t,e,r,i){return e.map(o=>o.path.startsWith(":")?this.findPosParam(t,o,i):this.findOrReturn(o,r))}findPosParam(t,e,r){const i=r[e.path.substring(1)];if(!i)throw new Y(4001,qf);return i}findOrReturn(t,e){let r=0;for(const i of e){if(i.path===t.path)return e.splice(r),i;r++}return t}}class YB{}class ZB{constructor(t,e,r,i,o,s,a,c){this.injector=t,this.rootComponentType=e,this.config=r,this.urlTree=i,this.url=o,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=a,this.urlSerializer=c}recognize(){const t=zf(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,Ze).pipe(Ae(e=>{if(null===e)return null;const r=new Bf([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ze,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Eo(r,e),o=new KD(this.url,i);return this.inheritParamsAndData(o._root),o}))}inheritParamsAndData(t){const e=t.value,r=WD(e,this.paramsInheritanceStrategy);e.params=Object.freeze(r.params),e.data=Object.freeze(r.data),t.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(t,e,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(t,e,r):this.processSegment(t,e,r,r.segments,i)}processChildren(t,e,r){return Wt(Object.keys(r.children)).pipe(ts(i=>{const o=r.children[i],s=tw(e,i);return this.processSegmentGroup(t,s,o,i)}),ED((i,o)=>i&&o?(i.push(...o),i):null),function fV(n,t=!1){return e=>e.lift(new hV(n,t))}(i=>null!==i),Pf(null),SD(),Ae(i=>{if(null===i)return null;const o=lw(i);return function XB(n){n.sort((t,e)=>t.value.outlet===Ze?-1:e.value.outlet===Ze?1:t.value.outlet.localeCompare(e.value.outlet))}(o),o}))}processSegment(t,e,r,i,o){return Wt(e).pipe(ts(s=>{var a;return this.processSegmentAgainstRoute(null!==(a=s._injector)&&void 0!==a?a:t,s,r,i,o)}),es(s=>!!s),rs(s=>{if(Dv(s))return sw(r,i,o)?Ee([]):Ee(null);throw s}))}processSegmentAgainstRoute(t,e,r,i,o){var s,a;if(e.redirectTo||!ow(e,r,i,o))return Ee(null);let c;if("**"===e.path){const d=i.length>0?TD(i).parameters:{},p=dw(r)+i.length;c=Ee({snapshot:new Bf(i,d,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,hw(e),zr(e),null!==(a=null!==(s=e.component)&&void 0!==s?s:e._loadedComponent)&&void 0!==a?a:null,e,uw(r),p,pw(e),p),consumedSegments:[],remainingSegments:[]})}else c=iw(r,e,i,t).pipe(Ae(({matched:d,consumedSegments:p,remainingSegments:g,parameters:_})=>{var E,D;if(!d)return null;const F=dw(r)+p.length;return{snapshot:new Bf(p,_,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,hw(e),zr(e),null!==(D=null!==(E=e.component)&&void 0!==E?E:e._loadedComponent)&&void 0!==D?D:null,e,uw(r),F,pw(e),F),consumedSegments:p,remainingSegments:g}}));return c.pipe(Hr(d=>{var p,g;if(null===d)return Ee(null);const{snapshot:_,consumedSegments:E,remainingSegments:D}=d;t=null!==(p=e._injector)&&void 0!==p?p:t;const F=null!==(g=e._loadedInjector)&&void 0!==g?g:t,H=function e2(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(e),{segmentGroup:K,slicedSegments:ie}=zf(r,E,D,H.filter(se=>void 0===se.redirectTo),this.relativeLinkResolution);if(0===ie.length&&K.hasChildren())return this.processChildren(F,H,K).pipe(Ae(se=>null===se?null:[new Eo(_,se)]));if(0===H.length&&0===ie.length)return Ee([new Eo(_,[])]);const z=zr(e)===o;return this.processSegment(F,H,K,ie,z?Ze:o).pipe(Ae(se=>null===se?null:[new Eo(_,se)]))}))}}function t2(n){const t=n.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function lw(n){const t=[],e=new Set;for(const r of n){if(!t2(r)){t.push(r);continue}const i=t.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),e.add(i)):t.push(r)}for(const r of e){const i=lw(r.children);t.push(new Eo(r.value,i))}return t.filter(r=>!e.has(r))}function uw(n){let t=n;for(;t._sourceSegment;)t=t._sourceSegment;return t}function dw(n){var t,e;let r=n,i=null!==(t=r._segmentIndexShift)&&void 0!==t?t:0;for(;r._sourceSegment;)r=r._sourceSegment,i+=null!==(e=r._segmentIndexShift)&&void 0!==e?e:0;return i-1}function hw(n){return n.data||{}}function pw(n){return n.resolve||{}}function gw(n){return"string"==typeof n.title||null===n.title}function Mv(n){return Hr(t=>{const e=n(t);return e?Wt(e).pipe(Ae(()=>t)):Ee(t)})}let mw=(()=>{class n{buildTitle(e){var r;let i,o=e.root;for(;void 0!==o;)i=null!==(r=this.getResolvedTitleForRoute(o))&&void 0!==r?r:i,o=o.children.find(s=>s.outlet===Ze);return i}getResolvedTitleForRoute(e){return e.data[ql]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=de({token:n,factory:function(){return qt(vw)},providedIn:"root"}),n})(),vw=(()=>{class n extends mw{constructor(e){super(),this.title=e}updateTitle(e){const r=this.buildTitle(e);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(e){return new(e||n)(Q(pD))},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class l2{}class d2 extends class u2{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const Yf=new ve("",{providedIn:"root",factory:()=>({})}),Iv=new ve("ROUTES");let Av=(()=>{class n{constructor(e,r){this.injector=e,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return Ee(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const r=is(e.loadComponent()).pipe(Sn(o=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=o}),Rf(()=>{this.componentLoaders.delete(e)})),i=new bs(r,()=>new Le).pipe(_s());return this.componentLoaders.set(e,i),i}loadChildren(e,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Ee({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(Ae(a=>{this.onLoadEndListener&&this.onLoadEndListener(r);let c,d,p=!1;Array.isArray(a)?d=a:(c=a.create(e).injector,d=wD(c.get(Iv,[],xe.Self|xe.Optional)));return{routes:d.map(Sv),injector:c}}),Rf(()=>{this.childrenLoaders.delete(r)})),s=new bs(o,()=>new Le).pipe(_s());return this.childrenLoaders.set(r,s),s}loadModuleFactoryOrRoutes(e){return is(e()).pipe(cn(r=>r instanceof cE||Array.isArray(r)?Ee(r):Wt(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(e){return new(e||n)(Q(_r),Q(Sm))},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class h2{}class p2{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function g2(n){throw n}function m2(n,t,e){return t.parse("/")}const v2={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},y2={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function _w(){var n,t;const e=qt(RD),r=qt(Xl),i=qt(uf),o=qt(_r),s=qt(Sm),a=null!==(n=qt(Iv,{optional:!0}))&&void 0!==n?n:[],c=null!==(t=qt(Yf,{optional:!0}))&&void 0!==t?t:{},d=qt(vw),p=qt(mw,{optional:!0}),g=qt(h2,{optional:!0}),_=qt(l2,{optional:!0}),E=new gn(null,e,r,i,o,s,wD(a));return g&&(E.urlHandlingStrategy=g),_&&(E.routeReuseStrategy=_),E.titleStrategy=null!=p?p:d,function _2(n,t){n.errorHandler&&(t.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(t.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(t.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(t.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(t.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(t.canceledNavigationResolution=n.canceledNavigationResolution)}(c,E),E}let gn=(()=>{class n{constructor(e,r,i,o,s,a,c){this.rootComponentType=e,this.urlSerializer=r,this.rootContexts=i,this.location=o,this.config=c,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Le,this.errorHandler=g2,this.malformedUriErrorHandler=m2,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>Ee(void 0),this.urlHandlingStrategy=new p2,this.routeReuseStrategy=new d2,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=s.get(Av),this.configLoader.onLoadEndListener=_=>this.triggerEvent(new eB(_)),this.configLoader.onLoadStartListener=_=>this.triggerEvent(new XV(_)),this.ngModule=s.get(Qs),this.console=s.get(kF);const g=s.get(Ut);this.isNgZoneEnabled=g instanceof Ut&&Ut.isInAngularZone(),this.resetConfig(c),this.currentUrlTree=function SV(){return new na(new et([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=qD(this.currentUrlTree,this.rootComponentType),this.transitions=new $r({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}setupNavigations(e){const r=this.events;return e.pipe(bo(i=>0!==i.id),Ae(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Hr(i=>{let o=!1,s=!1;return Ee(i).pipe(Sn(a=>{this.currentNavigation={id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Hr(a=>{const c=this.browserUrlTree.toString(),d=!this.navigated||a.extractedUrl.toString()!==c||c!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||d)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return bw(a.source)&&(this.browserUrlTree=a.extractedUrl),Ee(a).pipe(Hr(g=>{const _=this.transitions.getValue();return r.next(new hv(g.id,this.serializeUrl(g.extractedUrl),g.source,g.restoredState)),_!==this.transitions.getValue()?Dc:Promise.resolve(g)}),function KB(n,t,e,r){return Hr(i=>function qB(n,t,e,r,i){return new WB(n,t,e,r,i).apply()}(n,t,e,i.extractedUrl,r).pipe(Ae(o=>Object.assign(Object.assign({},i),{urlAfterRedirects:o}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Sn(g=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:g.urlAfterRedirects}),i.urlAfterRedirects=g.urlAfterRedirects}),function r2(n,t,e,r,i,o){return cn(s=>function JB(n,t,e,r,i,o,s="emptyOnly",a="legacy"){return new ZB(n,t,e,r,i,s,a,o).recognize().pipe(Hr(c=>null===c?function QB(n){return new ae(t=>t.error(n))}(new YB):Ee(c)))}(n,t,e,s.urlAfterRedirects,r.serialize(s.urlAfterRedirects),r,i,o).pipe(Ae(a=>Object.assign(Object.assign({},s),{targetSnapshot:a}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),Sn(g=>{if(i.targetSnapshot=g.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!g.extras.skipLocationChange){const E=this.urlHandlingStrategy.merge(g.urlAfterRedirects,g.rawUrl);this.setBrowserUrl(E,g)}this.browserUrlTree=g.urlAfterRedirects}const _=new KV(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);r.next(_)}));if(d&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:_,extractedUrl:E,source:D,restoredState:F,extras:H}=a,K=new hv(_,this.serializeUrl(E),D,F);r.next(K);const ie=qD(E,this.rootComponentType).snapshot;return Ee(i=Object.assign(Object.assign({},a),{targetSnapshot:ie,urlAfterRedirects:E,extras:Object.assign(Object.assign({},H),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=a.rawUrl,a.resolve(null),Dc}),Sn(a=>{const c=new YV(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(c)}),Ae(a=>i=Object.assign(Object.assign({},a),{guards:_B(a.targetSnapshot,a.currentSnapshot,this.rootContexts)})),function xB(n,t){return cn(e=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=e;return 0===s.length&&0===o.length?Ee(Object.assign(Object.assign({},e),{guardsResult:!0})):function PB(n,t,e,r){return Wt(n).pipe(cn(i=>function LB(n,t,e,r,i){const o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return o&&0!==o.length?Ee(o.map(a=>{var c;const d=null!==(c=eu(t))&&void 0!==c?c:i,p=Ac(a,d);return is(function MB(n){return n&&ru(n.canDeactivate)}(p)?p.canDeactivate(n,t,e,r):d.runInContext(()=>p(n,t,e,r))).pipe(es())})).pipe(xc()):Ee(!0)}(i.component,i.route,e,t,r)),es(i=>!0!==i,!0))}(s,r,i,n).pipe(cn(a=>a&&function SB(n){return"boolean"==typeof n}(a)?function RB(n,t,e,r){return Wt(t).pipe(ts(i=>Af(function OB(n,t){return null!==n&&t&&t(new tB(n)),Ee(!0)}(i.route.parent,r),function kB(n,t){return null!==n&&t&&t(new rB(n)),Ee(!0)}(i.route,r),function NB(n,t,e){const r=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>function bB(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(s)).filter(s=>null!==s).map(s=>_D(()=>Ee(s.guards.map(c=>{var d;const p=null!==(d=eu(s.node))&&void 0!==d?d:e,g=Ac(c,p);return is(function TB(n){return n&&ru(n.canActivateChild)}(g)?g.canActivateChild(r,n):p.runInContext(()=>g(r,n))).pipe(es())})).pipe(xc())));return Ee(o).pipe(xc())}(n,i.path,e),function FB(n,t,e){const r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return Ee(!0);const i=r.map(o=>_D(()=>{var s;const a=null!==(s=eu(t))&&void 0!==s?s:e,c=Ac(o,a);return is(function wB(n){return n&&ru(n.canActivate)}(c)?c.canActivate(t,n):a.runInContext(()=>c(t,n))).pipe(es())}));return Ee(i).pipe(xc())}(n,i.route,e))),es(i=>!0!==i,!0))}(r,o,n,t):Ee(a)),Ae(a=>Object.assign(Object.assign({},e),{guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),Sn(a=>{if(i.guardsResult=a.guardsResult,ia(a.guardsResult))throw QD(0,a.guardsResult);const c=new QV(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(c)}),bo(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,"",3),!1)),Mv(a=>{if(a.guards.canActivateChecks.length)return Ee(a).pipe(Sn(c=>{const d=new JV(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot);this.triggerEvent(d)}),Hr(c=>{let d=!1;return Ee(c).pipe(function i2(n,t){return cn(e=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=e;if(!i.length)return Ee(e);let o=0;return Wt(i).pipe(ts(s=>function o2(n,t,e,r){const i=n.routeConfig,o=n._resolve;return void 0!==(null==i?void 0:i.title)&&!gw(i)&&(o[ql]=i.title),function s2(n,t,e,r){const i=function a2(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return Ee({});const o={};return Wt(i).pipe(cn(s=>function c2(n,t,e,r){var i;const o=null!==(i=eu(t))&&void 0!==i?i:r,s=Ac(n,o);return is(s.resolve?s.resolve(t,e):o.runInContext(()=>s(t,e)))}(n[s],t,e,r).pipe(es(),Sn(a=>{o[s]=a}))),ov(1),function gV(n){return t=>t.lift(new mV(n))}(o),rs(s=>Dv(s)?Dc:ea(s)))}(o,n,t,r).pipe(Ae(s=>(n._resolvedData=s,n.data=WD(n,e).resolve,i&&gw(i)&&(n.data[ql]=i.title),null)))}(s.route,r,n,t)),Sn(()=>o++),ov(1),cn(s=>o===i.length?Ee(e):Dc))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Sn({next:()=>d=!0,complete:()=>{d||(this.restoreHistory(c),this.cancelNavigationTransition(c,"",2))}}))}),Sn(c=>{const d=new ZV(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot);this.triggerEvent(d)}))}),Mv(a=>{const c=d=>{var p;const g=[];(null===(p=d.routeConfig)||void 0===p?void 0:p.loadComponent)&&!d.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(d.routeConfig).pipe(Sn(_=>{d.component=_}),Ae(()=>{})));for(const _ of d.children)g.push(...c(_));return g};return rv(c(a.targetSnapshot.root)).pipe(Pf(),ta(1))}),Mv(()=>this.afterPreactivation()),Ae(a=>{const c=function cB(n,t,e){const r=Zl(n,t._root,e?e._root:void 0);return new GD(r,t)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return i=Object.assign(Object.assign({},a),{targetRouterState:c})}),Sn(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((n,t,e)=>Ae(r=>(new yB(t,r.targetRouterState,r.currentRouterState,e).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),Sn({next(){o=!0},complete(){o=!0}}),Rf(()=>{var a;o||s||this.cancelNavigationTransition(i,"",1),(null===(a=this.currentNavigation)||void 0===a?void 0:a.id)===i.id&&(this.currentNavigation=null)}),rs(a=>{var c;if(s=!0,XD(a)){ZD(a)||(this.navigated=!0,this.restoreHistory(i,!0));const d=new Vf(i.id,this.serializeUrl(i.extractedUrl),a.message,a.cancellationCode);if(r.next(d),ZD(a)){const p=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),g={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||bw(i.source)};this.scheduleNavigation(p,"imperative",null,g,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const d=new $D(i.id,this.serializeUrl(i.extractedUrl),a,null!==(c=i.targetSnapshot)&&void 0!==c?c:void 0);r.next(d);try{i.resolve(this.errorHandler(a))}catch(p){i.reject(p)}}return Dc}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const r="popstate"===e.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const o={replaceUrl:!0},s=null!==(i=e.state)&&void 0!==i&&i.navigationId?e.state:null;if(s){const c=Object.assign({},s);delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(o.state=c)}const a=this.parseUrl(e.url);this.scheduleNavigation(a,r,s,o)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){this.config=e.map(Sv),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,r={}){const{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,d=i||this.routerState.root,p=c?this.currentUrlTree.fragment:s;let g=null;switch(a){case"merge":g=Object.assign(Object.assign({},this.currentUrlTree.queryParams),o);break;case"preserve":g=this.currentUrlTree.queryParams;break;default:g=o||null}return null!==g&&(g=this.removeEmptyProps(g)),$V(d,this.currentUrlTree,e,g,null!=p?p:null)}navigateByUrl(e,r={skipLocationChange:!1}){const i=ia(e)?e:this.parseUrl(e),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,"imperative",null,r)}navigate(e,r={skipLocationChange:!1}){return function b2(n){for(let t=0;t<n.length;t++){if(null==n[t])throw new Y(4008,false)}}(e),this.navigateByUrl(this.createUrlTree(e,r),r)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let r;try{r=this.urlSerializer.parse(e)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,e)}return r}isActive(e,r){let i;if(i=!0===r?Object.assign({},v2):!1===r?Object.assign({},y2):r,ia(e))return ID(this.currentUrlTree,e,i);const o=this.parseUrl(e);return ID(this.currentUrlTree,o,i)}removeEmptyProps(e){return Object.keys(e).reduce((r,i)=>{const o=e[i];return null!=o&&(r[i]=o),r},{})}processNavigations(){this.navigations.subscribe(e=>{var r;this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new oa(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,null===(r=this.titleStrategy)||void 0===r||r.updateTitle(this.routerState.snapshot),e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,r,i,o,s){var a,c;if(this.disposed)return Promise.resolve(!1);let d,p,g;s?(d=s.resolve,p=s.reject,g=s.promise):g=new Promise((D,F)=>{d=D,p=F});const _=++this.navigationId;let E;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),E=i&&i.\u0275routerPageId?i.\u0275routerPageId:o.replaceUrl||o.skipLocationChange?null!==(a=this.browserPageId)&&void 0!==a?a:0:(null!==(c=this.browserPageId)&&void 0!==c?c:0)+1):E=0,this.setTransition({id:_,targetPageId:E,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:o,resolve:d,reject:p,promise:g,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),g.catch(D=>Promise.reject(D))}setBrowserUrl(e,r){const i=this.urlSerializer.serialize(e),o=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",o):this.location.go(i,"",o)}restoreHistory(e,r=!1){var i,o;if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===s?this.currentUrlTree===(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)&&0===s&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(s)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,r,i){const o=new Vf(e.id,this.serializeUrl(e.extractedUrl),r,i);this.triggerEvent(o),e.resolve(!1)}generateNgRouterState(e,r){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:r}:{navigationId:e}}}return n.\u0275fac=function(e){Cg()},n.\u0275prov=de({token:n,factory:function(){return _w()},providedIn:"root"}),n})();function bw(n){return"imperative"!==n}class Cw{}let S2=(()=>{class n{constructor(e,r,i,o,s){this.router=e,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(bo(e=>e instanceof oa),ts(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,r){var i,o,s;const a=[];for(const c of r){c.providers&&!c._injector&&(c._injector=qd(c.providers,e,`Route: ${c.path}`));const d=null!==(i=c._injector)&&void 0!==i?i:e,p=null!==(o=c._loadedInjector)&&void 0!==o?o:d;c.loadChildren&&!c._loadedRoutes&&void 0===c.canLoad||c.loadComponent&&!c._loadedComponent?a.push(this.preloadConfig(d,c)):(c.children||c._loadedRoutes)&&a.push(this.processRoutes(p,null!==(s=c.children)&&void 0!==s?s:c._loadedRoutes))}return Wt(a).pipe(vi())}preloadConfig(e,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(e,r):Ee(null);const o=i.pipe(cn(s=>{var a;return null===s?Ee(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(null!==(a=s.injector)&&void 0!==a?a:e,s.routes))}));return r.loadComponent&&!r._loadedComponent?Wt([o,this.loader.loadComponent(r)]).pipe(vi()):o})}}return n.\u0275fac=function(e){return new(e||n)(Q(gn),Q(Sm),Q(Ko),Q(Cw),Q(Av))},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Rv=new ve("");let Ew=(()=>{class n{constructor(e,r,i={}){this.router=e,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof hv?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof oa&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof HD&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,r){this.router.triggerEvent(new HD(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(e){Cg()},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})();function Pc(n,t){return{\u0275kind:n,\u0275providers:t}}function kv(n){return[{provide:Iv,multi:!0,useValue:n}]}function Dw(){const n=qt(_r);return t=>{var e,r;const i=n.get(jl);if(t!==i.components[0])return;const o=n.get(gn),s=n.get(ww);1===n.get(Ov)&&o.initialNavigation(),null===(e=n.get(Tw,null,xe.Optional))||void 0===e||e.setUpPreloading(),null===(r=n.get(Rv,null,xe.Optional))||void 0===r||r.init(),o.resetRootComponentType(i.componentTypes[0]),s.closed||(s.next(),s.unsubscribe())}}const ww=new ve("",{factory:()=>new Le}),Ov=new ve("",{providedIn:"root",factory:()=>1});const Tw=new ve("");function M2(n){return Pc(0,[{provide:Tw,useExisting:S2},{provide:Cw,useExisting:n}])}const Mw=new ve("ROUTER_FORROOT_GUARD"),I2=[uf,{provide:RD,useClass:av},{provide:gn,useFactory:_w},Xl,{provide:Li,useFactory:function Sw(n){return n.routerState.root},deps:[gn]},Av];function A2(){return new iS("Router",gn)}let Iw=(()=>{class n{constructor(e){}static forRoot(e,r){return{ngModule:n,providers:[I2,[],kv(e),{provide:Mw,useFactory:k2,deps:[[gn,new Wo,new Ja]]},{provide:Yf,useValue:r||{}},null!=r&&r.useHash?{provide:Zs,useClass:EN}:{provide:Zs,useClass:IS},{provide:Rv,useFactory:()=>{const n=qt(gn),t=qt($L),e=qt(Yf);return e.scrollOffset&&t.setOffset(e.scrollOffset),new Ew(n,t,e)}},null!=r&&r.preloadingStrategy?M2(r.preloadingStrategy).\u0275providers:[],{provide:iS,multi:!0,useFactory:A2},null!=r&&r.initialNavigation?O2(r):[],[{provide:Aw,useFactory:Dw},{provide:JE,multi:!0,useExisting:Aw}]]}}static forChild(e){return{ngModule:n,providers:[kv(e)]}}}return n.\u0275fac=function(e){return new(e||n)(Q(Mw,8))},n.\u0275mod=jt({type:n}),n.\u0275inj=Lt({imports:[Cv]}),n})();function k2(n){return"guarded"}function O2(n){return["disabled"===n.initialNavigation?Pc(3,[{provide:Zd,multi:!0,useFactory:()=>{const t=qt(gn);return()=>{t.setUpLocationChangeListener()}}},{provide:Ov,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Pc(2,[{provide:Ov,useValue:0},{provide:Zd,multi:!0,deps:[_r],useFactory:t=>{const e=t.get(bN,Promise.resolve());let r=!1;return()=>e.then(()=>new Promise(o=>{const s=t.get(gn),a=t.get(ww);(function i(o){t.get(gn).events.pipe(bo(a=>a instanceof oa||a instanceof Vf||a instanceof $D),Ae(a=>a instanceof oa||a instanceof Vf&&(0===a.code||1===a.code)&&null),bo(a=>null!==a),ta(1)).subscribe(()=>{o()})})(()=>{o(!0),r=!0}),s.afterPreactivation=()=>(o(!0),r||a.closed?Ee(void 0):a),s.initialNavigation()}))}}]).\u0275providers:[]]}const Aw=new ve("");var kr=(()=>(function(n){n.HOME="",n.LOBBY="lobby",n.GAME="game",n.LOCAL="local",n.JOIN="join"}(kr||(kr={})),kr))();function xw(n,t,e,r,i,o,s){try{var a=n[o](s),c=a.value}catch(d){return void e(d)}a.done?t(c):Promise.resolve(c).then(r,i)}function So(n){return function(){var t=this,e=arguments;return new Promise(function(r,i){var o=n.apply(t,e);function s(c){xw(o,r,i,s,a,"next",c)}function a(c){xw(o,r,i,s,a,"throw",c)}s(void 0)})}}var Pw=T(297);let Rw=!0,kw=!0;function ou(n,t,e){const r=n.match(t);return r&&r.length>=e&&parseInt(r[e],10)}function Rc(n,t,e){if(!n.RTCPeerConnection)return;const r=n.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(s,a){if(s!==t)return i.apply(this,arguments);const c=d=>{const p=e(d);p&&(a.handleEvent?a.handleEvent(p):a(p))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(a,c),i.apply(this,[s,c])};const o=r.removeEventListener;r.removeEventListener=function(s,a){if(s!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(a))return o.apply(this,arguments);const c=this._eventMap[t].get(a);return this._eventMap[t].delete(a),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,o.apply(this,[s,c])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(s){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),s&&this.addEventListener(t,this["_on"+t]=s)},enumerable:!0,configurable:!0})}function N2(n){return"boolean"!=typeof n?new Error("Argument type: "+typeof n+". Please use a boolean."):(Rw=n,n?"adapter.js logging disabled":"adapter.js logging enabled")}function L2(n){return"boolean"!=typeof n?new Error("Argument type: "+typeof n+". Please use a boolean."):(kw=!n,"adapter.js deprecation warnings "+(n?"disabled":"enabled"))}function Fv(){if("object"==typeof window){if(Rw)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function Xf(n,t){!kw||console.warn(n+" is deprecated, please use "+t+" instead.")}function Ow(n){return"[object Object]"===Object.prototype.toString.call(n)}function Fw(n){return Ow(n)?Object.keys(n).reduce(function(t,e){const r=Ow(n[e]),i=r?Fw(n[e]):n[e],o=r&&!Object.keys(i).length;return void 0===i||o?t:Object.assign(t,{[e]:i})},{}):n}function Nv(n,t,e){!t||e.has(t.id)||(e.set(t.id,t),Object.keys(t).forEach(r=>{r.endsWith("Id")?Nv(n,n.get(t[r]),e):r.endsWith("Ids")&&t[r].forEach(i=>{Nv(n,n.get(i),e)})}))}function Nw(n,t,e){const r=e?"outbound-rtp":"inbound-rtp",i=new Map;if(null===t)return i;const o=[];return n.forEach(s=>{"track"===s.type&&s.trackIdentifier===t.id&&o.push(s)}),o.forEach(s=>{n.forEach(a=>{a.type===r&&a.trackId===s.id&&Nv(n,a,i)})}),i}const Lw=Fv;function jw(n,t){const e=n&&n.navigator;if(!e.mediaDevices)return;const r=function(a){if("object"!=typeof a||a.mandatory||a.optional)return a;const c={};return Object.keys(a).forEach(d=>{if("require"===d||"advanced"===d||"mediaSource"===d)return;const p="object"==typeof a[d]?a[d]:{ideal:a[d]};void 0!==p.exact&&"number"==typeof p.exact&&(p.min=p.max=p.exact);const g=function(_,E){return _?_+E.charAt(0).toUpperCase()+E.slice(1):"deviceId"===E?"sourceId":E};if(void 0!==p.ideal){c.optional=c.optional||[];let _={};"number"==typeof p.ideal?(_[g("min",d)]=p.ideal,c.optional.push(_),_={},_[g("max",d)]=p.ideal,c.optional.push(_)):(_[g("",d)]=p.ideal,c.optional.push(_))}void 0!==p.exact&&"number"!=typeof p.exact?(c.mandatory=c.mandatory||{},c.mandatory[g("",d)]=p.exact):["min","max"].forEach(_=>{void 0!==p[_]&&(c.mandatory=c.mandatory||{},c.mandatory[g(_,d)]=p[_])})}),a.advanced&&(c.optional=(c.optional||[]).concat(a.advanced)),c},i=function(a,c){if(t.version>=61)return c(a);if((a=JSON.parse(JSON.stringify(a)))&&"object"==typeof a.audio){const d=function(p,g,_){g in p&&!(_ in p)&&(p[_]=p[g],delete p[g])};d((a=JSON.parse(JSON.stringify(a))).audio,"autoGainControl","googAutoGainControl"),d(a.audio,"noiseSuppression","googNoiseSuppression"),a.audio=r(a.audio)}if(a&&"object"==typeof a.video){let d=a.video.facingMode;d=d&&("object"==typeof d?d:{ideal:d});const p=t.version<66;if(d&&("user"===d.exact||"environment"===d.exact||"user"===d.ideal||"environment"===d.ideal)&&(!e.mediaDevices.getSupportedConstraints||!e.mediaDevices.getSupportedConstraints().facingMode||p)){let g;if(delete a.video.facingMode,"environment"===d.exact||"environment"===d.ideal?g=["back","rear"]:("user"===d.exact||"user"===d.ideal)&&(g=["front"]),g)return e.mediaDevices.enumerateDevices().then(_=>{let E=(_=_.filter(D=>"videoinput"===D.kind)).find(D=>g.some(F=>D.label.toLowerCase().includes(F)));return!E&&_.length&&g.includes("back")&&(E=_[_.length-1]),E&&(a.video.deviceId=d.exact?{exact:E.deviceId}:{ideal:E.deviceId}),a.video=r(a.video),Lw("chrome: "+JSON.stringify(a)),c(a)})}a.video=r(a.video)}return Lw("chrome: "+JSON.stringify(a)),c(a)},o=function(a){return t.version>=64?a:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[a.name]||a.name,message:a.message,constraint:a.constraint||a.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(e.getUserMedia=function(a,c,d){i(a,p=>{e.webkitGetUserMedia(p,c,g=>{d&&d(o(g))})})}.bind(e),e.mediaDevices.getUserMedia){const a=e.mediaDevices.getUserMedia.bind(e.mediaDevices);e.mediaDevices.getUserMedia=function(c){return i(c,d=>a(d).then(p=>{if(d.audio&&!p.getAudioTracks().length||d.video&&!p.getVideoTracks().length)throw p.getTracks().forEach(g=>{g.stop()}),new DOMException("","NotFoundError");return p},p=>Promise.reject(o(p))))}}}function V2(n,t){if((!n.navigator.mediaDevices||!("getDisplayMedia"in n.navigator.mediaDevices))&&n.navigator.mediaDevices){if("function"!=typeof t)return void console.error("shimGetDisplayMedia: getSourceId argument is not a function");n.navigator.mediaDevices.getDisplayMedia=function(r){return t(r).then(i=>{const o=r.video&&r.video.width,s=r.video&&r.video.height;return r.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:i,maxFrameRate:r.video&&r.video.frameRate||3}},o&&(r.video.mandatory.maxWidth=o),s&&(r.video.mandatory.maxHeight=s),n.navigator.mediaDevices.getUserMedia(r)})}}}function Vw(n){n.MediaStream=n.MediaStream||n.webkitMediaStream}function Bw(n){if("object"==typeof n&&n.RTCPeerConnection&&!("ontrack"in n.RTCPeerConnection.prototype)){Object.defineProperty(n.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});const t=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let o;o=n.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(a=>a.track&&a.track.id===i.track.id):{track:i.track};const s=new Event("track");s.track=i.track,s.receiver=o,s.transceiver={receiver:o},s.streams=[r.stream],this.dispatchEvent(s)}),r.stream.getTracks().forEach(i=>{let o;o=n.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(a=>a.track&&a.track.id===i.id):{track:i};const s=new Event("track");s.track=i,s.receiver=o,s.transceiver={receiver:o},s.streams=[r.stream],this.dispatchEvent(s)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else Rc(n,"track",t=>(t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t))}function Uw(n){if("object"==typeof n&&n.RTCPeerConnection&&!("getSenders"in n.RTCPeerConnection.prototype)&&"createDTMFSender"in n.RTCPeerConnection.prototype){const t=function(i,o){return{track:o,get dtmf(){return void 0===this._dtmf&&(this._dtmf="audio"===o.kind?i.createDTMFSender(o):null),this._dtmf},_pc:i}};if(!n.RTCPeerConnection.prototype.getSenders){n.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addTrack=function(a,c){let d=i.apply(this,arguments);return d||(d=t(this,a),this._senders.push(d)),d};const o=n.RTCPeerConnection.prototype.removeTrack;n.RTCPeerConnection.prototype.removeTrack=function(a){o.apply(this,arguments);const c=this._senders.indexOf(a);-1!==c&&this._senders.splice(c,1)}}const e=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(o){this._senders=this._senders||[],e.apply(this,[o]),o.getTracks().forEach(s=>{this._senders.push(t(this,s))})};const r=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(o){this._senders=this._senders||[],r.apply(this,[o]),o.getTracks().forEach(s=>{const a=this._senders.find(c=>c.track===s);a&&this._senders.splice(this._senders.indexOf(a),1)})}}else if("object"==typeof n&&n.RTCPeerConnection&&"getSenders"in n.RTCPeerConnection.prototype&&"createDTMFSender"in n.RTCPeerConnection.prototype&&n.RTCRtpSender&&!("dtmf"in n.RTCRtpSender.prototype)){const t=n.RTCPeerConnection.prototype.getSenders;n.RTCPeerConnection.prototype.getSenders=function(){const r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(n.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&(this._dtmf="audio"===this.track.kind?this._pc.createDTMFSender(this.track):null),this._dtmf}})}}function $w(n){if(!n.RTCPeerConnection)return;const t=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){const[r,i,o]=arguments;if(arguments.length>0&&"function"==typeof r)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof r))return t.apply(this,[]);const s=function(c){const d={};return c.result().forEach(g=>{const _={id:g.id,timestamp:g.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[g.type]||g.type};g.names().forEach(E=>{_[E]=g.stat(E)}),d[_.id]=_}),d},a=function(c){return new Map(Object.keys(c).map(d=>[d,c[d]]))};return arguments.length>=2?t.apply(this,[function(d){i(a(s(d)))},r]):new Promise((c,d)=>{t.apply(this,[function(p){c(a(s(p)))},d])}).then(i,o)}}function Hw(n){if(!("object"==typeof n&&n.RTCPeerConnection&&n.RTCRtpSender&&n.RTCRtpReceiver))return;if(!("getStats"in n.RTCRtpSender.prototype)){const e=n.RTCPeerConnection.prototype.getSenders;e&&(n.RTCPeerConnection.prototype.getSenders=function(){const o=e.apply(this,[]);return o.forEach(s=>s._pc=this),o});const r=n.RTCPeerConnection.prototype.addTrack;r&&(n.RTCPeerConnection.prototype.addTrack=function(){const o=r.apply(this,arguments);return o._pc=this,o}),n.RTCRtpSender.prototype.getStats=function(){const o=this;return this._pc.getStats().then(s=>Nw(s,o.track,!0))}}if(!("getStats"in n.RTCRtpReceiver.prototype)){const e=n.RTCPeerConnection.prototype.getReceivers;e&&(n.RTCPeerConnection.prototype.getReceivers=function(){const i=e.apply(this,[]);return i.forEach(o=>o._pc=this),i}),Rc(n,"track",r=>(r.receiver._pc=r.srcElement,r)),n.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(o=>Nw(o,i.track,!1))}}if(!("getStats"in n.RTCRtpSender.prototype)||!("getStats"in n.RTCRtpReceiver.prototype))return;const t=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof n.MediaStreamTrack){const r=arguments[0];let i,o,s;return this.getSenders().forEach(a=>{a.track===r&&(i?s=!0:i=a)}),this.getReceivers().forEach(a=>(a.track===r&&(o?s=!0:o=a),a.track===r)),s||i&&o?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():o?o.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function zw(n){n.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(s=>this._shimmedLocalStreams[s][0])};const t=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addTrack=function(s,a){if(!a)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const c=t.apply(this,arguments);return this._shimmedLocalStreams[a.id]?-1===this._shimmedLocalStreams[a.id].indexOf(c)&&this._shimmedLocalStreams[a.id].push(c):this._shimmedLocalStreams[a.id]=[a,c],c};const e=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(s){this._shimmedLocalStreams=this._shimmedLocalStreams||{},s.getTracks().forEach(d=>{if(this.getSenders().find(g=>g.track===d))throw new DOMException("Track already exists.","InvalidAccessError")});const a=this.getSenders();e.apply(this,arguments);const c=this.getSenders().filter(d=>-1===a.indexOf(d));this._shimmedLocalStreams[s.id]=[s].concat(c)};const r=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(s){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[s.id],r.apply(this,arguments)};const i=n.RTCPeerConnection.prototype.removeTrack;n.RTCPeerConnection.prototype.removeTrack=function(s){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},s&&Object.keys(this._shimmedLocalStreams).forEach(a=>{const c=this._shimmedLocalStreams[a].indexOf(s);-1!==c&&this._shimmedLocalStreams[a].splice(c,1),1===this._shimmedLocalStreams[a].length&&delete this._shimmedLocalStreams[a]}),i.apply(this,arguments)}}function Gw(n,t){if(!n.RTCPeerConnection)return;if(n.RTCPeerConnection.prototype.addTrack&&t.version>=65)return zw(n);const e=n.RTCPeerConnection.prototype.getLocalStreams;n.RTCPeerConnection.prototype.getLocalStreams=function(){const p=e.apply(this);return this._reverseStreams=this._reverseStreams||{},p.map(g=>this._reverseStreams[g.id])};const r=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(p){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},p.getTracks().forEach(g=>{if(this.getSenders().find(E=>E.track===g))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[p.id]){const g=new n.MediaStream(p.getTracks());this._streams[p.id]=g,this._reverseStreams[g.id]=p,p=g}r.apply(this,[p])};const i=n.RTCPeerConnection.prototype.removeStream;function o(d,p){let g=p.sdp;return Object.keys(d._reverseStreams||[]).forEach(_=>{const E=d._reverseStreams[_];g=g.replace(new RegExp(d._streams[E.id].id,"g"),E.id)}),new RTCSessionDescription({type:p.type,sdp:g})}function s(d,p){let g=p.sdp;return Object.keys(d._reverseStreams||[]).forEach(_=>{const E=d._reverseStreams[_],D=d._streams[E.id];g=g.replace(new RegExp(E.id,"g"),D.id)}),new RTCSessionDescription({type:p.type,sdp:g})}n.RTCPeerConnection.prototype.removeStream=function(p){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[p.id]||p]),delete this._reverseStreams[this._streams[p.id]?this._streams[p.id].id:p.id],delete this._streams[p.id]},n.RTCPeerConnection.prototype.addTrack=function(p,g){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const _=[].slice.call(arguments,1);if(1!==_.length||!_[0].getTracks().find(F=>F===p))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(F=>F.track===p))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const D=this._streams[g.id];if(D)D.addTrack(p),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const F=new n.MediaStream([p]);this._streams[g.id]=F,this._reverseStreams[F.id]=g,this.addStream(F)}return this.getSenders().find(F=>F.track===p)},["createOffer","createAnswer"].forEach(function(d){const p=n.RTCPeerConnection.prototype[d],g={[d](){const _=arguments;return arguments.length&&"function"==typeof arguments[0]?p.apply(this,[D=>{const F=o(this,D);_[0].apply(null,[F])},D=>{_[1]&&_[1].apply(null,D)},arguments[2]]):p.apply(this,arguments).then(D=>o(this,D))}};n.RTCPeerConnection.prototype[d]=g[d]});const a=n.RTCPeerConnection.prototype.setLocalDescription;n.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=s(this,arguments[0]),a.apply(this,arguments)):a.apply(this,arguments)};const c=Object.getOwnPropertyDescriptor(n.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(n.RTCPeerConnection.prototype,"localDescription",{get(){const d=c.get.apply(this);return""===d.type?d:o(this,d)}}),n.RTCPeerConnection.prototype.removeTrack=function(p){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!p._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(p._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let _;this._streams=this._streams||{},Object.keys(this._streams).forEach(E=>{this._streams[E].getTracks().find(F=>p.track===F)&&(_=this._streams[E])}),_&&(1===_.getTracks().length?this.removeStream(this._reverseStreams[_.id]):_.removeTrack(p.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Lv(n,t){!n.RTCPeerConnection&&n.webkitRTCPeerConnection&&(n.RTCPeerConnection=n.webkitRTCPeerConnection),n.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){const r=n.RTCPeerConnection.prototype[e],i={[e](){return arguments[0]=new("addIceCandidate"===e?n.RTCIceCandidate:n.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};n.RTCPeerConnection.prototype[e]=i[e]})}function qw(n,t){Rc(n,"negotiationneeded",e=>{const r=e.target;if(!(t.version<72||r.getConfiguration&&"plan-b"===r.getConfiguration().sdpSemantics)||"stable"===r.signalingState)return e})}var U2=T(60),$2=T.n(U2);function Ww(n){const t=n&&n.navigator,r=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(i){return r(i).catch(o=>Promise.reject(function(i){return{name:{PermissionDeniedError:"NotAllowedError"}[i.name]||i.name,message:i.message,constraint:i.constraint,toString(){return this.name}}}(o)))}}function Kw(n){"getDisplayMedia"in n.navigator&&(!n.navigator.mediaDevices||n.navigator.mediaDevices&&"getDisplayMedia"in n.navigator.mediaDevices||(n.navigator.mediaDevices.getDisplayMedia=n.navigator.getDisplayMedia.bind(n.navigator)))}function jv(n,t){if(n.RTCIceGatherer&&(n.RTCIceCandidate||(n.RTCIceCandidate=function(i){return i}),n.RTCSessionDescription||(n.RTCSessionDescription=function(i){return i}),t.version<15025)){const r=Object.getOwnPropertyDescriptor(n.MediaStreamTrack.prototype,"enabled");Object.defineProperty(n.MediaStreamTrack.prototype,"enabled",{set(i){r.set.call(this,i);const o=new Event("enabled");o.enabled=i,this.dispatchEvent(o)}})}n.RTCRtpSender&&!("dtmf"in n.RTCRtpSender.prototype)&&Object.defineProperty(n.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new n.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),n.RTCDtmfSender&&!n.RTCDTMFSender&&(n.RTCDTMFSender=n.RTCDtmfSender);const e=$2()(n,t.version);n.RTCPeerConnection=function(i){return i&&i.iceServers&&(i.iceServers=function B2(n,t){let e=!1;return(n=JSON.parse(JSON.stringify(n))).filter(r=>{if(r&&(r.urls||r.url)){let i=r.urls||r.url;r.url&&!r.urls&&Xf("RTCIceServer.url","RTCIceServer.urls");const o="string"==typeof i;return o&&(i=[i]),i=i.filter(s=>{if(0===s.indexOf("stun:"))return!1;const a=s.startsWith("turn")&&!s.startsWith("turn:[")&&s.includes("transport=udp");return a&&!e?(e=!0,!0):a&&!e}),delete r.url,r.urls=o?i[0]:i,!!i.length}})}(i.iceServers),Fv("ICE servers after filtering:",i.iceServers)),new e(i)},n.RTCPeerConnection.prototype=e.prototype}function Yw(n){n.RTCRtpSender&&!("replaceTrack"in n.RTCRtpSender.prototype)&&(n.RTCRtpSender.prototype.replaceTrack=n.RTCRtpSender.prototype.setTrack)}function Qw(n,t){const e=n&&n.navigator,r=n&&n.MediaStreamTrack;if(e.getUserMedia=function(i,o,s){Xf("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),e.mediaDevices.getUserMedia(i).then(o,s)},!(t.version>55&&"autoGainControl"in e.mediaDevices.getSupportedConstraints())){const i=function(s,a,c){a in s&&!(c in s)&&(s[c]=s[a],delete s[a])},o=e.mediaDevices.getUserMedia.bind(e.mediaDevices);if(e.mediaDevices.getUserMedia=function(s){return"object"==typeof s&&"object"==typeof s.audio&&(s=JSON.parse(JSON.stringify(s)),i(s.audio,"autoGainControl","mozAutoGainControl"),i(s.audio,"noiseSuppression","mozNoiseSuppression")),o(s)},r&&r.prototype.getSettings){const s=r.prototype.getSettings;r.prototype.getSettings=function(){const a=s.apply(this,arguments);return i(a,"mozAutoGainControl","autoGainControl"),i(a,"mozNoiseSuppression","noiseSuppression"),a}}if(r&&r.prototype.applyConstraints){const s=r.prototype.applyConstraints;r.prototype.applyConstraints=function(a){return"audio"===this.kind&&"object"==typeof a&&(a=JSON.parse(JSON.stringify(a)),i(a,"autoGainControl","mozAutoGainControl"),i(a,"noiseSuppression","mozNoiseSuppression")),s.apply(this,[a])}}}}function H2(n,t){n.navigator.mediaDevices&&"getDisplayMedia"in n.navigator.mediaDevices||!n.navigator.mediaDevices||(n.navigator.mediaDevices.getDisplayMedia=function(r){if(!r||!r.video){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return!0===r.video?r.video={mediaSource:t}:r.video.mediaSource=t,n.navigator.mediaDevices.getUserMedia(r)})}function Jw(n){"object"==typeof n&&n.RTCTrackEvent&&"receiver"in n.RTCTrackEvent.prototype&&!("transceiver"in n.RTCTrackEvent.prototype)&&Object.defineProperty(n.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Vv(n,t){if("object"!=typeof n||!n.RTCPeerConnection&&!n.mozRTCPeerConnection)return;!n.RTCPeerConnection&&n.mozRTCPeerConnection&&(n.RTCPeerConnection=n.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const o=n.RTCPeerConnection.prototype[i],s={[i](){return arguments[0]=new("addIceCandidate"===i?n.RTCIceCandidate:n.RTCSessionDescription)(arguments[0]),o.apply(this,arguments)}};n.RTCPeerConnection.prototype[i]=s[i]});const e={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){const[o,s,a]=arguments;return r.apply(this,[o||null]).then(c=>{if(t.version<53&&!s)try{c.forEach(d=>{d.type=e[d.type]||d.type})}catch(d){if("TypeError"!==d.name)throw d;c.forEach((p,g)=>{c.set(g,Object.assign({},p,{type:e[p.type]||p.type}))})}return c}).then(s,a)}}function Zw(n){if("object"!=typeof n||!n.RTCPeerConnection||!n.RTCRtpSender||n.RTCRtpSender&&"getStats"in n.RTCRtpSender.prototype)return;const t=n.RTCPeerConnection.prototype.getSenders;t&&(n.RTCPeerConnection.prototype.getSenders=function(){const i=t.apply(this,[]);return i.forEach(o=>o._pc=this),i});const e=n.RTCPeerConnection.prototype.addTrack;e&&(n.RTCPeerConnection.prototype.addTrack=function(){const i=e.apply(this,arguments);return i._pc=this,i}),n.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function Xw(n){if("object"!=typeof n||!n.RTCPeerConnection||!n.RTCRtpSender||n.RTCRtpSender&&"getStats"in n.RTCRtpReceiver.prototype)return;const t=n.RTCPeerConnection.prototype.getReceivers;t&&(n.RTCPeerConnection.prototype.getReceivers=function(){const r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r}),Rc(n,"track",e=>(e.receiver._pc=e.srcElement,e)),n.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function eT(n){!n.RTCPeerConnection||"removeStream"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.removeStream=function(e){Xf("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&e.getTracks().includes(r.track)&&this.removeTrack(r)})})}function tT(n){n.DataChannel&&!n.RTCDataChannel&&(n.RTCDataChannel=n.DataChannel)}function nT(n){if("object"!=typeof n||!n.RTCPeerConnection)return;const t=n.RTCPeerConnection.prototype.addTransceiver;t&&(n.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const r=arguments[1],i=r&&"sendEncodings"in r;i&&r.sendEncodings.forEach(s=>{if("rid"in s&&!/^[a-z0-9]{0,16}$/i.test(s.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in s&&!(parseFloat(s.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in s&&!(parseFloat(s.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const o=t.apply(this,arguments);if(i){const{sender:s}=o,a=s.getParameters();(!("encodings"in a)||1===a.encodings.length&&0===Object.keys(a.encodings[0]).length)&&(a.encodings=r.sendEncodings,s.sendEncodings=r.sendEncodings,this.setParametersPromises.push(s.setParameters(a).then(()=>{delete s.sendEncodings}).catch(()=>{delete s.sendEncodings})))}return o})}function rT(n){if("object"!=typeof n||!n.RTCRtpSender)return;const t=n.RTCRtpSender.prototype.getParameters;t&&(n.RTCRtpSender.prototype.getParameters=function(){const r=t.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function iT(n){if("object"!=typeof n||!n.RTCPeerConnection)return;const t=n.RTCPeerConnection.prototype.createOffer;n.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function oT(n){if("object"!=typeof n||!n.RTCPeerConnection)return;const t=n.RTCPeerConnection.prototype.createAnswer;n.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function sT(n){if("object"==typeof n&&n.RTCPeerConnection){if("getLocalStreams"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in n.RTCPeerConnection.prototype)){const t=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>t.call(this,i,r)),r.getVideoTracks().forEach(i=>t.call(this,i,r))},n.RTCPeerConnection.prototype.addTrack=function(r,...i){return i&&i.forEach(o=>{this._localStreams?this._localStreams.includes(o)||this._localStreams.push(o):this._localStreams=[o]}),t.apply(this,arguments)}}"removeStream"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(e);if(-1===r)return;this._localStreams.splice(r,1);const i=e.getTracks();this.getSenders().forEach(o=>{i.includes(o.track)&&this.removeTrack(o)})})}}function aT(n){if("object"==typeof n&&n.RTCPeerConnection&&("getRemoteStreams"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in n.RTCPeerConnection.prototype))){Object.defineProperty(n.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const o=new Event("addstream");o.stream=i,this.dispatchEvent(o)})})}});const t=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(o=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(o)>=0)return;r._remoteStreams.push(o);const s=new Event("addstream");s.stream=o,r.dispatchEvent(s)})}),t.apply(r,arguments)}}}function cT(n){if("object"!=typeof n||!n.RTCPeerConnection)return;const t=n.RTCPeerConnection.prototype,e=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,o=t.setRemoteDescription,s=t.addIceCandidate;t.createOffer=function(d,p){const g=arguments.length>=2?arguments[2]:arguments[0],_=e.apply(this,[g]);return p?(_.then(d,p),Promise.resolve()):_},t.createAnswer=function(d,p){const g=arguments.length>=2?arguments[2]:arguments[0],_=r.apply(this,[g]);return p?(_.then(d,p),Promise.resolve()):_};let a=function(c,d,p){const g=i.apply(this,[c]);return p?(g.then(d,p),Promise.resolve()):g};t.setLocalDescription=a,a=function(c,d,p){const g=o.apply(this,[c]);return p?(g.then(d,p),Promise.resolve()):g},t.setRemoteDescription=a,a=function(c,d,p){const g=s.apply(this,[c]);return p?(g.then(d,p),Promise.resolve()):g},t.addIceCandidate=a}function lT(n){const t=n&&n.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const e=t.mediaDevices,r=e.getUserMedia.bind(e);t.mediaDevices.getUserMedia=i=>r(uT(i))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(r,i,o){t.mediaDevices.getUserMedia(r).then(i,o)}.bind(t))}function uT(n){return n&&void 0!==n.video?Object.assign({},n,{video:Fw(n.video)}):n}function dT(n){if(!n.RTCPeerConnection)return;const t=n.RTCPeerConnection;n.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const o=[];for(let s=0;s<r.iceServers.length;s++){let a=r.iceServers[s];!a.hasOwnProperty("urls")&&a.hasOwnProperty("url")?(Xf("RTCIceServer.url","RTCIceServer.urls"),a=JSON.parse(JSON.stringify(a)),a.urls=a.url,delete a.url,o.push(a)):o.push(r.iceServers[s])}r.iceServers=o}return new t(r,i)},n.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(n.RTCPeerConnection,"generateCertificate",{get:()=>t.generateCertificate})}function fT(n){"object"==typeof n&&n.RTCTrackEvent&&"receiver"in n.RTCTrackEvent.prototype&&!("transceiver"in n.RTCTrackEvent.prototype)&&Object.defineProperty(n.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function hT(n){const t=n.RTCPeerConnection.prototype.createOffer;n.RTCPeerConnection.prototype.createOffer=function(r){if(r){void 0!==r.offerToReceiveAudio&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(s=>"audio"===s.receiver.track.kind);!1===r.offerToReceiveAudio&&i?"sendrecv"===i.direction?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":"recvonly"===i.direction&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):!0===r.offerToReceiveAudio&&!i&&this.addTransceiver("audio"),void 0!==r.offerToReceiveVideo&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const o=this.getTransceivers().find(s=>"video"===s.receiver.track.kind);!1===r.offerToReceiveVideo&&o?"sendrecv"===o.direction?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":"recvonly"===o.direction&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):!0===r.offerToReceiveVideo&&!o&&this.addTransceiver("video")}return t.apply(this,arguments)}}function pT(n){"object"!=typeof n||n.AudioContext||(n.AudioContext=n.webkitAudioContext)}var z2=T(38),eh=T.n(z2);function th(n){if(!n.RTCIceCandidate||n.RTCIceCandidate&&"foundation"in n.RTCIceCandidate.prototype)return;const t=n.RTCIceCandidate;n.RTCIceCandidate=function(r){if("object"==typeof r&&r.candidate&&0===r.candidate.indexOf("a=")&&((r=JSON.parse(JSON.stringify(r))).candidate=r.candidate.substr(2)),r.candidate&&r.candidate.length){const i=new t(r),o=eh().parseCandidate(r.candidate),s=Object.assign(i,o);return s.toJSON=function(){return{candidate:s.candidate,sdpMid:s.sdpMid,sdpMLineIndex:s.sdpMLineIndex,usernameFragment:s.usernameFragment}},s}return new t(r)},n.RTCIceCandidate.prototype=t.prototype,Rc(n,"icecandidate",e=>(e.candidate&&Object.defineProperty(e,"candidate",{value:new n.RTCIceCandidate(e.candidate),writable:"false"}),e))}function su(n,t){if(!n.RTCPeerConnection)return;"sctp"in n.RTCPeerConnection.prototype||Object.defineProperty(n.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const e=function(a){if(!a||!a.sdp)return!1;const c=eh().splitSections(a.sdp);return c.shift(),c.some(d=>{const p=eh().parseMLine(d);return p&&"application"===p.kind&&-1!==p.protocol.indexOf("SCTP")})},r=function(a){const c=a.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===c||c.length<2)return-1;const d=parseInt(c[1],10);return d!=d?-1:d},i=function(a){let c=65536;return"firefox"===t.browser&&(c=t.version<57?-1===a?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),c},o=function(a,c){let d=65536;"firefox"===t.browser&&57===t.version&&(d=65535);const p=eh().matchPrefix(a.sdp,"a=max-message-size:");return p.length>0?d=parseInt(p[0].substr(19),10):"firefox"===t.browser&&-1!==c&&(d=2147483637),d},s=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){const{sdpSemantics:c}=this.getConfiguration();"plan-b"===c&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(e(arguments[0])){const c=r(arguments[0]),d=i(c),p=o(arguments[0],c);let g;g=0===d&&0===p?Number.POSITIVE_INFINITY:0===d||0===p?Math.max(d,p):Math.min(d,p);const _={};Object.defineProperty(_,"maxMessageSize",{get:()=>g}),this._sctp=_}return s.apply(this,arguments)}}function au(n){if(!n.RTCPeerConnection||!("createDataChannel"in n.RTCPeerConnection.prototype))return;function t(r,i){const o=r.send;r.send=function(){const a=arguments[0],c=a.length||a.size||a.byteLength;if("open"===r.readyState&&i.sctp&&c>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return o.apply(r,arguments)}}const e=n.RTCPeerConnection.prototype.createDataChannel;n.RTCPeerConnection.prototype.createDataChannel=function(){const i=e.apply(this,arguments);return t(i,this),i},Rc(n,"datachannel",r=>(t(r.channel,r.target),r))}function Bv(n){if(!n.RTCPeerConnection||"connectionState"in n.RTCPeerConnection.prototype)return;const t=n.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(e=>{const r=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const o=i.target;if(o._lastConnectionState!==o.connectionState){o._lastConnectionState=o.connectionState;const s=new Event("connectionstatechange",i);o.dispatchEvent(s)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function Uv(n,t){if(!n.RTCPeerConnection||"chrome"===t.browser&&t.version>=71||"safari"===t.browser&&t.version>=605)return;const e=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&-1!==i.sdp.indexOf("\na=extmap-allow-mixed")){const o=i.sdp.split("\n").filter(s=>"a=extmap-allow-mixed"!==s.trim()).join("\n");n.RTCSessionDescription&&i instanceof n.RTCSessionDescription?arguments[0]=new n.RTCSessionDescription({type:i.type,sdp:o}):i.sdp=o}return e.apply(this,arguments)}}function nh(n,t){if(!n.RTCPeerConnection||!n.RTCPeerConnection.prototype)return;const e=n.RTCPeerConnection.prototype.addIceCandidate;!e||0===e.length||(n.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():e.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}const gT=function G2({window:n}={},t={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0}){const e=Fv,r=function j2(n){const t={browser:null,version:null};if(void 0===n||!n.navigator)return t.browser="Not a browser.",t;const{navigator:e}=n;if(e.mozGetUserMedia)t.browser="firefox",t.version=ou(e.userAgent,/Firefox\/(\d+)\./,1);else if(e.webkitGetUserMedia||!1===n.isSecureContext&&n.webkitRTCPeerConnection&&!n.RTCIceGatherer)t.browser="chrome",t.version=ou(e.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(e.mediaDevices&&e.userAgent.match(/Edge\/(\d+).(\d+)$/))t.browser="edge",t.version=ou(e.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!n.RTCPeerConnection||!e.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=ou(e.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=n.RTCRtpTransceiver&&"currentDirection"in n.RTCRtpTransceiver.prototype}return t}(n),i={browserDetails:r,commonShim:Te,extractVersion:ou,disableLog:N2,disableWarnings:L2};switch(r.browser){case"chrome":if(!M||!Lv||!t.shimChrome)return e("Chrome shim is not included in this adapter release."),i;if(null===r.version)return e("Chrome shim can not determine version, not shimming."),i;e("adapter.js shimming chrome."),i.browserShim=M,nh(n,r),jw(n,r),Vw(n),Lv(n,r),Bw(n),Gw(n,r),Uw(n),$w(n),Hw(n),qw(n,r),th(n),Bv(n),su(n,r),au(n),Uv(n,r);break;case"firefox":if(!ne||!Vv||!t.shimFirefox)return e("Firefox shim is not included in this adapter release."),i;e("adapter.js shimming firefox."),i.browserShim=ne,nh(n,r),Qw(n,r),Vv(n,r),Jw(n),eT(n),Zw(n),Xw(n),tT(n),nT(n),rT(n),iT(n),oT(n),th(n),Bv(n),su(n,r),au(n);break;case"edge":if(!B||!jv||!t.shimEdge)return e("MS edge shim is not included in this adapter release."),i;e("adapter.js shimming edge."),i.browserShim=B,Ww(n),Kw(n),jv(n,r),Yw(n),su(n,r),au(n);break;case"safari":if(!R||!t.shimSafari)return e("Safari shim is not included in this adapter release."),i;e("adapter.js shimming safari."),i.browserShim=R,nh(n,r),dT(n),hT(n),cT(n),sT(n),aT(n),fT(n),lT(n),pT(n),th(n),su(n,r),au(n),Uv(n,r);break;default:e("Unsupported browser!")}return i}({window:"undefined"==typeof window?void 0:window});function ji(n,t,e,r){Object.defineProperty(n,t,{get:e,set:r,enumerable:!0,configurable:!0})}var $v=gT.default||gT,cu=new(function(){function n(){this.isIOS=["iPad","iPhone","iPod"].includes(navigator.platform),this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}return n.prototype.isWebRTCSupported=function(){return"undefined"!=typeof RTCPeerConnection},n.prototype.isBrowserSupported=function(){var t=this.getBrowser(),e=this.getVersion();return!!this.supportedBrowsers.includes(t)&&("chrome"===t?e>=this.minChromeVersion:"firefox"===t?e>=this.minFirefoxVersion:"safari"===t&&!this.isIOS&&e>=this.minSafariVersion)},n.prototype.getBrowser=function(){return $v.browserDetails.browser},n.prototype.getVersion=function(){return $v.browserDetails.version||0},n.prototype.isUnifiedPlanSupported=function(){var t=this.getBrowser(),e=$v.browserDetails.version||0;if("chrome"===t&&e<this.minChromeVersion)return!1;if("firefox"===t&&e>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;var r,i=!1;try{(r=new RTCPeerConnection).addTransceiver("audio"),i=!0}catch(o){}finally{r&&r.close()}return i},n.prototype.toString=function(){return"Supports:\n    browser:".concat(this.getBrowser(),"\n    version:").concat(this.getVersion(),"\n    isIOS:").concat(this.isIOS,"\n    isWebRTCSupported:").concat(this.isWebRTCSupported(),"\n    isBrowserSupported:").concat(this.isBrowserSupported(),"\n    isUnifiedPlanSupported:").concat(this.isUnifiedPlanSupported())},n}()),mT={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"},q2=function(){function n(){this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.chunkedMTU=16300,this.defaultConfig=mT,this.browser=cu.getBrowser(),this.browserVersion=cu.getVersion(),this.supports=function(){var e,t={browser:cu.isBrowserSupported(),webRTC:cu.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!t.webRTC)return t;try{e=new RTCPeerConnection(mT),t.audioVideo=!0;var r=void 0;try{r=e.createDataChannel("_PEERJSTEST",{ordered:!0}),t.data=!0,t.reliable=!!r.ordered;try{r.binaryType="blob",t.binaryBlob=!cu.isIOS}catch(i){}}catch(i){}finally{r&&r.close()}}catch(i){}finally{e&&e.close()}return t}(),this.pack=Pw.pack,this.unpack=Pw.unpack,this._dataCount=1}return n.prototype.noop=function(){},n.prototype.validateId=function(t){return!t||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(t)},n.prototype.chunk=function(t){for(var e=[],r=t.size,i=Math.ceil(r/wt.chunkedMTU),o=0,s=0;s<r;){var a=Math.min(r,s+wt.chunkedMTU),c=t.slice(s,a);e.push({__peerData:this._dataCount,n:o,data:c,total:i}),s=a,o++}return this._dataCount++,e},n.prototype.blobToArrayBuffer=function(t,e){var r=new FileReader;return r.onload=function(i){i.target&&e(i.target.result)},r.readAsArrayBuffer(t),r},n.prototype.binaryStringToArrayBuffer=function(t){for(var e=new Uint8Array(t.length),r=0;r<t.length;r++)e[r]=255&t.charCodeAt(r);return e.buffer},n.prototype.randomToken=function(){return Math.random().toString(36).slice(2)},n.prototype.isSecure=function(){return"https:"===location.protocol},n}(),wt=new q2,vT={};ji(vT,"Peer",()=>RT,n=>RT=n);var lu,W2=Object.prototype.hasOwnProperty,ar="~";function uu(){}function K2(n,t,e){this.fn=n,this.context=t,this.once=e||!1}function yT(n,t,e,r,i){if("function"!=typeof e)throw new TypeError("The listener must be a function");var o=new K2(e,r||n,i),s=ar?ar+t:t;return n._events[s]?n._events[s].fn?n._events[s]=[n._events[s],o]:n._events[s].push(o):(n._events[s]=o,n._eventsCount++),n}function rh(n,t){0==--n._eventsCount?n._events=new uu:delete n._events[t]}function Kn(){this._events=new uu,this._eventsCount=0}Object.create&&(uu.prototype=Object.create(null),(new uu).__proto__||(ar=!1)),Kn.prototype.eventNames=function(){var e,r,t=[];if(0===this._eventsCount)return t;for(r in e=this._events)W2.call(e,r)&&t.push(ar?r.slice(1):r);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(e)):t},Kn.prototype.listeners=function(t){var r=this._events[ar?ar+t:t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,s=new Array(o);i<o;i++)s[i]=r[i].fn;return s},Kn.prototype.listenerCount=function(t){var r=this._events[ar?ar+t:t];return r?r.fn?1:r.length:0},Kn.prototype.emit=function(t,e,r,i,o,s){var a=ar?ar+t:t;if(!this._events[a])return!1;var p,g,c=this._events[a],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,r),!0;case 4:return c.fn.call(c.context,e,r,i),!0;case 5:return c.fn.call(c.context,e,r,i,o),!0;case 6:return c.fn.call(c.context,e,r,i,o,s),!0}for(g=1,p=new Array(d-1);g<d;g++)p[g-1]=arguments[g];c.fn.apply(c.context,p)}else{var E,_=c.length;for(g=0;g<_;g++)switch(c[g].once&&this.removeListener(t,c[g].fn,void 0,!0),d){case 1:c[g].fn.call(c[g].context);break;case 2:c[g].fn.call(c[g].context,e);break;case 3:c[g].fn.call(c[g].context,e,r);break;case 4:c[g].fn.call(c[g].context,e,r,i);break;default:if(!p)for(E=1,p=new Array(d-1);E<d;E++)p[E-1]=arguments[E];c[g].fn.apply(c[g].context,p)}}return!0},Kn.prototype.on=function(t,e,r){return yT(this,t,e,r,!1)},Kn.prototype.once=function(t,e,r){return yT(this,t,e,r,!0)},Kn.prototype.removeListener=function(t,e,r,i){var o=ar?ar+t:t;if(!this._events[o])return this;if(!e)return rh(this,o),this;var s=this._events[o];if(s.fn)s.fn===e&&(!i||s.once)&&(!r||s.context===r)&&rh(this,o);else{for(var a=0,c=[],d=s.length;a<d;a++)(s[a].fn!==e||i&&!s[a].once||r&&s[a].context!==r)&&c.push(s[a]);c.length?this._events[o]=1===c.length?c[0]:c:rh(this,o)}return this},Kn.prototype.removeAllListeners=function(t){var e;return t?this._events[e=ar?ar+t:t]&&rh(this,e):(this._events=new uu,this._eventsCount=0),this},Kn.prototype.off=Kn.prototype.removeListener,Kn.prototype.addListener=Kn.prototype.on,Kn.prefixed=ar,Kn.EventEmitter=Kn,lu=Kn;var _e={};ji(_e,"LogLevel",()=>cr,n=>cr=n),ji(_e,"default",()=>_T,n=>_T=n);var sa=function(n,t){var e="function"==typeof Symbol&&n[Symbol.iterator];if(!e)return n;var i,s,r=e.call(n),o=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(s)throw s.error}}return o},aa=function(n,t,e){if(e||2===arguments.length)for(var o,r=0,i=t.length;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return n.concat(o||Array.prototype.slice.call(t))},Y2="PeerJS: ",cr=(()=>(function(n){n[n.Disabled=0]="Disabled",n[n.Errors=1]="Errors",n[n.Warnings=2]="Warnings",n[n.All=3]="All"}(cr||(cr={})),cr))(),Q2=function(){function n(){this._logLevel=cr.Disabled}return Object.defineProperty(n.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){this._logLevel=t},enumerable:!1,configurable:!0}),n.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logLevel>=cr.All&&this._print.apply(this,aa([cr.All],sa(t),!1))},n.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logLevel>=cr.Warnings&&this._print.apply(this,aa([cr.Warnings],sa(t),!1))},n.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logLevel>=cr.Errors&&this._print.apply(this,aa([cr.Errors],sa(t),!1))},n.prototype.setLogFunction=function(t){this._print=t},n.prototype._print=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var i=aa([Y2],sa(e),!1);for(var o in i)i[o]instanceof Error&&(i[o]="("+i[o].name+") "+i[o].message);t>=cr.All?console.log.apply(console,aa([],sa(i),!1)):t>=cr.Warnings?console.warn.apply(console,aa(["WARNING"],sa(i),!1)):t>=cr.Errors&&console.error.apply(console,aa(["ERROR"],sa(i),!1))},n}(),_T=new Q2,bT={};ji(bT,"Socket",()=>CT,n=>CT=n);var Hv,Gr=(()=>(function(n){n.Data="data",n.Media="media"}(Gr||(Gr={})),Gr))(),on=(()=>(function(n){n.BrowserIncompatible="browser-incompatible",n.Disconnected="disconnected",n.InvalidID="invalid-id",n.InvalidKey="invalid-key",n.Network="network",n.PeerUnavailable="peer-unavailable",n.SslUnavailable="ssl-unavailable",n.ServerError="server-error",n.SocketError="socket-error",n.SocketClosed="socket-closed",n.UnavailableID="unavailable-id",n.WebRTC="webrtc"}(on||(on={})),on))(),Vi=(()=>(function(n){n.Binary="binary",n.BinaryUTF8="binary-utf8",n.JSON="json"}(Vi||(Vi={})),Vi))(),Bi=(()=>(function(n){n.Message="message",n.Disconnected="disconnected",n.Error="error",n.Close="close"}(Bi||(Bi={})),Bi))(),An=(()=>(function(n){n.Heartbeat="HEARTBEAT",n.Candidate="CANDIDATE",n.Offer="OFFER",n.Answer="ANSWER",n.Open="OPEN",n.Error="ERROR",n.IdTaken="ID-TAKEN",n.InvalidKey="INVALID-KEY",n.Leave="LEAVE",n.Expire="EXPIRE"}(An||(An={})),An))();Hv=JSON.parse('{"name":"peerjs","version":"1.4.7","keywords":["peerjs","webrtc","p2p","rtc"],"description":"PeerJS client","homepage":"https://peerjs.com","bugs":{"url":"https://github.com/peers/peerjs/issues"},"repository":{"type":"git","url":"https://github.com/peers/peerjs"},"license":"MIT","contributors":["Michelle Bu <michelle@michellebu.com>","afrokick <devbyru@gmail.com>","ericz <really.ez@gmail.com>","Jairo <kidandcat@gmail.com>","Jonas Gloning <34194370+jonasgloning@users.noreply.github.com>","Jairo Caro-Accino Viciana <jairo@galax.be>","Carlos Caballero <carlos.caballero.gonzalez@gmail.com>","hc <hheennrryy@gmail.com>","Muhammad Asif <capripio@gmail.com>","PrashoonB <prashoonbhattacharjee@gmail.com>","Harsh Bardhan Mishra <47351025+HarshCasper@users.noreply.github.com>","akotynski <aleksanderkotbury@gmail.com>","lmb <i@lmb.io>","Jairooo <jairocaro@msn.com>","Moritz St\xfcckler <moritz.stueckler@gmail.com>","Simon <crydotsnakegithub@gmail.com>","Denis Lukov <denismassters@gmail.com>","Philipp Hancke <fippo@andyet.net>","Hans Oksendahl <hansoksendahl@gmail.com>","Jess <jessachandler@gmail.com>","khankuan <khankuan@gmail.com>","DUODVK <kurmanov.work@gmail.com>","XiZhao <kwang1imsa@gmail.com>","Matthias Lohr <matthias@lohr.me>","=frank tree <=frnktrb@googlemail.com>","Andre Eckardt <aeckardt@outlook.com>","Chris Cowan <agentme49@gmail.com>","Alex Chuev <alex@chuev.com>","alxnull <alxnull@e.mail.de>","Yemel Jardi <angel.jardi@gmail.com>","Ben Parnell <benjaminparnell.94@gmail.com>","Benny Lichtner <bennlich@gmail.com>","fresheneesz <bitetrudpublic@gmail.com>","bob.barstead@exaptive.com <bob.barstead@exaptive.com>","chandika <chandika@gmail.com>","emersion <contact@emersion.fr>","Christopher Van <cvan@users.noreply.github.com>","eddieherm <edhermoso@gmail.com>","Eduardo Pinho <enet4mikeenet@gmail.com>","Evandro Zanatta <ezanatta@tray.net.br>","Gardner Bickford <gardner@users.noreply.github.com>","Gian Luca <gianluca.cecchi@cynny.com>","PatrickJS <github@gdi2290.com>","jonnyf <github@jonathanfoss.co.uk>","Hizkia Felix <hizkifw@gmail.com>","Hristo Oskov <hristo.oskov@gmail.com>","Isaac Madwed <i.madwed@gmail.com>","Ilya Konanykhin <ilya.konanykhin@gmail.com>","jasonbarry <jasbarry@me.com>","Jonathan Burke <jonathan.burke.1311@googlemail.com>","Josh Hamit <josh.hamit@gmail.com>","Jordan Austin <jrax86@gmail.com>","Joel Wetzell <jwetzell@yahoo.com>","xizhao <kevin.wang@cloudera.com>","Alberto Torres <kungfoobar@gmail.com>","Jonathan Mayol <mayoljonathan@gmail.com>","Jefferson Felix <me@jsfelix.dev>","Rolf Erik Lekang <me@rolflekang.com>","Kevin Mai-Husan Chia <mhchia@users.noreply.github.com>","Pepijn de Vos <pepijndevos@gmail.com>","JooYoung <qkdlql@naver.com>","Tobias Speicher <rootcommander@gmail.com>","Steve Blaurock <sblaurock@gmail.com>","Kyrylo Shegeda <shegeda@ualberta.ca>","Diwank Singh Tomer <singh@diwank.name>","So\u0308ren Balko <Soeren.Balko@gmail.com>","Arpit Solanki <solankiarpit1997@gmail.com>","Yuki Ito <yuki@gnnk.net>","Artur Zayats <zag2art@gmail.com>"],"funding":{"type":"opencollective","url":"https://opencollective.com/peer"},"collective":{"type":"opencollective","url":"https://opencollective.com/peer"},"files":["dist/*"],"sideEffects":["lib/global.ts","lib/supports.ts"],"main":"dist/bundler.cjs","module":"dist/bundler.mjs","browser-minified":"dist/peerjs.min.js","browser-unminified":"dist/peerjs.js","types":"dist/types.d.ts","engines":{"node":">= 10"},"targets":{"types":{"source":"lib/exports.ts"},"main":{"source":"lib/exports.ts","sourceMap":{"inlineSources":true}},"module":{"source":"lib/exports.ts","includeNodeModules":["eventemitter3"],"sourceMap":{"inlineSources":true}},"browser-minified":{"context":"browser","outputFormat":"global","optimize":true,"engines":{"browsers":"cover 99%, not dead"},"source":"lib/global.ts"},"browser-unminified":{"context":"browser","outputFormat":"global","optimize":false,"engines":{"browsers":"cover 99%, not dead"},"source":"lib/global.ts"}},"scripts":{"contributors":"git-authors-cli --print=false && prettier --write package.json && git add package.json package-lock.json && git commit -m \\"chore(contributors): update and sort contributors list\\"","check":"tsc --noEmit","watch":"parcel watch","build":"rm -rf dist && parcel build","prepublishOnly":"npm run build","test":"mocha -r ts-node/register -r jsdom-global/register test/**/*.ts","format":"prettier --write .","semantic-release":"semantic-release"},"devDependencies":{"@parcel/config-default":"^2.5.0","@parcel/packager-ts":"^2.5.0","@parcel/transformer-typescript-tsc":"^2.5.0","@parcel/transformer-typescript-types":"^2.5.0","@semantic-release/changelog":"^6.0.1","@semantic-release/git":"^10.0.1","@types/chai":"^4.3.0","@types/mocha":"^9.1.0","@types/node":"^17.0.18","chai":"^4.3.6","git-authors-cli":"^1.0.40","jsdom":"^19.0.0","jsdom-global":"^3.0.2","mocha":"^9.2.0","mock-socket":"8.0.5","parcel":"^2.5.0","parcel-transformer-tsc-sourcemaps":"^1.0.2","prettier":"^2.6.2","semantic-release":"^19.0.2","standard":"^16.0.4","ts-node":"^10.5.0","typescript":"^4.5.5"},"dependencies":{"@swc/helpers":"^0.3.13","eventemitter3":"^4.0.7","peerjs-js-binarypack":"1.0.1","webrtc-adapter":"^7.7.1"}}');var J2=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),CT=function(n){function t(e,r,i,o,s,a){void 0===a&&(a=5e3);var c=n.call(this)||this;return c.pingInterval=a,c._disconnected=!0,c._messagesQueue=[],c._baseUrl=(e?"wss://":"ws://")+r+":"+i+o+"peerjs?key="+s,c}return J2(t,n),t.prototype.start=function(e,r){var i=this;this._id=e;var o="".concat(this._baseUrl,"&id=").concat(e,"&token=").concat(r);this._socket||!this._disconnected||(this._socket=new WebSocket(o+"&version="+Hv.version),this._disconnected=!1,this._socket.onmessage=function(s){var a;try{a=JSON.parse(s.data),_e.default.log("Server message received:",a)}catch(c){return void _e.default.log("Invalid server message",s.data)}i.emit(Bi.Message,a)},this._socket.onclose=function(s){i._disconnected||(_e.default.log("Socket closed.",s),i._cleanup(),i._disconnected=!0,i.emit(Bi.Disconnected))},this._socket.onopen=function(){i._disconnected||(i._sendQueuedMessages(),_e.default.log("Socket open"),i._scheduleHeartbeat())})},t.prototype._scheduleHeartbeat=function(){var e=this;this._wsPingTimer=setTimeout(function(){e._sendHeartbeat()},this.pingInterval)},t.prototype._sendHeartbeat=function(){if(this._wsOpen()){var e=JSON.stringify({type:An.Heartbeat});this._socket.send(e),this._scheduleHeartbeat()}else _e.default.log("Cannot send heartbeat, because socket closed")},t.prototype._wsOpen=function(){return!!this._socket&&1===this._socket.readyState},t.prototype._sendQueuedMessages=function(){var e,r,i=function(n,t,e){if(e||2===arguments.length)for(var o,r=0,i=t.length;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return n.concat(o||Array.prototype.slice.call(t))}([],function(n,t){var e="function"==typeof Symbol&&n[Symbol.iterator];if(!e)return n;var i,s,r=e.call(n),o=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(s)throw s.error}}return o}(this._messagesQueue),!1);this._messagesQueue=[];try{for(var o=function(n){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(i),s=o.next();!s.done;s=o.next())this.send(s.value)}catch(c){e={error:c}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}},t.prototype.send=function(e){if(!this._disconnected){if(!this._id)return void this._messagesQueue.push(e);if(!e.type)return void this.emit(Bi.Error,"Invalid message");if(this._wsOpen()){var r=JSON.stringify(e);this._socket.send(r)}}},t.prototype.close=function(){this._disconnected||(this._cleanup(),this._disconnected=!0)},t.prototype._cleanup=function(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)},t}(lu.EventEmitter),zv={};ji(zv,"MediaConnection",()=>DT,n=>DT=n);var Gv={};ji(Gv,"Negotiator",()=>ET,n=>ET=n);var ih=function(){return ih=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n},ih.apply(this,arguments)},oh=function(n,t,e,r){return new(e||(e=Promise))(function(o,s){function a(p){try{d(r.next(p))}catch(g){s(g)}}function c(p){try{d(r.throw(p))}catch(g){s(g)}}function d(p){p.done?o(p.value):function i(o){return o instanceof e?o:new e(function(s){s(o)})}(p.value).then(a,c)}d((r=r.apply(n,t||[])).next())})},sh=function(n,t){var r,i,o,s,e={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(d){return function(p){return function c(d){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,i&&(o=2&d[0]?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[2&d[0],o.value]),d[0]){case 0:case 1:o=d;break;case 4:return e.label++,{value:d[1],done:!1};case 5:e.label++,i=d[1],d=[0];continue;case 7:d=e.ops.pop(),e.trys.pop();continue;default:if(!(o=(o=e.trys).length>0&&o[o.length-1])&&(6===d[0]||2===d[0])){e=0;continue}if(3===d[0]&&(!o||d[1]>o[0]&&d[1]<o[3])){e.label=d[1];break}if(6===d[0]&&e.label<o[1]){e.label=o[1],o=d;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(d);break}o[2]&&e.ops.pop(),e.trys.pop();continue}d=t.call(n,e)}catch(p){d=[6,p],i=0}finally{r=o=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([d,p])}}},ET=function(){function n(t){this.connection=t}return n.prototype.startConnection=function(t){var e=this._startPeerConnection();if(this.connection.peerConnection=e,this.connection.type===Gr.Media&&t._stream&&this._addTracksToConnection(t._stream,e),t.originator){if(this.connection.type===Gr.Data){var r=this.connection,o=e.createDataChannel(r.label,{ordered:!!t.reliable});r.initialize(o)}this._makeOffer()}else this.handleSDP("OFFER",t.sdp)},n.prototype._startPeerConnection=function(){_e.default.log("Creating RTCPeerConnection.");var t=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(t),t},n.prototype._setupListeners=function(t){var e=this,r=this.connection.peer,i=this.connection.connectionId,o=this.connection.type,s=this.connection.provider;_e.default.log("Listening for ICE candidates."),t.onicecandidate=function(a){!a.candidate||!a.candidate.candidate||(_e.default.log("Received ICE candidates for ".concat(r,":"),a.candidate),s.socket.send({type:An.Candidate,payload:{candidate:a.candidate,type:o,connectionId:i},dst:r}))},t.oniceconnectionstatechange=function(){switch(t.iceConnectionState){case"failed":_e.default.log("iceConnectionState is failed, closing connections to "+r),e.connection.emit("error",new Error("Negotiation of connection to "+r+" failed.")),e.connection.close();break;case"closed":_e.default.log("iceConnectionState is closed, closing connections to "+r),e.connection.emit("error",new Error("Connection to "+r+" closed.")),e.connection.close();break;case"disconnected":_e.default.log("iceConnectionState changed to disconnected on the connection with "+r);break;case"completed":t.onicecandidate=wt.noop}e.connection.emit("iceStateChanged",t.iceConnectionState)},_e.default.log("Listening for data channel"),t.ondatachannel=function(a){_e.default.log("Received data channel");var c=a.channel;s.getConnection(r,i).initialize(c)},_e.default.log("Listening for remote stream"),t.ontrack=function(a){_e.default.log("Received remote stream");var c=a.streams[0],d=s.getConnection(r,i);d.type===Gr.Media&&e._addStreamToMediaConnection(c,d)}},n.prototype.cleanup=function(){_e.default.log("Cleaning up PeerConnection to "+this.connection.peer);var t=this.connection.peerConnection;if(t){this.connection.peerConnection=null,t.onicecandidate=t.oniceconnectionstatechange=t.ondatachannel=t.ontrack=function(){};var r=!1;if(this.connection.type===Gr.Data){var o=this.connection.dataChannel;o&&(r=!!o.readyState&&"closed"!==o.readyState)}("closed"!==t.signalingState||r)&&t.close()}},n.prototype._makeOffer=function(){return oh(this,void 0,Promise,function(){var t,e,r,i,o,s,a;return sh(this,function(c){switch(c.label){case 0:t=this.connection.peerConnection,e=this.connection.provider,c.label=1;case 1:return c.trys.push([1,7,,8]),[4,t.createOffer(this.connection.options.constraints)];case 2:r=c.sent(),_e.default.log("Created offer."),this.connection.options.sdpTransform&&"function"==typeof this.connection.options.sdpTransform&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp),c.label=3;case 3:return c.trys.push([3,5,,6]),[4,t.setLocalDescription(r)];case 4:return c.sent(),_e.default.log("Set localDescription:",r,"for:".concat(this.connection.peer)),i={sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata,browser:wt.browser},this.connection.type===Gr.Data&&(o=this.connection,i=ih(ih({},i),{label:o.label,reliable:o.reliable,serialization:o.serialization})),e.socket.send({type:An.Offer,payload:i,dst:this.connection.peer}),[3,6];case 5:return"OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"!=(s=c.sent())&&(e.emitError(on.WebRTC,s),_e.default.log("Failed to setLocalDescription, ",s)),[3,6];case 6:return[3,8];case 7:return a=c.sent(),e.emitError(on.WebRTC,a),_e.default.log("Failed to createOffer, ",a),[3,8];case 8:return[2]}})})},n.prototype._makeAnswer=function(){return oh(this,void 0,Promise,function(){var t,e,r,i,o;return sh(this,function(s){switch(s.label){case 0:t=this.connection.peerConnection,e=this.connection.provider,s.label=1;case 1:return s.trys.push([1,7,,8]),[4,t.createAnswer()];case 2:r=s.sent(),_e.default.log("Created answer."),this.connection.options.sdpTransform&&"function"==typeof this.connection.options.sdpTransform&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp),s.label=3;case 3:return s.trys.push([3,5,,6]),[4,t.setLocalDescription(r)];case 4:return s.sent(),_e.default.log("Set localDescription:",r,"for:".concat(this.connection.peer)),e.socket.send({type:An.Answer,payload:{sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,browser:wt.browser},dst:this.connection.peer}),[3,6];case 5:return i=s.sent(),e.emitError(on.WebRTC,i),_e.default.log("Failed to setLocalDescription, ",i),[3,6];case 6:return[3,8];case 7:return o=s.sent(),e.emitError(on.WebRTC,o),_e.default.log("Failed to create answer, ",o),[3,8];case 8:return[2]}})})},n.prototype.handleSDP=function(t,e){return oh(this,void 0,Promise,function(){var r,i,o,s;return sh(this,function(a){switch(a.label){case 0:e=new RTCSessionDescription(e),r=this.connection.peerConnection,i=this.connection.provider,_e.default.log("Setting remote description",e),o=this,a.label=1;case 1:return a.trys.push([1,5,,6]),[4,r.setRemoteDescription(e)];case 2:return a.sent(),_e.default.log("Set remoteDescription:".concat(t," for:").concat(this.connection.peer)),"OFFER"!==t?[3,4]:[4,o._makeAnswer()];case 3:a.sent(),a.label=4;case 4:return[3,6];case 5:return s=a.sent(),i.emitError(on.WebRTC,s),_e.default.log("Failed to setRemoteDescription, ",s),[3,6];case 6:return[2]}})})},n.prototype.handleCandidate=function(t){return oh(this,void 0,Promise,function(){var e,r,i,o,s,a;return sh(this,function(c){switch(c.label){case 0:_e.default.log("handleCandidate:",t),e=t.candidate,r=t.sdpMLineIndex,i=t.sdpMid,o=this.connection.peerConnection,s=this.connection.provider,c.label=1;case 1:return c.trys.push([1,3,,4]),[4,o.addIceCandidate(new RTCIceCandidate({sdpMid:i,sdpMLineIndex:r,candidate:e}))];case 2:return c.sent(),_e.default.log("Added ICE candidate for:".concat(this.connection.peer)),[3,4];case 3:return a=c.sent(),s.emitError(on.WebRTC,a),_e.default.log("Failed to handleCandidate, ",a),[3,4];case 4:return[2]}})})},n.prototype._addTracksToConnection=function(t,e){if(_e.default.log("add tracks from stream ".concat(t.id," to peer connection")),!e.addTrack)return _e.default.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");t.getTracks().forEach(function(r){e.addTrack(r,t)})},n.prototype._addStreamToMediaConnection=function(t,e){_e.default.log("add stream ".concat(t.id," to media connection ").concat(e.connectionId)),e.addStream(t)},n}(),qv={};ji(qv,"BaseConnection",()=>ST,n=>ST=n);var tU=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ST=function(n){function t(e,r,i){var o=n.call(this)||this;return o.peer=e,o.provider=r,o.options=i,o._open=!1,o.metadata=i.metadata,o}return tU(t,n),Object.defineProperty(t.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),t}(lu.EventEmitter),nU=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ah=function(){return ah=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n},ah.apply(this,arguments)},DT=function(n){function t(e,r,i){var o=n.call(this,e,r,i)||this;return o._localStream=o.options._stream,o.connectionId=o.options.connectionId||t.ID_PREFIX+wt.randomToken(),o._negotiator=new Gv.Negotiator(o),o._localStream&&o._negotiator.startConnection({_stream:o._localStream,originator:!0}),o}return nU(t,n),Object.defineProperty(t.prototype,"type",{get:function(){return Gr.Media},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localStream",{get:function(){return this._localStream},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"remoteStream",{get:function(){return this._remoteStream},enumerable:!1,configurable:!0}),t.prototype.addStream=function(e){_e.default.log("Receiving stream",e),this._remoteStream=e,n.prototype.emit.call(this,"stream",e)},t.prototype.handleMessage=function(e){var r=e.type,i=e.payload;switch(e.type){case An.Answer:this._negotiator.handleSDP(r,i.sdp),this._open=!0;break;case An.Candidate:this._negotiator.handleCandidate(i.candidate);break;default:_e.default.warn("Unrecognized message type:".concat(r," from peer:").concat(this.peer))}},t.prototype.answer=function(e,r){var i,o;if(void 0===r&&(r={}),this._localStream)_e.default.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");else{this._localStream=e,r&&r.sdpTransform&&(this.options.sdpTransform=r.sdpTransform),this._negotiator.startConnection(ah(ah({},this.options._payload),{_stream:e}));var s=this.provider._getMessages(this.connectionId);try{for(var a=function(n){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(s),c=a.next();!c.done;c=a.next())this.handleMessage(c.value)}catch(p){i={error:p}}finally{try{c&&!c.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}this._open=!0}},t.prototype.close=function(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,n.prototype.emit.call(this,"close"))},t.ID_PREFIX="mc_",t}(qv.BaseConnection),Wv={};ji(Wv,"DataConnection",()=>MT,n=>MT=n);var wT={};ji(wT,"EncodingQueue",()=>TT,n=>TT=n);var iU=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),TT=function(n){function t(){var e=n.call(this)||this;return e.fileReader=new FileReader,e._queue=[],e._processing=!1,e.fileReader.onload=function(r){e._processing=!1,r.target&&e.emit("done",r.target.result),e.doNextTask()},e.fileReader.onerror=function(r){_e.default.error("EncodingQueue error:",r),e._processing=!1,e.destroy(),e.emit("error",r)},e}return iU(t,n),Object.defineProperty(t.prototype,"queue",{get:function(){return this._queue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"processing",{get:function(){return this._processing},enumerable:!1,configurable:!0}),t.prototype.enque=function(e){this.queue.push(e),!this.processing&&this.doNextTask()},t.prototype.destroy=function(){this.fileReader.abort(),this._queue=[]},t.prototype.doNextTask=function(){0!==this.size&&(this.processing||(this._processing=!0,this.fileReader.readAsArrayBuffer(this.queue.shift())))},t}(lu.EventEmitter),oU=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),MT=function(n){function t(e,r,i){var o=n.call(this,e,r,i)||this;return o.stringify=JSON.stringify,o.parse=JSON.parse,o._buffer=[],o._bufferSize=0,o._buffering=!1,o._chunkedData={},o._encodingQueue=new wT.EncodingQueue,o.connectionId=o.options.connectionId||t.ID_PREFIX+wt.randomToken(),o.label=o.options.label||o.connectionId,o.serialization=o.options.serialization||Vi.Binary,o.reliable=!!o.options.reliable,o._encodingQueue.on("done",function(s){o._bufferedSend(s)}),o._encodingQueue.on("error",function(){_e.default.error("DC#".concat(o.connectionId,": Error occured in encoding from blob to arraybuffer, close DC")),o.close()}),o._negotiator=new Gv.Negotiator(o),o._negotiator.startConnection(o.options._payload||{originator:!0}),o}return oU(t,n),Object.defineProperty(t.prototype,"type",{get:function(){return Gr.Data},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataChannel",{get:function(){return this._dc},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bufferSize",{get:function(){return this._bufferSize},enumerable:!1,configurable:!0}),t.prototype.initialize=function(e){this._dc=e,this._configureDataChannel()},t.prototype._configureDataChannel=function(){var e=this;(!wt.supports.binaryBlob||wt.supports.reliable)&&(this.dataChannel.binaryType="arraybuffer"),this.dataChannel.onopen=function(){_e.default.log("DC#".concat(e.connectionId," dc connection success")),e._open=!0,e.emit("open")},this.dataChannel.onmessage=function(r){_e.default.log("DC#".concat(e.connectionId," dc onmessage:"),r.data),e._handleDataMessage(r)},this.dataChannel.onclose=function(){_e.default.log("DC#".concat(e.connectionId," dc closed for:"),e.peer),e.close()}},t.prototype._handleDataMessage=function(e){var r=this,i=e.data,o=i.constructor,a=i;if(this.serialization===Vi.Binary||this.serialization===Vi.BinaryUTF8){if(o===Blob)return void wt.blobToArrayBuffer(i,function(d){var p=wt.unpack(d);r.emit("data",p)});if(o===ArrayBuffer)a=wt.unpack(i);else if(o===String){var c=wt.binaryStringToArrayBuffer(i);a=wt.unpack(c)}}else this.serialization===Vi.JSON&&(a=this.parse(i));a.__peerData?this._handleChunk(a):n.prototype.emit.call(this,"data",a)},t.prototype._handleChunk=function(e){var r=e.__peerData,i=this._chunkedData[r]||{data:[],count:0,total:e.total};if(i.data[e.n]=e.data,i.count++,this._chunkedData[r]=i,i.total===i.count){delete this._chunkedData[r];var o=new Blob(i.data);this._handleDataMessage({data:o})}},t.prototype.close=function(){this._buffer=[],this._bufferSize=0,this._chunkedData={},this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this._dc=null),this._encodingQueue&&(this._encodingQueue.destroy(),this._encodingQueue.removeAllListeners(),this._encodingQueue=null),this.open&&(this._open=!1,n.prototype.emit.call(this,"close"))},t.prototype.send=function(e,r){if(this.open)if(this.serialization===Vi.JSON)this._bufferedSend(this.stringify(e));else if(this.serialization===Vi.Binary||this.serialization===Vi.BinaryUTF8){var i=wt.pack(e);if(!r&&i.size>wt.chunkedMTU)return void this._sendChunks(i);wt.supports.binaryBlob?this._bufferedSend(i):this._encodingQueue.enque(i)}else this._bufferedSend(e);else n.prototype.emit.call(this,"error",new Error("Connection is not open. You should listen for the `open` event before sending messages."))},t.prototype._bufferedSend=function(e){(this._buffering||!this._trySend(e))&&(this._buffer.push(e),this._bufferSize=this._buffer.length)},t.prototype._trySend=function(e){var r=this;if(!this.open)return!1;if(this.dataChannel.bufferedAmount>t.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(function(){r._buffering=!1,r._tryBuffer()},50),!1;try{this.dataChannel.send(e)}catch(i){return _e.default.error("DC#:".concat(this.connectionId," Error when sending:"),i),this._buffering=!0,this.close(),!1}return!0},t.prototype._tryBuffer=function(){this.open&&0!==this._buffer.length&&this._trySend(this._buffer[0])&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())},t.prototype._sendChunks=function(e){var r,i,o=wt.chunk(e);_e.default.log("DC#".concat(this.connectionId," Try to send ").concat(o.length," chunks..."));try{for(var s=function(n){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(o),a=s.next();!a.done;a=s.next())this.send(a.value,!0)}catch(d){r={error:d}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}},t.prototype.handleMessage=function(e){var r=e.payload;switch(e.type){case An.Answer:this._negotiator.handleSDP(e.type,r.sdp);break;case An.Candidate:this._negotiator.handleCandidate(r.candidate);break;default:_e.default.warn("Unrecognized message type:",e.type,"from peer:",this.peer)}},t.ID_PREFIX="dc_",t.MAX_BUFFERED_AMOUNT=8388608,t}(qv.BaseConnection),IT={};ji(IT,"API",()=>PT,n=>PT=n);var AT=function(n,t,e,r){return new(e||(e=Promise))(function(o,s){function a(p){try{d(r.next(p))}catch(g){s(g)}}function c(p){try{d(r.throw(p))}catch(g){s(g)}}function d(p){p.done?o(p.value):function i(o){return o instanceof e?o:new e(function(s){s(o)})}(p.value).then(a,c)}d((r=r.apply(n,t||[])).next())})},xT=function(n,t){var r,i,o,s,e={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(d){return function(p){return function c(d){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,i&&(o=2&d[0]?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[2&d[0],o.value]),d[0]){case 0:case 1:o=d;break;case 4:return e.label++,{value:d[1],done:!1};case 5:e.label++,i=d[1],d=[0];continue;case 7:d=e.ops.pop(),e.trys.pop();continue;default:if(!(o=(o=e.trys).length>0&&o[o.length-1])&&(6===d[0]||2===d[0])){e=0;continue}if(3===d[0]&&(!o||d[1]>o[0]&&d[1]<o[3])){e.label=d[1];break}if(6===d[0]&&e.label<o[1]){e.label=o[1],o=d;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(d);break}o[2]&&e.ops.pop(),e.trys.pop();continue}d=t.call(n,e)}catch(p){d=[6,p],i=0}finally{r=o=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([d,p])}}},PT=function(){function n(t){this._options=t}return n.prototype._buildRequest=function(t){var r=this._options,i=r.host,o=r.port,s=r.path,a=r.key,c=new URL("".concat(this._options.secure?"https":"http","://").concat(i,":").concat(o).concat(s).concat(a,"/").concat(t));return c.searchParams.set("ts","".concat(Date.now()).concat(Math.random())),c.searchParams.set("version",Hv.version),fetch(c.href,{referrerPolicy:this._options.referrerPolicy})},n.prototype.retrieveId=function(){return AT(this,void 0,Promise,function(){var t,e,r;return xT(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this._buildRequest("id")];case 1:if(200!==(t=i.sent()).status)throw new Error("Error. Status:".concat(t.status));return[2,t.text()];case 2:throw e=i.sent(),_e.default.error("Error retrieving ID",e),r="","/"===this._options.path&&this._options.host!==wt.CLOUD_HOST&&(r=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+r);case 3:return[2]}})})},n.prototype.listAllPeers=function(){return AT(this,void 0,Promise,function(){var t,e,r;return xT(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this._buildRequest("peers")];case 1:if(200!==(t=i.sent()).status)throw 401===t.status?("",e=this._options.host===wt.CLOUD_HOST?"It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":"You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+e)):new Error("Error. Status:".concat(t.status));return[2,t.json()];case 2:throw r=i.sent(),_e.default.error("Error retrieving list peers",r),new Error("Could not get list peers from the server."+r);case 3:return[2]}})})},n}(),aU=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),du=function(){return du=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n},du.apply(this,arguments)},fu=function(n){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},cU=function(n,t){var e="function"==typeof Symbol&&n[Symbol.iterator];if(!e)return n;var i,s,r=e.call(n),o=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(s)throw s.error}}return o},RT=function(n){function t(e,r){var o,i=n.call(this)||this;return i._id=null,i._lastServerId=null,i._destroyed=!1,i._disconnected=!1,i._open=!1,i._connections=new Map,i._lostMessages=new Map,e&&e.constructor==Object?r=e:e&&(o=e.toString()),r=du({debug:0,host:wt.CLOUD_HOST,port:wt.CLOUD_PORT,path:"/",key:t.DEFAULT_KEY,token:wt.randomToken(),config:wt.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin"},r),i._options=r,"/"===i._options.host&&(i._options.host=window.location.hostname),i._options.path&&("/"!==i._options.path[0]&&(i._options.path="/"+i._options.path),"/"!==i._options.path[i._options.path.length-1]&&(i._options.path+="/")),void 0===i._options.secure&&i._options.host!==wt.CLOUD_HOST?i._options.secure=wt.isSecure():i._options.host==wt.CLOUD_HOST&&(i._options.secure=!0),i._options.logFunction&&_e.default.setLogFunction(i._options.logFunction),_e.default.logLevel=i._options.debug||0,i._api=new IT.API(r),i._socket=i._createServerConnection(),wt.supports.audioVideo||wt.supports.data?o&&!wt.validateId(o)?(i._delayedAbort(on.InvalidID,'ID "'.concat(o,'" is invalid')),i):(o?i._initialize(o):i._api.retrieveId().then(function(s){return i._initialize(s)}).catch(function(s){return i._abort(on.ServerError,s)}),i):(i._delayedAbort(on.BrowserIncompatible,"The current browser does not support WebRTC"),i)}return aU(t,n),Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"socket",{get:function(){return this._socket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"connections",{get:function(){var e,r,i=Object.create(null);try{for(var o=fu(this._connections),s=o.next();!s.done;s=o.next()){var a=cU(s.value,2);i[a[0]]=a[1]}}catch(p){e={error:p}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return i},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"disconnected",{get:function(){return this._disconnected},enumerable:!1,configurable:!0}),t.prototype._createServerConnection=function(){var e=this,r=new bT.Socket(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return r.on(Bi.Message,function(i){e._handleMessage(i)}),r.on(Bi.Error,function(i){e._abort(on.SocketError,i)}),r.on(Bi.Disconnected,function(){e.disconnected||(e.emitError(on.Network,"Lost connection to server."),e.disconnect())}),r.on(Bi.Close,function(){e.disconnected||e._abort(on.SocketClosed,"Underlying socket is already closed.")}),r},t.prototype._initialize=function(e){this._id=e,this.socket.start(e,this._options.token)},t.prototype._handleMessage=function(e){var r,i,o=e.type,s=e.payload,a=e.src;switch(o){case An.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case An.Error:this._abort(on.ServerError,s.msg);break;case An.IdTaken:this._abort(on.UnavailableID,'ID "'.concat(this.id,'" is taken'));break;case An.InvalidKey:this._abort(on.InvalidKey,'API KEY "'.concat(this._options.key,'" is invalid'));break;case An.Leave:_e.default.log("Received leave message from ".concat(a)),this._cleanupPeer(a),this._connections.delete(a);break;case An.Expire:this.emitError(on.PeerUnavailable,"Could not connect to peer ".concat(a));break;case An.Offer:if((F=this.getConnection(a,D=s.connectionId))&&(F.close(),_e.default.warn("Offer received for existing Connection ID:".concat(D))),s.type===Gr.Media){var c=new zv.MediaConnection(a,this,{connectionId:D,_payload:s,metadata:s.metadata});this._addConnection(a,F=c),this.emit("call",c)}else{if(s.type!==Gr.Data)return void _e.default.warn("Received malformed connection type:".concat(s.type));var d=new Wv.DataConnection(a,this,{connectionId:D,_payload:s,metadata:s.metadata,label:s.label,serialization:s.serialization,reliable:s.reliable});this._addConnection(a,F=d),this.emit("connection",d)}var p=this._getMessages(D);try{for(var g=fu(p),_=g.next();!_.done;_=g.next())F.handleMessage(_.value)}catch(H){r={error:H}}finally{try{_&&!_.done&&(i=g.return)&&i.call(g)}finally{if(r)throw r.error}}break;default:if(!s)return void _e.default.warn("You received a malformed message from ".concat(a," of type ").concat(o));var D,F;(F=this.getConnection(a,D=s.connectionId))&&F.peerConnection?F.handleMessage(e):D?this._storeMessage(D,e):_e.default.warn("You received an unrecognized message:",e)}},t.prototype._storeMessage=function(e,r){this._lostMessages.has(e)||this._lostMessages.set(e,[]),this._lostMessages.get(e).push(r)},t.prototype._getMessages=function(e){var r=this._lostMessages.get(e);return r?(this._lostMessages.delete(e),r):[]},t.prototype.connect=function(e,r){if(void 0===r&&(r={}),this.disconnected)return _e.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),void this.emitError(on.Disconnected,"Cannot connect to new Peer after disconnecting from server.");var i=new Wv.DataConnection(e,this,r);return this._addConnection(e,i),i},t.prototype.call=function(e,r,i){if(void 0===i&&(i={}),this.disconnected)return _e.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),void this.emitError(on.Disconnected,"Cannot connect to new Peer after disconnecting from server.");if(r){var o=new zv.MediaConnection(e,this,du(du({},i),{_stream:r}));return this._addConnection(e,o),o}_e.default.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.")},t.prototype._addConnection=function(e,r){_e.default.log("add connection ".concat(r.type,":").concat(r.connectionId," to peerId:").concat(e)),this._connections.has(e)||this._connections.set(e,[]),this._connections.get(e).push(r)},t.prototype._removeConnection=function(e){var r=this._connections.get(e.peer);if(r){var i=r.indexOf(e);-1!==i&&r.splice(i,1)}this._lostMessages.delete(e.connectionId)},t.prototype.getConnection=function(e,r){var i,o,s=this._connections.get(e);if(!s)return null;try{for(var a=fu(s),c=a.next();!c.done;c=a.next()){var d=c.value;if(d.connectionId===r)return d}}catch(p){i={error:p}}finally{try{c&&!c.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}return null},t.prototype._delayedAbort=function(e,r){var i=this;setTimeout(function(){i._abort(e,r)},0)},t.prototype._abort=function(e,r){_e.default.error("Aborting!"),this.emitError(e,r),this._lastServerId?this.disconnect():this.destroy()},t.prototype.emitError=function(e,r){var i;_e.default.error("Error:",r),(i="string"==typeof r?new Error(r):r).type=e,this.emit("error",i)},t.prototype.destroy=function(){this.destroyed||(_e.default.log("Destroy peer with ID:".concat(this.id)),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))},t.prototype._cleanup=function(){var e,r;try{for(var i=fu(this._connections.keys()),o=i.next();!o.done;o=i.next()){var s=o.value;this._cleanupPeer(s),this._connections.delete(s)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}this.socket.removeAllListeners()},t.prototype._cleanupPeer=function(e){var r,i,o=this._connections.get(e);if(o)try{for(var s=fu(o),a=s.next();!a.done;a=s.next())a.value.close()}catch(d){r={error:d}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}},t.prototype.disconnect=function(){if(!this.disconnected){var e=this.id;_e.default.log("Disconnect peer with ID:".concat(e)),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=e,this._id=null,this.emit("disconnected",e)}},t.prototype.reconnect=function(){if(this.disconnected&&!this.destroyed)_e.default.log("Attempting reconnection to server with ID ".concat(this._lastServerId)),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(this.disconnected||this.open)throw new Error("Peer ".concat(this.id," cannot reconnect because it is not disconnected from the server!"));_e.default.error("In a hurry? We're still trying to make the initial connection!")}},t.prototype.listAllPeers=function(e){var r=this;void 0===e&&(e=function(i){}),this._api.listAllPeers().then(function(i){return e(i)}).catch(function(i){return r._abort(on.ServerError,i)})},t.DEFAULT_KEY="peerjs",t}(lu.EventEmitter),kT=vT.Peer;class lU extends le{constructor(t,e){super()}schedule(t,e=0){return this}}class OT extends lU{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const r=this.id,i=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(i,r,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(i,this.id,e),this}requestAsyncId(t,e,r=0){return setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,e,r=0){if(null!==r&&this.delay===r&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(t,e);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let i,r=!1;try{this.work(t)}catch(o){r=!0,i=!!o&&o||new Error(o)}if(r)return this.unsubscribe(),i}_unsubscribe(){const t=this.id,e=this.scheduler,r=e.actions,i=r.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==i&&r.splice(i,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}let FT=(()=>{class n{constructor(e,r=n.now){this.SchedulerAction=e,this.now=r}schedule(e,r=0,i){return new this.SchedulerAction(this,e).schedule(i,r)}}return n.now=()=>Date.now(),n})();class Do extends FT{constructor(t,e=FT.now){super(t,()=>Do.delegate&&Do.delegate!==this?Do.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,r){return Do.delegate&&Do.delegate!==this?Do.delegate.schedule(t,e,r):super.schedule(t,e,r)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let r;this.active=!0;do{if(r=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,r){for(;t=e.shift();)t.unsubscribe();throw r}}}const fU=new class dU extends Do{}(class uU extends OT{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,r=0){return null!==r&&r>0||null===r&&this.delay>0?super.requestAsyncId(t,e,r):t.flush(this)}});class qr{constructor(t,e,r){this.kind=t,this.value=e,this.error=r,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,r){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return r&&r()}}accept(t,e,r){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,r)}toObservable(){switch(this.kind){case"N":return Ee(this.value);case"E":return ea(this.error);case"C":return xf()}throw new Error("unexpected notification kind value")}static createNext(t){return void 0!==t?new qr("N",t):qr.undefinedValueNotification}static createError(t){return new qr("E",void 0,t)}static createComplete(){return qr.completeNotification}}qr.completeNotification=new qr("C"),qr.undefinedValueNotification=new qr("N",void 0);class ch extends N{constructor(t,e,r=0){super(t),this.scheduler=e,this.delay=r}static dispatch(t){const{notification:e,destination:r}=t;e.observe(r),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(ch.dispatch,this.delay,new pU(t,this.destination)))}_next(t){this.scheduleMessage(qr.createNext(t))}_error(t){this.scheduleMessage(qr.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(qr.createComplete()),this.unsubscribe()}}class pU{constructor(t,e){this.notification=t,this.destination=e}}class gU extends Le{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,r){super(),this.scheduler=r,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new mU(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,r=e?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=r.length;let s;if(this.closed)throw new tt;if(this.isStopped||this.hasError?s=le.EMPTY:(this.observers.push(t),s=new en(this,t)),i&&t.add(t=new ch(t,i)),e)for(let a=0;a<o&&!t.closed;a++)t.next(r[a]);else for(let a=0;a<o&&!t.closed;a++)t.next(r[a].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),s}_getNow(){return(this.scheduler||fU).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,r=this._windowTime,i=this._events,o=i.length;let s=0;for(;s<o&&!(t-i[s].time<r);)s++;return o>e&&(s=Math.max(s,o-e)),s>0&&i.splice(0,s),i}}class mU{constructor(t,e){this.time=t,this.value=e}}const Kv=new Do(OT);function _U(n){const{subscriber:t,counter:e,period:r}=n;t.next(e),this.schedule({subscriber:t,counter:e+1,period:r},r)}var EU=T(166),wo=T.n(EU),NT=T(269);function os(n){const t=wo().getLogger(n);return t.setLevel("DEBUG"),"peer-to-peer.service"===n&&t.setLevel("DEBUG"),t}NT.reg(wo()),NT.apply(wo(),{format:function TU(n,t,e){return`[${e}] ${n} ${t}:`}});const LT=new class SU{constructor(t){this.maxElements=t,this.data=new Array,this.startOfQueue=0}push(t){this.data.length<this.maxElements?this.data.push(t):(this.data[this.startOfQueue]=t,this.startOfQueue=(this.startOfQueue+1)%this.maxElements)}getOrderedArray(){return[...this.data.slice(this.startOfQueue),...this.data.slice(0,this.startOfQueue)]}}(5e3),MU=wo().methodFactory,IU=["trace","debug","info","warn","error"],jT=(n,t,e)=>{const r=MU(n,t,e);return function(...i){const o=(new Date).toTimeString().split(" ")[0];LT.push(`[${o}]: ${IU[t].toUpperCase()} ${i.map(s=>JSON.stringify(s)).join(" ")}`),t>=wo().levels.INFO&&r(...i)}};wo().setLevel(wo().getLevel()),window.downloadLogs=function xU(){!function PU(n,t){var e=document.createElement("a");e.href="data:attachment/text,"+encodeURI(t),e.target="_blank",e.download=n,e.click()}(`${(new Date).toISOString()}.txt`,LT.getOrderedArray().join("\n"))},function AU(){wo().methodFactory!==jT&&(wo().methodFactory=jT)}();const gi=os("peer-to-peer.service");let ss=(()=>{class n{constructor(){this.messageSubject=function CU(n){const t=new Le,e=new Le;let r=n(),i=e.subscribe(r);return{observable:t.asObservable().pipe(iv(null),Hr(()=>r)),reset:()=>{i.unsubscribe(),r=n(),i=e.subscribe(r),t.next()},subject:e}}(()=>new gU(100)),this.peer=null,this.isHost=!0,this.isConnected=!1,this.connections={},this.connectionAdded=new Le,this.connectionRemoved=new Le,this.getConnections=()=>Object.keys(this.connections),this.getId=()=>{var e,r;return null!==(r=null===(e=this.peer)||void 0===e?void 0:e.id)&&void 0!==r?r:"default"},this.getIsHost=()=>this.isHost,this.getIsConnected=()=>this.isConnected,this.getMessageObservable=()=>this.messageSubject.observable}setupAsHost(){var e=this;return So(function*(){var r;null===(r=e.peer)||void 0===r||r.destroy(),e.peer=new kT(e.getPeerConfig()),e.isHost=!0,yield e.connectToPeerServer(),e.isConnected=!0,e.peer.on("connection",i=>{i.on("open",()=>{e.addConnectionIfNotExist(i.peer,i)}),i.on("data",e.messageHandler.bind(e)),e.attachErrorAndCloseConnEvents(i)}),e.peer.on("close",()=>{gi.warn("NOT ACCEPTING INCOMING CONNECTIONS??")})})()}setupByConnectingToId(e){var r=this;return So(function*(){return r.destroy(),r.peer=new kT(r.getPeerConfig()),r.isHost=!1,yield r.connectToPeerServer(),new Promise((i,o)=>{const s=function yU(n=0,t=Kv){return(!function vU(n){return!Ce(n)&&n-parseFloat(n)+1>=0}(n)||n<0)&&(n=0),(!t||"function"!=typeof t.schedule)&&(t=Kv),new ae(e=>(e.add(t.schedule(_U,n,{subscriber:e,counter:0,period:n})),e))}(5e3).subscribe(c=>{o(`Could not connect after 5000ms. Is the host ${e} correct?`),s.unsubscribe()});gi.info(`connecting to ${e}`);const a=r.peer.connect(e,{reliable:!0});a.on("data",c=>{r.messageHandler(c)}),a.on("open",()=>{gi.info(`connected to ${e}!`),r.addConnectionIfNotExist(e,a),r.isConnected=!0,i(!0),s.unsubscribe()}),r.attachErrorAndCloseConnEvents(a,c=>{o(c),a.close(),s.unsubscribe()})})})()}getHostId(){return this.isHost?this.getId():this.getConnections()[0]}broadcastAndToSelf(e,r){const i=this.broadcast(e,r);return this.sendMessage(this.getId(),i),i}broadcast(e,r){var i;const o=null!==(i=null==r?void 0:r.from)&&void 0!==i?i:this.getId(),s={from:o,type:"BROADCAST",data:e};null!=r&&r.echo&&(s.echoBroadcast=!0);for(const a in this.connections)a===o&&(null==r||!r.echo)||this.sendMessage(a,s);return s}sendSingleMessage(e,r){const i={from:this.getId(),type:"SINGLE",data:r};this.sendMessage(e,i)}dispose(){this.destroy()}getPeerConfig(){return{}}connectToPeerServer(){return new Promise((e,r)=>{this.peer.on("open",i=>{gi.info(`I am connected to peer server as (${this.getId()})`),e(!0)}),this.peer.on("error",i=>{r(i)})})}attachErrorAndCloseConnEvents(e,r){e.on("error",i=>{gi.error(`connection: ${e.peer} error! ${i}`),this.onPeerDisconnected(e),null!=r&&r(i)}),this.attachToConnCloseEvents(e,()=>{gi.info(`connection: ${e.peer} closed!`),this.onPeerDisconnected(e),null!=r&&r()})}attachToConnCloseEvents(e,r){e.on("close",()=>r()),e.on("iceStateChanged",i=>{"disconnected"===i&&r()})}onPeerDisconnected(e){this.isHost||(this.isConnected=!1),this.deleteConnectionIfExists(e.peer),this.broadcastAndToSelf({command:"DISCONNECTED",name:e.peer})}destroy(){var e;null===(e=this.peer)||void 0===e||e.destroy(),this.isConnected=!1,this.isHost=!1,this.messageSubject.reset(),this.connections={}}messageHandler(e){gi.debug("incomingMessage",e),this.isHost&&"BROADCAST"===e.type?this.broadcast(e.data,{from:e.from,echo:e.echoBroadcast}):"DISCONNECTED"===e.data.command&&this.deleteConnectionIfExists(e.data.name),this.messageSubject.subject.next(e)}addConnectionIfNotExist(e,r){e in this.connections||(gi.info(`new connection! ${e}`),this.connections[e]=r,this.connectionAdded.next(e))}deleteConnectionIfExists(e){e in this.connections&&(delete this.connections[e],this.connectionRemoved.next(e))}sendMessage(e,r){if(!(e in this.connections))return e===this.getId()?(gi.debug("SEND MESSAGE TO self",r),void this.messageSubject.subject.next(r)):void gi.warn(`cant send message ${this.getId()} ==> ${e}, ${r}`);gi.debug(`SEND MESSAGE TO ${e}`,r),this.connections[e].send(r)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),UT=(()=>{class n{constructor(e,r){this.peerToPeerService=e,this.router=r}canActivate(e,r){return!!this.peerToPeerService.getIsConnected()||this.router.parseUrl(kr.JOIN+"/"+e.params.id)}}return n.\u0275fac=function(e){return new(e||n)(Q(ss),Q(gn))},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class $T{constructor(t){this.x=0,this.y=0,this.letter="A",this.dropIndex=-1,this.lastClicked=!1,this.id=t,this.invalid=!1}}const kU=os("board");class HT{constructor(){this.squares=[]}createNewSquare(){let t=0;for(const i of this.squares)t=Math.max(t,i.id);const r=new $T(t+1);return this.squares.push(r),r}getSquareFromId(t){const e=this.squares.find(i=>i.id===t);if(e)return e;kU.warn("New square created from getSquareFromId...");const r=new $T(t);return this.squares.push(r),r}getSquareFromEl(t){return this.getSquareFromId(parseInt(t.getAttribute("data-id")))}}class zT{constructor(t){this.tilesUsed=0,this.totalTiles=0,this.boardState=new HT,this.isEliminated=!1,this.isSpectator=!1,this.disconnected=!1,this.id=t}}class OU{constructor(){this.subject=new Le,this.q=[]}add(t){this.q.push(t),this.subject.next()}getLength(){return this.q.length}pop(){return this.q.shift()}}class qT{constructor(t){this.v=t}updateByAssignment(t,e){e in t&&(this.v[e]=t[e])}}class FU{updateBoard(t,e){const r=this.getInvSquares(t.squares),i=this.getInvSquares(e.squares),o=[];for(let s of t.squares){if(!(s.id in i)){o.push(s.id);continue}const a=i[s.id],c=new qT(s);c.updateByAssignment(a,"dropIndex"),c.updateByAssignment(a,"lastClicked"),c.updateByAssignment(a,"letter"),c.updateByAssignment(a,"x"),c.updateByAssignment(a,"y"),c.updateByAssignment(a,"invalid")}for(let s of e.squares)s.id in r||t.squares.push(s);t.squares=t.squares.filter(s=>!o.includes(s.id))}getInvSquares(t){const e={};for(let r of t)e[r.id]=r;return e}}const NU=["isEliminated","isSpectator","tilesUsed","nameEncoded","disconnected"];class LU{updatePlayer(t,e,r=!1){const i=new qT(t);"nameEncoded"in e&&t.nameEncoded!==e.nameEncoded&&(t.name=decodeURI(e.nameEncoded));for(let o of NU)i.updateByAssignment(e,o);r&&i.updateByAssignment(e,"totalTiles"),(new FU).updateBoard(t.boardState,e.boardState)}}const jU=["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"];let VU=(()=>{class n{constructor(){}isOneComponent(e){return 1===this.getNumComponents(e)}getNumComponents(e){const r=e.map(d=>d.dropIndex),i=new Set(r),o=[],s={},a={};for(const d of r)o.push(d);let c=0;for(;o.length;){const d=o.pop();if(!(d in a)){a[d]=1,d in s||(s[d]=c++);for(const p of this.getAdjacentSquares(d))i.has(p)&&(s[p]=s[d],a[p]||o.push(p))}}return c}*getAdjacentSquares(e){const r=e%22;yield e-22,yield e+22,r>0&&(yield e-1),r<21&&(yield e+1)}getMovedSquareIds(e,r){const i="ArrowLeft"===r||"ArrowRight"===r,s={ArrowLeft:-1,ArrowRight:1,ArrowDown:22,ArrowUp:-22}[r],a=[];for(let c of e)if(i){const p=c.dropIndex%22+s;a.push(0<=p&&p<22?c.dropIndex+s:c.dropIndex)}else{let d=c.dropIndex+s;(d<0||d>=484)&&(d=c.dropIndex),a.push(d)}return a}sortTwoArrays(e,r,i){if(e.length!==r.length)throw new Error(`expected same length ${e.length}, ${r.length}`);const o=Array(e.length).fill(null).map((s,a)=>a);return o.sort((s,a)=>i(e[s],e[a])),[o.map(s=>e[s]),o.map(s=>r[s])]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class WT{}class KT{}class To{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const r=e.indexOf(":");if(r>0){const i=e.slice(0,r),o=i.toLowerCase(),s=e.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let r=t[e];const i=e.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(e,i))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof To?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new To;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof To?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(t.name,e);const i=("a"===t.op?this.headers.get(e):void 0)||[];i.push(...r),this.headers.set(e,i);break;case"d":const o=t.value;if(o){let s=this.headers.get(e);if(!s)return;s=s.filter(a=>-1===o.indexOf(a)),0===s.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,s)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class BU{encodeKey(t){return YT(t)}encodeValue(t){return YT(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const $U=/%(\d[a-f0-9])/gi,HU={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function YT(n){return encodeURIComponent(n).replace($U,(t,e)=>{var r;return null!==(r=HU[e])&&void 0!==r?r:t})}function lh(n){return`${n}`}class as{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new BU,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function UU(n,t){const e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const o=i.indexOf("="),[s,a]=-1==o?[t.decodeKey(i),""]:[t.decodeKey(i.slice(0,o)),t.decodeValue(i.slice(o+1))],c=e.get(s)||[];c.push(a),e.set(s,c)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const r=t.fromObject[e],i=Array.isArray(r)?r.map(lh):[lh(r)];this.map.set(e,i)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(r=>{const i=t[r];Array.isArray(i)?i.forEach(o=>{e.push({param:r,value:o,op:"a"})}):e.push({param:r,value:i,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(r=>e+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new as({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(lh(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let r=this.map.get(t.param)||[];const i=r.indexOf(lh(t.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class zU{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function QT(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function JT(n){return"undefined"!=typeof Blob&&n instanceof Blob}function ZT(n){return"undefined"!=typeof FormData&&n instanceof FormData}class hu{constructor(t,e,r,i){let o;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function GU(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new To),this.context||(this.context=new zU),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=e;else{const a=e.indexOf("?");this.urlWithParams=e+(-1===a?"?":a<e.length-1?"&":"")+s}}else this.params=new as,this.urlWithParams=e}serializeBody(){return null===this.body?null:QT(this.body)||JT(this.body)||ZT(this.body)||function qU(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof as?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||ZT(this.body)?null:JT(this.body)?this.body.type||null:QT(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof as?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){var e;const r=t.method||this.method,i=t.url||this.url,o=t.responseType||this.responseType,s=void 0!==t.body?t.body:this.body,a=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,c=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let d=t.headers||this.headers,p=t.params||this.params;const g=null!==(e=t.context)&&void 0!==e?e:this.context;return void 0!==t.setHeaders&&(d=Object.keys(t.setHeaders).reduce((_,E)=>_.set(E,t.setHeaders[E]),d)),t.setParams&&(p=Object.keys(t.setParams).reduce((_,E)=>_.set(E,t.setParams[E]),p)),new hu(r,i,s,{params:p,headers:d,context:g,reportProgress:c,responseType:o,withCredentials:a})}}var mn=(()=>((mn=mn||{})[mn.Sent=0]="Sent",mn[mn.UploadProgress=1]="UploadProgress",mn[mn.ResponseHeader=2]="ResponseHeader",mn[mn.DownloadProgress=3]="DownloadProgress",mn[mn.Response=4]="Response",mn[mn.User=5]="User",mn))();class Qv{constructor(t,e=200,r="OK"){this.headers=t.headers||new To,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class Jv extends Qv{constructor(t={}){super(t),this.type=mn.ResponseHeader}clone(t={}){return new Jv({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class uh extends Qv{constructor(t={}){super(t),this.type=mn.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new uh({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class XT extends Qv{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function Zv(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let pu=(()=>{class n{constructor(e){this.handler=e}request(e,r,i={}){let o;if(e instanceof hu)o=e;else{let c,d;c=i.headers instanceof To?i.headers:new To(i.headers),i.params&&(d=i.params instanceof as?i.params:new as({fromObject:i.params})),o=new hu(e,r,void 0!==i.body?i.body:null,{headers:c,context:i.context,params:d,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const s=Ee(o).pipe(ts(c=>this.handler.handle(c)));if(e instanceof hu||"events"===i.observe)return s;const a=s.pipe(bo(c=>c instanceof uh));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(Ae(c=>{if(null!==c.body&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(Ae(c=>{if(null!==c.body&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(Ae(c=>{if(null!==c.body&&"string"!=typeof c.body)throw new Error("Response is not a string.");return c.body}));default:return a.pipe(Ae(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(e,r={}){return this.request("DELETE",e,r)}get(e,r={}){return this.request("GET",e,r)}head(e,r={}){return this.request("HEAD",e,r)}jsonp(e,r){return this.request("JSONP",e,{params:(new as).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,r={}){return this.request("OPTIONS",e,r)}patch(e,r,i={}){return this.request("PATCH",e,Zv(i,r))}post(e,r,i={}){return this.request("POST",e,Zv(i,r))}put(e,r,i={}){return this.request("PUT",e,Zv(i,r))}}return n.\u0275fac=function(e){return new(e||n)(Q(WT))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})();class eM{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const tM=new ve("HTTP_INTERCEPTORS");let WU=(()=>{class n{intercept(e,r){return r.handle(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})();const KU=/^\)\]\}',?\n/;let nM=(()=>{class n{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new ae(r=>{const i=this.xhrFactory.build();if(i.open(e.method,e.urlWithParams),e.withCredentials&&(i.withCredentials=!0),e.headers.forEach((E,D)=>i.setRequestHeader(E,D.join(","))),e.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const E=e.detectContentTypeHeader();null!==E&&i.setRequestHeader("Content-Type",E)}if(e.responseType){const E=e.responseType.toLowerCase();i.responseType="json"!==E?E:"text"}const o=e.serializeBody();let s=null;const a=()=>{if(null!==s)return s;const E=i.statusText||"OK",D=new To(i.getAllResponseHeaders()),F=function YU(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||e.url;return s=new Jv({headers:D,status:i.status,statusText:E,url:F}),s},c=()=>{let{headers:E,status:D,statusText:F,url:H}=a(),K=null;204!==D&&(K=void 0===i.response?i.responseText:i.response),0===D&&(D=K?200:0);let ie=D>=200&&D<300;if("json"===e.responseType&&"string"==typeof K){const z=K;K=K.replace(KU,"");try{K=""!==K?JSON.parse(K):null}catch(se){K=z,ie&&(ie=!1,K={error:se,text:K})}}ie?(r.next(new uh({body:K,headers:E,status:D,statusText:F,url:H||void 0})),r.complete()):r.error(new XT({error:K,headers:E,status:D,statusText:F,url:H||void 0}))},d=E=>{const{url:D}=a(),F=new XT({error:E,status:i.status||0,statusText:i.statusText||"Unknown Error",url:D||void 0});r.error(F)};let p=!1;const g=E=>{p||(r.next(a()),p=!0);let D={type:mn.DownloadProgress,loaded:E.loaded};E.lengthComputable&&(D.total=E.total),"text"===e.responseType&&!!i.responseText&&(D.partialText=i.responseText),r.next(D)},_=E=>{let D={type:mn.UploadProgress,loaded:E.loaded};E.lengthComputable&&(D.total=E.total),r.next(D)};return i.addEventListener("load",c),i.addEventListener("error",d),i.addEventListener("timeout",d),i.addEventListener("abort",d),e.reportProgress&&(i.addEventListener("progress",g),null!==o&&i.upload&&i.upload.addEventListener("progress",_)),i.send(o),r.next({type:mn.Sent}),()=>{i.removeEventListener("error",d),i.removeEventListener("abort",d),i.removeEventListener("load",c),i.removeEventListener("timeout",d),e.reportProgress&&(i.removeEventListener("progress",g),null!==o&&i.upload&&i.upload.removeEventListener("progress",_)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(e){return new(e||n)(Q(KS))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})();const Xv=new ve("XSRF_COOKIE_NAME"),ey=new ve("XSRF_HEADER_NAME");class rM{}let QU=(()=>{class n{constructor(e,r,i){this.doc=e,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=jS(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return n.\u0275fac=function(e){return new(e||n)(Q(Nt),Q(ef),Q(Xv))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})(),ty=(()=>{class n{constructor(e,r){this.tokenService=e,this.headerName=r}intercept(e,r){const i=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(e);const o=this.tokenService.getToken();return null!==o&&!e.headers.has(this.headerName)&&(e=e.clone({headers:e.headers.set(this.headerName,o)})),r.handle(e)}}return n.\u0275fac=function(e){return new(e||n)(Q(rM),Q(ey))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})(),JU=(()=>{class n{constructor(e,r){this.backend=e,this.injector=r,this.chain=null}handle(e){if(null===this.chain){const r=this.injector.get(tM,[]);this.chain=r.reduceRight((i,o)=>new eM(i,o),this.backend)}return this.chain.handle(e)}}return n.\u0275fac=function(e){return new(e||n)(Q(KT),Q(_r))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})(),ZU=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:ty,useClass:WU}]}}static withOptions(e={}){return{ngModule:n,providers:[e.cookieName?{provide:Xv,useValue:e.cookieName}:[],e.headerName?{provide:ey,useValue:e.headerName}:[]]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=jt({type:n}),n.\u0275inj=Lt({providers:[ty,{provide:tM,useExisting:ty,multi:!0},{provide:rM,useClass:QU},{provide:Xv,useValue:"XSRF-TOKEN"},{provide:ey,useValue:"X-XSRF-TOKEN"}]}),n})(),XU=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=jt({type:n}),n.\u0275inj=Lt({providers:[pu,{provide:WT,useClass:JU},nM,{provide:KT,useExisting:nM}],imports:[ZU.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),n})();const e$=os("dictionary");let t$=(()=>{class n{constructor(e,r){this.httpClient=e,this.baseHref=r,this.dict=new Set,window.fixDictionary=()=>this.init(),window.checkWord=i=>this.hasWord(i),this.init()}init(){var e=this;return So(function*(){return e.httpClient.get(e.baseHref+"assets/csw2019.txt",{responseType:"text"}).subscribe(r=>{e.addAllWords(r.split("\r\n")),e.addAllWords(r.split("\n"))})})()}addAllWords(e){for(let r of e)this.dict.add(r)}hasWord(e){return e=e.toUpperCase(),e$.debug(`hasWord(${e}) = ${this.dict.has(e)}`),this.dict.has(e)}}return n.\u0275fac=function(e){return new(e||n)(Q(pu),Q(Xs))},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),iM=(()=>{class n{constructor(e){this.dictionaryService=e}getInvalidSquares(e){const r=[];for(let p=0;p<22;++p)r.push(Array(22).fill(null));for(const p of e)r[Math.floor(p.dropIndex/22)][p.dropIndex%22]=p;const i=new oM,o=new oM;for(let p=0;p<22;++p){for(let g=0;g<22;++g)i.next(r[p][g]),o.next(r[g][p]);i.clear(),o.clear()}const a=i.squares.concat(o.squares).filter(p=>this.isInvalidWord(p)),c=new Set,d=[];for(let p of a)for(let g of p)g.id in c||(c.add(g.id),d.push(g));return d}isInvalidWord(e){if(1===e.length)return!1;const r=e.map(i=>i.letter);return!this.dictionaryService.hasWord(r.join(""))}}return n.\u0275fac=function(e){return new(e||n)(Q(t$))},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class oM{constructor(){this.squares=[],this.currentArr=[]}next(t){t?this.currentArr.push(t):this.clear()}clear(){this.currentArr.length&&this.squares.push(this.currentArr),this.currentArr=[]}}const sM="bananagrams-";let n$=(()=>{class n{constructor(){this.localState=this.getLocalState()}getLocalState(){const e=localStorage.getItem(sM);if(null===e)return this.getDefaultLocalState();try{return JSON.parse(e)}catch(r){return this.getDefaultLocalState()}}getDefaultLocalState(){return{previousIds:[]}}updateLocalState(){localStorage.setItem(sM,JSON.stringify(this.localState))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ny=(()=>{class n{constructor(e,r,i){this.peerToPeerService=e,this.router=r,this.ngZone=i}gotoLobby(){return this.wrappedNavigate([kr.LOBBY+"/"+this.peerToPeerService.getHostId()])}gotoGame(){return this.wrappedNavigate([kr.GAME+"/"+this.peerToPeerService.getHostId()])}wrappedNavigate(e,r){this.ngZone.run(()=>this.router.navigate(e,r))}}return n.\u0275fac=function(e){return new(e||n)(Q(ss),Q(gn),Q(Ut))},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const kc=os("game");let ca=(()=>{class n{constructor(e,r,i,o,s,a){this.peerToPeerService=e,this.invalidSquareFinderService=r,this.boardAlgorithmsService=i,this.localStorageService=o,this.navigationService=s,this.location=a,this.letter$=new OU,this.gameStart$=new Le,this.winner$=new Le,this.loser$=new Le,this.subs=[],this.state=n.getInitialState()}initFromPeerToPeer(){if(this.subs.length>0)return;this.state.players=[];const e=this.peerToPeerService.getId(),r=this.localStorageService.localState.previousIds;r.includes(e)||(r.push(e),this.localStorageService.localState.previousIds=r.slice(Math.max(r.length-10,0)),this.localStorageService.updateLocalState()),this.subs=[this.peerToPeerService.connectionRemoved.subscribe(i=>{this.peerToPeerService.getIsHost();const o=this.getPlayerById(i);o&&(o.disconnected=!0)}),this.peerToPeerService.getMessageObservable().subscribe(i=>{switch(i.data.command){case"UPDATE_PLAYER":{let o=this.getPlayerById(i.data.playerId);const s=!o;s&&(o=new zT(i.data.playerId),this.state.players.push(o)),(new LU).updatePlayer(o,i.data.state,s),this.checkRejoinCandidate(o),i.data.state.hasOwnProperty("name")&&this.sortPlayers()}break;case"GAME_START":for(;this.letter$.getLength()>0;)this.letter$.pop();this.resetLocalState(),this.state.gameId++,kc.debug(`START GAME ${this.state.gameId}`),this.gameStart$.next(!0);break;case"REJOIN_AS_PLAYER":{kc.info("REJOIN AS PLAYER",i);const o=this.getPlayerById(i.data.toPlayer);o&&(this.state.players=this.state.players.filter(s=>s.id!==i.from),o.id=i.from,o.disconnected=!1)}break;case"RECEIVE_LETTERS":{const o=this.getPlayerById(i.data.playerId),s=i.data.playerId===this.peerToPeerService.getId();if(s){kc.debug("received letters ",i.data.letters);for(let a of i.data.letters)this.letter$.add(a)}o.totalTiles=i.data.playerTotalTiles,s&&this.updateAfterDrop()}break;case"LOSER":this.getPlayerById(i.data.playerId).isEliminated=!0,i.data.playerId===this.peerToPeerService.getId()&&this.loser$.next();break;case"PLAYER_DISCONNECTED":{let o=this.getPlayerById(i.data.playerId);o&&(o.disconnected=!0),this.peerToPeerService.getIsConnected()&&i.data.playerId!==this.peerToPeerService.getHostId()||(this.getOrCreateMyPlayer().disconnected=!0),this.checkRejoinCandidate(o)}break;case"WINNER":this.winner$.next();break;case"UPDATE_SHARED_STATE":Object.assign(this.state,i.data.state);break;case"RETURN_TO_LOBBY":this.location.back()}})],this.peerToPeerService.sendSingleMessage(this.peerToPeerService.getHostId(),{command:"REQUEST_ALL_STATE"})}dispose(){this.state=n.getInitialState(),this.subs.forEach(e=>e.unsubscribe()),this.subs=[]}checkRejoinCandidate(e){this.localStorageService.localState.previousIds.includes(e.id)&&e.disconnected&&e.id!==this.peerToPeerService.getId()&&(kc.info(`has been ${e.id} before.`),kc.info(`auto rejoin as ${e.id}`),this.rejoinAsPlayer(e))}resetLocalState(){this.state.players.forEach(e=>{e.boardState=new HT,e.tilesUsed=0,e.isEliminated=!1,e.isSpectator=!1}),this.state.canClaimSuccess=!1}rejoinAsPlayer(e){this.peerToPeerService.broadcastAndToSelf({command:"REJOIN_AS_PLAYER",toPlayer:e.id})}updatePlayer(e){let r=this.getOrCreateMyPlayer();r.name=e,r.nameEncoded=encodeURI(r.name),this.sendPlayerUpdateMessage(r),this.sendPlayerUpdateMessage(r,this.peerToPeerService.getId())}updateAfterDrop(){let e=this.getOrCreateMyPlayer();e.tilesUsed=e.boardState.squares.reduce((r,i)=>r+(i.dropIndex<484?1:0),0),this.state.canClaimSuccess=this.canClaimSuccess(),this.sendUpdateMessage(this.getOrCreateMyPlayer())}canClaimSuccess(){const e=this.getOrCreateMyPlayer();return e.tilesUsed===e.totalTiles&&this.boardAlgorithmsService.isOneComponent(e.boardState.squares)}sendUpdateMessage(e){this.sendPlayerUpdateMessage(e)}sendPlayerUpdateMessage(e,r=null){const o={command:"UPDATE_PLAYER",state:Object.assign({},e),playerId:e.id};r?this.peerToPeerService.sendSingleMessage(r,o):this.peerToPeerService.broadcast(o)}claimSuccess(){let e=this.getPlayerById(this.peerToPeerService.getId());const r=this.invalidSquareFinderService.getInvalidSquares(e.boardState.squares);this.peerToPeerService.sendSingleMessage(this.peerToPeerService.getHostId(),{command:"CLAIM_SUCCESS",boardValid:0===r.length,numLetters:e.totalTiles})}dump(e){let r=this.getPlayerById(this.peerToPeerService.getId());r.boardState.squares=r.boardState.squares.filter(i=>i.id!==e.id),this.peerToPeerService.sendSingleMessage(this.peerToPeerService.getHostId(),{command:"DUMP_LETTER",letter:e.letter})}getOrCreateMyPlayer(){let e=this.getPlayerById(this.peerToPeerService.getId());return e||(e=new zT(this.peerToPeerService.getId())),this.state.myPlayer=e}moveAllSquares(e){const r=jU.find(p=>p===e);if(!r)return{shouldMove:!1};let o=this.getOrCreateMyPlayer().boardState.squares.filter(p=>p.dropIndex<484),s=this.boardAlgorithmsService.getMovedSquareIds(o,r);const a=new Set(s);if(a.size!==o.length)return kc.debug(`refused to moved squares ${a.size} != ${o.length}`,a,s),{shouldMove:!1};const d={ArrowRight:(p,g)=>g.dropIndex-p.dropIndex,ArrowLeft:(p,g)=>p.dropIndex-g.dropIndex,ArrowUp:(p,g)=>p.dropIndex-g.dropIndex,ArrowDown:(p,g)=>g.dropIndex-p.dropIndex}[e];return[o,s]=this.boardAlgorithmsService.sortTwoArrays(o,s,d),{shouldMove:!0,squaresInPlay:o,movedIds:s}}static getInitialState(){return{gameId:0,canDump:!0,canClaimSuccess:!1,winnerId:null,totalTilesInGame:0,tilesUsedByPlayers:0,tilesRemaining:0,players:[],totalPeerCount:0,inGame:!1,nextPeelWins:!1,gameOver:!1,myPlayer:null}}getPlayerById(e){return this.state.players.find(r=>r.id==e)}sortPlayers(){this.state.players=this.state.players.sort((r,i)=>{const o=c=>c.id===this.peerToPeerService.getHostId(),s=o(r)?1:0,a=o(i)?1:0;return s!==a?a-s:r.name!==i.name?r.name<i.name?-1:1:0})}}return n.\u0275fac=function(e){return new(e||n)(Q(ss),Q(iM),Q(VU),Q(n$),Q(ny),Q(uf))},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const r$=os("banana-animation"),Ui=140;class i${constructor(t){this.ngZone=t,this.animations=[]}runAnimation(t){this.stopAnimation();const e=this.getAnimationsToAnimate();for(const o of this.animations)t.appendChild(o.div);let r=0;this.frameTimer=new s$({onGenerateFrame:()=>{for(let o of e[r]){const s=o.calcFrames[r];o.div.style.transform=s.transform,o.div.style.opacity=s.opacity}++r>=Ui&&(r=0)}}),this.frameTimer.start()}stopAnimation(){clearTimeout(this.timer),this.animations.forEach(t=>t.div.remove()),this.frameTimer&&this.frameTimer.stop(),this.frameTimer=null,this.animations=[]}getAnimationsToAnimate(){let t=[];for(let r=0;r<50;++r){const i=document.createElement("div");i.classList.add("banana");const o={div:i,endX:600*Math.random()-300,rot:(Math.random()<=.5?-1:1)*(720+360*Math.random()*5),offsetT:Math.floor(Math.random()*Ui)};o.calcFrames=this.calculateFrames(o),t.push(o)}let e=new Array(Ui).fill(null);for(let r=0;r<Ui;++r)e[r]=t.filter(i=>!i.calcFrames[r].skip);return this.debugInfo(t),this.animations=t,e}calculateFrames(t){let e=[];for(let o=0;o<Ui;++o){const s=this.roundToPrecision(t.rot*(o/Ui),0),a=this.roundToPrecision(t.endX*(o/Ui),0),c=this.roundToPrecision(350+.035*(o+80)*(o-140),0),p={transform:`translate(${a}px, ${c}px) rotate(${s}deg)`,opacity:this.roundToPrecision(o>=40&&o<=100?1:o<40?o/40:(Ui-o)/40).toString(),skip:c<=-43};e.push(p)}let r=Array(Ui).fill(null);const i=this.calculateOffsets(t,Ui);for(let o=0;o<i.length;++o)r[i[o]]=e[o];return r}calculateOffsets(t,e){return Array(e).fill(null).map((r,i)=>(t.offsetT+i)%e)}roundToPrecision(t,e=2){const r=10**e;return Math.round((t+Number.EPSILON)*r)/r}debugInfo(t){let e=0,r=0;for(let i of t)for(let o of i.calcFrames)e+=o.skip?1:0,r++;r$.info(`skipping ${e}/${r} frames (${(100*e/r).toFixed(1)}%)`)}}class s${constructor(t){this.lastFrameTime=null,this.requestId=null,this.running=!1,this.onAnimationFrame=e=>{this.requestId=window.__zone_symbol__requestAnimationFrame(this.onAnimationFrame);const i=~~((e-this.lastFrameTime)/this.interval);this.lastFrameTime+=i*this.interval,0!==i&&this.onGenerateFrame()},this.onAnimationFrame=this.onAnimationFrame.bind(this),this.onGenerateFrame=t.onGenerateFrame,this.interval=1e3/60.098}start(){this.running=!0,this.lastFrameTime=0,this.onAnimationFrame(0)}stop(){this.running=!1,this.requestId&&cancelAnimationFrame(this.requestId),this.lastFrameTime=null}}class ry{constructor(){this.d=new Map,this._size=0}get size(){return this._size}add(t){this.d.has(t)?(this.d.set(t,this.d.get(t)+1),this._size++):(this.d.set(t,1),this._size++)}delete(t){this.d.has(t)&&(this.d.set(t,this.d.get(t)-1),this._size--)}get(t){return this.d.get(t)}[Symbol.iterator](){let t=0,e=[];for(let[r,i]of this.d.entries())for(let o=0;o<i;++o)e.push(r);return{next:()=>({done:t===e.length,value:e[t++]})}}}let aM=(()=>{class n{constructor(){this.numTilesPerPlayerOverride=null,this.initialTilesOverride=null}getInitialTiles(e){if(this.initialTilesOverride)return this.initialTilesOverride;let r=new Array;const i=1+Math.floor((e-1)/8);for(let[o,s]of a$.entries()){const a=2!=e?s*i:s*i/2;for(let c=0;c<a;++c)r.push(o)}return r}getNumTilesPerPlayer(e){return this.numTilesPerPlayerOverride?this.numTilesPerPlayerOverride:1<=e&&e<=4?21:5<=e&&e<=6?15:11}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const a$=new Map([["A",13],["B",3],["C",3],["D",6],["E",18],["F",3],["G",4],["H",3],["I",12],["J",2],["K",2],["L",5],["M",3],["N",8],["O",11],["P",3],["Q",2],["R",9],["S",6],["T",9],["U",6],["V",3],["W",3],["X",2],["Y",3],["Z",2]]),c$=os("game-host");let iy,dh=(()=>{class n{constructor(e,r,i){this.peerToPeerService=e,this.gameService=r,this.initialTilesProviderService=i,this.state=n.getDefaultState(),this.subs=[],this.subs=[this.peerToPeerService.connectionAdded.subscribe(()=>this.updateSharedState()),this.peerToPeerService.connectionRemoved.subscribe(o=>{const s=this.gameService.getPlayerById(o);s&&this.peerToPeerService.broadcastAndToSelf({command:"PLAYER_DISCONNECTED",playerId:s.id}),this.updateSharedState()}),this.peerToPeerService.getMessageObservable().subscribe(o=>{var s;switch(o.data.command){case"DUMP_LETTER":{this.state.lettersPerPlayer[o.from].delete(o.data.letter);let c=[o.data.letter];this.canDump&&(c=this.takeLetters(3),this.state.letters.push(o.data.letter)),this.sendPlayerLetters(o.from,c),this.updateSharedState()}break;case"CLAIM_SUCCESS":{const a=this.state.lettersPerPlayer[o.from];if(a.size!==o.data.numLetters){c$.warn(`CLAIM_SUCCESS: host suggests ${a.size}, message has ${o.data.numLetters}`);break}this.nextPeelWins?o.data.boardValid?this.state.winnerId||(this.state.winnerId=o.from,this.updateSharedState(),this.peerToPeerService.broadcastAndToSelf({command:"WINNER"})):(this.state.losers.push(o.from),this.peerToPeerService.broadcastAndToSelf({command:"LOSER",playerId:o.from}),this.addLetters(a)):this.giveEveryPlayerNLetters(1),this.updateSharedState()}break;case"REQUEST_ALL_STATE":for(let a of this.gameService.state.players)this.gameService.sendPlayerUpdateMessage(a,o.from);this.updateSharedState();break;case"REJOIN_AS_PLAYER":this.state.lettersPerPlayer[o.from]=null!==(s=this.state.lettersPerPlayer[o.data.toPlayer])&&void 0!==s?s:new ry,this.state.lettersPerPlayer[o.data.toPlayer]=new ry}})]}createGame(){var e=this;return So(function*(){yield e.peerToPeerService.setupAsHost()})()}startGame(){var e=this;return So(function*(){e.dispose(),e.updateSharedState(),e.state.inGame=!0,e.peerToPeerService.broadcastAndToSelf({command:"GAME_START"});const r=e.gameService.state.players.length;for(let o of e.gameService.state.players)e.state.lettersPerPlayer[o.id]=new ry;e.state.letters=e.initialTilesProviderService.getInitialTiles(r),n.shuffleArray(e.state.letters);const i=e.initialTilesProviderService.getNumTilesPerPlayer(r);e.state.totalTilesInGame=e.state.letters.length,e.giveEveryPlayerNLetters(i,!0),e.updateSharedState()})()}dispose(){this.state=n.getDefaultState()}updateSharedState(){this.peerToPeerService.broadcastAndToSelf({command:"UPDATE_SHARED_STATE",state:this.getSharedState()})}returnToLobby(){this.state.inGame=!1,this.updateSharedState(),this.peerToPeerService.broadcastAndToSelf({command:"RETURN_TO_LOBBY"})}giveEveryPlayerNLetters(e,r=!1){for(const i of this.getActivePlayers(r)){if(i.disconnected)continue;const o=this.takeLetters(e);this.sendPlayerLetters(i.id,o)}}getActivePlayers(e=!1){return this.gameService.state.players.filter(r=>{var i,o;return!r.isEliminated&&(e||(null!==(o=null===(i=this.state.lettersPerPlayer[r.id])||void 0===i?void 0:i.size)&&void 0!==o?o:0)>0)})}sendPlayerLetters(e,r){for(const i of r)this.state.lettersPerPlayer[e].add(i);this.peerToPeerService.broadcastAndToSelf({command:"RECEIVE_LETTERS",playerId:e,playerTotalTiles:this.state.lettersPerPlayer[e].size,letters:r})}get nextPeelWins(){const e=this.getActivePlayers().length;return this.state.letters.length<e}get canDump(){return this.state.letters.length>=3}addLetters(e){this.state.letters=this.state.letters.concat([...e]),n.shuffleArray(this.state.letters)}static shuffleArray(e){for(let r=e.length-1;r>0;r--){const i=Math.floor(Math.random()*(r+1));[e[r],e[i]]=[e[i],e[r]]}}takeLetters(e){if(e>this.state.letters.length)throw new Error(`tried to take ${e} letters, only ${this.state.letters.length} available`);const r=this.state.letters.slice(0,e);return this.state.letters=this.state.letters.slice(e),r}static getDefaultState(){return{letters:n.getDefaultLetters(),lettersPerPlayer:{},totalTilesInGame:0,losers:[],winnerId:null,inGame:!1}}static getDefaultLetters(){let e=new Array;for(let r=0;r<26;++r){let i=String.fromCharCode("A".charCodeAt(0)+r);for(let o=0;o<2;++o)e.push(i)}return n.shuffleArray(e),e}getSharedState(){let e=0;for(let i of Object.keys(this.state.lettersPerPlayer))this.state.losers.includes(i)||(e+=this.state.lettersPerPlayer[i].size);const r=null!=this.state.winnerId||this.state.losers.length===Object.keys(this.state.lettersPerPlayer).length;return{winnerId:this.state.winnerId,canDump:!r&&this.canDump,nextPeelWins:this.nextPeelWins,tilesUsedByPlayers:e,totalTilesInGame:this.state.totalTilesInGame,tilesRemaining:this.state.letters.length,totalPeerCount:1+this.peerToPeerService.getConnections().length,inGame:this.state.inGame,gameOver:r}}}return n.\u0275fac=function(e){return new(e||n)(Q(ss),Q(ca),Q(aM))},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();try{iy="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){iy=!1}let gu,sy,Oc=(()=>{class n{constructor(e){this._platformId=e,this.isBrowser=this._platformId?function UL(n){return n===qS}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!iy)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(e){return new(e||n)(Q(ef))},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),cM=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=jt({type:n}),n.\u0275inj=Lt({}),n})();function oy(n){return function l$(){if(null==gu&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>gu=!0}))}finally{gu=gu||!1}return gu}()?n:!!n.capture}function mu(n){return n.composedPath?n.composedPath()[0]:n.target}function uM(n){return t=>t.lift(new C$(n))}class C${constructor(t){this.total=t}call(t,e){return e.subscribe(new E$(t,this.total))}}class E$ extends N{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){++this.count>this.total&&this.destination.next(t)}}class D${constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new w$(t,this.compare,this.keySelector))}}class w$ extends N{constructor(t,e,r){super(t),this.keySelector=r,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:i}=this;e=i?i(t):t}catch(i){return this.destination.error(i)}let r=!1;if(this.hasKey)try{const{compare:i}=this;r=i(this.key,e)}catch(i){return this.destination.error(i)}else this.hasKey=!0;r||(this.key=e,this.destination.next(t))}}function dM(n){return t=>t.lift(new T$(n))}class T${constructor(t){this.notifier=t}call(t,e){const r=new M$(t),i=Ca(this.notifier,new ba(r));return i&&!r.seenValue?(r.add(i),e.subscribe(r)):r}}class M$ extends Oo{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}function hh(n){return null!=n&&"false"!=`${n}`}function fM(n){return Array.isArray(n)?n:[n]}function vu(n){return n instanceof fn?n.nativeElement:n}class x${constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new P$(t,this.dueTime,this.scheduler))}}class P$ extends N{constructor(t,e,r){super(t),this.dueTime=e,this.scheduler=r,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(R$,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function R$(n){n.debouncedNext()}const hM=new Set;let Nc,k$=(()=>{class n{constructor(e){this._platform=e,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):F$}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function O$(n){if(!hM.has(n))try{Nc||(Nc=document.createElement("style"),Nc.setAttribute("type","text/css"),document.head.appendChild(Nc)),Nc.sheet&&(Nc.sheet.insertRule(`@media ${n} {body{ }}`,0),hM.add(n))}catch(t){console.error(t)}}(e),this._matchMedia(e)}}return n.\u0275fac=function(e){return new(e||n)(Q(Oc))},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function F$(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let N$=(()=>{class n{constructor(e,r){this._mediaMatcher=e,this._zone=r,this._queries=new Map,this._destroySubject=new Le}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return pM(fM(e)).some(i=>this._registerQuery(i).mql.matches)}observe(e){let o=rv(pM(fM(e)).map(s=>this._registerQuery(s).observable));return o=Af(o.pipe(ta(1)),o.pipe(uM(1),function A$(n,t=Kv){return e=>e.lift(new x$(n,t))}(0))),o.pipe(Ae(s=>{const a={matches:!1,breakpoints:{}};return s.forEach(({matches:c,query:d})=>{a.matches=a.matches||c,a.breakpoints[d]=c}),a}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const r=this._mediaMatcher.matchMedia(e),o={observable:new ae(s=>{const a=c=>this._zone.run(()=>s.next(c));return r.addListener(a),()=>{r.removeListener(a)}}).pipe(iv(r),Ae(({matches:s})=>({query:e,matches:s})),dM(this._destroySubject)),mql:r};return this._queries.set(e,o),o}}return n.\u0275fac=function(e){return new(e||n)(Q(k$),Q(Ut))},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function pM(n){return n.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}function yM(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function _M(n){const t=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}const z$=new ve("cdk-input-modality-detector-options"),G$={ignoreKeys:[18,17,224,91,16]},Lc=oy({passive:!0,capture:!0});let q$=(()=>{class n{constructor(e,r,i,o){this._platform=e,this._mostRecentTarget=null,this._modality=new $r(null),this._lastTouchMs=0,this._onKeydown=s=>{var a,c;null!==(c=null===(a=this._options)||void 0===a?void 0:a.ignoreKeys)&&void 0!==c&&c.some(d=>d===s.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=mu(s))},this._onMousedown=s=>{Date.now()-this._lastTouchMs<650||(this._modality.next(yM(s)?"keyboard":"mouse"),this._mostRecentTarget=mu(s))},this._onTouchstart=s=>{_M(s)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=mu(s))},this._options=Object.assign(Object.assign({},G$),o),this.modalityDetected=this._modality.pipe(uM(1)),this.modalityChanged=this.modalityDetected.pipe(function S$(n,t){return e=>e.lift(new D$(n,t))}()),e.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,Lc),i.addEventListener("mousedown",this._onMousedown,Lc),i.addEventListener("touchstart",this._onTouchstart,Lc)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Lc),document.removeEventListener("mousedown",this._onMousedown,Lc),document.removeEventListener("touchstart",this._onTouchstart,Lc))}}return n.\u0275fac=function(e){return new(e||n)(Q(Oc),Q(Ut),Q(Nt),Q(z$,8))},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const K$=new ve("cdk-focus-monitor-default-options"),ph=oy({passive:!0,capture:!0});let CM=(()=>{class n{constructor(e,r,i,o,s){this._ngZone=e,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Le,this._rootNodeFocusAndBlurListener=a=>{for(let d=mu(a);d;d=d.parentElement)"focus"===a.type?this._onFocus(a,d):this._onBlur(a,d)},this._document=o,this._detectionMode=(null==s?void 0:s.detectionMode)||0}monitor(e,r=!1){const i=vu(e);if(!this._platform.isBrowser||1!==i.nodeType)return Ee(null);const o=function d$(n){if(function u$(){if(null==sy){const n="undefined"!=typeof document?document.head:null;sy=!(!n||!n.createShadowRoot&&!n.attachShadow)}return sy}()){const t=n.getRootNode?n.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}(i)||this._getDocument(),s=this._elementInfo.get(i);if(s)return r&&(s.checkChildren=!0),s.subject;const a={checkChildren:r,subject:new Le,rootNode:o};return this._elementInfo.set(i,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(e){const r=vu(e),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(e,r,i){const o=vu(e);o===this._getDocument().activeElement?this._getClosestElementsInfo(o).forEach(([a,c])=>this._originChanged(a,r,c)):(this._setOrigin(r),"function"==typeof o.focus&&o.focus(i))}ngOnDestroy(){this._elementInfo.forEach((e,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!(null==e||!e.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(e,r){e.classList.toggle("cdk-focused",!!r),e.classList.toggle("cdk-touch-focused","touch"===r),e.classList.toggle("cdk-keyboard-focused","keyboard"===r),e.classList.toggle("cdk-mouse-focused","mouse"===r),e.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(e,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,r){const i=this._elementInfo.get(r),o=mu(e);!i||!i.checkChildren&&r!==o||this._originChanged(r,this._getFocusOrigin(o),i)}_onBlur(e,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&e.relatedTarget instanceof Node&&r.contains(e.relatedTarget)||(this._setClasses(r),this._emitOrigin(i,null))}_emitOrigin(e,r){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(r))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const r=e.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,ph),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,ph)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(dM(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(e){const r=e.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,ph),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,ph),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,r,i){this._setClasses(e,r),this._emitOrigin(i,r),this._lastFocusOrigin=r}_getClosestElementsInfo(e){const r=[];return this._elementInfo.forEach((i,o)=>{(o===e||i.checkChildren&&o.contains(e))&&r.push([o,i])}),r}_isLastInteractionFromInputLabel(e){const{_mostRecentTarget:r,mostRecentModality:i}=this._inputModalityDetector;if("mouse"!==i||!r||r===e||"INPUT"!==e.nodeName&&"TEXTAREA"!==e.nodeName||e.disabled)return!1;const o=e.labels;if(o)for(let s=0;s<o.length;s++)if(o[s].contains(r))return!0;return!1}}return n.\u0275fac=function(e){return new(e||n)(Q(Ut),Q(Oc),Q(q$),Q(Nt,8),Q(K$,8))},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const EM="cdk-high-contrast-black-on-white",SM="cdk-high-contrast-white-on-black",ay="cdk-high-contrast-active";let Y$=(()=>{class n{constructor(e,r){this._platform=e,this._document=r,this._breakpointSubscription=qt(N$).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(e):null,o=(i&&i.backgroundColor||"").replace(/ /g,"");switch(e.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(ay,EM,SM),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?e.add(ay,EM):2===r&&e.add(ay,SM)}}}return n.\u0275fac=function(e){return new(e||n)(Q(Oc),Q(Nt))},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),DM=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=jt({type:n}),n.\u0275inj=Lt({}),n})();const wM=new Yo("14.2.7"),TM=new Yo("12.2.13"),iH=new ve("mat-sanity-checks",{providedIn:"root",factory:function rH(){return!0}});let ua,$i=(()=>{class n{constructor(e,r,i){this._hasDoneGlobalChecks=!1,this._document=i,e._applyBodyHighContrastModeCssClasses(),this._sanityChecks=r,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!(!function ZF(){return gS=!0,pS}()||function f$(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}())&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}_checkDoctypeIsDefined(){this._checkIsEnabled("doctype")&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checkIsEnabled("theme")||!this._document.body||"function"!=typeof getComputedStyle)return;const e=this._document.createElement("div");e.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(e);const r=getComputedStyle(e);r&&"none"!==r.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(e)}_checkCdkVersionMatch(){this._checkIsEnabled("version")&&TM.full!==wM.full&&console.warn("The Angular Material version ("+TM.full+") does not match the Angular CDK version ("+wM.full+").\nPlease ensure the versions of these two packages exactly match.")}}return n.\u0275fac=function(e){return new(e||n)(Q(Y$),Q(iH,8),Q(Nt))},n.\u0275mod=jt({type:n}),n.\u0275inj=Lt({imports:[DM,DM]}),n})();function MM(n){return class extends n{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=hh(t)}}}function IM(n,t){return class extends n{constructor(...e){super(...e),this.defaultColor=t,this.color=t}get color(){return this._color}set color(e){const r=e||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}function oH(n){return class extends n{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=hh(t)}}}try{ua="undefined"!=typeof Intl}catch(n){ua=!1}class vH{constructor(t,e,r){this._renderer=t,this.element=e,this.config=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const xM={enterDuration:225,exitDuration:150},cy=oy({passive:!0}),PM=["mousedown","touchstart"],RM=["mouseup","mouseleave","touchend","touchcancel"];class _H{constructor(t,e,r,i){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=vu(r))}fadeInRipple(t,e,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=Object.assign(Object.assign({},xM),r.animation);r.centered&&(t=i.left+i.width/2,e=i.top+i.height/2);const s=r.radius||function CH(n,t,e){const r=Math.max(Math.abs(n-e.left),Math.abs(n-e.right)),i=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(r*r+i*i)}(t,e,i),a=t-i.left,c=e-i.top,d=o.enterDuration,p=document.createElement("div");p.classList.add("mat-ripple-element"),p.style.left=a-s+"px",p.style.top=c-s+"px",p.style.height=2*s+"px",p.style.width=2*s+"px",null!=r.color&&(p.style.backgroundColor=r.color),p.style.transitionDuration=`${d}ms`,this._containerElement.appendChild(p),function bH(n){window.getComputedStyle(n).getPropertyValue("opacity")}(p),p.style.transform="scale(1)";const g=new vH(this,p,r);return g.state=0,this._activeRipples.add(g),r.persistent||(this._mostRecentTransientRipple=g),this._runTimeoutOutsideZone(()=>{const _=g===this._mostRecentTransientRipple;g.state=1,!r.persistent&&(!_||!this._isPointerDown)&&g.fadeOut()},d),g}fadeOutRipple(t){const e=this._activeRipples.delete(t);if(t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!e)return;const r=t.element,i=Object.assign(Object.assign({},xM),t.config.animation);r.style.transitionDuration=`${i.exitDuration}ms`,r.style.opacity="0",t.state=2,this._runTimeoutOutsideZone(()=>{t.state=3,r.parentNode.removeChild(r)},i.exitDuration)}fadeOutAll(){this._activeRipples.forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=vu(t);!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(PM))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(RM),this._pointerUpEventsRegistered=!0)}_onMousedown(t){const e=yM(t),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!r&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!_M(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let r=0;r<e.length;r++)this.fadeInRipple(e[r].clientX,e[r].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_runTimeoutOutsideZone(t,e=0){this._ngZone.runOutsideAngular(()=>setTimeout(t,e))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(e=>{this._triggerElement.addEventListener(e,this,cy)})})}_removeTriggerEvents(){this._triggerElement&&(PM.forEach(t=>{this._triggerElement.removeEventListener(t,this,cy)}),this._pointerUpEventsRegistered&&RM.forEach(t=>{this._triggerElement.removeEventListener(t,this,cy)}))}}const EH=new ve("mat-ripple-global-options");let mh=(()=>{class n{constructor(e,r,i,o,s){this._elementRef=e,this._animationMode=s,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=o||{},this._rippleRenderer=new _H(this,r,e,i)}get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,r=0,i){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,r,Object.assign(Object.assign({},this.rippleConfig),i)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),e))}}return n.\u0275fac=function(e){return new(e||n)(V(fn),V(Ut),V(Oc),V(EH,8),V(Ec,8))},n.\u0275dir=Ie({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,r){2&e&&qn("mat-ripple-unbounded",r.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),n})(),kM=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=jt({type:n}),n.\u0275inj=Lt({imports:[$i,cM,$i]}),n})();const LM=["mat-button",""],jM=["*"],PH=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],RH=IM(MM(oH(class{constructor(n){this._elementRef=n}})));let _u=(()=>{class n extends RH{constructor(e,r,i){super(e),this._focusMonitor=r,this._animationMode=i,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const o of PH)this._hasHostAttributes(o)&&this._getHostElement().classList.add(o);e.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e,r){e?this._focusMonitor.focusVia(this._getHostElement(),e,r):this._getHostElement().focus(r)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...e){return e.some(r=>this._getHostElement().hasAttribute(r))}}return n.\u0275fac=function(e){return new(e||n)(V(fn),V(CM),V(Ec,8))},n.\u0275cmp=yn({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(e,r){if(1&e&&ME(mh,5),2&e){let i;Kd(i=function Yd(){return function dF(n,t){return n[19].queries[t].queryList}(J(),zo())}())&&(r.ripple=i.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(e,r){2&e&&(In("disabled",r.disabled||null),qn("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-button-disabled",r.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[lt],attrs:LM,ngContentSelectors:jM,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(e,r){1&e&&(function mc(n){const t=J()[16][6];if(!t.projection){const r=t.projection=ll(n?n.length:1,null),i=r.slice();let o=t.child;for(;null!==o;){const s=n?Uk(o,n):0;null!==s&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o),o=o.next}}}(),Ge(0,"span",0),function Ks(n,t=0,e){const r=J(),i=rt(),o=oc(i,22+n,16,null,e||null);null===o.projection&&(o.projection=t),el(),64!=(64&o.flags)&&function tP(n,t,e){pb(t[11],0,t,e,ob(n,e,t),lb(e.parent||t[6],e,t))}(i,r,o)}(1),We(),ir(2,"span",1)(3,"span",2)),2&e&&(Ve(2),qn("mat-button-ripple-round",r.isRoundButton||r.isIconButton),Xe("matRippleDisabled",r._isRippleDisabled())("matRippleCentered",r.isIconButton)("matRippleTrigger",r._getHostElement()))},dependencies:[mh],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),n})(),kH=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=jt({type:n}),n.\u0275inj=Lt({imports:[kM,$i,$i]}),n})();var OH=T(951),ly=T.n(OH);let BM=(()=>{class n{constructor(){this.seenKeys=new Set,this.attached=!1,this.keydownFirstTime=new Le,this.keydownHandlerVar=this.keydownHandler.bind(this),this.keyupHandlerVar=this.keyupHandler.bind(this)}attachListeners(){if(this.attached)throw new Error("already attached!");document.addEventListener("keydown",this.keydownHandlerVar),document.addEventListener("keyup",this.keyupHandlerVar),this.attached=!0}detachListeners(){document.removeEventListener("keydown",this.keydownHandlerVar),document.removeEventListener("keyup",this.keyupHandlerVar),this.seenKeys=new Set,this.attached=!1}keydownHandler(e){this.seenKeys.has(e.key)||(this.keydownFirstTime.next(e.key),this.seenKeys.add(e.key))}keyupHandler(e){this.seenKeys.delete(e.key)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})();class UM{}const Mo="*";function $M(n,t){return{type:7,name:n,definitions:t,options:{}}}function vh(n,t=null){return{type:4,styles:t,timings:n}}function yh(n,t=null){return{type:2,steps:n,options:t}}function Io(n){return{type:6,styles:n,offset:null}}function uy(n,t,e=null){return{type:1,expr:n,animation:t,options:e}}function dy(n,t,e=null){return{type:11,selector:n,animation:t,options:e}}function HM(n){Promise.resolve().then(n)}class bu{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){HM(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}}class zM{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,r=0,i=0;const o=this.players.length;0==o?HM(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++e==o&&this._onFinish()}),s.onDestroy(()=>{++r==o&&this._onDestroy()}),s.onStart(()=>{++i==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,e/r.totalTime):1;r.setPosition(i)})}getPosition(){const t=this.players.reduce((e,r)=>null===e||r.totalTime>e.totalTime?r:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}}const NH=$M("fadeAnimation",[uy("* => *",[dy(":enter",[Io({opacity:0})],{optional:!0}),yh([dy(":leave",[yh([vh("100ms",Io({opacity:0})),Io({position:"absolute",visibility:"hidden"})])],{optional:!0}),dy(":enter",[vh("100ms",Io({opacity:1}))],{optional:!0})])])]),LH=$M("myInsertRemoveTrigger",[uy(":leave",[vh("200ms",Io({opacity:0,fontSize:0}))]),uy(":enter",[Io({opacity:0}),vh("200ms",Io({opacity:1}))])]);function jH(n,t){if(1&n&&(Ge(0,"div",11),St(1),We()),2&n){const e=t.$implicit,r=Gn();Qg("transform","translate("+e.x+"px, "+e.y+"px"),qn("draggable",!r.readonly)("last-clicked",e.lastClicked)("invalid",e.invalid),Xe("@myInsertRemoveTrigger",void 0),In("data-id",e.id),Ve(1),Zo(e.letter)}}function VH(n,t){1&n&&ir(0,"div",12),2&n&&In("data-id",t.$implicit)}function BH(n,t){1&n&&ir(0,"div",12),2&n&&In("data-id",t.$implicit)}const hy=os("board");let $H=(()=>{class n{constructor(e,r){this.gameService=e,this.keyboardEventsService=r,this.readonly=!1,this.GRID_SIZE=22,this.topDropzones=Array(484).fill(null).map((i,o)=>o),this.bottomDropzones=Array(44).fill(null).map((i,o)=>484+o),this.borderSize=3,this.dropIndexHasTile=new Array(528).fill(!1),this.interactables=[],this.subs=[],this.gameServiceState=e.state,this.clickHander=this.clickEventListener.bind(this),this.gameServiceGameId=e.state.gameId}ngOnInit(){let e=this.boardState.squares.filter(r=>r.lastClicked);e.length&&(this.lastSquare=e[0]);for(let r=1;r<e.length;++r)e[r].lastClicked=!1;for(let r of this.boardState.squares)this.setDropIndexHasTile(r.dropIndex,!0)}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe()),this.interactables.forEach(e=>e.unset()),document.removeEventListener("click",this.clickHander),this.keyboardEventsService.detachListeners()}get boardState(){return this.playerModel.boardState}ngAfterViewInit(){this.playerModel.id===this.gameServiceState.myPlayer.id&&(this.keyboardEventsService.attachListeners(),this.unloadQueue(),this.subs=[this.gameService.letter$.subject.subscribe(()=>{this.unloadQueue()}),this.keyboardEventsService.keydownFirstTime.subscribe(e=>{this.moveAllSquares(e)})],this.interactables=[ly()(".draggable:not(.destroyed)").draggable({onend:e=>{const r=e.target;if(r.className.includes("ng-animating"))return;const i=this.boardState.getSquareFromEl(r);this.dropIndexHasTile[i.dropIndex]?(hy.info("unlikely event - an incoming square from another peel has taken the square the tile was being dropped on"),this.dropSquareInNearestDropzone(i)):this.setCoordsBasedOnDropIndex(i,i.dropIndex),this.gameService.updateAfterDrop()},onmove:e=>{if(e.target.className.includes("ng-animating"))return;const r=this.boardState.getSquareFromEl(e.target),o=document.getElementById("board").getBoundingClientRect();this.setElementCoords(r,e.clientX-o.left-12.5,e.clientY-o.top-12.5)}}).on("down",e=>{const i=this.boardState.getSquareFromEl(e.target);this.updateLastSquare(i)}),ly()(".dropzone.droppable").dropzone({overlap:.25,ondragenter:e=>{const i=this.boardState.getSquareFromEl(e.relatedTarget);this.setDropIndexHasTile(i.dropIndex,!1);const s=parseInt(e.target.getAttribute("data-id"));this.dropIndexHasTile[s]||(i.dropIndex=s,e.target.classList.add("drop-target"))},ondragleave:function(e){e.target.classList.remove("drop-target")},ondropdeactivate:function(e){e.target.classList.remove("drop-target")},ondrop:e=>{}})],document.addEventListener("click",this.clickHander))}claimSuccess(){this.gameService.claimSuccess()}dump(){if(!this.lastSquare)return;const e=this.lastSquare;document.querySelector(`.square[data-id='${e.id}']`).classList.add("destroyed"),this.setDropIndexHasTile(e.dropIndex,!1),this.gameService.dump(e),this.updateLastSquare(null),this.gameService.updateAfterDrop()}setDropIndexHasTile(e,r){this.dropIndexHasTile[e]=r}clickEventListener(e){const r=e.target;null!=r&&r.classList.contains("draggable")||this.updateLastSquare(null)}unloadQueue(){if(this.gameServiceGameId!==this.gameServiceState.gameId)return void hy.warn(`gameid: ${this.gameServiceGameId} does not match game service id ${this.gameServiceState.gameId}`);const e=[];for(;this.gameService.letter$.getLength()>0;)e.push(this.gameService.letter$.pop());for(const r of e)this.createSquareAndDropInDropzone(r)}createSquareAndDropInDropzone(e){const i=this.boardState.createNewSquare();i.letter=e,this.dropSquareInNearestDropzone(i)}dropSquareInNearestDropzone(e){(()=>{for(let i=0;i<44;++i)if(this.tryDropInDropzone(e,484+i))return;for(let i=483;i>=0;--i)if(this.tryDropInDropzone(e,i))return})(),this.gameService.updateAfterDrop()}tryDropInDropzone(e,r){return!this.dropIndexHasTile[r]&&(this.setCoordsBasedOnDropIndex(e,r),!0)}setCoordsBasedOnDropIndex(e,r){this.dropIndexHasTile[r]&&hy.warn("dropping square on dropzone that already has a tile???");const i=document.querySelector(`.dropzone[data-id='${r}']`),o=ly().getElementRect(i),a=document.getElementById("board").getBoundingClientRect();this.setElementCoords(e,o.left-a.left-window.scrollX-this.borderSize,o.top-a.top-window.scrollY-this.borderSize),e.dropIndex=r,this.setDropIndexHasTile(e.dropIndex,!0)}setElementCoords(e,r,i){e.x=r,e.y=i}updateLastSquare(e){this.lastSquare&&(this.lastSquare.lastClicked=!1),this.lastSquare=e,this.lastSquare&&(this.lastSquare.lastClicked=!0)}moveAllSquares(e){const r=this.gameService.moveAllSquares(e);if(r.shouldMove){for(let i=0;i<r.squaresInPlay.length;++i){const o=r.squaresInPlay[i],s=r.movedIds[i];o.dropIndex!==s&&(this.setDropIndexHasTile(o.dropIndex,!1),this.setCoordsBasedOnDropIndex(o,s))}this.gameService.updateAfterDrop()}}}return n.\u0275fac=function(e){return new(e||n)(V(ca),V(BM))},n.\u0275cmp=yn({type:n,selectors:[["app-board"]],inputs:{playerModel:"playerModel",readonly:"readonly"},features:[$t([BM])],decls:18,vars:7,consts:[[2,"margin","auto","width","100%"],["id","board",2,"margin","auto","position","relative"],[1,"dropzoneHelper"],["class","square",3,"draggable","last-clicked","invalid","transform",4,"ngFor","ngForOf"],["id","topArea"],["class","dropzone droppable",4,"ngFor","ngForOf"],["id","startArea"],["id","startAreaDescriptions"],[1,"win",3,"disabled","click"],["color","primary",1,"dump",3,"disabled","click"],[2,"font-size","15px","margin-left","5px","float","right"],[1,"square"],[1,"dropzone","droppable"]],template:function(e,r){1&e&&(Ge(0,"div",0)(1,"div",1)(2,"div",2),Ln(3,jH,2,11,"div",3),Ge(4,"div",4),Ln(5,VH,1,1,"div",5),We(),Ge(6,"div",6)(7,"div")(8,"div",7)(9,"p"),St(10),We()(),Ge(11,"button",8),Bt("click",function(){return r.claimSuccess()}),St(12),We(),Ge(13,"button",9),Bt("click",function(){return r.dump()}),St(14,"dump"),We(),Ge(15,"span",10),St(16,"use mouse + arrow keys to move your tiles"),We()(),Ln(17,BH,1,1,"div",5),We()()()()),2&e&&(Ve(3),Xe("ngForOf",r.boardState.squares),Ve(2),Xe("ngForOf",r.topDropzones),Ve(5),po("tiles remaining: ",r.gameServiceState.tilesRemaining,""),Ve(1),Xe("disabled",!r.gameServiceState.canClaimSuccess||r.readonly),Ve(1),Zo(r.gameServiceState.nextPeelWins?"win?":"peel"),Ve(1),Xe("disabled",!r.gameServiceState.canDump||!r.lastSquare||r.playerModel.isEliminated||r.readonly),Ve(4),Xe("ngForOf",r.bottomDropzones))},dependencies:[$l],styles:[".square[_ngcontent-%COMP%]{background-color:#efe1ca;left:0;top:0;position:absolute;z-index:500;box-sizing:border-box;-webkit-user-select:none;user-select:none;width:25px;height:25px;line-height:25px;border:1px solid;border-radius:0;text-align:center;margin:0;padding:0;display:inline-block;font-size:20px}.square.draggable[_ngcontent-%COMP%]{cursor:pointer!important}.square.last-clicked[_ngcontent-%COMP%]{background:orange;z-index:50000}.square.invalid[_ngcontent-%COMP%]{background:red}.square.destroyed[_ngcontent-%COMP%]{pointer-events:none}#board[_ngcontent-%COMP%]{width:538px;font-size:0;border:3px solid black;background:black}#topArea[_ngcontent-%COMP%], #startArea[_ngcontent-%COMP%]{padding:5px}#topArea[_ngcontent-%COMP%]{background-color:brown}#startArea[_ngcontent-%COMP%]{background-color:gray;margin-top:0}#startArea[_ngcontent-%COMP%]   .mat-button-base[_ngcontent-%COMP%]{padding:0}#startArea[_ngcontent-%COMP%]   .mat-button-base[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{line-height:1.2em!important;background:red!important}.dropzoneHelper[_ngcontent-%COMP%]{font-size:0}.row[_ngcontent-%COMP%]{height:25px}.row[_ngcontent-%COMP%], .dropzone[_ngcontent-%COMP%]{margin:0;padding:0;display:inline-block}.pad-5[_ngcontent-%COMP%]{padding:5px}.dropzone[_ngcontent-%COMP%]{width:24px;height:24px}.drop-target[_ngcontent-%COMP%]{background-color:#29e;opacity:.6}[_ngcontent-%COMP%]:export{boardSize:22;startAreaRows:2}button.win[_ngcontent-%COMP%], button.dump[_ngcontent-%COMP%]{display:inline-block}#startAreaDescriptions[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#000;margin:0;display:inline-block;font-size:15px}"],data:{animation:[LH]}}),n})();function HH(n,t){if(1&n&&(Ge(0,"p"),St(1),We()),2&n){const e=Gn().$implicit;Ve(1),Ud("",e.tilesUsed," / ",e.totalTiles,"")}}function zH(n,t){1&n&&(Ge(0,"p"),St(1,":("),We())}function GH(n,t){if(1&n){const e=jd();Ge(0,"button",5),Bt("click",function(){const o=Va(e).$implicit;return mr(Gn(2).selectPlayer(o))}),St(1),Ln(2,HH,2,2,"p",1),Ln(3,zH,2,0,"p",1),We()}if(2&n){const e=t.$implicit,r=Gn(2);qn("disconnected",e.disconnected)("active",(null==r.activePlayer?null:r.activePlayer.id)===e.id),Ve(1),Xg(" ",e.name,"",e.id===r.hostId?"(host)":"","",e.id===r.myId?"(you)":"","",e.isSpectator?"(S)":""," "),Ve(1),Xe("ngIf",!e.isEliminated),Ve(1),Xe("ngIf",e.isEliminated)}}function qH(n,t){if(1&n&&(Ge(0,"p"),St(1),We()),2&n){const e=Gn(2);Ve(1),po("",e.winner.name," wins!")}}function WH(n,t){if(1&n){const e=jd();Ge(0,"div"),Ln(1,GH,4,10,"button",3),Ln(2,qH,2,1,"p",1),Ge(3,"button",4),Bt("click",function(){return Va(e),mr(Gn().returnToLobby())}),St(4,"Return to lobby"),We()()}if(2&n){const e=Gn();Ve(1),Xe("ngForOf",e.gameServiceState.players),Ve(1),Xe("ngIf",e.winner),Ve(1),Xe("disabled",!e.isHost)}}function KH(n,t){if(1&n&&ir(0,"app-board",8),2&n){const e=Gn().$implicit,r=Gn();Xe("playerModel",e)("readonly",e.id!==r.myId||null!==r.gameServiceState.winnerId||e.isEliminated||e.disconnected||e.isSpectator)}}function YH(n,t){if(1&n&&(Ge(0,"div",6),Ln(1,KH,1,2,"app-board",7),We()),2&n){const e=t.$implicit,r=Gn();fC("board-"+e.id),Ve(1),Xe("ngIf",e.id===(null==r.activePlayer?null:r.activePlayer.id))}}let GM=(()=>{class n{constructor(e,r,i,o,s){this.gameService=e,this.peerToPeerService=r,this.gameHostService=i,this.invalidSquareService=o,this.ngZone=s,this.isHost=!1,this.isMobile=!1,this.animation=new i$(this.ngZone)}ngOnInit(){this.isHost=this.peerToPeerService.getIsHost(),this.activePlayer=this.gameService.getOrCreateMyPlayer(),this.myId=this.gameService.getOrCreateMyPlayer().id,this.hostId=this.peerToPeerService.getHostId(),this.gameServiceState=this.gameService.state,this.subs=[this.gameService.winner$.subscribe(()=>{this.winner=this.gameService.getPlayerById(this.gameServiceState.winnerId),this.setActivePlayer(this.winner,!0)}),this.gameService.loser$.subscribe(()=>{let e=this.gameService.getOrCreateMyPlayer().boardState.squares;this.gameService.getOrCreateMyPlayer().isEliminated=!0,this.invalidSquareService.getInvalidSquares(e).forEach(i=>{i.invalid=!0}),this.gameService.updateAfterDrop()})]}ngAfterViewInit(){}ngOnDestroy(){this.destroyAnimation(),this.subs.forEach(e=>e.unsubscribe())}selectPlayer(e){this.setActivePlayer(e)}returnToLobby(){this.gameHostService.returnToLobby()}setActivePlayer(e,r=!1){var i,o;let s=!1;e.id===(null===(i=this.activePlayer)||void 0===i?void 0:i.id)||(this.activePlayer=e,s=!0);const a=this.activePlayer.id===(null===(o=this.winner)||void 0===o?void 0:o.id);(s||r)&&a&&this.activePlayer.id===this.myId?this.playAnimation():s&&this.destroyAnimation()}playAnimation(){const e=document.getElementsByClassName("board-"+this.winner.id)[0];this.ngZone.runOutsideAngular(()=>this.animation.runAnimation(e))}destroyAnimation(){this.animation.stopAnimation()}}return n.\u0275fac=function(e){return new(e||n)(V(ca),V(ss),V(dh),V(iM),V(Ut))},n.\u0275cmp=yn({type:n,selectors:[["app-board-container"]],decls:3,vars:2,consts:[[2,"display","flex"],[4,"ngIf"],["style","position: relative",3,"class",4,"ngFor","ngForOf"],["mat-button","","class","playerBox",3,"disconnected","active","click",4,"ngFor","ngForOf"],["mat-stroked-button","","color","primary",1,"big-button",2,"margin-top","50px",3,"disabled","click"],["mat-button","",1,"playerBox",3,"click"],[2,"position","relative"],[3,"playerModel","readonly",4,"ngIf"],[3,"playerModel","readonly"]],template:function(e,r){1&e&&(Ge(0,"div",0),Ln(1,WH,5,3,"div",1),Ln(2,YH,2,3,"div",2),We()),2&e&&(Ve(1),Xe("ngIf",!r.isMobile),Ve(1),Xe("ngForOf",r.gameServiceState.players))},dependencies:[$l,bf,_u,$H],styles:["p[_ngcontent-%COMP%]{margin:0;padding:0}button[_ngcontent-%COMP%]{display:block;width:100%}.disconnected[_ngcontent-%COMP%]{color:gray}.playerBox[_ngcontent-%COMP%]{padding:0;line-height:1.2em;background:rgba(255,255,255,.2)}.playerBox.active[_ngcontent-%COMP%]{background:orange}.playerBox[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#000;margin-block-start:0;margin-block-end:0}"]}),n})(),QH=(()=>{class n{constructor(e){this.gameService=e}}return n.\u0275fac=function(e){return new(e||n)(V(ca))},n.\u0275cmp=yn({type:n,selectors:[["app-game"]],decls:1,vars:0,template:function(e,r){1&e&&ir(0,"app-board-container")},dependencies:[GM]}),n})();const qM=os("param-override");let WM=(()=>{class n{constructor(e){this.initialTilesProviderService=e}setupOverrides(e){null!=e&&e.tiles&&(qM.info("tiles override applied"),this.initialTilesProviderService.initialTilesOverride=null==e?void 0:e.tiles.split("")),null!=e&&e.numTiles&&(qM.info("numTiles override applied"),this.initialTilesProviderService.numTilesPerPlayerOverride=e.numTiles)}}return n.\u0275fac=function(e){return new(e||n)(Q(aM))},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),JH=(()=>{class n{constructor(e,r,i,o,s,a,c){this.gameHostService=e,this.gameService=r,this.peerToPeerService=i,this.navigationService=o,this.activatedRoute=s,this.paramOverrideService=a,this.baseHref=c,this.loading=!1,this.url=`${window.location.href}join/00000`}ngOnInit(){this.gameHostService.dispose(),this.gameService.dispose(),this.peerToPeerService.dispose(),this.paramOverrideService.setupOverrides(this.activatedRoute.snapshot.queryParams)}createGame(){var e=this;return So(function*(){e.loading=!0;try{yield e.gameHostService.createGame(),e.navigationService.gotoLobby()}finally{e.loading=!1}})()}}return n.\u0275fac=function(e){return new(e||n)(V(dh),V(ca),V(ss),V(ny),V(Li),V(WM),V(Xs))},n.\u0275cmp=yn({type:n,selectors:[["app-home"]],decls:12,vars:4,consts:[[1,"container"],["mat-raised-button","",1,"block-button",3,"disabled","click"],["target","_blank","href","https://bananagrams.com/products/bananagrams"],["_target","_blank",3,"href"]],template:function(e,r){1&e&&(Ge(0,"div",0)(1,"button",1),Bt("click",function(){return r.createGame()}),St(2),We(),Ge(3,"p"),St(4,"Play "),Ge(5,"a",2),St(6,"bananagrams"),We(),St(7," online with your friends or against the clock, and be the one who finishes their stack first!"),We(),Ge(8,"p"),St(9,"To join a game, open the join link, e.g. "),Ge(10,"a",3),St(11),We()()()),2&e&&(Ve(1),Xe("disabled",r.loading),Ve(1),po(" ",r.loading?"Creating...":"Create game",""),Ve(8),Xe("href",r.url,ec),Ve(1),Zo(r.url))},dependencies:[_u],styles:[".container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}"]}),n})();function ZH(n,t){1&n&&(Ge(0,"div"),ir(1,"div",3),We())}function XH(n,t){if(1&n){const e=jd();Ge(0,"div")(1,"p"),St(2),We(),Ge(3,"button",4),Bt("click",function(){return Va(e),mr(Gn().tryConnect())}),St(4,"Try again"),We()()}if(2&n){const e=Gn();Ve(2),Zo(e.error)}}let e3=(()=>{class n{constructor(e,r,i,o){this.peerToPeerService=e,this.activatedRoute=r,this.router=i,this.baseHref=o,this.error=null}ngOnInit(){var e=this;return So(function*(){yield e.tryConnect()})()}tryConnect(){var e=this;return So(function*(){e.error=null;try{(!e.peerToPeerService.getIsConnected()||!e.peerToPeerService.getIsHost())&&(yield e.peerToPeerService.setupByConnectingToId(e.activatedRoute.snapshot.params.id)),e.router.navigate([kr.LOBBY+"/"+e.peerToPeerService.getHostId()])}catch(r){e.error=r}})()}}return n.\u0275fac=function(e){return new(e||n)(V(ss),V(Li),V(gn),V(Xs))},n.\u0275cmp=yn({type:n,selectors:[["app-join"]],decls:5,vars:2,consts:[[1,"container"],[2,"text-align","center","font-size","26px"],[4,"ngIf"],[1,"loader"],["mat-raised-button","",1,"block-button",3,"click"]],template:function(e,r){1&e&&(Ge(0,"div",0)(1,"p",1),St(2,"Joining game..."),We(),Ln(3,ZH,2,0,"div",2),Ln(4,XH,5,1,"div",2),We()),2&e&&(Ve(3),Xe("ngIf",!r.error),Ve(1),Xe("ngIf",r.error))},dependencies:[bf,_u],styles:[".loader[_ngcontent-%COMP%]{border:15px solid #f3f3f3;border-top:15px solid #555;border-radius:50%;width:150px;height:150px;animation:spin 1s linear infinite;margin:auto}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:0}"]}),n})();function _h(n,t){return new ae(e=>{const r=n.length;if(0===r)return void e.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const c=Wt(n[a]);let d=!1;e.add(c.subscribe({next:p=>{d||(d=!0,s++),i[a]=p},error:p=>e.error(p),complete:()=>{o++,(o===r||!d)&&(s===r&&e.next(t?t.reduce((p,g,_)=>(p[g]=i[_],p),{}):i),e.complete())}}))}})}let YM=(()=>{class n{constructor(e,r){this._renderer=e,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(e,r){this._renderer.setProperty(this._elementRef.nativeElement,e,r)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return n.\u0275fac=function(e){return new(e||n)(V(lo),V(fn))},n.\u0275dir=Ie({type:n}),n})(),da=(()=>{class n extends YM{}return n.\u0275fac=function(){let t;return function(r){return(t||(t=Nn(n)))(r||n)}}(),n.\u0275dir=Ie({type:n,features:[lt]}),n})();const Hi=new ve("NgValueAccessor"),n3={provide:Hi,useExisting:Pt(()=>bh),multi:!0},i3=new ve("CompositionEventMode");let bh=(()=>{class n extends YM{constructor(e,r,i){super(e,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function r3(){const n=Fi()?Fi().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return n.\u0275fac=function(e){return new(e||n)(V(lo),V(fn),V(i3,8))},n.\u0275dir=Ie({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,r){1&e&&Bt("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[$t([n3]),lt]}),n})();const Yn=new ve("NgValidators"),ls=new ve("NgAsyncValidators");function Ch(n){return null}function sI(n){return null!=n}function aI(n){return Tl(n)?Wt(n):n}function cI(n){let t={};return n.forEach(e=>{t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function lI(n,t){return t.map(e=>e(n))}function uI(n){return n.map(t=>function a3(n){return!n.validate}(t)?t:e=>t.validate(e))}function py(n){return null!=n?function dI(n){if(!n)return null;const t=n.filter(sI);return 0==t.length?null:function(e){return cI(lI(e,t))}}(uI(n)):null}function fI(n){if(!n)return null;const t=n.filter(sI);return 0==t.length?null:function(e){return function KM(...n){if(1===n.length){const t=n[0];if(Ce(t))return _h(t,null);if(he(t)&&Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);return _h(e.map(r=>t[r]),e)}}if("function"==typeof n[n.length-1]){const t=n.pop();return _h(n=1===n.length&&Ce(n[0])?n[0]:n,null).pipe(Ae(e=>t(...e)))}return _h(n,null)}(lI(e,t).map(aI)).pipe(Ae(cI))}}function gy(n){return null!=n?fI(uI(n)):null}function hI(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function my(n){return n?Array.isArray(n)?n:[n]:[]}function Eh(n,t){return Array.isArray(n)?n.includes(t):n===t}function mI(n,t){const e=my(t);return my(n).forEach(i=>{Eh(e,i)||e.push(i)}),e}function vI(n,t){return my(t).filter(e=>!Eh(n,e))}class yI{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=py(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=gy(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class us extends yI{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class lr extends yI{get formDirective(){return null}get path(){return null}}let bI=(()=>{class n extends class _I{constructor(t){this._cd=t}get isTouched(){var t,e;return!(null===(e=null===(t=this._cd)||void 0===t?void 0:t.control)||void 0===e||!e.touched)}get isUntouched(){var t,e;return!(null===(e=null===(t=this._cd)||void 0===t?void 0:t.control)||void 0===e||!e.untouched)}get isPristine(){var t,e;return!(null===(e=null===(t=this._cd)||void 0===t?void 0:t.control)||void 0===e||!e.pristine)}get isDirty(){var t,e;return!(null===(e=null===(t=this._cd)||void 0===t?void 0:t.control)||void 0===e||!e.dirty)}get isValid(){var t,e;return!(null===(e=null===(t=this._cd)||void 0===t?void 0:t.control)||void 0===e||!e.valid)}get isInvalid(){var t,e;return!(null===(e=null===(t=this._cd)||void 0===t?void 0:t.control)||void 0===e||!e.invalid)}get isPending(){var t,e;return!(null===(e=null===(t=this._cd)||void 0===t?void 0:t.control)||void 0===e||!e.pending)}get isSubmitted(){var t;return!(null===(t=this._cd)||void 0===t||!t.submitted)}}{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(V(us,2))},n.\u0275dir=Ie({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,r){2&e&&qn("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[lt]}),n})();const Cu="VALID",Dh="INVALID",jc="PENDING",Eu="DISABLED";function EI(n){return Array.isArray(n)?py(n):n||null}function SI(n){return Array.isArray(n)?gy(n):n||null}function wh(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function Su(n,t){var e,r;(function Sy(n,t){const e=function pI(n){return n._rawValidators}(n);null!==t.validator?n.setValidators(hI(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const r=function gI(n){return n._rawAsyncValidators}(n);null!==t.asyncValidator?n.setAsyncValidators(hI(r,t.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();Ih(t._rawValidators,i),Ih(t._rawAsyncValidators,i)})(n,t),t.valueAccessor.writeValue(n.value),n.disabled&&(null===(r=(e=t.valueAccessor).setDisabledState)||void 0===r||r.call(e,!0)),function v3(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&MI(n,t)})}(n,t),function _3(n,t){const e=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function y3(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&MI(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function m3(n,t){if(t.valueAccessor.setDisabledState){const e=r=>{t.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function Ih(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function MI(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function PI(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}function RI(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const M3={provide:us,useExisting:Pt(()=>My)},NI=(()=>Promise.resolve())();let My=(()=>{class n extends us{constructor(e,r,i,o,s){super(),this._changeDetectorRef=s,this.control=new class extends class TI{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=EI(this._rawValidators),this._composedAsyncValidatorFn=SI(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Cu}get invalid(){return this.status===Dh}get pending(){return this.status==jc}get disabled(){return this.status===Eu}get enabled(){return this.status!==Eu}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=EI(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=SI(t)}addValidators(t){this.setValidators(mI(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(mI(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(vI(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(vI(t,this._rawAsyncValidators))}hasValidator(t){return Eh(this._rawValidators,t)}hasAsyncValidator(t){return Eh(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=jc,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Eu,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Cu,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Cu||this.status===jc)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Eu:Cu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=jc,this._hasOwnPendingAsyncValidator=!0;const e=aI(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((r,i)=>r&&r._find(i),this)}getError(t,e){const r=e?this.get(e):this;return r&&r.errors?r.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new Qt,this.statusChanges=new Qt}_calculateStatus(){return this._allControlsDisabled()?Eu:this.errors?Dh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(jc)?jc:this._anyControlsHaveStatus(Dh)?Dh:Cu}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){wh(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}}{constructor(t=null,e,r){super(function by(n){return(wh(n)?n.validators:n)||null}(e),function Cy(n,t){return(wh(t)?t.asyncValidators:n)||null}(r,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),wh(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=RI(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){PI(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){PI(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){RI(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},this._registered=!1,this.update=new Qt,this._parent=e,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function wy(n,t){if(!t)return null;let e,r,i;return Array.isArray(t),t.forEach(o=>{o.constructor===bh?e=o:function E3(n){return Object.getPrototypeOf(n.constructor)===da}(o)?r=o:i=o}),i||r||e||null}(0,o)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const r=e.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),function Dy(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Su(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){NI.then(()=>{var r;this.control.setValue(e,{emitViewToModelChange:!1}),null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()})}_updateDisabled(e){const r=e.isDisabled.currentValue,i=0!==r&&function vo(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}(r);NI.then(()=>{var o;i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),null===(o=this._changeDetectorRef)||void 0===o||o.markForCheck()})}_getPath(e){return this._parent?function Th(n,t){return[...t.path,n]}(e,this._parent):[e]}}return n.\u0275fac=function(e){return new(e||n)(V(lr,9),V(Yn,10),V(ls,10),V(Hi,10),V(Sc,8))},n.\u0275dir=Ie({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[$t([M3]),lt,On]}),n})(),jI=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=jt({type:n}),n.\u0275inj=Lt({}),n})();let fa=(()=>{class n{constructor(){this._validator=Ch}ngOnChanges(e){if(this.inputName in e){const r=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Ch,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return null!=e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=Ie({type:n,features:[On]}),n})();const Q3={provide:Yn,useExisting:Pt(()=>Oy),multi:!0};let Oy=(()=>{class n extends fa{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=e=>function WI(n){return"number"==typeof n?n:parseInt(n,10)}(e),this.createValidator=e=>function iI(n){return t=>function JM(n){return null!=n&&"number"==typeof n.length}(t.value)&&t.value.length>n?{maxlength:{requiredLength:n,actualLength:t.value.length}}:null}(e)}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=Nn(n)))(r||n)}}(),n.\u0275dir=Ie({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(e,r){2&e&&In("maxlength",r._enabled?r.maxlength:null)},inputs:{maxlength:"maxlength"},features:[$t([Q3]),lt]}),n})(),Z3=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=jt({type:n}),n.\u0275inj=Lt({imports:[jI]}),n})(),X3=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=jt({type:n}),n.\u0275inj=Lt({imports:[Z3]}),n})();function tz(n,t){if(1&n&&(Ge(0,"li"),St(1),We()),2&n){const e=t.$implicit,r=Gn();qn("strikethrough",e.disconnected),Ve(1),Zg(" ",e.name,"",e.id===r.hostId?"(host)":"","",e.id===(null==r.gameServiceState.myPlayer?null:r.gameServiceState.myPlayer.id)?"(you)":""," ")}}let nz=(()=>{class n{constructor(e,r,i,o,s){this.gameService=e,this.peerToPeerService=r,this.gameHostService=i,this.navigationService=o,this.baseHref=s,this.rejoining=!1,this.copied=!1}ngOnInit(){var e=this;return So(function*(){e.isHost=e.peerToPeerService.getIsHost(),e.hostId=e.peerToPeerService.getHostId(),e.gameServiceState=e.gameService.state,e.gameService.initFromPeerToPeer(),e.subs=[e.gameService.gameStart$.subscribe(r=>e.gotoGame())],e.name="guest"+(1e3*Math.random()).toFixed(0).padStart(4,"0"),e.setName(null)})()}gotoGame(){this.navigationService.gotoGame()}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe)}setName(e){this.gameService.updatePlayer(this.name)}startGame(){this.gameHostService.startGame()}rejoin(){this.rejoining=!0,setTimeout(()=>this.rejoining=!1,500),this.setIsSpectatorAndGotoGame(!1)}joinAsSpectator(){this.setIsSpectatorAndGotoGame(!0)}copyJoinLink(){navigator.clipboard.writeText(window.location.href),this.copied=!0,setTimeout(()=>this.copied=!1,2e3)}setIsSpectatorAndGotoGame(e){this.gameService.getOrCreateMyPlayer().isSpectator=e,this.gameService.sendPlayerUpdateMessage(this.gameService.getOrCreateMyPlayer()),this.gameServiceState.inGame&&this.gotoGame()}}return n.\u0275fac=function(e){return new(e||n)(V(ca),V(ss),V(dh),V(ny),V(Xs))},n.\u0275cmp=yn({type:n,selectors:[["app-lobby"]],decls:18,vars:11,consts:[[1,"container"],[1,"banana-img","mat-elevation-z2",3,"src"],[3,"strikethrough",4,"ngFor","ngForOf"],[1,"name-div"],["type","text","maxlength","32",3,"ngModel","ngModelChange","keydown.enter"],["mat-stroked-button","","color","primary",1,"big-button",2,"display","inline-block",3,"disabled","click"],["mat-stroked-button","","color","primary",1,"block-button",3,"disabled","click"],["mat-raised-button","",1,"block-button",3,"disabled","click"]],template:function(e,r){1&e&&(Ge(0,"div",0),ir(1,"img",1),Ge(2,"p"),St(3),We(),Ge(4,"ul"),Ln(5,tz,2,5,"li",2),We(),Ge(6,"div",3)(7,"input",4),Bt("ngModelChange",function(o){return r.name=o})("keydown.enter",function(o){return r.setName(o)}),We(),Ge(8,"button",5),Bt("click",function(o){return r.setName(o)}),St(9,"Set name"),We()(),Ge(10,"button",6),Bt("click",function(){return r.copyJoinLink()}),St(11),We(),Ge(12,"button",6),Bt("click",function(){return r.rejoin()}),St(13,"Rejoin"),We(),Ge(14,"button",6),Bt("click",function(){return r.joinAsSpectator()}),St(15,"Spectate"),We(),Ge(16,"button",7),Bt("click",function(){return r.startGame()}),St(17,"Start game"),We()()),2&e&&(Ve(1),Vd("src","",r.baseHref,"assets/banana.jpeg",ec),Ve(2),Ud("",r.gameServiceState.players.length," players. ",r.gameServiceState.totalPeerCount," in room."),Ve(2),Xe("ngForOf",r.gameServiceState.players),Ve(2),Xe("ngModel",r.name),Ve(1),Xe("disabled",!r.name||0===r.gameServiceState.totalPeerCount||r.rejoining),Ve(2),Xe("disabled",r.copied),Ve(1),Zo(r.copied?"Copied!":"Copy join link"),Ve(1),Xe("disabled",r.isHost||r.rejoining||!r.gameServiceState.inGame),Ve(2),Xe("disabled",r.isHost||r.rejoining||!r.gameServiceState.inGame),Ve(2),Xe("disabled",!r.isHost||null===r.gameServiceState.myPlayer))},dependencies:[$l,bh,bI,Oy,My,_u],styles:[".strikethrough[_ngcontent-%COMP%]{text-decoration:line-through}button[_ngcontent-%COMP%]{margin-top:1em}button.block-button[_ngcontent-%COMP%]{width:100%}input[_ngcontent-%COMP%]{line-height:2.5em;width:200px;display:flex;flex:1 1 auto}div.name-div[_ngcontent-%COMP%]{display:flex}div.name-div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:0}div.container[_ngcontent-%COMP%]{display:block}li[_ngcontent-%COMP%]{color:var(--text-color)}"]}),n})(),rz=(()=>{class n{constructor(e,r,i,o){this.gameService=e,this.gameHostService=r,this.activatedRoute=i,this.paramOverrideService=o}ngOnInit(){this.paramOverrideService.setupOverrides(this.activatedRoute.snapshot.queryParams),this.gameService.initFromPeerToPeer(),this.gameService.updatePlayer("abc"),this.gameHostService.startGame()}}return n.\u0275fac=function(e){return new(e||n)(V(ca),V(dh),V(Li),V(WM))},n.\u0275cmp=yn({type:n,selectors:[["app-local"]],decls:1,vars:0,template:function(e,r){1&e&&ir(0,"app-board-container")},dependencies:[GM]}),n})();const iz=[{path:kr.HOME,component:JH},{path:kr.LOCAL,component:rz},{path:kr.JOIN+"/:id",component:e3},{path:kr.LOBBY+"/:id",component:nz,canActivate:[UT]},{path:kr.GAME+"/:id",component:QH,canActivate:[UT]},{path:"**",redirectTo:kr.HOME}];let oz=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=jt({type:n}),n.\u0275inj=Lt({imports:[Iw.forRoot(iz),Iw]}),n})();let az=(()=>{class n{constructor(){}preloadImages(e){for(let r of e)(new Image).src=r}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function cz(n,t){if(1&n&&(Ge(0,"span",8),St(1),We()),2&n){const e=t.$implicit;Ve(1),Zo(e)}}let lz=(()=>{class n{constructor(e){this.imagePreloader=e,this.title="bananagrams",this.myTitle="BGRAMS".split(""),this.link="https://github.com/domsleee/bananagrams",this.version="1.0.5"}getRouterOutletState(e){return e.isActivated?e.activatedRoute:""}ngOnInit(){this.imagePreloader.preloadImages(["/assets/banana.jpeg"])}}return n.\u0275fac=function(e){return new(e||n)(V(az))},n.\u0275cmp=yn({type:n,selectors:[["app-root"]],decls:10,vars:4,consts:[[2,"max-width","800px","display","block","margin","auto","position","relative"],[1,"heading-container"],[2,"margin","auto","width","auto","margin-bottom","20px","margin-top","10px"],["href","/",1,"nostyle"],["class","square",4,"ngFor","ngForOf"],[3,"href"],[2,"position","relative"],["o","outlet"],[1,"square"]],template:function(e,r){if(1&e&&(Ge(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3),Ln(4,cz,2,1,"span",4),We(),Ge(5,"a",5),St(6),We()()(),Ge(7,"div",6),ir(8,"router-outlet",null,7),We()()),2&e){const i=function H0(n){return function $o(n,t){return n[t]}(function tl(){return $e.lFrame.contextLView}(),22+n)}(9);Ve(4),Xe("ngForOf",r.myTitle),Ve(1),Xe("href",r.link,ec),Ve(1),po("v",r.version,""),Ve(1),Xe("@fadeAnimation",r.getRouterOutletState(i))}},dependencies:[$l,bv],styles:["a.nostyle[_ngcontent-%COMP%]{color:inherit}.square[_ngcontent-%COMP%]{display:inline-block;background:orange;margin-right:5px;border:2px solid black;font-size:46px;background-color:#efe1ca;width:60px;height:60px;line-height:60px;text-align:center}.heading-container[_ngcontent-%COMP%]{width:100%;text-align:center;padding-bottom:15px}@media only screen and (max-width: 480px){.square[_ngcontent-%COMP%]{font-size:32px;width:40px;height:40px;line-height:40px;margin-right:2px;border:1px solid black}}[_nghost-%COMP%]     router-outlet+*{position:absolute;left:0;top:0;width:100%}"],data:{animation:[NH]}}),n})();function tA(n){return new Y(3e3,!1)}function zz(){return"undefined"!=typeof window&&void 0!==window.document}function Fy(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function ds(n){switch(n.length){case 0:return new bu;case 1:return n[0];default:return new zM(n)}}function nA(n,t,e,r,i=new Map,o=new Map){const s=[],a=[];let c=-1,d=null;if(r.forEach(p=>{const g=p.get("offset"),_=g==c,E=_&&d||new Map;p.forEach((D,F)=>{let H=F,K=D;if("offset"!==F)switch(H=t.normalizePropertyName(H,s),K){case"!":K=i.get(F);break;case Mo:K=o.get(F);break;default:K=t.normalizeStyleValue(F,H,K,s)}E.set(H,K)}),_||a.push(E),d=E,c=g}),s.length)throw function Rz(n){return new Y(3502,!1)}();return a}function Ny(n,t,e,r){switch(t){case"start":n.onStart(()=>r(e&&Ly(e,"start",n)));break;case"done":n.onDone(()=>r(e&&Ly(e,"done",n)));break;case"destroy":n.onDestroy(()=>r(e&&Ly(e,"destroy",n)))}}function Ly(n,t,e){const r=e.totalTime,o=jy(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,null==r?n.totalTime:r,!!e.disabled),s=n._data;return null!=s&&(o._data=s),o}function jy(n,t,e,r,i="",o=0,s){return{element:n,triggerName:t,fromState:e,toState:r,phaseName:i,totalTime:o,disabled:!!s}}function Or(n,t,e){let r=n.get(t);return r||n.set(t,r=e),r}function rA(n){const t=n.indexOf(":");return[n.substring(1,t),n.slice(t+1)]}let Vy=(n,t)=>!1,iA=(n,t,e)=>[],oA=null;function By(n){const t=n.parentNode||n.host;return t===oA?null:t}(Fy()||"undefined"!=typeof Element)&&(zz()?(oA=(()=>document.documentElement)(),Vy=(n,t)=>{for(;t;){if(t===n)return!0;t=By(t)}return!1}):Vy=(n,t)=>n.contains(t),iA=(n,t,e)=>{if(e)return Array.from(n.querySelectorAll(t));const r=n.querySelector(t);return r?[r]:[]});let ha=null,sA=!1;const aA=Vy,cA=iA;let lA=(()=>{class n{validateStyleProperty(e){return function qz(n){ha||(ha=function Wz(){return"undefined"!=typeof document?document.body:null}()||{},sA=!!ha.style&&"WebkitAppearance"in ha.style);let t=!0;return ha.style&&!function Gz(n){return"ebkit"==n.substring(1,6)}(n)&&(t=n in ha.style,!t&&sA&&(t="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in ha.style)),t}(e)}matchesElement(e,r){return!1}containsElement(e,r){return aA(e,r)}getParentElement(e){return By(e)}query(e,r,i){return cA(e,r,i)}computeStyle(e,r,i){return i||""}animate(e,r,i,o,s,a=[],c){return new bu(i,o)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})(),Uy=(()=>{class n{}return n.NOOP=new lA,n})();const $y="ng-enter",xh="ng-leave",Ph="ng-trigger",Rh=".ng-trigger",dA="ng-animating",Hy=".ng-animating";function Ao(n){if("number"==typeof n)return n;const t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:zy(parseFloat(t[1]),t[2])}function zy(n,t){return"s"===t?1e3*n:n}function kh(n,t,e){return n.hasOwnProperty("duration")?n:function Qz(n,t,e){let i,o=0,s="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return t.push(tA()),{duration:0,delay:0,easing:""};i=zy(parseFloat(a[1]),a[2]);const c=a[3];null!=c&&(o=zy(parseFloat(c),a[4]));const d=a[5];d&&(s=d)}else i=n;if(!e){let a=!1,c=t.length;i<0&&(t.push(function uz(){return new Y(3100,!1)}()),a=!0),o<0&&(t.push(function dz(){return new Y(3101,!1)}()),a=!0),a&&t.splice(c,0,tA())}return{duration:i,delay:o,easing:s}}(n,t,e)}function wu(n,t={}){return Object.keys(n).forEach(e=>{t[e]=n[e]}),t}function fA(n){const t=new Map;return Object.keys(n).forEach(e=>{t.set(e,n[e])}),t}function fs(n,t=new Map,e){if(e)for(let[r,i]of e)t.set(r,i);for(let[r,i]of n)t.set(r,i);return t}function pA(n,t,e){return e?t+":"+e+";":""}function gA(n){let t="";for(let e=0;e<n.style.length;e++){const r=n.style.item(e);t+=pA(0,r,n.style.getPropertyValue(r))}for(const e in n.style)n.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=pA(0,e8(e),n.style[e]));n.setAttribute("style",t)}function zi(n,t,e){n.style&&(t.forEach((r,i)=>{const o=qy(i);e&&!e.has(i)&&e.set(i,n.style[o]),n.style[o]=r}),Fy()&&gA(n))}function pa(n,t){n.style&&(t.forEach((e,r)=>{const i=qy(r);n.style[i]=""}),Fy()&&gA(n))}function Tu(n){return Array.isArray(n)?1==n.length?n[0]:yh(n):n}const Gy=new RegExp("{{\\s*(.+?)\\s*}}","g");function mA(n){let t=[];if("string"==typeof n){let e;for(;e=Gy.exec(n);)t.push(e[1]);Gy.lastIndex=0}return t}function Mu(n,t,e){const r=n.toString(),i=r.replace(Gy,(o,s)=>{let a=t[s];return null==a&&(e.push(function hz(n){return new Y(3003,!1)}()),a=""),a.toString()});return i==r?n:i}function Oh(n){const t=[];let e=n.next();for(;!e.done;)t.push(e.value),e=n.next();return t}const Xz=/-+([a-z0-9])/g;function qy(n){return n.replace(Xz,(...t)=>t[1].toUpperCase())}function e8(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Fr(n,t,e){switch(t.type){case 7:return n.visitTrigger(t,e);case 0:return n.visitState(t,e);case 1:return n.visitTransition(t,e);case 2:return n.visitSequence(t,e);case 3:return n.visitGroup(t,e);case 4:return n.visitAnimate(t,e);case 5:return n.visitKeyframes(t,e);case 6:return n.visitStyle(t,e);case 8:return n.visitReference(t,e);case 9:return n.visitAnimateChild(t,e);case 10:return n.visitAnimateRef(t,e);case 11:return n.visitQuery(t,e);case 12:return n.visitStagger(t,e);default:throw function pz(n){return new Y(3004,!1)}()}}function vA(n,t){return window.getComputedStyle(n)[t]}function s8(n,t){const e=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function a8(n,t,e){if(":"==n[0]){const c=function c8(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,r)=>parseFloat(r)>parseFloat(e);case":decrement":return(e,r)=>parseFloat(r)<parseFloat(e);default:return t.push(function Iz(n){return new Y(3016,!1)}()),"* => *"}}(n,e);if("function"==typeof c)return void t.push(c);n=c}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return e.push(function Mz(n){return new Y(3015,!1)}()),t;const i=r[1],o=r[2],s=r[3];t.push(yA(i,s));"<"==o[0]&&!("*"==i&&"*"==s)&&t.push(yA(s,i))}(r,e,t)):e.push(n),e}const jh=new Set(["true","1"]),Vh=new Set(["false","0"]);function yA(n,t){const e=jh.has(n)||Vh.has(n),r=jh.has(t)||Vh.has(t);return(i,o)=>{let s="*"==n||n==i,a="*"==t||t==o;return!s&&e&&"boolean"==typeof i&&(s=i?jh.has(n):Vh.has(n)),!a&&r&&"boolean"==typeof o&&(a=o?jh.has(t):Vh.has(t)),s&&a}}const l8=new RegExp("s*:selfs*,?","g");function Wy(n,t,e,r){return new u8(n).build(t,e,r)}class u8{constructor(t){this._driver=t}build(t,e,r){const i=new h8(e);return this._resetContextStyleTimingState(i),Fr(this,Tu(t),i)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles=new Map,t.collectedStyles.set("",new Map),t.currentTime=0}visitTrigger(t,e){let r=e.queryCount=0,i=e.depCount=0;const o=[],s=[];return"@"==t.name.charAt(0)&&e.errors.push(function mz(){return new Y(3006,!1)}()),t.definitions.forEach(a=>{if(this._resetContextStyleTimingState(e),0==a.type){const c=a,d=c.name;d.toString().split(/\s*,\s*/).forEach(p=>{c.name=p,o.push(this.visitState(c,e))}),c.name=d}else if(1==a.type){const c=this.visitTransition(a,e);r+=c.queryCount,i+=c.depCount,s.push(c)}else e.errors.push(function vz(){return new Y(3007,!1)}())}),{type:7,name:t.name,states:o,transitions:s,queryCount:r,depCount:i,options:null}}visitState(t,e){const r=this.visitStyle(t.styles,e),i=t.options&&t.options.params||null;if(r.containsDynamicStyles){const o=new Set,s=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{mA(c).forEach(d=>{s.hasOwnProperty(d)||o.add(d)})})}),o.size&&(Oh(o.values()),e.errors.push(function yz(n,t){return new Y(3008,!1)}()))}return{type:0,name:t.name,style:r,options:i?{params:i}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const r=Fr(this,Tu(t.animation),e);return{type:1,matchers:s8(t.expr,e.errors),animation:r,queryCount:e.queryCount,depCount:e.depCount,options:ga(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(r=>Fr(this,r,e)),options:ga(t.options)}}visitGroup(t,e){const r=e.currentTime;let i=0;const o=t.steps.map(s=>{e.currentTime=r;const a=Fr(this,s,e);return i=Math.max(i,e.currentTime),a});return e.currentTime=i,{type:3,steps:o,options:ga(t.options)}}visitAnimate(t,e){const r=function g8(n,t){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return Ky(kh(n,t).duration,0,"");const e=n;if(e.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=Ky(0,0,"");return o.dynamic=!0,o.strValue=e,o}const i=kh(e,t);return Ky(i.duration,i.delay,i.easing)}(t.timings,e.errors);e.currentAnimateTimings=r;let i,o=t.styles?t.styles:Io({});if(5==o.type)i=this.visitKeyframes(o,e);else{let s=t.styles,a=!1;if(!s){a=!0;const d={};r.easing&&(d.easing=r.easing),s=Io(d)}e.currentTime+=r.duration+r.delay;const c=this.visitStyle(s,e);c.isEmptyStep=a,i=c}return e.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(t,e){const r=this._makeStyleAst(t,e);return this._validateStyleAst(r,e),r}_makeStyleAst(t,e){const r=[],i=Array.isArray(t.styles)?t.styles:[t.styles];for(let a of i)"string"==typeof a?a===Mo?r.push(a):e.errors.push(new Y(3002,!1)):r.push(fA(a));let o=!1,s=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o))for(let c of a.values())if(c.toString().indexOf("{{")>=0){o=!0;break}}),{type:6,styles:r,easing:s,offset:t.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(t,e){const r=e.currentAnimateTimings;let i=e.currentTime,o=e.currentTime;r&&o>0&&(o-=r.duration+r.delay),t.styles.forEach(s=>{"string"!=typeof s&&s.forEach((a,c)=>{const d=e.collectedStyles.get(e.currentQuerySelector),p=d.get(c);let g=!0;p&&(o!=i&&o>=p.startTime&&i<=p.endTime&&(e.errors.push(function bz(n,t,e,r,i){return new Y(3010,!1)}()),g=!1),o=p.startTime),g&&d.set(c,{startTime:o,endTime:i}),e.options&&function Zz(n,t,e){const r=t.params||{},i=mA(n);i.length&&i.forEach(o=>{r.hasOwnProperty(o)||e.push(function fz(n){return new Y(3001,!1)}())})}(a,e.options,e.errors)})})}visitKeyframes(t,e){const r={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function Cz(){return new Y(3011,!1)}()),r;let o=0;const s=[];let a=!1,c=!1,d=0;const p=t.steps.map(K=>{const ie=this._makeStyleAst(K,e);let z=null!=ie.offset?ie.offset:function p8(n){if("string"==typeof n)return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(e instanceof Map&&e.has("offset")){const r=e;t=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const e=n;t=parseFloat(e.get("offset")),e.delete("offset")}return t}(ie.styles),se=0;return null!=z&&(o++,se=ie.offset=z),c=c||se<0||se>1,a=a||se<d,d=se,s.push(se),ie});c&&e.errors.push(function Ez(){return new Y(3012,!1)}()),a&&e.errors.push(function Sz(){return new Y(3200,!1)}());const g=t.steps.length;let _=0;o>0&&o<g?e.errors.push(function Dz(){return new Y(3202,!1)}()):0==o&&(_=1/(g-1));const E=g-1,D=e.currentTime,F=e.currentAnimateTimings,H=F.duration;return p.forEach((K,ie)=>{const z=_>0?ie==E?1:_*ie:s[ie],se=z*H;e.currentTime=D+F.delay+se,F.duration=se,this._validateStyleAst(K,e),K.offset=z,r.styles.push(K)}),r}visitReference(t,e){return{type:8,animation:Fr(this,Tu(t.animation),e),options:ga(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:ga(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:ga(t.options)}}visitQuery(t,e){const r=e.currentQuerySelector,i=t.options||{};e.queryCount++,e.currentQuery=t;const[o,s]=function d8(n){const t=!!n.split(/\s*,\s*/).find(e=>":self"==e);return t&&(n=n.replace(l8,"")),n=n.replace(/@\*/g,Rh).replace(/@\w+/g,e=>Rh+"-"+e.slice(1)).replace(/:animating/g,Hy),[n,t]}(t.selector);e.currentQuerySelector=r.length?r+" "+o:o,Or(e.collectedStyles,e.currentQuerySelector,new Map);const a=Fr(this,Tu(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=r,{type:11,selector:o,limit:i.limit||0,optional:!!i.optional,includeSelf:s,animation:a,originalSelector:t.selector,options:ga(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(function wz(){return new Y(3013,!1)}());const r="full"===t.timings?{duration:0,delay:0,easing:"full"}:kh(t.timings,e.errors,!0);return{type:12,animation:Fr(this,Tu(t.animation),e),timings:r,options:null}}}class h8{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function ga(n){return n?(n=wu(n)).params&&(n.params=function f8(n){return n?wu(n):null}(n.params)):n={},n}function Ky(n,t,e){return{duration:n,delay:t,easing:e}}function Yy(n,t,e,r,i,o,s=null,a=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:s,subTimeline:a}}class Bh{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let r=this._map.get(t);r||this._map.set(t,r=[]),r.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const y8=new RegExp(":enter","g"),b8=new RegExp(":leave","g");function Qy(n,t,e,r,i,o=new Map,s=new Map,a,c,d=[]){return(new C8).buildKeyframes(n,t,e,r,i,o,s,a,c,d)}class C8{buildKeyframes(t,e,r,i,o,s,a,c,d,p=[]){d=d||new Bh;const g=new Jy(t,e,d,i,o,p,[]);g.options=c;const _=c.delay?Ao(c.delay):0;g.currentTimeline.delayNextStep(_),g.currentTimeline.setStyles([s],null,g.errors,c),Fr(this,r,g);const E=g.timelines.filter(D=>D.containsAnimation());if(E.length&&a.size){let D;for(let F=E.length-1;F>=0;F--){const H=E[F];if(H.element===e){D=H;break}}D&&!D.allowOnlyTimelineStyles()&&D.setStyles([a],null,g.errors,c)}return E.length?E.map(D=>D.buildKeyframes()):[Yy(e,[],[],[],0,_,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const r=e.subInstructions.get(e.element);if(r){const i=e.createSubContext(t.options),o=e.currentTimeline.currentTime,s=this._visitSubInstructions(r,i,i.options);o!=s&&e.transformIntoNewTimeline(s)}e.previousNode=t}visitAnimateRef(t,e){const r=e.createSubContext(t.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],e,r),this.visitReference(t.animation,r),e.transformIntoNewTimeline(r.currentTimeline.currentTime),e.previousNode=t}_applyAnimationRefDelays(t,e,r){var i;for(const o of t){const s=null==o?void 0:o.delay;if(s){const a="number"==typeof s?s:Ao(Mu(s,null!==(i=null==o?void 0:o.params)&&void 0!==i?i:{},e.errors));r.delayNextStep(a)}}}_visitSubInstructions(t,e,r){let o=e.currentTimeline.currentTime;const s=null!=r.duration?Ao(r.duration):null,a=null!=r.delay?Ao(r.delay):null;return 0!==s&&t.forEach(c=>{const d=e.appendInstructionToTimeline(c,s,a);o=Math.max(o,d.duration+d.delay)}),o}visitReference(t,e){e.updateOptions(t.options,!0),Fr(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const r=e.subContextCount;let i=e;const o=t.options;if(o&&(o.params||o.delay)&&(i=e.createSubContext(o),i.transformIntoNewTimeline(),null!=o.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Uh);const s=Ao(o.delay);i.delayNextStep(s)}t.steps.length&&(t.steps.forEach(s=>Fr(this,s,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const r=[];let i=e.currentTimeline.currentTime;const o=t.options&&t.options.delay?Ao(t.options.delay):0;t.steps.forEach(s=>{const a=e.createSubContext(t.options);o&&a.delayNextStep(o),Fr(this,s,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(s=>e.currentTimeline.mergeTimelineCollectedStyles(s)),e.transformIntoNewTimeline(i),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const r=t.strValue;return kh(e.params?Mu(r,e.params,e.errors):r,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const r=e.currentAnimateTimings=this._visitTiming(t.timings,e),i=e.currentTimeline;r.delay&&(e.incrementTime(r.delay),i.snapshotCurrentStyles());const o=t.style;5==o.type?this.visitKeyframes(o,e):(e.incrementTime(r.duration),this.visitStyle(o,e),i.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const r=e.currentTimeline,i=e.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const o=i&&i.easing||t.easing;t.isEmptyStep?r.applyEmptyStep(o):r.setStyles(t.styles,o,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const r=e.currentAnimateTimings,i=e.currentTimeline.duration,o=r.duration,a=e.createSubContext().currentTimeline;a.easing=r.easing,t.styles.forEach(c=>{a.forwardTime((c.offset||0)*o),a.setStyles(c.styles,c.easing,e.errors,e.options),a.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(a),e.transformIntoNewTimeline(i+o),e.previousNode=t}visitQuery(t,e){const r=e.currentTimeline.currentTime,i=t.options||{},o=i.delay?Ao(i.delay):0;o&&(6===e.previousNode.type||0==r&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=Uh);let s=r;const a=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!i.optional,e.errors);e.currentQueryTotal=a.length;let c=null;a.forEach((d,p)=>{e.currentQueryIndex=p;const g=e.createSubContext(t.options,d);o&&g.delayNextStep(o),d===e.element&&(c=g.currentTimeline),Fr(this,t.animation,g),g.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,g.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(s),c&&(e.currentTimeline.mergeTimelineCollectedStyles(c),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const r=e.parentContext,i=e.currentTimeline,o=t.timings,s=Math.abs(o.duration),a=s*(e.currentQueryTotal-1);let c=s*e.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":c=a-c;break;case"full":c=r.currentStaggerTime}const p=e.currentTimeline;c&&p.delayNextStep(c);const g=p.currentTime;Fr(this,t.animation,e),e.previousNode=t,r.currentStaggerTime=i.currentTime-g+(i.startTime-r.currentTimeline.startTime)}}const Uh={};class Jy{constructor(t,e,r,i,o,s,a,c){this._driver=t,this.element=e,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=o,this.errors=s,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Uh,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new $h(this._driver,e,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const r=t;let i=this.options;null!=r.duration&&(i.duration=Ao(r.duration)),null!=r.delay&&(i.delay=Ao(r.delay));const o=r.params;if(o){let s=i.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!e||!s.hasOwnProperty(a))&&(s[a]=Mu(o[a],s,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const r=t.params={};Object.keys(e).forEach(i=>{r[i]=e[i]})}}return t}createSubContext(t=null,e,r){const i=e||this.element,o=new Jy(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(t),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(t){return this.previousNode=Uh,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,r){const i={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+t.delay,easing:""},o=new E8(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,i,t.stretchStartingKeyframe);return this.timelines.push(o),i}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,r,i,o,s){let a=[];if(i&&a.push(this.element),t.length>0){t=(t=t.replace(y8,"."+this._enterClassName)).replace(b8,"."+this._leaveClassName);let d=this._driver.query(this.element,t,1!=r);0!==r&&(d=r<0?d.slice(d.length+r,d.length):d.slice(0,r)),a.push(...d)}return!o&&0==a.length&&s.push(function Tz(n){return new Y(3014,!1)}()),a}}class $h{constructor(t,e,r,i){this._driver=t,this.element=e,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new $h(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,r]of this._globalTimelineStyles)this._backFill.set(e,r||Mo),this._currentKeyframe.set(e,Mo);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,r,i){var o;e&&this._previousKeyframe.set("easing",e);const s=i&&i.params||{},a=function S8(n,t){const e=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||t.keys();for(let o of r)e.set(o,Mo)}else fs(i,e)}),e}(t,this._globalTimelineStyles);for(let[c,d]of a){const p=Mu(d,s,r);this._pendingStyles.set(c,p),this._localTimelineStyles.has(c)||this._backFill.set(c,null!==(o=this._globalTimelineStyles.get(c))&&void 0!==o?o:Mo),this._updateStyle(c,p)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,r)=>{const i=this._styleSummary.get(r);(!i||e.time>i.time)&&this._updateStyle(r,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((a,c)=>{const d=fs(a,new Map,this._backFill);d.forEach((p,g)=>{"!"===p?t.add(g):p===Mo&&e.add(g)}),r||d.set("offset",c/this.duration),i.push(d)});const o=t.size?Oh(t.values()):[],s=e.size?Oh(e.values()):[];if(r){const a=i[0],c=new Map(a);a.set("offset",0),c.set("offset",1),i=[a,c]}return Yy(this.element,i,o,s,this.duration,this.startTime,this.easing,!1)}}class E8 extends $h{constructor(t,e,r,i,o,s,a=!1){super(t,e,s.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&e){const o=[],s=r+e,a=e/s,c=fs(t[0]);c.set("offset",0),o.push(c);const d=fs(t[0]);d.set("offset",CA(a)),o.push(d);const p=t.length-1;for(let g=1;g<=p;g++){let _=fs(t[g]);const E=_.get("offset");_.set("offset",CA((e+E*r)/s)),o.push(_)}r=s,e=0,i="",t=o}return Yy(this.element,t,this.preStyleProps,this.postStyleProps,r,e,i,!0)}}function CA(n,t=3){const e=Math.pow(10,t-1);return Math.round(n*e)/e}class Zy{}const D8=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class w8 extends Zy{normalizePropertyName(t,e){return qy(t)}normalizeStyleValue(t,e,r,i){let o="";const s=r.toString().trim();if(D8.has(e)&&0!==r&&"0"!==r)if("number"==typeof r)o="px";else{const a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&i.push(function gz(n,t){return new Y(3005,!1)}())}return s+o}}function EA(n,t,e,r,i,o,s,a,c,d,p,g,_){return{type:0,element:n,triggerName:t,isRemovalTransition:i,fromState:e,fromStyles:o,toState:r,toStyles:s,timelines:a,queriedElements:c,preStyleProps:d,postStyleProps:p,totalTime:g,errors:_}}const Xy={};class SA{constructor(t,e,r){this._triggerName=t,this.ast=e,this._stateStyles=r}match(t,e,r,i){return function T8(n,t,e,r,i){return n.some(o=>o(t,e,r,i))}(this.ast.matchers,t,e,r,i)}buildStyles(t,e,r){let i=this._stateStyles.get("*");return void 0!==t&&(i=this._stateStyles.get(null==t?void 0:t.toString())||i),i?i.buildStyles(e,r):new Map}build(t,e,r,i,o,s,a,c,d,p){var g;const _=[],E=this.ast.options&&this.ast.options.params||Xy,F=this.buildStyles(r,a&&a.params||Xy,_),H=c&&c.params||Xy,K=this.buildStyles(i,H,_),ie=new Set,z=new Map,se=new Map,He="void"===i,vt={params:M8(H,E),delay:null===(g=this.ast.options)||void 0===g?void 0:g.delay},sn=p?[]:Qy(t,e,this.ast.animation,o,s,F,K,vt,d,_);let Qn=0;if(sn.forEach(ur=>{Qn=Math.max(ur.duration+ur.delay,Qn)}),_.length)return EA(e,this._triggerName,r,i,He,F,K,[],[],z,se,Qn,_);sn.forEach(ur=>{const xo=ur.element,Po=Or(z,xo,new Set);ur.preStyleProps.forEach(Gi=>Po.add(Gi));const Ro=Or(se,xo,new Set);ur.postStyleProps.forEach(Gi=>Ro.add(Gi)),xo!==e&&ie.add(xo)});const hs=Oh(ie.values());return EA(e,this._triggerName,r,i,He,F,K,sn,hs,z,se,Qn)}}function M8(n,t){const e=wu(t);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(e[r]=n[r]);return e}class I8{constructor(t,e,r){this.styles=t,this.defaultParams=e,this.normalizer=r}buildStyles(t,e){const r=new Map,i=wu(this.defaultParams);return Object.keys(t).forEach(o=>{const s=t[o];null!==s&&(i[o]=s)}),this.styles.styles.forEach(o=>{"string"!=typeof o&&o.forEach((s,a)=>{s&&(s=Mu(s,i,e));const c=this.normalizer.normalizePropertyName(a,e);s=this.normalizer.normalizeStyleValue(a,c,s,e),r.set(c,s)})}),r}}class x8{constructor(t,e,r){this.name=t,this.ast=e,this._normalizer=r,this.transitionFactories=[],this.states=new Map,e.states.forEach(i=>{this.states.set(i.name,new I8(i.style,i.options&&i.options.params||{},r))}),DA(this.states,"true","1"),DA(this.states,"false","0"),e.transitions.forEach(i=>{this.transitionFactories.push(new SA(t,i,this.states))}),this.fallbackTransition=function P8(n,t,e){return new SA(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(s,a)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,r,i){return this.transitionFactories.find(s=>s.match(t,e,r,i))||null}matchStyles(t,e,r){return this.fallbackTransition.buildStyles(t,e,r)}}function DA(n,t,e){n.has(t)?n.has(e)||n.set(e,n.get(t)):n.has(e)&&n.set(t,n.get(e))}const R8=new Bh;class k8{constructor(t,e,r){this.bodyNode=t,this._driver=e,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(t,e){const r=[],o=Wy(this._driver,e,r,[]);if(r.length)throw function kz(n){return new Y(3503,!1)}();this._animations.set(t,o)}_buildPlayer(t,e,r){const i=t.element,o=nA(0,this._normalizer,0,t.keyframes,e,r);return this._driver.animate(i,o,t.duration,t.delay,t.easing,[],!0)}create(t,e,r={}){const i=[],o=this._animations.get(t);let s;const a=new Map;if(o?(s=Qy(this._driver,e,o,$y,xh,new Map,new Map,r,R8,i),s.forEach(p=>{const g=Or(a,p.element,new Map);p.postStyleProps.forEach(_=>g.set(_,null))})):(i.push(function Oz(){return new Y(3300,!1)}()),s=[]),i.length)throw function Fz(n){return new Y(3504,!1)}();a.forEach((p,g)=>{p.forEach((_,E)=>{p.set(E,this._driver.computeStyle(g,E,Mo))})});const d=ds(s.map(p=>{const g=a.get(p.element);return this._buildPlayer(p,new Map,g)}));return this._playersById.set(t,d),d.onDestroy(()=>this.destroy(t)),this.players.push(d),d}destroy(t){const e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);const r=this.players.indexOf(e);r>=0&&this.players.splice(r,1)}_getPlayer(t){const e=this._playersById.get(t);if(!e)throw function Nz(n){return new Y(3301,!1)}();return e}listen(t,e,r,i){const o=jy(e,"","","");return Ny(this._getPlayer(t),r,o,i),()=>{}}command(t,e,r,i){if("register"==r)return void this.register(t,i[0]);if("create"==r)return void this.create(t,e,i[0]||{});const o=this._getPlayer(t);switch(r){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(t)}}}const wA="ng-animate-queued",e_="ng-animate-disabled",j8=[],TA={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},V8={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Wr="__ng_removed";class t_{constructor(t,e=""){this.namespaceId=e;const r=t&&t.hasOwnProperty("value");if(this.value=function H8(n){return null!=n?n:null}(r?t.value:t),r){const o=wu(t);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const r=this.options.params;Object.keys(e).forEach(i=>{null==r[i]&&(r[i]=e[i])})}}}const Iu="void",n_=new t_(Iu);class B8{constructor(t,e,r){this.id=t,this.hostElement=e,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Kr(e,this._hostClassName)}listen(t,e,r,i){if(!this._triggers.has(e))throw function Lz(n,t){return new Y(3302,!1)}();if(null==r||0==r.length)throw function jz(n){return new Y(3303,!1)}();if(!function z8(n){return"start"==n||"done"==n}(r))throw function Vz(n,t){return new Y(3400,!1)}();const o=Or(this._elementListeners,t,[]),s={name:e,phase:r,callback:i};o.push(s);const a=Or(this._engine.statesByElement,t,new Map);return a.has(e)||(Kr(t,Ph),Kr(t,Ph+"-"+e),a.set(e,n_)),()=>{this._engine.afterFlush(()=>{const c=o.indexOf(s);c>=0&&o.splice(c,1),this._triggers.has(e)||a.delete(e)})}}register(t,e){return!this._triggers.has(t)&&(this._triggers.set(t,e),!0)}_getTrigger(t){const e=this._triggers.get(t);if(!e)throw function Bz(n){return new Y(3401,!1)}();return e}trigger(t,e,r,i=!0){const o=this._getTrigger(e),s=new r_(this.id,e,t);let a=this._engine.statesByElement.get(t);a||(Kr(t,Ph),Kr(t,Ph+"-"+e),this._engine.statesByElement.set(t,a=new Map));let c=a.get(e);const d=new t_(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&c&&d.absorbOptions(c.options),a.set(e,d),c||(c=n_),d.value!==Iu&&c.value===d.value){if(!function W8(n,t){const e=Object.keys(n),r=Object.keys(t);if(e.length!=r.length)return!1;for(let i=0;i<e.length;i++){const o=e[i];if(!t.hasOwnProperty(o)||n[o]!==t[o])return!1}return!0}(c.params,d.params)){const F=[],H=o.matchStyles(c.value,c.params,F),K=o.matchStyles(d.value,d.params,F);F.length?this._engine.reportError(F):this._engine.afterFlush(()=>{pa(t,H),zi(t,K)})}return}const _=Or(this._engine.playersByElement,t,[]);_.forEach(F=>{F.namespaceId==this.id&&F.triggerName==e&&F.queued&&F.destroy()});let E=o.matchTransition(c.value,d.value,t,d.params),D=!1;if(!E){if(!i)return;E=o.fallbackTransition,D=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:E,fromState:c,toState:d,player:s,isFallbackTransition:D}),D||(Kr(t,wA),s.onStart(()=>{Vc(t,wA)})),s.onDone(()=>{let F=this.players.indexOf(s);F>=0&&this.players.splice(F,1);const H=this._engine.playersByElement.get(t);if(H){let K=H.indexOf(s);K>=0&&H.splice(K,1)}}),this.players.push(s),_.push(s),s}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,r)=>{this._elementListeners.set(r,e.filter(i=>i.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(r=>r.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const r=this._engine.driver.query(t,Rh,!0);r.forEach(i=>{if(i[Wr])return;const o=this._engine.fetchNamespacesByElement(i);o.size?o.forEach(s=>s.triggerLeaveAnimation(i,e,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(t,e,r,i){const o=this._engine.statesByElement.get(t),s=new Map;if(o){const a=[];if(o.forEach((c,d)=>{if(s.set(d,c.value),this._triggers.has(d)){const p=this.trigger(t,d,Iu,i);p&&a.push(p)}}),a.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,s),r&&ds(a).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),r=this._engine.statesByElement.get(t);if(e&&r){const i=new Set;e.forEach(o=>{const s=o.name;if(i.has(s))return;i.add(s);const c=this._triggers.get(s).fallbackTransition,d=r.get(s)||n_,p=new t_(Iu),g=new r_(this.id,s,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:s,transition:c,fromState:d,toState:p,player:g,isFallbackTransition:!0})})}}removeNode(t,e){const r=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let i=!1;if(r.totalAnimations){const o=r.players.length?r.playersByQueriedElement.get(t):[];if(o&&o.length)i=!0;else{let s=t;for(;s=s.parentNode;)if(r.statesByElement.get(s)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(t),i)r.markElementAsRemoved(this.id,t,!1,e);else{const o=t[Wr];(!o||o===TA)&&(r.afterFlush(()=>this.clearElementCache(t)),r.destroyInnerAnimations(t),r._onRemovalComplete(t,e))}}insertNode(t,e){Kr(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const o=r.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==r.triggerName){const c=jy(o,r.triggerName,r.fromState.value,r.toState.value);c._data=t,Ny(r.player,a.phase,c,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):e.push(r)}),this._queue=[],e.sort((r,i)=>{const o=r.transition.ast.depCount,s=i.transition.ast.depCount;return 0==o||0==s?o-s:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(r=>r.element===t)||e,e}}class U8{constructor(t,e,r){this.bodyNode=t,this.driver=e,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,o)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(r=>{r.queued&&t.push(r)})}),t}createNamespace(t,e){const r=new B8(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(r,e):(this.newHostElements.set(e,r),this.collectEnterElement(e)),this._namespaceLookup[t]=r}_balanceNamespaceList(t,e){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let s=!1,a=this.driver.getParentElement(e);for(;a;){const c=i.get(a);if(c){const d=r.indexOf(c);r.splice(d+1,0,t),s=!0;break}a=this.driver.getParentElement(a)}s||r.unshift(t)}else r.push(t);return i.set(e,t),t}register(t,e){let r=this._namespaceLookup[t];return r||(r=this.createNamespace(t,e)),r}registerTrigger(t,e,r){let i=this._namespaceLookup[t];i&&i.register(e,r)&&this.totalAnimations++}destroy(t,e){if(!t)return;const r=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[t];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,r=this.statesByElement.get(t);if(r)for(let i of r.values())if(i.namespaceId){const o=this._fetchNamespace(i.namespaceId);o&&e.add(o)}return e}trigger(t,e,r,i){if(Hh(e)){const o=this._fetchNamespace(t);if(o)return o.trigger(e,r,i),!0}return!1}insertNode(t,e,r,i){if(!Hh(e))return;const o=e[Wr];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const s=this.collectedLeaveElements.indexOf(e);s>=0&&this.collectedLeaveElements.splice(s,1)}if(t){const s=this._fetchNamespace(t);s&&s.insertNode(e,r)}i&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Kr(t,e_)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Vc(t,e_))}removeNode(t,e,r,i){if(Hh(e)){const o=t?this._fetchNamespace(t):null;if(o?o.removeNode(e,i):this.markElementAsRemoved(t,e,!1,i),r){const s=this.namespacesByHostElement.get(e);s&&s.id!==t&&s.removeNode(e,i)}}else this._onRemovalComplete(e,i)}markElementAsRemoved(t,e,r,i,o){this.collectedLeaveElements.push(e),e[Wr]={namespaceId:t,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:o}}listen(t,e,r,i,o){return Hh(e)?this._fetchNamespace(t).listen(e,r,i,o):()=>{}}_buildInstruction(t,e,r,i,o){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,r,i,t.fromState.options,t.toState.options,e,o)}destroyInnerAnimations(t){let e=this.driver.query(t,Rh,!0);e.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,Hy,!0),e.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return ds(this.players).onDone(()=>t());t()})}processLeaveNode(t){var e;const r=t[Wr];if(r&&r.setForRemoval){if(t[Wr]=TA,r.namespaceId){this.destroyInnerAnimations(t);const i=this._fetchNamespace(r.namespaceId);i&&i.clearElementCache(t)}this._onRemovalComplete(t,r.setForRemoval)}!(null===(e=t.classList)||void 0===e)&&e.contains(e_)&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Kr(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{e=this._flushAnimations(r,t)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],e.length?ds(e).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(t){throw function Uz(n){return new Y(3402,!1)}()}_flushAnimations(t,e){const r=new Bh,i=[],o=new Map,s=[],a=new Map,c=new Map,d=new Map,p=new Set;this.disabledNodes.forEach(ye=>{p.add(ye);const we=this.driver.query(ye,".ng-animate-queued",!0);for(let Fe=0;Fe<we.length;Fe++)p.add(we[Fe])});const g=this.bodyNode,_=Array.from(this.statesByElement.keys()),E=AA(_,this.collectedEnterElements),D=new Map;let F=0;E.forEach((ye,we)=>{const Fe=$y+F++;D.set(we,Fe),ye.forEach(ot=>Kr(ot,Fe))});const H=[],K=new Set,ie=new Set;for(let ye=0;ye<this.collectedLeaveElements.length;ye++){const we=this.collectedLeaveElements[ye],Fe=we[Wr];Fe&&Fe.setForRemoval&&(H.push(we),K.add(we),Fe.hasAnimation?this.driver.query(we,".ng-star-inserted",!0).forEach(ot=>K.add(ot)):ie.add(we))}const z=new Map,se=AA(_,Array.from(K));se.forEach((ye,we)=>{const Fe=xh+F++;z.set(we,Fe),ye.forEach(ot=>Kr(ot,Fe))}),t.push(()=>{E.forEach((ye,we)=>{const Fe=D.get(we);ye.forEach(ot=>Vc(ot,Fe))}),se.forEach((ye,we)=>{const Fe=z.get(we);ye.forEach(ot=>Vc(ot,Fe))}),H.forEach(ye=>{this.processLeaveNode(ye)})});const He=[],vt=[];for(let ye=this._namespaceList.length-1;ye>=0;ye--)this._namespaceList[ye].drainQueuedTransitions(e).forEach(Fe=>{const ot=Fe.player,an=Fe.element;if(He.push(ot),this.collectedEnterElements.length){const Jn=an[Wr];if(Jn&&Jn.setForMove){if(Jn.previousTriggersValues&&Jn.previousTriggersValues.has(Fe.triggerName)){const va=Jn.previousTriggersValues.get(Fe.triggerName),Yr=this.statesByElement.get(Fe.element);if(Yr&&Yr.has(Fe.triggerName)){const Kh=Yr.get(Fe.triggerName);Kh.value=va,Yr.set(Fe.triggerName,Kh)}}return void ot.destroy()}}const qi=!g||!this.driver.containsElement(g,an),Nr=z.get(an),ps=D.get(an),Zt=this._buildInstruction(Fe,r,ps,Nr,qi);if(Zt.errors&&Zt.errors.length)return void vt.push(Zt);if(qi)return ot.onStart(()=>pa(an,Zt.fromStyles)),ot.onDestroy(()=>zi(an,Zt.toStyles)),void i.push(ot);if(Fe.isFallbackTransition)return ot.onStart(()=>pa(an,Zt.fromStyles)),ot.onDestroy(()=>zi(an,Zt.toStyles)),void i.push(ot);const HA=[];Zt.timelines.forEach(Jn=>{Jn.stretchStartingKeyframe=!0,this.disabledNodes.has(Jn.element)||HA.push(Jn)}),Zt.timelines=HA,r.append(an,Zt.timelines),s.push({instruction:Zt,player:ot,element:an}),Zt.queriedElements.forEach(Jn=>Or(a,Jn,[]).push(ot)),Zt.preStyleProps.forEach((Jn,va)=>{if(Jn.size){let Yr=c.get(va);Yr||c.set(va,Yr=new Set),Jn.forEach((Kh,s_)=>Yr.add(s_))}}),Zt.postStyleProps.forEach((Jn,va)=>{let Yr=d.get(va);Yr||d.set(va,Yr=new Set),Jn.forEach((Kh,s_)=>Yr.add(s_))})});if(vt.length){const ye=[];vt.forEach(we=>{ye.push(function $z(n,t){return new Y(3505,!1)}())}),He.forEach(we=>we.destroy()),this.reportError(ye)}const sn=new Map,Qn=new Map;s.forEach(ye=>{const we=ye.element;r.has(we)&&(Qn.set(we,we),this._beforeAnimationBuild(ye.player.namespaceId,ye.instruction,sn))}),i.forEach(ye=>{const we=ye.element;this._getPreviousPlayers(we,!1,ye.namespaceId,ye.triggerName,null).forEach(ot=>{Or(sn,we,[]).push(ot),ot.destroy()})});const hs=H.filter(ye=>PA(ye,c,d)),ur=new Map;IA(ur,this.driver,ie,d,Mo).forEach(ye=>{PA(ye,c,d)&&hs.push(ye)});const Po=new Map;E.forEach((ye,we)=>{IA(Po,this.driver,new Set(ye),c,"!")}),hs.forEach(ye=>{var we,Fe;const ot=ur.get(ye),an=Po.get(ye);ur.set(ye,new Map([...Array.from(null!==(we=null==ot?void 0:ot.entries())&&void 0!==we?we:[]),...Array.from(null!==(Fe=null==an?void 0:an.entries())&&void 0!==Fe?Fe:[])]))});const Ro=[],Gi=[],Bc={};s.forEach(ye=>{const{element:we,player:Fe,instruction:ot}=ye;if(r.has(we)){if(p.has(we))return Fe.onDestroy(()=>zi(we,ot.toStyles)),Fe.disabled=!0,Fe.overrideTotalTime(ot.totalTime),void i.push(Fe);let an=Bc;if(Qn.size>1){let Nr=we;const ps=[];for(;Nr=Nr.parentNode;){const Zt=Qn.get(Nr);if(Zt){an=Zt;break}ps.push(Nr)}ps.forEach(Zt=>Qn.set(Zt,an))}const qi=this._buildAnimation(Fe.namespaceId,ot,sn,o,Po,ur);if(Fe.setRealPlayer(qi),an===Bc)Ro.push(Fe);else{const Nr=this.playersByElement.get(an);Nr&&Nr.length&&(Fe.parentPlayer=ds(Nr)),i.push(Fe)}}else pa(we,ot.fromStyles),Fe.onDestroy(()=>zi(we,ot.toStyles)),Gi.push(Fe),p.has(we)&&i.push(Fe)}),Gi.forEach(ye=>{const we=o.get(ye.element);if(we&&we.length){const Fe=ds(we);ye.setRealPlayer(Fe)}}),i.forEach(ye=>{ye.parentPlayer?ye.syncPlayerEvents(ye.parentPlayer):ye.destroy()});for(let ye=0;ye<H.length;ye++){const we=H[ye],Fe=we[Wr];if(Vc(we,xh),Fe&&Fe.hasAnimation)continue;let ot=[];if(a.size){let qi=a.get(we);qi&&qi.length&&ot.push(...qi);let Nr=this.driver.query(we,Hy,!0);for(let ps=0;ps<Nr.length;ps++){let Zt=a.get(Nr[ps]);Zt&&Zt.length&&ot.push(...Zt)}}const an=ot.filter(qi=>!qi.destroyed);an.length?G8(this,we,an):this.processLeaveNode(we)}return H.length=0,Ro.forEach(ye=>{this.players.push(ye),ye.onDone(()=>{ye.destroy();const we=this.players.indexOf(ye);this.players.splice(we,1)}),ye.play()}),Ro}elementContainsData(t,e){let r=!1;const i=e[Wr];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(e)&&(r=!0),this.playersByQueriedElement.has(e)&&(r=!0),this.statesByElement.has(e)&&(r=!0),this._fetchNamespace(t).elementContainsData(e)||r}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,r,i,o){let s=[];if(e){const a=this.playersByQueriedElement.get(t);a&&(s=a)}else{const a=this.playersByElement.get(t);if(a){const c=!o||o==Iu;a.forEach(d=>{d.queued||!c&&d.triggerName!=i||s.push(d)})}}return(r||i)&&(s=s.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),s}_beforeAnimationBuild(t,e,r){const o=e.element,s=e.isRemovalTransition?void 0:t,a=e.isRemovalTransition?void 0:e.triggerName;for(const c of e.timelines){const d=c.element,p=d!==o,g=Or(r,d,[]);this._getPreviousPlayers(d,p,s,a,e.toState).forEach(E=>{const D=E.getRealPlayer();D.beforeDestroy&&D.beforeDestroy(),E.destroy(),g.push(E)})}pa(o,e.fromStyles)}_buildAnimation(t,e,r,i,o,s){const a=e.triggerName,c=e.element,d=[],p=new Set,g=new Set,_=e.timelines.map(D=>{const F=D.element;p.add(F);const H=F[Wr];if(H&&H.removedBeforeQueried)return new bu(D.duration,D.delay);const K=F!==c,ie=function q8(n){const t=[];return xA(n,t),t}((r.get(F)||j8).map(sn=>sn.getRealPlayer())).filter(sn=>!!sn.element&&sn.element===F),z=o.get(F),se=s.get(F),He=nA(0,this._normalizer,0,D.keyframes,z,se),vt=this._buildPlayer(D,He,ie);if(D.subTimeline&&i&&g.add(F),K){const sn=new r_(t,a,F);sn.setRealPlayer(vt),d.push(sn)}return vt});d.forEach(D=>{Or(this.playersByQueriedElement,D.element,[]).push(D),D.onDone(()=>function $8(n,t,e){let r=n.get(t);if(r){if(r.length){const i=r.indexOf(e);r.splice(i,1)}0==r.length&&n.delete(t)}return r}(this.playersByQueriedElement,D.element,D))}),p.forEach(D=>Kr(D,dA));const E=ds(_);return E.onDestroy(()=>{p.forEach(D=>Vc(D,dA)),zi(c,e.toStyles)}),g.forEach(D=>{Or(i,D,[]).push(E)}),E}_buildPlayer(t,e,r){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,r):new bu(t.duration,t.delay)}}class r_{constructor(t,e,r){this.namespaceId=t,this.triggerName=e,this.element=r,this._player=new bu,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,r)=>{e.forEach(i=>Ny(t,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){Or(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function Hh(n){return n&&1===n.nodeType}function MA(n,t){const e=n.style.display;return n.style.display=null!=t?t:"none",e}function IA(n,t,e,r,i){const o=[];e.forEach(c=>o.push(MA(c)));const s=[];r.forEach((c,d)=>{const p=new Map;c.forEach(g=>{const _=t.computeStyle(d,g,i);p.set(g,_),(!_||0==_.length)&&(d[Wr]=V8,s.push(d))}),n.set(d,p)});let a=0;return e.forEach(c=>MA(c,o[a++])),s}function AA(n,t){const e=new Map;if(n.forEach(a=>e.set(a,[])),0==t.length)return e;const i=new Set(t),o=new Map;function s(a){if(!a)return 1;let c=o.get(a);if(c)return c;const d=a.parentNode;return c=e.has(d)?d:i.has(d)?1:s(d),o.set(a,c),c}return t.forEach(a=>{const c=s(a);1!==c&&e.get(c).push(a)}),e}function Kr(n,t){var e;null===(e=n.classList)||void 0===e||e.add(t)}function Vc(n,t){var e;null===(e=n.classList)||void 0===e||e.remove(t)}function G8(n,t,e){ds(e).onDone(()=>n.processLeaveNode(t))}function xA(n,t){for(let e=0;e<n.length;e++){const r=n[e];r instanceof zM?xA(r.players,t):t.push(r)}}function PA(n,t,e){const r=e.get(n);if(!r)return!1;let i=t.get(n);return i?r.forEach(o=>i.add(o)):t.set(n,r),e.delete(n),!0}class zh{constructor(t,e,r){this.bodyNode=t,this._driver=e,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,o)=>{},this._transitionEngine=new U8(t,e,r),this._timelineEngine=new k8(t,e,r),this._transitionEngine.onRemovalComplete=(i,o)=>this.onRemovalComplete(i,o)}registerTrigger(t,e,r,i,o){const s=t+"-"+i;let a=this._triggerCache[s];if(!a){const c=[],p=Wy(this._driver,o,c,[]);if(c.length)throw function Pz(n,t){return new Y(3404,!1)}();a=function A8(n,t,e){return new x8(n,t,e)}(i,p,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(e,i,a)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,r,i){this._transitionEngine.insertNode(t,e,r,i)}onRemove(t,e,r,i){this._transitionEngine.removeNode(t,e,i||!1,r)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,r,i){if("@"==r.charAt(0)){const[o,s]=rA(r);this._timelineEngine.command(o,e,s,i)}else this._transitionEngine.trigger(t,e,r,i)}listen(t,e,r,i,o){if("@"==r.charAt(0)){const[s,a]=rA(r);return this._timelineEngine.listen(s,e,a,o)}return this._transitionEngine.listen(t,e,r,i,o)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let Y8=(()=>{class n{constructor(e,r,i){this._element=e,this._startStyles=r,this._endStyles=i,this._state=0;let o=n.initialStylesByElement.get(e);o||n.initialStylesByElement.set(e,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&zi(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(zi(this._element,this._initialStyles),this._endStyles&&(zi(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(pa(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(pa(this._element,this._endStyles),this._endStyles=null),zi(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function i_(n){let t=null;return n.forEach((e,r)=>{(function Q8(n){return"display"===n||"position"===n})(r)&&(t=t||new Map,t.set(r,e))}),t}class RA{constructor(t,e,r,i){this.element=t,this.keyframes=e,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){const e=[];return t.forEach(r=>{e.push(Object.fromEntries(r))}),e}_triggerWebAnimation(t,e,r){return t.animate(this._convertKeyframesToObject(e),r)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&t.set(i,this._finished?r:vA(this.element,i))}),this.currentSnapshot=t}triggerCallback(t){const e="start"===t?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}}class J8{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}matchesElement(t,e){return!1}containsElement(t,e){return aA(t,e)}getParentElement(t){return By(t)}query(t,e,r){return cA(t,e,r)}computeStyle(t,e,r){return window.getComputedStyle(t)[e]}animate(t,e,r,i,o,s=[]){const c={duration:r,delay:i,fill:0==i?"both":"forwards"};o&&(c.easing=o);const d=new Map,p=s.filter(E=>E instanceof RA);(function t8(n,t){return 0===n||0===t})(r,i)&&p.forEach(E=>{E.currentSnapshot.forEach((D,F)=>d.set(F,D))});let g=function Jz(n){return n.length?n[0]instanceof Map?n:n.map(t=>fA(t)):[]}(e).map(E=>fs(E));g=function n8(n,t,e){if(e.size&&t.length){let r=t[0],i=[];if(e.forEach((o,s)=>{r.has(s)||i.push(s),r.set(s,o)}),i.length)for(let o=1;o<t.length;o++){let s=t[o];i.forEach(a=>s.set(a,vA(n,a)))}}return t}(t,g,d);const _=function K8(n,t){let e=null,r=null;return Array.isArray(t)&&t.length?(e=i_(t[0]),t.length>1&&(r=i_(t[t.length-1]))):t instanceof Map&&(e=i_(t)),e||r?new Y8(n,e,r):null}(t,g);return new RA(t,g,c,_)}}let Z8=(()=>{class n extends UM{constructor(e,r){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(r.body,{id:"0",encapsulation:hr.None,styles:[],data:{animation:[]}})}build(e){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(e)?yh(e):e;return kA(this._renderer,null,r,"register",[i]),new X8(r,this._renderer)}}return n.\u0275fac=function(e){return new(e||n)(Q(Cl),Q(Nt))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})();class X8 extends class FH{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new eG(this._id,t,e||{},this._renderer)}}class eG{constructor(t,e,r,i){this.id=t,this.element=e,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return kA(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function kA(n,t,e,r,i){return n.setProperty(t,`@@${e}:${r}`,i)}const OA="@.disabled";let tG=(()=>{class n{constructor(e,r,i){this.delegate=e,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(o,s)=>{const a=null==s?void 0:s.parentNode(o);a&&s.removeChild(a,o)}}createRenderer(e,r){const o=this.delegate.createRenderer(e,r);if(!(e&&r&&r.data&&r.data.animation)){let p=this._rendererCache.get(o);return p||(p=new FA("",o,this.engine,()=>this._rendererCache.delete(o)),this._rendererCache.set(o,p)),p}const s=r.id,a=r.id+"-"+this._currentId;this._currentId++,this.engine.register(a,e);const c=p=>{Array.isArray(p)?p.forEach(c):this.engine.registerTrigger(s,a,e,p.name,p)};return r.data.animation.forEach(c),new nG(this,a,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,r,i){e>=0&&e<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(o=>{const[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(e){return new(e||n)(Q(Cl),Q(zh),Q(Ut))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})();class FA{constructor(t,e,r,i){this.namespaceId=t,this.delegate=e,this.engine=r,this._onDestroy=i,this.destroyNode=this.delegate.destroyNode?o=>e.destroyNode(o):null}get data(){return this.delegate.data}destroy(){var t;this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),null===(t=this._onDestroy)||void 0===t||t.call(this)}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,r,i=!0){this.delegate.insertBefore(t,e,r),this.engine.onInsert(this.namespaceId,e,t,i)}removeChild(t,e,r){this.engine.onRemove(this.namespaceId,e,this.delegate,r)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,r,i){this.delegate.setAttribute(t,e,r,i)}removeAttribute(t,e,r){this.delegate.removeAttribute(t,e,r)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,r,i){this.delegate.setStyle(t,e,r,i)}removeStyle(t,e,r){this.delegate.removeStyle(t,e,r)}setProperty(t,e,r){"@"==e.charAt(0)&&e==OA?this.disableAnimations(t,!!r):this.delegate.setProperty(t,e,r)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,r){return this.delegate.listen(t,e,r)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class nG extends FA{constructor(t,e,r,i,o){super(e,r,i,o),this.factory=t,this.namespaceId=e}setProperty(t,e,r){"@"==e.charAt(0)?"."==e.charAt(1)&&e==OA?this.disableAnimations(t,r=void 0===r||!!r):this.engine.process(this.namespaceId,t,e.slice(1),r):this.delegate.setProperty(t,e,r)}listen(t,e,r){if("@"==e.charAt(0)){const i=function rG(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(t);let o=e.slice(1),s="";return"@"!=o.charAt(0)&&([o,s]=function iG(n){const t=n.indexOf(".");return[n.substring(0,t),n.slice(t+1)]}(o)),this.engine.listen(this.namespaceId,i,o,s,a=>{this.factory.scheduleListenerCallback(a._data||-1,r,a)})}return this.delegate.listen(t,e,r)}}let oG=(()=>{class n extends zh{constructor(e,r,i,o){super(e.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(e){return new(e||n)(Q(Nt),Q(Uy),Q(Zy),Q(jl))},n.\u0275prov=de({token:n,factory:n.\u0275fac}),n})();const NA=[{provide:UM,useClass:Z8},{provide:Zy,useFactory:function sG(){return new w8}},{provide:zh,useClass:oG},{provide:Cl,useFactory:function aG(n,t,e){return new tG(n,t,e)},deps:[Tf,zh,Ut]}],o_=[{provide:Uy,useFactory:()=>new J8},{provide:Ec,useValue:"BrowserAnimations"},...NA],LA=[{provide:Uy,useClass:lA},{provide:Ec,useValue:"NoopAnimations"},...NA];let cG=(()=>{class n{static withConfig(e){return{ngModule:n,providers:e.disableAnimations?LA:o_}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=jt({type:n}),n.\u0275inj=Lt({providers:o_,imports:[hD]}),n})(),_G=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=jt({type:n}),n.\u0275inj=Lt({imports:[$i,$i]}),n})(),bG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=jt({type:n,bootstrap:[lz]}),n.\u0275inj=Lt({providers:[{provide:Xs,useFactory:t=>t.getBaseHrefFromDOM(),deps:[lf]}],imports:[hD,oz,X3,XU,cG,kH,_G]}),n})();(function XF(){if(gS)throw new Error("Cannot enable prod mode after platform setup.");pS=!1})(),Aj().bootstrapModule(bG).catch(n=>console.error(n))},951:Xt=>{Xt.exports=function(){var q={};Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0,q.default=function(l){return!(!l||!l.Window)&&l instanceof l.Window};var T={};Object.defineProperty(T,"__esModule",{value:!0}),T.init=ne,T.getWindow=function(l){return(0,q.default)(l)?l:(l.ownerDocument||l).defaultView||B.window},T.window=T.realWindow=void 0;var M=void 0;T.realWindow=M;var B=void 0;function ne(l){T.realWindow=M=l;var u=l.document.createTextNode("");u.ownerDocument!==l.document&&"function"==typeof l.wrap&&l.wrap(u)===u&&(l=l.wrap(l)),T.window=B=l}T.window=B,"undefined"!=typeof window&&window&&ne(window);var R={};function Te(l){return(Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(l)}Object.defineProperty(R,"__esModule",{value:!0}),R.default=void 0;var ut=function(l){return!!l&&"object"===Te(l)},ft=function(l){return"function"==typeof l};R.default={window:function(l){return l===T.window||(0,q.default)(l)},docFrag:function(l){return ut(l)&&11===l.nodeType},object:ut,func:ft,number:function(l){return"number"==typeof l},bool:function(l){return"boolean"==typeof l},string:function(l){return"string"==typeof l},element:function(l){if(!l||"object"!==Te(l))return!1;var u=T.getWindow(l)||T.window;return/object|function/.test(Te(u.Element))?l instanceof u.Element:1===l.nodeType&&"string"==typeof l.nodeName},plainObject:function(l){return ut(l)&&!!l.constructor&&/function Object\b/.test(l.constructor.toString())},array:function(l){return ut(l)&&void 0!==l.length&&ft(l.splice)}};var k={};function X(l){var u=l.interaction;if("drag"===u.prepared.name){var f=u.prepared.axis;"x"===f?(u.coords.cur.page.y=u.coords.start.page.y,u.coords.cur.client.y=u.coords.start.client.y,u.coords.velocity.client.y=0,u.coords.velocity.page.y=0):"y"===f&&(u.coords.cur.page.x=u.coords.start.page.x,u.coords.cur.client.x=u.coords.start.client.x,u.coords.velocity.client.x=0,u.coords.velocity.page.x=0)}}function Ce(l){var u=l.iEvent,f=l.interaction;if("drag"===f.prepared.name){var h=f.prepared.axis;if("x"===h||"y"===h){var m="x"===h?"y":"x";u.page[m]=f.coords.start.page[m],u.client[m]=f.coords.start.client[m],u.delta[m]=0}}}Object.defineProperty(k,"__esModule",{value:!0}),k.default=void 0;var he={id:"actions/drag",install:function(l){var u=l.actions,h=l.defaults;l.Interactable.prototype.draggable=he.draggable,u.map.drag=he,u.methodDict.drag="draggable",h.actions.drag=he.defaults},listeners:{"interactions:before-action-move":X,"interactions:action-resume":X,"interactions:action-move":Ce,"auto-start:check":function(l){var u=l.interaction,f=l.interactable,h=l.buttons,m=f.options.drag;if(m&&m.enabled&&(!u.pointerIsDown||!/mouse|pointer/.test(u.pointerType)||0!=(h&f.options.drag.mouseButtons)))return l.action={name:"drag",axis:"start"===m.lockAxis?m.startAxis:m.lockAxis},!1}},draggable:function(l){return R.default.object(l)?(this.options.drag.enabled=!1!==l.enabled,this.setPerAction("drag",l),this.setOnEvents("drag",l),/^(xy|x|y|start)$/.test(l.lockAxis)&&(this.options.drag.lockAxis=l.lockAxis),/^(xy|x|y)$/.test(l.startAxis)&&(this.options.drag.startAxis=l.startAxis),this):R.default.bool(l)?(this.options.drag.enabled=l,this):this.options.drag},beforeMove:X,move:Ce,defaults:{startAxis:"xy",lockAxis:"xy"},getCursor:function(){return"move"}};k.default=he;var W={};Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var le={init:function(l){var u=l;le.document=u.document,le.DocumentFragment=u.DocumentFragment||ze,le.SVGElement=u.SVGElement||ze,le.SVGSVGElement=u.SVGSVGElement||ze,le.SVGElementInstance=u.SVGElementInstance||ze,le.Element=u.Element||ze,le.HTMLElement=u.HTMLElement||le.Element,le.Event=u.Event,le.Touch=u.Touch||ze,le.PointerEvent=u.PointerEvent||u.MSPointerEvent},document:null,DocumentFragment:null,SVGElement:null,SVGSVGElement:null,SVGElementInstance:null,Element:null,HTMLElement:null,Event:null,Touch:null,PointerEvent:null};function ze(){}W.default=le;var x={};Object.defineProperty(x,"__esModule",{value:!0}),x.default=void 0;var N={init:function(l){var u=W.default.Element,f=l.navigator||{};N.supportsTouch="ontouchstart"in l||R.default.func(l.DocumentTouch)&&W.default.document instanceof l.DocumentTouch,N.supportsPointerEvent=!1!==f.pointerEnabled&&!!W.default.PointerEvent,N.isIOS=/iP(hone|od|ad)/.test(f.platform),N.isIOS7=/iP(hone|od|ad)/.test(f.platform)&&/OS 7[^\d]/.test(f.appVersion),N.isIe9=/MSIE 9/.test(f.userAgent),N.isOperaMobile="Opera"===f.appName&&N.supportsTouch&&/Presto/.test(f.userAgent),N.prefixedMatchesSelector="matches"in u.prototype?"matches":"webkitMatchesSelector"in u.prototype?"webkitMatchesSelector":"mozMatchesSelector"in u.prototype?"mozMatchesSelector":"oMatchesSelector"in u.prototype?"oMatchesSelector":"msMatchesSelector",N.pEventTypes=N.supportsPointerEvent?W.default.PointerEvent===l.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,N.wheelEvent=W.default.document&&"onmousewheel"in W.default.document?"mousewheel":"wheel"},supportsTouch:null,supportsPointerEvent:null,isIOS7:null,isIOS:null,isIe9:null,isOperaMobile:null,prefixedMatchesSelector:null,pEventTypes:null,wheelEvent:null};x.default=N;var $={};function me(l){var u=l.parentNode;if(R.default.docFrag(u)){for(;(u=u.host)&&R.default.docFrag(u););return u}return u}function oe(l,u){return T.window!==T.realWindow&&(u=u.replace(/\/deep\//g," ")),l[x.default.prefixedMatchesSelector](u)}Object.defineProperty($,"__esModule",{value:!0}),$.nodeContains=function(l,u){if(l.contains)return l.contains(u);for(;u;){if(u===l)return!0;u=u.parentNode}return!1},$.closest=function(l,u){for(;R.default.element(l);){if(oe(l,u))return l;l=me(l)}return null},$.parentNode=me,$.matchesSelector=oe,$.indexOfDeepestElement=function(l){for(var u,f=[],h=0;h<l.length;h++){var m=l[h],v=l[u];if(m&&h!==u)if(v){var b=Ne(m),y=Ne(v);if(b!==m.ownerDocument)if(y!==m.ownerDocument)if(b!==y){f=f.length?f:_t(v);var C=void 0;if(v instanceof W.default.HTMLElement&&m instanceof W.default.SVGElement&&!(m instanceof W.default.SVGSVGElement)){if(m===y)continue;C=m.ownerSVGElement}else C=m;for(var S=_t(C,v.ownerDocument),I=0;S[I]&&S[I]===f[I];)I++;var O=[S[I-1],S[I],f[I]];if(O[0])for(var U=O[0].lastChild;U;){if(U===O[1]){u=h,f=S;break}if(U===O[2])break;U=U.previousSibling}}else G=m,L=v,(parseInt(T.getWindow(G).getComputedStyle(G).zIndex,10)||0)>=(parseInt(T.getWindow(L).getComputedStyle(L).zIndex,10)||0)&&(u=h);else u=h}else u=h}var G,L;return u},$.matchesUpTo=function(l,u,f){for(;R.default.element(l);){if(oe(l,u))return!0;if((l=me(l))===f)return oe(l,u)}return!1},$.getActualElement=function(l){return l.correspondingUseElement||l},$.getScrollXY=re,$.getElementClientRect=ae,$.getElementRect=function(l){var u=ae(l);if(!x.default.isIOS7&&u){var f=re(T.getWindow(l));u.left+=f.x,u.right+=f.x,u.top+=f.y,u.bottom+=f.y}return u},$.getPath=function(l){for(var u=[];l;)u.push(l),l=me(l);return u},$.trySelector=function(l){return!!R.default.string(l)&&(W.default.document.querySelector(l),!0)};var Ne=function(l){return l.parentNode||l.host};function _t(l,u){for(var f,h=[],m=l;(f=Ne(m))&&m!==u&&f!==m.ownerDocument;)h.unshift(m),m=f;return h}function re(l){return{x:(l=l||T.window).scrollX||l.document.documentElement.scrollLeft,y:l.scrollY||l.document.documentElement.scrollTop}}function ae(l){var u=l instanceof W.default.SVGElement?l.getBoundingClientRect():l.getClientRects()[0];return u&&{left:u.left,right:u.right,top:u.top,bottom:u.bottom,width:u.width||u.right-u.left,height:u.height||u.bottom-u.top}}var ce={};Object.defineProperty(ce,"__esModule",{value:!0}),ce.default=function(l,u){for(var f in u)l[f]=u[f];return l};var Me={};function tt(l,u){(null==u||u>l.length)&&(u=l.length);for(var f=0,h=Array(u);f<u;f++)h[f]=l[f];return h}function en(l,u,f){return"parent"===l?(0,$.parentNode)(f):"self"===l?u.getRect(f):(0,$.closest)(f,l)}Object.defineProperty(Me,"__esModule",{value:!0}),Me.getStringOptionResult=en,Me.resolveRectLike=function(l,u,f,h){var m,v=l;return R.default.string(v)?v=en(v,u,f):R.default.func(v)&&(v=v.apply(void 0,function(b){if(Array.isArray(b))return tt(b)}(m=h)||function(b){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(b))return Array.from(b)}(m)||function(b,y){if(b){if("string"==typeof b)return tt(b,y);var C=Object.prototype.toString.call(b).slice(8,-1);return"Object"===C&&b.constructor&&(C=b.constructor.name),"Map"===C||"Set"===C?Array.from(b):"Arguments"===C||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C)?tt(b,y):void 0}}(m)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),R.default.element(v)&&(v=(0,$.getElementRect)(v)),v},Me.rectToXY=function(l){return l&&{x:"x"in l?l.x:l.left,y:"y"in l?l.y:l.top}},Me.xywhToTlbr=function(l){return!l||"left"in l&&"top"in l||((l=(0,ce.default)({},l)).left=l.x||0,l.top=l.y||0,l.right=l.right||l.left+l.width,l.bottom=l.bottom||l.top+l.height),l},Me.tlbrToXywh=function(l){return!l||"x"in l&&"y"in l||((l=(0,ce.default)({},l)).x=l.left||0,l.y=l.top||0,l.width=l.width||(l.right||0)-l.x,l.height=l.height||(l.bottom||0)-l.y),l},Me.addEdges=function(l,u,f){l.left&&(u.left+=f.x),l.right&&(u.right+=f.x),l.top&&(u.top+=f.y),l.bottom&&(u.bottom+=f.y),u.width=u.right-u.left,u.height=u.bottom-u.top};var xt={};Object.defineProperty(xt,"__esModule",{value:!0}),xt.default=function(l,u,f){var h=l.options[f],v=(0,Me.resolveRectLike)(h&&h.origin||l.options.origin,l,u,[l&&u]);return(0,Me.rectToXY)(v)||{x:0,y:0}};var Le={};function ko(l){return l.trim().split(/ +/)}Object.defineProperty(Le,"__esModule",{value:!0}),Le.default=function l(u,f,h){if(h=h||{},R.default.string(u)&&-1!==u.search(" ")&&(u=ko(u)),R.default.array(u))return u.reduce(function(C,S){return(0,ce.default)(C,l(S,f,h))},h);if(R.default.object(u)&&(f=u,u=""),R.default.func(f))h[u]=h[u]||[],h[u].push(f);else if(R.default.array(f))for(var m=0;m<f.length;m++)l(u,f[m],h);else if(R.default.object(f))for(var b in f){var y=ko(b).map(function(C){return"".concat(u).concat(C)});l(y,f[b],h)}return h};var Pe={};Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.default=void 0,Pe.default=function(l,u){return Math.sqrt(l*l+u*u)};var Ae={};function Qr(l,u){for(var f in u){var h=Qr.prefixedPropREs,m=!1;for(var v in h)if(0===f.indexOf(v)&&h[v].test(f)){m=!0;break}m||"function"==typeof u[f]||(l[f]=u[f])}return l}Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.default=void 0,Qr.prefixedPropREs={webkit:/(Movement[XY]|Radius[XY]|RotationAngle|Force)$/,moz:/(Pressure)$/},Ae.default=Qr;var pe={};function Wi(l){return l instanceof W.default.Event||l instanceof W.default.Touch}function Jr(l,u,f){return(f=f||{}).x=u[(l=l||"page")+"X"],f.y=u[l+"Y"],f}function Cr(l,u){return u=u||{x:0,y:0},x.default.isOperaMobile&&Wi(l)?(Jr("screen",l,u),u.x+=window.scrollX,u.y+=window.scrollY):Jr("page",l,u),u}function Er(l,u){return u=u||{},x.default.isOperaMobile&&Wi(l)?Jr("screen",l,u):Jr("client",l,u),u}function Ki(l){var u=[];return R.default.array(l)?(u[0]=l[0],u[1]=l[1]):"touchend"===l.type?1===l.touches.length?(u[0]=l.touches[0],u[1]=l.changedTouches[0]):0===l.touches.length&&(u[0]=l.changedTouches[0],u[1]=l.changedTouches[1]):(u[0]=l.touches[0],u[1]=l.touches[1]),u}function ms(l){for(var u={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},f=0;f<l.length;f++){var h=l[f];for(var m in u)u[m]+=h[m]}for(var v in u)u[v]/=l.length;return u}Object.defineProperty(pe,"__esModule",{value:!0}),pe.copyCoords=function(l,u){l.page=l.page||{},l.page.x=u.page.x,l.page.y=u.page.y,l.client=l.client||{},l.client.x=u.client.x,l.client.y=u.client.y,l.timeStamp=u.timeStamp},pe.setCoordDeltas=function(l,u,f){l.page.x=f.page.x-u.page.x,l.page.y=f.page.y-u.page.y,l.client.x=f.client.x-u.client.x,l.client.y=f.client.y-u.client.y,l.timeStamp=f.timeStamp-u.timeStamp},pe.setCoordVelocity=function(l,u){var f=Math.max(u.timeStamp/1e3,.001);l.page.x=u.page.x/f,l.page.y=u.page.y/f,l.client.x=u.client.x/f,l.client.y=u.client.y/f,l.timeStamp=f},pe.setZeroCoords=function(l){l.page.x=0,l.page.y=0,l.client.x=0,l.client.y=0},pe.isNativePointer=Wi,pe.getXY=Jr,pe.getPageXY=Cr,pe.getClientXY=Er,pe.getPointerId=function(l){return R.default.number(l.pointerId)?l.pointerId:l.identifier},pe.setCoords=function(l,u,f){var h=u.length>1?ms(u):u[0];Cr(h,l.page),Er(h,l.client),l.timeStamp=f},pe.getTouchPair=Ki,pe.pointerAverage=ms,pe.touchBBox=function(l){if(!l.length)return null;var u=Ki(l),f=Math.min(u[0].pageX,u[1].pageX),h=Math.min(u[0].pageY,u[1].pageY),m=Math.max(u[0].pageX,u[1].pageX),v=Math.max(u[0].pageY,u[1].pageY);return{x:f,y:h,left:f,top:h,right:m,bottom:v,width:m-f,height:v-h}},pe.touchDistance=function(l,u){var f=u+"X",h=u+"Y",m=Ki(l);return(0,Pe.default)(m[0][f]-m[1][f],m[0][h]-m[1][h])},pe.touchAngle=function(l,u){var f=u+"X",h=u+"Y",m=Ki(l);return 180*Math.atan2(m[1][h]-m[0][h],m[1][f]-m[0][f])/Math.PI},pe.getPointerType=function(l){return R.default.string(l.pointerType)?l.pointerType:R.default.number(l.pointerType)?[void 0,void 0,"touch","pen","mouse"][l.pointerType]:/touch/.test(l.type||"")||l instanceof W.default.Touch?"touch":"mouse"},pe.getEventTargets=function(l){var u=R.default.func(l.composedPath)?l.composedPath():l.path;return[$.getActualElement(u?u[0]:l.target),$.getActualElement(l.currentTarget)]},pe.newCoords=function(){return{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0}},pe.coordsToEvent=function(l){return{coords:l,get page(){return this.coords.page},get client(){return this.coords.client},get timeStamp(){return this.coords.timeStamp},get pageX(){return this.coords.page.x},get pageY(){return this.coords.page.y},get clientX(){return this.coords.client.x},get clientY(){return this.coords.client.y},get pointerId(){return this.coords.pointerId},get target(){return this.coords.target},get type(){return this.coords.type},get pointerType(){return this.coords.pointerType},get buttons(){return this.coords.buttons},preventDefault:function(){}}},Object.defineProperty(pe,"pointerExtend",{enumerable:!0,get:function(){return Ae.default}});var Sr={};function Zn(l,u,f){return u in l?Object.defineProperty(l,u,{value:f,enumerable:!0,configurable:!0,writable:!0}):l[u]=f,l}Object.defineProperty(Sr,"__esModule",{value:!0}),Sr.BaseEvent=void 0;var Zr=function(){function l(h){(function(m,v){if(!(m instanceof v))throw new TypeError("Cannot call a class as a function")})(this,l),Zn(this,"type",void 0),Zn(this,"target",void 0),Zn(this,"currentTarget",void 0),Zn(this,"interactable",void 0),Zn(this,"_interaction",void 0),Zn(this,"timeStamp",void 0),Zn(this,"immediatePropagationStopped",!1),Zn(this,"propagationStopped",!1),this._interaction=h}var f;return(f=[{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}])&&function vs(l,u){for(var f=0;f<u.length;f++){var h=u[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(l,h.key,h)}}(l.prototype,f),l}();Sr.BaseEvent=Zr,Object.defineProperty(Zr.prototype,"interaction",{get:function(){return this._interaction._proxy},set:function(){}});var ht={};Object.defineProperty(ht,"__esModule",{value:!0}),ht.find=ht.findIndex=ht.from=ht.merge=ht.remove=ht.contains=void 0,ht.contains=function(l,u){return-1!==l.indexOf(u)},ht.remove=function(l,u){return l.splice(l.indexOf(u),1)};var Dr=function(l,u){for(var f=0;f<u.length;f++)l.push(u[f]);return l};ht.merge=Dr,ht.from=function(l){return Dr([],l)};var ya=function(l,u){for(var f=0;f<l.length;f++)if(u(l[f],f,l))return f;return-1};ht.findIndex=ya,ht.find=function(l,u){return l[ya(l,u)]};var wr={};function vn(l){return(vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(l)}function Wt(l,u){return(Wt=Object.setPrototypeOf||function(f,h){return f.__proto__=h,f})(l,u)}function ba(l,u){return!u||"object"!==vn(u)&&"function"!=typeof u?mi(l):u}function mi(l){if(void 0===l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function Oo(l){return(Oo=Object.setPrototypeOf?Object.getPrototypeOf:function(u){return u.__proto__||Object.getPrototypeOf(u)})(l)}function Yi(l,u,f){return u in l?Object.defineProperty(l,u,{value:f,enumerable:!0,configurable:!0,writable:!0}):l[u]=f,l}Object.defineProperty(wr,"__esModule",{value:!0}),wr.DropEvent=void 0;var Ca=function(l){!function(y,C){if("function"!=typeof C&&null!==C)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(C&&C.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),C&&Wt(y,C)}(b,l);var f,h,m,v=(h=b,m=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(y){return!1}}(),function(){var y,C=Oo(h);if(m){var S=Oo(this).constructor;y=Reflect.construct(C,arguments,S)}else y=C.apply(this,arguments);return ba(this,y)});function b(y,C,S){var I;(function(L,ee){if(!(L instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,b),Yi(mi(I=v.call(this,C._interaction)),"target",void 0),Yi(mi(I),"dropzone",void 0),Yi(mi(I),"dragEvent",void 0),Yi(mi(I),"relatedTarget",void 0),Yi(mi(I),"draggable",void 0),Yi(mi(I),"timeStamp",void 0),Yi(mi(I),"propagationStopped",!1),Yi(mi(I),"immediatePropagationStopped",!1);var O="dragleave"===S?y.prev:y.cur,U=O.element,G=O.dropzone;return I.type=S,I.target=U,I.currentTarget=U,I.dropzone=G,I.dragEvent=C,I.relatedTarget=C.target,I.draggable=C.interactable,I.timeStamp=C.timeStamp,I}return(f=[{key:"reject",value:function(){var y=this,C=this._interaction.dropState;if("dropactivate"===this.type||this.dropzone&&C.cur.dropzone===this.dropzone&&C.cur.element===this.target)if(C.prev.dropzone=this.dropzone,C.prev.element=this.target,C.rejected=!0,C.events.enter=null,this.stopImmediatePropagation(),"dropactivate"===this.type){var I=ht.findIndex(C.activeDrops,function(U){return U.dropzone===y.dropzone&&U.element===y.target});C.activeDrops.splice(I,1);var O=new b(C,this.dragEvent,"dropdeactivate");O.dropzone=this.dropzone,O.target=this.target,this.dropzone.fire(O)}else this.dropzone.fire(new b(C,this.dragEvent,"dragleave"))}},{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}])&&function _a(l,u){for(var f=0;f<u.length;f++){var h=u[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(l,h.key,h)}}(b.prototype,f),b}(Sr.BaseEvent);wr.DropEvent=Ca;var cn={};function Au(l,u){for(var f=0;f<l.slice().length;f++){var h=l.slice()[f],m=h.dropzone,v=h.element;u.dropzone=m,u.target=v,m.fire(u),u.propagationStopped=u.immediatePropagationStopped=!1}}function Uc(l,u){for(var f=function(v,b){for(var y=v.interactables,C=[],S=0;S<y.list.length;S++){var I=y.list[S];if(I.options.drop.enabled){var O=I.options.drop.accept;if(!(R.default.element(O)&&O!==b||R.default.string(O)&&!$.matchesSelector(b,O)||R.default.func(O)&&!O({dropzone:I,draggableElement:b})))for(var U=R.default.string(I.target)?I._context.querySelectorAll(I.target):R.default.array(I.target)?I.target:[I.target],G=0;G<U.length;G++){var L=U[G];L!==b&&C.push({dropzone:I,element:L,rect:I.getRect(L)})}}}return C}(l,u),h=0;h<f.length;h++){var m=f[h];m.rect=m.dropzone.getRect(m.element)}return f}function Yh(l,u,f){for(var h=l.dropState,m=l.interactable,v=l.element,b=[],y=0;y<h.activeDrops.length;y++){var C=h.activeDrops[y],I=C.element;b.push(C.dropzone.dropCheck(u,f,m,v,I,C.rect)?I:null)}var U=$.indexOfDeepestElement(b);return h.activeDrops[U]||null}function vi(l,u,f){var h=l.dropState,m={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return"dragstart"===f.type&&(m.activate=new wr.DropEvent(h,f,"dropactivate"),m.activate.target=null,m.activate.dropzone=null),"dragend"===f.type&&(m.deactivate=new wr.DropEvent(h,f,"dropdeactivate"),m.deactivate.target=null,m.deactivate.dropzone=null),h.rejected||(h.cur.element!==h.prev.element&&(h.prev.dropzone&&(m.leave=new wr.DropEvent(h,f,"dragleave"),f.dragLeave=m.leave.target=h.prev.element,f.prevDropzone=m.leave.dropzone=h.prev.dropzone),h.cur.dropzone&&(m.enter=new wr.DropEvent(h,f,"dragenter"),f.dragEnter=h.cur.element,f.dropzone=h.cur.dropzone)),"dragend"===f.type&&h.cur.dropzone&&(m.drop=new wr.DropEvent(h,f,"drop"),f.dropzone=h.cur.dropzone,f.relatedTarget=h.cur.element),"dragmove"===f.type&&h.cur.dropzone&&(m.move=new wr.DropEvent(h,f,"dropmove"),m.move.dragmove=f,f.dropzone=h.cur.dropzone)),m}function ys(l,u){var f=l.dropState,h=f.activeDrops,m=f.cur;u.leave&&f.prev.dropzone.fire(u.leave),u.enter&&m.dropzone.fire(u.enter),u.move&&m.dropzone.fire(u.move),u.drop&&m.dropzone.fire(u.drop),u.deactivate&&Au(h,u.deactivate),f.prev.dropzone=m.dropzone,f.prev.element=m.element}function xu(l,u){var f=l.interaction,h=l.iEvent,m=l.event;if("dragmove"===h.type||"dragend"===h.type){var v=f.dropState;u.dynamicDrop&&(v.activeDrops=Uc(u,f.element));var b=h,y=Yh(f,b,m);v.rejected=v.rejected&&!!y&&y.dropzone===v.cur.dropzone&&y.element===v.cur.element,v.cur.dropzone=y&&y.dropzone,v.cur.element=y&&y.element,v.events=vi(f,0,b)}}Object.defineProperty(cn,"__esModule",{value:!0}),cn.default=void 0;var _s={id:"actions/drop",install:function(l){var u=l.actions,f=l.interactStatic,h=l.Interactable,m=l.defaults;l.usePlugin(k.default),h.prototype.dropzone=function(v){return function(b,y){if(R.default.object(y)){if(b.options.drop.enabled=!1!==y.enabled,y.listeners){var C=(0,Le.default)(y.listeners),S=Object.keys(C).reduce(function(I,O){return I[/^(enter|leave)/.test(O)?"drag".concat(O):/^(activate|deactivate|move)/.test(O)?"drop".concat(O):O]=C[O],I},{});b.off(b.options.drop.listeners),b.on(S),b.options.drop.listeners=S}return R.default.func(y.ondrop)&&b.on("drop",y.ondrop),R.default.func(y.ondropactivate)&&b.on("dropactivate",y.ondropactivate),R.default.func(y.ondropdeactivate)&&b.on("dropdeactivate",y.ondropdeactivate),R.default.func(y.ondragenter)&&b.on("dragenter",y.ondragenter),R.default.func(y.ondragleave)&&b.on("dragleave",y.ondragleave),R.default.func(y.ondropmove)&&b.on("dropmove",y.ondropmove),/^(pointer|center)$/.test(y.overlap)?b.options.drop.overlap=y.overlap:R.default.number(y.overlap)&&(b.options.drop.overlap=Math.max(Math.min(1,y.overlap),0)),"accept"in y&&(b.options.drop.accept=y.accept),"checker"in y&&(b.options.drop.checker=y.checker),b}return R.default.bool(y)?(b.options.drop.enabled=y,b):b.options.drop}(this,v)},h.prototype.dropCheck=function(v,b,y,C,S,I){return function(O,U,G,L,ee,ue,te){var be=!1;if(!(te=te||O.getRect(ue)))return!!O.options.drop.checker&&O.options.drop.checker(U,G,be,O,ue,L,ee);var ke=O.options.drop.overlap;if("pointer"===ke){var je=(0,xt.default)(L,ee,"drag"),pt=pe.getPageXY(U);pt.x+=je.x,pt.y+=je.y,be=pt.x>te.left&&pt.x<te.right&&pt.y>te.top&&pt.y<te.bottom}var gt=L.getRect(ee);if(gt&&"center"===ke){var Ir=gt.left+gt.width/2,jr=gt.top+gt.height/2;be=Ir>=te.left&&Ir<=te.right&&jr>=te.top&&jr<=te.bottom}return gt&&R.default.number(ke)&&(be=Math.max(0,Math.min(te.right,gt.right)-Math.max(te.left,gt.left))*Math.max(0,Math.min(te.bottom,gt.bottom)-Math.max(te.top,gt.top))/(gt.width*gt.height)>=ke),O.options.drop.checker&&(be=O.options.drop.checker(U,G,be,O,ue,L,ee)),be}(this,v,b,y,C,S,I)},f.dynamicDrop=function(v){return R.default.bool(v)?(l.dynamicDrop=v,f):l.dynamicDrop},(0,ce.default)(u.phaselessTypes,{dragenter:!0,dragleave:!0,dropactivate:!0,dropdeactivate:!0,dropmove:!0,drop:!0}),u.methodDict.drop="dropzone",l.dynamicDrop=!1,m.actions.drop=_s.defaults},listeners:{"interactions:before-action-start":function(l){var u=l.interaction;"drag"===u.prepared.name&&(u.dropState={cur:{dropzone:null,element:null},prev:{dropzone:null,element:null},rejected:null,events:null,activeDrops:[]})},"interactions:after-action-start":function(l,u){var f=l.interaction,h=l.iEvent;if("drag"===f.prepared.name){var m=f.dropState;m.activeDrops=null,m.events=null,m.activeDrops=Uc(u,f.element),m.events=vi(f,0,h),m.events.activate&&(Au(m.activeDrops,m.events.activate),u.fire("actions/drop:start",{interaction:f,dragEvent:h}))}},"interactions:action-move":xu,"interactions:after-action-move":function(l,u){var f=l.interaction,h=l.iEvent;"drag"===f.prepared.name&&(ys(f,f.dropState.events),u.fire("actions/drop:move",{interaction:f,dragEvent:h}),f.dropState.events={})},"interactions:action-end":function(l,u){if("drag"===l.interaction.prepared.name){var f=l.interaction,h=l.iEvent;xu(l,u),ys(f,f.dropState.events),u.fire("actions/drop:end",{interaction:f,dragEvent:h})}},"interactions:stop":function(l){var u=l.interaction;if("drag"===u.prepared.name){var f=u.dropState;f&&(f.activeDrops=null,f.events=null,f.cur.dropzone=null,f.cur.element=null,f.prev.dropzone=null,f.prev.element=null,f.rejected=!1)}}},getActiveDrops:Uc,getDrop:Yh,getDropEvents:vi,fireDropEvents:ys,defaults:{enabled:!1,accept:null,overlap:"pointer"}};cn.default=_s;var Ea={};function bs(l){var u=l.interaction,f=l.iEvent,h=l.phase;if("gesture"===u.prepared.name){var m=u.pointers.map(function(S){return S.pointer}),v="start"===h,b="end"===h,y=u.interactable.options.deltaSource;if(f.touches=[m[0],m[1]],v)f.distance=pe.touchDistance(m,y),f.box=pe.touchBBox(m),f.scale=1,f.ds=0,f.angle=pe.touchAngle(m,y),f.da=0,u.gesture.startDistance=f.distance,u.gesture.startAngle=f.angle;else if(b){var C=u.prevEvent;f.distance=C.distance,f.box=C.box,f.scale=C.scale,f.ds=0,f.angle=C.angle,f.da=0}else f.distance=pe.touchDistance(m,y),f.box=pe.touchBBox(m),f.scale=f.distance/u.gesture.startDistance,f.angle=pe.touchAngle(m,y),f.ds=f.scale-u.gesture.scale,f.da=f.angle-u.gesture.angle;u.gesture.distance=f.distance,u.gesture.angle=f.angle,R.default.number(f.scale)&&f.scale!==1/0&&!isNaN(f.scale)&&(u.gesture.scale=f.scale)}}Object.defineProperty(Ea,"__esModule",{value:!0}),Ea.default=void 0;var $c={id:"actions/gesture",before:["actions/drag","actions/resize"],install:function(l){var u=l.actions,h=l.defaults;l.Interactable.prototype.gesturable=function(m){return R.default.object(m)?(this.options.gesture.enabled=!1!==m.enabled,this.setPerAction("gesture",m),this.setOnEvents("gesture",m),this):R.default.bool(m)?(this.options.gesture.enabled=m,this):this.options.gesture},u.map.gesture=$c,u.methodDict.gesture="gesturable",h.actions.gesture=$c.defaults},listeners:{"interactions:action-start":bs,"interactions:action-move":bs,"interactions:action-end":bs,"interactions:new":function(l){l.interaction.gesture={angle:0,distance:0,scale:1,startAngle:0,startDistance:0}},"auto-start:check":function(l){if(!(l.interaction.pointers.length<2)){var u=l.interactable.options.gesture;if(u&&u.enabled)return l.action={name:"gesture"},!1}}},defaults:{},getCursor:function(){return""}};Ea.default=$c;var Hc={};function Zh(l,u,f,h,m,v,b){if(!u)return!1;if(!0===u){var y=R.default.number(v.width)?v.width:v.right-v.left,C=R.default.number(v.height)?v.height:v.bottom-v.top;if(b=Math.min(b,Math.abs(("left"===l||"right"===l?y:C)/2)),y<0&&("left"===l?l="right":"right"===l&&(l="left")),C<0&&("top"===l?l="bottom":"bottom"===l&&(l="top")),"left"===l)return f.x<(y>=0?v.left:v.right)+b;if("top"===l)return f.y<(C>=0?v.top:v.bottom)+b;if("right"===l)return f.x>(y>=0?v.right:v.left)-b;if("bottom"===l)return f.y>(C>=0?v.bottom:v.top)-b}return!!R.default.element(h)&&(R.default.element(u)?u===h:$.matchesUpTo(h,u,m))}function Pu(l){var f=l.interaction;if("resize"===f.prepared.name&&f.resizeAxes){var h=l.iEvent;f.interactable.options.resize.square?("y"===f.resizeAxes?h.delta.x=h.delta.y:h.delta.y=h.delta.x,h.axes="xy"):(h.axes=f.resizeAxes,"x"===f.resizeAxes?h.delta.y=0:"y"===f.resizeAxes&&(h.delta.x=0))}}Object.defineProperty(Hc,"__esModule",{value:!0}),Hc.default=void 0;var Xr={id:"actions/resize",before:["actions/drag"],install:function(l){var u=l.actions,f=l.browser,h=l.Interactable,m=l.defaults;Xr.cursors=f.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"},Xr.defaultMargin=f.supportsTouch||f.supportsPointerEvent?20:10,h.prototype.resizable=function(v){return b=this,C=l,R.default.object(y=v)?(b.options.resize.enabled=!1!==y.enabled,b.setPerAction("resize",y),b.setOnEvents("resize",y),R.default.string(y.axis)&&/^x$|^y$|^xy$/.test(y.axis)?b.options.resize.axis=y.axis:null===y.axis&&(b.options.resize.axis=C.defaults.actions.resize.axis),R.default.bool(y.preserveAspectRatio)?b.options.resize.preserveAspectRatio=y.preserveAspectRatio:R.default.bool(y.square)&&(b.options.resize.square=y.square),b):R.default.bool(y)?(b.options.resize.enabled=y,b):b.options.resize;var b,y,C},u.map.resize=Xr,u.methodDict.resize="resizable",m.actions.resize=Xr.defaults},listeners:{"interactions:new":function(l){l.interaction.resizeAxes="xy"},"interactions:action-start":function(l){(function(u){var h=u.interaction;if("resize"===h.prepared.name&&h.prepared.edges){var m=u.iEvent,v=h.rect;h._rects={start:(0,ce.default)({},v),corrected:(0,ce.default)({},v),previous:(0,ce.default)({},v),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},m.edges=h.prepared.edges,m.rect=h._rects.corrected,m.deltaRect=h._rects.delta}})(l),Pu(l)},"interactions:action-move":function(l){(function(u){var h=u.interaction;if("resize"===h.prepared.name&&h.prepared.edges){var m=u.iEvent,v=h.interactable.options.resize.invert,b="reposition"===v||"negate"===v,y=h.rect,C=h._rects,S=C.start,I=C.corrected,O=C.delta,U=C.previous;if((0,ce.default)(U,I),b){if((0,ce.default)(I,y),"reposition"===v){if(I.top>I.bottom){var G=I.top;I.top=I.bottom,I.bottom=G}if(I.left>I.right){var L=I.left;I.left=I.right,I.right=L}}}else I.top=Math.min(y.top,S.bottom),I.bottom=Math.max(y.bottom,S.top),I.left=Math.min(y.left,S.right),I.right=Math.max(y.right,S.left);for(var ee in I.width=I.right-I.left,I.height=I.bottom-I.top,I)O[ee]=I[ee]-U[ee];m.edges=h.prepared.edges,m.rect=I,m.deltaRect=O}})(l),Pu(l)},"interactions:action-end":function(l){var f=l.interaction;if("resize"===f.prepared.name&&f.prepared.edges){var h=l.iEvent;h.edges=f.prepared.edges,h.rect=f._rects.corrected,h.deltaRect=f._rects.delta}},"auto-start:check":function(l){var u=l.interaction,f=l.interactable,h=l.element,m=l.rect,v=l.buttons;if(m){var b=(0,ce.default)({},u.coords.cur.page),y=f.options.resize;if(y&&y.enabled&&(!u.pointerIsDown||!/mouse|pointer/.test(u.pointerType)||0!=(v&y.mouseButtons))){if(R.default.object(y.edges)){var C={left:!1,right:!1,top:!1,bottom:!1};for(var S in C)C[S]=Zh(S,y.edges[S],b,u._latestPointer.eventTarget,h,m,y.margin||Xr.defaultMargin);C.left=C.left&&!C.right,C.top=C.top&&!C.bottom,(C.left||C.right||C.top||C.bottom)&&(l.action={name:"resize",edges:C})}else{var I="y"!==y.axis&&b.x>m.right-Xr.defaultMargin,O="x"!==y.axis&&b.y>m.bottom-Xr.defaultMargin;(I||O)&&(l.action={name:"resize",axes:(I?"x":"")+(O?"y":"")})}return!l.action&&void 0}}}},defaults:{square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},cursors:null,getCursor:function(l){var u=l.edges,f=l.axis,m=Xr.cursors,v=null;if(f)v=m[l.name+f];else if(u){for(var b="",y=["top","bottom","left","right"],C=0;C<y.length;C++){var S=y[C];u[S]&&(b+=S)}v=m[b]}return v},defaultMargin:null};Hc.default=Xr;var Cs={};Object.defineProperty(Cs,"__esModule",{value:!0}),Cs.default=void 0,Cs.default={id:"actions",install:function(l){l.usePlugin(Ea.default),l.usePlugin(Hc.default),l.usePlugin(k.default),l.usePlugin(cn.default)}};var Xn={};Object.defineProperty(Xn,"__esModule",{value:!0}),Xn.default=void 0;var nt,ei,Ru=0;Xn.default={request:function(l){return nt(l)},cancel:function(l){return ei(l)},init:function(l){if(ei=l.cancelAnimationFrame,!(nt=l.requestAnimationFrame))for(var u=["ms","moz","webkit","o"],f=0;f<u.length;f++){var h=u[f];nt=l["".concat(h,"RequestAnimationFrame")],ei=l["".concat(h,"CancelAnimationFrame")]||l["".concat(h,"CancelRequestAnimationFrame")]}nt=nt&&nt.bind(l),ei=ei&&ei.bind(l),nt||(nt=function(m){var v=Date.now(),b=Math.max(0,16-(v-Ru)),y=l.setTimeout(function(){m(v+b)},b);return Ru=v+b,y},ei=function(m){return clearTimeout(m)})}};var De={};Object.defineProperty(De,"__esModule",{value:!0}),De.getContainer=zc,De.getScroll=Y,De.getScrollSize=function(l){return R.default.window(l)&&(l=window.document.body),{x:l.scrollWidth,y:l.scrollHeight}},De.getScrollSizeDelta=function(l,u){var f=l.interaction,h=l.element,m=f&&f.interactable.options[f.prepared.name].autoScroll;if(!m||!m.enabled)return u(),{x:0,y:0};var v=zc(m.container,f.interactable,h),b=Y(v);u();var y=Y(v);return{x:y.x-b.x,y:y.y-b.y}},De.default=void 0;var Re={defaults:{enabled:!1,margin:60,container:null,speed:300},now:Date.now,interaction:null,i:0,x:0,y:0,isScrolling:!1,prevTime:0,margin:0,speed:0,start:function(l){Re.isScrolling=!0,Xn.default.cancel(Re.i),l.autoScroll=Re,Re.interaction=l,Re.prevTime=Re.now(),Re.i=Xn.default.request(Re.scroll)},stop:function(){Re.isScrolling=!1,Re.interaction&&(Re.interaction.autoScroll=null),Xn.default.cancel(Re.i)},scroll:function(){var l=Re.interaction,u=l.interactable,f=l.element,m=u.options[l.prepared.name].autoScroll,v=zc(m.container,u,f),b=Re.now(),C=m.speed*((b-Re.prevTime)/1e3);if(C>=1){var S={x:Re.x*C,y:Re.y*C};if(S.x||S.y){var I=Y(v);R.default.window(v)?v.scrollBy(S.x,S.y):v&&(v.scrollLeft+=S.x,v.scrollTop+=S.y);var O=Y(v),U={x:O.x-I.x,y:O.y-I.y};(U.x||U.y)&&u.fire({type:"autoscroll",target:f,interactable:u,delta:U,interaction:l,container:v})}Re.prevTime=b}Re.isScrolling&&(Xn.default.cancel(Re.i),Re.i=Xn.default.request(Re.scroll))},check:function(l,u){var f;return null==(f=l.options[u].autoScroll)?void 0:f.enabled},onInteractionMove:function(l){var u=l.interaction,f=l.pointer;if(u.interacting()&&Re.check(u.interactable,u.prepared.name))if(u.simulation)Re.x=Re.y=0;else{var h,m,v,b,y=u.interactable,I=y.options[u.prepared.name].autoScroll,O=zc(I.container,y,u.element);if(R.default.window(O))b=f.clientX<Re.margin,h=f.clientY<Re.margin,m=f.clientX>O.innerWidth-Re.margin,v=f.clientY>O.innerHeight-Re.margin;else{var U=$.getElementClientRect(O);b=f.clientX<U.left+Re.margin,h=f.clientY<U.top+Re.margin,m=f.clientX>U.right-Re.margin,v=f.clientY>U.bottom-Re.margin}Re.x=m?1:b?-1:0,Re.y=v?1:h?-1:0,Re.isScrolling||(Re.margin=I.margin,Re.speed=I.speed,Re.start(u))}}};function zc(l,u,f){return(R.default.string(l)?(0,Me.getStringOptionResult)(l,u,f):l)||(0,T.getWindow)(f)}function Y(l){return R.default.window(l)&&(l=window.document.body),{x:l.scrollLeft,y:l.scrollTop}}De.default={id:"auto-scroll",install:function(l){var u=l.defaults,f=l.actions;l.autoScroll=Re,Re.now=function(){return l.now()},f.phaselessTypes.autoscroll=!0,u.perAction.autoScroll=Re.defaults},listeners:{"interactions:new":function(l){l.interaction.autoScroll=null},"interactions:destroy":function(l){l.interaction.autoScroll=null,Re.stop(),Re.interaction&&(Re.interaction=null)},"interactions:stop":Re.stop,"interactions:action-move":function(l){return Re.onInteractionMove(l)}}};var Se={};Object.defineProperty(Se,"__esModule",{value:!0}),Se.warnOnce=function(l,u){var f=!1;return function(){return f||(T.window.console.warn(u),f=!0),l.apply(this,arguments)}},Se.copyAction=function(l,u){return l.name=u.name,l.axis=u.axis,l.edges=u.edges,l},Se.sign=void 0,Se.sign=function(l){return l>=0?1:-1};var st={};function ep(l){return R.default.bool(l)?(this.options.styleCursor=l,this):null===l?(delete this.options.styleCursor,this):this.options.styleCursor}function a_(l){return R.default.func(l)?(this.options.actionChecker=l,this):null===l?(delete this.options.actionChecker,this):this.options.actionChecker}Object.defineProperty(st,"__esModule",{value:!0}),st.default=void 0,st.default={id:"auto-start/interactableMethods",install:function(l){var u=l.Interactable;u.prototype.getAction=function(f,h,m,v){var y,C,S,I,O,U,G,b=(C=h,S=m,O=l,U=(y=this).getRect(I=v),O.fire("auto-start:check",G={action:null,interactable:y,interaction:S,element:I,rect:U,buttons:C.buttons||{0:1,1:4,3:8,4:16}[C.button]}),G.action);return this.options.actionChecker?this.options.actionChecker(f,h,b,this,v,m):b},u.prototype.ignoreFrom=(0,Se.warnOnce)(function(f){return this._backCompatOption("ignoreFrom",f)},"Interactable.ignoreFrom() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),u.prototype.allowFrom=(0,Se.warnOnce)(function(f){return this._backCompatOption("allowFrom",f)},"Interactable.allowFrom() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),u.prototype.actionChecker=a_,u.prototype.styleCursor=ep}};var ti={};function Vn(l,u,f,h,m){return u.testIgnoreAllow(u.options[l.name],f,h)&&u.options[l.name].enabled&&dr(u,f,l,m)?l:null}function c_(l,u,f,h,m,v,b){for(var y=0,C=h.length;y<C;y++){var S=h[y],I=m[y],O=S.getAction(u,f,l,I);if(O){var U=Vn(O,S,I,v,b);if(U)return{action:U,interactable:S,element:I}}}return{action:null,interactable:null,element:null}}function ku(l,u,f,h,m){var v=[],b=[],y=h;function C(I){v.push(I),b.push(y)}for(;R.default.element(y);){v=[],b=[],m.interactables.forEachMatch(y,C);var S=c_(l,u,f,v,b,h,m);if(S.action&&!S.interactable.options[S.action.name].manualStart)return S;y=$.parentNode(y)}return{action:null,interactable:null,element:null}}function np(l,u,f){var h=u.action,m=u.interactable,v=u.element;h=h||{name:null},l.interactable=m,l.element=v,(0,Se.copyAction)(l.prepared,h),l.rect=m&&h.name?m.getRect(v):null,ip(l,f),f.fire("autoStart:prepared",{interaction:l})}function dr(l,u,f,h){var m=l.options,v=m[f.name].max,b=m[f.name].maxPerElement,y=h.autoStart.maxInteractions,C=0,S=0,I=0;if(!(v&&b&&y))return!1;for(var O=0;O<h.interactions.list.length;O++){var U=h.interactions.list[O],G=U.prepared.name;if(U.interacting()&&(++C>=y||U.interactable===l&&((S+=G===f.name?1:0)>=v||U.element===u&&(I++,G===f.name&&I>=b))))return!1}return y>0}function rp(l,u){return R.default.number(l)?(u.autoStart.maxInteractions=l,this):u.autoStart.maxInteractions}function Ou(l,u,f){var h=f.autoStart.cursorElement;h&&h!==l&&(h.style.cursor=""),l.ownerDocument.documentElement.style.cursor=u,l.style.cursor=u,f.autoStart.cursorElement=u?l:null}function ip(l,u){var f=l.interactable,h=l.element,m=l.prepared;if("mouse"===l.pointerType&&f&&f.options.styleCursor){var v="";if(m.name){var b=f.options[m.name].cursorChecker;v=R.default.func(b)?b(m,f,h,l._interacting):u.actions.map[m.name].getCursor(m)}Ou(l.element,v||"",u)}else u.autoStart.cursorElement&&Ou(u.autoStart.cursorElement,"",u)}Object.defineProperty(ti,"__esModule",{value:!0}),ti.default=void 0,ti.default={id:"auto-start/base",before:["actions"],install:function(l){var u=l.interactStatic,f=l.defaults;l.usePlugin(st.default),f.base.actionChecker=null,f.base.styleCursor=!0,(0,ce.default)(f.perAction,{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}),u.maxInteractions=function(h){return rp(h,l)},l.autoStart={maxInteractions:1/0,withinInteractionLimit:dr,cursorElement:null}},listeners:{"interactions:down":function(l,u){var f=l.interaction,h=l.pointer,m=l.event,v=l.eventTarget;f.interacting()||np(f,ku(f,h,m,v,u),u)},"interactions:move":function(l,u){var f,h,m,v,b,y;h=u,v=(f=l).pointer,b=f.event,y=f.eventTarget,"mouse"!==(m=f.interaction).pointerType||m.pointerIsDown||m.interacting()||np(m,ku(m,v,b,y,h),h),function(f,h){var m=f.interaction;if(m.pointerIsDown&&!m.interacting()&&m.pointerWasMoved&&m.prepared.name){h.fire("autoStart:before-start",f);var v=m.interactable,b=m.prepared.name;b&&v&&(v.options[b].manualStart||!dr(v,m.element,m.prepared,h)?m.stop():(m.start(m.prepared,v,m.element),ip(m,h)))}}(l,u)},"interactions:stop":function(l,u){var f=l.interaction,h=f.interactable;h&&h.options.styleCursor&&Ou(f.element,"",u)}},maxInteractions:rp,withinInteractionLimit:dr,validateAction:Vn};var Da={};Object.defineProperty(Da,"__esModule",{value:!0}),Da.default=void 0,Da.default={id:"auto-start/dragAxis",listeners:{"autoStart:before-start":function(l,u){var f=l.interaction,h=l.eventTarget,v=l.dy;if("drag"===f.prepared.name){var b=Math.abs(l.dx),y=Math.abs(v),C=f.interactable.options.drag,S=C.startAxis,I=b>y?"x":b<y?"y":"xy";if(f.prepared.axis="start"===C.lockAxis?I[0]:C.lockAxis,"xy"!==I&&"xy"!==S&&S!==I){f.prepared.name=null;for(var O=h,U=function(L){if(L!==f.interactable){var ee=f.interactable.options.drag;if(!ee.manualStart&&L.testIgnoreAllow(ee,O,h)){var ue=L.getAction(f.downPointer,f.downEvent,f,O);if(ue&&"drag"===ue.name&&function(te,be){if(!be)return!1;var ke=be.options.drag.startAxis;return"xy"===te||"xy"===ke||ke===te}(I,L)&&ti.default.validateAction(ue,L,O,h,u))return L}}};R.default.element(O);){var G=u.interactables.forEachMatch(O,U);if(G){f.prepared.name="drag",f.interactable=G,f.element=O;break}O=(0,$.parentNode)(O)}}}}}};var wa={};function Fu(l){var u=l.prepared&&l.prepared.name;if(!u)return null;var f=l.interactable.options;return f[u].hold||f[u].delay}Object.defineProperty(wa,"__esModule",{value:!0}),wa.default=void 0,wa.default={id:"auto-start/hold",install:function(l){var u=l.defaults;l.usePlugin(ti.default),u.perAction.hold=0,u.perAction.delay=0},listeners:{"interactions:new":function(l){l.interaction.autoStartHoldTimer=null},"autoStart:prepared":function(l){var u=l.interaction,f=Fu(u);f>0&&(u.autoStartHoldTimer=setTimeout(function(){u.start(u.prepared,u.interactable,u.element)},f))},"interactions:move":function(l){var u=l.interaction;u.autoStartHoldTimer&&u.pointerWasMoved&&!l.duplicate&&(clearTimeout(u.autoStartHoldTimer),u.autoStartHoldTimer=null)},"autoStart:before-start":function(l){var u=l.interaction;Fu(u)>0&&(u.prepared.name=null)}},getHoldDuration:Fu};var at={};Object.defineProperty(at,"__esModule",{value:!0}),at.default=void 0,at.default={id:"auto-start",install:function(l){l.usePlugin(ti.default),l.usePlugin(wa.default),l.usePlugin(Da.default)}};var Es={};function f_(l){return/^(always|never|auto)$/.test(l)?(this.options.preventDefault=l,this):R.default.bool(l)?(this.options.preventDefault=l?"always":"never",this):this.options.preventDefault}function de(l){var u=l.interaction;u.interactable&&u.interactable.checkAndPreventDefault(l.event)}function op(l){var u=l.Interactable;u.prototype.preventDefault=f_,u.prototype.checkAndPreventDefault=function(f){return function(h,m,v){var b=h.options.preventDefault;if("never"!==b)if("always"!==b){if(m.events.supportsPassive&&/^touch(start|move)$/.test(v.type)){var y=(0,T.getWindow)(v.target).document,C=m.getDocOptions(y);if(!C||!C.events||!1!==C.events.passive)return}/^(mouse|pointer|touch)*(down|start)/i.test(v.type)||R.default.element(v.target)&&(0,$.matchesSelector)(v.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||v.preventDefault()}else v.preventDefault()}(this,l,f)},l.interactions.docEvents.push({type:"dragstart",listener:function(f){for(var h=0;h<l.interactions.list.length;h++){var m=l.interactions.list[h];if(m.element&&(m.element===f.target||(0,$.nodeContains)(m.element,f.target)))return void m.interactable.checkAndPreventDefault(f)}}})}Object.defineProperty(Es,"__esModule",{value:!0}),Es.install=op,Es.default=void 0;var Lt={id:"core/interactablePreventDefault",install:op,listeners:["down","move","up","cancel"].reduce(function(l,u){return l["interactions:".concat(u)]=de,l},{})};Es.default=Lt;var Fo={};Object.defineProperty(Fo,"__esModule",{value:!0}),Fo.default=void 0,Fo.default={};var Ss,l,Ta={};Object.defineProperty(Ta,"__esModule",{value:!0}),Ta.default=void 0,(l=Ss||(Ss={})).touchAction="touchAction",l.boxSizing="boxSizing",l.noListeners="noListeners",Ta.default={id:"dev-tools",install:function(){}};var Qi={};Object.defineProperty(Qi,"__esModule",{value:!0}),Qi.default=function l(u){var f={};for(var h in u){var m=u[h];f[h]=R.default.plainObject(m)?l(m):R.default.array(m)?ht.from(m):m}return f};var yi={};function Ds(l,u){return function(f){if(Array.isArray(f))return f}(l)||function(f,h){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(f)){var m=[],v=!0,b=!1,y=void 0;try{for(var C,S=f[Symbol.iterator]();!(v=(C=S.next()).done)&&(m.push(C.value),!h||m.length!==h);v=!0);}catch(I){b=!0,y=I}finally{try{v||null==S.return||S.return()}finally{if(b)throw y}}return m}}(l,u)||function(f,h){if(f){if("string"==typeof f)return Ma(f,h);var m=Object.prototype.toString.call(f).slice(8,-1);return"Object"===m&&f.constructor&&(m=f.constructor.name),"Map"===m||"Set"===m?Array.from(f):"Arguments"===m||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m)?Ma(f,h):void 0}}(l,u)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ma(l,u){(null==u||u>l.length)&&(u=l.length);for(var f=0,h=Array(u);f<u;f++)h[f]=l[f];return h}function Ji(l,u,f){return u in l?Object.defineProperty(l,u,{value:f,enumerable:!0,configurable:!0,writable:!0}):l[u]=f,l}Object.defineProperty(yi,"__esModule",{value:!0}),yi.getRectOffset=Lu,yi.default=void 0;var xe=function(){function l(h){(function(m,v){if(!(m instanceof v))throw new TypeError("Cannot call a class as a function")})(this,l),Ji(this,"states",[]),Ji(this,"startOffset",{left:0,right:0,top:0,bottom:0}),Ji(this,"startDelta",void 0),Ji(this,"result",void 0),Ji(this,"endResult",void 0),Ji(this,"edges",void 0),Ji(this,"interaction",void 0),this.interaction=h,this.result=No()}var f;return(f=[{key:"start",value:function(h,m){var S,I,O,v=h.phase,b=this.interaction,y=(O=(I=(S=b).interactable.options[S.prepared.name]).modifiers)&&O.length?O:["snap","snapSize","snapEdges","restrict","restrictEdges","restrictSize"].map(function(U){var G=I[U];return G&&G.enabled&&{options:G,methods:G._methods}}).filter(function(U){return!!U});this.prepareStates(y),this.edges=(0,ce.default)({},b.edges),this.startOffset=Lu(b.rect,m),this.startDelta={x:0,y:0};var C=this.fillArg({phase:v,pageCoords:m,preEnd:!1});return this.result=No(),this.startAll(C),this.result=this.setAll(C)}},{key:"fillArg",value:function(h){var m=this.interaction;return h.interaction=m,h.interactable=m.interactable,h.element=m.element,h.rect=h.rect||m.rect,h.edges=this.edges,h.startOffset=this.startOffset,h}},{key:"startAll",value:function(h){for(var m=0;m<this.states.length;m++){var v=this.states[m];v.methods.start&&(h.state=v,v.methods.start(h))}}},{key:"setAll",value:function(h){var m=h.phase,v=h.preEnd,b=h.skipModifiers,y=h.rect;h.coords=(0,ce.default)({},h.pageCoords),h.rect=(0,ce.default)({},y);for(var C=b?this.states.slice(b):this.states,S=No(h.coords,h.rect),I=0;I<C.length;I++){var O,U=C[I],G=U.options,L=(0,ce.default)({},h.coords),ee=null;null!=(O=U.methods)&&O.set&&this.shouldDo(G,v,m)&&(h.state=U,ee=U.methods.set(h),Me.addEdges(this.interaction.edges,h.rect,{x:h.coords.x-L.x,y:h.coords.y-L.y})),S.eventProps.push(ee)}S.delta.x=h.coords.x-h.pageCoords.x,S.delta.y=h.coords.y-h.pageCoords.y,S.rectDelta.left=h.rect.left-y.left,S.rectDelta.right=h.rect.right-y.right,S.rectDelta.top=h.rect.top-y.top,S.rectDelta.bottom=h.rect.bottom-y.bottom;var ue=this.result.coords,te=this.result.rect;return ue&&te&&(S.changed=S.rect.left!==te.left||S.rect.right!==te.right||S.rect.top!==te.top||S.rect.bottom!==te.bottom||ue.x!==S.coords.x||ue.y!==S.coords.y),S}},{key:"applyToInteraction",value:function(h){var m=this.interaction,b=m.coords.cur,y=m.coords.start,C=this.result,S=this.startDelta,I=C.delta;"start"===h.phase&&(0,ce.default)(this.startDelta,C.delta);for(var O=0;O<[[y,S],[b,I]].length;O++){var U=Ds([[y,S],[b,I]][O],2),G=U[0],L=U[1];G.page.x+=L.x,G.page.y+=L.y,G.client.x+=L.x,G.client.y+=L.y}var ee=this.result.rectDelta,ue=h.rect||m.rect;ue.left+=ee.left,ue.right+=ee.right,ue.top+=ee.top,ue.bottom+=ee.bottom,ue.width=ue.right-ue.left,ue.height=ue.bottom-ue.top}},{key:"setAndApply",value:function(h){var m=this.interaction,y=h.skipModifiers,C=this.setAll(this.fillArg({preEnd:h.preEnd,phase:h.phase,pageCoords:h.modifiedCoords||m.coords.cur.page}));if(this.result=C,!C.changed&&(!y||y<this.states.length)&&m.interacting())return!1;if(h.modifiedCoords){var S=m.coords.cur.page,I={x:h.modifiedCoords.x-S.x,y:h.modifiedCoords.y-S.y};C.coords.x+=I.x,C.coords.y+=I.y,C.delta.x+=I.x,C.delta.y+=I.y}this.applyToInteraction(h)}},{key:"beforeEnd",value:function(h){var m=h.interaction,v=h.event,b=this.states;if(b&&b.length){for(var y=!1,C=0;C<b.length;C++){var S=b[C];h.state=S;var I=S.options,O=S.methods,U=O.beforeEnd&&O.beforeEnd(h);if(U)return this.endResult=U,!1;y=y||!y&&this.shouldDo(I,!0,h.phase,!0)}y&&m.move({event:v,preEnd:!0})}}},{key:"stop",value:function(h){var m=h.interaction;if(this.states&&this.states.length){var v=(0,ce.default)({states:this.states,interactable:m.interactable,element:m.element,rect:null},h);this.fillArg(v);for(var b=0;b<this.states.length;b++){var y=this.states[b];v.state=y,y.methods.stop&&y.methods.stop(v)}this.states=null,this.endResult=null}}},{key:"prepareStates",value:function(h){this.states=[];for(var m=0;m<h.length;m++){var v=h[m];this.states.push({options:v.options,methods:v.methods,index:m,name:v.name})}return this.states}},{key:"restoreInteractionCoords",value:function(h){var m=h.interaction,v=m.coords,b=m.rect,y=m.modification;if(y.result){for(var S=y.result,O=S.rectDelta,U=[[v.start,y.startDelta],[v.cur,S.delta]],G=0;G<U.length;G++){var L=Ds(U[G],2),ee=L[0],ue=L[1];ee.page.x-=ue.x,ee.page.y-=ue.y,ee.client.x-=ue.x,ee.client.y-=ue.y}b.left-=O.left,b.right-=O.right,b.top-=O.top,b.bottom-=O.bottom}}},{key:"shouldDo",value:function(h,m,v,b){return!(!h||!1===h.enabled||b&&!h.endOnly||h.endOnly&&!m||"start"===v&&!h.setStart)}},{key:"copyFrom",value:function(h){this.startOffset=h.startOffset,this.startDelta=h.startDelta,this.edges=h.edges,this.states=h.states.map(function(m){return(0,Qi.default)(m)}),this.result=No((0,ce.default)({},h.result.coords),(0,ce.default)({},h.result.rect))}},{key:"destroy",value:function(){for(var h in this)this[h]=null}}])&&function Nu(l,u){for(var f=0;f<u.length;f++){var h=u[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(l,h.key,h)}}(l.prototype,f),l}();function No(l,u){return{rect:u,coords:l,delta:{x:0,y:0},rectDelta:{left:0,right:0,top:0,bottom:0},eventProps:[],changed:!0}}function Lu(l,u){return l?{left:u.x-l.left,top:u.y-l.top,right:l.right-u.x,bottom:l.bottom-u.y}:{left:0,top:0,right:0,bottom:0}}yi.default=xe;var Dt={};function ws(l){var f=l.interaction.modification.result;f&&(l.iEvent.modifiers=f.eventProps)}Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.makeModifier=function(l,u){var f=l.defaults,h={start:l.start,set:l.set,beforeEnd:l.beforeEnd,stop:l.stop},m=function(v){var b=v||{};for(var y in b.enabled=!1!==b.enabled,f)y in b||(b[y]=f[y]);var C={options:b,methods:h,name:u,enable:function(){return b.enabled=!0,C},disable:function(){return b.enabled=!1,C}};return C};return u&&"string"==typeof u&&(m._defaults=f,m._methods=h),m},Dt.addEventModifiers=ws,Dt.default=void 0,Dt.default={id:"modifiers/base",before:["actions"],install:function(l){l.defaults.perAction.modifiers=[]},listeners:{"interactions:new":function(l){var u=l.interaction;u.modification=new yi.default(u)},"interactions:before-action-start":function(l){var u=l.interaction.modification;u.start(l,l.interaction.coords.start.page),l.interaction.edges=u.edges,u.applyToInteraction(l)},"interactions:before-action-move":function(l){return l.interaction.modification.setAndApply(l)},"interactions:before-action-end":function(l){return l.interaction.modification.beforeEnd(l)},"interactions:action-start":ws,"interactions:action-move":ws,"interactions:action-end":ws,"interactions:after-action-start":function(l){return l.interaction.modification.restoreInteractionCoords(l)},"interactions:after-action-move":function(l){return l.interaction.modification.restoreInteractionCoords(l)},"interactions:stop":function(l){return l.interaction.modification.stop(l)}}};var fr={};Object.defineProperty(fr,"__esModule",{value:!0}),fr.defaults=void 0,fr.defaults={base:{preventDefault:"auto",deltaSource:"page"},perAction:{enabled:!1,origin:{x:0,y:0}},actions:{}};var xn={};function ap(l){return(ap="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(l)}function hr(l,u){return(hr=Object.setPrototypeOf||function(f,h){return f.__proto__=h,f})(l,u)}function Rt(l,u){return!u||"object"!==ap(u)&&"function"!=typeof u?bt(l):u}function bt(l){if(void 0===l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function ju(l){return(ju=Object.setPrototypeOf?Object.getPrototypeOf:function(u){return u.__proto__||Object.getPrototypeOf(u)})(l)}function ct(l,u,f){return u in l?Object.defineProperty(l,u,{value:f,enumerable:!0,configurable:!0,writable:!0}):l[u]=f,l}Object.defineProperty(xn,"__esModule",{value:!0}),xn.InteractEvent=void 0;var dt=function(l){!function(y,C){if("function"!=typeof C&&null!==C)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(C&&C.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),C&&hr(y,C)}(b,l);var f,h,m,v=(h=b,m=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(y){return!1}}(),function(){var y,C=ju(h);if(m){var S=ju(this).constructor;y=Reflect.construct(C,arguments,S)}else y=C.apply(this,arguments);return Rt(this,y)});function b(y,C,S,I,O,U,G){var L;(function(yt,Je){if(!(yt instanceof Je))throw new TypeError("Cannot call a class as a function")})(this,b),ct(bt(L=v.call(this,y)),"target",void 0),ct(bt(L),"currentTarget",void 0),ct(bt(L),"relatedTarget",null),ct(bt(L),"screenX",void 0),ct(bt(L),"screenY",void 0),ct(bt(L),"button",void 0),ct(bt(L),"buttons",void 0),ct(bt(L),"ctrlKey",void 0),ct(bt(L),"shiftKey",void 0),ct(bt(L),"altKey",void 0),ct(bt(L),"metaKey",void 0),ct(bt(L),"page",void 0),ct(bt(L),"client",void 0),ct(bt(L),"delta",void 0),ct(bt(L),"rect",void 0),ct(bt(L),"x0",void 0),ct(bt(L),"y0",void 0),ct(bt(L),"t0",void 0),ct(bt(L),"dt",void 0),ct(bt(L),"duration",void 0),ct(bt(L),"clientX0",void 0),ct(bt(L),"clientY0",void 0),ct(bt(L),"velocity",void 0),ct(bt(L),"speed",void 0),ct(bt(L),"swipe",void 0),ct(bt(L),"timeStamp",void 0),ct(bt(L),"axes",void 0),ct(bt(L),"preEnd",void 0);var ee=y.interactable,ue=(ee&&ee.options||fr.defaults).deltaSource,te=(0,xt.default)(ee,O=O||y.element,S),be="start"===I,ke="end"===I,je=be?bt(L):y.prevEvent,pt=be?y.coords.start:ke?{page:je.page,client:je.client,timeStamp:y.coords.cur.timeStamp}:y.coords.cur;return L.page=(0,ce.default)({},pt.page),L.client=(0,ce.default)({},pt.client),L.rect=(0,ce.default)({},y.rect),L.timeStamp=pt.timeStamp,ke||(L.page.x-=te.x,L.page.y-=te.y,L.client.x-=te.x,L.client.y-=te.y),L.ctrlKey=C.ctrlKey,L.altKey=C.altKey,L.shiftKey=C.shiftKey,L.metaKey=C.metaKey,L.button=C.button,L.buttons=C.buttons,L.target=O,L.currentTarget=O,L.preEnd=U,L.type=G||S+(I||""),L.interactable=ee,L.t0=be?y.pointers[y.pointers.length-1].downTime:je.t0,L.x0=y.coords.start.page.x-te.x,L.y0=y.coords.start.page.y-te.y,L.clientX0=y.coords.start.client.x-te.x,L.clientY0=y.coords.start.client.y-te.y,L.delta=be||ke?{x:0,y:0}:{x:L[ue].x-je[ue].x,y:L[ue].y-je[ue].y},L.dt=y.coords.delta.timeStamp,L.duration=L.timeStamp-L.t0,L.velocity=(0,ce.default)({},y.coords.velocity[ue]),L.speed=(0,Pe.default)(L.velocity.x,L.velocity.y),L.swipe=ke||"inertiastart"===I?L.getSwipe():null,L}return(f=[{key:"getSwipe",value:function(){var y=this._interaction;if(y.prevEvent.speed<600||this.timeStamp-y.prevEvent.timeStamp>150)return null;var C=180*Math.atan2(y.prevEvent.velocityY,y.prevEvent.velocityX)/Math.PI;C<0&&(C+=360);var S=112.5<=C&&C<247.5,I=202.5<=C&&C<337.5;return{up:I,down:!I&&22.5<=C&&C<157.5,left:S,right:!S&&(292.5<=C||C<67.5),angle:C,speed:y.prevEvent.speed,velocity:{x:y.prevEvent.velocityX,y:y.prevEvent.velocityY}}}},{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}])&&function p_(l,u){for(var f=0;f<u.length;f++){var h=u[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(l,h.key,h)}}(b.prototype,f),b}(Sr.BaseEvent);xn.InteractEvent=dt,Object.defineProperties(dt.prototype,{pageX:{get:function(){return this.page.x},set:function(l){this.page.x=l}},pageY:{get:function(){return this.page.y},set:function(l){this.page.y=l}},clientX:{get:function(){return this.client.x},set:function(l){this.client.x=l}},clientY:{get:function(){return this.client.y},set:function(l){this.client.y=l}},dx:{get:function(){return this.delta.x},set:function(l){this.delta.x=l}},dy:{get:function(){return this.delta.y},set:function(l){this.delta.y=l}},velocityX:{get:function(){return this.velocity.x},set:function(l){this.velocity.x=l}},velocityY:{get:function(){return this.velocity.y},set:function(l){this.velocity.y=l}}});var _i={};function Zi(l,u,f){return u in l?Object.defineProperty(l,u,{value:f,enumerable:!0,configurable:!0,writable:!0}):l[u]=f,l}Object.defineProperty(_i,"__esModule",{value:!0}),_i.PointerInfo=void 0,_i.PointerInfo=function l(u,f,h,m,v){(function(b,y){if(!(b instanceof y))throw new TypeError("Cannot call a class as a function")})(this,l),Zi(this,"id",void 0),Zi(this,"pointer",void 0),Zi(this,"event",void 0),Zi(this,"downTime",void 0),Zi(this,"downTarget",void 0),this.id=u,this.pointer=f,this.event=h,this.downTime=m,this.downTarget=v};var Lo,Ts,Kt={};function zt(l,u,f){return u in l?Object.defineProperty(l,u,{value:f,enumerable:!0,configurable:!0,writable:!0}):l[u]=f,l}Object.defineProperty(Kt,"__esModule",{value:!0}),Object.defineProperty(Kt,"PointerInfo",{enumerable:!0,get:function(){return _i.PointerInfo}}),Kt.default=Kt.Interaction=Kt._ProxyMethods=Kt._ProxyValues=void 0,Kt._ProxyValues=Lo,function(l){l.interactable="",l.element="",l.prepared="",l.pointerIsDown="",l.pointerWasMoved="",l._proxy=""}(Lo||(Kt._ProxyValues=Lo={})),Kt._ProxyMethods=Ts,function(l){l.start="",l.move="",l.end="",l.stop="",l.interacting=""}(Ts||(Kt._ProxyMethods=Ts={}));var yn=0,Vu=function(){function l(h){var m=this,v=h.pointerType,b=h.scopeFire;(function(U,G){if(!(U instanceof G))throw new TypeError("Cannot call a class as a function")})(this,l),zt(this,"interactable",null),zt(this,"element",null),zt(this,"rect",void 0),zt(this,"_rects",void 0),zt(this,"edges",void 0),zt(this,"_scopeFire",void 0),zt(this,"prepared",{name:null,axis:null,edges:null}),zt(this,"pointerType",void 0),zt(this,"pointers",[]),zt(this,"downEvent",null),zt(this,"downPointer",{}),zt(this,"_latestPointer",{pointer:null,event:null,eventTarget:null}),zt(this,"prevEvent",null),zt(this,"pointerIsDown",!1),zt(this,"pointerWasMoved",!1),zt(this,"_interacting",!1),zt(this,"_ending",!1),zt(this,"_stopped",!0),zt(this,"_proxy",null),zt(this,"simulation",null),zt(this,"doMove",(0,Se.warnOnce)(function(U){this.move(U)},"The interaction.doMove() method has been renamed to interaction.move()")),zt(this,"coords",{start:pe.newCoords(),prev:pe.newCoords(),cur:pe.newCoords(),delta:pe.newCoords(),velocity:pe.newCoords()}),zt(this,"_id",yn++),this._scopeFire=b,this.pointerType=v;var y=this;this._proxy={};var C=function(U){Object.defineProperty(m._proxy,U,{get:function(){return y[U]}})};for(var S in Lo)C(S);var I=function(U){Object.defineProperty(m._proxy,U,{value:function(){return y[U].apply(y,arguments)}})};for(var O in Ts)I(O);this._scopeFire("interactions:new",{interaction:this})}var f;return(f=[{key:"pointerMoveTolerance",get:function(){return 1}},{key:"pointerDown",value:function(h,m,v){var b=this.updatePointer(h,m,v,!0);this._scopeFire("interactions:down",{pointer:h,event:m,eventTarget:v,pointerIndex:b,pointerInfo:this.pointers[b],type:"down",interaction:this})}},{key:"start",value:function(h,m,v){return!(this.interacting()||!this.pointerIsDown||this.pointers.length<("gesture"===h.name?2:1)||!m.options[h.name].enabled)&&((0,Se.copyAction)(this.prepared,h),this.interactable=m,this.element=v,this.rect=m.getRect(v),this.edges=this.prepared.edges?(0,ce.default)({},this.prepared.edges):{left:!0,right:!0,top:!0,bottom:!0},this._stopped=!1,this._interacting=this._doPhase({interaction:this,event:this.downEvent,phase:"start"})&&!this._stopped,this._interacting)}},{key:"pointerMove",value:function(h,m,v){this.simulation||this.modification&&this.modification.endResult||this.updatePointer(h,m,v,!1);var b,y,C=this.coords.cur.page.x===this.coords.prev.page.x&&this.coords.cur.page.y===this.coords.prev.page.y&&this.coords.cur.client.x===this.coords.prev.client.x&&this.coords.cur.client.y===this.coords.prev.client.y;this.pointerIsDown&&!this.pointerWasMoved&&(this.pointerWasMoved=(0,Pe.default)(b=this.coords.cur.client.x-this.coords.start.client.x,y=this.coords.cur.client.y-this.coords.start.client.y)>this.pointerMoveTolerance);var S=this.getPointerIndex(h),I={pointer:h,pointerIndex:S,pointerInfo:this.pointers[S],event:m,type:"move",eventTarget:v,dx:b,dy:y,duplicate:C,interaction:this};C||pe.setCoordVelocity(this.coords.velocity,this.coords.delta),this._scopeFire("interactions:move",I),C||this.simulation||(this.interacting()&&(I.type=null,this.move(I)),this.pointerWasMoved&&pe.copyCoords(this.coords.prev,this.coords.cur))}},{key:"move",value:function(h){h&&h.event||pe.setZeroCoords(this.coords.delta),(h=(0,ce.default)({pointer:this._latestPointer.pointer,event:this._latestPointer.event,eventTarget:this._latestPointer.eventTarget,interaction:this},h||{})).phase="move",this._doPhase(h)}},{key:"pointerUp",value:function(h,m,v,b){var y=this.getPointerIndex(h);-1===y&&(y=this.updatePointer(h,m,v,!1));var C=/cancel$/i.test(m.type)?"cancel":"up";this._scopeFire("interactions:".concat(C),{pointer:h,pointerIndex:y,pointerInfo:this.pointers[y],event:m,eventTarget:v,type:C,curEventTarget:b,interaction:this}),this.simulation||this.end(m),this.removePointer(h,m)}},{key:"documentBlur",value:function(h){this.end(h),this._scopeFire("interactions:blur",{event:h,type:"blur",interaction:this})}},{key:"end",value:function(h){var m;this._ending=!0,h=h||this._latestPointer.event,this.interacting()&&(m=this._doPhase({event:h,interaction:this,phase:"end"})),this._ending=!1,!0===m&&this.stop()}},{key:"currentAction",value:function(){return this._interacting?this.prepared.name:null}},{key:"interacting",value:function(){return this._interacting}},{key:"stop",value:function(){this._scopeFire("interactions:stop",{interaction:this}),this.interactable=this.element=null,this._interacting=!1,this._stopped=!0,this.prepared.name=this.prevEvent=null}},{key:"getPointerIndex",value:function(h){var m=pe.getPointerId(h);return"mouse"===this.pointerType||"pen"===this.pointerType?this.pointers.length-1:ht.findIndex(this.pointers,function(v){return v.id===m})}},{key:"getPointerInfo",value:function(h){return this.pointers[this.getPointerIndex(h)]}},{key:"updatePointer",value:function(h,m,v,b){var y=pe.getPointerId(h),C=this.getPointerIndex(h),S=this.pointers[C];return b=!1!==b&&(b||/(down|start)$/i.test(m.type)),S?S.pointer=h:(S=new _i.PointerInfo(y,h,m,null,null),C=this.pointers.length,this.pointers.push(S)),pe.setCoords(this.coords.cur,this.pointers.map(function(I){return I.pointer}),this._now()),pe.setCoordDeltas(this.coords.delta,this.coords.prev,this.coords.cur),b&&(this.pointerIsDown=!0,S.downTime=this.coords.cur.timeStamp,S.downTarget=v,pe.pointerExtend(this.downPointer,h),this.interacting()||(pe.copyCoords(this.coords.start,this.coords.cur),pe.copyCoords(this.coords.prev,this.coords.cur),this.downEvent=m,this.pointerWasMoved=!1)),this._updateLatestPointer(h,m,v),this._scopeFire("interactions:update-pointer",{pointer:h,event:m,eventTarget:v,down:b,pointerInfo:S,pointerIndex:C,interaction:this}),C}},{key:"removePointer",value:function(h,m){var v=this.getPointerIndex(h);-1!==v&&(this._scopeFire("interactions:remove-pointer",{pointer:h,event:m,eventTarget:null,pointerIndex:v,pointerInfo:this.pointers[v],interaction:this}),this.pointers.splice(v,1),this.pointerIsDown=!1)}},{key:"_updateLatestPointer",value:function(h,m,v){this._latestPointer.pointer=h,this._latestPointer.event=m,this._latestPointer.eventTarget=v}},{key:"destroy",value:function(){this._latestPointer.pointer=null,this._latestPointer.event=null,this._latestPointer.eventTarget=null}},{key:"_createPreparedEvent",value:function(h,m,v,b){return new xn.InteractEvent(this,h,this.prepared.name,m,this.element,v,b)}},{key:"_fireEvent",value:function(h){this.interactable.fire(h),(!this.prevEvent||h.timeStamp>=this.prevEvent.timeStamp)&&(this.prevEvent=h)}},{key:"_doPhase",value:function(h){var m=h.event,v=h.phase,b=h.preEnd,y=h.type,C=this.rect;if(C&&"move"===v&&(Me.addEdges(this.edges,C,this.coords.delta[this.interactable.options.deltaSource]),C.width=C.right-C.left,C.height=C.bottom-C.top),!1===this._scopeFire("interactions:before-action-".concat(v),h))return!1;var S=h.iEvent=this._createPreparedEvent(m,v,b,y);return this._scopeFire("interactions:action-".concat(v),h),"start"===v&&(this.prevEvent=S),this._fireEvent(S),this._scopeFire("interactions:after-action-".concat(v),h),!0}},{key:"_now",value:function(){return Date.now()}}])&&function Ms(l,u){for(var f=0;f<u.length;f++){var h=u[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(l,h.key,h)}}(l.prototype,f),l}();Kt.Interaction=Vu,Kt.default=Vu;var bi={};function jt(l){l.pointerIsDown&&(Dn(l.coords.cur,l.offset.total),l.offset.pending.x=0,l.offset.pending.y=0)}function Uu(l){Ia(l.interaction)}function Ia(l){if(!(f=l).offset.pending.x&&!f.offset.pending.y)return!1;var f,u=l.offset.pending;return Dn(l.coords.cur,u),Dn(l.coords.delta,u),Me.addEdges(l.edges,l.rect,u),u.x=0,u.y=0,!0}function Ie(l){var u=l.x,f=l.y;this.offset.pending.x+=u,this.offset.pending.y+=f,this.offset.total.x+=u,this.offset.total.y+=f}function Dn(l,u){var f=l.page,h=l.client,m=u.x,v=u.y;f.x+=m,f.y+=v,h.x+=m,h.y+=v}Object.defineProperty(bi,"__esModule",{value:!0}),bi.addTotal=jt,bi.applyPending=Ia,bi.default=void 0,Kt._ProxyMethods.offsetBy="",bi.default={id:"offset",before:["modifiers","pointer-events","actions","inertia"],install:function(l){l.Interaction.prototype.offsetBy=Ie},listeners:{"interactions:new":function(l){l.interaction.offset={total:{x:0,y:0},pending:{x:0,y:0}}},"interactions:update-pointer":function(l){return jt(l.interaction)},"interactions:before-action-start":Uu,"interactions:before-action-move":Uu,"interactions:before-action-end":function(l){var u=l.interaction;if(Ia(u))return u.move({offset:!0}),u.end(),!1},"interactions:stop":function(l){var u=l.interaction;u.offset.total.x=0,u.offset.total.y=0,u.offset.pending.x=0,u.offset.pending.y=0}}};var tn={};function Gt(l,u,f){return u in l?Object.defineProperty(l,u,{value:f,enumerable:!0,configurable:!0,writable:!0}):l[u]=f,l}Object.defineProperty(tn,"__esModule",{value:!0}),tn.default=tn.InertiaState=void 0;var Bn=function(){function l(h){(function(m,v){if(!(m instanceof v))throw new TypeError("Cannot call a class as a function")})(this,l),Gt(this,"active",!1),Gt(this,"isModified",!1),Gt(this,"smoothEnd",!1),Gt(this,"allowResume",!1),Gt(this,"modification",void 0),Gt(this,"modifierCount",0),Gt(this,"modifierArg",void 0),Gt(this,"startCoords",void 0),Gt(this,"t0",0),Gt(this,"v0",0),Gt(this,"te",0),Gt(this,"targetOffset",void 0),Gt(this,"modifiedOffset",void 0),Gt(this,"currentOffset",void 0),Gt(this,"lambda_v0",0),Gt(this,"one_ve_v0",0),Gt(this,"timeout",void 0),Gt(this,"interaction",void 0),this.interaction=h}var f;return(f=[{key:"start",value:function(h){var m=this.interaction,v=Xi(m);if(!v||!v.enabled)return!1;var b=m.coords.velocity.client,y=(0,Pe.default)(b.x,b.y),C=this.modification||(this.modification=new yi.default(m));if(C.copyFrom(m.modification),this.t0=m._now(),this.allowResume=v.allowResume,this.v0=y,this.currentOffset={x:0,y:0},this.startCoords=m.coords.cur.page,this.modifierArg=C.fillArg({pageCoords:this.startCoords,preEnd:!0,phase:"inertiastart"}),this.t0-m.coords.cur.timeStamp<50&&y>v.minSpeed&&y>v.endSpeed)this.startInertia();else{if(C.result=C.setAll(this.modifierArg),!C.result.changed)return!1;this.startSmoothEnd()}return m.modification.result.rect=null,m.offsetBy(this.targetOffset),m._doPhase({interaction:m,event:h,phase:"inertiastart"}),m.offsetBy({x:-this.targetOffset.x,y:-this.targetOffset.y}),m.modification.result.rect=null,this.active=!0,m.simulation=this,!0}},{key:"startInertia",value:function(){var h=this,m=this.interaction.coords.velocity.client,v=Xi(this.interaction),b=v.resistance,y=-Math.log(v.endSpeed/this.v0)/b;this.targetOffset={x:(m.x-y)/b,y:(m.y-y)/b},this.te=y,this.lambda_v0=b/this.v0,this.one_ve_v0=1-v.endSpeed/this.v0;var C=this.modification,S=this.modifierArg;S.pageCoords={x:this.startCoords.x+this.targetOffset.x,y:this.startCoords.y+this.targetOffset.y},C.result=C.setAll(S),C.result.changed&&(this.isModified=!0,this.modifiedOffset={x:this.targetOffset.x+C.result.delta.x,y:this.targetOffset.y+C.result.delta.y}),this.onNextFrame(function(){return h.inertiaTick()})}},{key:"startSmoothEnd",value:function(){var h=this;this.smoothEnd=!0,this.isModified=!0,this.targetOffset={x:this.modification.result.delta.x,y:this.modification.result.delta.y},this.onNextFrame(function(){return h.smoothEndTick()})}},{key:"onNextFrame",value:function(h){var m=this;this.timeout=Xn.default.request(function(){m.active&&h()})}},{key:"inertiaTick",value:function(){var m,b,y,C=this,S=this.interaction,I=Xi(S).resistance,O=(S._now()-this.t0)/1e3;if(O<this.te){var U,G=1-(Math.exp(-I*O)-this.lambda_v0)/this.one_ve_v0;this.isModified?(m=this.targetOffset.y,b=this.modifiedOffset.y,U={x:Aa(y=G,0,this.targetOffset.x,this.modifiedOffset.x),y:Aa(y,0,m,b)}):U={x:this.targetOffset.x*G,y:this.targetOffset.y*G};var L={x:U.x-this.currentOffset.x,y:U.y-this.currentOffset.y};this.currentOffset.x+=L.x,this.currentOffset.y+=L.y,S.offsetBy(L),S.move(),this.onNextFrame(function(){return C.inertiaTick()})}else S.offsetBy({x:this.modifiedOffset.x-this.currentOffset.x,y:this.modifiedOffset.y-this.currentOffset.y}),this.end()}},{key:"smoothEndTick",value:function(){var h=this,m=this.interaction,v=m._now()-this.t0,b=Xi(m).smoothEndDuration;if(v<b){var y={x:jo(v,0,this.targetOffset.x,b),y:jo(v,0,this.targetOffset.y,b)},C={x:y.x-this.currentOffset.x,y:y.y-this.currentOffset.y};this.currentOffset.x+=C.x,this.currentOffset.y+=C.y,m.offsetBy(C),m.move({skipModifiers:this.modifierCount}),this.onNextFrame(function(){return h.smoothEndTick()})}else m.offsetBy({x:this.targetOffset.x-this.currentOffset.x,y:this.targetOffset.y-this.currentOffset.y}),this.end()}},{key:"resume",value:function(h){var m=h.pointer,v=h.event,b=h.eventTarget,y=this.interaction;y.offsetBy({x:-this.currentOffset.x,y:-this.currentOffset.y}),y.updatePointer(m,v,b,!0),y._doPhase({interaction:y,event:v,phase:"resume"}),(0,pe.copyCoords)(y.coords.prev,y.coords.cur),this.stop()}},{key:"end",value:function(){this.interaction.move(),this.interaction.end(),this.stop()}},{key:"stop",value:function(){this.active=this.smoothEnd=!1,this.interaction.simulation=null,Xn.default.cancel(this.timeout)}}])&&function Pn(l,u){for(var f=0;f<u.length;f++){var h=u[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(l,h.key,h)}}(l.prototype,f),l}();function Xi(l){var u=l.interactable,f=l.prepared;return u&&u.options&&f.name&&u.options[f.name].inertia}function Aa(l,u,f,h){var m=1-l;return m*m*u+2*m*l*f+l*l*h}function jo(l,u,f,h){return-f*(l/=h)*(l-2)+u}tn.InertiaState=Bn,tn.default={id:"inertia",before:["modifiers","actions"],install:function(l){var u=l.defaults;l.usePlugin(bi.default),l.usePlugin(Dt.default),l.actions.phases.inertiastart=!0,l.actions.phases.resume=!0,u.perAction.inertia={enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300}},listeners:{"interactions:new":function(l){var u=l.interaction;u.inertia=new Bn(u)},"interactions:before-action-end":function(l){var u=l.interaction;return(!u._interacting||u.simulation||!u.inertia.start(l.event))&&null},"interactions:down":function(l){var u=l.interaction,h=u.inertia;if(h.active)for(var m=l.eventTarget;R.default.element(m);){if(m===u.element){h.resume(l);break}m=$.parentNode(m)}},"interactions:stop":function(l){var u=l.interaction.inertia;u.active&&u.stop()},"interactions:before-action-resume":function(l){var u=l.interaction.modification;u.stop(l),u.start(l,l.interaction.coords.cur.page),u.applyToInteraction(l)},"interactions:before-action-inertiastart":function(l){return l.interaction.modification.setAndApply(l)},"interactions:action-resume":Dt.addEventModifiers,"interactions:action-inertiastart":Dt.addEventModifiers,"interactions:after-action-inertiastart":function(l){return l.interaction.modification.restoreInteractionCoords(l)},"interactions:after-action-resume":function(l){return l.interaction.modification.restoreInteractionCoords(l)}}};var Tr={};function Is(l,u,f){return u in l?Object.defineProperty(l,u,{value:f,enumerable:!0,configurable:!0,writable:!0}):l[u]=f,l}function tr(l,u){for(var f=0;f<u.length;f++){var h=u[f];if(l.immediatePropagationStopped)break;h(l)}}Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.Eventable=void 0;var fe=function(){function l(h){(function(m,v){if(!(m instanceof v))throw new TypeError("Cannot call a class as a function")})(this,l),Is(this,"options",void 0),Is(this,"types",{}),Is(this,"propagationStopped",!1),Is(this,"immediatePropagationStopped",!1),Is(this,"global",void 0),this.options=(0,ce.default)({},h||{})}var f;return(f=[{key:"fire",value:function(h){var m,v=this.global;(m=this.types[h.type])&&tr(h,m),!h.propagationStopped&&v&&(m=v[h.type])&&tr(h,m)}},{key:"on",value:function(h,m){var v=(0,Le.default)(h,m);for(h in v)this.types[h]=ht.merge(this.types[h]||[],v[h])}},{key:"off",value:function(h,m){var v=(0,Le.default)(h,m);for(h in v){var b=this.types[h];if(b&&b.length)for(var y=0;y<v[h].length;y++){var S=b.indexOf(v[h][y]);-1!==S&&b.splice(S,1)}}}},{key:"getRect",value:function(h){return null}}])&&function wn(l,u){for(var f=0;f<u.length;f++){var h=u[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(l,h.key,h)}}(l.prototype,f),l}();Tr.Eventable=fe;var Ue={};Object.defineProperty(Ue,"__esModule",{value:!0}),Ue.default=function(l,u){if(u.phaselessTypes[l])return!0;for(var f in u.map)if(0===l.indexOf(f)&&l.substr(f.length)in u.phases)return!0;return!1};var kt={};Object.defineProperty(kt,"__esModule",{value:!0}),kt.createInteractStatic=function(l){var u=function f(h,m){var v=l.interactables.get(h,m);return v||((v=l.interactables.new(h,m)).events.global=f.globalEvents),v};return u.getPointerAverage=pe.pointerAverage,u.getTouchBBox=pe.touchBBox,u.getTouchDistance=pe.touchDistance,u.getTouchAngle=pe.touchAngle,u.getElementRect=$.getElementRect,u.getElementClientRect=$.getElementClientRect,u.matchesSelector=$.matchesSelector,u.closest=$.closest,u.globalEvents={},u.version="1.10.11",u.scope=l,u.use=function(f,h){return this.scope.usePlugin(f,h),this},u.isSet=function(f,h){return!!this.scope.interactables.get(f,h&&h.context)},u.on=(0,Se.warnOnce)(function(f,h,m){if(R.default.string(f)&&-1!==f.search(" ")&&(f=f.trim().split(/ +/)),R.default.array(f)){for(var v=0;v<f.length;v++)this.on(f[v],h,m);return this}if(R.default.object(f)){for(var y in f)this.on(y,f[y],h);return this}return(0,Ue.default)(f,this.scope.actions)?this.globalEvents[f]?this.globalEvents[f].push(h):this.globalEvents[f]=[h]:this.scope.events.add(this.scope.document,f,h,{options:m}),this},"The interact.on() method is being deprecated"),u.off=(0,Se.warnOnce)(function(f,h,m){if(R.default.string(f)&&-1!==f.search(" ")&&(f=f.trim().split(/ +/)),R.default.array(f)){for(var v=0;v<f.length;v++)this.off(f[v],h,m);return this}if(R.default.object(f)){for(var y in f)this.off(y,f[y],h);return this}var C;return(0,Ue.default)(f,this.scope.actions)?f in this.globalEvents&&-1!==(C=this.globalEvents[f].indexOf(h))&&this.globalEvents[f].splice(C,1):this.scope.events.remove(this.scope.document,f,h,m),this},"The interact.off() method is being deprecated"),u.debug=function(){return this.scope},u.supportsTouch=function(){return x.default.supportsTouch},u.supportsPointerEvent=function(){return x.default.supportsPointerEvent},u.stop=function(){for(var f=0;f<this.scope.interactions.list.length;f++)this.scope.interactions.list[f].stop();return this},u.pointerMoveTolerance=function(f){return R.default.number(f)?(this.scope.interactions.pointerMoveTolerance=f,this):this.scope.interactions.pointerMoveTolerance},u.addDocument=function(f,h){this.scope.addDocument(f,h)},u.removeDocument=function(f){this.scope.removeDocument(f)},u};var Tn={};function Ot(l,u,f){return u in l?Object.defineProperty(l,u,{value:f,enumerable:!0,configurable:!0,writable:!0}):l[u]=f,l}Object.defineProperty(Tn,"__esModule",{value:!0}),Tn.Interactable=void 0;var to=function(){function l(h,m,v,b){(function(y,C){if(!(y instanceof C))throw new TypeError("Cannot call a class as a function")})(this,l),Ot(this,"options",void 0),Ot(this,"_actions",void 0),Ot(this,"target",void 0),Ot(this,"events",new Tr.Eventable),Ot(this,"_context",void 0),Ot(this,"_win",void 0),Ot(this,"_doc",void 0),Ot(this,"_scopeEvents",void 0),Ot(this,"_rectChecker",void 0),this._actions=m.actions,this.target=h,this._context=m.context||v,this._win=(0,T.getWindow)((0,$.trySelector)(h)?this._context:h),this._doc=this._win.document,this._scopeEvents=b,this.set(m)}var f;return(f=[{key:"_defaults",get:function(){return{base:{},perAction:{},actions:{}}}},{key:"setOnEvents",value:function(h,m){return R.default.func(m.onstart)&&this.on("".concat(h,"start"),m.onstart),R.default.func(m.onmove)&&this.on("".concat(h,"move"),m.onmove),R.default.func(m.onend)&&this.on("".concat(h,"end"),m.onend),R.default.func(m.oninertiastart)&&this.on("".concat(h,"inertiastart"),m.oninertiastart),this}},{key:"updatePerActionListeners",value:function(h,m,v){(R.default.array(m)||R.default.object(m))&&this.off(h,m),(R.default.array(v)||R.default.object(v))&&this.on(h,v)}},{key:"setPerAction",value:function(h,m){var v=this._defaults;for(var b in m){var y=b,C=this.options[h],S=m[y];"listeners"===y&&this.updatePerActionListeners(h,C.listeners,S),R.default.array(S)?C[y]=ht.from(S):R.default.plainObject(S)?(C[y]=(0,ce.default)(C[y]||{},(0,Qi.default)(S)),R.default.object(v.perAction[y])&&"enabled"in v.perAction[y]&&(C[y].enabled=!1!==S.enabled)):R.default.bool(S)&&R.default.object(v.perAction[y])?C[y].enabled=S:C[y]=S}}},{key:"getRect",value:function(h){return h=h||(R.default.element(this.target)?this.target:null),R.default.string(this.target)&&(h=h||this._context.querySelector(this.target)),(0,$.getElementRect)(h)}},{key:"rectChecker",value:function(h){var m=this;return R.default.func(h)?(this._rectChecker=h,this.getRect=function(v){var b=(0,ce.default)({},m._rectChecker(v));return"width"in b||(b.width=b.right-b.left,b.height=b.bottom-b.top),b},this):null===h?(delete this.getRect,delete this._rectChecker,this):this.getRect}},{key:"_backCompatOption",value:function(h,m){if((0,$.trySelector)(m)||R.default.object(m)){for(var v in this.options[h]=m,this._actions.map)this.options[v][h]=m;return this}return this.options[h]}},{key:"origin",value:function(h){return this._backCompatOption("origin",h)}},{key:"deltaSource",value:function(h){return"page"===h||"client"===h?(this.options.deltaSource=h,this):this.options.deltaSource}},{key:"context",value:function(){return this._context}},{key:"inContext",value:function(h){return this._context===h.ownerDocument||(0,$.nodeContains)(this._context,h)}},{key:"testIgnoreAllow",value:function(h,m,v){return!this.testIgnore(h.ignoreFrom,m,v)&&this.testAllow(h.allowFrom,m,v)}},{key:"testAllow",value:function(h,m,v){return!h||!!R.default.element(v)&&(R.default.string(h)?(0,$.matchesUpTo)(v,h,m):!!R.default.element(h)&&(0,$.nodeContains)(h,v))}},{key:"testIgnore",value:function(h,m,v){return!(!h||!R.default.element(v))&&(R.default.string(h)?(0,$.matchesUpTo)(v,h,m):!!R.default.element(h)&&(0,$.nodeContains)(h,v))}},{key:"fire",value:function(h){return this.events.fire(h),this}},{key:"_onOff",value:function(h,m,v,b){R.default.object(m)&&!R.default.array(m)&&(b=v,v=null);var y="on"===h?"add":"remove",C=(0,Le.default)(m,v);for(var S in C){"wheel"===S&&(S=x.default.wheelEvent);for(var I=0;I<C[S].length;I++){var O=C[S][I];(0,Ue.default)(S,this._actions)?this.events[h](S,O):R.default.string(this.target)?this._scopeEvents["".concat(y,"Delegate")](this.target,this._context,S,O,b):this._scopeEvents[y](this.target,S,O,b)}}return this}},{key:"on",value:function(h,m,v){return this._onOff("on",h,m,v)}},{key:"off",value:function(h,m,v){return this._onOff("off",h,m,v)}},{key:"set",value:function(h){var m=this._defaults;for(var v in R.default.object(h)||(h={}),this.options=(0,Qi.default)(m.base),this._actions.methodDict){var b=v,y=this._actions.methodDict[b];this.options[b]={},this.setPerAction(b,(0,ce.default)((0,ce.default)({},m.perAction),m.actions[b])),this[y](h[b])}for(var C in h)R.default.func(this[C])&&this[C](h[C]);return this}},{key:"unset",value:function(){if(R.default.string(this.target))for(var h in this._scopeEvents.delegatedEvents)for(var m=this._scopeEvents.delegatedEvents[h],v=m.length-1;v>=0;v--){var b=m[v],S=b.listeners;b.selector===this.target&&b.context===this._context&&m.splice(v,1);for(var I=S.length-1;I>=0;I--)this._scopeEvents.removeDelegate(this.target,this._context,h,S[I][0],S[I][1])}else this._scopeEvents.remove(this.target,"all")}}])&&function eo(l,u){for(var f=0;f<u.length;f++){var h=u[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(l,h.key,h)}}(l.prototype,f),l}();Tn.Interactable=to;var Vt={};function no(l,u,f){return u in l?Object.defineProperty(l,u,{value:f,enumerable:!0,configurable:!0,writable:!0}):l[u]=f,l}Object.defineProperty(Vt,"__esModule",{value:!0}),Vt.InteractableSet=void 0;var Ye=function(){function l(h){var m=this;(function(v,b){if(!(v instanceof b))throw new TypeError("Cannot call a class as a function")})(this,l),no(this,"list",[]),no(this,"selectorMap",{}),no(this,"scope",void 0),this.scope=h,h.addListeners({"interactable:unset":function(v){var b=v.interactable,y=b.target,C=b._context,S=R.default.string(y)?m.selectorMap[y]:y[m.scope.id],I=ht.findIndex(S,function(O){return O.context===C});S[I]&&(S[I].context=null,S[I].interactable=null),S.splice(I,1)}})}var f;return(f=[{key:"new",value:function(h,m){m=(0,ce.default)(m||{},{actions:this.scope.actions});var v=new this.scope.Interactable(h,m,this.scope.document,this.scope.events),b={context:v._context,interactable:v};return this.scope.addDocument(v._doc),this.list.push(v),R.default.string(h)?(this.selectorMap[h]||(this.selectorMap[h]=[]),this.selectorMap[h].push(b)):(v.target[this.scope.id]||Object.defineProperty(h,this.scope.id,{value:[],configurable:!0}),h[this.scope.id].push(b)),this.scope.fire("interactable:new",{target:h,options:m,interactable:v,win:this.scope._win}),v}},{key:"get",value:function(h,m){var v=m&&m.context||this.scope.document,b=R.default.string(h),y=b?this.selectorMap[h]:h[this.scope.id];if(!y)return null;var C=ht.find(y,function(S){return S.context===v&&(b||S.interactable.inContext(h))});return C&&C.interactable}},{key:"forEachMatch",value:function(h,m){for(var v=0;v<this.list.length;v++){var b=this.list[v],y=void 0;if((R.default.string(b.target)?R.default.element(h)&&$.matchesSelector(h,b.target):h===b.target)&&b.inContext(h)&&(y=m(b)),void 0!==y)return y}}}])&&function As(l,u){for(var f=0;f<u.length;f++){var h=u[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(l,h.key,h)}}(l.prototype,f),l}();Vt.InteractableSet=Ye;var ro={};function xs(l,u,f){return u in l?Object.defineProperty(l,u,{value:f,enumerable:!0,configurable:!0,writable:!0}):l[u]=f,l}function ni(l,u){return function(f){if(Array.isArray(f))return f}(l)||function(f,h){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(f)){var m=[],v=!0,b=!1,y=void 0;try{for(var C,S=f[Symbol.iterator]();!(v=(C=S.next()).done)&&(m.push(C.value),!h||m.length!==h);v=!0);}catch(I){b=!0,y=I}finally{try{v||null==S.return||S.return()}finally{if(b)throw y}}return m}}(l,u)||function(f,h){if(f){if("string"==typeof f)return _n(f,h);var m=Object.prototype.toString.call(f).slice(8,-1);return"Object"===m&&f.constructor&&(m=f.constructor.name),"Map"===m||"Set"===m?Array.from(f):"Arguments"===m||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m)?_n(f,h):void 0}}(l,u)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _n(l,u){(null==u||u>l.length)&&(u=l.length);for(var f=0,h=Array(u);f<u;f++)h[f]=l[f];return h}Object.defineProperty(ro,"__esModule",{value:!0}),ro.default=void 0;var Ps=function(){function l(h){(function(m,v){if(!(m instanceof v))throw new TypeError("Cannot call a class as a function")})(this,l),xs(this,"currentTarget",void 0),xs(this,"originalEvent",void 0),xs(this,"type",void 0),this.originalEvent=h,(0,Ae.default)(this,h)}var f;return(f=[{key:"preventOriginalDefault",value:function(){this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.originalEvent.stopPropagation()}},{key:"stopImmediatePropagation",value:function(){this.originalEvent.stopImmediatePropagation()}}])&&function Vo(l,u){for(var f=0;f<u.length;f++){var h=u[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(l,h.key,h)}}(l.prototype,f),l}();function Lr(l){if(!R.default.object(l))return{capture:!!l,passive:!1};var u=(0,ce.default)({},l);return u.capture=!!l.capture,u.passive=!!l.passive,u}ro.default={id:"events",install:function(l){var u,f=[],h={},m=[],v={add:b,remove:y,addDelegate:function(I,O,U,G,L){var ee=Lr(L);if(!h[U]){h[U]=[];for(var ue=0;ue<m.length;ue++){var te=m[ue];b(te,U,C),b(te,U,S,!0)}}var be=h[U],ke=ht.find(be,function(je){return je.selector===I&&je.context===O});ke||be.push(ke={selector:I,context:O,listeners:[]}),ke.listeners.push([G,ee])},removeDelegate:function(I,O,U,G,L){var ee,ue=Lr(L),te=h[U],be=!1;if(te)for(ee=te.length-1;ee>=0;ee--){var ke=te[ee];if(ke.selector===I&&ke.context===O){for(var je=ke.listeners,pt=je.length-1;pt>=0;pt--){var yt=ni(je[pt],2),gt=yt[1];if(yt[0]===G&&gt.capture===ue.capture&&gt.passive===ue.passive){je.splice(pt,1),je.length||(te.splice(ee,1),y(O,U,C),y(O,U,S,!0)),be=!0;break}}if(be)break}}},delegateListener:C,delegateUseCapture:S,delegatedEvents:h,documents:m,targets:f,supportsOptions:!1,supportsPassive:!1};function b(I,O,U,G){var L=Lr(G),ee=ht.find(f,function(ue){return ue.eventTarget===I});ee||f.push(ee={eventTarget:I,events:{}}),ee.events[O]||(ee.events[O]=[]),I.addEventListener&&!ht.contains(ee.events[O],U)&&(I.addEventListener(O,U,v.supportsOptions?L:L.capture),ee.events[O].push(U))}function y(I,O,U,G){var L=Lr(G),ee=ht.findIndex(f,function(pt){return pt.eventTarget===I}),ue=f[ee];if(ue&&ue.events)if("all"!==O){var te=!1,be=ue.events[O];if(be){if("all"===U){for(var ke=be.length-1;ke>=0;ke--)y(I,O,be[ke],L);return}for(var je=0;je<be.length;je++)if(be[je]===U){I.removeEventListener(O,U,v.supportsOptions?L:L.capture),be.splice(je,1),0===be.length&&(delete ue.events[O],te=!0);break}}te&&!Object.keys(ue.events).length&&f.splice(ee,1)}else for(O in ue.events)ue.events.hasOwnProperty(O)&&y(I,O,"all")}function C(I,O){for(var U=Lr(O),G=new Ps(I),L=h[I.type],ee=ni(pe.getEventTargets(I),1)[0],ue=ee;R.default.element(ue);){for(var te=0;te<L.length;te++){var be=L[te],je=be.context;if($.matchesSelector(ue,be.selector)&&$.nodeContains(je,ee)&&$.nodeContains(je,ue)){var pt=be.listeners;G.currentTarget=ue;for(var yt=0;yt<pt.length;yt++){var Je=ni(pt[yt],2),Ir=Je[1];Ir.capture===U.capture&&Ir.passive===U.passive&&(0,Je[0])(G)}}}ue=$.parentNode(ue)}}function S(I){return C(I,!0)}return null==(u=l.document)||u.createElement("div").addEventListener("test",null,{get capture(){return v.supportsOptions=!0},get passive(){return v.supportsPassive=!0}}),l.events=v,v}};var ri={};Object.defineProperty(ri,"__esModule",{value:!0}),ri.default=void 0;var Rs={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function(l){for(var u=0;u<Rs.methodOrder.length;u++){var h=Rs[Rs.methodOrder[u]](l);if(h)return h}return null},simulationResume:function(l){var u=l.pointerType,h=l.eventTarget,m=l.scope;if(!/down|start/i.test(l.eventType))return null;for(var v=0;v<m.interactions.list.length;v++){var b=m.interactions.list[v],y=h;if(b.simulation&&b.simulation.allowResume&&b.pointerType===u)for(;y;){if(y===b.element)return b;y=$.parentNode(y)}}return null},mouseOrPen:function(l){var u,f=l.pointerId,h=l.pointerType,m=l.eventType,v=l.scope;if("mouse"!==h&&"pen"!==h)return null;for(var b=0;b<v.interactions.list.length;b++){var y=v.interactions.list[b];if(y.pointerType===h){if(y.simulation&&!Mt(y,f))continue;if(y.interacting())return y;u||(u=y)}}if(u)return u;for(var C=0;C<v.interactions.list.length;C++){var S=v.interactions.list[C];if(!(S.pointerType!==h||/down/i.test(m)&&S.simulation))return S}return null},hasPointer:function(l){for(var u=l.pointerId,f=l.scope,h=0;h<f.interactions.list.length;h++){var m=f.interactions.list[h];if(Mt(m,u))return m}return null},idle:function(l){for(var u=l.pointerType,f=l.scope,h=0;h<f.interactions.list.length;h++){var m=f.interactions.list[h];if(1===m.pointers.length){var v=m.interactable;if(v&&(!v.options.gesture||!v.options.gesture.enabled))continue}else if(m.pointers.length>=2)continue;if(!m.interacting()&&u===m.pointerType)return m}return null}};function Mt(l,u){return l.pointers.some(function(f){return f.id===u})}ri.default=Rs;var Pa={};function Rn(l){return(Rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(l)}function pr(l,u){return function(f){if(Array.isArray(f))return f}(l)||function(f,h){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(f)){var m=[],v=!0,b=!1,y=void 0;try{for(var C,S=f[Symbol.iterator]();!(v=(C=S.next()).done)&&(m.push(C.value),!h||m.length!==h);v=!0);}catch(I){b=!0,y=I}finally{try{v||null==S.return||S.return()}finally{if(b)throw y}}return m}}(l,u)||function(f,h){if(f){if("string"==typeof f)return Ra(f,h);var m=Object.prototype.toString.call(f).slice(8,-1);return"Object"===m&&f.constructor&&(m=f.constructor.name),"Map"===m||"Set"===m?Array.from(f):"Arguments"===m||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m)?Ra(f,h):void 0}}(l,u)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ra(l,u){(null==u||u>l.length)&&(u=l.length);for(var f=0,h=Array(u);f<u;f++)h[f]=l[f];return h}function ka(l,u){if(!(l instanceof u))throw new TypeError("Cannot call a class as a function")}function gr(l,u){return(gr=Object.setPrototypeOf||function(f,h){return f.__proto__=h,f})(l,u)}function lp(l,u){return!u||"object"!==Rn(u)&&"function"!=typeof u?function(f){if(void 0===f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}(l):u}function $u(l){return($u=Object.setPrototypeOf?Object.getPrototypeOf:function(u){return u.__proto__||Object.getPrototypeOf(u)})(l)}Object.defineProperty(Pa,"__esModule",{value:!0}),Pa.default=void 0;var Gc=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer","windowBlur"];function Hu(l,u){return function(f){var h=u.interactions.list,m=pe.getPointerType(f),v=pr(pe.getEventTargets(f),2),b=v[0],y=v[1],C=[];if(/^touch/.test(f.type)){u.prevTouchTime=u.now();for(var S=0;S<f.changedTouches.length;S++){var I=f.changedTouches[S],O={pointer:I,pointerId:pe.getPointerId(I),pointerType:m,eventType:f.type,eventTarget:b,curEventTarget:y,scope:u},U=up(O);C.push([O.pointer,O.eventTarget,O.curEventTarget,U])}}else{var G=!1;if(!x.default.supportsPointerEvent&&/mouse/.test(f.type)){for(var L=0;L<h.length&&!G;L++)G="mouse"!==h[L].pointerType&&h[L].pointerIsDown;G=G||u.now()-u.prevTouchTime<500||0===f.timeStamp}if(!G){var ee={pointer:f,pointerId:pe.getPointerId(f),pointerType:m,eventType:f.type,curEventTarget:y,eventTarget:b,scope:u},ue=up(ee);C.push([ee.pointer,ee.eventTarget,ee.curEventTarget,ue])}}for(var te=0;te<C.length;te++){var be=pr(C[te],4);be[3][l](be[0],f,be[1],be[2])}}}function up(l){var u=l.pointerType,f=l.scope,h={interaction:ri.default.search(l),searchDetails:l};return f.fire("interactions:find",h),h.interaction||f.interactions.new({pointerType:u})}function zu(l,u){var f=l.doc,h=l.scope,m=l.options,v=h.interactions.docEvents,b=h.events,y=b[u];for(var C in h.browser.isIOS&&!m.events&&(m.events={passive:!1}),b.delegatedEvents)y(f,C,b.delegateListener),y(f,C,b.delegateUseCapture,!0);for(var S=m&&m.events,I=0;I<v.length;I++){var O=v[I];y(f,O.type,O.listener,S)}}var g_={id:"core/interactions",install:function(l){for(var u={},f=0;f<Gc.length;f++){var h=Gc[f];u[h]=Hu(h,l)}var m,v=x.default.pEventTypes;function b(){for(var y=0;y<l.interactions.list.length;y++){var C=l.interactions.list[y];if(C.pointerIsDown&&"touch"===C.pointerType&&!C._interacting)for(var S=function(){var O=C.pointers[I];l.documents.some(function(U){return(0,$.nodeContains)(U.doc,O.downTarget)})||C.removePointer(O.pointer,O.event)},I=0;I<C.pointers.length;I++)S()}}(m=W.default.PointerEvent?[{type:v.down,listener:b},{type:v.down,listener:u.pointerDown},{type:v.move,listener:u.pointerMove},{type:v.up,listener:u.pointerUp},{type:v.cancel,listener:u.pointerUp}]:[{type:"mousedown",listener:u.pointerDown},{type:"mousemove",listener:u.pointerMove},{type:"mouseup",listener:u.pointerUp},{type:"touchstart",listener:b},{type:"touchstart",listener:u.pointerDown},{type:"touchmove",listener:u.pointerMove},{type:"touchend",listener:u.pointerUp},{type:"touchcancel",listener:u.pointerUp}]).push({type:"blur",listener:function(y){for(var C=0;C<l.interactions.list.length;C++)l.interactions.list[C].documentBlur(y)}}),l.prevTouchTime=0,l.Interaction=function(y){!function(L,ee){if("function"!=typeof ee&&null!==ee)throw new TypeError("Super expression must either be null or a function");L.prototype=Object.create(ee&&ee.prototype,{constructor:{value:L,writable:!0,configurable:!0}}),ee&&gr(L,ee)}(G,y);var S,I,O,U=(I=G,O=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(L){return!1}}(),function(){var L,ee=$u(I);if(O){var ue=$u(this).constructor;L=Reflect.construct(ee,arguments,ue)}else L=ee.apply(this,arguments);return lp(this,L)});function G(){return ka(this,G),U.apply(this,arguments)}return(S=[{key:"pointerMoveTolerance",get:function(){return l.interactions.pointerMoveTolerance},set:function(L){l.interactions.pointerMoveTolerance=L}},{key:"_now",value:function(){return l.now()}}])&&function Oa(l,u){for(var f=0;f<u.length;f++){var h=u[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(l,h.key,h)}}(G.prototype,S),G}(Kt.default),l.interactions={list:[],new:function(y){y.scopeFire=function(S,I){return l.fire(S,I)};var C=new l.Interaction(y);return l.interactions.list.push(C),C},listeners:u,docEvents:m,pointerMoveTolerance:1},l.usePlugin(Es.default)},listeners:{"scope:add-document":function(l){return zu(l,"add")},"scope:remove-document":function(l){return zu(l,"remove")},"interactable:unset":function(l,u){for(var f=l.interactable,h=u.interactions.list.length-1;h>=0;h--){var m=u.interactions.list[h];m.interactable===f&&(m.stop(),u.fire("interactions:destroy",{interaction:m}),m.destroy(),u.interactions.list.length>2&&u.interactions.list.splice(h,1))}}},onDocSignal:zu,doOnInteractions:Hu,methodNames:Gc};Pa.default=g_;var Fa={};function dp(l){return(dp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(l)}function Gu(l,u,f){return(Gu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(h,m,v){var b=function(C,S){for(;!Object.prototype.hasOwnProperty.call(C,S)&&null!==(C=ks(C)););return C}(h,m);if(b){var y=Object.getOwnPropertyDescriptor(b,m);return y.get?y.get.call(v):y.value}})(l,u,f||l)}function fp(l,u){return(fp=Object.setPrototypeOf||function(f,h){return f.__proto__=h,f})(l,u)}function m_(l,u){return!u||"object"!==dp(u)&&"function"!=typeof u?function(f){if(void 0===f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}(l):u}function ks(l){return(ks=Object.setPrototypeOf?Object.getPrototypeOf:function(u){return u.__proto__||Object.getPrototypeOf(u)})(l)}function hp(l,u){if(!(l instanceof u))throw new TypeError("Cannot call a class as a function")}function pp(l,u){for(var f=0;f<u.length;f++){var h=u[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(l,h.key,h)}}function gp(l,u,f){return u&&pp(l.prototype,u),f&&pp(l,f),l}function Mn(l,u,f){return u in l?Object.defineProperty(l,u,{value:f,enumerable:!0,configurable:!0,writable:!0}):l[u]=f,l}Object.defineProperty(Fa,"__esModule",{value:!0}),Fa.initScope=qc,Fa.Scope=void 0;var v_=function(){function l(){var u=this;hp(this,l),Mn(this,"id","__interact_scope_".concat(Math.floor(100*Math.random()))),Mn(this,"isInitialized",!1),Mn(this,"listenerMaps",[]),Mn(this,"browser",x.default),Mn(this,"defaults",(0,Qi.default)(fr.defaults)),Mn(this,"Eventable",Tr.Eventable),Mn(this,"actions",{map:{},phases:{start:!0,move:!0,end:!0},methodDict:{},phaselessTypes:{}}),Mn(this,"interactStatic",(0,kt.createInteractStatic)(this)),Mn(this,"InteractEvent",xn.InteractEvent),Mn(this,"Interactable",void 0),Mn(this,"interactables",new Vt.InteractableSet(this)),Mn(this,"_win",void 0),Mn(this,"document",void 0),Mn(this,"window",void 0),Mn(this,"documents",[]),Mn(this,"_plugins",{list:[],map:{}}),Mn(this,"onWindowUnload",function(h){return u.removeDocument(h.target)});var f=this;this.Interactable=function(h){!function(C,S){if("function"!=typeof S&&null!==S)throw new TypeError("Super expression must either be null or a function");C.prototype=Object.create(S&&S.prototype,{constructor:{value:C,writable:!0,configurable:!0}}),S&&fp(C,S)}(y,h);var m,v,b=(m=y,v=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(C){return!1}}(),function(){var C,S=ks(m);if(v){var I=ks(this).constructor;C=Reflect.construct(S,arguments,I)}else C=S.apply(this,arguments);return m_(this,C)});function y(){return hp(this,y),b.apply(this,arguments)}return gp(y,[{key:"_defaults",get:function(){return f.defaults}},{key:"set",value:function(C){return Gu(ks(y.prototype),"set",this).call(this,C),f.fire("interactable:set",{options:C,interactable:this}),this}},{key:"unset",value:function(){Gu(ks(y.prototype),"unset",this).call(this),f.interactables.list.splice(f.interactables.list.indexOf(this),1),f.fire("interactable:unset",{interactable:this})}}]),y}(Tn.Interactable)}return gp(l,[{key:"addListeners",value:function(u,f){this.listenerMaps.push({id:f,map:u})}},{key:"fire",value:function(u,f){for(var h=0;h<this.listenerMaps.length;h++){var m=this.listenerMaps[h].map[u];if(m&&!1===m(f,this,u))return!1}}},{key:"init",value:function(u){return this.isInitialized?this:qc(this,u)}},{key:"pluginIsInstalled",value:function(u){return this._plugins.map[u.id]||-1!==this._plugins.list.indexOf(u)}},{key:"usePlugin",value:function(u,f){if(!this.isInitialized)return this;if(this.pluginIsInstalled(u))return this;if(u.id&&(this._plugins.map[u.id]=u),this._plugins.list.push(u),u.install&&u.install(this,f),u.listeners&&u.before){for(var h=0,m=this.listenerMaps.length,v=u.before.reduce(function(y,C){return y[C]=!0,y[Na(C)]=!0,y},{});h<m;h++){var b=this.listenerMaps[h].id;if(v[b]||v[Na(b)])break}this.listenerMaps.splice(h,0,{id:u.id,map:u.listeners})}else u.listeners&&this.listenerMaps.push({id:u.id,map:u.listeners});return this}},{key:"addDocument",value:function(u,f){if(-1!==this.getDocIndex(u))return!1;var h=T.getWindow(u);f=f?(0,ce.default)({},f):{},this.documents.push({doc:u,options:f}),this.events.documents.push(u),u!==this.document&&this.events.add(h,"unload",this.onWindowUnload),this.fire("scope:add-document",{doc:u,window:h,scope:this,options:f})}},{key:"removeDocument",value:function(u){var f=this.getDocIndex(u),h=T.getWindow(u),m=this.documents[f].options;this.events.remove(h,"unload",this.onWindowUnload),this.documents.splice(f,1),this.events.documents.splice(f,1),this.fire("scope:remove-document",{doc:u,window:h,scope:this,options:m})}},{key:"getDocIndex",value:function(u){for(var f=0;f<this.documents.length;f++)if(this.documents[f].doc===u)return f;return-1}},{key:"getDocOptions",value:function(u){var f=this.getDocIndex(u);return-1===f?null:this.documents[f].options}},{key:"now",value:function(){return(this.window.Date||Date).now()}}]),l}();function qc(l,u){return l.isInitialized=!0,R.default.window(u)&&T.init(u),W.default.init(u),x.default.init(u),Xn.default.init(u),l.window=u,l.document=u.document,l.usePlugin(Pa.default),l.usePlugin(ro.default),l}function Na(l){return l&&l.replace(/\/.*$/,"")}Fa.Scope=v_;var kn={};Object.defineProperty(kn,"__esModule",{value:!0}),kn.default=void 0;var mp=new Fa.Scope;kn.default=mp.interactStatic;var io="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0;mp.init(io);var La={};Object.defineProperty(La,"__esModule",{value:!0}),La.default=void 0,La.default=function(){};var On={};Object.defineProperty(On,"__esModule",{value:!0}),On.default=void 0,On.default=function(){};var Os={};function qu(l,u){return function(f){if(Array.isArray(f))return f}(l)||function(f,h){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(f)){var m=[],v=!0,b=!1,y=void 0;try{for(var C,S=f[Symbol.iterator]();!(v=(C=S.next()).done)&&(m.push(C.value),!h||m.length!==h);v=!0);}catch(I){b=!0,y=I}finally{try{v||null==S.return||S.return()}finally{if(b)throw y}}return m}}(l,u)||function(f,h){if(f){if("string"==typeof f)return Wu(f,h);var m=Object.prototype.toString.call(f).slice(8,-1);return"Object"===m&&f.constructor&&(m=f.constructor.name),"Map"===m||"Set"===m?Array.from(f):"Arguments"===m||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m)?Wu(f,h):void 0}}(l,u)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wu(l,u){(null==u||u>l.length)&&(u=l.length);for(var f=0,h=Array(u);f<u;f++)h[f]=l[f];return h}Object.defineProperty(Os,"__esModule",{value:!0}),Os.default=void 0,Os.default=function(l){var u=[["x","y"],["left","top"],["right","bottom"],["width","height"]].filter(function(h){var m=qu(h,2);return m[0]in l||m[1]in l}),f=function(h,m){for(var b=l.limits,y=void 0===b?{left:-1/0,right:1/0,top:-1/0,bottom:1/0}:b,C=l.offset,S=void 0===C?{x:0,y:0}:C,I={range:l.range,grid:l,x:null,y:null},O=0;O<u.length;O++){var U=qu(u[O],2),G=U[0],L=U[1],ee=Math.round((h-S.x)/l[G]),ue=Math.round((m-S.y)/l[L]);I[G]=Math.max(y.left,Math.min(y.right,ee*l[G]+S.x)),I[L]=Math.max(y.top,Math.min(y.bottom,ue*l[L]+S.y))}return I};return f.grid=l,f.coordFields=u,f};var Bo={};Object.defineProperty(Bo,"__esModule",{value:!0}),Object.defineProperty(Bo,"edgeTarget",{enumerable:!0,get:function(){return La.default}}),Object.defineProperty(Bo,"elements",{enumerable:!0,get:function(){return On.default}}),Object.defineProperty(Bo,"grid",{enumerable:!0,get:function(){return Os.default}});var Fs={};Object.defineProperty(Fs,"__esModule",{value:!0}),Fs.default=void 0,Fs.default={id:"snappers",install:function(l){var u=l.interactStatic;u.snappers=(0,ce.default)(u.snappers||{},Bo),u.createSnapGrid=u.snappers.grid}};var Ci={};function Ku(l,u){var f=Object.keys(l);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(l);u&&(h=h.filter(function(m){return Object.getOwnPropertyDescriptor(l,m).enumerable})),f.push.apply(f,h)}return f}function Un(l){for(var u=1;u<arguments.length;u++){var f=null!=arguments[u]?arguments[u]:{};u%2?Ku(Object(f),!0).forEach(function(h){Wc(l,h,f[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(f)):Ku(Object(f)).forEach(function(h){Object.defineProperty(l,h,Object.getOwnPropertyDescriptor(f,h))})}return l}function Wc(l,u,f){return u in l?Object.defineProperty(l,u,{value:f,enumerable:!0,configurable:!0,writable:!0}):l[u]=f,l}Object.defineProperty(Ci,"__esModule",{value:!0}),Ci.aspectRatio=Ci.default=void 0;var Yu={start:function(l){var u=l.state,f=l.rect,h=l.edges,v=u.options.ratio,b=u.options,y=b.equalDelta,C=b.modifiers;"preserve"===v&&(v=f.width/f.height),u.startCoords=(0,ce.default)({},l.pageCoords),u.startRect=(0,ce.default)({},f),u.ratio=v,u.equalDelta=y;var S=u.linkedEdges={top:h.top||h.left&&!h.bottom,left:h.left||h.top&&!h.right,bottom:h.bottom||h.right&&!h.top,right:h.right||h.bottom&&!h.left};if(u.xIsPrimaryAxis=!(!h.left&&!h.right),u.edgeSign=u.equalDelta?(S.left?1:-1)*(S.top?1:-1):(u.xIsPrimaryAxis?S.top:S.left)?-1:1,(0,ce.default)(l.edges,S),C&&C.length){var O=new yi.default(l.interaction);O.copyFrom(l.interaction.modification),O.prepareStates(C),u.subModification=O,O.startAll(Un({},l))}},set:function(l){var u=l.state,f=l.rect,h=l.coords,m=(0,ce.default)({},h),v=u.equalDelta?Kc:yp;if(v(u,u.xIsPrimaryAxis,h,f),!u.subModification)return null;var b=(0,ce.default)({},f);(0,Me.addEdges)(u.linkedEdges,b,{x:h.x-m.x,y:h.y-m.y});var y=u.subModification.setAll(Un(Un({},l),{},{rect:b,edges:u.linkedEdges,pageCoords:h,prevCoords:h,prevRect:b})),C=y.delta;return y.changed&&(v(u,Math.abs(C.x)>Math.abs(C.y),y.coords,y.rect),(0,ce.default)(h,y.coords)),y.eventProps},defaults:{ratio:"preserve",equalDelta:!1,modifiers:[],enabled:!1}};function Kc(l,u,f){var h=l.startCoords,m=l.edgeSign;u?f.y=h.y+(f.x-h.x)*m:f.x=h.x+(f.y-h.y)*m}function yp(l,u,f,h){var m=l.startRect,v=l.startCoords,b=l.ratio,y=l.edgeSign;u?f.y=v.y+(h.width/b-m.height)*y:f.x=v.x+(h.height*b-m.width)*y}Ci.aspectRatio=Yu;var __=(0,Dt.makeModifier)(Yu,"aspectRatio");Ci.default=__;var Ft={};Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.default=void 0;var Qu=function(){};Qu._defaults={},Ft.default=Qu;var Uo={};Object.defineProperty(Uo,"__esModule",{value:!0}),Object.defineProperty(Uo,"default",{enumerable:!0,get:function(){return Ft.default}});var It={};function Yc(l,u,f){return R.default.func(l)?Me.resolveRectLike(l,u.interactable,u.element,[f.x,f.y,u]):Me.resolveRectLike(l,u.interactable,u.element)}Object.defineProperty(It,"__esModule",{value:!0}),It.getRestrictionRect=Yc,It.restrict=It.default=void 0;var ja={start:function(l){var u=l.rect,f=l.startOffset,h=l.state,m=l.interaction,v=l.pageCoords,b=h.options,y=b.elementRect,C=(0,ce.default)({left:0,top:0,right:0,bottom:0},b.offset||{});if(u&&y){var S=Yc(b.restriction,m,v);if(S){var I=S.right-S.left-u.width,O=S.bottom-S.top-u.height;I<0&&(C.left+=I,C.right+=I),O<0&&(C.top+=O,C.bottom+=O)}C.left+=f.left-u.width*y.left,C.top+=f.top-u.height*y.top,C.right+=f.right-u.width*(1-y.right),C.bottom+=f.bottom-u.height*(1-y.bottom)}h.offset=C},set:function(l){var u=l.coords,h=l.state,v=h.offset,b=Yc(h.options.restriction,l.interaction,u);if(b){var y=Me.xywhToTlbr(b);u.x=Math.max(Math.min(y.right-v.right,u.x),y.left+v.left),u.y=Math.max(Math.min(y.bottom-v.bottom,u.y),y.top+v.top)}},defaults:{restriction:null,elementRect:null,offset:null,endOnly:!1,enabled:!1}};It.restrict=ja;var $o=(0,Dt.makeModifier)(ja,"restrict");It.default=$o;var Yt={};Object.defineProperty(Yt,"__esModule",{value:!0}),Yt.restrictEdges=Yt.default=void 0;var Ju={top:1/0,left:1/0,bottom:-1/0,right:-1/0},Ns={top:-1/0,left:-1/0,bottom:1/0,right:1/0};function Zu(l,u){for(var f=["top","left","bottom","right"],h=0;h<f.length;h++){var m=f[h];m in l||(l[m]=u[m])}return l}var ii={noInner:Ju,noOuter:Ns,start:function(l){var u,f=l.interaction,h=l.startOffset,m=l.state,v=m.options;if(v){var b=(0,It.getRestrictionRect)(v.offset,f,f.coords.start.page);u=Me.rectToXY(b)}m.offset={top:(u=u||{x:0,y:0}).y+h.top,left:u.x+h.left,bottom:u.y-h.bottom,right:u.x-h.right}},set:function(l){var u=l.coords,f=l.edges,h=l.interaction,m=l.state,v=m.offset,b=m.options;if(f){var y=(0,ce.default)({},u),C=(0,It.getRestrictionRect)(b.inner,h,y)||{},S=(0,It.getRestrictionRect)(b.outer,h,y)||{};Zu(C,Ju),Zu(S,Ns),f.top?u.y=Math.min(Math.max(S.top+v.top,y.y),C.top+v.top):f.bottom&&(u.y=Math.max(Math.min(S.bottom+v.bottom,y.y),C.bottom+v.bottom)),f.left?u.x=Math.min(Math.max(S.left+v.left,y.x),C.left+v.left):f.right&&(u.x=Math.max(Math.min(S.right+v.right,y.x),C.right+v.right))}},defaults:{inner:null,outer:null,offset:null,endOnly:!1,enabled:!1}};Yt.restrictEdges=ii;var Xu=(0,Dt.makeModifier)(ii,"restrictEdges");Yt.default=Xu;var Ei={};Object.defineProperty(Ei,"__esModule",{value:!0}),Ei.restrictRect=Ei.default=void 0;var $e=(0,ce.default)({get elementRect(){return{top:0,left:0,bottom:1,right:1}},set elementRect(l){}},It.restrict.defaults),Qc={start:It.restrict.start,set:It.restrict.set,defaults:$e};Ei.restrictRect=Qc;var C_=(0,Dt.makeModifier)(Qc,"restrictRect");Ei.default=C_;var Ho={};Object.defineProperty(Ho,"__esModule",{value:!0}),Ho.restrictSize=Ho.default=void 0;var _p={width:-1/0,height:-1/0},bp={width:1/0,height:1/0},Jc={start:function(l){return Yt.restrictEdges.start(l)},set:function(l){var u=l.interaction,f=l.state,h=l.rect,m=l.edges,v=f.options;if(m){var b=Me.tlbrToXywh((0,It.getRestrictionRect)(v.min,u,l.coords))||_p,y=Me.tlbrToXywh((0,It.getRestrictionRect)(v.max,u,l.coords))||bp;f.options={endOnly:v.endOnly,inner:(0,ce.default)({},Yt.restrictEdges.noInner),outer:(0,ce.default)({},Yt.restrictEdges.noOuter)},m.top?(f.options.inner.top=h.bottom-b.height,f.options.outer.top=h.bottom-y.height):m.bottom&&(f.options.inner.bottom=h.top+b.height,f.options.outer.bottom=h.top+y.height),m.left?(f.options.inner.left=h.right-b.width,f.options.outer.left=h.right-y.width):m.right&&(f.options.inner.right=h.left+b.width,f.options.outer.right=h.left+y.width),Yt.restrictEdges.set(l),f.options=v}},defaults:{min:null,max:null,endOnly:!1,enabled:!1}};Ho.restrictSize=Jc;var Cp=(0,Dt.makeModifier)(Jc,"restrictSize");Ho.default=Cp;var Zc={};Object.defineProperty(Zc,"__esModule",{value:!0}),Object.defineProperty(Zc,"default",{enumerable:!0,get:function(){return Ft.default}});var J={};Object.defineProperty(J,"__esModule",{value:!0}),J.snap=J.default=void 0;var rt={start:function(l){var u,U,G,f=l.interaction,h=l.interactable,m=l.element,v=l.rect,b=l.state,y=l.startOffset,C=b.options,S=C.offsetWithOrigin?(0,Me.rectToXY)((0,Me.resolveRectLike)((U=l).state.options.origin,null,null,[G=U.interaction.element]))||(0,xt.default)(U.interactable,G,U.interaction.prepared.name):{x:0,y:0};if("startCoords"===C.offset)u={x:f.coords.start.page.x,y:f.coords.start.page.y};else{var I=(0,Me.resolveRectLike)(C.offset,h,m,[f]);(u=(0,Me.rectToXY)(I)||{x:0,y:0}).x+=S.x,u.y+=S.y}var O=C.relativePoints;b.offsets=v&&O&&O.length?O.map(function(U,G){return{index:G,relativePoint:U,x:y.left-v.width*U.x+u.x,y:y.top-v.height*U.y+u.y}}):[{index:0,relativePoint:null,x:u.x,y:u.y}]},set:function(l){var u=l.interaction,f=l.coords,h=l.state,m=h.options,v=h.offsets,b=(0,xt.default)(u.interactable,u.element,u.prepared.name),y=(0,ce.default)({},f),C=[];m.offsetWithOrigin||(y.x-=b.x,y.y-=b.y);for(var S=0;S<v.length;S++)for(var I=v[S],O=y.x-I.x,U=y.y-I.y,G=0,L=m.targets.length;G<L;G++){var ee,ue=m.targets[G];(ee=R.default.func(ue)?ue(O,U,u._proxy,I,G):ue)&&C.push({x:(R.default.number(ee.x)?ee.x:O)+I.x,y:(R.default.number(ee.y)?ee.y:U)+I.y,range:R.default.number(ee.range)?ee.range:m.range,source:ue,index:G,offset:I})}for(var te={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}},be=0;be<C.length;be++){var ke=C[be],je=ke.range,pt=ke.x-y.x,yt=ke.y-y.y,Je=(0,Pe.default)(pt,yt),gt=Je<=je;je===1/0&&te.inRange&&te.range!==1/0&&(gt=!1),te.target&&!(gt?te.inRange&&je!==1/0?Je/je<te.distance/te.range:je===1/0&&te.range!==1/0||Je<te.distance:!te.inRange&&Je<te.distance)||(te.target=ke,te.distance=Je,te.range=je,te.inRange=gt,te.delta.x=pt,te.delta.y=yt)}return te.inRange&&(f.x=te.target.x,f.y=te.target.y),h.closest=te,te},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!0,origin:null,relativePoints:null,endOnly:!1,enabled:!1}};J.snap=rt;var Va=(0,Dt.makeModifier)(rt,"snap");J.default=Va;var mr={};function nn(l,u){(null==u||u>l.length)&&(u=l.length);for(var f=0,h=Array(u);f<u;f++)h[f]=l[f];return h}Object.defineProperty(mr,"__esModule",{value:!0}),mr.snapSize=mr.default=void 0;var Xc={start:function(l){var u=l.state,f=l.edges,h=u.options;if(!f)return null;l.state={options:{targets:null,relativePoints:[{x:f.left?0:1,y:f.top?0:1}],offset:h.offset||"self",origin:{x:0,y:0},range:h.range}},u.targetFields=u.targetFields||[["width","height"],["x","y"]],J.snap.start(l),u.offsets=l.state.offsets,l.state=u},set:function(l){var u,h=l.interaction,m=l.state,v=l.coords,b=m.options,y=m.offsets,C={x:v.x-y[0].x,y:v.y-y[0].y};m.options=(0,ce.default)({},b),m.options.targets=[];for(var S=0;S<(b.targets||[]).length;S++){var I=(b.targets||[])[S],O=void 0;if(O=R.default.func(I)?I(C.x,C.y,h):I){for(var U=0;U<m.targetFields.length;U++){var G=(2,function(te){if(Array.isArray(te))return te}(u=m.targetFields[U])||function(te,be){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(te)){var ke=[],je=!0,pt=!1,yt=void 0;try{for(var Je,gt=te[Symbol.iterator]();!(je=(Je=gt.next()).done)&&(ke.push(Je.value),2!==ke.length);je=!0);}catch(Ir){pt=!0,yt=Ir}finally{try{je||null==gt.return||gt.return()}finally{if(pt)throw yt}}return ke}}(u)||function(te,be){if(te){if("string"==typeof te)return nn(te,2);var ke=Object.prototype.toString.call(te).slice(8,-1);return"Object"===ke&&te.constructor&&(ke=te.constructor.name),"Map"===ke||"Set"===ke?Array.from(te):"Arguments"===ke||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ke)?nn(te,2):void 0}}(u)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),L=G[0],ee=G[1];if(L in O||ee in O){O.x=O[L],O.y=O[ee];break}}m.options.targets.push(O)}}var ue=J.snap.set(l);return m.options=b,ue},defaults:{range:1/0,targets:null,offset:null,endOnly:!1,enabled:!1}};mr.snapSize=Xc;var Ls=(0,Dt.makeModifier)(Xc,"snapSize");mr.default=Ls;var Fn={};Object.defineProperty(Fn,"__esModule",{value:!0}),Fn.snapEdges=Fn.default=void 0;var Ba={start:function(l){var u=l.edges;return u?(l.state.targetFields=l.state.targetFields||[[u.left?"left":"right",u.top?"top":"bottom"]],mr.snapSize.start(l)):null},set:mr.snapSize.set,defaults:(0,ce.default)((0,Qi.default)(mr.snapSize.defaults),{targets:null,range:null,offset:{x:0,y:0}})};Fn.snapEdges=Ba;var el=(0,Dt.makeModifier)(Ba,"snapEdges");Fn.default=el;var ed={};Object.defineProperty(ed,"__esModule",{value:!0}),Object.defineProperty(ed,"default",{enumerable:!0,get:function(){return Ft.default}});var tl={};Object.defineProperty(tl,"__esModule",{value:!0}),Object.defineProperty(tl,"default",{enumerable:!0,get:function(){return Ft.default}});var js={};Object.defineProperty(js,"__esModule",{value:!0}),js.default=void 0,js.default={aspectRatio:Ci.default,restrictEdges:Yt.default,restrict:It.default,restrictRect:Ei.default,restrictSize:Ho.default,snapEdges:Fn.default,snap:J.default,snapSize:mr.default,spring:ed.default,avoid:Uo.default,transform:tl.default,rubberband:Zc.default};var un={};Object.defineProperty(un,"__esModule",{value:!0}),un.default=void 0,un.default={id:"modifiers",install:function(l){var u=l.interactStatic;for(var f in l.usePlugin(Dt.default),l.usePlugin(Fs.default),u.modifiers=js.default,js.default){var h=js.default[f],m=h._defaults;m._methods=h._methods,l.defaults.perAction[f]=m}}};var Si={};function oo(l){return(oo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(l)}function nd(l,u){return(nd=Object.setPrototypeOf||function(f,h){return f.__proto__=h,f})(l,u)}function rd(l,u){return!u||"object"!==oo(u)&&"function"!=typeof u?$n(l):u}function $n(l){if(void 0===l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function nl(l){return(nl=Object.setPrototypeOf?Object.getPrototypeOf:function(u){return u.__proto__||Object.getPrototypeOf(u)})(l)}function nr(l,u,f){return u in l?Object.defineProperty(l,u,{value:f,enumerable:!0,configurable:!0,writable:!0}):l[u]=f,l}Object.defineProperty(Si,"__esModule",{value:!0}),Si.PointerEvent=Si.default=void 0;var rl=function(l){!function(y,C){if("function"!=typeof C&&null!==C)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(C&&C.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),C&&nd(y,C)}(b,l);var f,h,m,v=(h=b,m=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(y){return!1}}(),function(){var y,C=nl(h);if(m){var S=nl(this).constructor;y=Reflect.construct(C,arguments,S)}else y=C.apply(this,arguments);return rd(this,y)});function b(y,C,S,I,O,U){var G;if(function(ue,te){if(!(ue instanceof te))throw new TypeError("Cannot call a class as a function")}(this,b),nr($n(G=v.call(this,O)),"type",void 0),nr($n(G),"originalEvent",void 0),nr($n(G),"pointerId",void 0),nr($n(G),"pointerType",void 0),nr($n(G),"double",void 0),nr($n(G),"pageX",void 0),nr($n(G),"pageY",void 0),nr($n(G),"clientX",void 0),nr($n(G),"clientY",void 0),nr($n(G),"dt",void 0),nr($n(G),"eventable",void 0),pe.pointerExtend($n(G),S),S!==C&&pe.pointerExtend($n(G),C),G.timeStamp=U,G.originalEvent=S,G.type=y,G.pointerId=pe.getPointerId(C),G.pointerType=pe.getPointerType(C),G.target=I,G.currentTarget=null,"tap"===y){var L=O.getPointerIndex(C);G.dt=G.timeStamp-O.pointers[L].downTime,G.double=!!(O.prevTap&&"doubletap"!==O.prevTap.type&&O.prevTap.target===G.target&&G.timeStamp-O.tapTime<500)}else"doubletap"===y&&(G.dt=C.timeStamp-O.tapTime);return G}return(f=[{key:"_subtractOrigin",value:function(y){var C=y.x,S=y.y;return this.pageX-=C,this.pageY-=S,this.clientX-=C,this.clientY-=S,this}},{key:"_addOrigin",value:function(y){var C=y.x,S=y.y;return this.pageX+=C,this.pageY+=S,this.clientX+=C,this.clientY+=S,this}},{key:"preventDefault",value:function(){this.originalEvent.preventDefault()}}])&&function si(l,u){for(var f=0;f<u.length;f++){var h=u[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(l,h.key,h)}}(b.prototype,f),b}(Sr.BaseEvent);Si.PointerEvent=Si.default=rl;var zo={};Object.defineProperty(zo,"__esModule",{value:!0}),zo.default=void 0;var Go={id:"pointer-events/base",before:["inertia","modifiers","auto-start","actions"],install:function(l){l.pointerEvents=Go,l.defaults.actions.pointerEvents=Go.defaults,(0,ce.default)(l.actions.phaselessTypes,Go.types)},listeners:{"interactions:new":function(l){var u=l.interaction;u.prevTap=null,u.tapTime=0},"interactions:update-pointer":function(l){var f=l.pointerInfo;!l.down&&f.hold||(f.hold={duration:1/0,timeout:null})},"interactions:move":function(l,u){var f=l.interaction,h=l.pointer,m=l.event,v=l.eventTarget;l.duplicate||f.pointerIsDown&&!f.pointerWasMoved||(f.pointerIsDown&&Vs(l),Di({interaction:f,pointer:h,event:m,eventTarget:v,type:"move"},u))},"interactions:down":function(l,u){(function(f,h){for(var m=f.interaction,v=f.pointer,b=f.event,y=f.eventTarget,S=m.pointers[f.pointerIndex].hold,I=$.getPath(y),O={interaction:m,pointer:v,event:b,eventTarget:y,type:"hold",targets:[],path:I,node:null},U=0;U<I.length;U++)O.node=I[U],h.fire("pointerEvents:collect-targets",O);if(O.targets.length){for(var L=1/0,ee=0;ee<O.targets.length;ee++){var ue=O.targets[ee].eventable.options.holdDuration;ue<L&&(L=ue)}S.duration=L,S.timeout=setTimeout(function(){Di({interaction:m,eventTarget:y,pointer:v,event:b,type:"hold"},h)},L)}})(l,u),Di(l,u)},"interactions:up":function(l,u){var f,m;Vs(l),Di(l,u),(m=(f=l).interaction).pointerWasMoved||Di({interaction:m,eventTarget:f.eventTarget,pointer:f.pointer,event:f.event,type:"tap"},u)},"interactions:cancel":function(l,u){Vs(l),Di(l,u)}},PointerEvent:Si.PointerEvent,fire:Di,collectEventTargets:il,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:{down:!0,move:!0,up:!0,cancel:!0,tap:!0,doubletap:!0,hold:!0}};function Di(l,u){var f=l.interaction,h=l.pointer,m=l.event,v=l.eventTarget,b=l.type,y=l.targets,C=void 0===y?il(l,u):y,S=new Si.PointerEvent(b,h,m,v,f,u.now());u.fire("pointerEvents:new",{pointerEvent:S});for(var I={interaction:f,pointer:h,event:m,eventTarget:v,targets:C,type:b,pointerEvent:S},O=0;O<C.length;O++){var U=C[O];for(var G in U.props||{})S[G]=U.props[G];var L=(0,xt.default)(U.eventable,U.node);if(S._subtractOrigin(L),S.eventable=U.eventable,S.currentTarget=U.node,U.eventable.fire(S),S._addOrigin(L),S.immediatePropagationStopped||S.propagationStopped&&O+1<C.length&&C[O+1].node!==S.currentTarget)break}if(u.fire("pointerEvents:fired",I),"tap"===b){var ee=S.double?Di({interaction:f,pointer:h,event:m,eventTarget:v,type:"doubletap"},u):S;f.prevTap=ee,f.tapTime=ee.timeStamp}return S}function il(l,u){var f=l.interaction,h=l.pointer,m=l.event,v=l.eventTarget,b=l.type,y=f.getPointerIndex(h),C=f.pointers[y];if("tap"===b&&(f.pointerWasMoved||!C||C.downTarget!==v))return[];for(var S=$.getPath(v),I={interaction:f,pointer:h,event:m,eventTarget:v,type:b,path:S,targets:[],node:null},O=0;O<S.length;O++)I.node=S[O],u.fire("pointerEvents:collect-targets",I);return"hold"===b&&(I.targets=I.targets.filter(function(G){var L;return G.eventable.options.holdDuration===(null==(L=f.pointers[y])?void 0:L.hold.duration)})),I.targets}function Vs(l){var h=l.interaction.pointers[l.pointerIndex].hold;h&&h.timeout&&(clearTimeout(h.timeout),h.timeout=null)}zo.default=Go;var Bs={};function od(l){var u=l.interaction;u.holdIntervalHandle&&(clearInterval(u.holdIntervalHandle),u.holdIntervalHandle=null)}Object.defineProperty(Bs,"__esModule",{value:!0}),Bs.default=void 0;var sd={id:"pointer-events/holdRepeat",install:function(l){l.usePlugin(zo.default);var u=l.pointerEvents;u.defaults.holdRepeatInterval=0,u.types.holdrepeat=l.actions.phaselessTypes.holdrepeat=!0},listeners:["move","up","cancel","endall"].reduce(function(l,u){return l["pointerEvents:".concat(u)]=od,l},{"pointerEvents:new":function(l){var u=l.pointerEvent;"hold"===u.type&&(u.count=(u.count||0)+1)},"pointerEvents:fired":function(l,u){var f=l.interaction,h=l.pointerEvent,m=l.eventTarget,v=l.targets;if("hold"===h.type&&v.length){var b=v[0].eventable.options.holdRepeatInterval;b<=0||(f.holdIntervalHandle=setTimeout(function(){u.pointerEvents.fire({interaction:f,eventTarget:m,type:"hold",pointer:h,event:h},u)},b))}}})};Bs.default=sd;var qo={};function Ep(l){return(0,ce.default)(this.events.options,l),this}Object.defineProperty(qo,"__esModule",{value:!0}),qo.default=void 0,qo.default={id:"pointer-events/interactableTargets",install:function(l){var u=l.Interactable;u.prototype.pointerEvents=Ep;var f=u.prototype._backCompatOption;u.prototype._backCompatOption=function(h,m){var v=f.call(this,h,m);return v===this&&(this.events.options[h]=m),v}},listeners:{"pointerEvents:collect-targets":function(l,u){var f=l.targets,h=l.node,m=l.type,v=l.eventTarget;u.interactables.forEachMatch(h,function(b){var y=b.events;y.types[m]&&y.types[m].length&&b.testIgnoreAllow(y.options,h,v)&&f.push({node:h,eventable:y,props:{interactable:b}})})},"interactable:new":function(l){var u=l.interactable;u.events.getRect=function(f){return u.getRect(f)}},"interactable:set":function(l,u){var f=l.interactable,h=l.options;(0,ce.default)(f.events.options,u.pointerEvents.defaults),(0,ce.default)(f.events.options,h.pointerEvents||{})}}};var dn={};Object.defineProperty(dn,"__esModule",{value:!0}),dn.default=void 0,dn.default={id:"pointer-events",install:function(l){l.usePlugin(zo),l.usePlugin(Bs.default),l.usePlugin(qo.default)}};var At={};function ad(l){var u=l.Interactable;l.actions.phases.reflow=!0,u.prototype.reflow=function(f){return function(h,m,v){for(var b=R.default.string(h.target)?ht.from(h._context.querySelectorAll(h.target)):[h.target],y=v.window.Promise,C=y?[]:null,S=function(){var O=b[I],U=h.getRect(O);if(!U)return"break";var G=ht.find(v.interactions.list,function(be){return be.interacting()&&be.interactable===h&&be.element===O&&be.prepared.name===m.name}),L=void 0;if(G)G.move(),C&&(L=G._reflowPromise||new y(function(be){G._reflowResolve=be}));else{var ee=(0,Me.tlbrToXywh)(U),ue={page:{x:ee.x,y:ee.y},client:{x:ee.x,y:ee.y},timeStamp:v.now()},te=pe.coordsToEvent(ue);L=function(be,ke,je,pt,yt){var Je=be.interactions.new({pointerType:"reflow"}),gt={interaction:Je,event:yt,pointer:yt,eventTarget:je,phase:"reflow"};Je.interactable=ke,Je.element=je,Je.prevEvent=yt,Je.updatePointer(yt,yt,je,!0),pe.setZeroCoords(Je.coords.delta),(0,Se.copyAction)(Je.prepared,pt),Je._doPhase(gt);var Ir=be.window.Promise,jr=Ir?new Ir(function($a){Je._reflowResolve=$a}):void 0;return Je._reflowPromise=jr,Je.start(pt,ke,je),Je._interacting?(Je.move(gt),Je.end(yt)):(Je.stop(),Je._reflowResolve()),Je.removePointer(yt,yt),jr}(v,h,O,m,te)}C&&C.push(L)},I=0;I<b.length&&"break"!==S();I++);return C&&y.all(C).then(function(){return h})}(this,f,l)}}Object.defineProperty(At,"__esModule",{value:!0}),At.install=ad,At.default=void 0,At.default={id:"reflow",install:ad,listeners:{"interactions:stop":function(l,u){var f=l.interaction;"reflow"===f.pointerType&&(f._reflowResolve&&f._reflowResolve(),ht.remove(u.interactions.list,f))}}};var vr={exports:{}};function cd(l){return(cd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(l)}if(Object.defineProperty(vr.exports,"__esModule",{value:!0}),vr.exports.default=void 0,kn.default.use(Es.default),kn.default.use(bi.default),kn.default.use(dn.default),kn.default.use(tn.default),kn.default.use(un.default),kn.default.use(at.default),kn.default.use(Cs.default),kn.default.use(De.default),kn.default.use(At.default),vr.exports.default=kn.default,"object"===cd(vr)&&vr)try{vr.exports=kn.default}catch(l){}kn.default.default=kn.default,vr=vr.exports;var so={exports:{}};function Us(l){return(Us="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(l)}if(Object.defineProperty(so.exports,"__esModule",{value:!0}),so.exports.default=void 0,so.exports.default=vr.default,"object"===Us(so)&&so)try{so.exports=vr.default}catch(l){}return vr.default.default=vr.default,so.exports}()},269:function(Xt,q,T){var M,B;M=function(ne){"use strict";var ut,Ce,Te={template:"[%t] %l:",levelFormatter:function(he){return he.toUpperCase()},nameFormatter:function(he){return he||"root"},timestampFormatter:function(he){return he.toTimeString().replace(/.*(\d{2}:\d{2}:\d{2}).*/,"$1")},format:void 0},ft={},X={reg:function(he){if(!he||!he.getLogger)throw new TypeError("Argument is not a root logger");ut=he},apply:function(he,Ke){if(!he||!he.setLevel)throw new TypeError("Argument is not a logger");var W=he.methodFactory,le=he.name||"",ze=ft[le]||ft[""]||Te;return ft[le]||(he.methodFactory=function w(x,N,j){var $=W(x,N,j),me=ft[j]||ft[""],oe=-1!==me.template.indexOf("%t"),Ne=-1!==me.template.indexOf("%l"),_t=-1!==me.template.indexOf("%n");return function(){for(var re="",ae=arguments.length,ce=Array(ae),Me=0;Me<ae;Me++)ce[Me]=arguments[Me];if(le||!ft[j]){var tt=me.timestampFormatter(new Date),en=me.levelFormatter(x),xt=me.nameFormatter(j);me.format?re+=me.format(en,xt,tt):(re+=me.template,oe&&(re=re.replace(/%t/,tt)),Ne&&(re=re.replace(/%l/,en)),_t&&(re=re.replace(/%n/,xt))),ce.length&&"string"==typeof ce[0]?ce[0]=re+" "+ce[0]:ce.unshift(re)}$.apply(void 0,ce)}}),(Ke=Ke||{}).template&&(Ke.format=void 0),ft[le]=function(he){for(var le,Ke=1,W=arguments.length;Ke<W;Ke++)for(le in arguments[Ke])Object.prototype.hasOwnProperty.call(arguments[Ke],le)&&(he[le]=arguments[Ke][le]);return he}({},ze,Ke),he.setLevel(he.getLevel()),ut||he.warn("It is necessary to call the function reg() of loglevel-plugin-prefix before calling apply. From the next release, it will throw an error. See more: https://github.com/kutuluk/loglevel-plugin-prefix/blob/master/README.md"),he}};return ne&&(Ce=ne.prefix,X.noConflict=function(){return ne.prefix===X&&(ne.prefix=Ce),X}),X},void 0!==(B=M.call(q,T,q,Xt))&&(Xt.exports=B)},166:function(Xt,q,T){var M,B;!function(ne,R){"use strict";M=function(){var ne=function(){},R="undefined",Te=typeof window!==R&&typeof window.navigator!==R&&/Trident\/|MSIE /.test(window.navigator.userAgent),ut=["trace","debug","info","warn","error"];function ft(w,x){var N=w[x];if("function"==typeof N.bind)return N.bind(w);try{return Function.prototype.bind.call(N,w)}catch(j){return function(){return Function.prototype.apply.apply(N,[w,arguments])}}}function P(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function k(w){return"debug"===w&&(w="log"),typeof console!==R&&("trace"===w&&Te?P:void 0!==console[w]?ft(console,w):void 0!==console.log?ft(console,"log"):ne)}function X(w,x){for(var N=0;N<ut.length;N++){var j=ut[N];this[j]=N<w?ne:this.methodFactory(j,w,x)}this.log=this.debug}function Ce(w,x,N){return function(){typeof console!==R&&(X.call(this,x,N),this[w].apply(this,arguments))}}function he(w,x,N){return k(w)||Ce.apply(this,arguments)}function Ke(w,x,N){var $,j=this,me="loglevel";function Ne(){var re;if(typeof window!==R&&me){try{re=window.localStorage[me]}catch(Me){}if(typeof re===R)try{var ae=window.document.cookie,ce=ae.indexOf(encodeURIComponent(me)+"=");-1!==ce&&(re=/^([^;]+)/.exec(ae.slice(ce))[1])}catch(Me){}return void 0===j.levels[re]&&(re=void 0),re}}"string"==typeof w?me+=":"+w:"symbol"==typeof w&&(me=void 0),j.name=w,j.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},j.methodFactory=N||he,j.getLevel=function(){return $},j.setLevel=function(re,ae){if("string"==typeof re&&void 0!==j.levels[re.toUpperCase()]&&(re=j.levels[re.toUpperCase()]),!("number"==typeof re&&re>=0&&re<=j.levels.SILENT))throw"log.setLevel() called with invalid level: "+re;if($=re,!1!==ae&&function oe(re){var ae=(ut[re]||"silent").toUpperCase();if(typeof window!==R&&me){try{return void(window.localStorage[me]=ae)}catch(ce){}try{window.document.cookie=encodeURIComponent(me)+"="+ae+";"}catch(ce){}}}(re),X.call(j,re,w),typeof console===R&&re<j.levels.SILENT)return"No console available for logging"},j.setDefaultLevel=function(re){Ne()||j.setLevel(re,!1)},j.enableAll=function(re){j.setLevel(j.levels.TRACE,re)},j.disableAll=function(re){j.setLevel(j.levels.SILENT,re)};var _t=Ne();null==_t&&(_t=null==x?"WARN":x),j.setLevel(_t,!1)}var W=new Ke,le={};W.getLogger=function(x){if("symbol"!=typeof x&&"string"!=typeof x||""===x)throw new TypeError("You must supply a name when creating a logger.");var N=le[x];return N||(N=le[x]=new Ke(x,W.getLevel(),W.methodFactory)),N};var ze=typeof window!==R?window.log:void 0;return W.noConflict=function(){return typeof window!==R&&window.log===W&&(window.log=ze),W},W.getLoggers=function(){return le},W.default=W,W},void 0!==(B=M.call(q,T,q,Xt))&&(Xt.exports=B)}()},297:(Xt,q,T)=>{var M=T(557).MY,B=T(557).cx;function R(P){this.index=0,this.dataBuffer=P,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}function Te(){this.bufferBuilder=new M}function ut(P){var k=P.charCodeAt(0);return k<=2047?"00":k<=65535?"000":k<=2097151?"0000":k<=67108863?"00000":"000000"}Xt.exports={unpack:function(P){return new R(P).unpack()},pack:function(P){var k=new Te;return k.pack(P),k.getBuffer()}},R.prototype.unpack=function(){var k,P=this.unpack_uint8();if(P<128)return P;if((224^P)<32)return(224^P)-32;if((k=160^P)<=15)return this.unpack_raw(k);if((k=176^P)<=15)return this.unpack_string(k);if((k=144^P)<=15)return this.unpack_array(k);if((k=128^P)<=15)return this.unpack_map(k);switch(P){case 192:return null;case 193:case 212:case 213:case 214:case 215:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 216:return k=this.unpack_uint16(),this.unpack_string(k);case 217:return k=this.unpack_uint32(),this.unpack_string(k);case 218:return k=this.unpack_uint16(),this.unpack_raw(k);case 219:return k=this.unpack_uint32(),this.unpack_raw(k);case 220:return k=this.unpack_uint16(),this.unpack_array(k);case 221:return k=this.unpack_uint32(),this.unpack_array(k);case 222:return k=this.unpack_uint16(),this.unpack_map(k);case 223:return k=this.unpack_uint32(),this.unpack_map(k)}},R.prototype.unpack_uint8=function(){var P=255&this.dataView[this.index];return this.index++,P},R.prototype.unpack_uint16=function(){var P=this.read(2),k=256*(255&P[0])+(255&P[1]);return this.index+=2,k},R.prototype.unpack_uint32=function(){var P=this.read(4),k=256*(256*(256*P[0]+P[1])+P[2])+P[3];return this.index+=4,k},R.prototype.unpack_uint64=function(){var P=this.read(8),k=256*(256*(256*(256*(256*(256*(256*P[0]+P[1])+P[2])+P[3])+P[4])+P[5])+P[6])+P[7];return this.index+=8,k},R.prototype.unpack_int8=function(){var P=this.unpack_uint8();return P<128?P:P-256},R.prototype.unpack_int16=function(){var P=this.unpack_uint16();return P<32768?P:P-65536},R.prototype.unpack_int32=function(){var P=this.unpack_uint32();return P<Math.pow(2,31)?P:P-Math.pow(2,32)},R.prototype.unpack_int64=function(){var P=this.unpack_uint64();return P<Math.pow(2,63)?P:P-Math.pow(2,64)},R.prototype.unpack_raw=function(P){if(this.length<this.index+P)throw new Error("BinaryPackFailure: index is out of range "+this.index+" "+P+" "+this.length);var k=this.dataBuffer.slice(this.index,this.index+P);return this.index+=P,k},R.prototype.unpack_string=function(P){for(var he,Ke,k=this.read(P),X=0,Ce="";X<P;)(he=k[X])<128?(Ce+=String.fromCharCode(he),X++):(192^he)<32?(Ke=(192^he)<<6|63&k[X+1],Ce+=String.fromCharCode(Ke),X+=2):(Ke=(15&he)<<12|(63&k[X+1])<<6|63&k[X+2],Ce+=String.fromCharCode(Ke),X+=3);return this.index+=P,Ce},R.prototype.unpack_array=function(P){for(var k=new Array(P),X=0;X<P;X++)k[X]=this.unpack();return k},R.prototype.unpack_map=function(P){for(var k={},X=0;X<P;X++){var Ce=this.unpack(),he=this.unpack();k[Ce]=he}return k},R.prototype.unpack_float=function(){var P=this.unpack_uint32();return(0==P>>31?1:-1)*(8388607&P|8388608)*Math.pow(2,(P>>23&255)-127-23)},R.prototype.unpack_double=function(){var P=this.unpack_uint32(),k=this.unpack_uint32(),Ce=(P>>20&2047)-1023;return(0==P>>31?1:-1)*((1048575&P|1048576)*Math.pow(2,Ce-20)+k*Math.pow(2,Ce-52))},R.prototype.read=function(P){var k=this.index;if(k+P<=this.length)return this.dataView.subarray(k,k+P);throw new Error("BinaryPackFailure: read index out of range")},Te.prototype.getBuffer=function(){return this.bufferBuilder.getBuffer()},Te.prototype.pack=function(P){var k=typeof P;if("string"===k)this.pack_string(P);else if("number"===k)Math.floor(P)===P?this.pack_integer(P):this.pack_double(P);else if("boolean"===k)!0===P?this.bufferBuilder.append(195):!1===P&&this.bufferBuilder.append(194);else if("undefined"===k)this.bufferBuilder.append(192);else{if("object"!==k)throw new Error('Type "'+k+'" not yet supported');if(null===P)this.bufferBuilder.append(192);else{var X=P.constructor;if(X==Array)this.pack_array(P);else if(X==Blob||X==File||P instanceof Blob||P instanceof File)this.pack_bin(P);else if(X==ArrayBuffer)this.pack_bin(B.useArrayBufferView?new Uint8Array(P):P);else if("BYTES_PER_ELEMENT"in P)this.pack_bin(B.useArrayBufferView?new Uint8Array(P.buffer):P.buffer);else if(X==Object||X.toString().startsWith("class"))this.pack_object(P);else if(X==Date)this.pack_string(P.toString());else{if("function"!=typeof P.toBinaryPack)throw new Error('Type "'+X.toString()+'" not yet supported');this.bufferBuilder.append(P.toBinaryPack())}}}this.bufferBuilder.flush()},Te.prototype.pack_bin=function(P){var k=P.length||P.byteLength||P.size;if(k<=15)this.pack_uint8(160+k);else if(k<=65535)this.bufferBuilder.append(218),this.pack_uint16(k);else{if(!(k<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(219),this.pack_uint32(k)}this.bufferBuilder.append(P)},Te.prototype.pack_string=function(P){var k=function ft(P){return P.length>600?new Blob([P]).size:P.replace(/[^\u0000-\u007F]/g,ut).length}(P);if(k<=15)this.pack_uint8(176+k);else if(k<=65535)this.bufferBuilder.append(216),this.pack_uint16(k);else{if(!(k<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(217),this.pack_uint32(k)}this.bufferBuilder.append(P)},Te.prototype.pack_array=function(P){var k=P.length;if(k<=15)this.pack_uint8(144+k);else if(k<=65535)this.bufferBuilder.append(220),this.pack_uint16(k);else{if(!(k<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(221),this.pack_uint32(k)}for(var X=0;X<k;X++)this.pack(P[X])},Te.prototype.pack_integer=function(P){if(P>=-32&&P<=127)this.bufferBuilder.append(255&P);else if(P>=0&&P<=255)this.bufferBuilder.append(204),this.pack_uint8(P);else if(P>=-128&&P<=127)this.bufferBuilder.append(208),this.pack_int8(P);else if(P>=0&&P<=65535)this.bufferBuilder.append(205),this.pack_uint16(P);else if(P>=-32768&&P<=32767)this.bufferBuilder.append(209),this.pack_int16(P);else if(P>=0&&P<=4294967295)this.bufferBuilder.append(206),this.pack_uint32(P);else if(P>=-2147483648&&P<=2147483647)this.bufferBuilder.append(210),this.pack_int32(P);else if(P>=-0x8000000000000000&&P<=0x8000000000000000)this.bufferBuilder.append(211),this.pack_int64(P);else{if(!(P>=0&&P<=0x10000000000000000))throw new Error("Invalid integer");this.bufferBuilder.append(207),this.pack_uint64(P)}},Te.prototype.pack_double=function(P){var k=0;P<0&&(k=1,P=-P);var X=Math.floor(Math.log(P)/Math.LN2),Ce=P/Math.pow(2,X)-1,he=Math.floor(Ce*Math.pow(2,52)),Ke=Math.pow(2,32),W=k<<31|X+1023<<20|he/Ke&1048575,le=he%Ke;this.bufferBuilder.append(203),this.pack_int32(W),this.pack_int32(le)},Te.prototype.pack_object=function(P){var X=Object.keys(P).length;if(X<=15)this.pack_uint8(128+X);else if(X<=65535)this.bufferBuilder.append(222),this.pack_uint16(X);else{if(!(X<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(223),this.pack_uint32(X)}for(var Ce in P)P.hasOwnProperty(Ce)&&(this.pack(Ce),this.pack(P[Ce]))},Te.prototype.pack_uint8=function(P){this.bufferBuilder.append(P)},Te.prototype.pack_uint16=function(P){this.bufferBuilder.append(P>>8),this.bufferBuilder.append(255&P)},Te.prototype.pack_uint32=function(P){var k=4294967295&P;this.bufferBuilder.append((4278190080&k)>>>24),this.bufferBuilder.append((16711680&k)>>>16),this.bufferBuilder.append((65280&k)>>>8),this.bufferBuilder.append(255&k)},Te.prototype.pack_uint64=function(P){var k=P/Math.pow(2,32),X=P%Math.pow(2,32);this.bufferBuilder.append((4278190080&k)>>>24),this.bufferBuilder.append((16711680&k)>>>16),this.bufferBuilder.append((65280&k)>>>8),this.bufferBuilder.append(255&k),this.bufferBuilder.append((4278190080&X)>>>24),this.bufferBuilder.append((16711680&X)>>>16),this.bufferBuilder.append((65280&X)>>>8),this.bufferBuilder.append(255&X)},Te.prototype.pack_int8=function(P){this.bufferBuilder.append(255&P)},Te.prototype.pack_int16=function(P){this.bufferBuilder.append((65280&P)>>8),this.bufferBuilder.append(255&P)},Te.prototype.pack_int32=function(P){this.bufferBuilder.append(P>>>24&255),this.bufferBuilder.append((16711680&P)>>>16),this.bufferBuilder.append((65280&P)>>>8),this.bufferBuilder.append(255&P)},Te.prototype.pack_int64=function(P){var k=Math.floor(P/Math.pow(2,32)),X=P%Math.pow(2,32);this.bufferBuilder.append((4278190080&k)>>>24),this.bufferBuilder.append((16711680&k)>>>16),this.bufferBuilder.append((65280&k)>>>8),this.bufferBuilder.append(255&k),this.bufferBuilder.append((4278190080&X)>>>24),this.bufferBuilder.append((16711680&X)>>>16),this.bufferBuilder.append((65280&X)>>>8),this.bufferBuilder.append(255&X)}},557:Xt=>{var q={};q.useBlobBuilder=function(){try{return new Blob([]),!1}catch(B){return!0}}(),q.useArrayBufferView=!q.useBlobBuilder&&function(){try{return 0===new Blob([new Uint8Array([])]).size}catch(B){return!0}}(),Xt.exports.cx=q;var T=Xt.exports.xE;function M(){this._pieces=[],this._parts=[]}"undefined"!=typeof window&&(T=Xt.exports.xE=window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder||window.BlobBuilder),M.prototype.append=function(B){"number"==typeof B?this._pieces.push(B):(this.flush(),this._parts.push(B))},M.prototype.flush=function(){if(this._pieces.length>0){var B=new Uint8Array(this._pieces);q.useArrayBufferView||(B=B.buffer),this._parts.push(B),this._pieces=[]}},M.prototype.getBuffer=function(){if(this.flush(),q.useBlobBuilder){for(var B=new T,ne=0,R=this._parts.length;ne<R;ne++)B.append(this._parts[ne]);return B.getBlob()}return new Blob(this._parts)},Xt.exports.MY=M},60:(Xt,q,T)=>{"use strict";var M=T(38);function ne(k,X,Ce,he,Ke){var W=M.writeRtpDescription(k.kind,X);if(W+=M.writeIceParameters(k.iceGatherer.getLocalParameters()),W+=M.writeDtlsParameters(k.dtlsTransport.getLocalParameters(),"offer"===Ce?"actpass":Ke||"active"),W+="a=mid:"+k.mid+"\r\n",W+=k.rtpSender&&k.rtpReceiver?"a=sendrecv\r\n":k.rtpSender?"a=sendonly\r\n":k.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",k.rtpSender){var le=k.rtpSender._initialTrackId||k.rtpSender.track.id;k.rtpSender._initialTrackId=le;var ze="msid:"+(he?he.id:"-")+" "+le+"\r\n";W+="a="+ze,W+="a=ssrc:"+k.sendEncodingParameters[0].ssrc+" "+ze,k.sendEncodingParameters[0].rtx&&(W+="a=ssrc:"+k.sendEncodingParameters[0].rtx.ssrc+" "+ze,W+="a=ssrc-group:FID "+k.sendEncodingParameters[0].ssrc+" "+k.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return W+="a=ssrc:"+k.sendEncodingParameters[0].ssrc+" cname:"+M.localCName+"\r\n",k.rtpSender&&k.sendEncodingParameters[0].rtx&&(W+="a=ssrc:"+k.sendEncodingParameters[0].rtx.ssrc+" cname:"+M.localCName+"\r\n"),W}function Te(k,X){var Ce={codecs:[],headerExtensions:[],fecMechanisms:[]},he=function(W,le){W=parseInt(W,10);for(var ze=0;ze<le.length;ze++)if(le[ze].payloadType===W||le[ze].preferredPayloadType===W)return le[ze]},Ke=function(W,le,ze,w){var x=he(W.parameters.apt,ze),N=he(le.parameters.apt,w);return x&&N&&x.name.toLowerCase()===N.name.toLowerCase()};return k.codecs.forEach(function(W){for(var le=0;le<X.codecs.length;le++){var ze=X.codecs[le];if(W.name.toLowerCase()===ze.name.toLowerCase()&&W.clockRate===ze.clockRate){if("rtx"===W.name.toLowerCase()&&W.parameters&&ze.parameters.apt&&!Ke(W,ze,k.codecs,X.codecs))continue;(ze=JSON.parse(JSON.stringify(ze))).numChannels=Math.min(W.numChannels,ze.numChannels),Ce.codecs.push(ze),ze.rtcpFeedback=ze.rtcpFeedback.filter(function(w){for(var x=0;x<W.rtcpFeedback.length;x++)if(W.rtcpFeedback[x].type===w.type&&W.rtcpFeedback[x].parameter===w.parameter)return!0;return!1});break}}}),k.headerExtensions.forEach(function(W){for(var le=0;le<X.headerExtensions.length;le++){var ze=X.headerExtensions[le];if(W.uri===ze.uri){Ce.headerExtensions.push(ze);break}}}),Ce}function ut(k,X,Ce){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[X][k].indexOf(Ce)}function ft(k,X){var Ce=k.getRemoteCandidates().find(function(he){return X.foundation===he.foundation&&X.ip===he.ip&&X.port===he.port&&X.priority===he.priority&&X.protocol===he.protocol&&X.type===he.type});return Ce||k.addRemoteCandidate(X),!Ce}function P(k,X){var Ce=new Error(X);return Ce.name=k,Ce.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[k],Ce}Xt.exports=function(k,X){function Ce(w,x){x.addTrack(w),x.dispatchEvent(new k.MediaStreamTrackEvent("addtrack",{track:w}))}function Ke(w,x,N,j){var $=new Event("track");$.track=x,$.receiver=N,$.transceiver={receiver:N},$.streams=j,k.setTimeout(function(){w._dispatchEvent("track",$)})}var W=function(w){var x=this,N=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function($){x[$]=N[$].bind(N)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",w=JSON.parse(JSON.stringify(w||{})),this.usingBundle="max-bundle"===w.bundlePolicy,"negotiate"===w.rtcpMuxPolicy)throw P("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(w.rtcpMuxPolicy||(w.rtcpMuxPolicy="require"),w.iceTransportPolicy){case"all":case"relay":break;default:w.iceTransportPolicy="all"}switch(w.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:w.bundlePolicy="balanced"}if(w.iceServers=function R(k,X){var Ce=!1;return(k=JSON.parse(JSON.stringify(k))).filter(function(he){if(he&&(he.urls||he.url)){var Ke=he.urls||he.url;he.url&&!he.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var W="string"==typeof Ke;return W&&(Ke=[Ke]),Ke=Ke.filter(function(le){return 0!==le.indexOf("turn:")||-1===le.indexOf("transport=udp")||-1!==le.indexOf("turn:[")||Ce?0===le.indexOf("stun:")&&X>=14393&&-1===le.indexOf("?transport=udp"):(Ce=!0,!0)}),delete he.url,he.urls=W?Ke[0]:Ke,!!Ke.length}})}(w.iceServers||[],X),this._iceGatherers=[],w.iceCandidatePoolSize)for(var j=w.iceCandidatePoolSize;j>0;j--)this._iceGatherers.push(new k.RTCIceGatherer({iceServers:w.iceServers,gatherPolicy:w.iceTransportPolicy}));else w.iceCandidatePoolSize=0;this._config=w,this.transceivers=[],this._sdpSessionId=M.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(W.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(W.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),W.prototype.onicecandidate=null,W.prototype.onaddstream=null,W.prototype.ontrack=null,W.prototype.onremovestream=null,W.prototype.onsignalingstatechange=null,W.prototype.oniceconnectionstatechange=null,W.prototype.onconnectionstatechange=null,W.prototype.onicegatheringstatechange=null,W.prototype.onnegotiationneeded=null,W.prototype.ondatachannel=null,W.prototype._dispatchEvent=function(w,x){this._isClosed||(this.dispatchEvent(x),"function"==typeof this["on"+w]&&this["on"+w](x))},W.prototype._emitGatheringStateChange=function(){var w=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",w)},W.prototype.getConfiguration=function(){return this._config},W.prototype.getLocalStreams=function(){return this.localStreams},W.prototype.getRemoteStreams=function(){return this.remoteStreams},W.prototype._createTransceiver=function(w,x){var j={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:w,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&this.transceivers.length>0)j.iceTransport=this.transceivers[0].iceTransport,j.dtlsTransport=this.transceivers[0].dtlsTransport;else{var $=this._createIceAndDtlsTransports();j.iceTransport=$.iceTransport,j.dtlsTransport=$.dtlsTransport}return x||this.transceivers.push(j),j},W.prototype.addTrack=function(w,x){if(this._isClosed)throw P("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");if(this.transceivers.find(function(me){return me.track===w}))throw P("InvalidAccessError","Track already exists.");for(var j,$=0;$<this.transceivers.length;$++)!this.transceivers[$].track&&this.transceivers[$].kind===w.kind&&(j=this.transceivers[$]);return j||(j=this._createTransceiver(w.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(x)&&this.localStreams.push(x),j.track=w,j.stream=x,j.rtpSender=new k.RTCRtpSender(w,j.dtlsTransport),j.rtpSender},W.prototype.addStream=function(w){var x=this;if(X>=15025)w.getTracks().forEach(function(j){x.addTrack(j,w)});else{var N=w.clone();w.getTracks().forEach(function(j,$){var me=N.getTracks()[$];j.addEventListener("enabled",function(oe){me.enabled=oe.enabled})}),N.getTracks().forEach(function(j){x.addTrack(j,N)})}},W.prototype.removeTrack=function(w){if(this._isClosed)throw P("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(w instanceof k.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var x=this.transceivers.find(function($){return $.rtpSender===w});if(!x)throw P("InvalidAccessError","Sender was not created by this connection.");var N=x.stream;x.rtpSender.stop(),x.rtpSender=null,x.track=null,x.stream=null,-1===this.transceivers.map(function($){return $.stream}).indexOf(N)&&this.localStreams.indexOf(N)>-1&&this.localStreams.splice(this.localStreams.indexOf(N),1),this._maybeFireNegotiationNeeded()},W.prototype.removeStream=function(w){var x=this;w.getTracks().forEach(function(N){var j=x.getSenders().find(function($){return $.track===N});j&&x.removeTrack(j)})},W.prototype.getSenders=function(){return this.transceivers.filter(function(w){return!!w.rtpSender}).map(function(w){return w.rtpSender})},W.prototype.getReceivers=function(){return this.transceivers.filter(function(w){return!!w.rtpReceiver}).map(function(w){return w.rtpReceiver})},W.prototype._createIceGatherer=function(w,x){var N=this;if(x&&w>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var j=new k.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(j,"state",{value:"new",writable:!0}),this.transceivers[w].bufferedCandidateEvents=[],this.transceivers[w].bufferCandidates=function($){var me=!$.candidate||0===Object.keys($.candidate).length;j.state=me?"completed":"gathering",null!==N.transceivers[w].bufferedCandidateEvents&&N.transceivers[w].bufferedCandidateEvents.push($)},j.addEventListener("localcandidate",this.transceivers[w].bufferCandidates),j},W.prototype._gather=function(w,x){var N=this,j=this.transceivers[x].iceGatherer;if(!j.onlocalcandidate){var $=this.transceivers[x].bufferedCandidateEvents;this.transceivers[x].bufferedCandidateEvents=null,j.removeEventListener("localcandidate",this.transceivers[x].bufferCandidates),j.onlocalcandidate=function(me){if(!(N.usingBundle&&x>0)){var oe=new Event("icecandidate");oe.candidate={sdpMid:w,sdpMLineIndex:x};var Ne=me.candidate,_t=!Ne||0===Object.keys(Ne).length;if(_t)("new"===j.state||"gathering"===j.state)&&(j.state="completed");else{"new"===j.state&&(j.state="gathering"),Ne.component=1,Ne.ufrag=j.getLocalParameters().usernameFragment;var re=M.writeCandidate(Ne);oe.candidate=Object.assign(oe.candidate,M.parseCandidate(re)),oe.candidate.candidate=re,oe.candidate.toJSON=function(){return{candidate:oe.candidate.candidate,sdpMid:oe.candidate.sdpMid,sdpMLineIndex:oe.candidate.sdpMLineIndex,usernameFragment:oe.candidate.usernameFragment}}}var ae=M.getMediaSections(N._localDescription.sdp);ae[oe.candidate.sdpMLineIndex]+=_t?"a=end-of-candidates\r\n":"a="+oe.candidate.candidate+"\r\n",N._localDescription.sdp=M.getDescription(N._localDescription.sdp)+ae.join("");var ce=N.transceivers.every(function(Me){return Me.iceGatherer&&"completed"===Me.iceGatherer.state});"gathering"!==N.iceGatheringState&&(N.iceGatheringState="gathering",N._emitGatheringStateChange()),_t||N._dispatchEvent("icecandidate",oe),ce&&(N._dispatchEvent("icecandidate",new Event("icecandidate")),N.iceGatheringState="complete",N._emitGatheringStateChange())}},k.setTimeout(function(){$.forEach(function(me){j.onlocalcandidate(me)})},0)}},W.prototype._createIceAndDtlsTransports=function(){var w=this,x=new k.RTCIceTransport(null);x.onicestatechange=function(){w._updateIceConnectionState(),w._updateConnectionState()};var N=new k.RTCDtlsTransport(x);return N.ondtlsstatechange=function(){w._updateConnectionState()},N.onerror=function(){Object.defineProperty(N,"state",{value:"failed",writable:!0}),w._updateConnectionState()},{iceTransport:x,dtlsTransport:N}},W.prototype._disposeIceAndDtlsTransports=function(w){var x=this.transceivers[w].iceGatherer;x&&(delete x.onlocalcandidate,delete this.transceivers[w].iceGatherer);var N=this.transceivers[w].iceTransport;N&&(delete N.onicestatechange,delete this.transceivers[w].iceTransport);var j=this.transceivers[w].dtlsTransport;j&&(delete j.ondtlsstatechange,delete j.onerror,delete this.transceivers[w].dtlsTransport)},W.prototype._transceive=function(w,x,N){var j=Te(w.localCapabilities,w.remoteCapabilities);x&&w.rtpSender&&(j.encodings=w.sendEncodingParameters,j.rtcp={cname:M.localCName,compound:w.rtcpParameters.compound},w.recvEncodingParameters.length&&(j.rtcp.ssrc=w.recvEncodingParameters[0].ssrc),w.rtpSender.send(j)),N&&w.rtpReceiver&&j.codecs.length>0&&("video"===w.kind&&w.recvEncodingParameters&&X<15019&&w.recvEncodingParameters.forEach(function($){delete $.rtx}),j.encodings=w.recvEncodingParameters.length?w.recvEncodingParameters:[{}],j.rtcp={compound:w.rtcpParameters.compound},w.rtcpParameters.cname&&(j.rtcp.cname=w.rtcpParameters.cname),w.sendEncodingParameters.length&&(j.rtcp.ssrc=w.sendEncodingParameters[0].ssrc),w.rtpReceiver.receive(j))},W.prototype.setLocalDescription=function(w){var N,j,x=this;if(-1===["offer","answer"].indexOf(w.type))return Promise.reject(P("TypeError",'Unsupported type "'+w.type+'"'));if(!ut("setLocalDescription",w.type,x.signalingState)||x._isClosed)return Promise.reject(P("InvalidStateError","Can not set local "+w.type+" in state "+x.signalingState));if("offer"===w.type)N=M.splitSections(w.sdp),j=N.shift(),N.forEach(function(me,oe){var Ne=M.parseRtpParameters(me);x.transceivers[oe].localCapabilities=Ne}),x.transceivers.forEach(function(me,oe){x._gather(me.mid,oe)});else if("answer"===w.type){N=M.splitSections(x._remoteDescription.sdp),j=N.shift();var $=M.matchPrefix(j,"a=ice-lite").length>0;N.forEach(function(me,oe){var Ne=x.transceivers[oe],_t=Ne.iceGatherer,re=Ne.iceTransport,ae=Ne.dtlsTransport,ce=Ne.localCapabilities,Me=Ne.remoteCapabilities;if(!(M.isRejected(me)&&0===M.matchPrefix(me,"a=bundle-only").length||Ne.rejected)){var en=M.getIceParameters(me,j),xt=M.getDtlsParameters(me,j);$&&(xt.role="server"),(!x.usingBundle||0===oe)&&(x._gather(Ne.mid,oe),"new"===re.state&&re.start(_t,en,$?"controlling":"controlled"),"new"===ae.state&&ae.start(xt));var Le=Te(ce,Me);x._transceive(Ne,Le.codecs.length>0,!1)}})}return x._localDescription={type:w.type,sdp:w.sdp},x._updateSignalingState("offer"===w.type?"have-local-offer":"stable"),Promise.resolve()},W.prototype.setRemoteDescription=function(w){var x=this;if(-1===["offer","answer"].indexOf(w.type))return Promise.reject(P("TypeError",'Unsupported type "'+w.type+'"'));if(!ut("setRemoteDescription",w.type,x.signalingState)||x._isClosed)return Promise.reject(P("InvalidStateError","Can not set remote "+w.type+" in state "+x.signalingState));var N={};x.remoteStreams.forEach(function(re){N[re.id]=re});var j=[],$=M.splitSections(w.sdp),me=$.shift(),oe=M.matchPrefix(me,"a=ice-lite").length>0,Ne=M.matchPrefix(me,"a=group:BUNDLE ").length>0;x.usingBundle=Ne;var _t=M.matchPrefix(me,"a=ice-options:")[0];return x.canTrickleIceCandidates=!!_t&&_t.substr(14).split(" ").indexOf("trickle")>=0,$.forEach(function(re,ae){var ce=M.splitLines(re),Me=M.getKind(re),tt=M.isRejected(re)&&0===M.matchPrefix(re,"a=bundle-only").length,en=ce[0].substr(2).split(" ")[2],xt=M.getDirection(re,me),Le=M.parseMsid(re),ko=M.getMid(re)||M.generateIdentifier();if(tt||"application"===Me&&("DTLS/SCTP"===en||"UDP/DTLS/SCTP"===en))x.transceivers[ae]={mid:ko,kind:Me,protocol:en,rejected:!0};else{!tt&&x.transceivers[ae]&&x.transceivers[ae].rejected&&(x.transceivers[ae]=x._createTransceiver(Me,!0));var Pe,Ae,Qr,gs,pe,Wi,Jr,Cr,Er,ms,Sr,Ki=M.parseRtpParameters(re);tt||(ms=M.getIceParameters(re,me),(Sr=M.getDtlsParameters(re,me)).role="client"),Jr=M.parseRtpEncodingParameters(re);var vs=M.parseRtcpParameters(re),Zn=M.matchPrefix(re,"a=end-of-candidates",me).length>0,Zr=M.matchPrefix(re,"a=candidate:").map(function(vn){return M.parseCandidate(vn)}).filter(function(vn){return 1===vn.component});if(("offer"===w.type||"answer"===w.type)&&!tt&&Ne&&ae>0&&x.transceivers[ae]&&(x._disposeIceAndDtlsTransports(ae),x.transceivers[ae].iceGatherer=x.transceivers[0].iceGatherer,x.transceivers[ae].iceTransport=x.transceivers[0].iceTransport,x.transceivers[ae].dtlsTransport=x.transceivers[0].dtlsTransport,x.transceivers[ae].rtpSender&&x.transceivers[ae].rtpSender.setTransport(x.transceivers[0].dtlsTransport),x.transceivers[ae].rtpReceiver&&x.transceivers[ae].rtpReceiver.setTransport(x.transceivers[0].dtlsTransport)),"offer"!==w.type||tt)"answer"!==w.type||tt||(Ae=(Pe=x.transceivers[ae]).iceGatherer,Qr=Pe.iceTransport,gs=Pe.dtlsTransport,pe=Pe.rtpReceiver,Wi=Pe.sendEncodingParameters,Cr=Pe.localCapabilities,x.transceivers[ae].recvEncodingParameters=Jr,x.transceivers[ae].remoteCapabilities=Ki,x.transceivers[ae].rtcpParameters=vs,Zr.length&&"new"===Qr.state&&(!oe&&!Zn||Ne&&0!==ae?Zr.forEach(function(vn){ft(Pe.iceTransport,vn)}):Qr.setRemoteCandidates(Zr)),(!Ne||0===ae)&&("new"===Qr.state&&Qr.start(Ae,ms,"controlling"),"new"===gs.state&&gs.start(Sr)),!Te(Pe.localCapabilities,Pe.remoteCapabilities).codecs.filter(function(vn){return"rtx"===vn.name.toLowerCase()}).length&&Pe.sendEncodingParameters[0].rtx&&delete Pe.sendEncodingParameters[0].rtx,x._transceive(Pe,"sendrecv"===xt||"recvonly"===xt,"sendrecv"===xt||"sendonly"===xt),!pe||"sendrecv"!==xt&&"sendonly"!==xt?delete Pe.rtpReceiver:(Er=pe.track,Le?(N[Le.stream]||(N[Le.stream]=new k.MediaStream),Ce(Er,N[Le.stream]),j.push([Er,pe,N[Le.stream]])):(N.default||(N.default=new k.MediaStream),Ce(Er,N.default),j.push([Er,pe,N.default]))));else{(Pe=x.transceivers[ae]||x._createTransceiver(Me)).mid=ko,Pe.iceGatherer||(Pe.iceGatherer=x._createIceGatherer(ae,Ne)),Zr.length&&"new"===Pe.iceTransport.state&&(!Zn||Ne&&0!==ae?Zr.forEach(function(vn){ft(Pe.iceTransport,vn)}):Pe.iceTransport.setRemoteCandidates(Zr)),Cr=k.RTCRtpReceiver.getCapabilities(Me),X<15019&&(Cr.codecs=Cr.codecs.filter(function(vn){return"rtx"!==vn.name})),Wi=Pe.sendEncodingParameters||[{ssrc:1001*(2*ae+2)}];var Dr,ht=!1;"sendrecv"===xt||"sendonly"===xt?(ht=!Pe.rtpReceiver,pe=Pe.rtpReceiver||new k.RTCRtpReceiver(Pe.dtlsTransport,Me),ht&&(Er=pe.track,Le&&"-"===Le.stream||(Le?(N[Le.stream]||(N[Le.stream]=new k.MediaStream,Object.defineProperty(N[Le.stream],"id",{get:function(){return Le.stream}})),Object.defineProperty(Er,"id",{get:function(){return Le.track}}),Dr=N[Le.stream]):(N.default||(N.default=new k.MediaStream),Dr=N.default)),Dr&&(Ce(Er,Dr),Pe.associatedRemoteMediaStreams.push(Dr)),j.push([Er,pe,Dr]))):Pe.rtpReceiver&&Pe.rtpReceiver.track&&(Pe.associatedRemoteMediaStreams.forEach(function(vn){var _a=vn.getTracks().find(function(Wt){return Wt.id===Pe.rtpReceiver.track.id});_a&&function he(w,x){x.removeTrack(w),x.dispatchEvent(new k.MediaStreamTrackEvent("removetrack",{track:w}))}(_a,vn)}),Pe.associatedRemoteMediaStreams=[]),Pe.localCapabilities=Cr,Pe.remoteCapabilities=Ki,Pe.rtpReceiver=pe,Pe.rtcpParameters=vs,Pe.sendEncodingParameters=Wi,Pe.recvEncodingParameters=Jr,x._transceive(x.transceivers[ae],!1,ht)}}}),void 0===x._dtlsRole&&(x._dtlsRole="offer"===w.type?"active":"passive"),x._remoteDescription={type:w.type,sdp:w.sdp},x._updateSignalingState("offer"===w.type?"have-remote-offer":"stable"),Object.keys(N).forEach(function(re){var ae=N[re];if(ae.getTracks().length){if(-1===x.remoteStreams.indexOf(ae)){x.remoteStreams.push(ae);var ce=new Event("addstream");ce.stream=ae,k.setTimeout(function(){x._dispatchEvent("addstream",ce)})}j.forEach(function(Me){ae.id===Me[2].id&&Ke(x,Me[0],Me[1],[ae])})}}),j.forEach(function(re){re[2]||Ke(x,re[0],re[1],[])}),k.setTimeout(function(){!x||!x.transceivers||x.transceivers.forEach(function(re){re.iceTransport&&"new"===re.iceTransport.state&&re.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),re.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},W.prototype.close=function(){this.transceivers.forEach(function(w){w.iceTransport&&w.iceTransport.stop(),w.dtlsTransport&&w.dtlsTransport.stop(),w.rtpSender&&w.rtpSender.stop(),w.rtpReceiver&&w.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},W.prototype._updateSignalingState=function(w){this.signalingState=w;var x=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",x)},W.prototype._maybeFireNegotiationNeeded=function(){var w=this;"stable"!==this.signalingState||!0===this.needNegotiation||(this.needNegotiation=!0,k.setTimeout(function(){if(w.needNegotiation){w.needNegotiation=!1;var x=new Event("negotiationneeded");w._dispatchEvent("negotiationneeded",x)}},0))},W.prototype._updateIceConnectionState=function(){var w,x={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(j){j.iceTransport&&!j.rejected&&x[j.iceTransport.state]++}),w="new",x.failed>0?w="failed":x.checking>0?w="checking":x.disconnected>0?w="disconnected":x.new>0?w="new":x.connected>0?w="connected":x.completed>0&&(w="completed"),w!==this.iceConnectionState){this.iceConnectionState=w;var N=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",N)}},W.prototype._updateConnectionState=function(){var w,x={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(j){j.iceTransport&&j.dtlsTransport&&!j.rejected&&(x[j.iceTransport.state]++,x[j.dtlsTransport.state]++)}),x.connected+=x.completed,w="new",x.failed>0?w="failed":x.connecting>0?w="connecting":x.disconnected>0?w="disconnected":x.new>0?w="new":x.connected>0&&(w="connected"),w!==this.connectionState){this.connectionState=w;var N=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",N)}},W.prototype.createOffer=function(){var w=this;if(w._isClosed)return Promise.reject(P("InvalidStateError","Can not call createOffer after close"));var x=w.transceivers.filter(function(oe){return"audio"===oe.kind}).length,N=w.transceivers.filter(function(oe){return"video"===oe.kind}).length,j=arguments[0];if(j){if(j.mandatory||j.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==j.offerToReceiveAudio&&(x=!0===j.offerToReceiveAudio?1:!1===j.offerToReceiveAudio?0:j.offerToReceiveAudio),void 0!==j.offerToReceiveVideo&&(N=!0===j.offerToReceiveVideo?1:!1===j.offerToReceiveVideo?0:j.offerToReceiveVideo)}for(w.transceivers.forEach(function(oe){"audio"===oe.kind?--x<0&&(oe.wantReceive=!1):"video"===oe.kind&&--N<0&&(oe.wantReceive=!1)});x>0||N>0;)x>0&&(w._createTransceiver("audio"),x--),N>0&&(w._createTransceiver("video"),N--);var $=M.writeSessionBoilerplate(w._sdpSessionId,w._sdpSessionVersion++);w.transceivers.forEach(function(oe,Ne){var _t=oe.track,re=oe.kind,ae=oe.mid||M.generateIdentifier();oe.mid=ae,oe.iceGatherer||(oe.iceGatherer=w._createIceGatherer(Ne,w.usingBundle));var ce=k.RTCRtpSender.getCapabilities(re);X<15019&&(ce.codecs=ce.codecs.filter(function(tt){return"rtx"!==tt.name})),ce.codecs.forEach(function(tt){"H264"===tt.name&&void 0===tt.parameters["level-asymmetry-allowed"]&&(tt.parameters["level-asymmetry-allowed"]="1"),oe.remoteCapabilities&&oe.remoteCapabilities.codecs&&oe.remoteCapabilities.codecs.forEach(function(en){tt.name.toLowerCase()===en.name.toLowerCase()&&tt.clockRate===en.clockRate&&(tt.preferredPayloadType=en.payloadType)})}),ce.headerExtensions.forEach(function(tt){(oe.remoteCapabilities&&oe.remoteCapabilities.headerExtensions||[]).forEach(function(xt){tt.uri===xt.uri&&(tt.id=xt.id)})});var Me=oe.sendEncodingParameters||[{ssrc:1001*(2*Ne+1)}];_t&&X>=15019&&"video"===re&&!Me[0].rtx&&(Me[0].rtx={ssrc:Me[0].ssrc+1}),oe.wantReceive&&(oe.rtpReceiver=new k.RTCRtpReceiver(oe.dtlsTransport,re)),oe.localCapabilities=ce,oe.sendEncodingParameters=Me}),"max-compat"!==w._config.bundlePolicy&&($+="a=group:BUNDLE "+w.transceivers.map(function(oe){return oe.mid}).join(" ")+"\r\n"),$+="a=ice-options:trickle\r\n",w.transceivers.forEach(function(oe,Ne){$+=ne(oe,oe.localCapabilities,"offer",oe.stream,w._dtlsRole),$+="a=rtcp-rsize\r\n",oe.iceGatherer&&"new"!==w.iceGatheringState&&(0===Ne||!w.usingBundle)&&(oe.iceGatherer.getLocalCandidates().forEach(function(_t){_t.component=1,$+="a="+M.writeCandidate(_t)+"\r\n"}),"completed"===oe.iceGatherer.state&&($+="a=end-of-candidates\r\n"))});var me=new k.RTCSessionDescription({type:"offer",sdp:$});return Promise.resolve(me)},W.prototype.createAnswer=function(){var w=this;if(w._isClosed)return Promise.reject(P("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==w.signalingState&&"have-local-pranswer"!==w.signalingState)return Promise.reject(P("InvalidStateError","Can not call createAnswer in signalingState "+w.signalingState));var x=M.writeSessionBoilerplate(w._sdpSessionId,w._sdpSessionVersion++);w.usingBundle&&(x+="a=group:BUNDLE "+w.transceivers.map(function($){return $.mid}).join(" ")+"\r\n"),x+="a=ice-options:trickle\r\n";var N=M.getMediaSections(w._remoteDescription.sdp).length;w.transceivers.forEach(function($,me){if(!(me+1>N)){if($.rejected)return"application"===$.kind?x+="DTLS/SCTP"===$.protocol?"m=application 0 DTLS/SCTP 5000\r\n":"m=application 0 "+$.protocol+" webrtc-datachannel\r\n":"audio"===$.kind?x+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===$.kind&&(x+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(x+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+$.mid+"\r\n");var oe;$.stream&&("audio"===$.kind?oe=$.stream.getAudioTracks()[0]:"video"===$.kind&&(oe=$.stream.getVideoTracks()[0]),oe&&X>=15019&&"video"===$.kind&&!$.sendEncodingParameters[0].rtx&&($.sendEncodingParameters[0].rtx={ssrc:$.sendEncodingParameters[0].ssrc+1}));var Ne=Te($.localCapabilities,$.remoteCapabilities);!Ne.codecs.filter(function(re){return"rtx"===re.name.toLowerCase()}).length&&$.sendEncodingParameters[0].rtx&&delete $.sendEncodingParameters[0].rtx,x+=ne($,Ne,"answer",$.stream,w._dtlsRole),$.rtcpParameters&&$.rtcpParameters.reducedSize&&(x+="a=rtcp-rsize\r\n")}});var j=new k.RTCSessionDescription({type:"answer",sdp:x});return Promise.resolve(j)},W.prototype.addIceCandidate=function(w){var N,x=this;return w&&void 0===w.sdpMLineIndex&&!w.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(j,$){if(!x._remoteDescription)return $(P("InvalidStateError","Can not add ICE candidate without a remote description"));if(w&&""!==w.candidate){var oe=w.sdpMLineIndex;if(w.sdpMid)for(var Ne=0;Ne<x.transceivers.length;Ne++)if(x.transceivers[Ne].mid===w.sdpMid){oe=Ne;break}var _t=x.transceivers[oe];if(!_t)return $(P("OperationError","Can not add ICE candidate"));if(_t.rejected)return j();var re=Object.keys(w.candidate).length>0?M.parseCandidate(w.candidate):{};if("tcp"===re.protocol&&(0===re.port||9===re.port)||re.component&&1!==re.component)return j();if((0===oe||oe>0&&_t.iceTransport!==x.transceivers[0].iceTransport)&&!ft(_t.iceTransport,re))return $(P("OperationError","Can not add ICE candidate"));var ae=w.candidate.trim();0===ae.indexOf("a=")&&(ae=ae.substr(2)),(N=M.getMediaSections(x._remoteDescription.sdp))[oe]+="a="+(re.type?ae:"end-of-candidates")+"\r\n",x._remoteDescription.sdp=M.getDescription(x._remoteDescription.sdp)+N.join("")}else for(var me=0;me<x.transceivers.length&&(x.transceivers[me].rejected||(x.transceivers[me].iceTransport.addRemoteCandidate({}),(N=M.getMediaSections(x._remoteDescription.sdp))[me]+="a=end-of-candidates\r\n",x._remoteDescription.sdp=M.getDescription(x._remoteDescription.sdp)+N.join(""),!x.usingBundle));me++);j()})},W.prototype.getStats=function(w){if(w&&w instanceof k.MediaStreamTrack){var x=null;if(this.transceivers.forEach(function(j){j.rtpSender&&j.rtpSender.track===w?x=j.rtpSender:j.rtpReceiver&&j.rtpReceiver.track===w&&(x=j.rtpReceiver)}),!x)throw P("InvalidAccessError","Invalid selector.");return x.getStats()}var N=[];return this.transceivers.forEach(function(j){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function($){j[$]&&N.push(j[$].getStats())})}),Promise.all(N).then(function(j){var $=new Map;return j.forEach(function(me){me.forEach(function(oe){$.set(oe.id,oe)})}),$})},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach(function(w){var x=k[w];if(x&&x.prototype&&x.prototype.getStats){var N=x.prototype.getStats;x.prototype.getStats=function(){return N.apply(this).then(function(j){var $=new Map;return Object.keys(j).forEach(function(me){j[me].type=function B(k){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[k.type]||k.type}(j[me]),$.set(me,j[me])}),$})}}});var ze=["createOffer","createAnswer"];return ze.forEach(function(w){var x=W.prototype[w];W.prototype[w]=function(){var N=arguments;return"function"==typeof N[0]||"function"==typeof N[1]?x.apply(this,[arguments[2]]).then(function(j){"function"==typeof N[0]&&N[0].apply(null,[j])},function(j){"function"==typeof N[1]&&N[1].apply(null,[j])}):x.apply(this,arguments)}}),(ze=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach(function(w){var x=W.prototype[w];W.prototype[w]=function(){var N=arguments;return"function"==typeof N[1]||"function"==typeof N[2]?x.apply(this,arguments).then(function(){"function"==typeof N[1]&&N[1].apply(null)},function(j){"function"==typeof N[2]&&N[2].apply(null,[j])}):x.apply(this,arguments)}}),["getStats"].forEach(function(w){var x=W.prototype[w];W.prototype[w]=function(){var N=arguments;return"function"==typeof N[1]?x.apply(this,arguments).then(function(){"function"==typeof N[1]&&N[1].apply(null)}):x.apply(this,arguments)}}),W}},38:Xt=>{"use strict";var q={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};q.localCName=q.generateIdentifier(),q.splitLines=function(T){return T.trim().split("\n").map(function(M){return M.trim()})},q.splitSections=function(T){return T.split("\nm=").map(function(B,ne){return(ne>0?"m="+B:B).trim()+"\r\n"})},q.getDescription=function(T){var M=q.splitSections(T);return M&&M[0]},q.getMediaSections=function(T){var M=q.splitSections(T);return M.shift(),M},q.matchPrefix=function(T,M){return q.splitLines(T).filter(function(B){return 0===B.indexOf(M)})},q.parseCandidate=function(T){for(var M,B={foundation:(M=0===T.indexOf("a=candidate:")?T.substring(12).split(" "):T.substring(10).split(" "))[0],component:parseInt(M[1],10),protocol:M[2].toLowerCase(),priority:parseInt(M[3],10),ip:M[4],address:M[4],port:parseInt(M[5],10),type:M[7]},ne=8;ne<M.length;ne+=2)switch(M[ne]){case"raddr":B.relatedAddress=M[ne+1];break;case"rport":B.relatedPort=parseInt(M[ne+1],10);break;case"tcptype":B.tcpType=M[ne+1];break;case"ufrag":B.ufrag=M[ne+1],B.usernameFragment=M[ne+1];break;default:B[M[ne]]=M[ne+1]}return B},q.writeCandidate=function(T){var M=[];M.push(T.foundation),M.push(T.component),M.push(T.protocol.toUpperCase()),M.push(T.priority),M.push(T.address||T.ip),M.push(T.port);var B=T.type;return M.push("typ"),M.push(B),"host"!==B&&T.relatedAddress&&T.relatedPort&&(M.push("raddr"),M.push(T.relatedAddress),M.push("rport"),M.push(T.relatedPort)),T.tcpType&&"tcp"===T.protocol.toLowerCase()&&(M.push("tcptype"),M.push(T.tcpType)),(T.usernameFragment||T.ufrag)&&(M.push("ufrag"),M.push(T.usernameFragment||T.ufrag)),"candidate:"+M.join(" ")},q.parseIceOptions=function(T){return T.substr(14).split(" ")},q.parseRtpMap=function(T){var M=T.substr(9).split(" "),B={payloadType:parseInt(M.shift(),10)};return M=M[0].split("/"),B.name=M[0],B.clockRate=parseInt(M[1],10),B.channels=3===M.length?parseInt(M[2],10):1,B.numChannels=B.channels,B},q.writeRtpMap=function(T){var M=T.payloadType;void 0!==T.preferredPayloadType&&(M=T.preferredPayloadType);var B=T.channels||T.numChannels||1;return"a=rtpmap:"+M+" "+T.name+"/"+T.clockRate+(1!==B?"/"+B:"")+"\r\n"},q.parseExtmap=function(T){var M=T.substr(9).split(" ");return{id:parseInt(M[0],10),direction:M[0].indexOf("/")>0?M[0].split("/")[1]:"sendrecv",uri:M[1]}},q.writeExtmap=function(T){return"a=extmap:"+(T.id||T.preferredId)+(T.direction&&"sendrecv"!==T.direction?"/"+T.direction:"")+" "+T.uri+"\r\n"},q.parseFmtp=function(T){for(var B,M={},ne=T.substr(T.indexOf(" ")+1).split(";"),R=0;R<ne.length;R++)M[(B=ne[R].trim().split("="))[0].trim()]=B[1];return M},q.writeFmtp=function(T){var M="",B=T.payloadType;if(void 0!==T.preferredPayloadType&&(B=T.preferredPayloadType),T.parameters&&Object.keys(T.parameters).length){var ne=[];Object.keys(T.parameters).forEach(function(R){ne.push(T.parameters[R]?R+"="+T.parameters[R]:R)}),M+="a=fmtp:"+B+" "+ne.join(";")+"\r\n"}return M},q.parseRtcpFb=function(T){var M=T.substr(T.indexOf(" ")+1).split(" ");return{type:M.shift(),parameter:M.join(" ")}},q.writeRtcpFb=function(T){var M="",B=T.payloadType;return void 0!==T.preferredPayloadType&&(B=T.preferredPayloadType),T.rtcpFeedback&&T.rtcpFeedback.length&&T.rtcpFeedback.forEach(function(ne){M+="a=rtcp-fb:"+B+" "+ne.type+(ne.parameter&&ne.parameter.length?" "+ne.parameter:"")+"\r\n"}),M},q.parseSsrcMedia=function(T){var M=T.indexOf(" "),B={ssrc:parseInt(T.substr(7,M-7),10)},ne=T.indexOf(":",M);return ne>-1?(B.attribute=T.substr(M+1,ne-M-1),B.value=T.substr(ne+1)):B.attribute=T.substr(M+1),B},q.parseSsrcGroup=function(T){var M=T.substr(13).split(" ");return{semantics:M.shift(),ssrcs:M.map(function(B){return parseInt(B,10)})}},q.getMid=function(T){var M=q.matchPrefix(T,"a=mid:")[0];if(M)return M.substr(6)},q.parseFingerprint=function(T){var M=T.substr(14).split(" ");return{algorithm:M[0].toLowerCase(),value:M[1]}},q.getDtlsParameters=function(T,M){return{role:"auto",fingerprints:q.matchPrefix(T+M,"a=fingerprint:").map(q.parseFingerprint)}},q.writeDtlsParameters=function(T,M){var B="a=setup:"+M+"\r\n";return T.fingerprints.forEach(function(ne){B+="a=fingerprint:"+ne.algorithm+" "+ne.value+"\r\n"}),B},q.parseCryptoLine=function(T){var M=T.substr(9).split(" ");return{tag:parseInt(M[0],10),cryptoSuite:M[1],keyParams:M[2],sessionParams:M.slice(3)}},q.writeCryptoLine=function(T){return"a=crypto:"+T.tag+" "+T.cryptoSuite+" "+("object"==typeof T.keyParams?q.writeCryptoKeyParams(T.keyParams):T.keyParams)+(T.sessionParams?" "+T.sessionParams.join(" "):"")+"\r\n"},q.parseCryptoKeyParams=function(T){if(0!==T.indexOf("inline:"))return null;var M=T.substr(7).split("|");return{keyMethod:"inline",keySalt:M[0],lifeTime:M[1],mkiValue:M[2]?M[2].split(":")[0]:void 0,mkiLength:M[2]?M[2].split(":")[1]:void 0}},q.writeCryptoKeyParams=function(T){return T.keyMethod+":"+T.keySalt+(T.lifeTime?"|"+T.lifeTime:"")+(T.mkiValue&&T.mkiLength?"|"+T.mkiValue+":"+T.mkiLength:"")},q.getCryptoParameters=function(T,M){return q.matchPrefix(T+M,"a=crypto:").map(q.parseCryptoLine)},q.getIceParameters=function(T,M){var B=q.matchPrefix(T+M,"a=ice-ufrag:")[0],ne=q.matchPrefix(T+M,"a=ice-pwd:")[0];return B&&ne?{usernameFragment:B.substr(12),password:ne.substr(10)}:null},q.writeIceParameters=function(T){return"a=ice-ufrag:"+T.usernameFragment+"\r\na=ice-pwd:"+T.password+"\r\n"},q.parseRtpParameters=function(T){for(var M={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},ne=q.splitLines(T)[0].split(" "),R=3;R<ne.length;R++){var Te=ne[R],ut=q.matchPrefix(T,"a=rtpmap:"+Te+" ")[0];if(ut){var ft=q.parseRtpMap(ut),P=q.matchPrefix(T,"a=fmtp:"+Te+" ");switch(ft.parameters=P.length?q.parseFmtp(P[0]):{},ft.rtcpFeedback=q.matchPrefix(T,"a=rtcp-fb:"+Te+" ").map(q.parseRtcpFb),M.codecs.push(ft),ft.name.toUpperCase()){case"RED":case"ULPFEC":M.fecMechanisms.push(ft.name.toUpperCase())}}}return q.matchPrefix(T,"a=extmap:").forEach(function(k){M.headerExtensions.push(q.parseExtmap(k))}),M},q.writeRtpDescription=function(T,M){var B="";B+="m="+T+" ",B+=M.codecs.length>0?"9":"0",B+=" UDP/TLS/RTP/SAVPF ",B+=M.codecs.map(function(R){return void 0!==R.preferredPayloadType?R.preferredPayloadType:R.payloadType}).join(" ")+"\r\n",B+="c=IN IP4 0.0.0.0\r\n",B+="a=rtcp:9 IN IP4 0.0.0.0\r\n",M.codecs.forEach(function(R){B+=q.writeRtpMap(R),B+=q.writeFmtp(R),B+=q.writeRtcpFb(R)});var ne=0;return M.codecs.forEach(function(R){R.maxptime>ne&&(ne=R.maxptime)}),ne>0&&(B+="a=maxptime:"+ne+"\r\n"),B+="a=rtcp-mux\r\n",M.headerExtensions&&M.headerExtensions.forEach(function(R){B+=q.writeExtmap(R)}),B},q.parseRtpEncodingParameters=function(T){var ft,M=[],B=q.parseRtpParameters(T),ne=-1!==B.fecMechanisms.indexOf("RED"),R=-1!==B.fecMechanisms.indexOf("ULPFEC"),Te=q.matchPrefix(T,"a=ssrc:").map(function(X){return q.parseSsrcMedia(X)}).filter(function(X){return"cname"===X.attribute}),ut=Te.length>0&&Te[0].ssrc,P=q.matchPrefix(T,"a=ssrc-group:FID").map(function(X){return X.substr(17).split(" ").map(function(he){return parseInt(he,10)})});P.length>0&&P[0].length>1&&P[0][0]===ut&&(ft=P[0][1]),B.codecs.forEach(function(X){if("RTX"===X.name.toUpperCase()&&X.parameters.apt){var Ce={ssrc:ut,codecPayloadType:parseInt(X.parameters.apt,10)};ut&&ft&&(Ce.rtx={ssrc:ft}),M.push(Ce),ne&&((Ce=JSON.parse(JSON.stringify(Ce))).fec={ssrc:ut,mechanism:R?"red+ulpfec":"red"},M.push(Ce))}}),0===M.length&&ut&&M.push({ssrc:ut});var k=q.matchPrefix(T,"b=");return k.length&&(k=0===k[0].indexOf("b=TIAS:")?parseInt(k[0].substr(7),10):0===k[0].indexOf("b=AS:")?1e3*parseInt(k[0].substr(5),10)*.95-16e3:void 0,M.forEach(function(X){X.maxBitrate=k})),M},q.parseRtcpParameters=function(T){var M={},B=q.matchPrefix(T,"a=ssrc:").map(function(Te){return q.parseSsrcMedia(Te)}).filter(function(Te){return"cname"===Te.attribute})[0];B&&(M.cname=B.value,M.ssrc=B.ssrc);var ne=q.matchPrefix(T,"a=rtcp-rsize");M.reducedSize=ne.length>0,M.compound=0===ne.length;var R=q.matchPrefix(T,"a=rtcp-mux");return M.mux=R.length>0,M},q.parseMsid=function(T){var M,B=q.matchPrefix(T,"a=msid:");if(1===B.length)return{stream:(M=B[0].substr(7).split(" "))[0],track:M[1]};var ne=q.matchPrefix(T,"a=ssrc:").map(function(R){return q.parseSsrcMedia(R)}).filter(function(R){return"msid"===R.attribute});return ne.length>0?{stream:(M=ne[0].value.split(" "))[0],track:M[1]}:void 0},q.parseSctpDescription=function(T){var ne,M=q.parseMLine(T),B=q.matchPrefix(T,"a=max-message-size:");B.length>0&&(ne=parseInt(B[0].substr(19),10)),isNaN(ne)&&(ne=65536);var R=q.matchPrefix(T,"a=sctp-port:");if(R.length>0)return{port:parseInt(R[0].substr(12),10),protocol:M.fmt,maxMessageSize:ne};if(q.matchPrefix(T,"a=sctpmap:").length>0){var ut=q.matchPrefix(T,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(ut[0],10),protocol:ut[1],maxMessageSize:ne}}},q.writeSctpDescription=function(T,M){var B=[];return B="DTLS/SCTP"!==T.protocol?["m="+T.kind+" 9 "+T.protocol+" "+M.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+M.port+"\r\n"]:["m="+T.kind+" 9 "+T.protocol+" "+M.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+M.port+" "+M.protocol+" 65535\r\n"],void 0!==M.maxMessageSize&&B.push("a=max-message-size:"+M.maxMessageSize+"\r\n"),B.join("")},q.generateSessionId=function(){return Math.random().toString().substr(2,21)},q.writeSessionBoilerplate=function(T,M,B){var R=void 0!==M?M:2;return"v=0\r\no="+(B||"thisisadapterortc")+" "+(T||q.generateSessionId())+" "+R+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},q.writeMediaSection=function(T,M,B,ne){var R=q.writeRtpDescription(T.kind,M);if(R+=q.writeIceParameters(T.iceGatherer.getLocalParameters()),R+=q.writeDtlsParameters(T.dtlsTransport.getLocalParameters(),"offer"===B?"actpass":"active"),R+="a=mid:"+T.mid+"\r\n",R+=T.direction?"a="+T.direction+"\r\n":T.rtpSender&&T.rtpReceiver?"a=sendrecv\r\n":T.rtpSender?"a=sendonly\r\n":T.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",T.rtpSender){var Te="msid:"+ne.id+" "+T.rtpSender.track.id+"\r\n";R+="a="+Te,R+="a=ssrc:"+T.sendEncodingParameters[0].ssrc+" "+Te,T.sendEncodingParameters[0].rtx&&(R+="a=ssrc:"+T.sendEncodingParameters[0].rtx.ssrc+" "+Te,R+="a=ssrc-group:FID "+T.sendEncodingParameters[0].ssrc+" "+T.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return R+="a=ssrc:"+T.sendEncodingParameters[0].ssrc+" cname:"+q.localCName+"\r\n",T.rtpSender&&T.sendEncodingParameters[0].rtx&&(R+="a=ssrc:"+T.sendEncodingParameters[0].rtx.ssrc+" cname:"+q.localCName+"\r\n"),R},q.getDirection=function(T,M){for(var B=q.splitLines(T),ne=0;ne<B.length;ne++)switch(B[ne]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return B[ne].substr(2)}return M?q.getDirection(M):"sendrecv"},q.getKind=function(T){return q.splitLines(T)[0].split(" ")[0].substr(2)},q.isRejected=function(T){return"0"===T.split(" ",2)[1]},q.parseMLine=function(T){var B=q.splitLines(T)[0].substr(2).split(" ");return{kind:B[0],port:parseInt(B[1],10),protocol:B[2],fmt:B.slice(3).join(" ")}},q.parseOLine=function(T){var B=q.matchPrefix(T,"o=")[0].substr(2).split(" ");return{username:B[0],sessionId:B[1],sessionVersion:parseInt(B[2],10),netType:B[3],addressType:B[4],address:B[5]}},q.isValidSDP=function(T){if("string"!=typeof T||0===T.length)return!1;for(var M=q.splitLines(T),B=0;B<M.length;B++)if(M[B].length<2||"="!==M[B].charAt(1))return!1;return!0},Xt.exports=q}},Xt=>{Xt(Xt.s=559)}]);
//# sourceMappingURL=main.bfde5ad543e476ab.js.map