"use strict";(self.webpackChunkbananagrams=self.webpackChunkbananagrams||[]).push([["src_app_lazy-loaded_lobby_lobby_module_ts"],{6924:(S,d,i)=>{i.d(d,{P:()=>v});var c=i(9765),m=i(9685),p=i(2467),b=i(523);let v=(()=>{class e{constructor(a,g){this.peerToPeerService=a,this.router=g}canActivate(a,g){return!!this.peerToPeerService.getIsConnected()||this.router.navigate(a.params.id?[`${c.n.JOIN}/${a.params.id}`]:[c.n.HOME])}}return e.\u0275fac=function(a){return new(a||e)(m.LFG(p.l),m.LFG(b.F0))},e.\u0275prov=m.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},5732:(S,d,i)=>{i.r(d),i.d(d,{LobbyModule:()=>P});var c=i(6362),m=i(523),p=i(6924),b=i(9765),v=i(3918),e=i(9685),y=i(3315),a=i(2467),g=i(1312),f=i(9565),u=i(587),h=i(7317);function C(o,r){if(1&o&&(e.TgZ(0,"li"),e._uU(1),e.qZA()),2&o){const t=r.$implicit,n=e.oxw();e.ekj("strikethrough",t.disconnected),e.xp6(1),e.lnq(" ",t.name,"",t.id===n.hostId?"(host)":"","",t.id===(null==n.gameServiceState.myPlayer?null:n.gameServiceState.myPlayer.id)?"(you)":""," ")}}const _=[{path:":id",component:(()=>{class o{constructor(t,n,s,l,T){this.gameService=t,this.peerToPeerService=n,this.gameHostService=s,this.navigationService=l,this.baseHref=T,this.rejoining=!1,this.copied=!1}ngOnInit(){var t=this;return(0,v.Z)(function*(){t.isHost=t.peerToPeerService.getIsHost(),t.hostId=t.peerToPeerService.getHostId(),t.gameServiceState=t.gameService.state,t.gameService.initFromPeerToPeer(),t.subs=[t.gameService.gameStart$.subscribe(n=>t.gotoGame())],t.name="guest"+(1e3*Math.random()).toFixed(0).padStart(4,"0"),t.setName(null)})()}gotoGame(){this.navigationService.gotoGame()}ngOnDestroy(){this.subs.forEach(t=>t.unsubscribe)}setName(t){this.gameService.updatePlayer(this.name)}startGame(){this.gameHostService.startGame()}rejoin(){this.rejoining=!0,setTimeout(()=>this.rejoining=!1,500),this.setIsSpectatorAndGotoGame(!1)}joinAsSpectator(){this.setIsSpectatorAndGotoGame(!0)}copyJoinLink(){navigator.clipboard.writeText(window.location.href),this.copied=!0,setTimeout(()=>this.copied=!1,2e3)}setIsSpectatorAndGotoGame(t){this.gameService.getOrCreateMyPlayer().isSpectator=t,this.gameService.sendPlayerUpdateMessage(this.gameService.getOrCreateMyPlayer()),this.gameServiceState.inGame&&this.gotoGame()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(y.h),e.Y36(a.l),e.Y36(g.Y),e.Y36(f.f),e.Y36(c.mr))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-lobby"]],decls:18,vars:11,consts:[[1,"container"],[1,"banana-img","mat-elevation-z2",3,"src"],[3,"strikethrough",4,"ngFor","ngForOf"],[1,"name-div"],["type","text","maxlength","32",3,"ngModel","ngModelChange","keydown.enter"],["mat-stroked-button","","color","primary",1,"big-button",2,"display","inline-block",3,"disabled","click"],["mat-stroked-button","","color","primary",1,"block-button",3,"disabled","click"],["mat-raised-button","",1,"block-button",3,"disabled","click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"img",1),e.TgZ(2,"p"),e._uU(3),e.qZA(),e.TgZ(4,"ul"),e.YNc(5,C,2,5,"li",2),e.qZA(),e.TgZ(6,"div",3)(7,"input",4),e.NdJ("ngModelChange",function(l){return n.name=l})("keydown.enter",function(l){return n.setName(l)}),e.qZA(),e.TgZ(8,"button",5),e.NdJ("click",function(l){return n.setName(l)}),e._uU(9,"Set name"),e.qZA()(),e.TgZ(10,"button",6),e.NdJ("click",function(){return n.copyJoinLink()}),e._uU(11),e.qZA(),e.TgZ(12,"button",6),e.NdJ("click",function(){return n.rejoin()}),e._uU(13,"Rejoin"),e.qZA(),e.TgZ(14,"button",6),e.NdJ("click",function(){return n.joinAsSpectator()}),e._uU(15,"Spectate"),e.qZA(),e.TgZ(16,"button",7),e.NdJ("click",function(){return n.startGame()}),e._uU(17,"Start game"),e.qZA()()),2&t&&(e.xp6(1),e.MGl("src","",n.baseHref,"assets/banana.jpeg",e.LSH),e.xp6(2),e.AsE("",n.gameServiceState.players.length," players. ",n.gameServiceState.totalPeerCount," in room."),e.xp6(2),e.Q6J("ngForOf",n.gameServiceState.players),e.xp6(2),e.Q6J("ngModel",n.name),e.xp6(1),e.Q6J("disabled",!n.name||0===n.gameServiceState.totalPeerCount||n.rejoining),e.xp6(2),e.Q6J("disabled",n.copied),e.xp6(1),e.Oqu(n.copied?"Copied!":"Copy join link"),e.xp6(1),e.Q6J("disabled",n.isHost||n.rejoining||!n.gameServiceState.inGame),e.xp6(2),e.Q6J("disabled",n.isHost||n.rejoining||!n.gameServiceState.inGame),e.xp6(2),e.Q6J("disabled",!n.isHost||null===n.gameServiceState.myPlayer))},dependencies:[c.sg,u.Fj,u.JJ,u.nD,u.On,h.lW],styles:[".strikethrough[_ngcontent-%COMP%]{text-decoration:line-through}button[_ngcontent-%COMP%]{margin-top:1em}button.block-button[_ngcontent-%COMP%]{width:100%}input[_ngcontent-%COMP%]{line-height:2.5em;width:200px;display:flex;flex:1 1 auto}div.name-div[_ngcontent-%COMP%]{display:flex}div.name-div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:0}div.container[_ngcontent-%COMP%]{display:block}li[_ngcontent-%COMP%]{color:var(--text-color)}"]}),o})(),canActivate:[p.P]},{path:"**",redirectTo:b.n.HOME}];let M=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[m.Bz.forChild(_),m.Bz]}),o})(),P=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[c.ez,M,u.u5,h.ot]}),o})()}}]);
//# sourceMappingURL=src_app_lazy-loaded_lobby_lobby_module_ts.596bd7838ecddaaf.js.map