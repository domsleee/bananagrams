(self.webpackChunkbananagrams=self.webpackChunkbananagrams||[]).push([[179],{255:gn=>{function pt(Fe){return Promise.resolve().then(()=>{var se=new Error("Cannot find module '"+Fe+"'");throw se.code="MODULE_NOT_FOUND",se})}pt.keys=()=>[],pt.resolve=pt,pt.id=255,gn.exports=pt},748:gn=>{gn.exports=function(){var pt={};Object.defineProperty(pt,"__esModule",{value:!0}),pt.default=void 0,pt.default=function(c){return!(!c||!c.Window)&&c instanceof c.Window};var Fe={};Object.defineProperty(Fe,"__esModule",{value:!0}),Fe.init=X,Fe.getWindow=function(c){return(0,pt.default)(c)?c:(c.ownerDocument||c).defaultView||we.window},Fe.window=Fe.realWindow=void 0;var se=void 0;Fe.realWindow=se;var we=void 0;function X(c){Fe.realWindow=se=c;var u=c.document.createTextNode("");u.ownerDocument!==c.document&&"function"==typeof c.wrap&&c.wrap(u)===u&&(c=c.wrap(c)),Fe.window=we=c}Fe.window=we,"undefined"!=typeof window&&window&&X(window);var O={};function F(c){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(c)}Object.defineProperty(O,"__esModule",{value:!0}),O.default=void 0;var L=function(c){return!!c&&"object"===F(c)},U=function(c){return"function"==typeof c};O.default={window:function(c){return c===Fe.window||(0,pt.default)(c)},docFrag:function(c){return L(c)&&11===c.nodeType},object:L,func:U,number:function(c){return"number"==typeof c},bool:function(c){return"boolean"==typeof c},string:function(c){return"string"==typeof c},element:function(c){if(!c||"object"!==F(c))return!1;var u=Fe.getWindow(c)||Fe.window;return/object|function/.test(F(u.Element))?c instanceof u.Element:1===c.nodeType&&"string"==typeof c.nodeName},plainObject:function(c){return L(c)&&!!c.constructor&&/function Object\b/.test(c.constructor.toString())},array:function(c){return L(c)&&void 0!==c.length&&U(c.splice)}};var B={};function V(c){var u=c.interaction;if("drag"===u.prepared.name){var d=u.prepared.axis;"x"===d?(u.coords.cur.page.y=u.coords.start.page.y,u.coords.cur.client.y=u.coords.start.client.y,u.coords.velocity.client.y=0,u.coords.velocity.page.y=0):"y"===d&&(u.coords.cur.page.x=u.coords.start.page.x,u.coords.cur.client.x=u.coords.start.client.x,u.coords.velocity.client.x=0,u.coords.velocity.page.x=0)}}function _(c){var u=c.iEvent,d=c.interaction;if("drag"===d.prepared.name){var f=d.prepared.axis;if("x"===f||"y"===f){var g="x"===f?"y":"x";u.page[g]=d.coords.start.page[g],u.client[g]=d.coords.start.client[g],u.delta[g]=0}}}Object.defineProperty(B,"__esModule",{value:!0}),B.default=void 0;var I={id:"actions/drag",install:function(c){var u=c.actions,f=c.defaults;c.Interactable.prototype.draggable=I.draggable,u.map.drag=I,u.methodDict.drag="draggable",f.actions.drag=I.defaults},listeners:{"interactions:before-action-move":V,"interactions:action-resume":V,"interactions:action-move":_,"auto-start:check":function(c){var u=c.interaction,d=c.interactable,f=c.buttons,g=d.options.drag;if(g&&g.enabled&&(!u.pointerIsDown||!/mouse|pointer/.test(u.pointerType)||0!=(f&d.options.drag.mouseButtons)))return c.action={name:"drag",axis:"start"===g.lockAxis?g.startAxis:g.lockAxis},!1}},draggable:function(c){return O.default.object(c)?(this.options.drag.enabled=!1!==c.enabled,this.setPerAction("drag",c),this.setOnEvents("drag",c),/^(xy|x|y|start)$/.test(c.lockAxis)&&(this.options.drag.lockAxis=c.lockAxis),/^(xy|x|y)$/.test(c.startAxis)&&(this.options.drag.startAxis=c.startAxis),this):O.default.bool(c)?(this.options.drag.enabled=c,this):this.options.drag},beforeMove:V,move:_,defaults:{startAxis:"xy",lockAxis:"xy"},getCursor:function(){return"move"}};B.default=I;var M={};Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var S={init:function(c){var u=c;S.document=u.document,S.DocumentFragment=u.DocumentFragment||D,S.SVGElement=u.SVGElement||D,S.SVGSVGElement=u.SVGSVGElement||D,S.SVGElementInstance=u.SVGElementInstance||D,S.Element=u.Element||D,S.HTMLElement=u.HTMLElement||S.Element,S.Event=u.Event,S.Touch=u.Touch||D,S.PointerEvent=u.PointerEvent||u.MSPointerEvent},document:null,DocumentFragment:null,SVGElement:null,SVGSVGElement:null,SVGElementInstance:null,Element:null,HTMLElement:null,Event:null,Touch:null,PointerEvent:null};function D(){}M.default=S;var y={};Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var v={init:function(c){var u=M.default.Element,d=c.navigator||{};v.supportsTouch="ontouchstart"in c||O.default.func(c.DocumentTouch)&&M.default.document instanceof c.DocumentTouch,v.supportsPointerEvent=!1!==d.pointerEnabled&&!!M.default.PointerEvent,v.isIOS=/iP(hone|od|ad)/.test(d.platform),v.isIOS7=/iP(hone|od|ad)/.test(d.platform)&&/OS 7[^\d]/.test(d.appVersion),v.isIe9=/MSIE 9/.test(d.userAgent),v.isOperaMobile="Opera"===d.appName&&v.supportsTouch&&/Presto/.test(d.userAgent),v.prefixedMatchesSelector="matches"in u.prototype?"matches":"webkitMatchesSelector"in u.prototype?"webkitMatchesSelector":"mozMatchesSelector"in u.prototype?"mozMatchesSelector":"oMatchesSelector"in u.prototype?"oMatchesSelector":"msMatchesSelector",v.pEventTypes=v.supportsPointerEvent?M.default.PointerEvent===c.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,v.wheelEvent=M.default.document&&"onmousewheel"in M.default.document?"mousewheel":"wheel"},supportsTouch:null,supportsPointerEvent:null,isIOS7:null,isIOS:null,isIe9:null,isOperaMobile:null,prefixedMatchesSelector:null,pEventTypes:null,wheelEvent:null};y.default=v;var b={};function R(c){var u=c.parentNode;if(O.default.docFrag(u)){for(;(u=u.host)&&O.default.docFrag(u););return u}return u}function q(c,u){return Fe.window!==Fe.realWindow&&(u=u.replace(/\/deep\//g," ")),c[y.default.prefixedMatchesSelector](u)}Object.defineProperty(b,"__esModule",{value:!0}),b.nodeContains=function(c,u){if(c.contains)return c.contains(u);for(;u;){if(u===c)return!0;u=u.parentNode}return!1},b.closest=function(c,u){for(;O.default.element(c);){if(q(c,u))return c;c=R(c)}return null},b.parentNode=R,b.matchesSelector=q,b.indexOfDeepestElement=function(c){for(var u,d=[],f=0;f<c.length;f++){var g=c[f],C=c[u];if(g&&f!==u)if(C){var T=W(g),w=W(C);if(T!==g.ownerDocument)if(w!==g.ownerDocument)if(T!==w){d=d.length?d:Q(C);var x=void 0;if(C instanceof M.default.HTMLElement&&g instanceof M.default.SVGElement&&!(g instanceof M.default.SVGSVGElement)){if(g===w)continue;x=g.ownerSVGElement}else x=g;for(var j=Q(x,C.ownerDocument),$=0;j[$]&&j[$]===d[$];)$++;var Y=[j[$-1],j[$],d[$]];if(Y[0])for(var ne=Y[0].lastChild;ne;){if(ne===Y[1]){u=f,d=j;break}if(ne===Y[2])break;ne=ne.previousSibling}}else ie=g,te=C,(parseInt(Fe.getWindow(ie).getComputedStyle(ie).zIndex,10)||0)>=(parseInt(Fe.getWindow(te).getComputedStyle(te).zIndex,10)||0)&&(u=f);else u=f}else u=f}var ie,te;return u},b.matchesUpTo=function(c,u,d){for(;O.default.element(c);){if(q(c,u))return!0;if((c=R(c))===d)return q(c,u)}return!1},b.getActualElement=function(c){return c.correspondingUseElement||c},b.getScrollXY=J,b.getElementClientRect=ee,b.getElementRect=function(c){var u=ee(c);if(!y.default.isIOS7&&u){var d=J(Fe.getWindow(c));u.left+=d.x,u.right+=d.x,u.top+=d.y,u.bottom+=d.y}return u},b.getPath=function(c){for(var u=[];c;)u.push(c),c=R(c);return u},b.trySelector=function(c){return!!O.default.string(c)&&(M.default.document.querySelector(c),!0)};var W=function(c){return c.parentNode||c.host};function Q(c,u){for(var d,f=[],g=c;(d=W(g))&&g!==u&&d!==g.ownerDocument;)f.unshift(g),g=d;return f}function J(c){return{x:(c=c||Fe.window).scrollX||c.document.documentElement.scrollLeft,y:c.scrollY||c.document.documentElement.scrollTop}}function ee(c){var u=c instanceof M.default.SVGElement?c.getBoundingClientRect():c.getClientRects()[0];return u&&{left:u.left,right:u.right,top:u.top,bottom:u.bottom,width:u.width||u.right-u.left,height:u.height||u.bottom-u.top}}var z={};Object.defineProperty(z,"__esModule",{value:!0}),z.default=function(c,u){for(var d in u)c[d]=u[d];return c};var oe={};function me(c,u){(null==u||u>c.length)&&(u=c.length);for(var d=0,f=Array(u);d<u;d++)f[d]=c[d];return f}function pe(c,u,d){return"parent"===c?(0,b.parentNode)(d):"self"===c?u.getRect(d):(0,b.closest)(d,c)}Object.defineProperty(oe,"__esModule",{value:!0}),oe.getStringOptionResult=pe,oe.resolveRectLike=function(c,u,d,f){var g,C=c;return O.default.string(C)?C=pe(C,u,d):O.default.func(C)&&(C=C.apply(void 0,function(T){if(Array.isArray(T))return me(T)}(g=f)||function(T){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(T))return Array.from(T)}(g)||function(T,w){if(T){if("string"==typeof T)return me(T,w);var x=Object.prototype.toString.call(T).slice(8,-1);return"Object"===x&&T.constructor&&(x=T.constructor.name),"Map"===x||"Set"===x?Array.from(T):"Arguments"===x||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x)?me(T,w):void 0}}(g)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),O.default.element(C)&&(C=(0,b.getElementRect)(C)),C},oe.rectToXY=function(c){return c&&{x:"x"in c?c.x:c.left,y:"y"in c?c.y:c.top}},oe.xywhToTlbr=function(c){return!c||"left"in c&&"top"in c||((c=(0,z.default)({},c)).left=c.x||0,c.top=c.y||0,c.right=c.right||c.left+c.width,c.bottom=c.bottom||c.top+c.height),c},oe.tlbrToXywh=function(c){return!c||"x"in c&&"y"in c||((c=(0,z.default)({},c)).x=c.left||0,c.y=c.top||0,c.width=c.width||(c.right||0)-c.x,c.height=c.height||(c.bottom||0)-c.y),c},oe.addEdges=function(c,u,d){c.left&&(u.left+=d.x),c.right&&(u.right+=d.x),c.top&&(u.top+=d.y),c.bottom&&(u.bottom+=d.y),u.width=u.right-u.left,u.height=u.bottom-u.top};var De={};Object.defineProperty(De,"__esModule",{value:!0}),De.default=function(c,u,d){var f=c.options[d],C=(0,oe.resolveRectLike)(f&&f.origin||c.options.origin,c,u,[c&&u]);return(0,oe.rectToXY)(C)||{x:0,y:0}};var et={};function mt(c){return c.trim().split(/ +/)}Object.defineProperty(et,"__esModule",{value:!0}),et.default=function c(u,d,f){if(f=f||{},O.default.string(u)&&-1!==u.search(" ")&&(u=mt(u)),O.default.array(u))return u.reduce(function(x,j){return(0,z.default)(x,c(j,d,f))},f);if(O.default.object(u)&&(d=u,u=""),O.default.func(d))f[u]=f[u]||[],f[u].push(d);else if(O.default.array(d))for(var g=0;g<d.length;g++)c(u,d[g],f);else if(O.default.object(d))for(var T in d){var w=mt(T).map(function(x){return"".concat(u).concat(x)});c(w,d[T],f)}return f};var Jn={};Object.defineProperty(Jn,"__esModule",{value:!0}),Jn.default=void 0,Jn.default=function(c,u){return Math.sqrt(c*c+u*u)};var Ue={};function Or(c,u){for(var d in u){var f=Or.prefixedPropREs,g=!1;for(var C in f)if(0===d.indexOf(C)&&f[C].test(d)){g=!0;break}g||"function"==typeof u[d]||(c[d]=u[d])}return c}Object.defineProperty(Ue,"__esModule",{value:!0}),Ue.default=void 0,Or.prefixedPropREs={webkit:/(Movement[XY]|Radius[XY]|RotationAngle|Force)$/,moz:/(Pressure)$/},Ue.default=Or;var Ce={};function xn(c){return c instanceof M.default.Event||c instanceof M.default.Touch}function pr(c,u,d){return(d=d||{}).x=u[(c=c||"page")+"X"],d.y=u[c+"Y"],d}function Pi(c,u){return u=u||{x:0,y:0},y.default.isOperaMobile&&xn(c)?(pr("screen",c,u),u.x+=window.scrollX,u.y+=window.scrollY):pr("page",c,u),u}function gr(c,u){return u=u||{},y.default.isOperaMobile&&xn(c)?pr("screen",c,u):pr("client",c,u),u}function _n(c){var u=[];return O.default.array(c)?(u[0]=c[0],u[1]=c[1]):"touchend"===c.type?1===c.touches.length?(u[0]=c.touches[0],u[1]=c.changedTouches[0]):0===c.touches.length&&(u[0]=c.changedTouches[0],u[1]=c.changedTouches[1]):(u[0]=c.touches[0],u[1]=c.touches[1]),u}function jo(c){for(var u={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},d=0;d<c.length;d++){var f=c[d];for(var g in u)u[g]+=f[g]}for(var C in u)u[C]/=c.length;return u}Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.copyCoords=function(c,u){c.page=c.page||{},c.page.x=u.page.x,c.page.y=u.page.y,c.client=c.client||{},c.client.x=u.client.x,c.client.y=u.client.y,c.timeStamp=u.timeStamp},Ce.setCoordDeltas=function(c,u,d){c.page.x=d.page.x-u.page.x,c.page.y=d.page.y-u.page.y,c.client.x=d.client.x-u.client.x,c.client.y=d.client.y-u.client.y,c.timeStamp=d.timeStamp-u.timeStamp},Ce.setCoordVelocity=function(c,u){var d=Math.max(u.timeStamp/1e3,.001);c.page.x=u.page.x/d,c.page.y=u.page.y/d,c.client.x=u.client.x/d,c.client.y=u.client.y/d,c.timeStamp=d},Ce.setZeroCoords=function(c){c.page.x=0,c.page.y=0,c.client.x=0,c.client.y=0},Ce.isNativePointer=xn,Ce.getXY=pr,Ce.getPageXY=Pi,Ce.getClientXY=gr,Ce.getPointerId=function(c){return O.default.number(c.pointerId)?c.pointerId:c.identifier},Ce.setCoords=function(c,u,d){var f=u.length>1?jo(u):u[0];Pi(f,c.page),gr(f,c.client),c.timeStamp=d},Ce.getTouchPair=_n,Ce.pointerAverage=jo,Ce.touchBBox=function(c){if(!c.length)return null;var u=_n(c),d=Math.min(u[0].pageX,u[1].pageX),f=Math.min(u[0].pageY,u[1].pageY),g=Math.max(u[0].pageX,u[1].pageX),C=Math.max(u[0].pageY,u[1].pageY);return{x:d,y:f,left:d,top:f,right:g,bottom:C,width:g-d,height:C-f}},Ce.touchDistance=function(c,u){var d=u+"X",f=u+"Y",g=_n(c);return(0,Jn.default)(g[0][d]-g[1][d],g[0][f]-g[1][f])},Ce.touchAngle=function(c,u){var d=u+"X",f=u+"Y",g=_n(c);return 180*Math.atan2(g[1][f]-g[0][f],g[1][d]-g[0][d])/Math.PI},Ce.getPointerType=function(c){return O.default.string(c.pointerType)?c.pointerType:O.default.number(c.pointerType)?[void 0,void 0,"touch","pen","mouse"][c.pointerType]:/touch/.test(c.type||"")||c instanceof M.default.Touch?"touch":"mouse"},Ce.getEventTargets=function(c){var u=O.default.func(c.composedPath)?c.composedPath():c.path;return[b.getActualElement(u?u[0]:c.target),b.getActualElement(c.currentTarget)]},Ce.newCoords=function(){return{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0}},Ce.coordsToEvent=function(c){return{coords:c,get page(){return this.coords.page},get client(){return this.coords.client},get timeStamp(){return this.coords.timeStamp},get pageX(){return this.coords.page.x},get pageY(){return this.coords.page.y},get clientX(){return this.coords.client.x},get clientY(){return this.coords.client.y},get pointerId(){return this.coords.pointerId},get target(){return this.coords.target},get type(){return this.coords.type},get pointerType(){return this.coords.pointerType},get buttons(){return this.coords.buttons},preventDefault:function(){}}},Object.defineProperty(Ce,"pointerExtend",{enumerable:!0,get:function(){return Ue.default}});var Xn={};function Zn(c,u,d){return u in c?Object.defineProperty(c,u,{value:d,enumerable:!0,configurable:!0,writable:!0}):c[u]=d,c}Object.defineProperty(Xn,"__esModule",{value:!0}),Xn.BaseEvent=void 0;var Bo=function(){function c(f){(function(g,C){if(!(g instanceof C))throw new TypeError("Cannot call a class as a function")})(this,c),Zn(this,"type",void 0),Zn(this,"target",void 0),Zn(this,"currentTarget",void 0),Zn(this,"interactable",void 0),Zn(this,"_interaction",void 0),Zn(this,"timeStamp",void 0),Zn(this,"immediatePropagationStopped",!1),Zn(this,"propagationStopped",!1),this._interaction=f}var d;return(d=[{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}])&&function(c,u){for(var d=0;d<u.length;d++){var f=u[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}(c.prototype,d),c}();Xn.BaseEvent=Bo,Object.defineProperty(Bo.prototype,"interaction",{get:function(){return this._interaction._proxy},set:function(){}});var Je={};Object.defineProperty(Je,"__esModule",{value:!0}),Je.find=Je.findIndex=Je.from=Je.merge=Je.remove=Je.contains=void 0,Je.contains=function(c,u){return-1!==c.indexOf(u)},Je.remove=function(c,u){return c.splice(c.indexOf(u),1)};var vt=function(c,u){for(var d=0;d<u.length;d++)c.push(u[d]);return c};Je.merge=vt,Je.from=function(c){return vt([],c)};var ii=function(c,u){for(var d=0;d<c.length;d++)if(u(c[d],d,c))return d;return-1};Je.findIndex=ii,Je.find=function(c,u){return c[ii(c,u)]};var Dt={};function oi(c){return(oi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(c)}function xi(c,u){return(xi=Object.setPrototypeOf||function(d,f){return d.__proto__=f,d})(c,u)}function Bt(c,u){return!u||"object"!==oi(u)&&"function"!=typeof u?kr(c):u}function kr(c){if(void 0===c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function ic(c){return(ic=Object.setPrototypeOf?Object.getPrototypeOf:function(u){return u.__proto__||Object.getPrototypeOf(u)})(c)}function Ri(c,u,d){return u in c?Object.defineProperty(c,u,{value:d,enumerable:!0,configurable:!0,writable:!0}):c[u]=d,c}Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.DropEvent=void 0;var Uo=function(c){!function(w,x){if("function"!=typeof x&&null!==x)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(x&&x.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),x&&xi(w,x)}(T,c);var d,f,g,C=(f=T,g=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(w){return!1}}(),function(){var w,x=ic(f);if(g){var j=ic(this).constructor;w=Reflect.construct(x,arguments,j)}else w=x.apply(this,arguments);return Bt(this,w)});function T(w,x,j){var $;(function(te,le){if(!(te instanceof le))throw new TypeError("Cannot call a class as a function")})(this,T),Ri(kr($=C.call(this,x._interaction)),"target",void 0),Ri(kr($),"dropzone",void 0),Ri(kr($),"dragEvent",void 0),Ri(kr($),"relatedTarget",void 0),Ri(kr($),"draggable",void 0),Ri(kr($),"timeStamp",void 0),Ri(kr($),"propagationStopped",!1),Ri(kr($),"immediatePropagationStopped",!1);var Y="dragleave"===j?w.prev:w.cur,ne=Y.element,ie=Y.dropzone;return $.type=j,$.target=ne,$.currentTarget=ne,$.dropzone=ie,$.dragEvent=x,$.relatedTarget=x.target,$.draggable=x.interactable,$.timeStamp=x.timeStamp,$}return(d=[{key:"reject",value:function(){var w=this,x=this._interaction.dropState;if("dropactivate"===this.type||this.dropzone&&x.cur.dropzone===this.dropzone&&x.cur.element===this.target)if(x.prev.dropzone=this.dropzone,x.prev.element=this.target,x.rejected=!0,x.events.enter=null,this.stopImmediatePropagation(),"dropactivate"===this.type){var $=Je.findIndex(x.activeDrops,function(ne){return ne.dropzone===w.dropzone&&ne.element===w.target});x.activeDrops.splice($,1);var Y=new T(x,this.dragEvent,"dropdeactivate");Y.dropzone=this.dropzone,Y.target=this.target,this.dropzone.fire(Y)}else this.dropzone.fire(new T(x,this.dragEvent,"dragleave"))}},{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}])&&function(c,u){for(var d=0;d<u.length;d++){var f=u[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}(T.prototype,d),T}(Xn.BaseEvent);Dt.DropEvent=Uo;var fo={};function zu(c,u){for(var d=0;d<c.slice().length;d++){var f=c.slice()[d],g=f.dropzone,C=f.element;u.dropzone=g,u.target=C,g.fire(u),u.propagationStopped=u.immediatePropagationStopped=!1}}function Ho(c,u){for(var d=function(C,T){for(var w=C.interactables,x=[],j=0;j<w.list.length;j++){var $=w.list[j];if($.options.drop.enabled){var Y=$.options.drop.accept;if(!(O.default.element(Y)&&Y!==T||O.default.string(Y)&&!b.matchesSelector(T,Y)||O.default.func(Y)&&!Y({dropzone:$,draggableElement:T})))for(var ne=O.default.string($.target)?$._context.querySelectorAll($.target):O.default.array($.target)?$.target:[$.target],ie=0;ie<ne.length;ie++){var te=ne[ie];te!==T&&x.push({dropzone:$,element:te,rect:$.getRect(te)})}}}return x}(c,u),f=0;f<d.length;f++){var g=d[f];g.rect=g.dropzone.getRect(g.element)}return d}function Gu(c,u,d){for(var f=c.dropState,g=c.interactable,C=c.element,T=[],w=0;w<f.activeDrops.length;w++){var x=f.activeDrops[w],$=x.element;T.push(x.dropzone.dropCheck(u,d,g,C,$,x.rect)?$:null)}var ne=b.indexOfDeepestElement(T);return f.activeDrops[ne]||null}function oc(c,u,d){var f=c.dropState,g={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return"dragstart"===d.type&&(g.activate=new Dt.DropEvent(f,d,"dropactivate"),g.activate.target=null,g.activate.dropzone=null),"dragend"===d.type&&(g.deactivate=new Dt.DropEvent(f,d,"dropdeactivate"),g.deactivate.target=null,g.deactivate.dropzone=null),f.rejected||(f.cur.element!==f.prev.element&&(f.prev.dropzone&&(g.leave=new Dt.DropEvent(f,d,"dragleave"),d.dragLeave=g.leave.target=f.prev.element,d.prevDropzone=g.leave.dropzone=f.prev.dropzone),f.cur.dropzone&&(g.enter=new Dt.DropEvent(f,d,"dragenter"),d.dragEnter=f.cur.element,d.dropzone=f.cur.dropzone)),"dragend"===d.type&&f.cur.dropzone&&(g.drop=new Dt.DropEvent(f,d,"drop"),d.dropzone=f.cur.dropzone,d.relatedTarget=f.cur.element),"dragmove"===d.type&&f.cur.dropzone&&(g.move=new Dt.DropEvent(f,d,"dropmove"),g.move.dragmove=d,d.dropzone=f.cur.dropzone)),g}function xs(c,u){var d=c.dropState,f=d.activeDrops,g=d.cur;u.leave&&d.prev.dropzone.fire(u.leave),u.enter&&g.dropzone.fire(u.enter),u.move&&g.dropzone.fire(u.move),u.drop&&g.dropzone.fire(u.drop),u.deactivate&&zu(f,u.deactivate),d.prev.dropzone=g.dropzone,d.prev.element=g.element}function Wu(c,u){var d=c.interaction,f=c.iEvent,g=c.event;if("dragmove"===f.type||"dragend"===f.type){var C=d.dropState;u.dynamicDrop&&(C.activeDrops=Ho(u,d.element));var T=f,w=Gu(d,T,g);C.rejected=C.rejected&&!!w&&w.dropzone===C.cur.dropzone&&w.element===C.cur.element,C.cur.dropzone=w&&w.dropzone,C.cur.element=w&&w.element,C.events=oc(d,0,T)}}Object.defineProperty(fo,"__esModule",{value:!0}),fo.default=void 0;var qu={id:"actions/drop",install:function(c){var u=c.actions,d=c.interactStatic,f=c.Interactable,g=c.defaults;c.usePlugin(B.default),f.prototype.dropzone=function(C){return function(T,w){if(O.default.object(w)){if(T.options.drop.enabled=!1!==w.enabled,w.listeners){var x=(0,et.default)(w.listeners),j=Object.keys(x).reduce(function($,Y){return $[/^(enter|leave)/.test(Y)?"drag".concat(Y):/^(activate|deactivate|move)/.test(Y)?"drop".concat(Y):Y]=x[Y],$},{});T.off(T.options.drop.listeners),T.on(j),T.options.drop.listeners=j}return O.default.func(w.ondrop)&&T.on("drop",w.ondrop),O.default.func(w.ondropactivate)&&T.on("dropactivate",w.ondropactivate),O.default.func(w.ondropdeactivate)&&T.on("dropdeactivate",w.ondropdeactivate),O.default.func(w.ondragenter)&&T.on("dragenter",w.ondragenter),O.default.func(w.ondragleave)&&T.on("dragleave",w.ondragleave),O.default.func(w.ondropmove)&&T.on("dropmove",w.ondropmove),/^(pointer|center)$/.test(w.overlap)?T.options.drop.overlap=w.overlap:O.default.number(w.overlap)&&(T.options.drop.overlap=Math.max(Math.min(1,w.overlap),0)),"accept"in w&&(T.options.drop.accept=w.accept),"checker"in w&&(T.options.drop.checker=w.checker),T}return O.default.bool(w)?(T.options.drop.enabled=w,T):T.options.drop}(this,C)},f.prototype.dropCheck=function(C,T,w,x,j,$){return function(Y,ne,ie,te,le,ge,de){var Ee=!1;if(!(de=de||Y.getRect(ge)))return!!Y.options.drop.checker&&Y.options.drop.checker(ne,ie,Ee,Y,ge,te,le);var xe=Y.options.drop.overlap;if("pointer"===xe){var Ve=(0,De.default)(te,le,"drag"),nt=Ce.getPageXY(ne);nt.x+=Ve.x,nt.y+=Ve.y,Ee=nt.x>de.left&&nt.x<de.right&&nt.y>de.top&&nt.y<de.bottom}var tt=te.getRect(le);if(tt&&"center"===xe){var Dn=tt.left+tt.width/2,Yn=tt.top+tt.height/2;Ee=Dn>=de.left&&Dn<=de.right&&Yn>=de.top&&Yn<=de.bottom}return tt&&O.default.number(xe)&&(Ee=Math.max(0,Math.min(de.right,tt.right)-Math.max(de.left,tt.left))*Math.max(0,Math.min(de.bottom,tt.bottom)-Math.max(de.top,tt.top))/(tt.width*tt.height)>=xe),Y.options.drop.checker&&(Ee=Y.options.drop.checker(ne,ie,Ee,Y,ge,te,le)),Ee}(this,C,T,w,x,j,$)},d.dynamicDrop=function(C){return O.default.bool(C)?(c.dynamicDrop=C,d):c.dynamicDrop},(0,z.default)(u.phaselessTypes,{dragenter:!0,dragleave:!0,dropactivate:!0,dropdeactivate:!0,dropmove:!0,drop:!0}),u.methodDict.drop="dropzone",c.dynamicDrop=!1,g.actions.drop=qu.defaults},listeners:{"interactions:before-action-start":function(c){var u=c.interaction;"drag"===u.prepared.name&&(u.dropState={cur:{dropzone:null,element:null},prev:{dropzone:null,element:null},rejected:null,events:null,activeDrops:[]})},"interactions:after-action-start":function(c,u){var d=c.interaction,f=c.iEvent;if("drag"===d.prepared.name){var g=d.dropState;g.activeDrops=null,g.events=null,g.activeDrops=Ho(u,d.element),g.events=oc(d,0,f),g.events.activate&&(zu(g.activeDrops,g.events.activate),u.fire("actions/drop:start",{interaction:d,dragEvent:f}))}},"interactions:action-move":Wu,"interactions:after-action-move":function(c,u){var d=c.interaction,f=c.iEvent;"drag"===d.prepared.name&&(xs(d,d.dropState.events),u.fire("actions/drop:move",{interaction:d,dragEvent:f}),d.dropState.events={})},"interactions:action-end":function(c,u){if("drag"===c.interaction.prepared.name){var d=c.interaction,f=c.iEvent;Wu(c,u),xs(d,d.dropState.events),u.fire("actions/drop:end",{interaction:d,dragEvent:f})}},"interactions:stop":function(c){var u=c.interaction;if("drag"===u.prepared.name){var d=u.dropState;d&&(d.activeDrops=null,d.events=null,d.cur.dropzone=null,d.cur.element=null,d.prev.dropzone=null,d.prev.element=null,d.rejected=!1)}}},getActiveDrops:Ho,getDrop:Gu,getDropEvents:oc,fireDropEvents:xs,defaults:{enabled:!1,accept:null,overlap:"pointer"}};fo.default=qu;var Rs={};function sc(c){var u=c.interaction,d=c.iEvent,f=c.phase;if("gesture"===u.prepared.name){var g=u.pointers.map(function(j){return j.pointer}),C="start"===f,T="end"===f,w=u.interactable.options.deltaSource;if(d.touches=[g[0],g[1]],C)d.distance=Ce.touchDistance(g,w),d.box=Ce.touchBBox(g),d.scale=1,d.ds=0,d.angle=Ce.touchAngle(g,w),d.da=0,u.gesture.startDistance=d.distance,u.gesture.startAngle=d.angle;else if(T){var x=u.prevEvent;d.distance=x.distance,d.box=x.box,d.scale=x.scale,d.ds=0,d.angle=x.angle,d.da=0}else d.distance=Ce.touchDistance(g,w),d.box=Ce.touchBBox(g),d.scale=d.distance/u.gesture.startDistance,d.angle=Ce.touchAngle(g,w),d.ds=d.scale-u.gesture.scale,d.da=d.angle-u.gesture.angle;u.gesture.distance=d.distance,u.gesture.angle=d.angle,O.default.number(d.scale)&&d.scale!==1/0&&!isNaN(d.scale)&&(u.gesture.scale=d.scale)}}Object.defineProperty(Rs,"__esModule",{value:!0}),Rs.default=void 0;var ac={id:"actions/gesture",before:["actions/drag","actions/resize"],install:function(c){var u=c.actions,f=c.defaults;c.Interactable.prototype.gesturable=function(g){return O.default.object(g)?(this.options.gesture.enabled=!1!==g.enabled,this.setPerAction("gesture",g),this.setOnEvents("gesture",g),this):O.default.bool(g)?(this.options.gesture.enabled=g,this):this.options.gesture},u.map.gesture=ac,u.methodDict.gesture="gesturable",f.actions.gesture=ac.defaults},listeners:{"interactions:action-start":sc,"interactions:action-move":sc,"interactions:action-end":sc,"interactions:new":function(c){c.interaction.gesture={angle:0,distance:0,scale:1,startAngle:0,startDistance:0}},"auto-start:check":function(c){if(!(c.interaction.pointers.length<2)){var u=c.interactable.options.gesture;if(u&&u.enabled)return c.action={name:"gesture"},!1}}},defaults:{},getCursor:function(){return""}};Rs.default=ac;var As={};function rt(c,u,d,f,g,C,T){if(!u)return!1;if(!0===u){var w=O.default.number(C.width)?C.width:C.right-C.left,x=O.default.number(C.height)?C.height:C.bottom-C.top;if(T=Math.min(T,Math.abs(("left"===c||"right"===c?w:x)/2)),w<0&&("left"===c?c="right":"right"===c&&(c="left")),x<0&&("top"===c?c="bottom":"bottom"===c&&(c="top")),"left"===c)return d.x<(w>=0?C.left:C.right)+T;if("top"===c)return d.y<(x>=0?C.top:C.bottom)+T;if("right"===c)return d.x>(w>=0?C.right:C.left)-T;if("bottom"===c)return d.y>(x>=0?C.bottom:C.top)-T}return!!O.default.element(f)&&(O.default.element(u)?u===f:b.matchesUpTo(f,u,g))}function Os(c){var d=c.interaction;if("resize"===d.prepared.name&&d.resizeAxes){var f=c.iEvent;d.interactable.options.resize.square?("y"===d.resizeAxes?f.delta.x=f.delta.y:f.delta.y=f.delta.x,f.axes="xy"):(f.axes=d.resizeAxes,"x"===d.resizeAxes?f.delta.y=0:"y"===d.resizeAxes&&(f.delta.x=0))}}Object.defineProperty(As,"__esModule",{value:!0}),As.default=void 0;var Ae={id:"actions/resize",before:["actions/drag"],install:function(c){var u=c.actions,d=c.browser,f=c.Interactable,g=c.defaults;Ae.cursors=d.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"},Ae.defaultMargin=d.supportsTouch||d.supportsPointerEvent?20:10,f.prototype.resizable=function(C){return T=this,x=c,O.default.object(w=C)?(T.options.resize.enabled=!1!==w.enabled,T.setPerAction("resize",w),T.setOnEvents("resize",w),O.default.string(w.axis)&&/^x$|^y$|^xy$/.test(w.axis)?T.options.resize.axis=w.axis:null===w.axis&&(T.options.resize.axis=x.defaults.actions.resize.axis),O.default.bool(w.preserveAspectRatio)?T.options.resize.preserveAspectRatio=w.preserveAspectRatio:O.default.bool(w.square)&&(T.options.resize.square=w.square),T):O.default.bool(w)?(T.options.resize.enabled=w,T):T.options.resize;var T,w,x},u.map.resize=Ae,u.methodDict.resize="resizable",g.actions.resize=Ae.defaults},listeners:{"interactions:new":function(c){c.interaction.resizeAxes="xy"},"interactions:action-start":function(c){(function(u){var f=u.interaction;if("resize"===f.prepared.name&&f.prepared.edges){var g=u.iEvent,C=f.rect;f._rects={start:(0,z.default)({},C),corrected:(0,z.default)({},C),previous:(0,z.default)({},C),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},g.edges=f.prepared.edges,g.rect=f._rects.corrected,g.deltaRect=f._rects.delta}})(c),Os(c)},"interactions:action-move":function(c){(function(u){var f=u.interaction;if("resize"===f.prepared.name&&f.prepared.edges){var g=u.iEvent,C=f.interactable.options.resize.invert,T="reposition"===C||"negate"===C,w=f.rect,x=f._rects,j=x.start,$=x.corrected,Y=x.delta,ne=x.previous;if((0,z.default)(ne,$),T){if((0,z.default)($,w),"reposition"===C){if($.top>$.bottom){var ie=$.top;$.top=$.bottom,$.bottom=ie}if($.left>$.right){var te=$.left;$.left=$.right,$.right=te}}}else $.top=Math.min(w.top,j.bottom),$.bottom=Math.max(w.bottom,j.top),$.left=Math.min(w.left,j.right),$.right=Math.max(w.right,j.left);for(var le in $.width=$.right-$.left,$.height=$.bottom-$.top,$)Y[le]=$[le]-ne[le];g.edges=f.prepared.edges,g.rect=$,g.deltaRect=Y}})(c),Os(c)},"interactions:action-end":function(c){var d=c.interaction;if("resize"===d.prepared.name&&d.prepared.edges){var f=c.iEvent;f.edges=d.prepared.edges,f.rect=d._rects.corrected,f.deltaRect=d._rects.delta}},"auto-start:check":function(c){var u=c.interaction,d=c.interactable,f=c.element,g=c.rect,C=c.buttons;if(g){var T=(0,z.default)({},u.coords.cur.page),w=d.options.resize;if(w&&w.enabled&&(!u.pointerIsDown||!/mouse|pointer/.test(u.pointerType)||0!=(C&w.mouseButtons))){if(O.default.object(w.edges)){var x={left:!1,right:!1,top:!1,bottom:!1};for(var j in x)x[j]=rt(j,w.edges[j],T,u._latestPointer.eventTarget,f,g,w.margin||Ae.defaultMargin);x.left=x.left&&!x.right,x.top=x.top&&!x.bottom,(x.left||x.right||x.top||x.bottom)&&(c.action={name:"resize",edges:x})}else{var $="y"!==w.axis&&T.x>g.right-Ae.defaultMargin,Y="x"!==w.axis&&T.y>g.bottom-Ae.defaultMargin;($||Y)&&(c.action={name:"resize",axes:($?"x":"")+(Y?"y":"")})}return!c.action&&void 0}}}},defaults:{square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},cursors:null,getCursor:function(c){var u=c.edges,d=c.axis,g=Ae.cursors,C=null;if(d)C=g[c.name+d];else if(u){for(var T="",w=["top","bottom","left","right"],x=0;x<w.length;x++){var j=w[x];u[j]&&(T+=j)}C=g[T]}return C},defaultMargin:null};As.default=Ae;var ks={};Object.defineProperty(ks,"__esModule",{value:!0}),ks.default=void 0,ks.default={id:"actions",install:function(c){c.usePlugin(Rs.default),c.usePlugin(As.default),c.usePlugin(B.default),c.usePlugin(fo.default)}};var be={};Object.defineProperty(be,"__esModule",{value:!0}),be.default=void 0;var mr,ho,si=0;be.default={request:function(c){return mr(c)},cancel:function(c){return ho(c)},init:function(c){if(ho=c.cancelAnimationFrame,!(mr=c.requestAnimationFrame))for(var u=["ms","moz","webkit","o"],d=0;d<u.length;d++){var f=u[d];mr=c["".concat(f,"RequestAnimationFrame")],ho=c["".concat(f,"CancelAnimationFrame")]||c["".concat(f,"CancelRequestAnimationFrame")]}mr=mr&&mr.bind(c),ho=ho&&ho.bind(c),mr||(mr=function(g){var C=Date.now(),T=Math.max(0,16-(C-si)),w=c.setTimeout(function(){g(C+T)},T);return si=C+T,w},ho=function(g){return clearTimeout(g)})}};var yr={};Object.defineProperty(yr,"__esModule",{value:!0}),yr.getContainer=qt,yr.getScroll=$o,yr.getScrollSize=function(c){return O.default.window(c)&&(c=window.document.body),{x:c.scrollWidth,y:c.scrollHeight}},yr.getScrollSizeDelta=function(c,u){var d=c.interaction,f=c.element,g=d&&d.interactable.options[d.prepared.name].autoScroll;if(!g||!g.enabled)return u(),{x:0,y:0};var C=qt(g.container,d.interactable,f),T=$o(C);u();var w=$o(C);return{x:w.x-T.x,y:w.y-T.y}},yr.default=void 0;var fe={defaults:{enabled:!1,margin:60,container:null,speed:300},now:Date.now,interaction:null,i:0,x:0,y:0,isScrolling:!1,prevTime:0,margin:0,speed:0,start:function(c){fe.isScrolling=!0,be.default.cancel(fe.i),c.autoScroll=fe,fe.interaction=c,fe.prevTime=fe.now(),fe.i=be.default.request(fe.scroll)},stop:function(){fe.isScrolling=!1,fe.interaction&&(fe.interaction.autoScroll=null),be.default.cancel(fe.i)},scroll:function(){var c=fe.interaction,u=c.interactable,d=c.element,g=u.options[c.prepared.name].autoScroll,C=qt(g.container,u,d),T=fe.now(),x=g.speed*((T-fe.prevTime)/1e3);if(x>=1){var j={x:fe.x*x,y:fe.y*x};if(j.x||j.y){var $=$o(C);O.default.window(C)?C.scrollBy(j.x,j.y):C&&(C.scrollLeft+=j.x,C.scrollTop+=j.y);var Y=$o(C),ne={x:Y.x-$.x,y:Y.y-$.y};(ne.x||ne.y)&&u.fire({type:"autoscroll",target:d,interactable:u,delta:ne,interaction:c,container:C})}fe.prevTime=T}fe.isScrolling&&(be.default.cancel(fe.i),fe.i=be.default.request(fe.scroll))},check:function(c,u){var d;return null==(d=c.options[u].autoScroll)?void 0:d.enabled},onInteractionMove:function(c){var u=c.interaction,d=c.pointer;if(u.interacting()&&fe.check(u.interactable,u.prepared.name))if(u.simulation)fe.x=fe.y=0;else{var f,g,C,T,w=u.interactable,$=w.options[u.prepared.name].autoScroll,Y=qt($.container,w,u.element);if(O.default.window(Y))T=d.clientX<fe.margin,f=d.clientY<fe.margin,g=d.clientX>Y.innerWidth-fe.margin,C=d.clientY>Y.innerHeight-fe.margin;else{var ne=b.getElementClientRect(Y);T=d.clientX<ne.left+fe.margin,f=d.clientY<ne.top+fe.margin,g=d.clientX>ne.right-fe.margin,C=d.clientY>ne.bottom-fe.margin}fe.x=g?1:T?-1:0,fe.y=C?1:f?-1:0,fe.isScrolling||(fe.margin=$.margin,fe.speed=$.speed,fe.start(u))}}};function qt(c,u,d){return(O.default.string(c)?(0,oe.getStringOptionResult)(c,u,d):c)||(0,Fe.getWindow)(d)}function $o(c){return O.default.window(c)&&(c=window.document.body),{x:c.scrollLeft,y:c.scrollTop}}yr.default={id:"auto-scroll",install:function(c){var u=c.defaults,d=c.actions;c.autoScroll=fe,fe.now=function(){return c.now()},d.phaselessTypes.autoscroll=!0,u.perAction.autoScroll=fe.defaults},listeners:{"interactions:new":function(c){c.interaction.autoScroll=null},"interactions:destroy":function(c){c.interaction.autoScroll=null,fe.stop(),fe.interaction&&(fe.interaction=null)},"interactions:stop":fe.stop,"interactions:action-move":function(c){return fe.onInteractionMove(c)}}};var zn={};Object.defineProperty(zn,"__esModule",{value:!0}),zn.warnOnce=function(c,u){var d=!1;return function(){return d||(Fe.window.console.warn(u),d=!0),c.apply(this,arguments)}},zn.copyAction=function(c,u){return c.name=u.name,c.axis=u.axis,c.edges=u.edges,c},zn.sign=void 0,zn.sign=function(c){return c>=0?1:-1};var Ai={};function Rn(c){return O.default.bool(c)?(this.options.styleCursor=c,this):null===c?(delete this.options.styleCursor,this):this.options.styleCursor}function oy(c){return O.default.func(c)?(this.options.actionChecker=c,this):null===c?(delete this.options.actionChecker,this):this.options.actionChecker}Object.defineProperty(Ai,"__esModule",{value:!0}),Ai.default=void 0,Ai.default={id:"auto-start/interactableMethods",install:function(c){var u=c.Interactable;u.prototype.getAction=function(d,f,g,C){var w,x,j,$,Y,ne,ie,T=(x=f,j=g,Y=c,ne=(w=this).getRect($=C),Y.fire("auto-start:check",ie={action:null,interactable:w,interaction:j,element:$,rect:ne,buttons:x.buttons||{0:1,1:4,3:8,4:16}[x.button]}),ie.action);return this.options.actionChecker?this.options.actionChecker(d,f,T,this,C,g):T},u.prototype.ignoreFrom=(0,zn.warnOnce)(function(d){return this._backCompatOption("ignoreFrom",d)},"Interactable.ignoreFrom() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),u.prototype.allowFrom=(0,zn.warnOnce)(function(d){return this._backCompatOption("allowFrom",d)},"Interactable.allowFrom() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),u.prototype.actionChecker=oy,u.prototype.styleCursor=Rn}};var zo={};function vr(c,u,d,f,g){return u.testIgnoreAllow(u.options[c.name],d,f)&&u.options[c.name].enabled&&uc(u,d,c,g)?c:null}function sy(c,u,d,f,g,C,T){for(var w=0,x=f.length;w<x;w++){var j=f[w],$=g[w],Y=j.getAction(u,d,c,$);if(Y){var ne=vr(Y,j,$,C,T);if(ne)return{action:ne,interactable:j,element:$}}}return{action:null,interactable:null,element:null}}function Of(c,u,d,f,g){var C=[],T=[],w=f;function x($){C.push($),T.push(w)}for(;O.default.element(w);){C=[],T=[],g.interactables.forEachMatch(w,x);var j=sy(c,u,d,C,T,f,g);if(j.action&&!j.interactable.options[j.action.name].manualStart)return j;w=b.parentNode(w)}return{action:null,interactable:null,element:null}}function kf(c,u,d){var f=u.action,g=u.interactable,C=u.element;f=f||{name:null},c.interactable=g,c.element=C,(0,zn.copyAction)(c.prepared,f),c.rect=g&&f.name?g.getRect(C):null,Ku(c,d),d.fire("autoStart:prepared",{interaction:c})}function uc(c,u,d,f){var g=c.options,C=g[d.name].max,T=g[d.name].maxPerElement,w=f.autoStart.maxInteractions,x=0,j=0,$=0;if(!(C&&T&&w))return!1;for(var Y=0;Y<f.interactions.list.length;Y++){var ne=f.interactions.list[Y],ie=ne.prepared.name;if(ne.interacting()&&(++x>=w||ne.interactable===c&&((j+=ie===d.name?1:0)>=C||ne.element===u&&($++,ie===d.name&&$>=T))))return!1}return w>0}function Yu(c,u){return O.default.number(c)?(u.autoStart.maxInteractions=c,this):u.autoStart.maxInteractions}function Qu(c,u,d){var f=d.autoStart.cursorElement;f&&f!==c&&(f.style.cursor=""),c.ownerDocument.documentElement.style.cursor=u,c.style.cursor=u,d.autoStart.cursorElement=u?c:null}function Ku(c,u){var d=c.interactable,f=c.element,g=c.prepared;if("mouse"===c.pointerType&&d&&d.options.styleCursor){var C="";if(g.name){var T=d.options[g.name].cursorChecker;C=O.default.func(T)?T(g,d,f,c._interacting):u.actions.map[g.name].getCursor(g)}Qu(c.element,C||"",u)}else u.autoStart.cursorElement&&Qu(u.autoStart.cursorElement,"",u)}Object.defineProperty(zo,"__esModule",{value:!0}),zo.default=void 0,zo.default={id:"auto-start/base",before:["actions"],install:function(c){var u=c.interactStatic,d=c.defaults;c.usePlugin(Ai.default),d.base.actionChecker=null,d.base.styleCursor=!0,(0,z.default)(d.perAction,{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}),u.maxInteractions=function(f){return Yu(f,c)},c.autoStart={maxInteractions:1/0,withinInteractionLimit:uc,cursorElement:null}},listeners:{"interactions:down":function(c,u){var d=c.interaction,f=c.pointer,g=c.event,C=c.eventTarget;d.interacting()||kf(d,Of(d,f,g,C,u),u)},"interactions:move":function(c,u){var d,f,g,C,T,w;f=u,C=(d=c).pointer,T=d.event,w=d.eventTarget,"mouse"!==(g=d.interaction).pointerType||g.pointerIsDown||g.interacting()||kf(g,Of(g,C,T,w,f),f),function(d,f){var g=d.interaction;if(g.pointerIsDown&&!g.interacting()&&g.pointerWasMoved&&g.prepared.name){f.fire("autoStart:before-start",d);var C=g.interactable,T=g.prepared.name;T&&C&&(C.options[T].manualStart||!uc(C,g.element,g.prepared,f)?g.stop():(g.start(g.prepared,C,g.element),Ku(g,f)))}}(c,u)},"interactions:stop":function(c,u){var d=c.interaction,f=d.interactable;f&&f.options.styleCursor&&Qu(d.element,"",u)}},maxInteractions:Yu,withinInteractionLimit:uc,validateAction:vr};var an={};Object.defineProperty(an,"__esModule",{value:!0}),an.default=void 0,an.default={id:"auto-start/dragAxis",listeners:{"autoStart:before-start":function(c,u){var d=c.interaction,f=c.eventTarget,C=c.dy;if("drag"===d.prepared.name){var T=Math.abs(c.dx),w=Math.abs(C),x=d.interactable.options.drag,j=x.startAxis,$=T>w?"x":T<w?"y":"xy";if(d.prepared.axis="start"===x.lockAxis?$[0]:x.lockAxis,"xy"!==$&&"xy"!==j&&j!==$){d.prepared.name=null;for(var Y=f,ne=function(te){if(te!==d.interactable){var le=d.interactable.options.drag;if(!le.manualStart&&te.testIgnoreAllow(le,Y,f)){var ge=te.getAction(d.downPointer,d.downEvent,d,Y);if(ge&&"drag"===ge.name&&function(de,Ee){if(!Ee)return!1;var xe=Ee.options.drag.startAxis;return"xy"===de||"xy"===xe||xe===de}($,te)&&zo.default.validateAction(ge,te,Y,f,u))return te}}};O.default.element(Y);){var ie=u.interactables.forEachMatch(Y,ne);if(ie){d.prepared.name="drag",d.interactable=ie,d.element=Y;break}Y=(0,b.parentNode)(Y)}}}}}};var lc={};function Ju(c){var u=c.prepared&&c.prepared.name;if(!u)return null;var d=c.interactable.options;return d[u].hold||d[u].delay}Object.defineProperty(lc,"__esModule",{value:!0}),lc.default=void 0,lc.default={id:"auto-start/hold",install:function(c){var u=c.defaults;c.usePlugin(zo.default),u.perAction.hold=0,u.perAction.delay=0},listeners:{"interactions:new":function(c){c.interaction.autoStartHoldTimer=null},"autoStart:prepared":function(c){var u=c.interaction,d=Ju(u);d>0&&(u.autoStartHoldTimer=setTimeout(function(){u.start(u.prepared,u.interactable,u.element)},d))},"interactions:move":function(c){var u=c.interaction;u.autoStartHoldTimer&&u.pointerWasMoved&&!c.duplicate&&(clearTimeout(u.autoStartHoldTimer),u.autoStartHoldTimer=null)},"autoStart:before-start":function(c){var u=c.interaction;Ju(u)>0&&(u.prepared.name=null)}},getHoldDuration:Ju};var Te={};Object.defineProperty(Te,"__esModule",{value:!0}),Te.default=void 0,Te.default={id:"auto-start",install:function(c){c.usePlugin(zo.default),c.usePlugin(lc.default),c.usePlugin(an.default)}};var Ft={};function Nr(c){return/^(always|never|auto)$/.test(c)?(this.options.preventDefault=c,this):O.default.bool(c)?(this.options.preventDefault=c?"always":"never",this):this.options.preventDefault}function Xu(c){var u=c.interaction;u.interactable&&u.interactable.checkAndPreventDefault(c.event)}function Zu(c){var u=c.Interactable;u.prototype.preventDefault=Nr,u.prototype.checkAndPreventDefault=function(d){return function(f,g,C){var T=f.options.preventDefault;if("never"!==T)if("always"!==T){if(g.events.supportsPassive&&/^touch(start|move)$/.test(C.type)){var w=(0,Fe.getWindow)(C.target).document,x=g.getDocOptions(w);if(!x||!x.events||!1!==x.events.passive)return}/^(mouse|pointer|touch)*(down|start)/i.test(C.type)||O.default.element(C.target)&&(0,b.matchesSelector)(C.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||C.preventDefault()}else C.preventDefault()}(this,c,d)},c.interactions.docEvents.push({type:"dragstart",listener:function(d){for(var f=0;f<c.interactions.list.length;f++){var g=c.interactions.list[f];if(g.element&&(g.element===d.target||(0,b.nodeContains)(g.element,d.target)))return void g.interactable.checkAndPreventDefault(d)}}})}Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.install=Zu,Ft.default=void 0;var Nf={id:"core/interactablePreventDefault",install:Zu,listeners:["down","move","up","cancel"].reduce(function(c,u){return c["interactions:".concat(u)]=Xu,c},{})};Ft.default=Nf;var Ns={};Object.defineProperty(Ns,"__esModule",{value:!0}),Ns.default=void 0,Ns.default={};var ai,c,Go={};Object.defineProperty(Go,"__esModule",{value:!0}),Go.default=void 0,(c=ai||(ai={})).touchAction="touchAction",c.boxSizing="boxSizing",c.noListeners="noListeners",Go.default={id:"dev-tools",install:function(){}};var Oi={};Object.defineProperty(Oi,"__esModule",{value:!0}),Oi.default=function c(u){var d={};for(var f in u){var g=u[f];d[f]=O.default.plainObject(g)?c(g):O.default.array(g)?Je.from(g):g}return d};var Se={};function Fs(c,u){return function(d){if(Array.isArray(d))return d}(c)||function(d,f){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(d)){var g=[],C=!0,T=!1,w=void 0;try{for(var x,j=d[Symbol.iterator]();!(C=(x=j.next()).done)&&(g.push(x.value),!f||g.length!==f);C=!0);}catch($){T=!0,w=$}finally{try{C||null==j.return||j.return()}finally{if(T)throw w}}return g}}(c,u)||function(d,f){if(d){if("string"==typeof d)return tl(d,f);var g=Object.prototype.toString.call(d).slice(8,-1);return"Object"===g&&d.constructor&&(g=d.constructor.name),"Map"===g||"Set"===g?Array.from(d):"Arguments"===g||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g)?tl(d,f):void 0}}(c,u)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tl(c,u){(null==u||u>c.length)&&(u=c.length);for(var d=0,f=Array(u);d<u;d++)f[d]=c[d];return f}function ui(c,u,d){return u in c?Object.defineProperty(c,u,{value:d,enumerable:!0,configurable:!0,writable:!0}):c[u]=d,c}Object.defineProperty(Se,"__esModule",{value:!0}),Se.getRectOffset=An,Se.default=void 0;var ly=function(){function c(f){(function(g,C){if(!(g instanceof C))throw new TypeError("Cannot call a class as a function")})(this,c),ui(this,"states",[]),ui(this,"startOffset",{left:0,right:0,top:0,bottom:0}),ui(this,"startDelta",void 0),ui(this,"result",void 0),ui(this,"endResult",void 0),ui(this,"edges",void 0),ui(this,"interaction",void 0),this.interaction=f,this.result=er()}var d;return(d=[{key:"start",value:function(f,g){var j,$,Y,C=f.phase,T=this.interaction,w=(Y=($=(j=T).interactable.options[j.prepared.name]).modifiers)&&Y.length?Y:["snap","snapSize","snapEdges","restrict","restrictEdges","restrictSize"].map(function(ne){var ie=$[ne];return ie&&ie.enabled&&{options:ie,methods:ie._methods}}).filter(function(ne){return!!ne});this.prepareStates(w),this.edges=(0,z.default)({},T.edges),this.startOffset=An(T.rect,g),this.startDelta={x:0,y:0};var x=this.fillArg({phase:C,pageCoords:g,preEnd:!1});return this.result=er(),this.startAll(x),this.result=this.setAll(x)}},{key:"fillArg",value:function(f){var g=this.interaction;return f.interaction=g,f.interactable=g.interactable,f.element=g.element,f.rect=f.rect||g.rect,f.edges=this.edges,f.startOffset=this.startOffset,f}},{key:"startAll",value:function(f){for(var g=0;g<this.states.length;g++){var C=this.states[g];C.methods.start&&(f.state=C,C.methods.start(f))}}},{key:"setAll",value:function(f){var g=f.phase,C=f.preEnd,T=f.skipModifiers,w=f.rect;f.coords=(0,z.default)({},f.pageCoords),f.rect=(0,z.default)({},w);for(var x=T?this.states.slice(T):this.states,j=er(f.coords,f.rect),$=0;$<x.length;$++){var Y,ne=x[$],ie=ne.options,te=(0,z.default)({},f.coords),le=null;null!=(Y=ne.methods)&&Y.set&&this.shouldDo(ie,C,g)&&(f.state=ne,le=ne.methods.set(f),oe.addEdges(this.interaction.edges,f.rect,{x:f.coords.x-te.x,y:f.coords.y-te.y})),j.eventProps.push(le)}j.delta.x=f.coords.x-f.pageCoords.x,j.delta.y=f.coords.y-f.pageCoords.y,j.rectDelta.left=f.rect.left-w.left,j.rectDelta.right=f.rect.right-w.right,j.rectDelta.top=f.rect.top-w.top,j.rectDelta.bottom=f.rect.bottom-w.bottom;var ge=this.result.coords,de=this.result.rect;return ge&&de&&(j.changed=j.rect.left!==de.left||j.rect.right!==de.right||j.rect.top!==de.top||j.rect.bottom!==de.bottom||ge.x!==j.coords.x||ge.y!==j.coords.y),j}},{key:"applyToInteraction",value:function(f){var g=this.interaction,T=g.coords.cur,w=g.coords.start,x=this.result,j=this.startDelta,$=x.delta;"start"===f.phase&&(0,z.default)(this.startDelta,x.delta);for(var Y=0;Y<[[w,j],[T,$]].length;Y++){var ne=Fs([[w,j],[T,$]][Y],2),ie=ne[0],te=ne[1];ie.page.x+=te.x,ie.page.y+=te.y,ie.client.x+=te.x,ie.client.y+=te.y}var le=this.result.rectDelta,ge=f.rect||g.rect;ge.left+=le.left,ge.right+=le.right,ge.top+=le.top,ge.bottom+=le.bottom,ge.width=ge.right-ge.left,ge.height=ge.bottom-ge.top}},{key:"setAndApply",value:function(f){var g=this.interaction,w=f.skipModifiers,x=this.setAll(this.fillArg({preEnd:f.preEnd,phase:f.phase,pageCoords:f.modifiedCoords||g.coords.cur.page}));if(this.result=x,!x.changed&&(!w||w<this.states.length)&&g.interacting())return!1;if(f.modifiedCoords){var j=g.coords.cur.page,$={x:f.modifiedCoords.x-j.x,y:f.modifiedCoords.y-j.y};x.coords.x+=$.x,x.coords.y+=$.y,x.delta.x+=$.x,x.delta.y+=$.y}this.applyToInteraction(f)}},{key:"beforeEnd",value:function(f){var g=f.interaction,C=f.event,T=this.states;if(T&&T.length){for(var w=!1,x=0;x<T.length;x++){var j=T[x];f.state=j;var $=j.options,Y=j.methods,ne=Y.beforeEnd&&Y.beforeEnd(f);if(ne)return this.endResult=ne,!1;w=w||!w&&this.shouldDo($,!0,f.phase,!0)}w&&g.move({event:C,preEnd:!0})}}},{key:"stop",value:function(f){var g=f.interaction;if(this.states&&this.states.length){var C=(0,z.default)({states:this.states,interactable:g.interactable,element:g.element,rect:null},f);this.fillArg(C);for(var T=0;T<this.states.length;T++){var w=this.states[T];C.state=w,w.methods.stop&&w.methods.stop(C)}this.states=null,this.endResult=null}}},{key:"prepareStates",value:function(f){this.states=[];for(var g=0;g<f.length;g++){var C=f[g];this.states.push({options:C.options,methods:C.methods,index:g,name:C.name})}return this.states}},{key:"restoreInteractionCoords",value:function(f){var g=f.interaction,C=g.coords,T=g.rect,w=g.modification;if(w.result){for(var j=w.result,Y=j.rectDelta,ne=[[C.start,w.startDelta],[C.cur,j.delta]],ie=0;ie<ne.length;ie++){var te=Fs(ne[ie],2),le=te[0],ge=te[1];le.page.x-=ge.x,le.page.y-=ge.y,le.client.x-=ge.x,le.client.y-=ge.y}T.left-=Y.left,T.right-=Y.right,T.top-=Y.top,T.bottom-=Y.bottom}}},{key:"shouldDo",value:function(f,g,C,T){return!(!f||!1===f.enabled||T&&!f.endOnly||f.endOnly&&!g||"start"===C&&!f.setStart)}},{key:"copyFrom",value:function(f){this.startOffset=f.startOffset,this.startDelta=f.startDelta,this.edges=f.edges,this.states=f.states.map(function(g){return(0,Oi.default)(g)}),this.result=er((0,z.default)({},f.result.coords),(0,z.default)({},f.result.rect))}},{key:"destroy",value:function(){for(var f in this)this[f]=null}}])&&function(c,u){for(var d=0;d<u.length;d++){var f=u[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}(c.prototype,d),c}();function er(c,u){return{rect:u,coords:c,delta:{x:0,y:0},rectDelta:{left:0,right:0,top:0,bottom:0},eventProps:[],changed:!0}}function An(c,u){return c?{left:u.x-c.left,top:u.y-c.top,right:c.right-u.x,bottom:c.bottom-u.y}:{left:0,top:0,right:0,bottom:0}}Se.default=ly;var cn={};function dc(c){var d=c.interaction.modification.result;d&&(c.iEvent.modifiers=d.eventProps)}Object.defineProperty(cn,"__esModule",{value:!0}),cn.makeModifier=function(c,u){var d=c.defaults,f={start:c.start,set:c.set,beforeEnd:c.beforeEnd,stop:c.stop},g=function(C){var T=C||{};for(var w in T.enabled=!1!==T.enabled,d)w in T||(T[w]=d[w]);var x={options:T,methods:f,name:u,enable:function(){return T.enabled=!0,x},disable:function(){return T.enabled=!1,x}};return x};return u&&"string"==typeof u&&(g._defaults=d,g._methods=f),g},cn.addEventModifiers=dc,cn.default=void 0,cn.default={id:"modifiers/base",before:["actions"],install:function(c){c.defaults.perAction.modifiers=[]},listeners:{"interactions:new":function(c){var u=c.interaction;u.modification=new Se.default(u)},"interactions:before-action-start":function(c){var u=c.interaction.modification;u.start(c,c.interaction.coords.start.page),c.interaction.edges=u.edges,u.applyToInteraction(c)},"interactions:before-action-move":function(c){return c.interaction.modification.setAndApply(c)},"interactions:before-action-end":function(c){return c.interaction.modification.beforeEnd(c)},"interactions:action-start":dc,"interactions:action-move":dc,"interactions:action-end":dc,"interactions:after-action-start":function(c){return c.interaction.modification.restoreInteractionCoords(c)},"interactions:after-action-move":function(c){return c.interaction.modification.restoreInteractionCoords(c)},"interactions:stop":function(c){return c.interaction.modification.stop(c)}}};var Wo={};Object.defineProperty(Wo,"__esModule",{value:!0}),Wo.defaults=void 0,Wo.defaults={base:{preventDefault:"auto",deltaSource:"page"},perAction:{enabled:!1,origin:{x:0,y:0}},actions:{}};var qo={};function nl(c){return(nl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(c)}function it(c,u){return(it=Object.setPrototypeOf||function(d,f){return d.__proto__=f,d})(c,u)}function fy(c,u){return!u||"object"!==nl(u)&&"function"!=typeof u?ct(c):u}function ct(c){if(void 0===c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function li(c){return(li=Object.setPrototypeOf?Object.getPrototypeOf:function(u){return u.__proto__||Object.getPrototypeOf(u)})(c)}function Ie(c,u,d){return u in c?Object.defineProperty(c,u,{value:d,enumerable:!0,configurable:!0,writable:!0}):c[u]=d,c}Object.defineProperty(qo,"__esModule",{value:!0}),qo.InteractEvent=void 0;var Yo=function(c){!function(w,x){if("function"!=typeof x&&null!==x)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(x&&x.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),x&&it(w,x)}(T,c);var d,f,g,C=(f=T,g=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(w){return!1}}(),function(){var w,x=li(f);if(g){var j=li(this).constructor;w=Reflect.construct(x,arguments,j)}else w=x.apply(this,arguments);return fy(this,w)});function T(w,x,j,$,Y,ne,ie){var te;(function(at,Qe){if(!(at instanceof Qe))throw new TypeError("Cannot call a class as a function")})(this,T),Ie(ct(te=C.call(this,w)),"target",void 0),Ie(ct(te),"currentTarget",void 0),Ie(ct(te),"relatedTarget",null),Ie(ct(te),"screenX",void 0),Ie(ct(te),"screenY",void 0),Ie(ct(te),"button",void 0),Ie(ct(te),"buttons",void 0),Ie(ct(te),"ctrlKey",void 0),Ie(ct(te),"shiftKey",void 0),Ie(ct(te),"altKey",void 0),Ie(ct(te),"metaKey",void 0),Ie(ct(te),"page",void 0),Ie(ct(te),"client",void 0),Ie(ct(te),"delta",void 0),Ie(ct(te),"rect",void 0),Ie(ct(te),"x0",void 0),Ie(ct(te),"y0",void 0),Ie(ct(te),"t0",void 0),Ie(ct(te),"dt",void 0),Ie(ct(te),"duration",void 0),Ie(ct(te),"clientX0",void 0),Ie(ct(te),"clientY0",void 0),Ie(ct(te),"velocity",void 0),Ie(ct(te),"speed",void 0),Ie(ct(te),"swipe",void 0),Ie(ct(te),"timeStamp",void 0),Ie(ct(te),"axes",void 0),Ie(ct(te),"preEnd",void 0);var le=w.interactable,ge=(le&&le.options||Wo.defaults).deltaSource,de=(0,De.default)(le,Y=Y||w.element,j),Ee="start"===$,xe="end"===$,Ve=Ee?ct(te):w.prevEvent,nt=Ee?w.coords.start:xe?{page:Ve.page,client:Ve.client,timeStamp:w.coords.cur.timeStamp}:w.coords.cur;return te.page=(0,z.default)({},nt.page),te.client=(0,z.default)({},nt.client),te.rect=(0,z.default)({},w.rect),te.timeStamp=nt.timeStamp,xe||(te.page.x-=de.x,te.page.y-=de.y,te.client.x-=de.x,te.client.y-=de.y),te.ctrlKey=x.ctrlKey,te.altKey=x.altKey,te.shiftKey=x.shiftKey,te.metaKey=x.metaKey,te.button=x.button,te.buttons=x.buttons,te.target=Y,te.currentTarget=Y,te.preEnd=ne,te.type=ie||j+($||""),te.interactable=le,te.t0=Ee?w.pointers[w.pointers.length-1].downTime:Ve.t0,te.x0=w.coords.start.page.x-de.x,te.y0=w.coords.start.page.y-de.y,te.clientX0=w.coords.start.client.x-de.x,te.clientY0=w.coords.start.client.y-de.y,te.delta=Ee||xe?{x:0,y:0}:{x:te[ge].x-Ve[ge].x,y:te[ge].y-Ve[ge].y},te.dt=w.coords.delta.timeStamp,te.duration=te.timeStamp-te.t0,te.velocity=(0,z.default)({},w.coords.velocity[ge]),te.speed=(0,Jn.default)(te.velocity.x,te.velocity.y),te.swipe=xe||"inertiastart"===$?te.getSwipe():null,te}return(d=[{key:"getSwipe",value:function(){var w=this._interaction;if(w.prevEvent.speed<600||this.timeStamp-w.prevEvent.timeStamp>150)return null;var x=180*Math.atan2(w.prevEvent.velocityY,w.prevEvent.velocityX)/Math.PI;x<0&&(x+=360);var j=112.5<=x&&x<247.5,$=202.5<=x&&x<337.5;return{up:$,down:!$&&22.5<=x&&x<157.5,left:j,right:!j&&(292.5<=x||x<67.5),angle:x,speed:w.prevEvent.speed,velocity:{x:w.prevEvent.velocityX,y:w.prevEvent.velocityY}}}},{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}])&&function(c,u){for(var d=0;d<u.length;d++){var f=u[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}(T.prototype,d),T}(Xn.BaseEvent);qo.InteractEvent=Yo,Object.defineProperties(Yo.prototype,{pageX:{get:function(){return this.page.x},set:function(c){this.page.x=c}},pageY:{get:function(){return this.page.y},set:function(c){this.page.y=c}},clientX:{get:function(){return this.client.x},set:function(c){this.client.x=c}},clientY:{get:function(){return this.client.y},set:function(c){this.client.y=c}},dx:{get:function(){return this.delta.x},set:function(c){this.delta.x=c}},dy:{get:function(){return this.delta.y},set:function(c){this.delta.y=c}},velocityX:{get:function(){return this.velocity.x},set:function(c){this.velocity.x=c}},velocityY:{get:function(){return this.velocity.y},set:function(c){this.velocity.y=c}}});var ki={};function Ni(c,u,d){return u in c?Object.defineProperty(c,u,{value:d,enumerable:!0,configurable:!0,writable:!0}):c[u]=d,c}Object.defineProperty(ki,"__esModule",{value:!0}),ki.PointerInfo=void 0,ki.PointerInfo=function c(u,d,f,g,C){(function(T,w){if(!(T instanceof w))throw new TypeError("Cannot call a class as a function")})(this,c),Ni(this,"id",void 0),Ni(this,"pointer",void 0),Ni(this,"event",void 0),Ni(this,"downTime",void 0),Ni(this,"downTarget",void 0),this.id=u,this.pointer=d,this.event=f,this.downTime=g,this.downTarget=C};var Qo,Vs,It={};function St(c,u,d){return u in c?Object.defineProperty(c,u,{value:d,enumerable:!0,configurable:!0,writable:!0}):c[u]=d,c}Object.defineProperty(It,"__esModule",{value:!0}),Object.defineProperty(It,"PointerInfo",{enumerable:!0,get:function(){return ki.PointerInfo}}),It.default=It.Interaction=It._ProxyMethods=It._ProxyValues=void 0,It._ProxyValues=Qo,function(c){c.interactable="",c.element="",c.prepared="",c.pointerIsDown="",c.pointerWasMoved="",c._proxy=""}(Qo||(It._ProxyValues=Qo={})),It._ProxyMethods=Vs,function(c){c.start="",c.move="",c.end="",c.stop="",c.interacting=""}(Vs||(It._ProxyMethods=Vs={}));var tr=0,rl=function(){function c(f){var g=this,C=f.pointerType,T=f.scopeFire;(function(ne,ie){if(!(ne instanceof ie))throw new TypeError("Cannot call a class as a function")})(this,c),St(this,"interactable",null),St(this,"element",null),St(this,"rect",void 0),St(this,"_rects",void 0),St(this,"edges",void 0),St(this,"_scopeFire",void 0),St(this,"prepared",{name:null,axis:null,edges:null}),St(this,"pointerType",void 0),St(this,"pointers",[]),St(this,"downEvent",null),St(this,"downPointer",{}),St(this,"_latestPointer",{pointer:null,event:null,eventTarget:null}),St(this,"prevEvent",null),St(this,"pointerIsDown",!1),St(this,"pointerWasMoved",!1),St(this,"_interacting",!1),St(this,"_ending",!1),St(this,"_stopped",!0),St(this,"_proxy",null),St(this,"simulation",null),St(this,"doMove",(0,zn.warnOnce)(function(ne){this.move(ne)},"The interaction.doMove() method has been renamed to interaction.move()")),St(this,"coords",{start:Ce.newCoords(),prev:Ce.newCoords(),cur:Ce.newCoords(),delta:Ce.newCoords(),velocity:Ce.newCoords()}),St(this,"_id",tr++),this._scopeFire=T,this.pointerType=C;var w=this;this._proxy={};var x=function(ne){Object.defineProperty(g._proxy,ne,{get:function(){return w[ne]}})};for(var j in Qo)x(j);var $=function(ne){Object.defineProperty(g._proxy,ne,{value:function(){return w[ne].apply(w,arguments)}})};for(var Y in Vs)$(Y);this._scopeFire("interactions:new",{interaction:this})}var d;return(d=[{key:"pointerMoveTolerance",get:function(){return 1}},{key:"pointerDown",value:function(f,g,C){var T=this.updatePointer(f,g,C,!0);this._scopeFire("interactions:down",{pointer:f,event:g,eventTarget:C,pointerIndex:T,pointerInfo:this.pointers[T],type:"down",interaction:this})}},{key:"start",value:function(f,g,C){return!(this.interacting()||!this.pointerIsDown||this.pointers.length<("gesture"===f.name?2:1)||!g.options[f.name].enabled)&&((0,zn.copyAction)(this.prepared,f),this.interactable=g,this.element=C,this.rect=g.getRect(C),this.edges=this.prepared.edges?(0,z.default)({},this.prepared.edges):{left:!0,right:!0,top:!0,bottom:!0},this._stopped=!1,this._interacting=this._doPhase({interaction:this,event:this.downEvent,phase:"start"})&&!this._stopped,this._interacting)}},{key:"pointerMove",value:function(f,g,C){this.simulation||this.modification&&this.modification.endResult||this.updatePointer(f,g,C,!1);var T,w,x=this.coords.cur.page.x===this.coords.prev.page.x&&this.coords.cur.page.y===this.coords.prev.page.y&&this.coords.cur.client.x===this.coords.prev.client.x&&this.coords.cur.client.y===this.coords.prev.client.y;this.pointerIsDown&&!this.pointerWasMoved&&(this.pointerWasMoved=(0,Jn.default)(T=this.coords.cur.client.x-this.coords.start.client.x,w=this.coords.cur.client.y-this.coords.start.client.y)>this.pointerMoveTolerance);var j=this.getPointerIndex(f),$={pointer:f,pointerIndex:j,pointerInfo:this.pointers[j],event:g,type:"move",eventTarget:C,dx:T,dy:w,duplicate:x,interaction:this};x||Ce.setCoordVelocity(this.coords.velocity,this.coords.delta),this._scopeFire("interactions:move",$),x||this.simulation||(this.interacting()&&($.type=null,this.move($)),this.pointerWasMoved&&Ce.copyCoords(this.coords.prev,this.coords.cur))}},{key:"move",value:function(f){f&&f.event||Ce.setZeroCoords(this.coords.delta),(f=(0,z.default)({pointer:this._latestPointer.pointer,event:this._latestPointer.event,eventTarget:this._latestPointer.eventTarget,interaction:this},f||{})).phase="move",this._doPhase(f)}},{key:"pointerUp",value:function(f,g,C,T){var w=this.getPointerIndex(f);-1===w&&(w=this.updatePointer(f,g,C,!1));var x=/cancel$/i.test(g.type)?"cancel":"up";this._scopeFire("interactions:".concat(x),{pointer:f,pointerIndex:w,pointerInfo:this.pointers[w],event:g,eventTarget:C,type:x,curEventTarget:T,interaction:this}),this.simulation||this.end(g),this.removePointer(f,g)}},{key:"documentBlur",value:function(f){this.end(f),this._scopeFire("interactions:blur",{event:f,type:"blur",interaction:this})}},{key:"end",value:function(f){var g;this._ending=!0,f=f||this._latestPointer.event,this.interacting()&&(g=this._doPhase({event:f,interaction:this,phase:"end"})),this._ending=!1,!0===g&&this.stop()}},{key:"currentAction",value:function(){return this._interacting?this.prepared.name:null}},{key:"interacting",value:function(){return this._interacting}},{key:"stop",value:function(){this._scopeFire("interactions:stop",{interaction:this}),this.interactable=this.element=null,this._interacting=!1,this._stopped=!0,this.prepared.name=this.prevEvent=null}},{key:"getPointerIndex",value:function(f){var g=Ce.getPointerId(f);return"mouse"===this.pointerType||"pen"===this.pointerType?this.pointers.length-1:Je.findIndex(this.pointers,function(C){return C.id===g})}},{key:"getPointerInfo",value:function(f){return this.pointers[this.getPointerIndex(f)]}},{key:"updatePointer",value:function(f,g,C,T){var w=Ce.getPointerId(f),x=this.getPointerIndex(f),j=this.pointers[x];return T=!1!==T&&(T||/(down|start)$/i.test(g.type)),j?j.pointer=f:(j=new ki.PointerInfo(w,f,g,null,null),x=this.pointers.length,this.pointers.push(j)),Ce.setCoords(this.coords.cur,this.pointers.map(function($){return $.pointer}),this._now()),Ce.setCoordDeltas(this.coords.delta,this.coords.prev,this.coords.cur),T&&(this.pointerIsDown=!0,j.downTime=this.coords.cur.timeStamp,j.downTarget=C,Ce.pointerExtend(this.downPointer,f),this.interacting()||(Ce.copyCoords(this.coords.start,this.coords.cur),Ce.copyCoords(this.coords.prev,this.coords.cur),this.downEvent=g,this.pointerWasMoved=!1)),this._updateLatestPointer(f,g,C),this._scopeFire("interactions:update-pointer",{pointer:f,event:g,eventTarget:C,down:T,pointerInfo:j,pointerIndex:x,interaction:this}),x}},{key:"removePointer",value:function(f,g){var C=this.getPointerIndex(f);-1!==C&&(this._scopeFire("interactions:remove-pointer",{pointer:f,event:g,eventTarget:null,pointerIndex:C,pointerInfo:this.pointers[C],interaction:this}),this.pointers.splice(C,1),this.pointerIsDown=!1)}},{key:"_updateLatestPointer",value:function(f,g,C){this._latestPointer.pointer=f,this._latestPointer.event=g,this._latestPointer.eventTarget=C}},{key:"destroy",value:function(){this._latestPointer.pointer=null,this._latestPointer.event=null,this._latestPointer.eventTarget=null}},{key:"_createPreparedEvent",value:function(f,g,C,T){return new qo.InteractEvent(this,f,this.prepared.name,g,this.element,C,T)}},{key:"_fireEvent",value:function(f){this.interactable.fire(f),(!this.prevEvent||f.timeStamp>=this.prevEvent.timeStamp)&&(this.prevEvent=f)}},{key:"_doPhase",value:function(f){var g=f.event,C=f.phase,T=f.preEnd,w=f.type,x=this.rect;if(x&&"move"===C&&(oe.addEdges(this.edges,x,this.coords.delta[this.interactable.options.deltaSource]),x.width=x.right-x.left,x.height=x.bottom-x.top),!1===this._scopeFire("interactions:before-action-".concat(C),f))return!1;var j=f.iEvent=this._createPreparedEvent(g,C,T,w);return this._scopeFire("interactions:action-".concat(C),f),"start"===C&&(this.prevEvent=j),this._fireEvent(j),this._scopeFire("interactions:after-action-".concat(C),f),!0}},{key:"_now",value:function(){return Date.now()}}])&&function(c,u){for(var d=0;d<u.length;d++){var f=u[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}(c.prototype,d),c}();It.Interaction=rl,It.default=rl;var di={};function fc(c){c.pointerIsDown&&(Pe(c.coords.cur,c.offset.total),c.offset.pending.x=0,c.offset.pending.y=0)}function bn(c){hc(c.interaction)}function hc(c){if(!(d=c).offset.pending.x&&!d.offset.pending.y)return!1;var d,u=c.offset.pending;return Pe(c.coords.cur,u),Pe(c.coords.delta,u),oe.addEdges(c.edges,c.rect,u),u.x=0,u.y=0,!0}function ol(c){var u=c.x,d=c.y;this.offset.pending.x+=u,this.offset.pending.y+=d,this.offset.total.x+=u,this.offset.total.y+=d}function Pe(c,u){var d=c.page,f=c.client,g=u.x,C=u.y;d.x+=g,d.y+=C,f.x+=g,f.y+=C}Object.defineProperty(di,"__esModule",{value:!0}),di.addTotal=fc,di.applyPending=hc,di.default=void 0,It._ProxyMethods.offsetBy="",di.default={id:"offset",before:["modifiers","pointer-events","actions","inertia"],install:function(c){c.Interaction.prototype.offsetBy=ol},listeners:{"interactions:new":function(c){c.interaction.offset={total:{x:0,y:0},pending:{x:0,y:0}}},"interactions:update-pointer":function(c){return fc(c.interaction)},"interactions:before-action-start":bn,"interactions:before-action-move":bn,"interactions:before-action-end":function(c){var u=c.interaction;if(hc(u))return u.move({offset:!0}),u.end(),!1},"interactions:stop":function(c){var u=c.interaction;u.offset.total.x=0,u.offset.total.y=0,u.offset.pending.x=0,u.offset.pending.y=0}}};var Vt={};function wt(c,u,d){return u in c?Object.defineProperty(c,u,{value:d,enumerable:!0,configurable:!0,writable:!0}):c[u]=d,c}Object.defineProperty(Vt,"__esModule",{value:!0}),Vt.default=Vt.InertiaState=void 0;var On=function(){function c(f){(function(g,C){if(!(g instanceof C))throw new TypeError("Cannot call a class as a function")})(this,c),wt(this,"active",!1),wt(this,"isModified",!1),wt(this,"smoothEnd",!1),wt(this,"allowResume",!1),wt(this,"modification",void 0),wt(this,"modifierCount",0),wt(this,"modifierArg",void 0),wt(this,"startCoords",void 0),wt(this,"t0",0),wt(this,"v0",0),wt(this,"te",0),wt(this,"targetOffset",void 0),wt(this,"modifiedOffset",void 0),wt(this,"currentOffset",void 0),wt(this,"lambda_v0",0),wt(this,"one_ve_v0",0),wt(this,"timeout",void 0),wt(this,"interaction",void 0),this.interaction=f}var d;return(d=[{key:"start",value:function(f){var g=this.interaction,C=Ls(g);if(!C||!C.enabled)return!1;var T=g.coords.velocity.client,w=(0,Jn.default)(T.x,T.y),x=this.modification||(this.modification=new Se.default(g));if(x.copyFrom(g.modification),this.t0=g._now(),this.allowResume=C.allowResume,this.v0=w,this.currentOffset={x:0,y:0},this.startCoords=g.coords.cur.page,this.modifierArg=x.fillArg({pageCoords:this.startCoords,preEnd:!0,phase:"inertiastart"}),this.t0-g.coords.cur.timeStamp<50&&w>C.minSpeed&&w>C.endSpeed)this.startInertia();else{if(x.result=x.setAll(this.modifierArg),!x.result.changed)return!1;this.startSmoothEnd()}return g.modification.result.rect=null,g.offsetBy(this.targetOffset),g._doPhase({interaction:g,event:f,phase:"inertiastart"}),g.offsetBy({x:-this.targetOffset.x,y:-this.targetOffset.y}),g.modification.result.rect=null,this.active=!0,g.simulation=this,!0}},{key:"startInertia",value:function(){var f=this,g=this.interaction.coords.velocity.client,C=Ls(this.interaction),T=C.resistance,w=-Math.log(C.endSpeed/this.v0)/T;this.targetOffset={x:(g.x-w)/T,y:(g.y-w)/T},this.te=w,this.lambda_v0=T/this.v0,this.one_ve_v0=1-C.endSpeed/this.v0;var x=this.modification,j=this.modifierArg;j.pageCoords={x:this.startCoords.x+this.targetOffset.x,y:this.startCoords.y+this.targetOffset.y},x.result=x.setAll(j),x.result.changed&&(this.isModified=!0,this.modifiedOffset={x:this.targetOffset.x+x.result.delta.x,y:this.targetOffset.y+x.result.delta.y}),this.onNextFrame(function(){return f.inertiaTick()})}},{key:"startSmoothEnd",value:function(){var f=this;this.smoothEnd=!0,this.isModified=!0,this.targetOffset={x:this.modification.result.delta.x,y:this.modification.result.delta.y},this.onNextFrame(function(){return f.smoothEndTick()})}},{key:"onNextFrame",value:function(f){var g=this;this.timeout=be.default.request(function(){g.active&&f()})}},{key:"inertiaTick",value:function(){var g,T,w,x=this,j=this.interaction,$=Ls(j).resistance,Y=(j._now()-this.t0)/1e3;if(Y<this.te){var ne,ie=1-(Math.exp(-$*Y)-this.lambda_v0)/this.one_ve_v0;this.isModified?(g=this.targetOffset.y,T=this.modifiedOffset.y,ne={x:kn(w=ie,0,this.targetOffset.x,this.modifiedOffset.x),y:kn(w,0,g,T)}):ne={x:this.targetOffset.x*ie,y:this.targetOffset.y*ie};var te={x:ne.x-this.currentOffset.x,y:ne.y-this.currentOffset.y};this.currentOffset.x+=te.x,this.currentOffset.y+=te.y,j.offsetBy(te),j.move(),this.onNextFrame(function(){return x.inertiaTick()})}else j.offsetBy({x:this.modifiedOffset.x-this.currentOffset.x,y:this.modifiedOffset.y-this.currentOffset.y}),this.end()}},{key:"smoothEndTick",value:function(){var f=this,g=this.interaction,C=g._now()-this.t0,T=Ls(g).smoothEndDuration;if(C<T){var w={x:ye(C,0,this.targetOffset.x,T),y:ye(C,0,this.targetOffset.y,T)},x={x:w.x-this.currentOffset.x,y:w.y-this.currentOffset.y};this.currentOffset.x+=x.x,this.currentOffset.y+=x.y,g.offsetBy(x),g.move({skipModifiers:this.modifierCount}),this.onNextFrame(function(){return f.smoothEndTick()})}else g.offsetBy({x:this.targetOffset.x-this.currentOffset.x,y:this.targetOffset.y-this.currentOffset.y}),this.end()}},{key:"resume",value:function(f){var g=f.pointer,C=f.event,T=f.eventTarget,w=this.interaction;w.offsetBy({x:-this.currentOffset.x,y:-this.currentOffset.y}),w.updatePointer(g,C,T,!0),w._doPhase({interaction:w,event:C,phase:"resume"}),(0,Ce.copyCoords)(w.coords.prev,w.coords.cur),this.stop()}},{key:"end",value:function(){this.interaction.move(),this.interaction.end(),this.stop()}},{key:"stop",value:function(){this.active=this.smoothEnd=!1,this.interaction.simulation=null,be.default.cancel(this.timeout)}}])&&function(c,u){for(var d=0;d<u.length;d++){var f=u[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}(c.prototype,d),c}();function Ls(c){var u=c.interactable,d=c.prepared;return u&&u.options&&d.name&&u.options[d.name].inertia}function kn(c,u,d,f){var g=1-c;return g*g*u+2*g*c*d+c*c*f}function ye(c,u,d,f){return-d*(c/=f)*(c-2)+u}Vt.InertiaState=On,Vt.default={id:"inertia",before:["modifiers","actions"],install:function(c){var u=c.defaults;c.usePlugin(di.default),c.usePlugin(cn.default),c.actions.phases.inertiastart=!0,c.actions.phases.resume=!0,u.perAction.inertia={enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300}},listeners:{"interactions:new":function(c){var u=c.interaction;u.inertia=new On(u)},"interactions:before-action-end":function(c){var u=c.interaction;return(!u._interacting||u.simulation||!u.inertia.start(c.event))&&null},"interactions:down":function(c){var u=c.interaction,f=u.inertia;if(f.active)for(var g=c.eventTarget;O.default.element(g);){if(g===u.element){f.resume(c);break}g=b.parentNode(g)}},"interactions:stop":function(c){var u=c.interaction.inertia;u.active&&u.stop()},"interactions:before-action-resume":function(c){var u=c.interaction.modification;u.stop(c),u.start(c,c.interaction.coords.cur.page),u.applyToInteraction(c)},"interactions:before-action-inertiastart":function(c){return c.interaction.modification.setAndApply(c)},"interactions:action-resume":cn.addEventModifiers,"interactions:action-inertiastart":cn.addEventModifiers,"interactions:after-action-inertiastart":function(c){return c.interaction.modification.restoreInteractionCoords(c)},"interactions:after-action-resume":function(c){return c.interaction.modification.restoreInteractionCoords(c)}}};var ut={};function nr(c,u,d){return u in c?Object.defineProperty(c,u,{value:d,enumerable:!0,configurable:!0,writable:!0}):c[u]=d,c}function Ht(c,u){for(var d=0;d<u.length;d++){var f=u[d];if(c.immediatePropagationStopped)break;f(c)}}Object.defineProperty(ut,"__esModule",{value:!0}),ut.Eventable=void 0;var Fi=function(){function c(f){(function(g,C){if(!(g instanceof C))throw new TypeError("Cannot call a class as a function")})(this,c),nr(this,"options",void 0),nr(this,"types",{}),nr(this,"propagationStopped",!1),nr(this,"immediatePropagationStopped",!1),nr(this,"global",void 0),this.options=(0,z.default)({},f||{})}var d;return(d=[{key:"fire",value:function(f){var g,C=this.global;(g=this.types[f.type])&&Ht(f,g),!f.propagationStopped&&C&&(g=C[f.type])&&Ht(f,g)}},{key:"on",value:function(f,g){var C=(0,et.default)(f,g);for(f in C)this.types[f]=Je.merge(this.types[f]||[],C[f])}},{key:"off",value:function(f,g){var C=(0,et.default)(f,g);for(f in C){var T=this.types[f];if(T&&T.length)for(var w=0;w<C[f].length;w++){var j=T.indexOf(C[f][w]);-1!==j&&T.splice(j,1)}}}},{key:"getRect",value:function(f){return null}}])&&function(c,u){for(var d=0;d<u.length;d++){var f=u[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}(c.prototype,d),c}();ut.Eventable=Fi;var bt={};Object.defineProperty(bt,"__esModule",{value:!0}),bt.default=function(c,u){if(u.phaselessTypes[c])return!0;for(var d in u.map)if(0===c.indexOf(d)&&c.substr(d.length)in u.phases)return!0;return!1};var Vi={};Object.defineProperty(Vi,"__esModule",{value:!0}),Vi.createInteractStatic=function(c){var u=function d(f,g){var C=c.interactables.get(f,g);return C||((C=c.interactables.new(f,g)).events.global=d.globalEvents),C};return u.getPointerAverage=Ce.pointerAverage,u.getTouchBBox=Ce.touchBBox,u.getTouchDistance=Ce.touchDistance,u.getTouchAngle=Ce.touchAngle,u.getElementRect=b.getElementRect,u.getElementClientRect=b.getElementClientRect,u.matchesSelector=b.matchesSelector,u.closest=b.closest,u.globalEvents={},u.version="1.10.11",u.scope=c,u.use=function(d,f){return this.scope.usePlugin(d,f),this},u.isSet=function(d,f){return!!this.scope.interactables.get(d,f&&f.context)},u.on=(0,zn.warnOnce)(function(d,f,g){if(O.default.string(d)&&-1!==d.search(" ")&&(d=d.trim().split(/ +/)),O.default.array(d)){for(var C=0;C<d.length;C++)this.on(d[C],f,g);return this}if(O.default.object(d)){for(var w in d)this.on(w,d[w],f);return this}return(0,bt.default)(d,this.scope.actions)?this.globalEvents[d]?this.globalEvents[d].push(f):this.globalEvents[d]=[f]:this.scope.events.add(this.scope.document,d,f,{options:g}),this},"The interact.on() method is being deprecated"),u.off=(0,zn.warnOnce)(function(d,f,g){if(O.default.string(d)&&-1!==d.search(" ")&&(d=d.trim().split(/ +/)),O.default.array(d)){for(var C=0;C<d.length;C++)this.off(d[C],f,g);return this}if(O.default.object(d)){for(var w in d)this.off(w,d[w],f);return this}var x;return(0,bt.default)(d,this.scope.actions)?d in this.globalEvents&&-1!==(x=this.globalEvents[d].indexOf(f))&&this.globalEvents[d].splice(x,1):this.scope.events.remove(this.scope.document,d,f,g),this},"The interact.off() method is being deprecated"),u.debug=function(){return this.scope},u.supportsTouch=function(){return y.default.supportsTouch},u.supportsPointerEvent=function(){return y.default.supportsPointerEvent},u.stop=function(){for(var d=0;d<this.scope.interactions.list.length;d++)this.scope.interactions.list[d].stop();return this},u.pointerMoveTolerance=function(d){return O.default.number(d)?(this.scope.interactions.pointerMoveTolerance=d,this):this.scope.interactions.pointerMoveTolerance},u.addDocument=function(d,f){this.scope.addDocument(d,f)},u.removeDocument=function(d){this.scope.removeDocument(d)},u};var Fr={};function Gn(c,u,d){return u in c?Object.defineProperty(c,u,{value:d,enumerable:!0,configurable:!0,writable:!0}):c[u]=d,c}Object.defineProperty(Fr,"__esModule",{value:!0}),Fr.Interactable=void 0;var po=function(){function c(f,g,C,T){(function(w,x){if(!(w instanceof x))throw new TypeError("Cannot call a class as a function")})(this,c),Gn(this,"options",void 0),Gn(this,"_actions",void 0),Gn(this,"target",void 0),Gn(this,"events",new ut.Eventable),Gn(this,"_context",void 0),Gn(this,"_win",void 0),Gn(this,"_doc",void 0),Gn(this,"_scopeEvents",void 0),Gn(this,"_rectChecker",void 0),this._actions=g.actions,this.target=f,this._context=g.context||C,this._win=(0,Fe.getWindow)((0,b.trySelector)(f)?this._context:f),this._doc=this._win.document,this._scopeEvents=T,this.set(g)}var d;return(d=[{key:"_defaults",get:function(){return{base:{},perAction:{},actions:{}}}},{key:"setOnEvents",value:function(f,g){return O.default.func(g.onstart)&&this.on("".concat(f,"start"),g.onstart),O.default.func(g.onmove)&&this.on("".concat(f,"move"),g.onmove),O.default.func(g.onend)&&this.on("".concat(f,"end"),g.onend),O.default.func(g.oninertiastart)&&this.on("".concat(f,"inertiastart"),g.oninertiastart),this}},{key:"updatePerActionListeners",value:function(f,g,C){(O.default.array(g)||O.default.object(g))&&this.off(f,g),(O.default.array(C)||O.default.object(C))&&this.on(f,C)}},{key:"setPerAction",value:function(f,g){var C=this._defaults;for(var T in g){var w=T,x=this.options[f],j=g[w];"listeners"===w&&this.updatePerActionListeners(f,x.listeners,j),O.default.array(j)?x[w]=Je.from(j):O.default.plainObject(j)?(x[w]=(0,z.default)(x[w]||{},(0,Oi.default)(j)),O.default.object(C.perAction[w])&&"enabled"in C.perAction[w]&&(x[w].enabled=!1!==j.enabled)):O.default.bool(j)&&O.default.object(C.perAction[w])?x[w].enabled=j:x[w]=j}}},{key:"getRect",value:function(f){return f=f||(O.default.element(this.target)?this.target:null),O.default.string(this.target)&&(f=f||this._context.querySelector(this.target)),(0,b.getElementRect)(f)}},{key:"rectChecker",value:function(f){var g=this;return O.default.func(f)?(this._rectChecker=f,this.getRect=function(C){var T=(0,z.default)({},g._rectChecker(C));return"width"in T||(T.width=T.right-T.left,T.height=T.bottom-T.top),T},this):null===f?(delete this.getRect,delete this._rectChecker,this):this.getRect}},{key:"_backCompatOption",value:function(f,g){if((0,b.trySelector)(g)||O.default.object(g)){for(var C in this.options[f]=g,this._actions.map)this.options[C][f]=g;return this}return this.options[f]}},{key:"origin",value:function(f){return this._backCompatOption("origin",f)}},{key:"deltaSource",value:function(f){return"page"===f||"client"===f?(this.options.deltaSource=f,this):this.options.deltaSource}},{key:"context",value:function(){return this._context}},{key:"inContext",value:function(f){return this._context===f.ownerDocument||(0,b.nodeContains)(this._context,f)}},{key:"testIgnoreAllow",value:function(f,g,C){return!this.testIgnore(f.ignoreFrom,g,C)&&this.testAllow(f.allowFrom,g,C)}},{key:"testAllow",value:function(f,g,C){return!f||!!O.default.element(C)&&(O.default.string(f)?(0,b.matchesUpTo)(C,f,g):!!O.default.element(f)&&(0,b.nodeContains)(f,C))}},{key:"testIgnore",value:function(f,g,C){return!(!f||!O.default.element(C))&&(O.default.string(f)?(0,b.matchesUpTo)(C,f,g):!!O.default.element(f)&&(0,b.nodeContains)(f,C))}},{key:"fire",value:function(f){return this.events.fire(f),this}},{key:"_onOff",value:function(f,g,C,T){O.default.object(g)&&!O.default.array(g)&&(T=C,C=null);var w="on"===f?"add":"remove",x=(0,et.default)(g,C);for(var j in x){"wheel"===j&&(j=y.default.wheelEvent);for(var $=0;$<x[j].length;$++){var Y=x[j][$];(0,bt.default)(j,this._actions)?this.events[f](j,Y):O.default.string(this.target)?this._scopeEvents["".concat(w,"Delegate")](this.target,this._context,j,Y,T):this._scopeEvents[w](this.target,j,Y,T)}}return this}},{key:"on",value:function(f,g,C){return this._onOff("on",f,g,C)}},{key:"off",value:function(f,g,C){return this._onOff("off",f,g,C)}},{key:"set",value:function(f){var g=this._defaults;for(var C in O.default.object(f)||(f={}),this.options=(0,Oi.default)(g.base),this._actions.methodDict){var T=C,w=this._actions.methodDict[T];this.options[T]={},this.setPerAction(T,(0,z.default)((0,z.default)({},g.perAction),g.actions[T])),this[w](f[T])}for(var x in f)O.default.func(this[x])&&this[x](f[x]);return this}},{key:"unset",value:function(){if(O.default.string(this.target))for(var f in this._scopeEvents.delegatedEvents)for(var g=this._scopeEvents.delegatedEvents[f],C=g.length-1;C>=0;C--){var T=g[C],j=T.listeners;T.selector===this.target&&T.context===this._context&&g.splice(C,1);for(var $=j.length-1;$>=0;$--)this._scopeEvents.removeDelegate(this.target,this._context,f,j[$][0],j[$][1])}else this._scopeEvents.remove(this.target,"all")}}])&&function(c,u){for(var d=0;d<u.length;d++){var f=u[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}(c.prototype,d),c}();Fr.Interactable=po;var go={};function un(c,u,d){return u in c?Object.defineProperty(c,u,{value:d,enumerable:!0,configurable:!0,writable:!0}):c[u]=d,c}Object.defineProperty(go,"__esModule",{value:!0}),go.InteractableSet=void 0;var Jo=function(){function c(f){var g=this;(function(C,T){if(!(C instanceof T))throw new TypeError("Cannot call a class as a function")})(this,c),un(this,"list",[]),un(this,"selectorMap",{}),un(this,"scope",void 0),this.scope=f,f.addListeners({"interactable:unset":function(C){var T=C.interactable,w=T.target,x=T._context,j=O.default.string(w)?g.selectorMap[w]:w[g.scope.id],$=Je.findIndex(j,function(Y){return Y.context===x});j[$]&&(j[$].context=null,j[$].interactable=null),j.splice($,1)}})}var d;return(d=[{key:"new",value:function(f,g){g=(0,z.default)(g||{},{actions:this.scope.actions});var C=new this.scope.Interactable(f,g,this.scope.document,this.scope.events),T={context:C._context,interactable:C};return this.scope.addDocument(C._doc),this.list.push(C),O.default.string(f)?(this.selectorMap[f]||(this.selectorMap[f]=[]),this.selectorMap[f].push(T)):(C.target[this.scope.id]||Object.defineProperty(f,this.scope.id,{value:[],configurable:!0}),f[this.scope.id].push(T)),this.scope.fire("interactable:new",{target:f,options:g,interactable:C,win:this.scope._win}),C}},{key:"get",value:function(f,g){var C=g&&g.context||this.scope.document,T=O.default.string(f),w=T?this.selectorMap[f]:f[this.scope.id];if(!w)return null;var x=Je.find(w,function(j){return j.context===C&&(T||j.interactable.inContext(f))});return x&&x.interactable}},{key:"forEachMatch",value:function(f,g){for(var C=0;C<this.list.length;C++){var T=this.list[C],w=void 0;if((O.default.string(T.target)?O.default.element(f)&&b.matchesSelector(f,T.target):f===T.target)&&T.inContext(f)&&(w=g(T)),void 0!==w)return w}}}])&&function(c,u){for(var d=0;d<u.length;d++){var f=u[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}(c.prototype,d),c}();go.InteractableSet=Jo;var Vr={};function lt(c,u,d){return u in c?Object.defineProperty(c,u,{value:d,enumerable:!0,configurable:!0,writable:!0}):c[u]=d,c}function pc(c,u){return function(d){if(Array.isArray(d))return d}(c)||function(d,f){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(d)){var g=[],C=!0,T=!1,w=void 0;try{for(var x,j=d[Symbol.iterator]();!(C=(x=j.next()).done)&&(g.push(x.value),!f||g.length!==f);C=!0);}catch($){T=!0,w=$}finally{try{C||null==j.return||j.return()}finally{if(T)throw w}}return g}}(c,u)||function(d,f){if(d){if("string"==typeof d)return sl(d,f);var g=Object.prototype.toString.call(d).slice(8,-1);return"Object"===g&&d.constructor&&(g=d.constructor.name),"Map"===g||"Set"===g?Array.from(d):"Arguments"===g||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g)?sl(d,f):void 0}}(c,u)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sl(c,u){(null==u||u>c.length)&&(u=c.length);for(var d=0,f=Array(u);d<u;d++)f[d]=c[d];return f}Object.defineProperty(Vr,"__esModule",{value:!0}),Vr.default=void 0;var js=function(){function c(f){(function(g,C){if(!(g instanceof C))throw new TypeError("Cannot call a class as a function")})(this,c),lt(this,"currentTarget",void 0),lt(this,"originalEvent",void 0),lt(this,"type",void 0),this.originalEvent=f,(0,Ue.default)(this,f)}var d;return(d=[{key:"preventOriginalDefault",value:function(){this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.originalEvent.stopPropagation()}},{key:"stopImmediatePropagation",value:function(){this.originalEvent.stopImmediatePropagation()}}])&&function(c,u){for(var d=0;d<u.length;d++){var f=u[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}(c.prototype,d),c}();function Li(c){if(!O.default.object(c))return{capture:!!c,passive:!1};var u=(0,z.default)({},c);return u.capture=!!c.capture,u.passive=!!c.passive,u}Vr.default={id:"events",install:function(c){var u,d=[],f={},g=[],C={add:T,remove:w,addDelegate:function($,Y,ne,ie,te){var le=Li(te);if(!f[ne]){f[ne]=[];for(var ge=0;ge<g.length;ge++){var de=g[ge];T(de,ne,x),T(de,ne,j,!0)}}var Ee=f[ne],xe=Je.find(Ee,function(Ve){return Ve.selector===$&&Ve.context===Y});xe||Ee.push(xe={selector:$,context:Y,listeners:[]}),xe.listeners.push([ie,le])},removeDelegate:function($,Y,ne,ie,te){var le,ge=Li(te),de=f[ne],Ee=!1;if(de)for(le=de.length-1;le>=0;le--){var xe=de[le];if(xe.selector===$&&xe.context===Y){for(var Ve=xe.listeners,nt=Ve.length-1;nt>=0;nt--){var at=pc(Ve[nt],2),tt=at[1];if(at[0]===ie&&tt.capture===ge.capture&&tt.passive===ge.passive){Ve.splice(nt,1),Ve.length||(de.splice(le,1),w(Y,ne,x),w(Y,ne,j,!0)),Ee=!0;break}}if(Ee)break}}},delegateListener:x,delegateUseCapture:j,delegatedEvents:f,documents:g,targets:d,supportsOptions:!1,supportsPassive:!1};function T($,Y,ne,ie){var te=Li(ie),le=Je.find(d,function(ge){return ge.eventTarget===$});le||d.push(le={eventTarget:$,events:{}}),le.events[Y]||(le.events[Y]=[]),$.addEventListener&&!Je.contains(le.events[Y],ne)&&($.addEventListener(Y,ne,C.supportsOptions?te:te.capture),le.events[Y].push(ne))}function w($,Y,ne,ie){var te=Li(ie),le=Je.findIndex(d,function(nt){return nt.eventTarget===$}),ge=d[le];if(ge&&ge.events)if("all"!==Y){var de=!1,Ee=ge.events[Y];if(Ee){if("all"===ne){for(var xe=Ee.length-1;xe>=0;xe--)w($,Y,Ee[xe],te);return}for(var Ve=0;Ve<Ee.length;Ve++)if(Ee[Ve]===ne){$.removeEventListener(Y,ne,C.supportsOptions?te:te.capture),Ee.splice(Ve,1),0===Ee.length&&(delete ge.events[Y],de=!0);break}}de&&!Object.keys(ge.events).length&&d.splice(le,1)}else for(Y in ge.events)ge.events.hasOwnProperty(Y)&&w($,Y,"all")}function x($,Y){for(var ne=Li(Y),ie=new js($),te=f[$.type],le=pc(Ce.getEventTargets($),1)[0],ge=le;O.default.element(ge);){for(var de=0;de<te.length;de++){var Ee=te[de],Ve=Ee.context;if(b.matchesSelector(ge,Ee.selector)&&b.nodeContains(Ve,le)&&b.nodeContains(Ve,ge)){var nt=Ee.listeners;ie.currentTarget=ge;for(var at=0;at<nt.length;at++){var Qe=pc(nt[at],2),Dn=Qe[1];Dn.capture===ne.capture&&Dn.passive===ne.passive&&(0,Qe[0])(ie)}}}ge=b.parentNode(ge)}}function j($){return x($,!0)}return null==(u=c.document)||u.createElement("div").addEventListener("test",null,{get capture(){return C.supportsOptions=!0},get passive(){return C.supportsPassive=!0}}),c.events=C,C}};var ji={};Object.defineProperty(ji,"__esModule",{value:!0}),ji.default=void 0;var _r={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function(c){for(var u=0;u<_r.methodOrder.length;u++){var f=_r[_r.methodOrder[u]](c);if(f)return f}return null},simulationResume:function(c){var u=c.pointerType,f=c.eventTarget,g=c.scope;if(!/down|start/i.test(c.eventType))return null;for(var C=0;C<g.interactions.list.length;C++){var T=g.interactions.list[C],w=f;if(T.simulation&&T.simulation.allowResume&&T.pointerType===u)for(;w;){if(w===T.element)return T;w=b.parentNode(w)}}return null},mouseOrPen:function(c){var u,d=c.pointerId,f=c.pointerType,g=c.eventType,C=c.scope;if("mouse"!==f&&"pen"!==f)return null;for(var T=0;T<C.interactions.list.length;T++){var w=C.interactions.list[T];if(w.pointerType===f){if(w.simulation&&!Xt(w,d))continue;if(w.interacting())return w;u||(u=w)}}if(u)return u;for(var x=0;x<C.interactions.list.length;x++){var j=C.interactions.list[x];if(!(j.pointerType!==f||/down/i.test(g)&&j.simulation))return j}return null},hasPointer:function(c){for(var u=c.pointerId,d=c.scope,f=0;f<d.interactions.list.length;f++){var g=d.interactions.list[f];if(Xt(g,u))return g}return null},idle:function(c){for(var u=c.pointerType,d=c.scope,f=0;f<d.interactions.list.length;f++){var g=d.interactions.list[f];if(1===g.pointers.length){var C=g.interactable;if(C&&(!C.options.gesture||!C.options.gesture.enabled))continue}else if(g.pointers.length>=2)continue;if(!g.interacting()&&u===g.pointerType)return g}return null}};function Xt(c,u){return c.pointers.some(function(d){return d.id===u})}ji.default=_r;var Fn={};function Wn(c){return(Wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(c)}function Bs(c,u){return function(d){if(Array.isArray(d))return d}(c)||function(d,f){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(d)){var g=[],C=!0,T=!1,w=void 0;try{for(var x,j=d[Symbol.iterator]();!(C=(x=j.next()).done)&&(g.push(x.value),!f||g.length!==f);C=!0);}catch($){T=!0,w=$}finally{try{C||null==j.return||j.return()}finally{if(T)throw w}}return g}}(c,u)||function(d,f){if(d){if("string"==typeof d)return Zo(d,f);var g=Object.prototype.toString.call(d).slice(8,-1);return"Object"===g&&d.constructor&&(g=d.constructor.name),"Map"===g||"Set"===g?Array.from(d):"Arguments"===g||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g)?Zo(d,f):void 0}}(c,u)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zo(c,u){(null==u||u>c.length)&&(u=c.length);for(var d=0,f=Array(u);d<u;d++)f[d]=c[d];return f}function Us(c,u){if(!(c instanceof u))throw new TypeError("Cannot call a class as a function")}function al(c,u){return(al=Object.setPrototypeOf||function(d,f){return d.__proto__=f,d})(c,u)}function hy(c,u){return!u||"object"!==Wn(u)&&"function"!=typeof u?function(d){if(void 0===d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d}(c):u}function gc(c){return(gc=Object.setPrototypeOf?Object.getPrototypeOf:function(u){return u.__proto__||Object.getPrototypeOf(u)})(c)}Object.defineProperty(Fn,"__esModule",{value:!0}),Fn.default=void 0;var mc=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer","windowBlur"];function Vf(c,u){return function(d){var f=u.interactions.list,g=Ce.getPointerType(d),C=Bs(Ce.getEventTargets(d),2),T=C[0],w=C[1],x=[];if(/^touch/.test(d.type)){u.prevTouchTime=u.now();for(var j=0;j<d.changedTouches.length;j++){var $=d.changedTouches[j],Y={pointer:$,pointerId:Ce.getPointerId($),pointerType:g,eventType:d.type,eventTarget:T,curEventTarget:w,scope:u},ne=Lf(Y);x.push([Y.pointer,Y.eventTarget,Y.curEventTarget,ne])}}else{var ie=!1;if(!y.default.supportsPointerEvent&&/mouse/.test(d.type)){for(var te=0;te<f.length&&!ie;te++)ie="mouse"!==f[te].pointerType&&f[te].pointerIsDown;ie=ie||u.now()-u.prevTouchTime<500||0===d.timeStamp}if(!ie){var le={pointer:d,pointerId:Ce.getPointerId(d),pointerType:g,eventType:d.type,curEventTarget:w,eventTarget:T,scope:u},ge=Lf(le);x.push([le.pointer,le.eventTarget,le.curEventTarget,ge])}}for(var de=0;de<x.length;de++){var Ee=Bs(x[de],4);Ee[3][c](Ee[0],d,Ee[1],Ee[2])}}}function Lf(c){var u=c.pointerType,d=c.scope,f={interaction:ji.default.search(c),searchDetails:c};return d.fire("interactions:find",f),f.interaction||d.interactions.new({pointerType:u})}function cl(c,u){var d=c.doc,f=c.scope,g=c.options,C=f.interactions.docEvents,T=f.events,w=T[u];for(var x in f.browser.isIOS&&!g.events&&(g.events={passive:!1}),T.delegatedEvents)w(d,x,T.delegateListener),w(d,x,T.delegateUseCapture,!0);for(var j=g&&g.events,$=0;$<C.length;$++){var Y=C[$];w(d,Y.type,Y.listener,j)}}Fn.default={id:"core/interactions",install:function(c){for(var u={},d=0;d<mc.length;d++){var f=mc[d];u[f]=Vf(f,c)}var g,C=y.default.pEventTypes;function T(){for(var w=0;w<c.interactions.list.length;w++){var x=c.interactions.list[w];if(x.pointerIsDown&&"touch"===x.pointerType&&!x._interacting)for(var j=function(){var Y=x.pointers[$];c.documents.some(function(ne){return(0,b.nodeContains)(ne.doc,Y.downTarget)})||x.removePointer(Y.pointer,Y.event)},$=0;$<x.pointers.length;$++)j()}}(g=M.default.PointerEvent?[{type:C.down,listener:T},{type:C.down,listener:u.pointerDown},{type:C.move,listener:u.pointerMove},{type:C.up,listener:u.pointerUp},{type:C.cancel,listener:u.pointerUp}]:[{type:"mousedown",listener:u.pointerDown},{type:"mousemove",listener:u.pointerMove},{type:"mouseup",listener:u.pointerUp},{type:"touchstart",listener:T},{type:"touchstart",listener:u.pointerDown},{type:"touchmove",listener:u.pointerMove},{type:"touchend",listener:u.pointerUp},{type:"touchcancel",listener:u.pointerUp}]).push({type:"blur",listener:function(w){for(var x=0;x<c.interactions.list.length;x++)c.interactions.list[x].documentBlur(w)}}),c.prevTouchTime=0,c.Interaction=function(w){!function(te,le){if("function"!=typeof le&&null!==le)throw new TypeError("Super expression must either be null or a function");te.prototype=Object.create(le&&le.prototype,{constructor:{value:te,writable:!0,configurable:!0}}),le&&al(te,le)}(ie,w);var j,$,Y,ne=($=ie,Y=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(te){return!1}}(),function(){var te,le=gc($);if(Y){var ge=gc(this).constructor;te=Reflect.construct(le,arguments,ge)}else te=le.apply(this,arguments);return hy(this,te)});function ie(){return Us(this,ie),ne.apply(this,arguments)}return(j=[{key:"pointerMoveTolerance",get:function(){return c.interactions.pointerMoveTolerance},set:function(te){c.interactions.pointerMoveTolerance=te}},{key:"_now",value:function(){return c.now()}}])&&function(c,u){for(var d=0;d<u.length;d++){var f=u[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}(ie.prototype,j),ie}(It.default),c.interactions={list:[],new:function(w){w.scopeFire=function(j,$){return c.fire(j,$)};var x=new c.Interaction(w);return c.interactions.list.push(x),x},listeners:u,docEvents:g,pointerMoveTolerance:1},c.usePlugin(Ft.default)},listeners:{"scope:add-document":function(c){return cl(c,"add")},"scope:remove-document":function(c){return cl(c,"remove")},"interactable:unset":function(c,u){for(var d=c.interactable,f=u.interactions.list.length-1;f>=0;f--){var g=u.interactions.list[f];g.interactable===d&&(g.stop(),u.fire("interactions:destroy",{interaction:g}),g.destroy(),u.interactions.list.length>2&&u.interactions.list.splice(f,1))}}},onDocSignal:cl,doOnInteractions:Vf,methodNames:mc};var Hs={};function jf(c){return(jf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(c)}function ul(c,u,d){return(ul="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(f,g,C){var T=function(x,j){for(;!Object.prototype.hasOwnProperty.call(x,j)&&null!==(x=es(x)););return x}(f,g);if(T){var w=Object.getOwnPropertyDescriptor(T,g);return w.get?w.get.call(C):w.value}})(c,u,d||c)}function Bf(c,u){return(Bf=Object.setPrototypeOf||function(d,f){return d.__proto__=f,d})(c,u)}function gy(c,u){return!u||"object"!==jf(u)&&"function"!=typeof u?function(d){if(void 0===d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d}(c):u}function es(c){return(es=Object.setPrototypeOf?Object.getPrototypeOf:function(u){return u.__proto__||Object.getPrototypeOf(u)})(c)}function Uf(c,u){if(!(c instanceof u))throw new TypeError("Cannot call a class as a function")}function Hf(c,u){for(var d=0;d<u.length;d++){var f=u[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}function $f(c,u,d){return u&&Hf(c.prototype,u),d&&Hf(c,d),c}function ln(c,u,d){return u in c?Object.defineProperty(c,u,{value:d,enumerable:!0,configurable:!0,writable:!0}):c[u]=d,c}Object.defineProperty(Hs,"__esModule",{value:!0}),Hs.initScope=$s,Hs.Scope=void 0;var ll=function(){function c(){var u=this;Uf(this,c),ln(this,"id","__interact_scope_".concat(Math.floor(100*Math.random()))),ln(this,"isInitialized",!1),ln(this,"listenerMaps",[]),ln(this,"browser",y.default),ln(this,"defaults",(0,Oi.default)(Wo.defaults)),ln(this,"Eventable",ut.Eventable),ln(this,"actions",{map:{},phases:{start:!0,move:!0,end:!0},methodDict:{},phaselessTypes:{}}),ln(this,"interactStatic",(0,Vi.createInteractStatic)(this)),ln(this,"InteractEvent",qo.InteractEvent),ln(this,"Interactable",void 0),ln(this,"interactables",new go.InteractableSet(this)),ln(this,"_win",void 0),ln(this,"document",void 0),ln(this,"window",void 0),ln(this,"documents",[]),ln(this,"_plugins",{list:[],map:{}}),ln(this,"onWindowUnload",function(f){return u.removeDocument(f.target)});var d=this;this.Interactable=function(f){!function(x,j){if("function"!=typeof j&&null!==j)throw new TypeError("Super expression must either be null or a function");x.prototype=Object.create(j&&j.prototype,{constructor:{value:x,writable:!0,configurable:!0}}),j&&Bf(x,j)}(w,f);var g,C,T=(g=w,C=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(x){return!1}}(),function(){var x,j=es(g);if(C){var $=es(this).constructor;x=Reflect.construct(j,arguments,$)}else x=j.apply(this,arguments);return gy(this,x)});function w(){return Uf(this,w),T.apply(this,arguments)}return $f(w,[{key:"_defaults",get:function(){return d.defaults}},{key:"set",value:function(x){return ul(es(w.prototype),"set",this).call(this,x),d.fire("interactable:set",{options:x,interactable:this}),this}},{key:"unset",value:function(){ul(es(w.prototype),"unset",this).call(this),d.interactables.list.splice(d.interactables.list.indexOf(this),1),d.fire("interactable:unset",{interactable:this})}}]),w}(Fr.Interactable)}return $f(c,[{key:"addListeners",value:function(u,d){this.listenerMaps.push({id:d,map:u})}},{key:"fire",value:function(u,d){for(var f=0;f<this.listenerMaps.length;f++){var g=this.listenerMaps[f].map[u];if(g&&!1===g(d,this,u))return!1}}},{key:"init",value:function(u){return this.isInitialized?this:$s(this,u)}},{key:"pluginIsInstalled",value:function(u){return this._plugins.map[u.id]||-1!==this._plugins.list.indexOf(u)}},{key:"usePlugin",value:function(u,d){if(!this.isInitialized)return this;if(this.pluginIsInstalled(u))return this;if(u.id&&(this._plugins.map[u.id]=u),this._plugins.list.push(u),u.install&&u.install(this,d),u.listeners&&u.before){for(var f=0,g=this.listenerMaps.length,C=u.before.reduce(function(w,x){return w[x]=!0,w[zf(x)]=!0,w},{});f<g;f++){var T=this.listenerMaps[f].id;if(C[T]||C[zf(T)])break}this.listenerMaps.splice(f,0,{id:u.id,map:u.listeners})}else u.listeners&&this.listenerMaps.push({id:u.id,map:u.listeners});return this}},{key:"addDocument",value:function(u,d){if(-1!==this.getDocIndex(u))return!1;var f=Fe.getWindow(u);d=d?(0,z.default)({},d):{},this.documents.push({doc:u,options:d}),this.events.documents.push(u),u!==this.document&&this.events.add(f,"unload",this.onWindowUnload),this.fire("scope:add-document",{doc:u,window:f,scope:this,options:d})}},{key:"removeDocument",value:function(u){var d=this.getDocIndex(u),f=Fe.getWindow(u),g=this.documents[d].options;this.events.remove(f,"unload",this.onWindowUnload),this.documents.splice(d,1),this.events.documents.splice(d,1),this.fire("scope:remove-document",{doc:u,window:f,scope:this,options:g})}},{key:"getDocIndex",value:function(u){for(var d=0;d<this.documents.length;d++)if(this.documents[d].doc===u)return d;return-1}},{key:"getDocOptions",value:function(u){var d=this.getDocIndex(u);return-1===d?null:this.documents[d].options}},{key:"now",value:function(){return(this.window.Date||Date).now()}}]),c}();function $s(c,u){return c.isInitialized=!0,O.default.window(u)&&Fe.init(u),M.default.init(u),y.default.init(u),be.default.init(u),c.window=u,c.document=u.document,c.usePlugin(Fn.default),c.usePlugin(Vr.default),c}function zf(c){return c&&c.replace(/\/.*$/,"")}Hs.Scope=ll;var mn={};Object.defineProperty(mn,"__esModule",{value:!0}),mn.default=void 0;var Gf=new Hs.Scope;mn.default=Gf.interactStatic;var dl="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0;Gf.init(dl);var $t={};Object.defineProperty($t,"__esModule",{value:!0}),$t.default=void 0,$t.default=function(){};var ts={};Object.defineProperty(ts,"__esModule",{value:!0}),ts.default=void 0,ts.default=function(){};var zs={};function fl(c,u){return function(d){if(Array.isArray(d))return d}(c)||function(d,f){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(d)){var g=[],C=!0,T=!1,w=void 0;try{for(var x,j=d[Symbol.iterator]();!(C=(x=j.next()).done)&&(g.push(x.value),!f||g.length!==f);C=!0);}catch($){T=!0,w=$}finally{try{C||null==j.return||j.return()}finally{if(T)throw w}}return g}}(c,u)||function(d,f){if(d){if("string"==typeof d)return yc(d,f);var g=Object.prototype.toString.call(d).slice(8,-1);return"Object"===g&&d.constructor&&(g=d.constructor.name),"Map"===g||"Set"===g?Array.from(d):"Arguments"===g||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g)?yc(d,f):void 0}}(c,u)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yc(c,u){(null==u||u>c.length)&&(u=c.length);for(var d=0,f=Array(u);d<u;d++)f[d]=c[d];return f}Object.defineProperty(zs,"__esModule",{value:!0}),zs.default=void 0,zs.default=function(c){var u=[["x","y"],["left","top"],["right","bottom"],["width","height"]].filter(function(f){var g=fl(f,2);return g[0]in c||g[1]in c}),d=function(f,g){for(var T=c.limits,w=void 0===T?{left:-1/0,right:1/0,top:-1/0,bottom:1/0}:T,x=c.offset,j=void 0===x?{x:0,y:0}:x,$={range:c.range,grid:c,x:null,y:null},Y=0;Y<u.length;Y++){var ne=fl(u[Y],2),ie=ne[0],te=ne[1],le=Math.round((f-j.x)/c[ie]),ge=Math.round((g-j.y)/c[te]);$[ie]=Math.max(w.left,Math.min(w.right,le*c[ie]+j.x)),$[te]=Math.max(w.top,Math.min(w.bottom,ge*c[te]+j.y))}return $};return d.grid=c,d.coordFields=u,d};var yo={};Object.defineProperty(yo,"__esModule",{value:!0}),Object.defineProperty(yo,"edgeTarget",{enumerable:!0,get:function(){return $t.default}}),Object.defineProperty(yo,"elements",{enumerable:!0,get:function(){return ts.default}}),Object.defineProperty(yo,"grid",{enumerable:!0,get:function(){return zs.default}});var Gs={};Object.defineProperty(Gs,"__esModule",{value:!0}),Gs.default=void 0,Gs.default={id:"snappers",install:function(c){var u=c.interactStatic;u.snappers=(0,z.default)(u.snappers||{},yo),u.createSnapGrid=u.snappers.grid}};var vo={};function Vn(c,u){var d=Object.keys(c);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(c);u&&(f=f.filter(function(g){return Object.getOwnPropertyDescriptor(c,g).enumerable})),d.push.apply(d,f)}return d}function Ws(c){for(var u=1;u<arguments.length;u++){var d=null!=arguments[u]?arguments[u]:{};u%2?Vn(Object(d),!0).forEach(function(f){hl(c,f,d[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(d)):Vn(Object(d)).forEach(function(f){Object.defineProperty(c,f,Object.getOwnPropertyDescriptor(d,f))})}return c}function hl(c,u,d){return u in c?Object.defineProperty(c,u,{value:d,enumerable:!0,configurable:!0,writable:!0}):c[u]=d,c}Object.defineProperty(vo,"__esModule",{value:!0}),vo.aspectRatio=vo.default=void 0;var qs={start:function(c){var u=c.state,d=c.rect,f=c.edges,C=u.options.ratio,T=u.options,w=T.equalDelta,x=T.modifiers;"preserve"===C&&(C=d.width/d.height),u.startCoords=(0,z.default)({},c.pageCoords),u.startRect=(0,z.default)({},d),u.ratio=C,u.equalDelta=w;var j=u.linkedEdges={top:f.top||f.left&&!f.bottom,left:f.left||f.top&&!f.right,bottom:f.bottom||f.right&&!f.top,right:f.right||f.bottom&&!f.left};if(u.xIsPrimaryAxis=!(!f.left&&!f.right),u.edgeSign=u.equalDelta?(j.left?1:-1)*(j.top?1:-1):(u.xIsPrimaryAxis?j.top:j.left)?-1:1,(0,z.default)(c.edges,j),x&&x.length){var Y=new Se.default(c.interaction);Y.copyFrom(c.interaction.modification),Y.prepareStates(x),u.subModification=Y,Y.startAll(Ws({},c))}},set:function(c){var u=c.state,d=c.rect,f=c.coords,g=(0,z.default)({},f),C=u.equalDelta?Wf:_c;if(C(u,u.xIsPrimaryAxis,f,d),!u.subModification)return null;var T=(0,z.default)({},d);(0,oe.addEdges)(u.linkedEdges,T,{x:f.x-g.x,y:f.y-g.y});var w=u.subModification.setAll(Ws(Ws({},c),{},{rect:T,edges:u.linkedEdges,pageCoords:f,prevCoords:f,prevRect:T})),x=w.delta;return w.changed&&(C(u,Math.abs(x.x)>Math.abs(x.y),w.coords,w.rect),(0,z.default)(f,w.coords)),w.eventProps},defaults:{ratio:"preserve",equalDelta:!1,modifiers:[],enabled:!1}};function Wf(c,u,d){var f=c.startCoords,g=c.edgeSign;u?d.y=f.y+(d.x-f.x)*g:d.x=f.x+(d.y-f.y)*g}function _c(c,u,d,f){var g=c.startRect,C=c.startCoords,T=c.ratio,w=c.edgeSign;u?d.y=C.y+(f.width/T-g.height)*w:d.x=C.x+(f.height*T-g.width)*w}vo.aspectRatio=qs;var my=(0,cn.makeModifier)(qs,"aspectRatio");vo.default=my;var dt={};Object.defineProperty(dt,"__esModule",{value:!0}),dt.default=void 0;var qf=function(){};qf._defaults={},dt.default=qf;var bc={};Object.defineProperty(bc,"__esModule",{value:!0}),Object.defineProperty(bc,"default",{enumerable:!0,get:function(){return dt.default}});var Xe={};function Cc(c,u,d){return O.default.func(c)?oe.resolveRectLike(c,u.interactable,u.element,[d.x,d.y,u]):oe.resolveRectLike(c,u.interactable,u.element)}Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.getRestrictionRect=Cc,Xe.restrict=Xe.default=void 0;var Yf={start:function(c){var u=c.rect,d=c.startOffset,f=c.state,g=c.interaction,C=c.pageCoords,T=f.options,w=T.elementRect,x=(0,z.default)({left:0,top:0,right:0,bottom:0},T.offset||{});if(u&&w){var j=Cc(T.restriction,g,C);if(j){var $=j.right-j.left-u.width,Y=j.bottom-j.top-u.height;$<0&&(x.left+=$,x.right+=$),Y<0&&(x.top+=Y,x.bottom+=Y)}x.left+=d.left-u.width*w.left,x.top+=d.top-u.height*w.top,x.right+=d.right-u.width*(1-w.right),x.bottom+=d.bottom-u.height*(1-w.bottom)}f.offset=x},set:function(c){var u=c.coords,f=c.state,C=f.offset,T=Cc(f.options.restriction,c.interaction,u);if(T){var w=oe.xywhToTlbr(T);u.x=Math.max(Math.min(w.right-C.right,u.x),w.left+C.left),u.y=Math.max(Math.min(w.bottom-C.bottom,u.y),w.top+C.top)}},defaults:{restriction:null,elementRect:null,offset:null,endOnly:!1,enabled:!1}};Xe.restrict=Yf;var Ys=(0,cn.makeModifier)(Yf,"restrict");Xe.default=Ys;var Rt={};Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.restrictEdges=Rt.default=void 0;var gl={top:1/0,left:1/0,bottom:-1/0,right:-1/0},Qs={top:-1/0,left:-1/0,bottom:1/0,right:1/0};function Ui(c,u){for(var d=["top","left","bottom","right"],f=0;f<d.length;f++){var g=d[f];g in c||(c[g]=u[g])}return c}var wn={noInner:gl,noOuter:Qs,start:function(c){var u,d=c.interaction,f=c.startOffset,g=c.state,C=g.options;if(C){var T=(0,Xe.getRestrictionRect)(C.offset,d,d.coords.start.page);u=oe.rectToXY(T)}g.offset={top:(u=u||{x:0,y:0}).y+f.top,left:u.x+f.left,bottom:u.y-f.bottom,right:u.x-f.right}},set:function(c){var u=c.coords,d=c.edges,f=c.interaction,g=c.state,C=g.offset,T=g.options;if(d){var w=(0,z.default)({},u),x=(0,Xe.getRestrictionRect)(T.inner,f,w)||{},j=(0,Xe.getRestrictionRect)(T.outer,f,w)||{};Ui(x,gl),Ui(j,Qs),d.top?u.y=Math.min(Math.max(j.top+C.top,w.y),x.top+C.top):d.bottom&&(u.y=Math.max(Math.min(j.bottom+C.bottom,w.y),x.bottom+C.bottom)),d.left?u.x=Math.min(Math.max(j.left+C.left,w.x),x.left+C.left):d.right&&(u.x=Math.max(Math.min(j.right+C.right,w.x),x.right+C.right))}},defaults:{inner:null,outer:null,offset:null,endOnly:!1,enabled:!1}};Rt.restrictEdges=wn;var ml=(0,cn.makeModifier)(wn,"restrictEdges");Rt.default=ml;var hi={};Object.defineProperty(hi,"__esModule",{value:!0}),hi.restrictRect=hi.default=void 0;var Qf=(0,z.default)({get elementRect(){return{top:0,left:0,bottom:1,right:1}},set elementRect(c){}},Xe.restrict.defaults),Lr={start:Xe.restrict.start,set:Xe.restrict.set,defaults:Qf};hi.restrictRect=Lr;var yl=(0,cn.makeModifier)(Lr,"restrictRect");hi.default=yl;var pi={};Object.defineProperty(pi,"__esModule",{value:!0}),pi.restrictSize=pi.default=void 0;var ke={width:-1/0,height:-1/0},yy={width:1/0,height:1/0},vl={start:function(c){return Rt.restrictEdges.start(c)},set:function(c){var u=c.interaction,d=c.state,f=c.rect,g=c.edges,C=d.options;if(g){var T=oe.tlbrToXywh((0,Xe.getRestrictionRect)(C.min,u,c.coords))||ke,w=oe.tlbrToXywh((0,Xe.getRestrictionRect)(C.max,u,c.coords))||yy;d.options={endOnly:C.endOnly,inner:(0,z.default)({},Rt.restrictEdges.noInner),outer:(0,z.default)({},Rt.restrictEdges.noOuter)},g.top?(d.options.inner.top=f.bottom-T.height,d.options.outer.top=f.bottom-w.height):g.bottom&&(d.options.inner.bottom=f.top+T.height,d.options.outer.bottom=f.top+w.height),g.left?(d.options.inner.left=f.right-T.width,d.options.outer.left=f.right-w.width):g.right&&(d.options.inner.right=f.left+T.width,d.options.outer.right=f.left+w.width),Rt.restrictEdges.set(c),d.options=C}},defaults:{min:null,max:null,endOnly:!1,enabled:!1}};pi.restrictSize=vl;var Kf=(0,cn.makeModifier)(vl,"restrictSize");pi.default=Kf;var wc={};Object.defineProperty(wc,"__esModule",{value:!0}),Object.defineProperty(wc,"default",{enumerable:!0,get:function(){return dt.default}});var jr={};Object.defineProperty(jr,"__esModule",{value:!0}),jr.snap=jr.default=void 0;var _l={start:function(c){var u,ne,ie,d=c.interaction,f=c.interactable,g=c.element,C=c.rect,T=c.state,w=c.startOffset,x=T.options,j=x.offsetWithOrigin?(0,oe.rectToXY)((0,oe.resolveRectLike)((ne=c).state.options.origin,null,null,[ie=ne.interaction.element]))||(0,De.default)(ne.interactable,ie,ne.interaction.prepared.name):{x:0,y:0};if("startCoords"===x.offset)u={x:d.coords.start.page.x,y:d.coords.start.page.y};else{var $=(0,oe.resolveRectLike)(x.offset,f,g,[d]);(u=(0,oe.rectToXY)($)||{x:0,y:0}).x+=j.x,u.y+=j.y}var Y=x.relativePoints;T.offsets=C&&Y&&Y.length?Y.map(function(ne,ie){return{index:ie,relativePoint:ne,x:w.left-C.width*ne.x+u.x,y:w.top-C.height*ne.y+u.y}}):[{index:0,relativePoint:null,x:u.x,y:u.y}]},set:function(c){var u=c.interaction,d=c.coords,f=c.state,g=f.options,C=f.offsets,T=(0,De.default)(u.interactable,u.element,u.prepared.name),w=(0,z.default)({},d),x=[];g.offsetWithOrigin||(w.x-=T.x,w.y-=T.y);for(var j=0;j<C.length;j++)for(var $=C[j],Y=w.x-$.x,ne=w.y-$.y,ie=0,te=g.targets.length;ie<te;ie++){var le,ge=g.targets[ie];(le=O.default.func(ge)?ge(Y,ne,u._proxy,$,ie):ge)&&x.push({x:(O.default.number(le.x)?le.x:Y)+$.x,y:(O.default.number(le.y)?le.y:ne)+$.y,range:O.default.number(le.range)?le.range:g.range,source:ge,index:ie,offset:$})}for(var de={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}},Ee=0;Ee<x.length;Ee++){var xe=x[Ee],Ve=xe.range,nt=xe.x-w.x,at=xe.y-w.y,Qe=(0,Jn.default)(nt,at),tt=Qe<=Ve;Ve===1/0&&de.inRange&&de.range!==1/0&&(tt=!1),de.target&&!(tt?de.inRange&&Ve!==1/0?Qe/Ve<de.distance/de.range:Ve===1/0&&de.range!==1/0||Qe<de.distance:!de.inRange&&Qe<de.distance)||(de.target=xe,de.distance=Qe,de.range=Ve,de.inRange=tt,de.delta.x=nt,de.delta.y=at)}return de.inRange&&(d.x=de.target.x,d.y=de.target.y),f.closest=de,de},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!0,origin:null,relativePoints:null,endOnly:!1,enabled:!1}};jr.snap=_l;var Jf=(0,cn.makeModifier)(_l,"snap");jr.default=Jf;var ue={};function Ye(c,u){(null==u||u>c.length)&&(u=c.length);for(var d=0,f=Array(u);d<u;d++)f[d]=c[d];return f}Object.defineProperty(ue,"__esModule",{value:!0}),ue.snapSize=ue.default=void 0;var _o={start:function(c){var u=c.state,d=c.edges,f=u.options;if(!d)return null;c.state={options:{targets:null,relativePoints:[{x:d.left?0:1,y:d.top?0:1}],offset:f.offset||"self",origin:{x:0,y:0},range:f.range}},u.targetFields=u.targetFields||[["width","height"],["x","y"]],jr.snap.start(c),u.offsets=c.state.offsets,c.state=u},set:function(c){var u,f=c.interaction,g=c.state,C=c.coords,T=g.options,w=g.offsets,x={x:C.x-w[0].x,y:C.y-w[0].y};g.options=(0,z.default)({},T),g.options.targets=[];for(var j=0;j<(T.targets||[]).length;j++){var $=(T.targets||[])[j],Y=void 0;if(Y=O.default.func($)?$(x.x,x.y,f):$){for(var ne=0;ne<g.targetFields.length;ne++){var ie=(2,function(de){if(Array.isArray(de))return de}(u=g.targetFields[ne])||function(de,Ee){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(de)){var xe=[],Ve=!0,nt=!1,at=void 0;try{for(var Qe,tt=de[Symbol.iterator]();!(Ve=(Qe=tt.next()).done)&&(xe.push(Qe.value),2!==xe.length);Ve=!0);}catch(Dn){nt=!0,at=Dn}finally{try{Ve||null==tt.return||tt.return()}finally{if(nt)throw at}}return xe}}(u)||function(de,Ee){if(de){if("string"==typeof de)return Ye(de,2);var xe=Object.prototype.toString.call(de).slice(8,-1);return"Object"===xe&&de.constructor&&(xe=de.constructor.name),"Map"===xe||"Set"===xe?Array.from(de):"Arguments"===xe||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(xe)?Ye(de,2):void 0}}(u)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),te=ie[0],le=ie[1];if(te in Y||le in Y){Y.x=Y[te],Y.y=Y[le];break}}g.options.targets.push(Y)}}var ge=jr.snap.set(c);return g.options=T,ge},defaults:{range:1/0,targets:null,offset:null,endOnly:!1,enabled:!1}};ue.snapSize=_o;var zt=(0,cn.makeModifier)(_o,"snapSize");ue.default=zt;var Hi={};Object.defineProperty(Hi,"__esModule",{value:!0}),Hi.snapEdges=Hi.default=void 0;var bo={start:function(c){var u=c.edges;return u?(c.state.targetFields=c.state.targetFields||[[u.left?"left":"right",u.top?"top":"bottom"]],ue.snapSize.start(c)):null},set:ue.snapSize.set,defaults:(0,z.default)((0,Oi.default)(ue.snapSize.defaults),{targets:null,range:null,offset:{x:0,y:0}})};Hi.snapEdges=bo;var br=(0,cn.makeModifier)(bo,"snapEdges");Hi.default=br;var ns={};Object.defineProperty(ns,"__esModule",{value:!0}),Object.defineProperty(ns,"default",{enumerable:!0,get:function(){return dt.default}});var rs={};Object.defineProperty(rs,"__esModule",{value:!0}),Object.defineProperty(rs,"default",{enumerable:!0,get:function(){return dt.default}});var is={};Object.defineProperty(is,"__esModule",{value:!0}),is.default=void 0,is.default={aspectRatio:vo.default,restrictEdges:Rt.default,restrict:Xe.default,restrictRect:hi.default,restrictSize:pi.default,snapEdges:Hi.default,snap:jr.default,snapSize:ue.default,spring:ns.default,avoid:bc.default,transform:rs.default,rubberband:wc.default};var $i={};Object.defineProperty($i,"__esModule",{value:!0}),$i.default=void 0,$i.default={id:"modifiers",install:function(c){var u=c.interactStatic;for(var d in c.usePlugin(cn.default),c.usePlugin(Gs.default),u.modifiers=is.default,is.default){var f=is.default[d],g=f._defaults;g._methods=f._methods,c.defaults.perAction[d]=g}}};var At={};function or(c){return(or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(c)}function zi(c,u){return(zi=Object.setPrototypeOf||function(d,f){return d.__proto__=f,d})(c,u)}function Br(c,u){return!u||"object"!==or(u)&&"function"!=typeof u?En(c):u}function En(c){if(void 0===c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function Js(c){return(Js=Object.setPrototypeOf?Object.getPrototypeOf:function(u){return u.__proto__||Object.getPrototypeOf(u)})(c)}function sr(c,u,d){return u in c?Object.defineProperty(c,u,{value:d,enumerable:!0,configurable:!0,writable:!0}):c[u]=d,c}Object.defineProperty(At,"__esModule",{value:!0}),At.PointerEvent=At.default=void 0;var Zf=function(c){!function(w,x){if("function"!=typeof x&&null!==x)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(x&&x.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),x&&zi(w,x)}(T,c);var d,f,g,C=(f=T,g=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(w){return!1}}(),function(){var w,x=Js(f);if(g){var j=Js(this).constructor;w=Reflect.construct(x,arguments,j)}else w=x.apply(this,arguments);return Br(this,w)});function T(w,x,j,$,Y,ne){var ie;if(function(ge,de){if(!(ge instanceof de))throw new TypeError("Cannot call a class as a function")}(this,T),sr(En(ie=C.call(this,Y)),"type",void 0),sr(En(ie),"originalEvent",void 0),sr(En(ie),"pointerId",void 0),sr(En(ie),"pointerType",void 0),sr(En(ie),"double",void 0),sr(En(ie),"pageX",void 0),sr(En(ie),"pageY",void 0),sr(En(ie),"clientX",void 0),sr(En(ie),"clientY",void 0),sr(En(ie),"dt",void 0),sr(En(ie),"eventable",void 0),Ce.pointerExtend(En(ie),j),j!==x&&Ce.pointerExtend(En(ie),x),ie.timeStamp=ne,ie.originalEvent=j,ie.type=w,ie.pointerId=Ce.getPointerId(x),ie.pointerType=Ce.getPointerType(x),ie.target=$,ie.currentTarget=null,"tap"===w){var te=Y.getPointerIndex(x);ie.dt=ie.timeStamp-Y.pointers[te].downTime,ie.double=!!(Y.prevTap&&"doubletap"!==Y.prevTap.type&&Y.prevTap.target===ie.target&&ie.timeStamp-Y.tapTime<500)}else"doubletap"===w&&(ie.dt=x.timeStamp-Y.tapTime);return ie}return(d=[{key:"_subtractOrigin",value:function(w){var x=w.x,j=w.y;return this.pageX-=x,this.pageY-=j,this.clientX-=x,this.clientY-=j,this}},{key:"_addOrigin",value:function(w){var x=w.x,j=w.y;return this.pageX+=x,this.pageY+=j,this.clientX+=x,this.clientY+=j,this}},{key:"preventDefault",value:function(){this.originalEvent.preventDefault()}}])&&function(c,u){for(var d=0;d<u.length;d++){var f=u[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}(T.prototype,d),T}(Xn.BaseEvent);At.PointerEvent=At.default=Zf;var Gi={};Object.defineProperty(Gi,"__esModule",{value:!0}),Gi.default=void 0;var Co={id:"pointer-events/base",before:["inertia","modifiers","auto-start","actions"],install:function(c){c.pointerEvents=Co,c.defaults.actions.pointerEvents=Co.defaults,(0,z.default)(c.actions.phaselessTypes,Co.types)},listeners:{"interactions:new":function(c){var u=c.interaction;u.prevTap=null,u.tapTime=0},"interactions:update-pointer":function(c){var d=c.pointerInfo;!c.down&&d.hold||(d.hold={duration:1/0,timeout:null})},"interactions:move":function(c,u){var d=c.interaction,f=c.pointer,g=c.event,C=c.eventTarget;c.duplicate||d.pointerIsDown&&!d.pointerWasMoved||(d.pointerIsDown&&Ec(c),Ur({interaction:d,pointer:f,event:g,eventTarget:C,type:"move"},u))},"interactions:down":function(c,u){(function(d,f){for(var g=d.interaction,C=d.pointer,T=d.event,w=d.eventTarget,j=g.pointers[d.pointerIndex].hold,$=b.getPath(w),Y={interaction:g,pointer:C,event:T,eventTarget:w,type:"hold",targets:[],path:$,node:null},ne=0;ne<$.length;ne++)Y.node=$[ne],f.fire("pointerEvents:collect-targets",Y);if(Y.targets.length){for(var te=1/0,le=0;le<Y.targets.length;le++){var ge=Y.targets[le].eventable.options.holdDuration;ge<te&&(te=ge)}j.duration=te,j.timeout=setTimeout(function(){Ur({interaction:g,eventTarget:w,pointer:C,event:T,type:"hold"},f)},te)}})(c,u),Ur(c,u)},"interactions:up":function(c,u){var d,g;Ec(c),Ur(c,u),(g=(d=c).interaction).pointerWasMoved||Ur({interaction:g,eventTarget:d.eventTarget,pointer:d.pointer,event:d.event,type:"tap"},u)},"interactions:cancel":function(c,u){Ec(c),Ur(c,u)}},PointerEvent:At.PointerEvent,fire:Ur,collectEventTargets:Xs,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:{down:!0,move:!0,up:!0,cancel:!0,tap:!0,doubletap:!0,hold:!0}};function Ur(c,u){var d=c.interaction,f=c.pointer,g=c.event,C=c.eventTarget,T=c.type,w=c.targets,x=void 0===w?Xs(c,u):w,j=new At.PointerEvent(T,f,g,C,d,u.now());u.fire("pointerEvents:new",{pointerEvent:j});for(var $={interaction:d,pointer:f,event:g,eventTarget:C,targets:x,type:T,pointerEvent:j},Y=0;Y<x.length;Y++){var ne=x[Y];for(var ie in ne.props||{})j[ie]=ne.props[ie];var te=(0,De.default)(ne.eventable,ne.node);if(j._subtractOrigin(te),j.eventable=ne.eventable,j.currentTarget=ne.node,ne.eventable.fire(j),j._addOrigin(te),j.immediatePropagationStopped||j.propagationStopped&&Y+1<x.length&&x[Y+1].node!==j.currentTarget)break}if(u.fire("pointerEvents:fired",$),"tap"===T){var le=j.double?Ur({interaction:d,pointer:f,event:g,eventTarget:C,type:"doubletap"},u):j;d.prevTap=le,d.tapTime=le.timeStamp}return j}function Xs(c,u){var d=c.interaction,f=c.pointer,g=c.event,C=c.eventTarget,T=c.type,w=d.getPointerIndex(f),x=d.pointers[w];if("tap"===T&&(d.pointerWasMoved||!x||x.downTarget!==C))return[];for(var j=b.getPath(C),$={interaction:d,pointer:f,event:g,eventTarget:C,type:T,path:j,targets:[],node:null},Y=0;Y<j.length;Y++)$.node=j[Y],u.fire("pointerEvents:collect-targets",$);return"hold"===T&&($.targets=$.targets.filter(function(ie){var te;return ie.eventable.options.holdDuration===(null==(te=d.pointers[w])?void 0:te.hold.duration)})),$.targets}function Ec(c){var f=c.interaction.pointers[c.pointerIndex].hold;f&&f.timeout&&(clearTimeout(f.timeout),f.timeout=null)}Gi.default=Co;var Wi={};function wl(c){var u=c.interaction;u.holdIntervalHandle&&(clearInterval(u.holdIntervalHandle),u.holdIntervalHandle=null)}Object.defineProperty(Wi,"__esModule",{value:!0}),Wi.default=void 0;var El={id:"pointer-events/holdRepeat",install:function(c){c.usePlugin(Gi.default);var u=c.pointerEvents;u.defaults.holdRepeatInterval=0,u.types.holdrepeat=c.actions.phaselessTypes.holdrepeat=!0},listeners:["move","up","cancel","endall"].reduce(function(c,u){return c["pointerEvents:".concat(u)]=wl,c},{"pointerEvents:new":function(c){var u=c.pointerEvent;"hold"===u.type&&(u.count=(u.count||0)+1)},"pointerEvents:fired":function(c,u){var d=c.interaction,f=c.pointerEvent,g=c.eventTarget,C=c.targets;if("hold"===f.type&&C.length){var T=C[0].eventable.options.holdRepeatInterval;T<=0||(d.holdIntervalHandle=setTimeout(function(){u.pointerEvents.fire({interaction:d,eventTarget:g,type:"hold",pointer:f,event:f},u)},T))}}})};Wi.default=El;var os={};function Dl(c){return(0,z.default)(this.events.options,c),this}Object.defineProperty(os,"__esModule",{value:!0}),os.default=void 0,os.default={id:"pointer-events/interactableTargets",install:function(c){var u=c.Interactable;u.prototype.pointerEvents=Dl;var d=u.prototype._backCompatOption;u.prototype._backCompatOption=function(f,g){var C=d.call(this,f,g);return C===this&&(this.events.options[f]=g),C}},listeners:{"pointerEvents:collect-targets":function(c,u){var d=c.targets,f=c.node,g=c.type,C=c.eventTarget;u.interactables.forEachMatch(f,function(T){var w=T.events;w.types[g]&&w.types[g].length&&T.testIgnoreAllow(w.options,f,C)&&d.push({node:f,eventable:w,props:{interactable:T}})})},"interactable:new":function(c){var u=c.interactable;u.events.getRect=function(d){return u.getRect(d)}},"interactable:set":function(c,u){var d=c.interactable,f=c.options;(0,z.default)(d.events.options,u.pointerEvents.defaults),(0,z.default)(d.events.options,f.pointerEvents||{})}}};var ea={};Object.defineProperty(ea,"__esModule",{value:!0}),ea.default=void 0,ea.default={id:"pointer-events",install:function(c){c.usePlugin(Gi),c.usePlugin(Wi.default),c.usePlugin(os.default)}};var Gt={};function Hr(c){var u=c.Interactable;c.actions.phases.reflow=!0,u.prototype.reflow=function(d){return function(f,g,C){for(var T=O.default.string(f.target)?Je.from(f._context.querySelectorAll(f.target)):[f.target],w=C.window.Promise,x=w?[]:null,j=function(){var Y=T[$],ne=f.getRect(Y);if(!ne)return"break";var ie=Je.find(C.interactions.list,function(Ee){return Ee.interacting()&&Ee.interactable===f&&Ee.element===Y&&Ee.prepared.name===g.name}),te=void 0;if(ie)ie.move(),x&&(te=ie._reflowPromise||new w(function(Ee){ie._reflowResolve=Ee}));else{var le=(0,oe.tlbrToXywh)(ne),ge={page:{x:le.x,y:le.y},client:{x:le.x,y:le.y},timeStamp:C.now()},de=Ce.coordsToEvent(ge);te=function(Ee,xe,Ve,nt,at){var Qe=Ee.interactions.new({pointerType:"reflow"}),tt={interaction:Qe,event:at,pointer:at,eventTarget:Ve,phase:"reflow"};Qe.interactable=xe,Qe.element=Ve,Qe.prevEvent=at,Qe.updatePointer(at,at,Ve,!0),Ce.setZeroCoords(Qe.coords.delta),(0,zn.copyAction)(Qe.prepared,nt),Qe._doPhase(tt);var Dn=Ee.window.Promise,Yn=Dn?new Dn(function(Ml){Qe._reflowResolve=Ml}):void 0;return Qe._reflowPromise=Yn,Qe.start(nt,xe,Ve),Qe._interacting?(Qe.move(tt),Qe.end(at)):(Qe.stop(),Qe._reflowResolve()),Qe.removePointer(at,at),Yn}(C,f,Y,g,de)}x&&x.push(te)},$=0;$<T.length&&"break"!==j();$++);return x&&w.all(x).then(function(){return f})}(this,d,c)}}Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.install=Hr,Gt.default=void 0,Gt.default={id:"reflow",install:Hr,listeners:{"interactions:stop":function(c,u){var d=c.interaction;"reflow"===d.pointerType&&(d._reflowResolve&&d._reflowResolve(),Je.remove(u.interactions.list,d))}}};var qn={exports:{}};function Sl(c){return(Sl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(c)}if(Object.defineProperty(qn.exports,"__esModule",{value:!0}),qn.exports.default=void 0,mn.default.use(Ft.default),mn.default.use(di.default),mn.default.use(ea.default),mn.default.use(Vt.default),mn.default.use($i.default),mn.default.use(Te.default),mn.default.use(ks.default),mn.default.use(yr.default),mn.default.use(Gt.default),qn.exports.default=mn.default,"object"===Sl(qn)&&qn)try{qn.exports=mn.default}catch(c){}mn.default.default=mn.default,qn=qn.exports;var qi={exports:{}};function Tl(c){return(Tl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(c)}if(Object.defineProperty(qi.exports,"__esModule",{value:!0}),qi.exports.default=void 0,qi.exports.default=qn.default,"object"===Tl(qi)&&qi)try{qi.exports=qn.default}catch(c){}return qn.default.default=qn.default,qi.exports}()},686:function(gn,pt,Fe){var se,we;void 0!==(we="function"==typeof(se=function(X){"use strict";var L,_,F={template:"[%t] %l:",levelFormatter:function(I){return I.toUpperCase()},nameFormatter:function(I){return I||"root"},timestampFormatter:function(I){return I.toTimeString().replace(/.*(\d{2}:\d{2}:\d{2}).*/,"$1")},format:void 0},U={},V={reg:function(I){if(!I||!I.getLogger)throw new TypeError("Argument is not a root logger");L=I},apply:function(I,A){if(!I||!I.setLevel)throw new TypeError("Argument is not a logger");var M=I.methodFactory,S=I.name||"",D=U[S]||U[""]||F;return U[S]||(I.methodFactory=function(y,v,p){var b=M(y,v,p),R=U[p]||U[""],q=-1!==R.template.indexOf("%t"),W=-1!==R.template.indexOf("%l"),Q=-1!==R.template.indexOf("%n");return function(){for(var J="",ee=arguments.length,z=Array(ee),oe=0;oe<ee;oe++)z[oe]=arguments[oe];if(S||!U[p]){var me=R.timestampFormatter(new Date),pe=R.levelFormatter(y),De=R.nameFormatter(p);R.format?J+=R.format(pe,De,me):(J+=R.template,q&&(J=J.replace(/%t/,me)),W&&(J=J.replace(/%l/,pe)),Q&&(J=J.replace(/%n/,De))),z.length&&"string"==typeof z[0]?z[0]=J+" "+z[0]:z.unshift(J)}b.apply(void 0,z)}}),(A=A||{}).template&&(A.format=void 0),U[S]=function(I){for(var S,A=1,M=arguments.length;A<M;A++)for(S in arguments[A])Object.prototype.hasOwnProperty.call(arguments[A],S)&&(I[S]=arguments[A][S]);return I}({},D,A),I.setLevel(I.getLevel()),L||I.warn("It is necessary to call the function reg() of loglevel-plugin-prefix before calling apply. From the next release, it will throw an error. See more: https://github.com/kutuluk/loglevel-plugin-prefix/blob/master/README.md"),I}};return X&&(_=X.prefix,V.noConflict=function(){return X.prefix===V&&(X.prefix=_),V}),V})?se.call(pt,Fe,pt,gn):se)&&(gn.exports=we)},330:function(gn,pt,Fe){var se,we;!function(X,O){"use strict";void 0!==(we="function"==typeof(se=function(){var X=function(){},O="undefined",F=typeof window!==O&&typeof window.navigator!==O&&/Trident\/|MSIE /.test(window.navigator.userAgent),L=["trace","debug","info","warn","error"];function U(P,y){var v=P[y];if("function"==typeof v.bind)return v.bind(P);try{return Function.prototype.bind.call(v,P)}catch(p){return function(){return Function.prototype.apply.apply(v,[P,arguments])}}}function G(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function B(P){return"debug"===P&&(P="log"),typeof console!==O&&("trace"===P&&F?G:void 0!==console[P]?U(console,P):void 0!==console.log?U(console,"log"):X)}function V(P,y){for(var v=0;v<L.length;v++){var p=L[v];this[p]=v<P?X:this.methodFactory(p,P,y)}this.log=this.debug}function _(P,y,v){return function(){typeof console!==O&&(V.call(this,y,v),this[P].apply(this,arguments))}}function I(P,y,v){return B(P)||_.apply(this,arguments)}function A(P,y,v){var b,p=this,R="loglevel";function W(){var J;if(typeof window!==O&&R){try{J=window.localStorage[R]}catch(oe){}if(typeof J===O)try{var ee=window.document.cookie,z=ee.indexOf(encodeURIComponent(R)+"=");-1!==z&&(J=/^([^;]+)/.exec(ee.slice(z))[1])}catch(oe){}return void 0===p.levels[J]&&(J=void 0),J}}"string"==typeof P?R+=":"+P:"symbol"==typeof P&&(R=void 0),p.name=P,p.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},p.methodFactory=v||I,p.getLevel=function(){return b},p.setLevel=function(J,ee){if("string"==typeof J&&void 0!==p.levels[J.toUpperCase()]&&(J=p.levels[J.toUpperCase()]),!("number"==typeof J&&J>=0&&J<=p.levels.SILENT))throw"log.setLevel() called with invalid level: "+J;if(b=J,!1!==ee&&function(J){var ee=(L[J]||"silent").toUpperCase();if(typeof window!==O&&R){try{return void(window.localStorage[R]=ee)}catch(z){}try{window.document.cookie=encodeURIComponent(R)+"="+ee+";"}catch(z){}}}(J),V.call(p,J,P),typeof console===O&&J<p.levels.SILENT)return"No console available for logging"},p.setDefaultLevel=function(J){W()||p.setLevel(J,!1)},p.enableAll=function(J){p.setLevel(p.levels.TRACE,J)},p.disableAll=function(J){p.setLevel(p.levels.SILENT,J)};var Q=W();null==Q&&(Q=null==y?"WARN":y),p.setLevel(Q,!1)}var M=new A,S={};M.getLogger=function(y){if("symbol"!=typeof y&&"string"!=typeof y||""===y)throw new TypeError("You must supply a name when creating a logger.");var v=S[y];return v||(v=S[y]=new A(y,M.getLevel(),M.methodFactory)),v};var D=typeof window!==O?window.log:void 0;return M.noConflict=function(){return typeof window!==O&&window.log===M&&(window.log=D),M},M.getLoggers=function(){return S},M.default=M,M})?se.call(pt,Fe,pt,gn):se)&&(gn.exports=we)}()},805:(gn,pt,Fe)=>{parcelRequire=function(se,we,X,O){var F,L="function"==typeof parcelRequire&&parcelRequire;function G(_,I){if(!we[_]){if(!se[_]){var A="function"==typeof parcelRequire&&parcelRequire;if(!I&&A)return A(_,!0);if(L)return L(_,!0);if("string"==typeof _)return Fe(784)(_);var M=new Error("Cannot find module '"+_+"'");throw M.code="MODULE_NOT_FOUND",M}D.resolve=function(P){return se[_][1][P]||P},D.cache={};var S=we[_]=new G.Module(_);se[_][0].call(S.exports,D,S,S.exports,this)}return we[_].exports;function D(P){return G(D.resolve(P))}}G.isParcelRequire=!0,G.Module=function(_){this.id=_,this.bundle=G,this.exports={}},G.modules=se,G.cache=we,G.parent=L,G.register=function(_,I){se[_]=[function(A,M){M.exports=I},{}]};for(var B=0;B<X.length;B++)try{G(X[B])}catch(_){F||(F=_)}if(X.length){var V=G(X[X.length-1]);gn.exports=V}if(parcelRequire=G,F)throw F;return G}({EgBh:[function(se,we,X){var O={};O.useBlobBuilder=function(){try{return new Blob([]),!1}catch(U){return!0}}(),O.useArrayBufferView=!O.useBlobBuilder&&function(){try{return 0===new Blob([new Uint8Array([])]).size}catch(U){return!0}}(),we.exports.binaryFeatures=O;var F=we.exports.BlobBuilder;function L(){this._pieces=[],this._parts=[]}"undefined"!=typeof window&&(F=we.exports.BlobBuilder=window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder||window.BlobBuilder),L.prototype.append=function(U){"number"==typeof U?this._pieces.push(U):(this.flush(),this._parts.push(U))},L.prototype.flush=function(){if(this._pieces.length>0){var U=new Uint8Array(this._pieces);O.useArrayBufferView||(U=U.buffer),this._parts.push(U),this._pieces=[]}},L.prototype.getBuffer=function(){if(this.flush(),O.useBlobBuilder){for(var U=new F,G=0,B=this._parts.length;G<B;G++)U.append(this._parts[G]);return U.getBlob()}return new Blob(this._parts)},we.exports.BufferBuilder=L},{}],kdPp:[function(se,we,X){var O=se("./bufferbuilder").BufferBuilder,F=se("./bufferbuilder").binaryFeatures;function U(_){this.index=0,this.dataBuffer=_,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}function G(){this.bufferBuilder=new O}function B(_){var I=_.charCodeAt(0);return I<=2047?"00":I<=65535?"000":I<=2097151?"0000":I<=67108863?"00000":"000000"}we.exports={unpack:function(_){return new U(_).unpack()},pack:function(_){var I=new G;return I.pack(_),I.getBuffer()}},U.prototype.unpack=function(){var _,I=this.unpack_uint8();if(I<128)return I;if((224^I)<32)return(224^I)-32;if((_=160^I)<=15)return this.unpack_raw(_);if((_=176^I)<=15)return this.unpack_string(_);if((_=144^I)<=15)return this.unpack_array(_);if((_=128^I)<=15)return this.unpack_map(_);switch(I){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:case 213:case 214:case 215:return;case 216:return _=this.unpack_uint16(),this.unpack_string(_);case 217:return _=this.unpack_uint32(),this.unpack_string(_);case 218:return _=this.unpack_uint16(),this.unpack_raw(_);case 219:return _=this.unpack_uint32(),this.unpack_raw(_);case 220:return _=this.unpack_uint16(),this.unpack_array(_);case 221:return _=this.unpack_uint32(),this.unpack_array(_);case 222:return _=this.unpack_uint16(),this.unpack_map(_);case 223:return _=this.unpack_uint32(),this.unpack_map(_)}},U.prototype.unpack_uint8=function(){var _=255&this.dataView[this.index];return this.index++,_},U.prototype.unpack_uint16=function(){var _=this.read(2),I=256*(255&_[0])+(255&_[1]);return this.index+=2,I},U.prototype.unpack_uint32=function(){var _=this.read(4),I=256*(256*(256*_[0]+_[1])+_[2])+_[3];return this.index+=4,I},U.prototype.unpack_uint64=function(){var _=this.read(8),I=256*(256*(256*(256*(256*(256*(256*_[0]+_[1])+_[2])+_[3])+_[4])+_[5])+_[6])+_[7];return this.index+=8,I},U.prototype.unpack_int8=function(){var _=this.unpack_uint8();return _<128?_:_-256},U.prototype.unpack_int16=function(){var _=this.unpack_uint16();return _<32768?_:_-65536},U.prototype.unpack_int32=function(){var _=this.unpack_uint32();return _<Math.pow(2,31)?_:_-Math.pow(2,32)},U.prototype.unpack_int64=function(){var _=this.unpack_uint64();return _<Math.pow(2,63)?_:_-Math.pow(2,64)},U.prototype.unpack_raw=function(_){if(this.length<this.index+_)throw new Error("BinaryPackFailure: index is out of range "+this.index+" "+_+" "+this.length);var I=this.dataBuffer.slice(this.index,this.index+_);return this.index+=_,I},U.prototype.unpack_string=function(_){for(var I,A,M=this.read(_),S=0,D="";S<_;)(I=M[S])<128?(D+=String.fromCharCode(I),S++):(192^I)<32?(A=(192^I)<<6|63&M[S+1],D+=String.fromCharCode(A),S+=2):(A=(15&I)<<12|(63&M[S+1])<<6|63&M[S+2],D+=String.fromCharCode(A),S+=3);return this.index+=_,D},U.prototype.unpack_array=function(_){for(var I=new Array(_),A=0;A<_;A++)I[A]=this.unpack();return I},U.prototype.unpack_map=function(_){for(var I={},A=0;A<_;A++){var M=this.unpack(),S=this.unpack();I[M]=S}return I},U.prototype.unpack_float=function(){var _=this.unpack_uint32();return(_>>31==0?1:-1)*(8388607&_|8388608)*Math.pow(2,(_>>23&255)-127-23)},U.prototype.unpack_double=function(){var _=this.unpack_uint32(),I=this.unpack_uint32(),A=(_>>20&2047)-1023;return(_>>31==0?1:-1)*((1048575&_|1048576)*Math.pow(2,A-20)+I*Math.pow(2,A-52))},U.prototype.read=function(_){var I=this.index;if(I+_<=this.length)return this.dataView.subarray(I,I+_);throw new Error("BinaryPackFailure: read index out of range")},G.prototype.getBuffer=function(){return this.bufferBuilder.getBuffer()},G.prototype.pack=function(_){var I=typeof _;if("string"===I)this.pack_string(_);else if("number"===I)Math.floor(_)===_?this.pack_integer(_):this.pack_double(_);else if("boolean"===I)!0===_?this.bufferBuilder.append(195):!1===_&&this.bufferBuilder.append(194);else if("undefined"===I)this.bufferBuilder.append(192);else{if("object"!==I)throw new Error('Type "'+I+'" not yet supported');if(null===_)this.bufferBuilder.append(192);else{var A=_.constructor;if(A==Array)this.pack_array(_);else if(A==Blob||A==File||_ instanceof Blob||_ instanceof File)this.pack_bin(_);else if(A==ArrayBuffer)this.pack_bin(F.useArrayBufferView?new Uint8Array(_):_);else if("BYTES_PER_ELEMENT"in _)this.pack_bin(F.useArrayBufferView?new Uint8Array(_.buffer):_.buffer);else if(A==Object||A.toString().startsWith("class"))this.pack_object(_);else if(A==Date)this.pack_string(_.toString());else{if("function"!=typeof _.toBinaryPack)throw new Error('Type "'+A.toString()+'" not yet supported');this.bufferBuilder.append(_.toBinaryPack())}}}this.bufferBuilder.flush()},G.prototype.pack_bin=function(_){var I=_.length||_.byteLength||_.size;if(I<=15)this.pack_uint8(160+I);else if(I<=65535)this.bufferBuilder.append(218),this.pack_uint16(I);else{if(!(I<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(219),this.pack_uint32(I)}this.bufferBuilder.append(_)},G.prototype.pack_string=function(_){var I=function(_){return _.length>600?new Blob([_]).size:_.replace(/[^\u0000-\u007F]/g,B).length}(_);if(I<=15)this.pack_uint8(176+I);else if(I<=65535)this.bufferBuilder.append(216),this.pack_uint16(I);else{if(!(I<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(217),this.pack_uint32(I)}this.bufferBuilder.append(_)},G.prototype.pack_array=function(_){var I=_.length;if(I<=15)this.pack_uint8(144+I);else if(I<=65535)this.bufferBuilder.append(220),this.pack_uint16(I);else{if(!(I<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(221),this.pack_uint32(I)}for(var A=0;A<I;A++)this.pack(_[A])},G.prototype.pack_integer=function(_){if(_>=-32&&_<=127)this.bufferBuilder.append(255&_);else if(_>=0&&_<=255)this.bufferBuilder.append(204),this.pack_uint8(_);else if(_>=-128&&_<=127)this.bufferBuilder.append(208),this.pack_int8(_);else if(_>=0&&_<=65535)this.bufferBuilder.append(205),this.pack_uint16(_);else if(_>=-32768&&_<=32767)this.bufferBuilder.append(209),this.pack_int16(_);else if(_>=0&&_<=4294967295)this.bufferBuilder.append(206),this.pack_uint32(_);else if(_>=-2147483648&&_<=2147483647)this.bufferBuilder.append(210),this.pack_int32(_);else if(_>=-0x8000000000000000&&_<=0x8000000000000000)this.bufferBuilder.append(211),this.pack_int64(_);else{if(!(_>=0&&_<=0x10000000000000000))throw new Error("Invalid integer");this.bufferBuilder.append(207),this.pack_uint64(_)}},G.prototype.pack_double=function(_){var I=0;_<0&&(I=1,_=-_);var A=Math.floor(Math.log(_)/Math.LN2),M=_/Math.pow(2,A)-1,S=Math.floor(M*Math.pow(2,52)),D=Math.pow(2,32),P=I<<31|A+1023<<20|S/D&1048575,y=S%D;this.bufferBuilder.append(203),this.pack_int32(P),this.pack_int32(y)},G.prototype.pack_object=function(_){var I=Object.keys(_).length;if(I<=15)this.pack_uint8(128+I);else if(I<=65535)this.bufferBuilder.append(222),this.pack_uint16(I);else{if(!(I<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(223),this.pack_uint32(I)}for(var A in _)_.hasOwnProperty(A)&&(this.pack(A),this.pack(_[A]))},G.prototype.pack_uint8=function(_){this.bufferBuilder.append(_)},G.prototype.pack_uint16=function(_){this.bufferBuilder.append(_>>8),this.bufferBuilder.append(255&_)},G.prototype.pack_uint32=function(_){var I=4294967295&_;this.bufferBuilder.append((4278190080&I)>>>24),this.bufferBuilder.append((16711680&I)>>>16),this.bufferBuilder.append((65280&I)>>>8),this.bufferBuilder.append(255&I)},G.prototype.pack_uint64=function(_){var I=_/Math.pow(2,32),A=_%Math.pow(2,32);this.bufferBuilder.append((4278190080&I)>>>24),this.bufferBuilder.append((16711680&I)>>>16),this.bufferBuilder.append((65280&I)>>>8),this.bufferBuilder.append(255&I),this.bufferBuilder.append((4278190080&A)>>>24),this.bufferBuilder.append((16711680&A)>>>16),this.bufferBuilder.append((65280&A)>>>8),this.bufferBuilder.append(255&A)},G.prototype.pack_int8=function(_){this.bufferBuilder.append(255&_)},G.prototype.pack_int16=function(_){this.bufferBuilder.append((65280&_)>>8),this.bufferBuilder.append(255&_)},G.prototype.pack_int32=function(_){this.bufferBuilder.append(_>>>24&255),this.bufferBuilder.append((16711680&_)>>>16),this.bufferBuilder.append((65280&_)>>>8),this.bufferBuilder.append(255&_)},G.prototype.pack_int64=function(_){var I=Math.floor(_/Math.pow(2,32)),A=_%Math.pow(2,32);this.bufferBuilder.append((4278190080&I)>>>24),this.bufferBuilder.append((16711680&I)>>>16),this.bufferBuilder.append((65280&I)>>>8),this.bufferBuilder.append(255&I),this.bufferBuilder.append((4278190080&A)>>>24),this.bufferBuilder.append((16711680&A)>>>16),this.bufferBuilder.append((65280&A)>>>8),this.bufferBuilder.append(255&A)}},{"./bufferbuilder":"EgBh"}],iSxC:[function(se,we,X){"use strict";function F(v){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(p){return typeof p}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(v)}Object.defineProperty(X,"__esModule",{value:!0}),X.extractVersion=G,X.wrapPeerConnectionEvent=function(v,p,b){if(v.RTCPeerConnection){var R=v.RTCPeerConnection.prototype,q=R.addEventListener;R.addEventListener=function(Q,J){if(Q!==p)return q.apply(this,arguments);var ee=function(z){var oe=b(z);oe&&J(oe)};return this._eventMap=this._eventMap||{},this._eventMap[J]=ee,q.apply(this,[Q,ee])};var W=R.removeEventListener;R.removeEventListener=function(Q,J){if(Q!==p||!this._eventMap||!this._eventMap[J])return W.apply(this,arguments);var ee=this._eventMap[J];return delete this._eventMap[J],W.apply(this,[Q,ee])},Object.defineProperty(R,"on"+p,{get:function(){return this["_on"+p]},set:function(Q){this["_on"+p]&&(this.removeEventListener(p,this["_on"+p]),delete this["_on"+p]),Q&&this.addEventListener(p,this["_on"+p]=Q)},enumerable:!0,configurable:!0})}},X.disableLog=function(v){return"boolean"!=typeof v?new Error("Argument type: "+F(v)+". Please use a boolean."):(L=v,v?"adapter.js logging disabled":"adapter.js logging enabled")},X.disableWarnings=function(v){return"boolean"!=typeof v?new Error("Argument type: "+F(v)+". Please use a boolean."):(U=!v,"adapter.js deprecation warnings "+(v?"disabled":"enabled"))},X.log=function(){if("object"===("undefined"==typeof window?"undefined":F(window))){if(L)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}},X.deprecated=function(v,p){U&&console.warn(v+" is deprecated, please use "+p+" instead.")},X.detectBrowser=function(v){var{navigator:p}=v,b={browser:null,version:null};if(void 0===v||!v.navigator)return b.browser="Not a browser.",b;if(p.mozGetUserMedia)b.browser="firefox",b.version=G(p.userAgent,/Firefox\/(\d+)\./,1);else if(p.webkitGetUserMedia||!1===v.isSecureContext&&v.webkitRTCPeerConnection&&!v.RTCIceGatherer)b.browser="chrome",b.version=G(p.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(p.mediaDevices&&p.userAgent.match(/Edge\/(\d+).(\d+)$/))b.browser="edge",b.version=G(p.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!v.RTCPeerConnection||!p.userAgent.match(/AppleWebKit\/(\d+)\./))return b.browser="Not a supported browser.",b;b.browser="safari",b.version=G(p.userAgent,/AppleWebKit\/(\d+)\./,1),b.supportsUnifiedPlan=v.RTCRtpTransceiver&&"currentDirection"in v.RTCRtpTransceiver.prototype}return b},X.compactObject=function D(v){return S(v)?Object.keys(v).reduce(function(p,b){var R=S(v[b]),q=R?D(v[b]):v[b],W=R&&!Object.keys(q).length;return void 0===q||W?p:Object.assign(p,function(v,p,b){return p in v?Object.defineProperty(v,p,{value:b,enumerable:!0,configurable:!0,writable:!0}):v[p]=b,v}({},b,q))},{}):v},X.walkStats=P,X.filterStats=function(v,p,b){var R=b?"outbound-rtp":"inbound-rtp",q=new Map;if(null===p)return q;var W=[];return v.forEach(function(Q){"track"===Q.type&&Q.trackIdentifier===p.id&&W.push(Q)}),W.forEach(function(Q){v.forEach(function(J){J.type===R&&J.trackId===Q.id&&P(v,J,q)})}),q};var L=!0,U=!0;function G(v,p,b){var R=v.match(p);return R&&R.length>=b&&parseInt(R[b],10)}function S(v){return"[object Object]"===Object.prototype.toString.call(v)}function P(v,p,b){p&&!b.has(p.id)&&(b.set(p.id,p),Object.keys(p).forEach(function(R){R.endsWith("Id")?P(v,v.get(p[R]),b):R.endsWith("Ids")&&p[R].forEach(function(q){P(v,v.get(q),b)})}))}},{}],s6SN:[function(se,we,X){"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.shimGetUserMedia=function(V){var _=V&&V.navigator;if(_.mediaDevices){var I=O.detectBrowser(V),A=function(P){if("object"!==U(P)||P.mandatory||P.optional)return P;var y={};return Object.keys(P).forEach(function(v){if("require"!==v&&"advanced"!==v&&"mediaSource"!==v){var p="object"===U(P[v])?P[v]:{ideal:P[v]};void 0!==p.exact&&"number"==typeof p.exact&&(p.min=p.max=p.exact);var b=function(q,W){return q?q+W.charAt(0).toUpperCase()+W.slice(1):"deviceId"===W?"sourceId":W};if(void 0!==p.ideal){y.optional=y.optional||[];var R={};"number"==typeof p.ideal?(R[b("min",v)]=p.ideal,y.optional.push(R),(R={})[b("max",v)]=p.ideal,y.optional.push(R)):(R[b("",v)]=p.ideal,y.optional.push(R))}void 0!==p.exact&&"number"!=typeof p.exact?(y.mandatory=y.mandatory||{},y.mandatory[b("",v)]=p.exact):["min","max"].forEach(function(q){void 0!==p[q]&&(y.mandatory=y.mandatory||{},y.mandatory[b(q,v)]=p[q])})}}),P.advanced&&(y.optional=(y.optional||[]).concat(P.advanced)),y},M=function(P,y){if(I.version>=61)return y(P);if((P=JSON.parse(JSON.stringify(P)))&&"object"===U(P.audio)){var v=function(q,W,Q){W in q&&!(Q in q)&&(q[Q]=q[W],delete q[W])};v((P=JSON.parse(JSON.stringify(P))).audio,"autoGainControl","googAutoGainControl"),v(P.audio,"noiseSuppression","googNoiseSuppression"),P.audio=A(P.audio)}if(P&&"object"===U(P.video)){var p=P.video.facingMode;p=p&&("object"===U(p)?p:{ideal:p});var b,R=I.version<66;if(p&&("user"===p.exact||"environment"===p.exact||"user"===p.ideal||"environment"===p.ideal)&&(!_.mediaDevices.getSupportedConstraints||!_.mediaDevices.getSupportedConstraints().facingMode||R)&&(delete P.video.facingMode,"environment"===p.exact||"environment"===p.ideal?b=["back","rear"]:"user"!==p.exact&&"user"!==p.ideal||(b=["front"]),b))return _.mediaDevices.enumerateDevices().then(function(q){var W=(q=q.filter(function(Q){return"videoinput"===Q.kind})).find(function(Q){return b.some(function(J){return Q.label.toLowerCase().includes(J)})});return!W&&q.length&&b.includes("back")&&(W=q[q.length-1]),W&&(P.video.deviceId=p.exact?{exact:W.deviceId}:{ideal:W.deviceId}),P.video=A(P.video),G("chrome: "+JSON.stringify(P)),y(P)});P.video=A(P.video)}return G("chrome: "+JSON.stringify(P)),y(P)},S=function(P){return I.version>=64?P:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[P.name]||P.name,message:P.message,constraint:P.constraint||P.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};if(_.getUserMedia=function(P,y,v){M(P,function(p){_.webkitGetUserMedia(p,y,function(b){v&&v(S(b))})})}.bind(_),_.mediaDevices.getUserMedia){var D=_.mediaDevices.getUserMedia.bind(_.mediaDevices);_.mediaDevices.getUserMedia=function(P){return M(P,function(y){return D(y).then(function(v){if(y.audio&&!v.getAudioTracks().length||y.video&&!v.getVideoTracks().length)throw v.getTracks().forEach(function(p){p.stop()}),new DOMException("","NotFoundError");return v},function(v){return Promise.reject(S(v))})})}}}};var O=function(V){if(V&&V.__esModule)return V;if(null===V||"object"!=typeof V&&"function"!=typeof V)return{default:V};var _=F();if(_&&_.has(V))return _.get(V);var I={},A=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var M in V)if(Object.prototype.hasOwnProperty.call(V,M)){var S=A?Object.getOwnPropertyDescriptor(V,M):null;S&&(S.get||S.set)?Object.defineProperty(I,M,S):I[M]=V[M]}return I.default=V,_&&_.set(V,I),I}(se("../utils.js"));function F(){if("function"!=typeof WeakMap)return null;var V=new WeakMap;return F=function(){return V},V}function U(V){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(_){return typeof _}:function(_){return _&&"function"==typeof Symbol&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(V)}var G=O.log},{"../utils.js":"iSxC"}],VHa8:[function(se,we,X){"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.shimGetDisplayMedia=function(F,L){F.navigator.mediaDevices&&"getDisplayMedia"in F.navigator.mediaDevices||F.navigator.mediaDevices&&("function"==typeof L?F.navigator.mediaDevices.getDisplayMedia=function(U){return L(U).then(function(G){var B=U.video&&U.video.width,V=U.video&&U.video.height;return U.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:G,maxFrameRate:U.video&&U.video.frameRate||3}},B&&(U.video.mandatory.maxWidth=B),V&&(U.video.mandatory.maxHeight=V),F.navigator.mediaDevices.getUserMedia(U)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}},{}],uI5X:[function(se,we,X){"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.shimMediaStream=function(p){p.MediaStream=p.MediaStream||p.webkitMediaStream},X.shimOnTrack=function(p){if("object"!==V(p)||!p.RTCPeerConnection||"ontrack"in p.RTCPeerConnection.prototype)O.wrapPeerConnectionEvent(p,"track",function(R){return R.transceiver||Object.defineProperty(R,"transceiver",{value:{receiver:R.receiver}}),R});else{Object.defineProperty(p.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(R){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=R)},enumerable:!0,configurable:!0});var b=p.RTCPeerConnection.prototype.setRemoteDescription;p.RTCPeerConnection.prototype.setRemoteDescription=function(){var R=this;return this._ontrackpoly||(this._ontrackpoly=function(q){q.stream.addEventListener("addtrack",function(W){var Q;Q=p.RTCPeerConnection.prototype.getReceivers?R.getReceivers().find(function(ee){return ee.track&&ee.track.id===W.track.id}):{track:W.track};var J=new Event("track");J.track=W.track,J.receiver=Q,J.transceiver={receiver:Q},J.streams=[q.stream],R.dispatchEvent(J)}),q.stream.getTracks().forEach(function(W){var Q;Q=p.RTCPeerConnection.prototype.getReceivers?R.getReceivers().find(function(ee){return ee.track&&ee.track.id===W.id}):{track:W};var J=new Event("track");J.track=W,J.receiver=Q,J.transceiver={receiver:Q},J.streams=[q.stream],R.dispatchEvent(J)})},this.addEventListener("addstream",this._ontrackpoly)),b.apply(this,arguments)}}},X.shimGetSendersWithDtmf=function(p){if("object"===V(p)&&p.RTCPeerConnection&&!("getSenders"in p.RTCPeerConnection.prototype)&&"createDTMFSender"in p.RTCPeerConnection.prototype){var b=function(ee,z){return{track:z,get dtmf(){return void 0===this._dtmf&&(this._dtmf="audio"===z.kind?ee.createDTMFSender(z):null),this._dtmf},_pc:ee}};if(!p.RTCPeerConnection.prototype.getSenders){p.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var R=p.RTCPeerConnection.prototype.addTrack;p.RTCPeerConnection.prototype.addTrack=function(ee,z){var oe=R.apply(this,arguments);return oe||(oe=b(this,ee),this._senders.push(oe)),oe};var q=p.RTCPeerConnection.prototype.removeTrack;p.RTCPeerConnection.prototype.removeTrack=function(ee){q.apply(this,arguments);var z=this._senders.indexOf(ee);-1!==z&&this._senders.splice(z,1)}}var W=p.RTCPeerConnection.prototype.addStream;p.RTCPeerConnection.prototype.addStream=function(ee){var z=this;this._senders=this._senders||[],W.apply(this,[ee]),ee.getTracks().forEach(function(oe){z._senders.push(b(z,oe))})};var Q=p.RTCPeerConnection.prototype.removeStream;p.RTCPeerConnection.prototype.removeStream=function(ee){var z=this;this._senders=this._senders||[],Q.apply(this,[ee]),ee.getTracks().forEach(function(oe){var me=z._senders.find(function(pe){return pe.track===oe});me&&z._senders.splice(z._senders.indexOf(me),1)})}}else if("object"===V(p)&&p.RTCPeerConnection&&"getSenders"in p.RTCPeerConnection.prototype&&"createDTMFSender"in p.RTCPeerConnection.prototype&&p.RTCRtpSender&&!("dtmf"in p.RTCRtpSender.prototype)){var J=p.RTCPeerConnection.prototype.getSenders;p.RTCPeerConnection.prototype.getSenders=function(){var ee=this,z=J.apply(this,[]);return z.forEach(function(oe){return oe._pc=ee}),z},Object.defineProperty(p.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&(this._dtmf="audio"===this.track.kind?this._pc.createDTMFSender(this.track):null),this._dtmf}})}},X.shimGetStats=function(p){if(p.RTCPeerConnection){var b=p.RTCPeerConnection.prototype.getStats;p.RTCPeerConnection.prototype.getStats=function(){var R=this,[q,W,Q]=arguments;if(arguments.length>0&&"function"==typeof q)return b.apply(this,arguments);if(0===b.length&&(0===arguments.length||"function"!=typeof q))return b.apply(this,[]);var J=function(z){var oe={};return z.result().forEach(function(me){var pe={id:me.id,timestamp:me.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[me.type]||me.type};me.names().forEach(function(De){pe[De]=me.stat(De)}),oe[pe.id]=pe}),oe},ee=function(z){return new Map(Object.keys(z).map(function(oe){return[oe,z[oe]]}))};return arguments.length>=2?b.apply(this,[function(z){W(ee(J(z)))},q]):new Promise(function(z,oe){b.apply(R,[function(me){z(ee(J(me)))},oe])}).then(W,Q)}}},X.shimSenderReceiverGetStats=function(p){if("object"===V(p)&&p.RTCPeerConnection&&p.RTCRtpSender&&p.RTCRtpReceiver){if(!("getStats"in p.RTCRtpSender.prototype)){var b=p.RTCPeerConnection.prototype.getSenders;b&&(p.RTCPeerConnection.prototype.getSenders=function(){var Q=this,J=b.apply(this,[]);return J.forEach(function(ee){return ee._pc=Q}),J});var R=p.RTCPeerConnection.prototype.addTrack;R&&(p.RTCPeerConnection.prototype.addTrack=function(){var Q=R.apply(this,arguments);return Q._pc=this,Q}),p.RTCRtpSender.prototype.getStats=function(){var Q=this;return this._pc.getStats().then(function(J){return O.filterStats(J,Q.track,!0)})}}if(!("getStats"in p.RTCRtpReceiver.prototype)){var q=p.RTCPeerConnection.prototype.getReceivers;q&&(p.RTCPeerConnection.prototype.getReceivers=function(){var Q=this,J=q.apply(this,[]);return J.forEach(function(ee){return ee._pc=Q}),J}),O.wrapPeerConnectionEvent(p,"track",function(Q){return Q.receiver._pc=Q.srcElement,Q}),p.RTCRtpReceiver.prototype.getStats=function(){var Q=this;return this._pc.getStats().then(function(J){return O.filterStats(J,Q.track,!1)})}}if("getStats"in p.RTCRtpSender.prototype&&"getStats"in p.RTCRtpReceiver.prototype){var W=p.RTCPeerConnection.prototype.getStats;p.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof p.MediaStreamTrack){var Q,J,ee,z=arguments[0];return this.getSenders().forEach(function(oe){oe.track===z&&(Q?ee=!0:Q=oe)}),this.getReceivers().forEach(function(oe){return oe.track===z&&(J?ee=!0:J=oe),oe.track===z}),ee||Q&&J?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):Q?Q.getStats():J?J.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return W.apply(this,arguments)}}}},X.shimAddTrackRemoveTrackWithNative=D,X.shimAddTrackRemoveTrack=function(p){if(p.RTCPeerConnection){var b=O.detectBrowser(p);if(p.RTCPeerConnection.prototype.addTrack&&b.version>=65)return D(p);var R=p.RTCPeerConnection.prototype.getLocalStreams;p.RTCPeerConnection.prototype.getLocalStreams=function(){var z=this,oe=R.apply(this);return this._reverseStreams=this._reverseStreams||{},oe.map(function(me){return z._reverseStreams[me.id]})};var q=p.RTCPeerConnection.prototype.addStream;p.RTCPeerConnection.prototype.addStream=function(z){var oe=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},z.getTracks().forEach(function(pe){if(oe.getSenders().find(function(De){return De.track===pe}))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[z.id]){var me=new p.MediaStream(z.getTracks());this._streams[z.id]=me,this._reverseStreams[me.id]=z,z=me}q.apply(this,[z])};var W=p.RTCPeerConnection.prototype.removeStream;p.RTCPeerConnection.prototype.removeStream=function(z){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},W.apply(this,[this._streams[z.id]||z]),delete this._reverseStreams[this._streams[z.id]?this._streams[z.id].id:z.id],delete this._streams[z.id]},p.RTCPeerConnection.prototype.addTrack=function(z,oe){var me=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var pe=[].slice.call(arguments,1);if(1!==pe.length||!pe[0].getTracks().find(function(mt){return mt===z}))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(function(mt){return mt.track===z}))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var De=this._streams[oe.id];if(De)De.addTrack(z),Promise.resolve().then(function(){me.dispatchEvent(new Event("negotiationneeded"))});else{var et=new p.MediaStream([z]);this._streams[oe.id]=et,this._reverseStreams[et.id]=oe,this.addStream(et)}return this.getSenders().find(function(mt){return mt.track===z})},["createOffer","createAnswer"].forEach(function(z){var oe=p.RTCPeerConnection.prototype[z],me=B({},z,function(){var pe=this,De=arguments;return arguments.length&&"function"==typeof arguments[0]?oe.apply(this,[function(et){var mt=ee(pe,et);De[0].apply(null,[mt])},function(et){De[1]&&De[1].apply(null,et)},arguments[2]]):oe.apply(this,arguments).then(function(et){return ee(pe,et)})});p.RTCPeerConnection.prototype[z]=me[z]});var Q=p.RTCPeerConnection.prototype.setLocalDescription;p.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=(z=this,me=(oe=arguments[0]).sdp,Object.keys(z._reverseStreams||[]).forEach(function(pe){var De=z._reverseStreams[pe],et=z._streams[De.id];me=me.replace(new RegExp(De.id,"g"),et.id)}),new RTCSessionDescription({type:oe.type,sdp:me})),Q.apply(this,arguments)):Q.apply(this,arguments);var z,oe,me};var J=Object.getOwnPropertyDescriptor(p.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(p.RTCPeerConnection.prototype,"localDescription",{get:function(){var z=J.get.apply(this);return""===z.type?z:ee(this,z)}}),p.RTCPeerConnection.prototype.removeTrack=function(z){var oe,me=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!z._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(z._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{},Object.keys(this._streams).forEach(function(pe){me._streams[pe].getTracks().find(function(De){return z.track===De})&&(oe=me._streams[pe])}),oe&&(1===oe.getTracks().length?this.removeStream(this._reverseStreams[oe.id]):oe.removeTrack(z.track),this.dispatchEvent(new Event("negotiationneeded")))}}function ee(z,oe){var me=oe.sdp;return Object.keys(z._reverseStreams||[]).forEach(function(pe){var De=z._reverseStreams[pe];me=me.replace(new RegExp(z._streams[De.id].id,"g"),De.id)}),new RTCSessionDescription({type:oe.type,sdp:me})}},X.shimPeerConnection=function(p){var b=O.detectBrowser(p);if(!p.RTCPeerConnection&&p.webkitRTCPeerConnection&&(p.RTCPeerConnection=p.webkitRTCPeerConnection),p.RTCPeerConnection){b.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(q){var W=p.RTCPeerConnection.prototype[q],Q=B({},q,function(){return arguments[0]=new("addIceCandidate"===q?p.RTCIceCandidate:p.RTCSessionDescription)(arguments[0]),W.apply(this,arguments)});p.RTCPeerConnection.prototype[q]=Q[q]});var R=p.RTCPeerConnection.prototype.addIceCandidate;p.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?b.version<78&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():R.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}},X.fixNegotiationNeeded=function(p){O.wrapPeerConnectionEvent(p,"negotiationneeded",function(b){if("stable"===b.target.signalingState)return b})},Object.defineProperty(X,"shimGetUserMedia",{enumerable:!0,get:function(){return F.shimGetUserMedia}}),Object.defineProperty(X,"shimGetDisplayMedia",{enumerable:!0,get:function(){return L.shimGetDisplayMedia}});var O=function(p){if(p&&p.__esModule)return p;if(null===p||"object"!=typeof p&&"function"!=typeof p)return{default:p};var b=U();if(b&&b.has(p))return b.get(p);var R={},q=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var W in p)if(Object.prototype.hasOwnProperty.call(p,W)){var Q=q?Object.getOwnPropertyDescriptor(p,W):null;Q&&(Q.get||Q.set)?Object.defineProperty(R,W,Q):R[W]=p[W]}return R.default=p,b&&b.set(p,R),R}(se("../utils.js")),F=se("./getusermedia"),L=se("./getdisplaymedia");function U(){if("function"!=typeof WeakMap)return null;var p=new WeakMap;return U=function(){return p},p}function B(p,b,R){return b in p?Object.defineProperty(p,b,{value:R,enumerable:!0,configurable:!0,writable:!0}):p[b]=R,p}function V(p){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"==typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(p)}function D(p){p.RTCPeerConnection.prototype.getLocalStreams=function(){var Q=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(function(J){return Q._shimmedLocalStreams[J][0]})};var b=p.RTCPeerConnection.prototype.addTrack;p.RTCPeerConnection.prototype.addTrack=function(Q,J){if(!J)return b.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var ee=b.apply(this,arguments);return this._shimmedLocalStreams[J.id]?-1===this._shimmedLocalStreams[J.id].indexOf(ee)&&this._shimmedLocalStreams[J.id].push(ee):this._shimmedLocalStreams[J.id]=[J,ee],ee};var R=p.RTCPeerConnection.prototype.addStream;p.RTCPeerConnection.prototype.addStream=function(Q){var J=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},Q.getTracks().forEach(function(oe){if(J.getSenders().find(function(me){return me.track===oe}))throw new DOMException("Track already exists.","InvalidAccessError")});var ee=this.getSenders();R.apply(this,arguments);var z=this.getSenders().filter(function(oe){return-1===ee.indexOf(oe)});this._shimmedLocalStreams[Q.id]=[Q].concat(z)};var q=p.RTCPeerConnection.prototype.removeStream;p.RTCPeerConnection.prototype.removeStream=function(Q){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[Q.id],q.apply(this,arguments)};var W=p.RTCPeerConnection.prototype.removeTrack;p.RTCPeerConnection.prototype.removeTrack=function(Q){var J=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Q&&Object.keys(this._shimmedLocalStreams).forEach(function(ee){var z=J._shimmedLocalStreams[ee].indexOf(Q);-1!==z&&J._shimmedLocalStreams[ee].splice(z,1),1===J._shimmedLocalStreams[ee].length&&delete J._shimmedLocalStreams[ee]}),W.apply(this,arguments)}}},{"../utils.js":"iSxC","./getusermedia":"s6SN","./getdisplaymedia":"VHa8"}],NZ1C:[function(se,we,X){"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.filterIceServers=function(G,B){var V=!1;return(G=JSON.parse(JSON.stringify(G))).filter(function(_){if(_&&(_.urls||_.url)){var I=_.urls||_.url;_.url&&!_.urls&&O.deprecated("RTCIceServer.url","RTCIceServer.urls");var A="string"==typeof I;return A&&(I=[I]),I=I.filter(function(M){if(0===M.indexOf("stun:"))return!1;var S=M.startsWith("turn")&&!M.startsWith("turn:[")&&M.includes("transport=udp");return S&&!V?(V=!0,!0):S&&!V}),delete _.url,_.urls=A?I[0]:I,!!I.length}})};var O=function(G){if(G&&G.__esModule)return G;if(null===G||"object"!=typeof G&&"function"!=typeof G)return{default:G};var B=F();if(B&&B.has(G))return B.get(G);var V={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var I in G)if(Object.prototype.hasOwnProperty.call(G,I)){var A=_?Object.getOwnPropertyDescriptor(G,I):null;A&&(A.get||A.set)?Object.defineProperty(V,I,A):V[I]=G[I]}return V.default=G,B&&B.set(G,V),V}(se("../utils"));function F(){if("function"!=typeof WeakMap)return null;var G=new WeakMap;return F=function(){return G},G}},{"../utils":"iSxC"}],YHvh:[function(se,we,X){"use strict";var O={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};O.localCName=O.generateIdentifier(),O.splitLines=function(F){return F.trim().split("\n").map(function(L){return L.trim()})},O.splitSections=function(F){return F.split("\nm=").map(function(L,U){return(U>0?"m="+L:L).trim()+"\r\n"})},O.getDescription=function(F){var L=O.splitSections(F);return L&&L[0]},O.getMediaSections=function(F){var L=O.splitSections(F);return L.shift(),L},O.matchPrefix=function(F,L){return O.splitLines(F).filter(function(U){return 0===U.indexOf(L)})},O.parseCandidate=function(F){for(var L,U={foundation:(L=0===F.indexOf("a=candidate:")?F.substring(12).split(" "):F.substring(10).split(" "))[0],component:parseInt(L[1],10),protocol:L[2].toLowerCase(),priority:parseInt(L[3],10),ip:L[4],address:L[4],port:parseInt(L[5],10),type:L[7]},G=8;G<L.length;G+=2)switch(L[G]){case"raddr":U.relatedAddress=L[G+1];break;case"rport":U.relatedPort=parseInt(L[G+1],10);break;case"tcptype":U.tcpType=L[G+1];break;case"ufrag":U.ufrag=L[G+1],U.usernameFragment=L[G+1];break;default:U[L[G]]=L[G+1]}return U},O.writeCandidate=function(F){var L=[];L.push(F.foundation),L.push(F.component),L.push(F.protocol.toUpperCase()),L.push(F.priority),L.push(F.address||F.ip),L.push(F.port);var U=F.type;return L.push("typ"),L.push(U),"host"!==U&&F.relatedAddress&&F.relatedPort&&(L.push("raddr"),L.push(F.relatedAddress),L.push("rport"),L.push(F.relatedPort)),F.tcpType&&"tcp"===F.protocol.toLowerCase()&&(L.push("tcptype"),L.push(F.tcpType)),(F.usernameFragment||F.ufrag)&&(L.push("ufrag"),L.push(F.usernameFragment||F.ufrag)),"candidate:"+L.join(" ")},O.parseIceOptions=function(F){return F.substr(14).split(" ")},O.parseRtpMap=function(F){var L=F.substr(9).split(" "),U={payloadType:parseInt(L.shift(),10)};return L=L[0].split("/"),U.name=L[0],U.clockRate=parseInt(L[1],10),U.channels=3===L.length?parseInt(L[2],10):1,U.numChannels=U.channels,U},O.writeRtpMap=function(F){var L=F.payloadType;void 0!==F.preferredPayloadType&&(L=F.preferredPayloadType);var U=F.channels||F.numChannels||1;return"a=rtpmap:"+L+" "+F.name+"/"+F.clockRate+(1!==U?"/"+U:"")+"\r\n"},O.parseExtmap=function(F){var L=F.substr(9).split(" ");return{id:parseInt(L[0],10),direction:L[0].indexOf("/")>0?L[0].split("/")[1]:"sendrecv",uri:L[1]}},O.writeExtmap=function(F){return"a=extmap:"+(F.id||F.preferredId)+(F.direction&&"sendrecv"!==F.direction?"/"+F.direction:"")+" "+F.uri+"\r\n"},O.parseFmtp=function(F){for(var L,U={},G=F.substr(F.indexOf(" ")+1).split(";"),B=0;B<G.length;B++)U[(L=G[B].trim().split("="))[0].trim()]=L[1];return U},O.writeFmtp=function(F){var L="",U=F.payloadType;if(void 0!==F.preferredPayloadType&&(U=F.preferredPayloadType),F.parameters&&Object.keys(F.parameters).length){var G=[];Object.keys(F.parameters).forEach(function(B){G.push(F.parameters[B]?B+"="+F.parameters[B]:B)}),L+="a=fmtp:"+U+" "+G.join(";")+"\r\n"}return L},O.parseRtcpFb=function(F){var L=F.substr(F.indexOf(" ")+1).split(" ");return{type:L.shift(),parameter:L.join(" ")}},O.writeRtcpFb=function(F){var L="",U=F.payloadType;return void 0!==F.preferredPayloadType&&(U=F.preferredPayloadType),F.rtcpFeedback&&F.rtcpFeedback.length&&F.rtcpFeedback.forEach(function(G){L+="a=rtcp-fb:"+U+" "+G.type+(G.parameter&&G.parameter.length?" "+G.parameter:"")+"\r\n"}),L},O.parseSsrcMedia=function(F){var L=F.indexOf(" "),U={ssrc:parseInt(F.substr(7,L-7),10)},G=F.indexOf(":",L);return G>-1?(U.attribute=F.substr(L+1,G-L-1),U.value=F.substr(G+1)):U.attribute=F.substr(L+1),U},O.parseSsrcGroup=function(F){var L=F.substr(13).split(" ");return{semantics:L.shift(),ssrcs:L.map(function(U){return parseInt(U,10)})}},O.getMid=function(F){var L=O.matchPrefix(F,"a=mid:")[0];if(L)return L.substr(6)},O.parseFingerprint=function(F){var L=F.substr(14).split(" ");return{algorithm:L[0].toLowerCase(),value:L[1]}},O.getDtlsParameters=function(F,L){return{role:"auto",fingerprints:O.matchPrefix(F+L,"a=fingerprint:").map(O.parseFingerprint)}},O.writeDtlsParameters=function(F,L){var U="a=setup:"+L+"\r\n";return F.fingerprints.forEach(function(G){U+="a=fingerprint:"+G.algorithm+" "+G.value+"\r\n"}),U},O.getIceParameters=function(F,L){var U=O.splitLines(F);return{usernameFragment:(U=U.concat(O.splitLines(L))).filter(function(G){return 0===G.indexOf("a=ice-ufrag:")})[0].substr(12),password:U.filter(function(G){return 0===G.indexOf("a=ice-pwd:")})[0].substr(10)}},O.writeIceParameters=function(F){return"a=ice-ufrag:"+F.usernameFragment+"\r\na=ice-pwd:"+F.password+"\r\n"},O.parseRtpParameters=function(F){for(var L={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},U=O.splitLines(F)[0].split(" "),G=3;G<U.length;G++){var B=U[G],V=O.matchPrefix(F,"a=rtpmap:"+B+" ")[0];if(V){var _=O.parseRtpMap(V),I=O.matchPrefix(F,"a=fmtp:"+B+" ");switch(_.parameters=I.length?O.parseFmtp(I[0]):{},_.rtcpFeedback=O.matchPrefix(F,"a=rtcp-fb:"+B+" ").map(O.parseRtcpFb),L.codecs.push(_),_.name.toUpperCase()){case"RED":case"ULPFEC":L.fecMechanisms.push(_.name.toUpperCase())}}}return O.matchPrefix(F,"a=extmap:").forEach(function(A){L.headerExtensions.push(O.parseExtmap(A))}),L},O.writeRtpDescription=function(F,L){var U="";U+="m="+F+" ",U+=L.codecs.length>0?"9":"0",U+=" UDP/TLS/RTP/SAVPF ",U+=L.codecs.map(function(B){return void 0!==B.preferredPayloadType?B.preferredPayloadType:B.payloadType}).join(" ")+"\r\n",U+="c=IN IP4 0.0.0.0\r\n",U+="a=rtcp:9 IN IP4 0.0.0.0\r\n",L.codecs.forEach(function(B){U+=O.writeRtpMap(B),U+=O.writeFmtp(B),U+=O.writeRtcpFb(B)});var G=0;return L.codecs.forEach(function(B){B.maxptime>G&&(G=B.maxptime)}),G>0&&(U+="a=maxptime:"+G+"\r\n"),U+="a=rtcp-mux\r\n",L.headerExtensions&&L.headerExtensions.forEach(function(B){U+=O.writeExtmap(B)}),U},O.parseRtpEncodingParameters=function(F){var L,U=[],G=O.parseRtpParameters(F),B=-1!==G.fecMechanisms.indexOf("RED"),V=-1!==G.fecMechanisms.indexOf("ULPFEC"),_=O.matchPrefix(F,"a=ssrc:").map(function(S){return O.parseSsrcMedia(S)}).filter(function(S){return"cname"===S.attribute}),I=_.length>0&&_[0].ssrc,A=O.matchPrefix(F,"a=ssrc-group:FID").map(function(S){return S.substr(17).split(" ").map(function(D){return parseInt(D,10)})});A.length>0&&A[0].length>1&&A[0][0]===I&&(L=A[0][1]),G.codecs.forEach(function(S){if("RTX"===S.name.toUpperCase()&&S.parameters.apt){var D={ssrc:I,codecPayloadType:parseInt(S.parameters.apt,10)};I&&L&&(D.rtx={ssrc:L}),U.push(D),B&&((D=JSON.parse(JSON.stringify(D))).fec={ssrc:I,mechanism:V?"red+ulpfec":"red"},U.push(D))}}),0===U.length&&I&&U.push({ssrc:I});var M=O.matchPrefix(F,"b=");return M.length&&(M=0===M[0].indexOf("b=TIAS:")?parseInt(M[0].substr(7),10):0===M[0].indexOf("b=AS:")?1e3*parseInt(M[0].substr(5),10)*.95-16e3:void 0,U.forEach(function(S){S.maxBitrate=M})),U},O.parseRtcpParameters=function(F){var L={},U=O.matchPrefix(F,"a=ssrc:").map(function(V){return O.parseSsrcMedia(V)}).filter(function(V){return"cname"===V.attribute})[0];U&&(L.cname=U.value,L.ssrc=U.ssrc);var G=O.matchPrefix(F,"a=rtcp-rsize");L.reducedSize=G.length>0,L.compound=0===G.length;var B=O.matchPrefix(F,"a=rtcp-mux");return L.mux=B.length>0,L},O.parseMsid=function(F){var L,U=O.matchPrefix(F,"a=msid:");if(1===U.length)return{stream:(L=U[0].substr(7).split(" "))[0],track:L[1]};var G=O.matchPrefix(F,"a=ssrc:").map(function(B){return O.parseSsrcMedia(B)}).filter(function(B){return"msid"===B.attribute});return G.length>0?{stream:(L=G[0].value.split(" "))[0],track:L[1]}:void 0},O.parseSctpDescription=function(F){var L,U=O.parseMLine(F),G=O.matchPrefix(F,"a=max-message-size:");G.length>0&&(L=parseInt(G[0].substr(19),10)),isNaN(L)&&(L=65536);var B=O.matchPrefix(F,"a=sctp-port:");if(B.length>0)return{port:parseInt(B[0].substr(12),10),protocol:U.fmt,maxMessageSize:L};if(O.matchPrefix(F,"a=sctpmap:").length>0){var V=O.matchPrefix(F,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(V[0],10),protocol:V[1],maxMessageSize:L}}},O.writeSctpDescription=function(F,L){var U=[];return U="DTLS/SCTP"!==F.protocol?["m="+F.kind+" 9 "+F.protocol+" "+L.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+L.port+"\r\n"]:["m="+F.kind+" 9 "+F.protocol+" "+L.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+L.port+" "+L.protocol+" 65535\r\n"],void 0!==L.maxMessageSize&&U.push("a=max-message-size:"+L.maxMessageSize+"\r\n"),U.join("")},O.generateSessionId=function(){return Math.random().toString().substr(2,21)},O.writeSessionBoilerplate=function(F,L,U){var G=void 0!==L?L:2;return"v=0\r\no="+(U||"thisisadapterortc")+" "+(F||O.generateSessionId())+" "+G+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},O.writeMediaSection=function(F,L,U,G){var B=O.writeRtpDescription(F.kind,L);if(B+=O.writeIceParameters(F.iceGatherer.getLocalParameters()),B+=O.writeDtlsParameters(F.dtlsTransport.getLocalParameters(),"offer"===U?"actpass":"active"),B+="a=mid:"+F.mid+"\r\n",B+=F.direction?"a="+F.direction+"\r\n":F.rtpSender&&F.rtpReceiver?"a=sendrecv\r\n":F.rtpSender?"a=sendonly\r\n":F.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",F.rtpSender){var V="msid:"+G.id+" "+F.rtpSender.track.id+"\r\n";B+="a="+V,B+="a=ssrc:"+F.sendEncodingParameters[0].ssrc+" "+V,F.sendEncodingParameters[0].rtx&&(B+="a=ssrc:"+F.sendEncodingParameters[0].rtx.ssrc+" "+V,B+="a=ssrc-group:FID "+F.sendEncodingParameters[0].ssrc+" "+F.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return B+="a=ssrc:"+F.sendEncodingParameters[0].ssrc+" cname:"+O.localCName+"\r\n",F.rtpSender&&F.sendEncodingParameters[0].rtx&&(B+="a=ssrc:"+F.sendEncodingParameters[0].rtx.ssrc+" cname:"+O.localCName+"\r\n"),B},O.getDirection=function(F,L){for(var U=O.splitLines(F),G=0;G<U.length;G++)switch(U[G]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return U[G].substr(2)}return L?O.getDirection(L):"sendrecv"},O.getKind=function(F){return O.splitLines(F)[0].split(" ")[0].substr(2)},O.isRejected=function(F){return"0"===F.split(" ",2)[1]},O.parseMLine=function(F){var L=O.splitLines(F)[0].substr(2).split(" ");return{kind:L[0],port:parseInt(L[1],10),protocol:L[2],fmt:L.slice(3).join(" ")}},O.parseOLine=function(F){var L=O.matchPrefix(F,"o=")[0].substr(2).split(" ");return{username:L[0],sessionId:L[1],sessionVersion:parseInt(L[2],10),netType:L[3],addressType:L[4],address:L[5]}},O.isValidSDP=function(F){if("string"!=typeof F||0===F.length)return!1;for(var L=O.splitLines(F),U=0;U<L.length;U++)if(L[U].length<2||"="!==L[U].charAt(1))return!1;return!0},"object"==typeof we&&(we.exports=O)},{}],NJ2u:[function(se,we,X){"use strict";var O=se("sdp");function L(I,A,M,S,D){var P=O.writeRtpDescription(I.kind,A);if(P+=O.writeIceParameters(I.iceGatherer.getLocalParameters()),P+=O.writeDtlsParameters(I.dtlsTransport.getLocalParameters(),"offer"===M?"actpass":D||"active"),P+="a=mid:"+I.mid+"\r\n",P+=I.rtpSender&&I.rtpReceiver?"a=sendrecv\r\n":I.rtpSender?"a=sendonly\r\n":I.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",I.rtpSender){var y=I.rtpSender._initialTrackId||I.rtpSender.track.id;I.rtpSender._initialTrackId=y;var v="msid:"+(S?S.id:"-")+" "+y+"\r\n";P+="a="+v,P+="a=ssrc:"+I.sendEncodingParameters[0].ssrc+" "+v,I.sendEncodingParameters[0].rtx&&(P+="a=ssrc:"+I.sendEncodingParameters[0].rtx.ssrc+" "+v,P+="a=ssrc-group:FID "+I.sendEncodingParameters[0].ssrc+" "+I.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return P+="a=ssrc:"+I.sendEncodingParameters[0].ssrc+" cname:"+O.localCName+"\r\n",I.rtpSender&&I.sendEncodingParameters[0].rtx&&(P+="a=ssrc:"+I.sendEncodingParameters[0].rtx.ssrc+" cname:"+O.localCName+"\r\n"),P}function G(I,A){var M={codecs:[],headerExtensions:[],fecMechanisms:[]},S=function(P,y){P=parseInt(P,10);for(var v=0;v<y.length;v++)if(y[v].payloadType===P||y[v].preferredPayloadType===P)return y[v]},D=function(P,y,v,p){var b=S(P.parameters.apt,v),R=S(y.parameters.apt,p);return b&&R&&b.name.toLowerCase()===R.name.toLowerCase()};return I.codecs.forEach(function(P){for(var y=0;y<A.codecs.length;y++){var v=A.codecs[y];if(P.name.toLowerCase()===v.name.toLowerCase()&&P.clockRate===v.clockRate){if("rtx"===P.name.toLowerCase()&&P.parameters&&v.parameters.apt&&!D(P,v,I.codecs,A.codecs))continue;(v=JSON.parse(JSON.stringify(v))).numChannels=Math.min(P.numChannels,v.numChannels),M.codecs.push(v),v.rtcpFeedback=v.rtcpFeedback.filter(function(p){for(var b=0;b<P.rtcpFeedback.length;b++)if(P.rtcpFeedback[b].type===p.type&&P.rtcpFeedback[b].parameter===p.parameter)return!0;return!1});break}}}),I.headerExtensions.forEach(function(P){for(var y=0;y<A.headerExtensions.length;y++){var v=A.headerExtensions[y];if(P.uri===v.uri){M.headerExtensions.push(v);break}}}),M}function B(I,A,M){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[A][I].indexOf(M)}function V(I,A){var M=I.getRemoteCandidates().find(function(S){return A.foundation===S.foundation&&A.ip===S.ip&&A.port===S.port&&A.priority===S.priority&&A.protocol===S.protocol&&A.type===S.type});return M||I.addRemoteCandidate(A),!M}function _(I,A){var M=new Error(A);return M.name=I,M.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[I],M}we.exports=function(I,A){function M(y,v){v.addTrack(y),v.dispatchEvent(new I.MediaStreamTrackEvent("addtrack",{track:y}))}function S(y,v,p,b){var R=new Event("track");R.track=v,R.receiver=p,R.transceiver={receiver:p},R.streams=b,I.setTimeout(function(){y._dispatchEvent("track",R)})}var D=function(y){var v=this,p=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(R){v[R]=p[R].bind(p)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",y=JSON.parse(JSON.stringify(y||{})),this.usingBundle="max-bundle"===y.bundlePolicy,"negotiate"===y.rtcpMuxPolicy)throw _("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(y.rtcpMuxPolicy||(y.rtcpMuxPolicy="require"),y.iceTransportPolicy){case"all":case"relay":break;default:y.iceTransportPolicy="all"}switch(y.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:y.bundlePolicy="balanced"}if(y.iceServers=function(I,A){var M=!1;return(I=JSON.parse(JSON.stringify(I))).filter(function(S){if(S&&(S.urls||S.url)){var D=S.urls||S.url;S.url&&!S.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var P="string"==typeof D;return P&&(D=[D]),D=D.filter(function(y){return 0!==y.indexOf("turn:")||-1===y.indexOf("transport=udp")||-1!==y.indexOf("turn:[")||M?0===y.indexOf("stun:")&&A>=14393&&-1===y.indexOf("?transport=udp"):(M=!0,!0)}),delete S.url,S.urls=P?D[0]:D,!!D.length}})}(y.iceServers||[],A),this._iceGatherers=[],y.iceCandidatePoolSize)for(var b=y.iceCandidatePoolSize;b>0;b--)this._iceGatherers.push(new I.RTCIceGatherer({iceServers:y.iceServers,gatherPolicy:y.iceTransportPolicy}));else y.iceCandidatePoolSize=0;this._config=y,this.transceivers=[],this._sdpSessionId=O.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(D.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(D.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),D.prototype.onicecandidate=null,D.prototype.onaddstream=null,D.prototype.ontrack=null,D.prototype.onremovestream=null,D.prototype.onsignalingstatechange=null,D.prototype.oniceconnectionstatechange=null,D.prototype.onconnectionstatechange=null,D.prototype.onicegatheringstatechange=null,D.prototype.onnegotiationneeded=null,D.prototype.ondatachannel=null,D.prototype._dispatchEvent=function(y,v){this._isClosed||(this.dispatchEvent(v),"function"==typeof this["on"+y]&&this["on"+y](v))},D.prototype._emitGatheringStateChange=function(){var y=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",y)},D.prototype.getConfiguration=function(){return this._config},D.prototype.getLocalStreams=function(){return this.localStreams},D.prototype.getRemoteStreams=function(){return this.remoteStreams},D.prototype._createTransceiver=function(y,v){var b={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:y,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&this.transceivers.length>0)b.iceTransport=this.transceivers[0].iceTransport,b.dtlsTransport=this.transceivers[0].dtlsTransport;else{var R=this._createIceAndDtlsTransports();b.iceTransport=R.iceTransport,b.dtlsTransport=R.dtlsTransport}return v||this.transceivers.push(b),b},D.prototype.addTrack=function(y,v){if(this._isClosed)throw _("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var p;if(this.transceivers.find(function(R){return R.track===y}))throw _("InvalidAccessError","Track already exists.");for(var b=0;b<this.transceivers.length;b++)this.transceivers[b].track||this.transceivers[b].kind!==y.kind||(p=this.transceivers[b]);return p||(p=this._createTransceiver(y.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(v)&&this.localStreams.push(v),p.track=y,p.stream=v,p.rtpSender=new I.RTCRtpSender(y,p.dtlsTransport),p.rtpSender},D.prototype.addStream=function(y){var v=this;if(A>=15025)y.getTracks().forEach(function(b){v.addTrack(b,y)});else{var p=y.clone();y.getTracks().forEach(function(b,R){var q=p.getTracks()[R];b.addEventListener("enabled",function(W){q.enabled=W.enabled})}),p.getTracks().forEach(function(b){v.addTrack(b,p)})}},D.prototype.removeTrack=function(y){if(this._isClosed)throw _("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(y instanceof I.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var v=this.transceivers.find(function(b){return b.rtpSender===y});if(!v)throw _("InvalidAccessError","Sender was not created by this connection.");var p=v.stream;v.rtpSender.stop(),v.rtpSender=null,v.track=null,v.stream=null,-1===this.transceivers.map(function(b){return b.stream}).indexOf(p)&&this.localStreams.indexOf(p)>-1&&this.localStreams.splice(this.localStreams.indexOf(p),1),this._maybeFireNegotiationNeeded()},D.prototype.removeStream=function(y){var v=this;y.getTracks().forEach(function(p){var b=v.getSenders().find(function(R){return R.track===p});b&&v.removeTrack(b)})},D.prototype.getSenders=function(){return this.transceivers.filter(function(y){return!!y.rtpSender}).map(function(y){return y.rtpSender})},D.prototype.getReceivers=function(){return this.transceivers.filter(function(y){return!!y.rtpReceiver}).map(function(y){return y.rtpReceiver})},D.prototype._createIceGatherer=function(y,v){var p=this;if(v&&y>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var b=new I.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(b,"state",{value:"new",writable:!0}),this.transceivers[y].bufferedCandidateEvents=[],this.transceivers[y].bufferCandidates=function(R){var q=!R.candidate||0===Object.keys(R.candidate).length;b.state=q?"completed":"gathering",null!==p.transceivers[y].bufferedCandidateEvents&&p.transceivers[y].bufferedCandidateEvents.push(R)},b.addEventListener("localcandidate",this.transceivers[y].bufferCandidates),b},D.prototype._gather=function(y,v){var p=this,b=this.transceivers[v].iceGatherer;if(!b.onlocalcandidate){var R=this.transceivers[v].bufferedCandidateEvents;this.transceivers[v].bufferedCandidateEvents=null,b.removeEventListener("localcandidate",this.transceivers[v].bufferCandidates),b.onlocalcandidate=function(q){if(!(p.usingBundle&&v>0)){var W=new Event("icecandidate");W.candidate={sdpMid:y,sdpMLineIndex:v};var Q=q.candidate,J=!Q||0===Object.keys(Q).length;if(J)"new"!==b.state&&"gathering"!==b.state||(b.state="completed");else{"new"===b.state&&(b.state="gathering"),Q.component=1,Q.ufrag=b.getLocalParameters().usernameFragment;var ee=O.writeCandidate(Q);W.candidate=Object.assign(W.candidate,O.parseCandidate(ee)),W.candidate.candidate=ee,W.candidate.toJSON=function(){return{candidate:W.candidate.candidate,sdpMid:W.candidate.sdpMid,sdpMLineIndex:W.candidate.sdpMLineIndex,usernameFragment:W.candidate.usernameFragment}}}var z=O.getMediaSections(p._localDescription.sdp);z[W.candidate.sdpMLineIndex]+=J?"a=end-of-candidates\r\n":"a="+W.candidate.candidate+"\r\n",p._localDescription.sdp=O.getDescription(p._localDescription.sdp)+z.join("");var oe=p.transceivers.every(function(me){return me.iceGatherer&&"completed"===me.iceGatherer.state});"gathering"!==p.iceGatheringState&&(p.iceGatheringState="gathering",p._emitGatheringStateChange()),J||p._dispatchEvent("icecandidate",W),oe&&(p._dispatchEvent("icecandidate",new Event("icecandidate")),p.iceGatheringState="complete",p._emitGatheringStateChange())}},I.setTimeout(function(){R.forEach(function(q){b.onlocalcandidate(q)})},0)}},D.prototype._createIceAndDtlsTransports=function(){var y=this,v=new I.RTCIceTransport(null);v.onicestatechange=function(){y._updateIceConnectionState(),y._updateConnectionState()};var p=new I.RTCDtlsTransport(v);return p.ondtlsstatechange=function(){y._updateConnectionState()},p.onerror=function(){Object.defineProperty(p,"state",{value:"failed",writable:!0}),y._updateConnectionState()},{iceTransport:v,dtlsTransport:p}},D.prototype._disposeIceAndDtlsTransports=function(y){var v=this.transceivers[y].iceGatherer;v&&(delete v.onlocalcandidate,delete this.transceivers[y].iceGatherer);var p=this.transceivers[y].iceTransport;p&&(delete p.onicestatechange,delete this.transceivers[y].iceTransport);var b=this.transceivers[y].dtlsTransport;b&&(delete b.ondtlsstatechange,delete b.onerror,delete this.transceivers[y].dtlsTransport)},D.prototype._transceive=function(y,v,p){var b=G(y.localCapabilities,y.remoteCapabilities);v&&y.rtpSender&&(b.encodings=y.sendEncodingParameters,b.rtcp={cname:O.localCName,compound:y.rtcpParameters.compound},y.recvEncodingParameters.length&&(b.rtcp.ssrc=y.recvEncodingParameters[0].ssrc),y.rtpSender.send(b)),p&&y.rtpReceiver&&b.codecs.length>0&&("video"===y.kind&&y.recvEncodingParameters&&A<15019&&y.recvEncodingParameters.forEach(function(R){delete R.rtx}),b.encodings=y.recvEncodingParameters.length?y.recvEncodingParameters:[{}],b.rtcp={compound:y.rtcpParameters.compound},y.rtcpParameters.cname&&(b.rtcp.cname=y.rtcpParameters.cname),y.sendEncodingParameters.length&&(b.rtcp.ssrc=y.sendEncodingParameters[0].ssrc),y.rtpReceiver.receive(b))},D.prototype.setLocalDescription=function(y){var v,p,b=this;if(-1===["offer","answer"].indexOf(y.type))return Promise.reject(_("TypeError",'Unsupported type "'+y.type+'"'));if(!B("setLocalDescription",y.type,b.signalingState)||b._isClosed)return Promise.reject(_("InvalidStateError","Can not set local "+y.type+" in state "+b.signalingState));if("offer"===y.type)v=O.splitSections(y.sdp),p=v.shift(),v.forEach(function(q,W){var Q=O.parseRtpParameters(q);b.transceivers[W].localCapabilities=Q}),b.transceivers.forEach(function(q,W){b._gather(q.mid,W)});else if("answer"===y.type){v=O.splitSections(b._remoteDescription.sdp),p=v.shift();var R=O.matchPrefix(p,"a=ice-lite").length>0;v.forEach(function(q,W){var Q=b.transceivers[W],J=Q.iceGatherer,ee=Q.iceTransport,z=Q.dtlsTransport,oe=Q.localCapabilities,me=Q.remoteCapabilities;if(!(O.isRejected(q)&&0===O.matchPrefix(q,"a=bundle-only").length||Q.rejected)){var pe=O.getIceParameters(q,p),De=O.getDtlsParameters(q,p);R&&(De.role="server"),b.usingBundle&&0!==W||(b._gather(Q.mid,W),"new"===ee.state&&ee.start(J,pe,R?"controlling":"controlled"),"new"===z.state&&z.start(De));var et=G(oe,me);b._transceive(Q,et.codecs.length>0,!1)}})}return b._localDescription={type:y.type,sdp:y.sdp},b._updateSignalingState("offer"===y.type?"have-local-offer":"stable"),Promise.resolve()},D.prototype.setRemoteDescription=function(y){var v=this;if(-1===["offer","answer"].indexOf(y.type))return Promise.reject(_("TypeError",'Unsupported type "'+y.type+'"'));if(!B("setRemoteDescription",y.type,v.signalingState)||v._isClosed)return Promise.reject(_("InvalidStateError","Can not set remote "+y.type+" in state "+v.signalingState));var p={};v.remoteStreams.forEach(function(ee){p[ee.id]=ee});var b=[],R=O.splitSections(y.sdp),q=R.shift(),W=O.matchPrefix(q,"a=ice-lite").length>0,Q=O.matchPrefix(q,"a=group:BUNDLE ").length>0;v.usingBundle=Q;var J=O.matchPrefix(q,"a=ice-options:")[0];return v.canTrickleIceCandidates=!!J&&J.substr(14).split(" ").indexOf("trickle")>=0,R.forEach(function(ee,z){var oe=O.splitLines(ee),me=O.getKind(ee),pe=O.isRejected(ee)&&0===O.matchPrefix(ee,"a=bundle-only").length,De=oe[0].substr(2).split(" ")[2],et=O.getDirection(ee,q),mt=O.parseMsid(ee),Jn=O.getMid(ee)||O.generateIdentifier();if(pe||"application"===me&&("DTLS/SCTP"===De||"UDP/DTLS/SCTP"===De))v.transceivers[z]={mid:Jn,kind:me,protocol:De,rejected:!0};else{var Ue,Or,lo,Ce,xn,pr,Pi,gr,_n;!pe&&v.transceivers[z]&&v.transceivers[z].rejected&&(v.transceivers[z]=v._createTransceiver(me,!0));var jo,Xn,Ps=O.parseRtpParameters(ee);pe||(jo=O.getIceParameters(ee,q),(Xn=O.getDtlsParameters(ee,q)).role="client"),Pi=O.parseRtpEncodingParameters(ee);var Zn=O.parseRtcpParameters(ee),Bo=O.matchPrefix(ee,"a=end-of-candidates",q).length>0,Je=O.matchPrefix(ee,"a=candidate:").map(function(Dt){return O.parseCandidate(Dt)}).filter(function(Dt){return 1===Dt.component});if(("offer"===y.type||"answer"===y.type)&&!pe&&Q&&z>0&&v.transceivers[z]&&(v._disposeIceAndDtlsTransports(z),v.transceivers[z].iceGatherer=v.transceivers[0].iceGatherer,v.transceivers[z].iceTransport=v.transceivers[0].iceTransport,v.transceivers[z].dtlsTransport=v.transceivers[0].dtlsTransport,v.transceivers[z].rtpSender&&v.transceivers[z].rtpSender.setTransport(v.transceivers[0].dtlsTransport),v.transceivers[z].rtpReceiver&&v.transceivers[z].rtpReceiver.setTransport(v.transceivers[0].dtlsTransport)),"offer"!==y.type||pe)"answer"===y.type&&!pe&&(Or=(Ue=v.transceivers[z]).iceGatherer,lo=Ue.iceTransport,Ce=Ue.dtlsTransport,xn=Ue.rtpReceiver,pr=Ue.sendEncodingParameters,gr=Ue.localCapabilities,v.transceivers[z].recvEncodingParameters=Pi,v.transceivers[z].remoteCapabilities=Ps,v.transceivers[z].rtcpParameters=Zn,Je.length&&"new"===lo.state&&(!W&&!Bo||Q&&0!==z?Je.forEach(function(Dt){V(Ue.iceTransport,Dt)}):lo.setRemoteCandidates(Je)),Q&&0!==z||("new"===lo.state&&lo.start(Or,jo,"controlling"),"new"===Ce.state&&Ce.start(Xn)),!G(Ue.localCapabilities,Ue.remoteCapabilities).codecs.filter(function(Dt){return"rtx"===Dt.name.toLowerCase()}).length&&Ue.sendEncodingParameters[0].rtx&&delete Ue.sendEncodingParameters[0].rtx,v._transceive(Ue,"sendrecv"===et||"recvonly"===et,"sendrecv"===et||"sendonly"===et),!xn||"sendrecv"!==et&&"sendonly"!==et?delete Ue.rtpReceiver:(_n=xn.track,mt?(p[mt.stream]||(p[mt.stream]=new I.MediaStream),M(_n,p[mt.stream]),b.push([_n,xn,p[mt.stream]])):(p.default||(p.default=new I.MediaStream),M(_n,p.default),b.push([_n,xn,p.default]))));else{(Ue=v.transceivers[z]||v._createTransceiver(me)).mid=Jn,Ue.iceGatherer||(Ue.iceGatherer=v._createIceGatherer(z,Q)),Je.length&&"new"===Ue.iceTransport.state&&(!Bo||Q&&0!==z?Je.forEach(function(Dt){V(Ue.iceTransport,Dt)}):Ue.iceTransport.setRemoteCandidates(Je)),gr=I.RTCRtpReceiver.getCapabilities(me),A<15019&&(gr.codecs=gr.codecs.filter(function(Dt){return"rtx"!==Dt.name})),pr=Ue.sendEncodingParameters||[{ssrc:1001*(2*z+2)}];var vt,ii=!1;"sendrecv"===et||"sendonly"===et?(ii=!Ue.rtpReceiver,xn=Ue.rtpReceiver||new I.RTCRtpReceiver(Ue.dtlsTransport,me),ii&&(_n=xn.track,mt&&"-"===mt.stream||(mt?(p[mt.stream]||(p[mt.stream]=new I.MediaStream,Object.defineProperty(p[mt.stream],"id",{get:function(){return mt.stream}})),Object.defineProperty(_n,"id",{get:function(){return mt.track}}),vt=p[mt.stream]):(p.default||(p.default=new I.MediaStream),vt=p.default)),vt&&(M(_n,vt),Ue.associatedRemoteMediaStreams.push(vt)),b.push([_n,xn,vt]))):Ue.rtpReceiver&&Ue.rtpReceiver.track&&(Ue.associatedRemoteMediaStreams.forEach(function(Dt){var oi,rc,xi=Dt.getTracks().find(function(Bt){return Bt.id===Ue.rtpReceiver.track.id});xi&&((rc=Dt).removeTrack(oi=xi),rc.dispatchEvent(new I.MediaStreamTrackEvent("removetrack",{track:oi})))}),Ue.associatedRemoteMediaStreams=[]),Ue.localCapabilities=gr,Ue.remoteCapabilities=Ps,Ue.rtpReceiver=xn,Ue.rtcpParameters=Zn,Ue.sendEncodingParameters=pr,Ue.recvEncodingParameters=Pi,v._transceive(v.transceivers[z],!1,ii)}}}),void 0===v._dtlsRole&&(v._dtlsRole="offer"===y.type?"active":"passive"),v._remoteDescription={type:y.type,sdp:y.sdp},v._updateSignalingState("offer"===y.type?"have-remote-offer":"stable"),Object.keys(p).forEach(function(ee){var z=p[ee];if(z.getTracks().length){if(-1===v.remoteStreams.indexOf(z)){v.remoteStreams.push(z);var oe=new Event("addstream");oe.stream=z,I.setTimeout(function(){v._dispatchEvent("addstream",oe)})}b.forEach(function(me){z.id===me[2].id&&S(v,me[0],me[1],[z])})}}),b.forEach(function(ee){ee[2]||S(v,ee[0],ee[1],[])}),I.setTimeout(function(){v&&v.transceivers&&v.transceivers.forEach(function(ee){ee.iceTransport&&"new"===ee.iceTransport.state&&ee.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),ee.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},D.prototype.close=function(){this.transceivers.forEach(function(y){y.iceTransport&&y.iceTransport.stop(),y.dtlsTransport&&y.dtlsTransport.stop(),y.rtpSender&&y.rtpSender.stop(),y.rtpReceiver&&y.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},D.prototype._updateSignalingState=function(y){this.signalingState=y;var v=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",v)},D.prototype._maybeFireNegotiationNeeded=function(){var y=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,I.setTimeout(function(){if(y.needNegotiation){y.needNegotiation=!1;var v=new Event("negotiationneeded");y._dispatchEvent("negotiationneeded",v)}},0))},D.prototype._updateIceConnectionState=function(){var y,v={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(b){b.iceTransport&&!b.rejected&&v[b.iceTransport.state]++}),y="new",v.failed>0?y="failed":v.checking>0?y="checking":v.disconnected>0?y="disconnected":v.new>0?y="new":v.connected>0?y="connected":v.completed>0&&(y="completed"),y!==this.iceConnectionState){this.iceConnectionState=y;var p=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",p)}},D.prototype._updateConnectionState=function(){var y,v={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(b){b.iceTransport&&b.dtlsTransport&&!b.rejected&&(v[b.iceTransport.state]++,v[b.dtlsTransport.state]++)}),v.connected+=v.completed,y="new",v.failed>0?y="failed":v.connecting>0?y="connecting":v.disconnected>0?y="disconnected":v.new>0?y="new":v.connected>0&&(y="connected"),y!==this.connectionState){this.connectionState=y;var p=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",p)}},D.prototype.createOffer=function(){var y=this;if(y._isClosed)return Promise.reject(_("InvalidStateError","Can not call createOffer after close"));var v=y.transceivers.filter(function(W){return"audio"===W.kind}).length,p=y.transceivers.filter(function(W){return"video"===W.kind}).length,b=arguments[0];if(b){if(b.mandatory||b.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==b.offerToReceiveAudio&&(v=!0===b.offerToReceiveAudio?1:!1===b.offerToReceiveAudio?0:b.offerToReceiveAudio),void 0!==b.offerToReceiveVideo&&(p=!0===b.offerToReceiveVideo?1:!1===b.offerToReceiveVideo?0:b.offerToReceiveVideo)}for(y.transceivers.forEach(function(W){"audio"===W.kind?--v<0&&(W.wantReceive=!1):"video"===W.kind&&--p<0&&(W.wantReceive=!1)});v>0||p>0;)v>0&&(y._createTransceiver("audio"),v--),p>0&&(y._createTransceiver("video"),p--);var R=O.writeSessionBoilerplate(y._sdpSessionId,y._sdpSessionVersion++);y.transceivers.forEach(function(W,Q){var J=W.track,ee=W.kind,z=W.mid||O.generateIdentifier();W.mid=z,W.iceGatherer||(W.iceGatherer=y._createIceGatherer(Q,y.usingBundle));var oe=I.RTCRtpSender.getCapabilities(ee);A<15019&&(oe.codecs=oe.codecs.filter(function(pe){return"rtx"!==pe.name})),oe.codecs.forEach(function(pe){"H264"===pe.name&&void 0===pe.parameters["level-asymmetry-allowed"]&&(pe.parameters["level-asymmetry-allowed"]="1"),W.remoteCapabilities&&W.remoteCapabilities.codecs&&W.remoteCapabilities.codecs.forEach(function(De){pe.name.toLowerCase()===De.name.toLowerCase()&&pe.clockRate===De.clockRate&&(pe.preferredPayloadType=De.payloadType)})}),oe.headerExtensions.forEach(function(pe){(W.remoteCapabilities&&W.remoteCapabilities.headerExtensions||[]).forEach(function(De){pe.uri===De.uri&&(pe.id=De.id)})});var me=W.sendEncodingParameters||[{ssrc:1001*(2*Q+1)}];J&&A>=15019&&"video"===ee&&!me[0].rtx&&(me[0].rtx={ssrc:me[0].ssrc+1}),W.wantReceive&&(W.rtpReceiver=new I.RTCRtpReceiver(W.dtlsTransport,ee)),W.localCapabilities=oe,W.sendEncodingParameters=me}),"max-compat"!==y._config.bundlePolicy&&(R+="a=group:BUNDLE "+y.transceivers.map(function(W){return W.mid}).join(" ")+"\r\n"),R+="a=ice-options:trickle\r\n",y.transceivers.forEach(function(W,Q){R+=L(W,W.localCapabilities,"offer",W.stream,y._dtlsRole),R+="a=rtcp-rsize\r\n",!W.iceGatherer||"new"===y.iceGatheringState||0!==Q&&y.usingBundle||(W.iceGatherer.getLocalCandidates().forEach(function(J){J.component=1,R+="a="+O.writeCandidate(J)+"\r\n"}),"completed"===W.iceGatherer.state&&(R+="a=end-of-candidates\r\n"))});var q=new I.RTCSessionDescription({type:"offer",sdp:R});return Promise.resolve(q)},D.prototype.createAnswer=function(){var y=this;if(y._isClosed)return Promise.reject(_("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==y.signalingState&&"have-local-pranswer"!==y.signalingState)return Promise.reject(_("InvalidStateError","Can not call createAnswer in signalingState "+y.signalingState));var v=O.writeSessionBoilerplate(y._sdpSessionId,y._sdpSessionVersion++);y.usingBundle&&(v+="a=group:BUNDLE "+y.transceivers.map(function(R){return R.mid}).join(" ")+"\r\n"),v+="a=ice-options:trickle\r\n";var p=O.getMediaSections(y._remoteDescription.sdp).length;y.transceivers.forEach(function(R,q){if(!(q+1>p)){if(R.rejected)return"application"===R.kind?v+="DTLS/SCTP"===R.protocol?"m=application 0 DTLS/SCTP 5000\r\n":"m=application 0 "+R.protocol+" webrtc-datachannel\r\n":"audio"===R.kind?v+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===R.kind&&(v+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(v+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+R.mid+"\r\n");var W;R.stream&&("audio"===R.kind?W=R.stream.getAudioTracks()[0]:"video"===R.kind&&(W=R.stream.getVideoTracks()[0]),W&&A>=15019&&"video"===R.kind&&!R.sendEncodingParameters[0].rtx&&(R.sendEncodingParameters[0].rtx={ssrc:R.sendEncodingParameters[0].ssrc+1}));var Q=G(R.localCapabilities,R.remoteCapabilities);!Q.codecs.filter(function(J){return"rtx"===J.name.toLowerCase()}).length&&R.sendEncodingParameters[0].rtx&&delete R.sendEncodingParameters[0].rtx,v+=L(R,Q,"answer",R.stream,y._dtlsRole),R.rtcpParameters&&R.rtcpParameters.reducedSize&&(v+="a=rtcp-rsize\r\n")}});var b=new I.RTCSessionDescription({type:"answer",sdp:v});return Promise.resolve(b)},D.prototype.addIceCandidate=function(y){var v,p=this;return y&&void 0===y.sdpMLineIndex&&!y.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(b,R){if(!p._remoteDescription)return R(_("InvalidStateError","Can not add ICE candidate without a remote description"));if(y&&""!==y.candidate){var q=y.sdpMLineIndex;if(y.sdpMid)for(var W=0;W<p.transceivers.length;W++)if(p.transceivers[W].mid===y.sdpMid){q=W;break}var Q=p.transceivers[q];if(!Q)return R(_("OperationError","Can not add ICE candidate"));if(Q.rejected)return b();var J=Object.keys(y.candidate).length>0?O.parseCandidate(y.candidate):{};if("tcp"===J.protocol&&(0===J.port||9===J.port)||J.component&&1!==J.component)return b();if((0===q||q>0&&Q.iceTransport!==p.transceivers[0].iceTransport)&&!V(Q.iceTransport,J))return R(_("OperationError","Can not add ICE candidate"));var ee=y.candidate.trim();0===ee.indexOf("a=")&&(ee=ee.substr(2)),(v=O.getMediaSections(p._remoteDescription.sdp))[q]+="a="+(J.type?ee:"end-of-candidates")+"\r\n",p._remoteDescription.sdp=O.getDescription(p._remoteDescription.sdp)+v.join("")}else for(var z=0;z<p.transceivers.length&&(p.transceivers[z].rejected||(p.transceivers[z].iceTransport.addRemoteCandidate({}),(v=O.getMediaSections(p._remoteDescription.sdp))[z]+="a=end-of-candidates\r\n",p._remoteDescription.sdp=O.getDescription(p._remoteDescription.sdp)+v.join(""),!p.usingBundle));z++);b()})},D.prototype.getStats=function(y){if(y&&y instanceof I.MediaStreamTrack){var v=null;if(this.transceivers.forEach(function(b){b.rtpSender&&b.rtpSender.track===y?v=b.rtpSender:b.rtpReceiver&&b.rtpReceiver.track===y&&(v=b.rtpReceiver)}),!v)throw _("InvalidAccessError","Invalid selector.");return v.getStats()}var p=[];return this.transceivers.forEach(function(b){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(R){b[R]&&p.push(b[R].getStats())})}),Promise.all(p).then(function(b){var R=new Map;return b.forEach(function(q){q.forEach(function(W){R.set(W.id,W)})}),R})},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach(function(y){var v=I[y];if(v&&v.prototype&&v.prototype.getStats){var p=v.prototype.getStats;v.prototype.getStats=function(){return p.apply(this).then(function(b){var R=new Map;return Object.keys(b).forEach(function(q){b[q].type=function(I){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[I.type]||I.type}(b[q]),R.set(q,b[q])}),R})}}});var P=["createOffer","createAnswer"];return P.forEach(function(y){var v=D.prototype[y];D.prototype[y]=function(){var p=arguments;return"function"==typeof p[0]||"function"==typeof p[1]?v.apply(this,[arguments[2]]).then(function(b){"function"==typeof p[0]&&p[0].apply(null,[b])},function(b){"function"==typeof p[1]&&p[1].apply(null,[b])}):v.apply(this,arguments)}}),(P=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach(function(y){var v=D.prototype[y];D.prototype[y]=function(){var p=arguments;return"function"==typeof p[1]||"function"==typeof p[2]?v.apply(this,arguments).then(function(){"function"==typeof p[1]&&p[1].apply(null)},function(b){"function"==typeof p[2]&&p[2].apply(null,[b])}):v.apply(this,arguments)}}),["getStats"].forEach(function(y){var v=D.prototype[y];D.prototype[y]=function(){var p=arguments;return"function"==typeof p[1]?v.apply(this,arguments).then(function(){"function"==typeof p[1]&&p[1].apply(null)}):v.apply(this,arguments)}}),D}},{sdp:"YHvh"}],YdKx:[function(se,we,X){"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.shimGetUserMedia=function(F){var L=F&&F.navigator,U=L.mediaDevices.getUserMedia.bind(L.mediaDevices);L.mediaDevices.getUserMedia=function(G){return U(G).catch(function(B){return Promise.reject({name:{PermissionDeniedError:"NotAllowedError"}[(V=B).name]||V.name,message:V.message,constraint:V.constraint,toString:function(){return this.name}});var V})}}},{}],P3bV:[function(se,we,X){"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.shimGetDisplayMedia=function(F){"getDisplayMedia"in F.navigator&&F.navigator.mediaDevices&&(F.navigator.mediaDevices&&"getDisplayMedia"in F.navigator.mediaDevices||(F.navigator.mediaDevices.getDisplayMedia=F.navigator.getDisplayMedia.bind(F.navigator)))}},{}],XRic:[function(se,we,X){"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.shimPeerConnection=function(M){var S=O.detectBrowser(M);if(M.RTCIceGatherer&&(M.RTCIceCandidate||(M.RTCIceCandidate=function(y){return y}),M.RTCSessionDescription||(M.RTCSessionDescription=function(y){return y}),S.version<15025)){var D=Object.getOwnPropertyDescriptor(M.MediaStreamTrack.prototype,"enabled");Object.defineProperty(M.MediaStreamTrack.prototype,"enabled",{set:function(y){D.set.call(this,y);var v=new Event("enabled");v.enabled=y,this.dispatchEvent(v)}})}!M.RTCRtpSender||"dtmf"in M.RTCRtpSender.prototype||Object.defineProperty(M.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new M.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),M.RTCDtmfSender&&!M.RTCDTMFSender&&(M.RTCDTMFSender=M.RTCDtmfSender);var P=(0,L.default)(M,S.version);M.RTCPeerConnection=function(y){return y&&y.iceServers&&(y.iceServers=(0,F.filterIceServers)(y.iceServers,S.version),O.log("ICE servers after filtering:",y.iceServers)),new P(y)},M.RTCPeerConnection.prototype=P.prototype},X.shimReplaceTrack=function(M){!M.RTCRtpSender||"replaceTrack"in M.RTCRtpSender.prototype||(M.RTCRtpSender.prototype.replaceTrack=M.RTCRtpSender.prototype.setTrack)},Object.defineProperty(X,"shimGetUserMedia",{enumerable:!0,get:function(){return U.shimGetUserMedia}}),Object.defineProperty(X,"shimGetDisplayMedia",{enumerable:!0,get:function(){return G.shimGetDisplayMedia}});var M,O=function(M){if(M&&M.__esModule)return M;if(null===M||"object"!=typeof M&&"function"!=typeof M)return{default:M};var S=V();if(S&&S.has(M))return S.get(M);var D={},P=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var y in M)if(Object.prototype.hasOwnProperty.call(M,y)){var v=P?Object.getOwnPropertyDescriptor(M,y):null;v&&(v.get||v.set)?Object.defineProperty(D,y,v):D[y]=M[y]}return D.default=M,S&&S.set(M,D),D}(se("../utils")),F=se("./filtericeservers"),L=(M=se("rtcpeerconnection-shim"))&&M.__esModule?M:{default:M},U=se("./getusermedia"),G=se("./getdisplaymedia");function V(){if("function"!=typeof WeakMap)return null;var M=new WeakMap;return V=function(){return M},M}},{"../utils":"iSxC","./filtericeservers":"NZ1C","rtcpeerconnection-shim":"NJ2u","./getusermedia":"YdKx","./getdisplaymedia":"P3bV"}],GzSv:[function(se,we,X){"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.shimGetUserMedia=function(B){var V=O.detectBrowser(B),_=B&&B.navigator,I=B&&B.MediaStreamTrack;if(_.getUserMedia=function(P,y,v){O.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),_.mediaDevices.getUserMedia(P).then(y,v)},!(V.version>55&&"autoGainControl"in _.mediaDevices.getSupportedConstraints())){var A=function(P,y,v){y in P&&!(v in P)&&(P[v]=P[y],delete P[y])},M=_.mediaDevices.getUserMedia.bind(_.mediaDevices);if(_.mediaDevices.getUserMedia=function(P){return"object"===U(P)&&"object"===U(P.audio)&&(P=JSON.parse(JSON.stringify(P)),A(P.audio,"autoGainControl","mozAutoGainControl"),A(P.audio,"noiseSuppression","mozNoiseSuppression")),M(P)},I&&I.prototype.getSettings){var S=I.prototype.getSettings;I.prototype.getSettings=function(){var P=S.apply(this,arguments);return A(P,"mozAutoGainControl","autoGainControl"),A(P,"mozNoiseSuppression","noiseSuppression"),P}}if(I&&I.prototype.applyConstraints){var D=I.prototype.applyConstraints;I.prototype.applyConstraints=function(P){return"audio"===this.kind&&"object"===U(P)&&(P=JSON.parse(JSON.stringify(P)),A(P,"autoGainControl","mozAutoGainControl"),A(P,"noiseSuppression","mozNoiseSuppression")),D.apply(this,[P])}}}};var O=function(B){if(B&&B.__esModule)return B;if(null===B||"object"!=typeof B&&"function"!=typeof B)return{default:B};var V=F();if(V&&V.has(B))return V.get(B);var _={},I=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var A in B)if(Object.prototype.hasOwnProperty.call(B,A)){var M=I?Object.getOwnPropertyDescriptor(B,A):null;M&&(M.get||M.set)?Object.defineProperty(_,A,M):_[A]=B[A]}return _.default=B,V&&V.set(B,_),_}(se("../utils"));function F(){if("function"!=typeof WeakMap)return null;var B=new WeakMap;return F=function(){return B},B}function U(B){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(V){return typeof V}:function(V){return V&&"function"==typeof Symbol&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V})(B)}},{"../utils":"iSxC"}],UuGU:[function(se,we,X){"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.shimGetDisplayMedia=function(F,L){F.navigator.mediaDevices&&"getDisplayMedia"in F.navigator.mediaDevices||F.navigator.mediaDevices&&(F.navigator.mediaDevices.getDisplayMedia=function(U){if(!U||!U.video){var G=new DOMException("getDisplayMedia without video constraints is undefined");return G.name="NotFoundError",G.code=8,Promise.reject(G)}return!0===U.video?U.video={mediaSource:L}:U.video.mediaSource=L,F.navigator.mediaDevices.getUserMedia(U)})}},{}],Fzdr:[function(se,we,X){"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.shimOnTrack=function(p){"object"===V(p)&&p.RTCTrackEvent&&"receiver"in p.RTCTrackEvent.prototype&&!("transceiver"in p.RTCTrackEvent.prototype)&&Object.defineProperty(p.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},X.shimPeerConnection=function(p){var b=O.detectBrowser(p);if("object"===V(p)&&(p.RTCPeerConnection||p.mozRTCPeerConnection)){if(!p.RTCPeerConnection&&p.mozRTCPeerConnection&&(p.RTCPeerConnection=p.mozRTCPeerConnection),b.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(Q){var J=p.RTCPeerConnection.prototype[Q],ee=function(p,b,R){return b in p?Object.defineProperty(p,b,{value:R,enumerable:!0,configurable:!0,writable:!0}):p[b]=R,p}({},Q,function(){return arguments[0]=new("addIceCandidate"===Q?p.RTCIceCandidate:p.RTCSessionDescription)(arguments[0]),J.apply(this,arguments)});p.RTCPeerConnection.prototype[Q]=ee[Q]}),b.version<68){var R=p.RTCPeerConnection.prototype.addIceCandidate;p.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?arguments[0]&&""===arguments[0].candidate?Promise.resolve():R.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}var q={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},W=p.RTCPeerConnection.prototype.getStats;p.RTCPeerConnection.prototype.getStats=function(){var[Q,J,ee]=arguments;return W.apply(this,[Q||null]).then(function(z){if(b.version<53&&!J)try{z.forEach(function(oe){oe.type=q[oe.type]||oe.type})}catch(oe){if("TypeError"!==oe.name)throw oe;z.forEach(function(me,pe){z.set(pe,Object.assign({},me,{type:q[me.type]||me.type}))})}return z}).then(J,ee)}}},X.shimSenderGetStats=function(p){if("object"===V(p)&&p.RTCPeerConnection&&p.RTCRtpSender&&(!p.RTCRtpSender||!("getStats"in p.RTCRtpSender.prototype))){var b=p.RTCPeerConnection.prototype.getSenders;b&&(p.RTCPeerConnection.prototype.getSenders=function(){var q=this,W=b.apply(this,[]);return W.forEach(function(Q){return Q._pc=q}),W});var R=p.RTCPeerConnection.prototype.addTrack;R&&(p.RTCPeerConnection.prototype.addTrack=function(){var q=R.apply(this,arguments);return q._pc=this,q}),p.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}},X.shimReceiverGetStats=function(p){if("object"===V(p)&&p.RTCPeerConnection&&p.RTCRtpSender&&(!p.RTCRtpSender||!("getStats"in p.RTCRtpReceiver.prototype))){var b=p.RTCPeerConnection.prototype.getReceivers;b&&(p.RTCPeerConnection.prototype.getReceivers=function(){var R=this,q=b.apply(this,[]);return q.forEach(function(W){return W._pc=R}),q}),O.wrapPeerConnectionEvent(p,"track",function(R){return R.receiver._pc=R.srcElement,R}),p.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}},X.shimRemoveStream=function(p){!p.RTCPeerConnection||"removeStream"in p.RTCPeerConnection.prototype||(p.RTCPeerConnection.prototype.removeStream=function(b){var R=this;O.deprecated("removeStream","removeTrack"),this.getSenders().forEach(function(q){q.track&&b.getTracks().includes(q.track)&&R.removeTrack(q)})})},X.shimRTCDataChannel=function(p){p.DataChannel&&!p.RTCDataChannel&&(p.RTCDataChannel=p.DataChannel)},X.shimAddTransceiver=function(p){if("object"===V(p)&&p.RTCPeerConnection){var b=p.RTCPeerConnection.prototype.addTransceiver;b&&(p.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];var R=arguments[1],q=R&&"sendEncodings"in R;q&&R.sendEncodings.forEach(function(ee){if("rid"in ee&&!/^[a-z0-9]{0,16}$/i.test(ee.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in ee&&!(parseFloat(ee.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in ee&&!(parseFloat(ee.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});var W=b.apply(this,arguments);if(q){var{sender:Q}=W,J=Q.getParameters();"encodings"in J||(J.encodings=R.sendEncodings,this.setParametersPromises.push(Q.setParameters(J).catch(function(){})))}return W})}},X.shimCreateOffer=function(p){if("object"===V(p)&&p.RTCPeerConnection){var b=p.RTCPeerConnection.prototype.createOffer;p.RTCPeerConnection.prototype.createOffer=function(){var R=arguments,q=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(function(){return b.apply(q,R)}).finally(function(){q.setParametersPromises=[]}):b.apply(this,arguments)}}},X.shimCreateAnswer=function(p){if("object"===V(p)&&p.RTCPeerConnection){var b=p.RTCPeerConnection.prototype.createAnswer;p.RTCPeerConnection.prototype.createAnswer=function(){var R=arguments,q=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(function(){return b.apply(q,R)}).finally(function(){q.setParametersPromises=[]}):b.apply(this,arguments)}}},Object.defineProperty(X,"shimGetUserMedia",{enumerable:!0,get:function(){return F.shimGetUserMedia}}),Object.defineProperty(X,"shimGetDisplayMedia",{enumerable:!0,get:function(){return L.shimGetDisplayMedia}});var O=function(p){if(p&&p.__esModule)return p;if(null===p||"object"!=typeof p&&"function"!=typeof p)return{default:p};var b=U();if(b&&b.has(p))return b.get(p);var R={},q=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var W in p)if(Object.prototype.hasOwnProperty.call(p,W)){var Q=q?Object.getOwnPropertyDescriptor(p,W):null;Q&&(Q.get||Q.set)?Object.defineProperty(R,W,Q):R[W]=p[W]}return R.default=p,b&&b.set(p,R),R}(se("../utils")),F=se("./getusermedia"),L=se("./getdisplaymedia");function U(){if("function"!=typeof WeakMap)return null;var p=new WeakMap;return U=function(){return p},p}function V(p){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"==typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(p)}},{"../utils":"iSxC","./getusermedia":"GzSv","./getdisplaymedia":"UuGU"}],t1lL:[function(se,we,X){"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.shimLocalStreamsAPI=function(D){if("object"===U(D)&&D.RTCPeerConnection){if("getLocalStreams"in D.RTCPeerConnection.prototype||(D.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in D.RTCPeerConnection.prototype)){var P=D.RTCPeerConnection.prototype.addTrack;D.RTCPeerConnection.prototype.addStream=function(y){var v=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(y)||this._localStreams.push(y),y.getAudioTracks().forEach(function(p){return P.call(v,p,y)}),y.getVideoTracks().forEach(function(p){return P.call(v,p,y)})},D.RTCPeerConnection.prototype.addTrack=function(y){var v=arguments[1];return v&&(this._localStreams?this._localStreams.includes(v)||this._localStreams.push(v):this._localStreams=[v]),P.apply(this,arguments)}}"removeStream"in D.RTCPeerConnection.prototype||(D.RTCPeerConnection.prototype.removeStream=function(y){var v=this;this._localStreams||(this._localStreams=[]);var p=this._localStreams.indexOf(y);if(-1!==p){this._localStreams.splice(p,1);var b=y.getTracks();this.getSenders().forEach(function(R){b.includes(R.track)&&v.removeTrack(R)})}})}},X.shimRemoteStreamsAPI=function(D){if("object"===U(D)&&D.RTCPeerConnection&&("getRemoteStreams"in D.RTCPeerConnection.prototype||(D.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in D.RTCPeerConnection.prototype))){Object.defineProperty(D.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(y){var v=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=y),this.addEventListener("track",this._onaddstreampoly=function(p){p.streams.forEach(function(b){if(v._remoteStreams||(v._remoteStreams=[]),!v._remoteStreams.includes(b)){v._remoteStreams.push(b);var R=new Event("addstream");R.stream=b,v.dispatchEvent(R)}})})}});var P=D.RTCPeerConnection.prototype.setRemoteDescription;D.RTCPeerConnection.prototype.setRemoteDescription=function(){var y=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(v){v.streams.forEach(function(p){if(y._remoteStreams||(y._remoteStreams=[]),!(y._remoteStreams.indexOf(p)>=0)){y._remoteStreams.push(p);var b=new Event("addstream");b.stream=p,y.dispatchEvent(b)}})}),P.apply(y,arguments)}}},X.shimCallbacksAPI=function(D){if("object"===U(D)&&D.RTCPeerConnection){var P=D.RTCPeerConnection.prototype,y=P.createOffer,v=P.createAnswer,p=P.setLocalDescription,b=P.setRemoteDescription,R=P.addIceCandidate;P.createOffer=function(W,Q){var J=arguments.length>=2?arguments[2]:arguments[0],ee=y.apply(this,[J]);return Q?(ee.then(W,Q),Promise.resolve()):ee},P.createAnswer=function(W,Q){var J=arguments.length>=2?arguments[2]:arguments[0],ee=v.apply(this,[J]);return Q?(ee.then(W,Q),Promise.resolve()):ee};var q=function(W,Q,J){var ee=p.apply(this,[W]);return J?(ee.then(Q,J),Promise.resolve()):ee};P.setLocalDescription=q,P.setRemoteDescription=q=function(W,Q,J){var ee=b.apply(this,[W]);return J?(ee.then(Q,J),Promise.resolve()):ee},P.addIceCandidate=q=function(W,Q,J){var ee=R.apply(this,[W]);return J?(ee.then(Q,J),Promise.resolve()):ee}}},X.shimGetUserMedia=function(D){var P=D&&D.navigator;if(P.mediaDevices&&P.mediaDevices.getUserMedia){var y=P.mediaDevices,v=y.getUserMedia.bind(y);P.mediaDevices.getUserMedia=function(p){return v(I(p))}}!P.getUserMedia&&P.mediaDevices&&P.mediaDevices.getUserMedia&&(P.getUserMedia=function(p,b,R){P.mediaDevices.getUserMedia(p).then(b,R)}.bind(P))},X.shimConstraints=I,X.shimRTCIceServerUrls=function(D){var P=D.RTCPeerConnection;D.RTCPeerConnection=function(y,v){if(y&&y.iceServers){for(var p=[],b=0;b<y.iceServers.length;b++){var R=y.iceServers[b];!R.hasOwnProperty("urls")&&R.hasOwnProperty("url")?(O.deprecated("RTCIceServer.url","RTCIceServer.urls"),(R=JSON.parse(JSON.stringify(R))).urls=R.url,delete R.url,p.push(R)):p.push(y.iceServers[b])}y.iceServers=p}return new P(y,v)},D.RTCPeerConnection.prototype=P.prototype,"generateCertificate"in D.RTCPeerConnection&&Object.defineProperty(D.RTCPeerConnection,"generateCertificate",{get:function(){return P.generateCertificate}})},X.shimTrackEventTransceiver=function(D){"object"===U(D)&&D.RTCTrackEvent&&"receiver"in D.RTCTrackEvent.prototype&&!("transceiver"in D.RTCTrackEvent.prototype)&&Object.defineProperty(D.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},X.shimCreateOfferLegacy=function(D){var P=D.RTCPeerConnection.prototype.createOffer;D.RTCPeerConnection.prototype.createOffer=function(y){if(y){void 0!==y.offerToReceiveAudio&&(y.offerToReceiveAudio=!!y.offerToReceiveAudio);var v=this.getTransceivers().find(function(b){return"audio"===b.receiver.track.kind});!1===y.offerToReceiveAudio&&v?"sendrecv"===v.direction?v.setDirection?v.setDirection("sendonly"):v.direction="sendonly":"recvonly"===v.direction&&(v.setDirection?v.setDirection("inactive"):v.direction="inactive"):!0!==y.offerToReceiveAudio||v||this.addTransceiver("audio"),void 0!==y.offerToReceiveVideo&&(y.offerToReceiveVideo=!!y.offerToReceiveVideo);var p=this.getTransceivers().find(function(b){return"video"===b.receiver.track.kind});!1===y.offerToReceiveVideo&&p?"sendrecv"===p.direction?p.setDirection?p.setDirection("sendonly"):p.direction="sendonly":"recvonly"===p.direction&&(p.setDirection?p.setDirection("inactive"):p.direction="inactive"):!0!==y.offerToReceiveVideo||p||this.addTransceiver("video")}return P.apply(this,arguments)}};var O=function(D){if(D&&D.__esModule)return D;if(null===D||"object"!=typeof D&&"function"!=typeof D)return{default:D};var P=F();if(P&&P.has(D))return P.get(D);var y={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in D)if(Object.prototype.hasOwnProperty.call(D,p)){var b=v?Object.getOwnPropertyDescriptor(D,p):null;b&&(b.get||b.set)?Object.defineProperty(y,p,b):y[p]=D[p]}return y.default=D,P&&P.set(D,y),y}(se("../utils"));function F(){if("function"!=typeof WeakMap)return null;var D=new WeakMap;return F=function(){return D},D}function U(D){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(P){return typeof P}:function(P){return P&&"function"==typeof Symbol&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P})(D)}function I(D){return D&&void 0!==D.video?Object.assign({},D,{video:O.compactObject(D.video)}):D}},{"../utils":"iSxC"}],GOQK:[function(se,we,X){"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.shimRTCIceCandidate=function(S){if(S.RTCIceCandidate&&(!S.RTCIceCandidate||!("foundation"in S.RTCIceCandidate.prototype))){var D=S.RTCIceCandidate;S.RTCIceCandidate=function(P){if("object"===B(P)&&P.candidate&&0===P.candidate.indexOf("a=")&&((P=JSON.parse(JSON.stringify(P))).candidate=P.candidate.substr(2)),P.candidate&&P.candidate.length){var y=new D(P),v=O.default.parseCandidate(P.candidate),p=Object.assign(y,v);return p.toJSON=function(){return{candidate:p.candidate,sdpMid:p.sdpMid,sdpMLineIndex:p.sdpMLineIndex,usernameFragment:p.usernameFragment}},p}return new D(P)},S.RTCIceCandidate.prototype=D.prototype,F.wrapPeerConnectionEvent(S,"icecandidate",function(P){return P.candidate&&Object.defineProperty(P,"candidate",{value:new S.RTCIceCandidate(P.candidate),writable:"false"}),P})}},X.shimMaxMessageSize=function(S){if(S.RTCPeerConnection){var D=F.detectBrowser(S);"sctp"in S.RTCPeerConnection.prototype||Object.defineProperty(S.RTCPeerConnection.prototype,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp}});var P=S.RTCPeerConnection.prototype.setRemoteDescription;S.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===D.browser&&D.version>=76){var{sdpSemantics:y}=this.getConfiguration();"plan-b"===y&&Object.defineProperty(this,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(function(J){if(!J||!J.sdp)return!1;var ee=O.default.splitSections(J.sdp);return ee.shift(),ee.some(function(z){var oe=O.default.parseMLine(z);return oe&&"application"===oe.kind&&-1!==oe.protocol.indexOf("SCTP")})}(arguments[0])){var v,p=function(J){var ee=J.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===ee||ee.length<2)return-1;var z=parseInt(ee[1],10);return z!=z?-1:z}(arguments[0]),b=(W=p,Q=65536,"firefox"===D.browser&&(Q=D.version<57?-1===W?16384:2147483637:D.version<60?57===D.version?65535:65536:2147483637),Q),R=function(J,ee){var z=65536;"firefox"===D.browser&&57===D.version&&(z=65535);var oe=O.default.matchPrefix(J.sdp,"a=max-message-size:");return oe.length>0?z=parseInt(oe[0].substr(19),10):"firefox"===D.browser&&-1!==ee&&(z=2147483637),z}(arguments[0],p);v=0===b&&0===R?Number.POSITIVE_INFINITY:0===b||0===R?Math.max(b,R):Math.min(b,R);var q={};Object.defineProperty(q,"maxMessageSize",{get:function(){return v}}),this._sctp=q}var W,Q;return P.apply(this,arguments)}}},X.shimSendThrowTypeError=function(S){if(S.RTCPeerConnection&&"createDataChannel"in S.RTCPeerConnection.prototype){var D=S.RTCPeerConnection.prototype.createDataChannel;S.RTCPeerConnection.prototype.createDataChannel=function(){var y=D.apply(this,arguments);return P(y,this),y},F.wrapPeerConnectionEvent(S,"datachannel",function(y){return P(y.channel,y.target),y})}function P(y,v){var p=y.send;y.send=function(){var b=arguments[0],R=b.length||b.size||b.byteLength;if("open"===y.readyState&&v.sctp&&R>v.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+v.sctp.maxMessageSize+" bytes)");return p.apply(y,arguments)}}},X.shimConnectionState=function(S){if(S.RTCPeerConnection&&!("connectionState"in S.RTCPeerConnection.prototype)){var D=S.RTCPeerConnection.prototype;Object.defineProperty(D,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(D,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(P){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),P&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=P)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(function(P){var y=D[P];D[P]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(v){var p=v.target;if(p._lastConnectionState!==p.connectionState){p._lastConnectionState=p.connectionState;var b=new Event("connectionstatechange",v);p.dispatchEvent(b)}return v},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),y.apply(this,arguments)}})}},X.removeAllowExtmapMixed=function(S){if(S.RTCPeerConnection){var D=F.detectBrowser(S);if(!("chrome"===D.browser&&D.version>=71)){var P=S.RTCPeerConnection.prototype.setRemoteDescription;S.RTCPeerConnection.prototype.setRemoteDescription=function(y){return y&&y.sdp&&-1!==y.sdp.indexOf("\na=extmap-allow-mixed")&&(y.sdp=y.sdp.split("\n").filter(function(v){return"a=extmap-allow-mixed"!==v.trim()}).join("\n")),P.apply(this,arguments)}}}};var S,O=(S=se("sdp"))&&S.__esModule?S:{default:S},F=function(S){if(S&&S.__esModule)return S;if(null===S||"object"!=typeof S&&"function"!=typeof S)return{default:S};var D=L();if(D&&D.has(S))return D.get(S);var P={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var v in S)if(Object.prototype.hasOwnProperty.call(S,v)){var p=y?Object.getOwnPropertyDescriptor(S,v):null;p&&(p.get||p.set)?Object.defineProperty(P,v,p):P[v]=S[v]}return P.default=S,D&&D.set(S,P),P}(se("./utils"));function L(){if("function"!=typeof WeakMap)return null;var S=new WeakMap;return L=function(){return S},S}function B(S){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(D){return typeof D}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D})(S)}},{sdp:"YHvh","./utils":"iSxC"}],KtlG:[function(se,we,X){"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.adapterFactory=function(){var{window:A}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},M=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0},S=O.log,D=O.detectBrowser(A),P={browserDetails:D,commonShim:B,extractVersion:O.extractVersion,disableLog:O.disableLog,disableWarnings:O.disableWarnings};switch(D.browser){case"chrome":if(!F||!F.shimPeerConnection||!M.shimChrome)return S("Chrome shim is not included in this adapter release."),P;S("adapter.js shimming chrome."),P.browserShim=F,F.shimGetUserMedia(A),F.shimMediaStream(A),F.shimPeerConnection(A),F.shimOnTrack(A),F.shimAddTrackRemoveTrack(A),F.shimGetSendersWithDtmf(A),F.shimGetStats(A),F.shimSenderReceiverGetStats(A),F.fixNegotiationNeeded(A),B.shimRTCIceCandidate(A),B.shimConnectionState(A),B.shimMaxMessageSize(A),B.shimSendThrowTypeError(A),B.removeAllowExtmapMixed(A);break;case"firefox":if(!U||!U.shimPeerConnection||!M.shimFirefox)return S("Firefox shim is not included in this adapter release."),P;S("adapter.js shimming firefox."),P.browserShim=U,U.shimGetUserMedia(A),U.shimPeerConnection(A),U.shimOnTrack(A),U.shimRemoveStream(A),U.shimSenderGetStats(A),U.shimReceiverGetStats(A),U.shimRTCDataChannel(A),U.shimAddTransceiver(A),U.shimCreateOffer(A),U.shimCreateAnswer(A),B.shimRTCIceCandidate(A),B.shimConnectionState(A),B.shimMaxMessageSize(A),B.shimSendThrowTypeError(A);break;case"edge":if(!L||!L.shimPeerConnection||!M.shimEdge)return S("MS edge shim is not included in this adapter release."),P;S("adapter.js shimming edge."),P.browserShim=L,L.shimGetUserMedia(A),L.shimGetDisplayMedia(A),L.shimPeerConnection(A),L.shimReplaceTrack(A),B.shimMaxMessageSize(A),B.shimSendThrowTypeError(A);break;case"safari":if(!G||!M.shimSafari)return S("Safari shim is not included in this adapter release."),P;S("adapter.js shimming safari."),P.browserShim=G,G.shimRTCIceServerUrls(A),G.shimCreateOfferLegacy(A),G.shimCallbacksAPI(A),G.shimLocalStreamsAPI(A),G.shimRemoteStreamsAPI(A),G.shimTrackEventTransceiver(A),G.shimGetUserMedia(A),B.shimRTCIceCandidate(A),B.shimMaxMessageSize(A),B.shimSendThrowTypeError(A),B.removeAllowExtmapMixed(A);break;default:S("Unsupported browser!")}return P};var O=_(se("./utils")),F=_(se("./chrome/chrome_shim")),L=_(se("./edge/edge_shim")),U=_(se("./firefox/firefox_shim")),G=_(se("./safari/safari_shim")),B=_(se("./common_shim"));function V(){if("function"!=typeof WeakMap)return null;var A=new WeakMap;return V=function(){return A},A}function _(A){if(A&&A.__esModule)return A;if(null===A||"object"!=typeof A&&"function"!=typeof A)return{default:A};var M=V();if(M&&M.has(A))return M.get(A);var S={},D=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var P in A)if(Object.prototype.hasOwnProperty.call(A,P)){var y=D?Object.getOwnPropertyDescriptor(A,P):null;y&&(y.get||y.set)?Object.defineProperty(S,P,y):S[P]=A[P]}return S.default=A,M&&M.set(A,S),S}},{"./utils":"iSxC","./chrome/chrome_shim":"uI5X","./edge/edge_shim":"XRic","./firefox/firefox_shim":"Fzdr","./safari/safari_shim":"t1lL","./common_shim":"GOQK"}],tI1X:[function(se,we,X){"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.default=void 0;var F=(0,se("./adapter_factory.js").adapterFactory)({window});X.default=F},{"./adapter_factory.js":"KtlG"}],sXtV:[function(se,we,X){"use strict";var O=this&&this.__importDefault||function(L){return L&&L.__esModule?L:{default:L}};Object.defineProperty(X,"__esModule",{value:!0});var F=O(se("webrtc-adapter"));X.webRTCAdapter=F.default},{"webrtc-adapter":"tI1X"}],I31f:[function(se,we,X){"use strict";Object.defineProperty(X,"__esModule",{value:!0});var O=se("./adapter");X.Supports=new(function(){function F(){this.isIOS=["iPad","iPhone","iPod"].includes(navigator.platform),this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}return F.prototype.isWebRTCSupported=function(){return"undefined"!=typeof RTCPeerConnection},F.prototype.isBrowserSupported=function(){var L=this.getBrowser(),U=this.getVersion();return!!this.supportedBrowsers.includes(L)&&("chrome"===L?U>=this.minChromeVersion:"firefox"===L?U>=this.minFirefoxVersion:"safari"===L&&!this.isIOS&&U>=this.minSafariVersion)},F.prototype.getBrowser=function(){return O.webRTCAdapter.browserDetails.browser},F.prototype.getVersion=function(){return O.webRTCAdapter.browserDetails.version||0},F.prototype.isUnifiedPlanSupported=function(){var L,U=this.getBrowser(),G=O.webRTCAdapter.browserDetails.version||0;if("chrome"===U&&G<72)return!1;if("firefox"===U&&G>=59)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;var B=!1;try{(L=new RTCPeerConnection).addTransceiver("audio"),B=!0}catch(V){}finally{L&&L.close()}return B},F.prototype.toString=function(){return"Supports: \n    browser:"+this.getBrowser()+" \n    version:"+this.getVersion()+" \n    isIOS:"+this.isIOS+" \n    isWebRTCSupported:"+this.isWebRTCSupported()+" \n    isBrowserSupported:"+this.isBrowserSupported()+" \n    isUnifiedPlanSupported:"+this.isUnifiedPlanSupported()},F}())},{"./adapter":"sXtV"}],BHXf:[function(se,we,X){"use strict";var O=this&&this.__importStar||function(G){if(G&&G.__esModule)return G;var B={};if(null!=G)for(var V in G)Object.hasOwnProperty.call(G,V)&&(B[V]=G[V]);return B.default=G,B};Object.defineProperty(X,"__esModule",{value:!0});var F=O(se("peerjs-js-binarypack")),L=se("./supports"),U={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"turn:0.peerjs.com:3478",username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};X.util=new(function(){function G(){this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.chunkedMTU=16300,this.defaultConfig=U,this.browser=L.Supports.getBrowser(),this.browserVersion=L.Supports.getVersion(),this.supports=function(){var B,V={browser:L.Supports.isBrowserSupported(),webRTC:L.Supports.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!V.webRTC)return V;try{B=new RTCPeerConnection(U),V.audioVideo=!0;var _=void 0;try{_=B.createDataChannel("_PEERJSTEST",{ordered:!0}),V.data=!0,V.reliable=!!_.ordered;try{_.binaryType="blob",V.binaryBlob=!L.Supports.isIOS}catch(I){}}catch(I){}finally{_&&_.close()}}catch(I){}finally{B&&B.close()}return V}(),this.pack=F.pack,this.unpack=F.unpack,this._dataCount=1}return G.prototype.noop=function(){},G.prototype.validateId=function(B){return!B||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(B)},G.prototype.chunk=function(B){for(var V=[],_=B.size,I=Math.ceil(_/X.util.chunkedMTU),A=0,M=0;M<_;){var S=Math.min(_,M+X.util.chunkedMTU),D=B.slice(M,S);V.push({__peerData:this._dataCount,n:A,data:D,total:I}),M=S,A++}return this._dataCount++,V},G.prototype.blobToArrayBuffer=function(B,V){var _=new FileReader;return _.onload=function(I){I.target&&V(I.target.result)},_.readAsArrayBuffer(B),_},G.prototype.binaryStringToArrayBuffer=function(B){for(var V=new Uint8Array(B.length),_=0;_<B.length;_++)V[_]=255&B.charCodeAt(_);return V.buffer},G.prototype.randomToken=function(){return Math.random().toString(36).substr(2)},G.prototype.isSecure=function(){return"https:"===location.protocol},G}())},{"peerjs-js-binarypack":"kdPp","./supports":"I31f"}],JJlS:[function(se,we,X){"use strict";var O=Object.prototype.hasOwnProperty,F="~";function L(){}function U(_,I,A){this.fn=_,this.context=I,this.once=A||!1}function G(_,I,A,M,S){if("function"!=typeof A)throw new TypeError("The listener must be a function");var D=new U(A,M||_,S),P=F?F+I:I;return _._events[P]?_._events[P].fn?_._events[P]=[_._events[P],D]:_._events[P].push(D):(_._events[P]=D,_._eventsCount++),_}function B(_,I){0==--_._eventsCount?_._events=new L:delete _._events[I]}function V(){this._events=new L,this._eventsCount=0}Object.create&&(L.prototype=Object.create(null),(new L).__proto__||(F=!1)),V.prototype.eventNames=function(){var _,I,A=[];if(0===this._eventsCount)return A;for(I in _=this._events)O.call(_,I)&&A.push(F?I.slice(1):I);return Object.getOwnPropertySymbols?A.concat(Object.getOwnPropertySymbols(_)):A},V.prototype.listeners=function(_){var A=this._events[F?F+_:_];if(!A)return[];if(A.fn)return[A.fn];for(var M=0,S=A.length,D=new Array(S);M<S;M++)D[M]=A[M].fn;return D},V.prototype.listenerCount=function(_){var A=this._events[F?F+_:_];return A?A.fn?1:A.length:0},V.prototype.emit=function(_,I,A,M,S,D){var P=F?F+_:_;if(!this._events[P])return!1;var y,v,p=this._events[P],b=arguments.length;if(p.fn){switch(p.once&&this.removeListener(_,p.fn,void 0,!0),b){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,I),!0;case 3:return p.fn.call(p.context,I,A),!0;case 4:return p.fn.call(p.context,I,A,M),!0;case 5:return p.fn.call(p.context,I,A,M,S),!0;case 6:return p.fn.call(p.context,I,A,M,S,D),!0}for(v=1,y=new Array(b-1);v<b;v++)y[v-1]=arguments[v];p.fn.apply(p.context,y)}else{var R,q=p.length;for(v=0;v<q;v++)switch(p[v].once&&this.removeListener(_,p[v].fn,void 0,!0),b){case 1:p[v].fn.call(p[v].context);break;case 2:p[v].fn.call(p[v].context,I);break;case 3:p[v].fn.call(p[v].context,I,A);break;case 4:p[v].fn.call(p[v].context,I,A,M);break;default:if(!y)for(R=1,y=new Array(b-1);R<b;R++)y[R-1]=arguments[R];p[v].fn.apply(p[v].context,y)}}return!0},V.prototype.on=function(_,I,A){return G(this,_,I,A,!1)},V.prototype.once=function(_,I,A){return G(this,_,I,A,!0)},V.prototype.removeListener=function(_,I,A,M){var S=F?F+_:_;if(!this._events[S])return this;if(!I)return B(this,S),this;var D=this._events[S];if(D.fn)D.fn!==I||M&&!D.once||A&&D.context!==A||B(this,S);else{for(var P=0,y=[],v=D.length;P<v;P++)(D[P].fn!==I||M&&!D[P].once||A&&D[P].context!==A)&&y.push(D[P]);y.length?this._events[S]=1===y.length?y[0]:y:B(this,S)}return this},V.prototype.removeAllListeners=function(_){var I;return _?this._events[I=F?F+_:_]&&B(this,I):(this._events=new L,this._eventsCount=0),this},V.prototype.off=V.prototype.removeListener,V.prototype.addListener=V.prototype.on,V.prefixed=F,V.EventEmitter=V,void 0!==we&&(we.exports=V)},{}],WOs9:[function(se,we,X){"use strict";var O=this&&this.__read||function(B,V){var _="function"==typeof Symbol&&B[Symbol.iterator];if(!_)return B;var I,A,M=_.call(B),S=[];try{for(;(void 0===V||V-- >0)&&!(I=M.next()).done;)S.push(I.value)}catch(D){A={error:D}}finally{try{I&&!I.done&&(_=M.return)&&_.call(M)}finally{if(A)throw A.error}}return S},F=this&&this.__spread||function(){for(var B=[],V=0;V<arguments.length;V++)B=B.concat(O(arguments[V]));return B};Object.defineProperty(X,"__esModule",{value:!0});var L,B,U="PeerJS: ";(B=L=X.LogLevel||(X.LogLevel={}))[B.Disabled=0]="Disabled",B[B.Errors=1]="Errors",B[B.Warnings=2]="Warnings",B[B.All=3]="All";var G=function(){function B(){this._logLevel=L.Disabled}return Object.defineProperty(B.prototype,"logLevel",{get:function(){return this._logLevel},set:function(V){this._logLevel=V},enumerable:!0,configurable:!0}),B.prototype.log=function(){for(var V=[],_=0;_<arguments.length;_++)V[_]=arguments[_];this._logLevel>=L.All&&this._print.apply(this,F([L.All],V))},B.prototype.warn=function(){for(var V=[],_=0;_<arguments.length;_++)V[_]=arguments[_];this._logLevel>=L.Warnings&&this._print.apply(this,F([L.Warnings],V))},B.prototype.error=function(){for(var V=[],_=0;_<arguments.length;_++)V[_]=arguments[_];this._logLevel>=L.Errors&&this._print.apply(this,F([L.Errors],V))},B.prototype.setLogFunction=function(V){this._print=V},B.prototype._print=function(V){for(var _=[],I=1;I<arguments.length;I++)_[I-1]=arguments[I];var A=F([U],_);for(var M in A)A[M]instanceof Error&&(A[M]="("+A[M].name+") "+A[M].message);V>=L.All?console.log.apply(console,F(A)):V>=L.Warnings?console.warn.apply(console,F(["WARNING"],A)):V>=L.Errors&&console.error.apply(console,F(["ERROR"],A))},B}();X.default=new G},{}],ZRYf:[function(se,we,X){"use strict";var _;Object.defineProperty(X,"__esModule",{value:!0}),(_=X.ConnectionEventType||(X.ConnectionEventType={})).Open="open",_.Stream="stream",_.Data="data",_.Close="close",_.Error="error",_.IceStateChanged="iceStateChanged",function(_){_.Data="data",_.Media="media"}(X.ConnectionType||(X.ConnectionType={})),function(_){_.Open="open",_.Close="close",_.Connection="connection",_.Call="call",_.Disconnected="disconnected",_.Error="error"}(X.PeerEventType||(X.PeerEventType={})),function(_){_.BrowserIncompatible="browser-incompatible",_.Disconnected="disconnected",_.InvalidID="invalid-id",_.InvalidKey="invalid-key",_.Network="network",_.PeerUnavailable="peer-unavailable",_.SslUnavailable="ssl-unavailable",_.ServerError="server-error",_.SocketError="socket-error",_.SocketClosed="socket-closed",_.UnavailableID="unavailable-id",_.WebRTC="webrtc"}(X.PeerErrorType||(X.PeerErrorType={})),function(_){_.Binary="binary",_.BinaryUTF8="binary-utf8",_.JSON="json"}(X.SerializationType||(X.SerializationType={})),function(_){_.Message="message",_.Disconnected="disconnected",_.Error="error",_.Close="close"}(X.SocketEventType||(X.SocketEventType={})),function(_){_.Heartbeat="HEARTBEAT",_.Candidate="CANDIDATE",_.Offer="OFFER",_.Answer="ANSWER",_.Open="OPEN",_.Error="ERROR",_.IdTaken="ID-TAKEN",_.InvalidKey="INVALID-KEY",_.Leave="LEAVE",_.Expire="EXPIRE"}(X.ServerMessageType||(X.ServerMessageType={}))},{}],wJlv:[function(se,we,X){"use strict";var A,O=this&&this.__extends||(A=function(M,S){return(A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,P){D.__proto__=P}||function(D,P){for(var y in P)P.hasOwnProperty(y)&&(D[y]=P[y])})(M,S)},function(M,S){function D(){this.constructor=M}A(M,S),M.prototype=null===S?Object.create(S):(D.prototype=S.prototype,new D)}),F=this&&this.__read||function(A,M){var S="function"==typeof Symbol&&A[Symbol.iterator];if(!S)return A;var D,P,y=S.call(A),v=[];try{for(;(void 0===M||M-- >0)&&!(D=y.next()).done;)v.push(D.value)}catch(p){P={error:p}}finally{try{D&&!D.done&&(S=y.return)&&S.call(y)}finally{if(P)throw P.error}}return v},L=this&&this.__spread||function(){for(var A=[],M=0;M<arguments.length;M++)A=A.concat(F(arguments[M]));return A},U=this&&this.__values||function(A){var M="function"==typeof Symbol&&Symbol.iterator,S=M&&A[M],D=0;if(S)return S.call(A);if(A&&"number"==typeof A.length)return{next:function(){return A&&D>=A.length&&(A=void 0),{value:A&&A[D++],done:!A}}};throw new TypeError(M?"Object is not iterable.":"Symbol.iterator is not defined.")},G=this&&this.__importDefault||function(A){return A&&A.__esModule?A:{default:A}};Object.defineProperty(X,"__esModule",{value:!0});var B=se("eventemitter3"),V=G(se("./logger")),_=se("./enums"),I=function(A){function M(S,D,P,y,v,p){void 0===p&&(p=5e3);var b=A.call(this)||this;return b.pingInterval=p,b._disconnected=!0,b._messagesQueue=[],b._baseUrl=(S?"wss://":"ws://")+D+":"+P+y+"peerjs?key="+v,b}return O(M,A),M.prototype.start=function(S,D){var P=this;this._id=S,!this._socket&&this._disconnected&&(this._socket=new WebSocket(this._baseUrl+"&id="+S+"&token="+D),this._disconnected=!1,this._socket.onmessage=function(v){var p;try{p=JSON.parse(v.data),V.default.log("Server message received:",p)}catch(b){return void V.default.log("Invalid server message",v.data)}P.emit(_.SocketEventType.Message,p)},this._socket.onclose=function(v){P._disconnected||(V.default.log("Socket closed.",v),P._cleanup(),P._disconnected=!0,P.emit(_.SocketEventType.Disconnected))},this._socket.onopen=function(){P._disconnected||(P._sendQueuedMessages(),V.default.log("Socket open"),P._scheduleHeartbeat())})},M.prototype._scheduleHeartbeat=function(){var S=this;this._wsPingTimer=setTimeout(function(){S._sendHeartbeat()},this.pingInterval)},M.prototype._sendHeartbeat=function(){if(this._wsOpen()){var S=JSON.stringify({type:_.ServerMessageType.Heartbeat});this._socket.send(S),this._scheduleHeartbeat()}else V.default.log("Cannot send heartbeat, because socket closed")},M.prototype._wsOpen=function(){return!!this._socket&&1===this._socket.readyState},M.prototype._sendQueuedMessages=function(){var S,D,P=L(this._messagesQueue);this._messagesQueue=[];try{for(var y=U(P),v=y.next();!v.done;v=y.next())this.send(v.value)}catch(b){S={error:b}}finally{try{v&&!v.done&&(D=y.return)&&D.call(y)}finally{if(S)throw S.error}}},M.prototype.send=function(S){if(!this._disconnected)if(this._id)if(S.type){if(this._wsOpen()){var D=JSON.stringify(S);this._socket.send(D)}}else this.emit(_.SocketEventType.Error,"Invalid message");else this._messagesQueue.push(S)},M.prototype.close=function(){this._disconnected||(this._cleanup(),this._disconnected=!0)},M.prototype._cleanup=function(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)},M}(B.EventEmitter);X.Socket=I},{eventemitter3:"JJlS","./logger":"WOs9","./enums":"ZRYf"}],HCdX:[function(se,we,X){"use strict";var O=this&&this.__assign||function(){return(O=Object.assign||function(I){for(var A,M=1,S=arguments.length;M<S;M++)for(var D in A=arguments[M])Object.prototype.hasOwnProperty.call(A,D)&&(I[D]=A[D]);return I}).apply(this,arguments)},F=this&&this.__awaiter||function(I,A,M,S){return new(M||(M=Promise))(function(D,P){function y(b){try{p(S.next(b))}catch(R){P(R)}}function v(b){try{p(S.throw(b))}catch(R){P(R)}}function p(b){var R;b.done?D(b.value):(R=b.value,R instanceof M?R:new M(function(q){q(R)})).then(y,v)}p((S=S.apply(I,A||[])).next())})},L=this&&this.__generator||function(I,A){var M,S,D,P,y={label:0,sent:function(){if(1&D[0])throw D[1];return D[1]},trys:[],ops:[]};return P={next:v(0),throw:v(1),return:v(2)},"function"==typeof Symbol&&(P[Symbol.iterator]=function(){return this}),P;function v(p){return function(b){return function(R){if(M)throw new TypeError("Generator is already executing.");for(;y;)try{if(M=1,S&&(D=2&R[0]?S.return:R[0]?S.throw||((D=S.return)&&D.call(S),0):S.next)&&!(D=D.call(S,R[1])).done)return D;switch(S=0,D&&(R=[2&R[0],D.value]),R[0]){case 0:case 1:D=R;break;case 4:return y.label++,{value:R[1],done:!1};case 5:y.label++,S=R[1],R=[0];continue;case 7:R=y.ops.pop(),y.trys.pop();continue;default:if(!(D=(D=y.trys).length>0&&D[D.length-1])&&(6===R[0]||2===R[0])){y=0;continue}if(3===R[0]&&(!D||R[1]>D[0]&&R[1]<D[3])){y.label=R[1];break}if(6===R[0]&&y.label<D[1]){y.label=D[1],D=R;break}if(D&&y.label<D[2]){y.label=D[2],y.ops.push(R);break}D[2]&&y.ops.pop(),y.trys.pop();continue}R=A.call(I,y)}catch(q){R=[6,q],S=0}finally{M=D=0}if(5&R[0])throw R[1];return{value:R[0]?R[1]:void 0,done:!0}}([p,b])}}},U=this&&this.__importDefault||function(I){return I&&I.__esModule?I:{default:I}};Object.defineProperty(X,"__esModule",{value:!0});var G=se("./util"),B=U(se("./logger")),V=se("./enums"),_=function(){function I(A){this.connection=A}return I.prototype.startConnection=function(A){var M=this._startPeerConnection();if(this.connection.peerConnection=M,this.connection.type===V.ConnectionType.Media&&A._stream&&this._addTracksToConnection(A._stream,M),A.originator){if(this.connection.type===V.ConnectionType.Data){var S=this.connection,P=M.createDataChannel(S.label,{ordered:!!A.reliable});S.initialize(P)}this._makeOffer()}else this.handleSDP("OFFER",A.sdp)},I.prototype._startPeerConnection=function(){B.default.log("Creating RTCPeerConnection.");var A=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(A),A},I.prototype._setupListeners=function(A){var M=this,S=this.connection.peer,D=this.connection.connectionId,P=this.connection.type,y=this.connection.provider;B.default.log("Listening for ICE candidates."),A.onicecandidate=function(v){v.candidate&&v.candidate.candidate&&(B.default.log("Received ICE candidates for "+S+":",v.candidate),y.socket.send({type:V.ServerMessageType.Candidate,payload:{candidate:v.candidate,type:P,connectionId:D},dst:S}))},A.oniceconnectionstatechange=function(){switch(A.iceConnectionState){case"failed":B.default.log("iceConnectionState is failed, closing connections to "+S),M.connection.emit(V.ConnectionEventType.Error,new Error("Negotiation of connection to "+S+" failed.")),M.connection.close();break;case"closed":B.default.log("iceConnectionState is closed, closing connections to "+S),M.connection.emit(V.ConnectionEventType.Error,new Error("Connection to "+S+" closed.")),M.connection.close();break;case"disconnected":B.default.log("iceConnectionState changed to disconnected on the connection with "+S);break;case"completed":A.onicecandidate=G.util.noop}M.connection.emit(V.ConnectionEventType.IceStateChanged,A.iceConnectionState)},B.default.log("Listening for data channel"),A.ondatachannel=function(v){B.default.log("Received data channel");var p=v.channel;y.getConnection(S,D).initialize(p)},B.default.log("Listening for remote stream"),A.ontrack=function(v){B.default.log("Received remote stream");var p=v.streams[0],b=y.getConnection(S,D);b.type===V.ConnectionType.Media&&M._addStreamToMediaConnection(p,b)}},I.prototype.cleanup=function(){B.default.log("Cleaning up PeerConnection to "+this.connection.peer);var A=this.connection.peerConnection;if(A){this.connection.peerConnection=null,A.onicecandidate=A.oniceconnectionstatechange=A.ondatachannel=A.ontrack=function(){};var S=!1;if(this.connection.type===V.ConnectionType.Data){var D=this.connection.dataChannel;D&&(S=!!D.readyState&&"closed"!==D.readyState)}("closed"!==A.signalingState||S)&&A.close()}},I.prototype._makeOffer=function(){return F(this,void 0,Promise,function(){var A,M,S,D,P,y,v;return L(this,function(p){switch(p.label){case 0:A=this.connection.peerConnection,M=this.connection.provider,p.label=1;case 1:return p.trys.push([1,7,,8]),[4,A.createOffer(this.connection.options.constraints)];case 2:S=p.sent(),B.default.log("Created offer."),this.connection.options.sdpTransform&&"function"==typeof this.connection.options.sdpTransform&&(S.sdp=this.connection.options.sdpTransform(S.sdp)||S.sdp),p.label=3;case 3:return p.trys.push([3,5,,6]),[4,A.setLocalDescription(S)];case 4:return p.sent(),B.default.log("Set localDescription:",S,"for:"+this.connection.peer),D={sdp:S,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata,browser:G.util.browser},this.connection.type===V.ConnectionType.Data&&(P=this.connection,D=O(O({},D),{label:P.label,reliable:P.reliable,serialization:P.serialization})),M.socket.send({type:V.ServerMessageType.Offer,payload:D,dst:this.connection.peer}),[3,6];case 5:return"OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"!=(y=p.sent())&&(M.emitError(V.PeerErrorType.WebRTC,y),B.default.log("Failed to setLocalDescription, ",y)),[3,6];case 6:return[3,8];case 7:return v=p.sent(),M.emitError(V.PeerErrorType.WebRTC,v),B.default.log("Failed to createOffer, ",v),[3,8];case 8:return[2]}})})},I.prototype._makeAnswer=function(){return F(this,void 0,Promise,function(){var A,M,S,D,P;return L(this,function(y){switch(y.label){case 0:A=this.connection.peerConnection,M=this.connection.provider,y.label=1;case 1:return y.trys.push([1,7,,8]),[4,A.createAnswer()];case 2:S=y.sent(),B.default.log("Created answer."),this.connection.options.sdpTransform&&"function"==typeof this.connection.options.sdpTransform&&(S.sdp=this.connection.options.sdpTransform(S.sdp)||S.sdp),y.label=3;case 3:return y.trys.push([3,5,,6]),[4,A.setLocalDescription(S)];case 4:return y.sent(),B.default.log("Set localDescription:",S,"for:"+this.connection.peer),M.socket.send({type:V.ServerMessageType.Answer,payload:{sdp:S,type:this.connection.type,connectionId:this.connection.connectionId,browser:G.util.browser},dst:this.connection.peer}),[3,6];case 5:return D=y.sent(),M.emitError(V.PeerErrorType.WebRTC,D),B.default.log("Failed to setLocalDescription, ",D),[3,6];case 6:return[3,8];case 7:return P=y.sent(),M.emitError(V.PeerErrorType.WebRTC,P),B.default.log("Failed to create answer, ",P),[3,8];case 8:return[2]}})})},I.prototype.handleSDP=function(A,M){return F(this,void 0,Promise,function(){var S,D,P,y;return L(this,function(v){switch(v.label){case 0:M=new RTCSessionDescription(M),S=this.connection.peerConnection,D=this.connection.provider,B.default.log("Setting remote description",M),P=this,v.label=1;case 1:return v.trys.push([1,5,,6]),[4,S.setRemoteDescription(M)];case 2:return v.sent(),B.default.log("Set remoteDescription:"+A+" for:"+this.connection.peer),"OFFER"!==A?[3,4]:[4,P._makeAnswer()];case 3:v.sent(),v.label=4;case 4:return[3,6];case 5:return y=v.sent(),D.emitError(V.PeerErrorType.WebRTC,y),B.default.log("Failed to setRemoteDescription, ",y),[3,6];case 6:return[2]}})})},I.prototype.handleCandidate=function(A){return F(this,void 0,Promise,function(){var M,S,D,P,y,v;return L(this,function(p){switch(p.label){case 0:B.default.log("handleCandidate:",A),M=A.candidate,S=A.sdpMLineIndex,D=A.sdpMid,P=this.connection.peerConnection,y=this.connection.provider,p.label=1;case 1:return p.trys.push([1,3,,4]),[4,P.addIceCandidate(new RTCIceCandidate({sdpMid:D,sdpMLineIndex:S,candidate:M}))];case 2:return p.sent(),B.default.log("Added ICE candidate for:"+this.connection.peer),[3,4];case 3:return v=p.sent(),y.emitError(V.PeerErrorType.WebRTC,v),B.default.log("Failed to handleCandidate, ",v),[3,4];case 4:return[2]}})})},I.prototype._addTracksToConnection=function(A,M){if(B.default.log("add tracks from stream "+A.id+" to peer connection"),!M.addTrack)return B.default.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");A.getTracks().forEach(function(S){M.addTrack(S,A)})},I.prototype._addStreamToMediaConnection=function(A,M){B.default.log("add stream "+A.id+" to media connection "+M.connectionId),M.addStream(A)},I}();X.Negotiator=_},{"./util":"BHXf","./logger":"WOs9","./enums":"ZRYf"}],tQFK:[function(se,we,X){"use strict";var U,O=this&&this.__extends||(U=function(G,B){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(V,_){V.__proto__=_}||function(V,_){for(var I in _)_.hasOwnProperty(I)&&(V[I]=_[I])})(G,B)},function(G,B){function V(){this.constructor=G}U(G,B),G.prototype=null===B?Object.create(B):(V.prototype=B.prototype,new V)});Object.defineProperty(X,"__esModule",{value:!0});var L=function(U){function G(B,V,_){var I=U.call(this)||this;return I.peer=B,I.provider=V,I.options=_,I._open=!1,I.metadata=_.metadata,I}return O(G,U),Object.defineProperty(G.prototype,"open",{get:function(){return this._open},enumerable:!0,configurable:!0}),G}(se("eventemitter3").EventEmitter);X.BaseConnection=L},{eventemitter3:"JJlS"}],dbHP:[function(se,we,X){"use strict";var M,O=this&&this.__extends||(M=function(S,D){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,y){P.__proto__=y}||function(P,y){for(var v in y)y.hasOwnProperty(v)&&(P[v]=y[v])})(S,D)},function(S,D){function P(){this.constructor=S}M(S,D),S.prototype=null===D?Object.create(D):(P.prototype=D.prototype,new P)}),F=this&&this.__assign||function(){return(F=Object.assign||function(M){for(var S,D=1,P=arguments.length;D<P;D++)for(var y in S=arguments[D])Object.prototype.hasOwnProperty.call(S,y)&&(M[y]=S[y]);return M}).apply(this,arguments)},L=this&&this.__values||function(M){var S="function"==typeof Symbol&&Symbol.iterator,D=S&&M[S],P=0;if(D)return D.call(M);if(M&&"number"==typeof M.length)return{next:function(){return M&&P>=M.length&&(M=void 0),{value:M&&M[P++],done:!M}}};throw new TypeError(S?"Object is not iterable.":"Symbol.iterator is not defined.")},U=this&&this.__importDefault||function(M){return M&&M.__esModule?M:{default:M}};Object.defineProperty(X,"__esModule",{value:!0});var G=se("./util"),B=U(se("./logger")),V=se("./negotiator"),_=se("./enums"),A=function(M){function S(D,P,y){var v=M.call(this,D,P,y)||this;return v._localStream=v.options._stream,v.connectionId=v.options.connectionId||S.ID_PREFIX+G.util.randomToken(),v._negotiator=new V.Negotiator(v),v._localStream&&v._negotiator.startConnection({_stream:v._localStream,originator:!0}),v}return O(S,M),Object.defineProperty(S.prototype,"type",{get:function(){return _.ConnectionType.Media},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"localStream",{get:function(){return this._localStream},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"remoteStream",{get:function(){return this._remoteStream},enumerable:!0,configurable:!0}),S.prototype.addStream=function(D){B.default.log("Receiving stream",D),this._remoteStream=D,M.prototype.emit.call(this,_.ConnectionEventType.Stream,D)},S.prototype.handleMessage=function(D){var P=D.type,y=D.payload;switch(D.type){case _.ServerMessageType.Answer:this._negotiator.handleSDP(P,y.sdp),this._open=!0;break;case _.ServerMessageType.Candidate:this._negotiator.handleCandidate(y.candidate);break;default:B.default.warn("Unrecognized message type:"+P+" from peer:"+this.peer)}},S.prototype.answer=function(D,P){var y,v;if(void 0===P&&(P={}),this._localStream)B.default.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");else{this._localStream=D,P&&P.sdpTransform&&(this.options.sdpTransform=P.sdpTransform),this._negotiator.startConnection(F(F({},this.options._payload),{_stream:D}));var p=this.provider._getMessages(this.connectionId);try{for(var b=L(p),R=b.next();!R.done;R=b.next())this.handleMessage(R.value)}catch(W){y={error:W}}finally{try{R&&!R.done&&(v=b.return)&&v.call(b)}finally{if(y)throw y.error}}this._open=!0}},S.prototype.close=function(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,M.prototype.emit.call(this,_.ConnectionEventType.Close))},S.ID_PREFIX="mc_",S}(se("./baseconnection").BaseConnection);X.MediaConnection=A},{"./util":"BHXf","./logger":"WOs9","./negotiator":"HCdX","./enums":"ZRYf","./baseconnection":"tQFK"}],GGp6:[function(se,we,X){"use strict";var B,O=this&&this.__extends||(B=function(V,_){return(B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,A){I.__proto__=A}||function(I,A){for(var M in A)A.hasOwnProperty(M)&&(I[M]=A[M])})(V,_)},function(V,_){function I(){this.constructor=V}B(V,_),V.prototype=null===_?Object.create(_):(I.prototype=_.prototype,new I)}),F=this&&this.__importDefault||function(B){return B&&B.__esModule?B:{default:B}};Object.defineProperty(X,"__esModule",{value:!0});var L=se("eventemitter3"),U=F(se("./logger")),G=function(B){function V(){var _=B.call(this)||this;return _.fileReader=new FileReader,_._queue=[],_._processing=!1,_.fileReader.onload=function(I){_._processing=!1,I.target&&_.emit("done",I.target.result),_.doNextTask()},_.fileReader.onerror=function(I){U.default.error("EncodingQueue error:",I),_._processing=!1,_.destroy(),_.emit("error",I)},_}return O(V,B),Object.defineProperty(V.prototype,"queue",{get:function(){return this._queue},enumerable:!0,configurable:!0}),Object.defineProperty(V.prototype,"size",{get:function(){return this.queue.length},enumerable:!0,configurable:!0}),Object.defineProperty(V.prototype,"processing",{get:function(){return this._processing},enumerable:!0,configurable:!0}),V.prototype.enque=function(_){this.queue.push(_),this.processing||this.doNextTask()},V.prototype.destroy=function(){this.fileReader.abort(),this._queue=[]},V.prototype.doNextTask=function(){0!==this.size&&(this.processing||(this._processing=!0,this.fileReader.readAsArrayBuffer(this.queue.shift())))},V}(L.EventEmitter);X.EncodingQueue=G},{eventemitter3:"JJlS","./logger":"WOs9"}],GBTQ:[function(se,we,X){"use strict";var M,O=this&&this.__extends||(M=function(S,D){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,y){P.__proto__=y}||function(P,y){for(var v in y)y.hasOwnProperty(v)&&(P[v]=y[v])})(S,D)},function(S,D){function P(){this.constructor=S}M(S,D),S.prototype=null===D?Object.create(D):(P.prototype=D.prototype,new P)}),F=this&&this.__values||function(M){var S="function"==typeof Symbol&&Symbol.iterator,D=S&&M[S],P=0;if(D)return D.call(M);if(M&&"number"==typeof M.length)return{next:function(){return M&&P>=M.length&&(M=void 0),{value:M&&M[P++],done:!M}}};throw new TypeError(S?"Object is not iterable.":"Symbol.iterator is not defined.")},L=this&&this.__importDefault||function(M){return M&&M.__esModule?M:{default:M}};Object.defineProperty(X,"__esModule",{value:!0});var U=se("./util"),G=L(se("./logger")),B=se("./negotiator"),V=se("./enums"),_=se("./baseconnection"),I=se("./encodingQueue"),A=function(M){function S(D,P,y){var v=M.call(this,D,P,y)||this;return v.stringify=JSON.stringify,v.parse=JSON.parse,v._buffer=[],v._bufferSize=0,v._buffering=!1,v._chunkedData={},v._encodingQueue=new I.EncodingQueue,v.connectionId=v.options.connectionId||S.ID_PREFIX+U.util.randomToken(),v.label=v.options.label||v.connectionId,v.serialization=v.options.serialization||V.SerializationType.Binary,v.reliable=!!v.options.reliable,v._encodingQueue.on("done",function(p){v._bufferedSend(p)}),v._encodingQueue.on("error",function(){G.default.error("DC#"+v.connectionId+": Error occured in encoding from blob to arraybuffer, close DC"),v.close()}),v._negotiator=new B.Negotiator(v),v._negotiator.startConnection(v.options._payload||{originator:!0}),v}return O(S,M),Object.defineProperty(S.prototype,"type",{get:function(){return V.ConnectionType.Data},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"dataChannel",{get:function(){return this._dc},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"bufferSize",{get:function(){return this._bufferSize},enumerable:!0,configurable:!0}),S.prototype.initialize=function(D){this._dc=D,this._configureDataChannel()},S.prototype._configureDataChannel=function(){var D=this;U.util.supports.binaryBlob&&!U.util.supports.reliable||(this.dataChannel.binaryType="arraybuffer"),this.dataChannel.onopen=function(){G.default.log("DC#"+D.connectionId+" dc connection success"),D._open=!0,D.emit(V.ConnectionEventType.Open)},this.dataChannel.onmessage=function(P){G.default.log("DC#"+D.connectionId+" dc onmessage:",P.data),D._handleDataMessage(P)},this.dataChannel.onclose=function(){G.default.log("DC#"+D.connectionId+" dc closed for:",D.peer),D.close()}},S.prototype._handleDataMessage=function(D){var P=this,y=D.data,v=y.constructor,p=y;if(this.serialization===V.SerializationType.Binary||this.serialization===V.SerializationType.BinaryUTF8){if(v===Blob)return void U.util.blobToArrayBuffer(y,function(R){var q=U.util.unpack(R);P.emit(V.ConnectionEventType.Data,q)});if(v===ArrayBuffer)p=U.util.unpack(y);else if(v===String){var b=U.util.binaryStringToArrayBuffer(y);p=U.util.unpack(b)}}else this.serialization===V.SerializationType.JSON&&(p=this.parse(y));p.__peerData?this._handleChunk(p):M.prototype.emit.call(this,V.ConnectionEventType.Data,p)},S.prototype._handleChunk=function(D){var P=D.__peerData,y=this._chunkedData[P]||{data:[],count:0,total:D.total};if(y.data[D.n]=D.data,y.count++,this._chunkedData[P]=y,y.total===y.count){delete this._chunkedData[P];var v=new Blob(y.data);this._handleDataMessage({data:v})}},S.prototype.close=function(){this._buffer=[],this._bufferSize=0,this._chunkedData={},this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this._dc=null),this._encodingQueue&&(this._encodingQueue.destroy(),this._encodingQueue.removeAllListeners(),this._encodingQueue=null),this.open&&(this._open=!1,M.prototype.emit.call(this,V.ConnectionEventType.Close))},S.prototype.send=function(D,P){if(this.open)if(this.serialization===V.SerializationType.JSON)this._bufferedSend(this.stringify(D));else if(this.serialization===V.SerializationType.Binary||this.serialization===V.SerializationType.BinaryUTF8){var y=U.util.pack(D);if(!P&&y.size>U.util.chunkedMTU)return void this._sendChunks(y);U.util.supports.binaryBlob?this._bufferedSend(y):this._encodingQueue.enque(y)}else this._bufferedSend(D);else M.prototype.emit.call(this,V.ConnectionEventType.Error,new Error("Connection is not open. You should listen for the `open` event before sending messages."))},S.prototype._bufferedSend=function(D){!this._buffering&&this._trySend(D)||(this._buffer.push(D),this._bufferSize=this._buffer.length)},S.prototype._trySend=function(D){var P=this;if(!this.open)return!1;if(this.dataChannel.bufferedAmount>S.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(function(){P._buffering=!1,P._tryBuffer()},50),!1;try{this.dataChannel.send(D)}catch(y){return G.default.error("DC#:"+this.connectionId+" Error when sending:",y),this._buffering=!0,this.close(),!1}return!0},S.prototype._tryBuffer=function(){this.open&&0!==this._buffer.length&&this._trySend(this._buffer[0])&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())},S.prototype._sendChunks=function(D){var P,y,v=U.util.chunk(D);G.default.log("DC#"+this.connectionId+" Try to send "+v.length+" chunks...");try{for(var p=F(v),b=p.next();!b.done;b=p.next())this.send(b.value,!0)}catch(q){P={error:q}}finally{try{b&&!b.done&&(y=p.return)&&y.call(p)}finally{if(P)throw P.error}}},S.prototype.handleMessage=function(D){var P=D.payload;switch(D.type){case V.ServerMessageType.Answer:this._negotiator.handleSDP(D.type,P.sdp);break;case V.ServerMessageType.Candidate:this._negotiator.handleCandidate(P.candidate);break;default:G.default.warn("Unrecognized message type:",D.type,"from peer:",this.peer)}},S.ID_PREFIX="dc_",S.MAX_BUFFERED_AMOUNT=8388608,S}(_.BaseConnection);X.DataConnection=A},{"./util":"BHXf","./logger":"WOs9","./negotiator":"HCdX","./enums":"ZRYf","./baseconnection":"tQFK","./encodingQueue":"GGp6"}],in7L:[function(se,we,X){"use strict";var O=this&&this.__awaiter||function(V,_,I,A){return new(I||(I=Promise))(function(M,S){function D(v){try{y(A.next(v))}catch(p){S(p)}}function P(v){try{y(A.throw(v))}catch(p){S(p)}}function y(v){var p;v.done?M(v.value):(p=v.value,p instanceof I?p:new I(function(b){b(p)})).then(D,P)}y((A=A.apply(V,_||[])).next())})},F=this&&this.__generator||function(V,_){var I,A,M,S,D={label:0,sent:function(){if(1&M[0])throw M[1];return M[1]},trys:[],ops:[]};return S={next:P(0),throw:P(1),return:P(2)},"function"==typeof Symbol&&(S[Symbol.iterator]=function(){return this}),S;function P(y){return function(v){return function(p){if(I)throw new TypeError("Generator is already executing.");for(;D;)try{if(I=1,A&&(M=2&p[0]?A.return:p[0]?A.throw||((M=A.return)&&M.call(A),0):A.next)&&!(M=M.call(A,p[1])).done)return M;switch(A=0,M&&(p=[2&p[0],M.value]),p[0]){case 0:case 1:M=p;break;case 4:return D.label++,{value:p[1],done:!1};case 5:D.label++,A=p[1],p=[0];continue;case 7:p=D.ops.pop(),D.trys.pop();continue;default:if(!(M=(M=D.trys).length>0&&M[M.length-1])&&(6===p[0]||2===p[0])){D=0;continue}if(3===p[0]&&(!M||p[1]>M[0]&&p[1]<M[3])){D.label=p[1];break}if(6===p[0]&&D.label<M[1]){D.label=M[1],M=p;break}if(M&&D.label<M[2]){D.label=M[2],D.ops.push(p);break}M[2]&&D.ops.pop(),D.trys.pop();continue}p=_.call(V,D)}catch(b){p=[6,b],A=0}finally{I=M=0}if(5&p[0])throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}([y,v])}}},L=this&&this.__importDefault||function(V){return V&&V.__esModule?V:{default:V}};Object.defineProperty(X,"__esModule",{value:!0});var U=se("./util"),G=L(se("./logger")),B=function(){function V(_){this._options=_}return V.prototype._buildUrl=function(_){return(this._options.secure?"https://":"http://")+this._options.host+":"+this._options.port+this._options.path+this._options.key+"/"+_+"?ts="+(new Date).getTime()+Math.random()},V.prototype.retrieveId=function(){return O(this,void 0,Promise,function(){var _,I,A,M;return F(this,function(S){switch(S.label){case 0:_=this._buildUrl("id"),S.label=1;case 1:return S.trys.push([1,3,,4]),[4,fetch(_)];case 2:if(200!==(I=S.sent()).status)throw new Error("Error. Status:"+I.status);return[2,I.text()];case 3:throw A=S.sent(),G.default.error("Error retrieving ID",A),M="","/"===this._options.path&&this._options.host!==U.util.CLOUD_HOST&&(M=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+M);case 4:return[2]}})})},V.prototype.listAllPeers=function(){return O(this,void 0,Promise,function(){var _,I,M;return F(this,function(S){switch(S.label){case 0:_=this._buildUrl("peers"),S.label=1;case 1:return S.trys.push([1,3,,4]),[4,fetch(_)];case 2:if(200!==(I=S.sent()).status)throw 401===I.status?new Error("It doesn't look like you have permission to list peers IDs. "+(this._options.host===U.util.CLOUD_HOST?"It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":"You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.")):new Error("Error. Status:"+I.status);return[2,I.json()];case 3:throw M=S.sent(),G.default.error("Error retrieving list peers",M),new Error("Could not get list peers from the server."+M);case 4:return[2]}})})},V}();X.API=B},{"./util":"BHXf","./logger":"WOs9"}],Hxpd:[function(se,we,X){"use strict";var v,O=this&&this.__extends||(v=function(p,b){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,q){R.__proto__=q}||function(R,q){for(var W in q)q.hasOwnProperty(W)&&(R[W]=q[W])})(p,b)},function(p,b){function R(){this.constructor=p}v(p,b),p.prototype=null===b?Object.create(b):(R.prototype=b.prototype,new R)}),F=this&&this.__assign||function(){return(F=Object.assign||function(v){for(var p,b=1,R=arguments.length;b<R;b++)for(var q in p=arguments[b])Object.prototype.hasOwnProperty.call(p,q)&&(v[q]=p[q]);return v}).apply(this,arguments)},L=this&&this.__values||function(v){var p="function"==typeof Symbol&&Symbol.iterator,b=p&&v[p],R=0;if(b)return b.call(v);if(v&&"number"==typeof v.length)return{next:function(){return v&&R>=v.length&&(v=void 0),{value:v&&v[R++],done:!v}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")},U=this&&this.__read||function(v,p){var b="function"==typeof Symbol&&v[Symbol.iterator];if(!b)return v;var R,q,W=b.call(v),Q=[];try{for(;(void 0===p||p-- >0)&&!(R=W.next()).done;)Q.push(R.value)}catch(J){q={error:J}}finally{try{R&&!R.done&&(b=W.return)&&b.call(W)}finally{if(q)throw q.error}}return Q},G=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(X,"__esModule",{value:!0});var B=se("eventemitter3"),V=se("./util"),_=G(se("./logger")),I=se("./socket"),A=se("./mediaconnection"),M=se("./dataconnection"),S=se("./enums"),D=se("./api"),y=function(v){function p(b,R){var q,W=v.call(this)||this;return W._id=null,W._lastServerId=null,W._destroyed=!1,W._disconnected=!1,W._open=!1,W._connections=new Map,W._lostMessages=new Map,b&&b.constructor==Object?R=b:b&&(q=b.toString()),R=F({debug:0,host:V.util.CLOUD_HOST,port:V.util.CLOUD_PORT,path:"/",key:p.DEFAULT_KEY,token:V.util.randomToken(),config:V.util.defaultConfig},R),W._options=R,"/"===W._options.host&&(W._options.host=window.location.hostname),W._options.path&&("/"!==W._options.path[0]&&(W._options.path="/"+W._options.path),"/"!==W._options.path[W._options.path.length-1]&&(W._options.path+="/")),void 0===W._options.secure&&W._options.host!==V.util.CLOUD_HOST?W._options.secure=V.util.isSecure():W._options.host==V.util.CLOUD_HOST&&(W._options.secure=!0),W._options.logFunction&&_.default.setLogFunction(W._options.logFunction),_.default.logLevel=W._options.debug||0,W._api=new D.API(R),W._socket=W._createServerConnection(),V.util.supports.audioVideo||V.util.supports.data?q&&!V.util.validateId(q)?(W._delayedAbort(S.PeerErrorType.InvalidID,'ID "'+q+'" is invalid'),W):(q?W._initialize(q):W._api.retrieveId().then(function(Q){return W._initialize(Q)}).catch(function(Q){return W._abort(S.PeerErrorType.ServerError,Q)}),W):(W._delayedAbort(S.PeerErrorType.BrowserIncompatible,"The current browser does not support WebRTC"),W)}return O(p,v),Object.defineProperty(p.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"open",{get:function(){return this._open},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"socket",{get:function(){return this._socket},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"connections",{get:function(){var b,R,q=Object.create(null);try{for(var W=L(this._connections),Q=W.next();!Q.done;Q=W.next()){var J=U(Q.value,2);q[J[0]]=J[1]}}catch(oe){b={error:oe}}finally{try{Q&&!Q.done&&(R=W.return)&&R.call(W)}finally{if(b)throw b.error}}return q},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"disconnected",{get:function(){return this._disconnected},enumerable:!0,configurable:!0}),p.prototype._createServerConnection=function(){var b=this,R=new I.Socket(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return R.on(S.SocketEventType.Message,function(q){b._handleMessage(q)}),R.on(S.SocketEventType.Error,function(q){b._abort(S.PeerErrorType.SocketError,q)}),R.on(S.SocketEventType.Disconnected,function(){b.disconnected||(b.emitError(S.PeerErrorType.Network,"Lost connection to server."),b.disconnect())}),R.on(S.SocketEventType.Close,function(){b.disconnected||b._abort(S.PeerErrorType.SocketClosed,"Underlying socket is already closed.")}),R},p.prototype._initialize=function(b){this._id=b,this.socket.start(b,this._options.token)},p.prototype._handleMessage=function(b){var R,q,W=b.type,Q=b.payload,J=b.src;switch(W){case S.ServerMessageType.Open:this._lastServerId=this.id,this._open=!0,this.emit(S.PeerEventType.Open,this.id);break;case S.ServerMessageType.Error:this._abort(S.PeerErrorType.ServerError,Q.msg);break;case S.ServerMessageType.IdTaken:this._abort(S.PeerErrorType.UnavailableID,'ID "'+this.id+'" is taken');break;case S.ServerMessageType.InvalidKey:this._abort(S.PeerErrorType.InvalidKey,'API KEY "'+this._options.key+'" is invalid');break;case S.ServerMessageType.Leave:_.default.log("Received leave message from "+J),this._cleanupPeer(J),this._connections.delete(J);break;case S.ServerMessageType.Expire:this.emitError(S.PeerErrorType.PeerUnavailable,"Could not connect to peer "+J);break;case S.ServerMessageType.Offer:var ee=Q.connectionId;if((De=this.getConnection(J,ee))&&(De.close(),_.default.warn("Offer received for existing Connection ID:"+ee)),Q.type===S.ConnectionType.Media)De=new A.MediaConnection(J,this,{connectionId:ee,_payload:Q,metadata:Q.metadata}),this._addConnection(J,De),this.emit(S.PeerEventType.Call,De);else{if(Q.type!==S.ConnectionType.Data)return void _.default.warn("Received malformed connection type:"+Q.type);De=new M.DataConnection(J,this,{connectionId:ee,_payload:Q,metadata:Q.metadata,label:Q.label,serialization:Q.serialization,reliable:Q.reliable}),this._addConnection(J,De),this.emit(S.PeerEventType.Connection,De)}var z=this._getMessages(ee);try{for(var oe=L(z),me=oe.next();!me.done;me=oe.next())De.handleMessage(me.value)}catch(et){R={error:et}}finally{try{me&&!me.done&&(q=oe.return)&&q.call(oe)}finally{if(R)throw R.error}}break;default:if(!Q)return void _.default.warn("You received a malformed message from "+J+" of type "+W);var De;(De=this.getConnection(J,ee=Q.connectionId))&&De.peerConnection?De.handleMessage(b):ee?this._storeMessage(ee,b):_.default.warn("You received an unrecognized message:",b)}},p.prototype._storeMessage=function(b,R){this._lostMessages.has(b)||this._lostMessages.set(b,[]),this._lostMessages.get(b).push(R)},p.prototype._getMessages=function(b){var R=this._lostMessages.get(b);return R?(this._lostMessages.delete(b),R):[]},p.prototype.connect=function(b,R){if(void 0===R&&(R={}),this.disconnected)return _.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),void this.emitError(S.PeerErrorType.Disconnected,"Cannot connect to new Peer after disconnecting from server.");var q=new M.DataConnection(b,this,R);return this._addConnection(b,q),q},p.prototype.call=function(b,R,q){if(void 0===q&&(q={}),this.disconnected)return _.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),void this.emitError(S.PeerErrorType.Disconnected,"Cannot connect to new Peer after disconnecting from server.");if(R){q._stream=R;var W=new A.MediaConnection(b,this,q);return this._addConnection(b,W),W}_.default.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.")},p.prototype._addConnection=function(b,R){_.default.log("add connection "+R.type+":"+R.connectionId+" to peerId:"+b),this._connections.has(b)||this._connections.set(b,[]),this._connections.get(b).push(R)},p.prototype._removeConnection=function(b){var R=this._connections.get(b.peer);if(R){var q=R.indexOf(b);-1!==q&&R.splice(q,1)}this._lostMessages.delete(b.connectionId)},p.prototype.getConnection=function(b,R){var q,W,Q=this._connections.get(b);if(!Q)return null;try{for(var J=L(Q),ee=J.next();!ee.done;ee=J.next()){var z=ee.value;if(z.connectionId===R)return z}}catch(oe){q={error:oe}}finally{try{ee&&!ee.done&&(W=J.return)&&W.call(J)}finally{if(q)throw q.error}}return null},p.prototype._delayedAbort=function(b,R){var q=this;setTimeout(function(){q._abort(b,R)},0)},p.prototype._abort=function(b,R){_.default.error("Aborting!"),this.emitError(b,R),this._lastServerId?this.disconnect():this.destroy()},p.prototype.emitError=function(b,R){var q;_.default.error("Error:",R),(q="string"==typeof R?new Error(R):R).type=b,this.emit(S.PeerEventType.Error,q)},p.prototype.destroy=function(){this.destroyed||(_.default.log("Destroy peer with ID:"+this.id),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit(S.PeerEventType.Close))},p.prototype._cleanup=function(){var b,R;try{for(var q=L(this._connections.keys()),W=q.next();!W.done;W=q.next()){var Q=W.value;this._cleanupPeer(Q),this._connections.delete(Q)}}catch(J){b={error:J}}finally{try{W&&!W.done&&(R=q.return)&&R.call(q)}finally{if(b)throw b.error}}this.socket.removeAllListeners()},p.prototype._cleanupPeer=function(b){var R,q,W=this._connections.get(b);if(W)try{for(var Q=L(W),J=Q.next();!J.done;J=Q.next())J.value.close()}catch(ee){R={error:ee}}finally{try{J&&!J.done&&(q=Q.return)&&q.call(Q)}finally{if(R)throw R.error}}},p.prototype.disconnect=function(){if(!this.disconnected){var b=this.id;_.default.log("Disconnect peer with ID:"+b),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=b,this._id=null,this.emit(S.PeerEventType.Disconnected,b)}},p.prototype.reconnect=function(){if(this.disconnected&&!this.destroyed)_.default.log("Attempting reconnection to server with ID "+this._lastServerId),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(this.disconnected||this.open)throw new Error("Peer "+this.id+" cannot reconnect because it is not disconnected from the server!");_.default.error("In a hurry? We're still trying to make the initial connection!")}},p.prototype.listAllPeers=function(b){var R=this;void 0===b&&(b=function(q){}),this._api.listAllPeers().then(function(q){return b(q)}).catch(function(q){return R._abort(S.PeerErrorType.ServerError,q)})},p.DEFAULT_KEY="peerjs",p}(B.EventEmitter);X.Peer=y},{eventemitter3:"JJlS","./util":"BHXf","./logger":"WOs9","./socket":"wJlv","./mediaconnection":"dbHP","./dataconnection":"GBTQ","./enums":"ZRYf","./api":"in7L"}],iTK6:[function(se,we,X){"use strict";Object.defineProperty(X,"__esModule",{value:!0});var O=se("./util"),F=se("./peer");X.peerjs={Peer:F.Peer,util:O.util},X.default=F.Peer,window.peerjs=X.peerjs,window.Peer=F.Peer},{"./util":"BHXf","./peer":"Hxpd"}]},{},["iTK6"])},311:(gn,pt,Fe)=>{"use strict";function se(t){return"function"==typeof t}let we=!1;const X={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else we&&console.log("RxJS: Back to a better error behavior. Thank you. <3");we=t},get useDeprecatedSynchronousErrorHandling(){return we}};function O(t){setTimeout(()=>{throw t},0)}const F={closed:!0,next(t){},error(t){if(X.useDeprecatedSynchronousErrorHandling)throw t;O(t)},complete(){}},L=Array.isArray||(t=>t&&"number"==typeof t.length);function U(t){return null!==t&&"object"==typeof t}const B=(()=>{function t(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((n,r)=>`${r+1}) ${n.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return t.prototype=Object.create(Error.prototype),t})();class V{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:r,_unsubscribe:i,_subscriptions:o}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof V)n.remove(this);else if(null!==n)for(let s=0;s<n.length;++s)n[s].remove(this);if(se(i)){r&&(this._unsubscribe=void 0);try{i.call(this)}catch(s){e=s instanceof B?_(s.errors):[s]}}if(L(o)){let s=-1,a=o.length;for(;++s<a;){const l=o[s];if(U(l))try{l.unsubscribe()}catch(h){e=e||[],h instanceof B?e=e.concat(_(h.errors)):e.push(h)}}}if(e)throw new B(e)}add(e){let n=e;if(!e)return V.EMPTY;switch(typeof e){case"function":n=new V(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof V)){const o=n;n=new V,n._subscriptions=[o]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof V){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(e){const n=this._subscriptions;if(n){const r=n.indexOf(e);-1!==r&&n.splice(r,1)}}}var t;function _(t){return t.reduce((e,n)=>e.concat(n instanceof B?n.errors:n),[])}V.EMPTY=((t=new V).closed=!0,t);const I="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class M extends V{constructor(e,n,r){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=F;break;case 1:if(!e){this.destination=F;break}if("object"==typeof e){e instanceof M?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new S(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new S(this,e,n,r)}}[I](){return this}static create(e,n,r){const i=new M(e,n,r);return i.syncErrorThrowable=!1,i}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class S extends M{constructor(e,n,r,i){super(),this._parentSubscriber=e;let o,s=this;se(n)?o=n:n&&(o=n.next,r=n.error,i=n.complete,n!==F&&(s=Object.create(n),se(s.unsubscribe)&&this.add(s.unsubscribe.bind(s)),s.unsubscribe=this.unsubscribe.bind(this))),this._context=s,this._next=o,this._error=r,this._complete=i}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:n}=this;X.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable?this.__tryOrSetError(n,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:n}=this,{useDeprecatedSynchronousErrorHandling:r}=X;if(this._error)r&&n.syncErrorThrowable?(this.__tryOrSetError(n,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(n.syncErrorThrowable)r?(n.syncErrorValue=e,n.syncErrorThrown=!0):O(e),this.unsubscribe();else{if(this.unsubscribe(),r)throw e;O(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const n=()=>this._complete.call(this._context);X.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,n){try{e.call(this._context,n)}catch(r){if(this.unsubscribe(),X.useDeprecatedSynchronousErrorHandling)throw r;O(r)}}__tryOrSetError(e,n,r){if(!X.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,r)}catch(i){return X.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=i,e.syncErrorThrown=!0,!0):(O(i),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const y="function"==typeof Symbol&&Symbol.observable||"@@observable";function v(t){return t}let R=(()=>{class t{constructor(n){this._isScalar=!1,n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const{operator:o}=this,s=function(t,e,n){if(t){if(t instanceof M)return t;if(t[I])return t[I]()}return t||e||n?new M(t,e,n):new M(F)}(n,r,i);if(s.add(o?o.call(s,this.source):this.source||X.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),X.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){X.useDeprecatedSynchronousErrorHandling&&(n.syncErrorThrown=!0,n.syncErrorValue=r),function(t){for(;t;){const{closed:e,destination:n,isStopped:r}=t;if(e||r)return!1;t=n&&n instanceof M?n:null}return!0}(n)?n.error(r):console.warn(r)}}forEach(n,r){return new(r=q(r))((i,o)=>{let s;s=this.subscribe(a=>{try{n(a)}catch(l){o(l),s&&s.unsubscribe()}},o,i)})}_subscribe(n){const{source:r}=this;return r&&r.subscribe(n)}[y](){return this}pipe(...n){return 0===n.length?this:function(t){return 0===t.length?v:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}(n)(this)}toPromise(n){return new(n=q(n))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function q(t){if(t||(t=X.Promise||Promise),!t)throw new Error("no Promise impl found");return t}const Q=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})();class J extends V{constructor(e,n){super(),this.subject=e,this.subscriber=n,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,n=e.observers;if(this.subject=null,!n||0===n.length||e.isStopped||e.closed)return;const r=n.indexOf(this.subscriber);-1!==r&&n.splice(r,1)}}class ee extends M{constructor(e){super(e),this.destination=e}}let z=(()=>{class t extends R{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[I](){return new ee(this)}lift(n){const r=new oe(this,this);return r.operator=n,r}next(n){if(this.closed)throw new Q;if(!this.isStopped){const{observers:r}=this,i=r.length,o=r.slice();for(let s=0;s<i;s++)o[s].next(n)}}error(n){if(this.closed)throw new Q;this.hasError=!0,this.thrownError=n,this.isStopped=!0;const{observers:r}=this,i=r.length,o=r.slice();for(let s=0;s<i;s++)o[s].error(n);this.observers.length=0}complete(){if(this.closed)throw new Q;this.isStopped=!0;const{observers:n}=this,r=n.length,i=n.slice();for(let o=0;o<r;o++)i[o].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(n){if(this.closed)throw new Q;return super._trySubscribe(n)}_subscribe(n){if(this.closed)throw new Q;return this.hasError?(n.error(this.thrownError),V.EMPTY):this.isStopped?(n.complete(),V.EMPTY):(this.observers.push(n),new J(this,n))}asObservable(){const n=new R;return n.source=this,n}}return t.create=(e,n)=>new oe(e,n),t})();class oe extends z{constructor(e,n){super(),this.destination=e,this.source=n}next(e){const{destination:n}=this;n&&n.next&&n.next(e)}error(e){const{destination:n}=this;n&&n.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:n}=this;return n?this.source.subscribe(e):V.EMPTY}}function me(t){return t&&"function"==typeof t.schedule}function pe(t,e){return function(r){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return r.lift(new De(t,e))}}class De{constructor(e,n){this.project=e,this.thisArg=n}call(e,n){return n.subscribe(new et(e,this.project,this.thisArg))}}class et extends M{constructor(e,n,r){super(e),this.project=n,this.count=0,this.thisArg=r||this}_next(e){let n;try{n=this.project.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}this.destination.next(n)}}const mt=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()},Or="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",pr=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function Pi(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}const gr=t=>{if(t&&"function"==typeof t[y])return(t=>e=>{const n=t[y]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)})(t);if(pr(t))return mt(t);if(Pi(t))return(t=>e=>(t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,O),e))(t);if(t&&"function"==typeof t[Or])return(t=>e=>{const n=t[Or]();for(;;){let r;try{r=n.next()}catch(i){return e.error(i),e}if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof n.return&&e.add(()=>{n.return&&n.return()}),e})(t);{const n=`You provided ${U(t)?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(n)}};function Xn(t,e){return new R(n=>{const r=new V;let i=0;return r.add(e.schedule(function(){i!==t.length?(n.next(t[i++]),n.closed||r.add(this.schedule())):n.complete()})),r})}function vt(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[y]}(t))return function(t,e){return new R(n=>{const r=new V;return r.add(e.schedule(()=>{const i=t[y]();r.add(i.subscribe({next(o){r.add(e.schedule(()=>n.next(o)))},error(o){r.add(e.schedule(()=>n.error(o)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Pi(t))return function(t,e){return new R(n=>{const r=new V;return r.add(e.schedule(()=>t.then(i=>{r.add(e.schedule(()=>{n.next(i),r.add(e.schedule(()=>n.complete()))}))},i=>{r.add(e.schedule(()=>n.error(i)))}))),r})}(t,e);if(pr(t))return Xn(t,e);if(function(t){return t&&"function"==typeof t[Or]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new R(n=>{const r=new V;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[Or](),r.add(e.schedule(function(){if(n.closed)return;let o,s;try{const a=i.next();o=a.value,s=a.done}catch(a){return void n.error(a)}s?n.complete():(n.next(o),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof R?t:new R(gr(t))}class ii extends M{constructor(e){super(),this.parent=e}_next(e){this.parent.notifyNext(e)}_error(e){this.parent.notifyError(e),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class oi extends M{notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.destination.complete()}}function xi(t,e){if(e.closed)return;if(t instanceof R)return t.subscribe(e);let n;try{n=gr(t)(e)}catch(r){e.error(r)}return n}function Bt(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?r=>r.pipe(Bt((i,o)=>vt(t(i,o)).pipe(pe((s,a)=>e(i,s,o,a))),n)):("number"==typeof e&&(n=e),r=>r.lift(new kr(t,n)))}class kr{constructor(e,n=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=n}call(e,n){return n.subscribe(new ic(e,this.project,this.concurrent))}}class ic extends oi{constructor(e,n,r=Number.POSITIVE_INFINITY){super(e),this.project=n,this.concurrent=r,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let n;const r=this.index++;try{n=this.project(e,r)}catch(i){return void this.destination.error(i)}this.active++,this._innerSub(n)}_innerSub(e){const n=new ii(this),r=this.destination;r.add(n);const i=xi(e,n);i!==n&&r.add(i)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyComplete(){const e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function Uo(t=Number.POSITIVE_INFINITY){return Bt(v,t)}function fo(t,e){return e?Xn(t,e):new R(mt(t))}function Ho(){return function(e){return e.lift(new Gu(e))}}class Gu{constructor(e){this.connectable=e}call(e,n){const{connectable:r}=this;r._refCount++;const i=new oc(e,r),o=n.subscribe(i);return i.closed||(i.connection=r.connect()),o}}class oc extends M{constructor(e,n){super(e),this.connectable=n}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const n=e._refCount;if(n<=0)return void(this.connection=null);if(e._refCount=n-1,n>1)return void(this.connection=null);const{connection:r}=this,i=e._connection;this.connection=null,i&&(!r||i===r)&&i.unsubscribe()}}class xs extends R{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new V,e.add(this.source.subscribe(new qu(this.getSubject(),this))),e.closed&&(this._connection=null,e=V.EMPTY)),e}refCount(){return Ho()(this)}}const Wu=(()=>{const t=xs.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class qu extends ee{constructor(e,n){super(e),this.connectable=n}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const n=e._connection;e._refCount=0,e._subject=null,e._connection=null,n&&n.unsubscribe()}}}function Rf(){return new z}function rt(t){for(let e in t)if(t[e]===rt)return e;throw Error("Could not find renamed property on target object.")}function Os(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Ae(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Ae).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function cc(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const ks=rt({__forward_ref__:rt});function yt(t){return t.__forward_ref__=yt,t.toString=function(){return Ae(this())},t}function be(t){return mr(t)?t():t}function mr(t){return"function"==typeof t&&t.hasOwnProperty(ks)&&t.__forward_ref__===yt}class si extends Error{constructor(e,n){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(e,n)),this.code=e}}function fe(t){return"string"==typeof t?t:null==t?"":String(t)}function qt(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():fe(t)}function Ai(t,e){const n=e?` in ${e}`:"";throw new si("201",`No provider for ${qt(t)} found${n}`)}function an(t,e){null==t&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}(e,t,null,"!=")}function Te(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Ft(t){return{providers:t.providers||[],imports:t.imports||[]}}function Nr(t){return Xu(t,ai)||Xu(t,el)}function Xu(t,e){return t.hasOwnProperty(e)?t[e]:null}function Ns(t){return t&&(t.hasOwnProperty(Go)||t.hasOwnProperty(Oi))?t[Go]:null}const ai=rt({\u0275prov:rt}),Go=rt({\u0275inj:rt}),el=rt({ngInjectableDef:rt}),Oi=rt({ngInjectorDef:rt});var Se=(()=>((Se=Se||{})[Se.Default=0]="Default",Se[Se.Host=1]="Host",Se[Se.Self=2]="Self",Se[Se.SkipSelf=4]="SkipSelf",Se[Se.Optional=8]="Optional",Se))();let Fs;function ci(t){const e=Fs;return Fs=t,e}function ui(t,e,n){const r=Nr(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&Se.Optional?null:void 0!==e?e:void Ai(Ae(t),"Injector")}function er(t){return{toString:t}.toString()}var An=(()=>((An=An||{})[An.OnPush=0]="OnPush",An[An.Default=1]="Default",An))(),Ut=(()=>((Ut=Ut||{})[Ut.Emulated=0]="Emulated",Ut[Ut.None=2]="None",Ut[Ut.ShadowDom=3]="ShadowDom",Ut))();const Wo="undefined"!=typeof globalThis&&globalThis,qo="undefined"!=typeof window&&window,nl="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,it=Wo||"undefined"!=typeof global&&global||qo||nl,li={},Ie=[],Yo=rt({\u0275cmp:rt}),ki=rt({\u0275dir:rt}),Ni=rt({\u0275pipe:rt}),Qo=rt({\u0275mod:rt}),Vs=rt({\u0275loc:rt}),It=rt({\u0275fac:rt}),Ko=rt({__NG_ELEMENT_ID__:rt});let St=0;function tr(t){return er(()=>{const n={},r={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:n,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===An.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||Ie,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||Ut.Emulated,id:"c",styles:t.styles||Ie,_:null,setInput:null,schemas:t.schemas||null,tView:null},i=t.directives,o=t.features,s=t.pipes;return r.id+=St++,r.inputs=ol(t.inputs,n),r.outputs=ol(t.outputs),o&&o.forEach(a=>a(r)),r.directiveDefs=i?()=>("function"==typeof i?i():i).map(il):null,r.pipeDefs=s?()=>("function"==typeof s?s():s).map(di):null,r})}function il(t){return Vt(t)||function(t){return t[ki]||null}(t)}function di(t){return function(t){return t[Ni]||null}(t)}const fc={};function bn(t){return er(()=>{const e={type:t.type,bootstrap:t.bootstrap||Ie,declarations:t.declarations||Ie,imports:t.imports||Ie,exports:t.exports||Ie,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(fc[t.id]=t.type),e})}function ol(t,e){if(null==t)return li;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const Pe=tr;function Vt(t){return t[Yo]||null}function On(t,e){const n=t[Qo]||null;if(!n&&!0===e)throw new Error(`Type ${Ae(t)} does not have '\u0275mod' property.`);return n}function Fn(t){return Array.isArray(t)&&"object"==typeof t[1]}function Wn(t){return Array.isArray(t)&&!0===t[1]}function Bs(t){return 0!=(8&t.flags)}function Zo(t){return 2==(2&t.flags)}function Us(t){return 1==(1&t.flags)}function ir(t){return null!==t.template}function al(t){return 0!=(512&t[2])}function Bi(t,e){return t.hasOwnProperty(It)?t[It]:null}class dl{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function $t(){return ts}function ts(t){return t.type.prototype.ngOnChanges&&(t.setInput=fl),zs}function zs(){const t=yo(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===li)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function fl(t,e,n,r){const i=yo(t)||function(t,e){return t[yc]=e}(t,{previous:li,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],l=s[a];o[a]=new dl(l&&l.currentValue,e,s===li),t[r]=e}$t.ngInherit=!0;const yc="__ngSimpleChanges__";function yo(t){return t[yc]||null}let qs;function dt(t){return!!t.listen}const pl={createRenderer:(t,e)=>void 0!==qs?qs:"undefined"!=typeof document?document:void 0};function Xe(t){for(;Array.isArray(t);)t=t[0];return t}function Ys(t,e){return Xe(e[t])}function Rt(t,e){return Xe(e[t.index])}function Qs(t,e){return t.data[e]}function wn(t,e){const n=e[t];return Fn(n)?n:n[0]}function hi(t){return 128==(128&t[2])}function Lr(t,e){return null==e?null:t[e]}function yl(t){t[18]=0}function pi(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const ke={lFrame:El(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function jr(){return ke.bindingsEnabled}function ue(){return ke.lFrame.lView}function Ye(){return ke.lFrame.tView}function _o(t){return ke.lFrame.contextLView=t,t[8]}function zt(){let t=Hi();for(;null!==t&&64===t.type;)t=t.parent;return t}function Hi(){return ke.lFrame.currentTNode}function br(t,e){const n=ke.lFrame;n.currentTNode=t,n.isParent=e}function ns(){return ke.lFrame.isParent}function $i(){return ke.isInCheckNoChangesMode}function Ks(t){ke.isInCheckNoChangesMode=t}function or(){return ke.lFrame.bindingIndex}function zi(){return ke.lFrame.bindingIndex++}function Br(t){const e=ke.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function sr(t,e){const n=ke.lFrame;n.bindingIndex=n.bindingRootIndex=t,Gi(e)}function Gi(t){ke.lFrame.currentDirectiveIndex=t}function Xs(t){ke.lFrame.currentQueryIndex=t}function Ec(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function Cl(t,e,n){if(n&Se.SkipSelf){let i=e,o=t;for(;!(i=i.parent,null!==i||n&Se.Host||(i=Ec(o),null===i||(o=o[15],10&i.type))););if(null===i)return!1;e=i,t=o}const r=ke.lFrame=wl();return r.currentTNode=e,r.lView=t,!0}function Wi(t){const e=wl(),n=t[1];ke.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function wl(){const t=ke.lFrame,e=null===t?null:t.child;return null===e?El(t):e}function El(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function os(){const t=ke.lFrame;return ke.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Dl=os;function Zs(){const t=os();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Gt(){return ke.lFrame.selectedIndex}function Hr(t){ke.lFrame.selectedIndex=t}function Pt(){const t=ke.lFrame;return Qs(t.tView,t.selectedIndex)}function c(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:h,ngOnDestroy:m}=o;s&&(t.contentHooks||(t.contentHooks=[])).push(-n,s),a&&((t.contentHooks||(t.contentHooks=[])).push(n,a),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,a)),l&&(t.viewHooks||(t.viewHooks=[])).push(-n,l),h&&((t.viewHooks||(t.viewHooks=[])).push(n,h),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,h)),null!=m&&(t.destroyHooks||(t.destroyHooks=[])).push(n,m)}}function u(t,e,n){g(t,e,3,n)}function d(t,e,n,r){(3&t[2])===n&&g(t,e,n,r)}function f(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function g(t,e,n,r){const o=null!=r?r:-1,s=e.length-1;let a=0;for(let l=void 0!==r?65535&t[18]:0;l<s;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=r&&a>=r)break}else e[l]<0&&(t[18]+=65536),(a<o||-1==o)&&(C(t,n,e,l),t[18]=(4294901760&t[18])+l+2),l++}function C(t,e,n,r){const i=n[r]<0,o=n[r+1],a=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{o.call(a)}finally{}}}else try{o.call(a)}finally{}}const T=-1;class w{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function ge(t,e,n){const r=dt(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],l=n[i++];r?t.setAttribute(e,a,l,s):e.setAttributeNS(s,a,l)}else{const s=o,a=n[++i];Ee(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function de(t){return 3===t||4===t||6===t}function Ee(t){return 64===t.charCodeAt(0)}function xe(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Ve(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Ve(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const a=t[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<t.length;){const a=t[o];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function nt(t){return t!==T}function at(t){return 32767&t}function tt(t,e){let n=function(t){return t>>16}(t),r=e;for(;n>0;)r=r[15],n--;return r}let Dn=!0;function Yn(t){const e=Dn;return Dn=t,e}let AS=0;function Dc(t,e){const n=ih(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,rh(r.data,t),rh(e,null),rh(r.blueprint,null));const i=Il(t,e),o=t.injectorIndex;if(nt(i)){const s=at(i),a=tt(i,e),l=a[1].data;for(let h=0;h<8;h++)e[o+h]=a[s+h]|l[s+h]}return e[o+8]=i,o}function rh(t,e){t.push(0,0,0,0,0,0,0,0,e)}function ih(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Il(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const o=i[1],s=o.type;if(r=2===s?o.declTNode:1===s?i[6]:null,null===r)return T;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return T}function Pl(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ko)&&(r=n[Ko]),null==r&&(r=n[Ko]=AS++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function by(t,e,n){if(n&Se.Optional)return t;Ai(e,"NodeInjector")}function Cy(t,e,n,r){if(n&Se.Optional&&void 0===r&&(r=null),0==(n&(Se.Self|Se.Host))){const i=t[9],o=ci(void 0);try{return i?i.get(e,r,n&Se.Optional):ui(e,r,n&Se.Optional)}finally{ci(o)}}return by(r,e,n)}function wy(t,e,n,r=Se.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Ko)?t[Ko]:void 0;return"number"==typeof e?e>=0?255&e:NS:e}(n);if("function"==typeof o){if(!Cl(e,t,r))return r&Se.Host?by(i,n,r):Cy(e,n,r,i);try{const s=o(r);if(null!=s||r&Se.Optional)return s;Ai(n)}finally{Dl()}}else if("number"==typeof o){let s=null,a=ih(t,e),l=T,h=r&Se.Host?e[16][6]:null;for((-1===a||r&Se.SkipSelf)&&(l=-1===a?Il(t,e):e[a+8],l!==T&&Sy(r,!1)?(s=e[1],a=at(l),e=tt(l,e)):a=-1);-1!==a;){const m=e[1];if(Dy(o,a,m.data)){const E=FS(a,e,n,s,r,h);if(E!==Ey)return E}l=e[a+8],l!==T&&Sy(r,e[1].data[a+8]===h)&&Dy(o,a,e)?(s=m,a=at(l),e=tt(l,e)):a=-1}}}return Cy(e,n,r,i)}const Ey={};function NS(){return new ta(zt(),ue())}function FS(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],m=function(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,l=t.directiveStart,m=o>>20,k=i?a+m:t.directiveEnd;for(let N=r?a:a+m;N<k;N++){const H=s[N];if(N<l&&n===H||N>=l&&H.type===n)return N}if(i){const N=s[l];if(N&&ir(N)&&N.type===n)return l}return null}(a,s,n,null==r?Zo(a)&&Dn:r!=s&&0!=(3&a.type),i&Se.Host&&o===a);return null!==m?Sc(e,s,m,a):Ey}function Sc(t,e,n,r){let i=t[n];const o=e.data;if(function(t){return t instanceof w}(i)){const s=i;s.resolving&&function(t,e){throw new si("200",`Circular dependency in DI detected for ${t}`)}(qt(o[n]));const a=Yn(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?ci(s.injectImpl):null;Cl(t,r,Se.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const s=ts(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,s)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==l&&ci(l),Yn(a),s.resolving=!1,Dl()}}return i}function Dy(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function Sy(t,e){return!(t&Se.Self||t&Se.Host&&e)}class ta{constructor(e,n){this._tNode=e,this._lView=n}get(e,n){return wy(this._tNode,this._lView,e,void 0,n)}}function Cr(t){return er(()=>{const e=t.prototype.constructor,n=e[It]||oh(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const o=i[It]||oh(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function oh(t){return mr(t)?()=>{const e=oh(be(t));return e&&e()}:Bi(t)}const ra="__parameters__";function ss(t,e,n){return er(()=>{const r=function(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;const s=new i(...o);return a.annotation=s,a;function a(l,h,m){const E=l.hasOwnProperty(ra)?l[ra]:Object.defineProperty(l,ra,{value:[]})[ra];for(;E.length<=m;)E.push(null);return(E[m]=E[m]||[]).push(s),l}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class Ge{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Te({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}toString(){return`InjectionToken ${this._desc}`}}const BS=new Ge("AnalyzeForEntryComponents"),Rl=Function;function gi(t,e){t.forEach(n=>Array.isArray(n)?gi(n,e):e(n))}function Ol(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function as(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function ar(t,e,n){let r=oa(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function ah(t,e){const n=oa(t,e);if(n>=0)return t[1|n]}function oa(t,e){return function(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){const o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}(t,e,1)}const xc={},uh="__NG_DI_FLAG__",sa="ngTempTokenPath",KS=/\n/gm,lh="__source",dh=rt({provide:String,useValue:rt});let Rc;function aa(t){const e=Rc;return Rc=t,e}function XS(t,e=Se.Default){if(void 0===Rc)throw new Error("inject() must be called from an injection context");return null===Rc?ui(t,void 0,e):Rc.get(t,e&Se.Optional?null:void 0,e)}function he(t,e=Se.Default){return(Fs||XS)(be(t),e)}function cs(t){const e=[];for(let n=0;n<t.length;n++){const r=be(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let i,o=Se.Default;for(let s=0;s<r.length;s++){const a=r[s],l=ZS(a);"number"==typeof l?-1===l?i=a.token:o|=l:i=a}e.push(he(i,o))}else e.push(he(r))}return e}function Ac(t,e){return t[uh]=e,t.prototype[uh]=e,t}function ZS(t){return t[uh]}function Ry(t,e,n,r){const i=t[sa];throw e[lh]&&i.unshift(e[lh]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=Ae(e);if(Array.isArray(e))i=e.map(Ae).join(" -> ");else if("object"==typeof e){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):Ae(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(KS,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[sa]=null,t}const ca=Ac(ss("Inject",t=>({token:t})),-1),Qn=Ac(ss("Optional"),8),Eo=Ac(ss("SkipSelf"),4);const Ky="__ngContext__";function Sn(t,e){t[Ky]=e}function Ch(t){const e=function(t){return t[Ky]||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Bl(t){return t.ngOriginalError}function WT(t,...e){t.error(...e)}class ls{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e),r=this._findContext(e),i=function(t){return t&&t.ngErrorLogger||WT}(e);i(this._console,"ERROR",e),n&&i(this._console,"ORIGINAL ERROR",n),r&&i(this._console,"ERROR CONTEXT",r)}_findContext(e){return e?function(t){return t.ngDebugContext}(e)||this._findContext(Bl(e)):null}_findOriginalError(e){let n=e&&Bl(e);for(;n&&Bl(n);)n=Bl(n);return n||null}}const ov=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(it))();function vi(t){return t instanceof Function?t():t}var ur=(()=>((ur=ur||{})[ur.Important=1]="Important",ur[ur.DashCase=2]="DashCase",ur))();function Dh(t,e){return undefined(t,e)}function Lc(t){const e=t[3];return Wn(e)?e[3]:e}function Sh(t){return lv(t[13])}function Th(t){return lv(t[4])}function lv(t){for(;null!==t&&!Wn(t);)t=t[4];return t}function fa(t,e,n,r,i){if(null!=r){let o,s=!1;Wn(r)?o=r:Fn(r)&&(s=!0,r=r[0]);const a=Xe(r);0===t&&null!==n?null==i?mv(e,n,a):ds(e,n,a,i||null,!0):1===t&&null!==n?ds(e,n,a,i||null,!0):2===t?function(t,e,n){const r=Hl(t,e);r&&function(t,e,n,r){dt(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==Xe(n)&&fa(e,t,r,o,i);for(let a=10;a<n.length;a++){const l=n[a];jc(l[1],l,t,e,r,o)}}(e,t,o,n,i)}}function Ih(t,e,n){return dt(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function fv(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,pi(i,-1)),n.splice(r,1)}function Ph(t,e){if(t.length<=10)return;const n=10+e,r=t[n];if(r){const i=r[17];null!==i&&i!==t&&fv(i,r),e>0&&(t[n-1][4]=r[4]);const o=as(t,10+e);!function(t,e){jc(t,e,e[11],2,null,null),e[0]=null,e[6]=null}(r[1],r);const s=o[19];null!==s&&s.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function hv(t,e){if(!(256&e[2])){const n=e[11];dt(n)&&n.destroyNode&&jc(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return xh(t[1],t);for(;e;){let n=null;if(Fn(e))n=e[13];else{const r=e[10];r&&(n=r)}if(!n){for(;e&&!e[4]&&e!==t;)Fn(e)&&xh(e[1],e),e=e[3];null===e&&(e=t),Fn(e)&&xh(e[1],e),n=e&&e[4]}e=n}}(e)}}function xh(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof w)){const o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],l=o[s+1];try{l.call(a)}finally{}}else try{o.call(i)}finally{}}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const s=n[o+1],a="function"==typeof s?s(e):Xe(e[s]),l=r[i=n[o+2]],h=n[o+3];"boolean"==typeof h?a.removeEventListener(n[o],l,h):h>=0?r[i=h]():r[i=-h].unsubscribe(),o+=2}else{const s=r[i=n[o+1]];n[o].call(s)}if(null!==r){for(let o=i+1;o<r.length;o++)r[o]();e[7]=null}}(t,e),1===e[1].type&&dt(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&Wn(e[3])){n!==e[3]&&fv(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function pv(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const i=t.data[r.directiveStart].encapsulation;if(i===Ut.None||i===Ut.Emulated)return null}return Rt(r,n)}(t,e.parent,n)}function ds(t,e,n,r,i){dt(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function mv(t,e,n){dt(t)?t.appendChild(e,n):e.appendChild(n)}function yv(t,e,n,r,i){null!==r?ds(t,e,n,r,i):mv(t,e,n)}function Hl(t,e){return dt(t)?t.parentNode(e):e.parentNode}let bv=function(t,e,n){return 40&t.type?Rt(t,n):null};function $l(t,e,n,r){const i=pv(t,r,e),o=e[11],a=function(t,e,n){return bv(t,e,n)}(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(let l=0;l<n.length;l++)yv(o,i,n[l],a,!1);else yv(o,i,n,a,!1)}function zl(t,e){if(null!==e){const n=e.type;if(3&n)return Rt(e,t);if(4&n)return Ah(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return zl(t,r);{const i=t[e.index];return Wn(i)?Ah(-1,i):Xe(i)}}if(32&n)return Dh(e,t)()||Xe(t[e.index]);{const r=wv(t,e);return null!==r?Array.isArray(r)?r[0]:zl(Lc(t[16]),r):zl(t,e.next)}}return null}function wv(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Ah(t,e){const n=10+t+1;if(n<e.length){const r=e[n],i=r[1].firstChild;if(null!==i)return zl(r,i)}return e[7]}function Oh(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],l=n.type;if(s&&0===e&&(a&&Sn(Xe(a),r),n.flags|=4),64!=(64&n.flags))if(8&l)Oh(t,e,n.child,r,i,o,!1),fa(e,t,i,a,o);else if(32&l){const h=Dh(n,r);let m;for(;m=h();)fa(e,t,i,m,o);fa(e,t,i,a,o)}else 16&l?Dv(t,e,r,n,i,o):fa(e,t,i,a,o);n=s?n.projectionNext:n.next}}function jc(t,e,n,r,i,o){Oh(n,r,t.firstChild,e,i,o,!1)}function Dv(t,e,n,r,i,o){const s=n[16],l=s[6].projection[r.projection];if(Array.isArray(l))for(let h=0;h<l.length;h++)fa(e,t,i,l[h],o);else Oh(t,e,l,s[3],i,o,!0)}function Sv(t,e,n){dt(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function kh(t,e,n){dt(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function Tv(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}const Mv="ng-template";function vM(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==Tv(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Iv(t){return 4===t.type&&t.value!==Mv}function _M(t,e,n){return e===(4!==t.type||n?t.value:Mv)}function bM(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(de(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!s)if(4&r){if(r=2|1&r,""!==l&&!_M(t,l,n)||""===l&&1===e.length){if($r(r))return!1;s=!0}}else{const h=8&r?l:e[++a];if(8&r&&null!==t.attrs){if(!vM(t.attrs,h,n)){if($r(r))return!1;s=!0}continue}const E=CM(8&r?"class":l,i,Iv(t),n);if(-1===E){if($r(r))return!1;s=!0;continue}if(""!==h){let k;k=E>o?"":i[E+1].toLowerCase();const N=8&r?k:null;if(N&&-1!==Tv(N,h,0)||2&r&&h!==k){if($r(r))return!1;s=!0}}}}else{if(!s&&!$r(r)&&!$r(l))return!1;if(s&&$r(l))continue;s=!1,r=l|1&r}}return $r(r)||s}function $r(t){return 0==(1&t)}function CM(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){const s=e[i];if(s===t)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Pv(t,e,n=!1){for(let r=0;r<e.length;r++)if(bM(t,e[r],n))return!0;return!1}function xv(t,e){return t?":not("+e.trim()+")":e}function TM(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!$r(s)&&(e+=xv(o,i),i=""),r=s,o=o||!$r(r);n++}return""!==i&&(e+=xv(o,i)),e}const Le={};function gt(t){Rv(Ye(),ue(),Gt()+t,$i())}function Rv(t,e,n,r){if(!r)if(3==(3&e[2])){const o=t.preOrderCheckHooks;null!==o&&u(e,o,n)}else{const o=t.preOrderHooks;null!==o&&d(e,o,0,n)}Hr(n)}function Gl(t,e){return t<<17|e<<2}function zr(t){return t>>17&32767}function Nh(t){return 2|t}function Yi(t){return(131068&t)>>2}function Fh(t,e){return-131069&t|e<<2}function Vh(t){return 1|t}function Uv(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const s=t.data[o];Xs(i),s.contentQueries(2,e[o],o)}}}function Bc(t,e,n,r,i,o,s,a,l,h){const m=e.blueprint.slice();return m[0]=i,m[2]=140|r,yl(m),m[3]=m[15]=t,m[8]=n,m[10]=s||t&&t[10],m[11]=a||t&&t[11],m[12]=l||t&&t[12]||null,m[9]=h||t&&t[9]||null,m[6]=o,m[16]=2==e.type?t[16]:m,m}function ha(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=Hi(),s=ns(),l=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=l),null!==o&&(s?null==o.child&&null!==l.parent&&(o.child=l):null===o.next&&(o.next=l)),l}(t,e,n,r,i),ke.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const s=function(){const t=ke.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return br(o,!0),o}function pa(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Uc(t,e,n){Wi(e);try{const r=t.viewQuery;null!==r&&Zh(1,r,n);const i=t.template;null!==i&&Hv(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Uv(t,e),t.staticViewQueries&&Zh(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)oI(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[2]&=-5,Zs()}}function ga(t,e,n,r){const i=e[2];if(256==(256&i))return;Wi(e);const o=$i();try{yl(e),function(t){ke.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&Hv(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const h=t.preOrderCheckHooks;null!==h&&u(e,h,null)}else{const h=t.preOrderHooks;null!==h&&d(e,h,0,null),f(e,0)}if(function(t){for(let e=Sh(t);null!==e;e=Th(e)){if(!e[2])continue;const n=e[9];for(let r=0;r<n.length;r++){const i=n[r],o=i[3];0==(1024&i[2])&&pi(o,1),i[2]|=1024}}}(e),function(t){for(let e=Sh(t);null!==e;e=Th(e))for(let n=10;n<e.length;n++){const r=e[n],i=r[1];hi(r)&&ga(i,r,i.template,r[8])}}(e),null!==t.contentQueries&&Uv(t,e),!o)if(s){const h=t.contentCheckHooks;null!==h&&u(e,h)}else{const h=t.contentHooks;null!==h&&d(e,h,1),f(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const i=n[r];if(i<0)Hr(~i);else{const o=i,s=n[++r],a=n[++r];sr(s,o),a(2,e[o])}}}finally{Hr(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)iI(t,e[n])}(e,a);const l=t.viewQuery;if(null!==l&&Zh(2,l,r),!o)if(s){const h=t.viewCheckHooks;null!==h&&u(e,h)}else{const h=t.viewHooks;null!==h&&d(e,h,2),f(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,pi(e[3],-1))}finally{Zs()}}function jM(t,e,n,r){const i=e[10],o=!$i(),s=function(t){return 4==(4&t[2])}(e);try{o&&!s&&i.begin&&i.begin(),s&&Uc(t,e,r),ga(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function Hv(t,e,n,r,i){const o=Gt(),s=2&r;try{Hr(-1),s&&e.length>20&&Rv(t,e,20,$i()),n(r,i)}finally{Hr(o)}}function Gh(t,e,n){!jr()||(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Dc(n,e),Sn(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const l=t.data[a],h=ir(l);h&&ZM(e,n,l);const m=Sc(e,t,a,n);Sn(m,e),null!==s&&eI(0,a-i,m,l,0,s),h&&(wn(n.index,e)[8]=m)}}(t,e,n,Rt(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,a=ke.lFrame.currentDirectiveIndex;try{Hr(s);for(let l=r;l<i;l++){const h=t.data[l],m=e[l];Gi(l),(null!==h.hostBindings||0!==h.hostVars||null!==h.hostAttrs)&&Jv(h,m)}}finally{Hr(-1),Gi(a)}}(t,e,n))}function Wh(t,e,n=Rt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function zv(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Yl(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Yl(t,e,n,r,i,o,s,a,l,h){const m=20+r,E=m+i,k=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Le);return n}(m,E),N="function"==typeof h?h():h;return k[1]={type:t,blueprint:k,template:n,queries:null,viewQuery:a,declTNode:e,data:k.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:E,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:l,consts:N,incompleteFirstPass:!1}}function Yv(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function qh(t,e,n,r){let i=!1;if(jr()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];Pv(n,s.selectors,!1)&&(i||(i=[]),Pl(Dc(n,e),t,s.type),ir(s)?(Xv(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,Zv(n,t.data.length,o.length);for(let m=0;m<o.length;m++){const E=o[m];E.providersResolver&&E.providersResolver(E)}let a=!1,l=!1,h=pa(t,e,o.length,null);for(let m=0;m<o.length;m++){const E=o[m];n.mergedAttrs=xe(n.mergedAttrs,E.hostAttrs),e_(t,n,e,h,E),XM(h,E,s),null!==E.contentQueries&&(n.flags|=8),(null!==E.hostBindings||null!==E.hostAttrs||0!==E.hostVars)&&(n.flags|=128);const k=E.type.prototype;!a&&(k.ngOnChanges||k.ngOnInit||k.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),a=!0),!l&&(k.ngOnChanges||k.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),l=!0),h++}!function(t,e){const r=e.directiveEnd,i=t.data,o=e.attrs,s=[];let a=null,l=null;for(let h=e.directiveStart;h<r;h++){const m=i[h],E=m.inputs,k=null===o||Iv(e)?null:tI(E,o);s.push(k),a=Yv(E,h,a),l=Yv(m.outputs,h,l)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=s,e.inputs=a,e.outputs=l}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const o=n[e[i+1]];if(null==o)throw new si("301",`Export of name '${e[i+1]}' not found!`);r.push(e[i],o)}}}(n,r,s)}return n.mergedAttrs=xe(n.mergedAttrs,n.attrs),i}function Kv(t,e,n,r,i,o){const s=o.hostBindings;if(s){let a=t.hostBindingOpCodes;null===a&&(a=t.hostBindingOpCodes=[]);const l=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(a)!=l&&a.push(l),a.push(r,i,s)}}function Jv(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Xv(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function XM(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;ir(e)&&(n[""]=t)}}function Zv(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function e_(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=Bi(i.type)),s=new w(o,ir(i),null);t.blueprint[r]=s,n[r]=s,Kv(t,e,0,r,pa(t,n,i.hostVars,Le),i)}function ZM(t,e,n){const r=Rt(e,t),i=zv(n),o=t[10],s=Ql(t,Bc(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function _i(t,e,n,r,i,o){const s=Rt(t,e);!function(t,e,n,r,i,o,s){if(null==o)dt(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?fe(o):s(o,r||"",i);dt(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],s,o,t.value,n,r,i)}function eI(t,e,n,r,i,o){const s=o[e];if(null!==s){const a=r.setInput;for(let l=0;l<s.length;){const h=s[l++],m=s[l++],E=s[l++];null!==a?r.setInput(n,E,h,m):n[m]=E}}}function tI(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function t_(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function iI(t,e){const n=wn(e,t);if(hi(n)){const r=n[1];80&n[2]?ga(r,n,r.template,n[8]):n[5]>0&&Qh(n)}}function Qh(t){for(let r=Sh(t);null!==r;r=Th(r))for(let i=10;i<r.length;i++){const o=r[i];if(1024&o[2]){const s=o[1];ga(s,o,s.template,o[8])}else o[5]>0&&Qh(o)}const n=t[1].components;if(null!==n)for(let r=0;r<n.length;r++){const i=wn(n[r],t);hi(i)&&i[5]>0&&Qh(i)}}function oI(t,e){const n=wn(e,t),r=n[1];(function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])})(r,n),Uc(r,n,n[8])}function Ql(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Kh(t){for(;t;){t[2]|=64;const e=Lc(t);if(al(t)&&!e)return t;t=e}return null}function Xh(t,e,n){const r=e[10];r.begin&&r.begin();try{ga(t,e,t.template,n)}catch(i){throw s_(e,i),i}finally{r.end&&r.end()}}function n_(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Ch(n),i=r[1];jM(i,r,i.template,n)}}(t[8])}function Zh(t,e,n){Xs(0),e(t,n)}const lI=(()=>Promise.resolve(null))();function r_(t){return t[7]||(t[7]=[])}function i_(t){return t.cleanup||(t.cleanup=[])}function s_(t,e){const n=t[9],r=n?n.get(ls,null):null;r&&r.handleError(e)}function a_(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],l=e[s],h=t.data[s];null!==h.setInput?h.setInput(l,i,r,a):l[a]=i}}function Ki(t,e,n){const r=Ys(e,t);!function(t,e,n){dt(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}function Kl(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?i=cc(i,a):2==o&&(r=cc(r,a+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const ma=new Ge("INJECTOR",-1);class c_{get(e,n=xc){if(n===xc){const r=new Error(`NullInjectorError: No provider for ${Ae(e)}!`);throw r.name="NullInjectorError",r}return n}}const Hc=new Ge("Set Injector scope."),$c={},hI={};let ep;function u_(){return void 0===ep&&(ep=new c_),ep}function l_(t,e=null,n=null,r){return new gI(t,n,e||u_(),r)}class gI{constructor(e,n,r,i=null){this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const o=[];n&&gi(n,a=>this.processProvider(a,e,n)),gi([e],a=>this.processInjectorType(a,[],o)),this.records.set(ma,ya(void 0,this));const s=this.records.get(Hc);this.scope=null!=s?s.value:null,this.source=i||("object"==typeof e?null:Ae(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,n=xc,r=Se.Default){this.assertNotDestroyed();const i=aa(this),o=ci(void 0);try{if(!(r&Se.SkipSelf)){let a=this.records.get(e);if(void 0===a){const l=function(t){return"function"==typeof t||"object"==typeof t&&t instanceof Ge}(e)&&Nr(e);a=l&&this.injectableDefInScope(l)?ya(tp(e),$c):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(r&Se.Self?u_():this.parent).get(e,n=r&Se.Optional&&n===xc?null:n)}catch(s){if("NullInjectorError"===s.name){if((s[sa]=s[sa]||[]).unshift(Ae(e)),i)throw s;return Ry(s,e,"R3InjectorError",this.source)}throw s}finally{ci(o),aa(i)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((r,i)=>e.push(Ae(i))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(e,n,r){if(!(e=be(e)))return!1;let i=Ns(e);const o=null==i&&e.ngModule||void 0,s=void 0===o?e:o,a=-1!==r.indexOf(s);if(void 0!==o&&(i=Ns(o)),null==i)return!1;if(null!=i.imports&&!a){let m;r.push(s);try{gi(i.imports,E=>{this.processInjectorType(E,n,r)&&(void 0===m&&(m=[]),m.push(E))})}finally{}if(void 0!==m)for(let E=0;E<m.length;E++){const{ngModule:k,providers:N}=m[E];gi(N,H=>this.processProvider(H,k,N||Ie))}}this.injectorDefTypes.add(s);const l=Bi(s)||(()=>new s);this.records.set(s,ya(l,$c));const h=i.providers;if(null!=h&&!a){const m=e;gi(h,E=>this.processProvider(E,m,h))}return void 0!==o&&void 0!==e.providers}processProvider(e,n,r){let i=va(e=be(e))?e:be(e&&e.provide);const o=function(t,e,n){return f_(t)?ya(void 0,t.useValue):ya(d_(t),$c)}(e);if(va(e)||!0!==e.multi)this.records.get(i);else{let s=this.records.get(i);s||(s=ya(void 0,$c,!0),s.factory=()=>cs(s.multi),this.records.set(i,s)),i=e,s.multi.push(e)}this.records.set(i,o)}hydrate(e,n){return n.value===$c&&(n.value=hI,n.value=n.factory()),"object"==typeof n.value&&n.value&&function(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this.onDestroy.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=be(e.providedIn);return"string"==typeof n?"any"===n||n===this.scope:this.injectorDefTypes.has(n)}}function tp(t){const e=Nr(t),n=null!==e?e.factory:Bi(t);if(null!==n)return n;if(t instanceof Ge)throw new Error(`Token ${Ae(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const r=function(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}(e,"?");throw new Error(`Can't resolve all parameters for ${Ae(t)}: (${r.join(", ")}).`)}const n=function(t){const e=t&&(t[ai]||t[el]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function d_(t,e,n){let r;if(va(t)){const i=be(t);return Bi(i)||tp(i)}if(f_(t))r=()=>be(t.useValue);else if(function(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...cs(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>he(be(t.useExisting));else{const i=be(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return Bi(i)||tp(i);r=()=>new i(...cs(t.deps))}return r}function ya(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function f_(t){return null!==t&&"object"==typeof t&&dh in t}function va(t){return"function"==typeof t}const h_=function(t,e,n){return function(t,e=null,n=null,r){const i=l_(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let ft=(()=>{class t{static create(n,r){return Array.isArray(n)?h_(n,r,""):h_(n.providers,n.parent,n.name||"")}}return t.THROW_IF_NOT_FOUND=xc,t.NULL=new c_,t.\u0275prov=Te({token:t,providedIn:"any",factory:()=>he(ma)}),t.__NG_ELEMENT_ID__=-1,t})();function FI(t,e){c(Ch(t)[1],zt())}function Tt(t){let e=function(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const r=[t];for(;e;){let i;if(ir(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const s=t;s.inputs=ap(t.inputs),s.declaredInputs=ap(t.declaredInputs),s.outputs=ap(t.outputs);const a=i.hostBindings;a&&BI(t,a);const l=i.viewQuery,h=i.contentQueries;if(l&&LI(t,l),h&&jI(t,h),Os(t.inputs,i.inputs),Os(t.declaredInputs,i.declaredInputs),Os(t.outputs,i.outputs),ir(i)&&i.data.animation){const m=t.data;m.animation=(m.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(t),a===Tt&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=xe(i.hostAttrs,n=xe(n,i.hostAttrs))}}(r)}function ap(t){return t===li?{}:t===Ie?[]:t}function LI(t,e){const n=t.viewQuery;t.viewQuery=n?(r,i)=>{e(r,i),n(r,i)}:e}function jI(t,e){const n=t.contentQueries;t.contentQueries=n?(r,i,o)=>{e(r,i,o),n(r,i,o)}:e}function BI(t,e){const n=t.hostBindings;t.hostBindings=n?(r,i)=>{e(r,i),n(r,i)}:e}let Jl=null;function _a(){if(!Jl){const t=it.Symbol;if(t&&t.iterator)Jl=t.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let n=0;n<e.length;++n){const r=e[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(Jl=r)}}}return Jl}function Gc(t){return!!cp(t)&&(Array.isArray(t)||!(t instanceof Map)&&_a()in t)}function cp(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Tn(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function fs(t,e,n,r){const i=Tn(t,e,n);return Tn(t,e+1,r)||i}function dr(t,e,n,r){const i=ue();return Tn(i,zi(),e)&&(Ye(),_i(Pt(),i,t,e,n,r)),dr}function Ea(t,e,n,r,i,o,s,a){const h=function(t,e,n,r,i){const o=fs(t,e,n,r);return Tn(t,e+2,i)||o}(t,or(),n,i,s);return Br(3),h?e+fe(n)+r+fe(i)+o+fe(s)+a:Le}function jn(t,e,n,r,i,o,s,a){const l=ue(),h=Ye(),m=t+20,E=h.firstCreatePass?function(t,e,n,r,i,o,s,a,l){const h=e.consts,m=ha(e,t,4,s||null,Lr(h,a));qh(e,n,m,Lr(h,l)),c(e,m);const E=m.tViews=Yl(2,m,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,h);return null!==e.queries&&(e.queries.template(e,m),E.queries=e.queries.embeddedTView(m)),m}(m,h,l,e,n,r,i,o,s):h.data[m];br(E,!1);const k=l[11].createComment("");$l(h,l,k,E),Sn(k,l),Ql(l,l[m]=t_(k,l,k,E)),Us(E)&&Gh(h,l,E),null!=s&&Wh(l,E,a)}function ce(t,e=Se.Default){const n=ue();return null===n?he(t,e):wy(zt(),n,be(t),e)}function Ot(t,e,n){const r=ue();return Tn(r,zi(),e)&&function(t,e,n,r,i,o,s,a){const l=Rt(e,n);let m,h=e.inputs;!a&&null!=h&&(m=h[r])?(a_(t,n,m,r,i),Zo(e)&&function(t,e){const n=wn(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r=function(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=s?s(i,e.value||"",r):i,dt(o)?o.setProperty(l,r,i):Ee(r)||(l.setProperty?l.setProperty(r,i):l[r]=i))}(Ye(),Pt(),r,t,e,r[11],n,!1),Ot}function hp(t,e,n,r,i){const s=i?"class":"style";a_(t,n,e.inputs[s],s,r)}function ot(t,e,n,r){const i=ue(),o=Ye(),s=20+t,a=i[11],l=i[s]=Ih(a,e,ke.lFrame.currentNamespace),h=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,h=ha(e,t,2,i,Lr(a,o));return qh(e,n,h,Lr(a,s)),null!==h.attrs&&Kl(h,h.attrs,!1),null!==h.mergedAttrs&&Kl(h,h.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,h),h}(s,o,i,0,e,n,r):o.data[s];br(h,!0);const m=h.mergedAttrs;null!==m&&ge(a,l,m);const E=h.classes;null!==E&&kh(a,l,E);const k=h.styles;null!==k&&Sv(a,l,k),64!=(64&h.flags)&&$l(o,i,l,h),0===ke.lFrame.elementDepthCount&&Sn(l,i),ke.lFrame.elementDepthCount++,Us(h)&&(Gh(o,i,h),function(t,e,n){if(Bs(e)){const i=e.directiveEnd;for(let o=e.directiveStart;o<i;o++){const s=t.data[o];s.contentQueries&&s.contentQueries(1,n[o],o)}}}(o,h,i)),null!==r&&Wh(i,h)}function st(){let t=zt();ns()?ke.lFrame.isParent=!1:(t=t.parent,br(t,!1));const e=t;ke.lFrame.elementDepthCount--;const n=Ye();n.firstCreatePass&&(c(n,t),Bs(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&hp(n,e,ue(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&hp(n,e,ue(),e.stylesWithoutHost,!1)}function Sr(t,e,n,r){ot(t,e,n,r),st()}function qc(){return ue()}function Yc(t){return!!t&&"function"==typeof t.then}const ed=function(t){return!!t&&"function"==typeof t.subscribe};function Lt(t,e,n,r){const i=ue(),o=Ye(),s=zt();return function(t,e,n,r,i,o,s,a){const l=Us(r),m=t.firstCreatePass&&i_(t),E=e[8],k=r_(e);let N=!0;if(3&r.type||a){const K=Rt(r,e),ae=a?a(K):K,re=k.length,ve=a?Me=>a(Xe(Me[r.index])):r.index;if(dt(n)){let Me=null;if(!a&&l&&(Me=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===n&&i[o+1]===r){const a=e[7],l=i[o+2];return a.length>l?a[l]:null}"string"==typeof s&&(o+=2)}return null}(t,e,i,r.index)),null!==Me)(Me.__ngLastListenerFn__||Me).__ngNextListenerFn__=o,Me.__ngLastListenerFn__=o,N=!1;else{o=pp(r,e,E,o,!1);const We=n.listen(ae,i,o);k.push(o,We),m&&m.push(i,ve,re,re+1)}}else o=pp(r,e,E,o,!0),ae.addEventListener(i,o,s),k.push(o),m&&m.push(i,ve,re,s)}else o=pp(r,e,E,o,!1);const H=r.outputs;let Z;if(N&&null!==H&&(Z=H[i])){const K=Z.length;if(K)for(let ae=0;ae<K;ae+=2){const sn=e[Z[ae]][Z[ae+1]].subscribe(o),Ar=k.length;k.push(o,sn),m&&m.push(i,r.index,Ar,-(Ar+1))}}}(o,i,i[11],s,t,e,!!n,r),Lt}function nb(t,e,n,r){try{return!1!==n(r)}catch(i){return s_(t,i),!1}}function pp(t,e,n,r,i){return function o(s){if(s===Function)return r;const a=2&t.flags?wn(t.index,e):e;0==(32&e[2])&&Kh(a);let l=nb(e,0,r,s),h=o.__ngNextListenerFn__;for(;h;)l=nb(e,0,h,s)&&l,h=h.__ngNextListenerFn__;return i&&!1===l&&(s.preventDefault(),s.returnValue=!1),l}}function yn(t=1){return function(t){return(ke.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,ke.lFrame.contextLView))[8]}(t)}function fb(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?zr(o):Yi(o),l=!1;for(;0!==a&&(!1===l||s);){const m=t[a+1];MP(t[a],e)&&(l=!0,t[a+1]=r?Vh(m):Nh(m)),a=r?zr(m):Yi(m)}l&&(t[n+1]=r?Nh(o):Vh(o))}function MP(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&oa(t,e)>=0}function td(t,e,n){return qr(t,e,n,!1),td}function To(t,e){return qr(t,e,null,!0),To}function qr(t,e,n,r){const i=ue(),o=Ye(),s=Br(2);o.firstUpdatePass&&function(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[Gt()],s=function(t,e){return e>=t.expandoStartIndex}(t,n);(function(t,e){return 0!=(t.flags&(e?16:32))})(o,r)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=ke.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=Qc(n=mp(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=mp(i,t,e,n,r),null===o){let l=function(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==Yi(r))return t[zr(r)]}(t,e,r);void 0!==l&&Array.isArray(l)&&(l=mp(null,t,e,l[1],r),l=Qc(l,e.attrs,r),function(t,e,n,r){t[zr(n?e.classBindings:e.styleBindings)]=r}(t,e,r,l))}else o=function(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=Qc(r,t[o].hostAttrs,n);return Qc(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=zr(s),l=Yi(s);t[r]=n;let m,h=!1;if(Array.isArray(n)){const E=n;m=E[1],(null===m||oa(E,m)>0)&&(h=!0)}else m=n;if(i)if(0!==l){const k=zr(t[a+1]);t[r+1]=Gl(k,a),0!==k&&(t[k+1]=Fh(t[k+1],r)),t[a+1]=function(t,e){return 131071&t|e<<17}(t[a+1],r)}else t[r+1]=Gl(a,0),0!==a&&(t[a+1]=Fh(t[a+1],r)),a=r;else t[r+1]=Gl(l,0),0===a?a=r:t[l+1]=Fh(t[l+1],r),l=r;h&&(t[r+1]=Nh(t[r+1])),fb(t,m,r,!0),fb(t,m,r,!1),function(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&oa(o,e)>=0&&(n[r+1]=Vh(n[r+1]))}(e,m,t,r,o),s=Gl(a,l),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}(o,t,s,r),e!==Le&&Tn(i,s,e)&&function(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const l=t.data,h=l[a+1];nd(function(t){return 1==(1&t)}(h)?Eb(l,e,n,i,Yi(h),s):void 0)||(nd(o)||function(t){return 2==(2&t)}(h)&&(o=Eb(l,null,n,i,a,s)),function(t,e,n,r,i){const o=dt(t);if(e)i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r);else{let s=-1===r.indexOf("-")?void 0:ur.DashCase;if(null==i)o?t.removeStyle(n,r,s):n.style.removeProperty(r);else{const a="string"==typeof i&&i.endsWith("!important");a&&(i=i.slice(0,-10),s|=ur.Important),o?t.setStyle(n,r,i,s):n.style.setProperty(r,i,a?"important":"")}}}(r,s,Ys(Gt(),n),i,o))}(o,o.data[Gt()],i,i[11],t,i[s+1]=function(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=Ae(function(t){return t instanceof class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}?t.changingThisBreaksApplicationSecurity:t}(t)))),t}(e,n),r,s)}function mp(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=Qc(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Qc(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),ar(t,s,!!n||e[++o]))}return void 0===t?null:t}function Eb(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const l=t[i],h=Array.isArray(l),m=h?l[1]:l,E=null===m;let k=n[i+1];k===Le&&(k=E?Ie:void 0);let N=E?ah(k,r):m===r?k:void 0;if(h&&!nd(N)&&(N=ah(l,r)),nd(N)&&(a=N,s))return a;const H=t[i+1];i=s?zr(H):Yi(H)}if(null!==e){let l=o?e.residualClasses:e.residualStyles;null!=l&&(a=ah(l,r))}return a}function nd(t){return void 0!==t}function tn(t,e=""){const n=ue(),r=Ye(),i=t+20,o=r.firstCreatePass?ha(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return dt(t)?t.createText(e):t.createTextNode(e)}(n[11],e);$l(r,n,s,o),br(o,!1)}function rd(t){return Ra("",t,""),rd}function Ra(t,e,n){const r=ue(),i=function(t,e,n,r){return Tn(t,zi(),n)?e+fe(n)+r:Le}(r,t,e,n);return i!==Le&&Ki(r,Gt(),i),Ra}function Kc(t,e,n,r,i){const o=ue(),s=function(t,e,n,r,i,o){const a=fs(t,or(),n,i);return Br(2),a?e+fe(n)+r+fe(i)+o:Le}(o,t,e,n,r,i);return s!==Le&&Ki(o,Gt(),s),Kc}function yp(t,e,n,r,i,o,s){const a=ue(),l=Ea(a,t,e,n,r,i,o,s);return l!==Le&&Ki(a,Gt(),l),yp}const hs=void 0;var cx=["en",[["a","p"],["AM","PM"],hs],[["AM","PM"],hs,hs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],hs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],hs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",hs,"{1} 'at' {0}",hs],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){const e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let Aa={};function Hb(t){return t in Aa||(Aa[t]=it.ng&&it.ng.common&&it.ng.common.locales&&it.ng.common.locales[t]),Aa[t]}var _e=(()=>((_e=_e||{})[_e.LocaleId=0]="LocaleId",_e[_e.DayPeriodsFormat=1]="DayPeriodsFormat",_e[_e.DayPeriodsStandalone=2]="DayPeriodsStandalone",_e[_e.DaysFormat=3]="DaysFormat",_e[_e.DaysStandalone=4]="DaysStandalone",_e[_e.MonthsFormat=5]="MonthsFormat",_e[_e.MonthsStandalone=6]="MonthsStandalone",_e[_e.Eras=7]="Eras",_e[_e.FirstDayOfWeek=8]="FirstDayOfWeek",_e[_e.WeekendRange=9]="WeekendRange",_e[_e.DateFormat=10]="DateFormat",_e[_e.TimeFormat=11]="TimeFormat",_e[_e.DateTimeFormat=12]="DateTimeFormat",_e[_e.NumberSymbols=13]="NumberSymbols",_e[_e.NumberFormats=14]="NumberFormats",_e[_e.CurrencyCode=15]="CurrencyCode",_e[_e.CurrencySymbol=16]="CurrencySymbol",_e[_e.CurrencyName=17]="CurrencyName",_e[_e.Currencies=18]="Currencies",_e[_e.Directionality=19]="Directionality",_e[_e.PluralCase=20]="PluralCase",_e[_e.ExtraData=21]="ExtraData",_e))();const id="en-US";let $b=id;function _p(t){an(t,"Expected localeId to be defined"),"string"==typeof t&&($b=t.toLowerCase().replace(/_/g,"-"))}function wp(t,e,n,r,i){if(t=be(t),Array.isArray(t))for(let o=0;o<t.length;o++)wp(t[o],e,n,r,i);else{const o=Ye(),s=ue();let a=va(t)?t:be(t.provide),l=d_(t);const h=zt(),m=1048575&h.providerIndexes,E=h.directiveStart,k=h.providerIndexes>>20;if(va(t)||!t.multi){const N=new w(l,i,ce),H=Dp(a,e,i?m:m+k,E);-1===H?(Pl(Dc(h,s),o,a),Ep(o,t,e.length),e.push(a),h.directiveStart++,h.directiveEnd++,i&&(h.providerIndexes+=1048576),n.push(N),s.push(N)):(n[H]=N,s[H]=N)}else{const N=Dp(a,e,m+k,E),H=Dp(a,e,m,m+k),Z=N>=0&&n[N],K=H>=0&&n[H];if(i&&!K||!i&&!Z){Pl(Dc(h,s),o,a);const ae=function(t,e,n,r,i){const o=new w(t,n,ce);return o.multi=[],o.index=e,o.componentProviders=0,hC(o,i,r&&!n),o}(i?oR:iR,n.length,i,r,l);!i&&K&&(n[H].providerFactory=ae),Ep(o,t,e.length,0),e.push(a),h.directiveStart++,h.directiveEnd++,i&&(h.providerIndexes+=1048576),n.push(ae),s.push(ae)}else Ep(o,t,N>-1?N:H,hC(n[i?H:N],l,!i&&r));!i&&r&&K&&n[H].componentProviders++}}}function Ep(t,e,n,r){const i=va(e);if(i||function(t){return!!t.useClass}(e)){const s=(e.useClass||e).prototype.ngOnDestroy;if(s){const a=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const l=a.indexOf(n);-1===l?a.push(n,[r,s]):a[l+1].push(r,s)}else a.push(n,s)}}}function hC(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Dp(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function iR(t,e,n,r){return Sp(this.multi,[])}function oR(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=Sc(n,n[1],this.providerFactory.index,r);o=a.slice(0,s),Sp(i,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],Sp(i,o);return o}function Sp(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function xt(t,e=[]){return n=>{n.providersResolver=(r,i)=>function(t,e,n){const r=Ye();if(r.firstCreatePass){const i=ir(t);wp(n,r.data,r.blueprint,i,!0),wp(e,r.data,r.blueprint,i,!1)}}(r,i?i(t):t,e)}}class pC{}const mC="ngComponent";class cR{resolveComponentFactory(e){throw function(t){const e=Error(`No component factory found for ${Ae(t)}. Did you add it to @NgModule.entryComponents?`);return e[mC]=t,e}(e)}}let ps=(()=>{class t{}return t.NULL=new cR,t})();function ud(...t){}function ka(t,e){return new dn(Rt(t,e))}const dR=function(){return ka(zt(),ue())};let dn=(()=>{class t{constructor(n){this.nativeElement=n}}return t.__NG_ELEMENT_ID__=dR,t})();class ld{}let Xi=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>hR(),t})();const hR=function(){const t=ue(),n=wn(zt().index,t);return function(t){return t[11]}(Fn(n)?n:t)};let Mp=(()=>{class t{}return t.\u0275prov=Te({token:t,providedIn:"root",factory:()=>null}),t})();class tu{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const vC=new tu("12.2.9");class _C{constructor(){}supports(e){return Gc(e)}create(e){return new yR(e)}}const mR=(t,e)=>e;class yR{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||mR}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){const s=!r||n&&n.currentIndex<CC(r,i,o)?n:r,a=CC(s,i,o),l=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,null==s.previousIndex)i++;else{o||(o=[]);const h=a-i,m=l-i;if(h!=m){for(let k=0;k<h;k++){const N=k<o.length?o[k]:o[k]=0,H=N+k;m<=H&&H<h&&(o[k]=N+1)}o[s.previousIndex]=m-h}}a!==l&&e(s,a,l)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!Gc(e))throw new Error(`Error trying to diff '${Ae(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,o,s,n=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)):(n=this._mismatch(n,o,s,a),r=!0),n=n._next}else i=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[_a()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(e,a=>{s=this._trackByFn(i,a),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,s,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new vR(n,r),o,i),e}_verifyReinsertion(e,n,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,o=e._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){const i=null===n?this._itHead:n._next;return e._next=i,e._prev=n,null===i?this._itTail=e:i._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new bC),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,r=e._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new bC),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class vR{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class _R{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const n=e._prevDup,r=e._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class bC{constructor(){this.map=new Map}put(e){const n=e.trackById;let r=this.map.get(n);r||(r=new _R,this.map.set(n,r)),r.add(e)}get(e,n){const i=this.map.get(e);return i?i.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function CC(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class wC{constructor(){}supports(e){return e instanceof Map||cp(e)}create(){return new bR}}class bR{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let n;for(n=this._mapHead;null!==n;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;null!==n;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}diff(e){if(e){if(!(e instanceof Map||cp(e)))throw new Error(`Error trying to diff '${Ae(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(n&&n.key===i)this._maybeAddToChanges(n,r),this._appendAfter=n,n=n._next;else{const o=this._getOrCreateRecordForKey(i,r);n=this._insertBeforeOrAppend(n,o)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){const r=e._prev;return n._next=e,n._prev=r,e._prev=n,r&&(r._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,n);const o=i._prev,s=i._next;return o&&(o._next=s),s&&(s._prev=o),i._next=null,i._prev=null,i}const r=new CR(e);return this._records.set(e,r),r.currentValue=n,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(r=>n(e[r],r))}}class CR{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function EC(){return new nu([new _C])}let nu=(()=>{class t{constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||EC()),deps:[[t,new Eo,new Qn]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new Error(`Cannot find a differ supporting object '${n}' of type '${function(t){return t.name||typeof t}(n)}'`)}}return t.\u0275prov=Te({token:t,providedIn:"root",factory:EC}),t})();function DC(){return new Na([new wC])}let Na=(()=>{class t{constructor(n){this.factories=n}static create(n,r){if(r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||DC()),deps:[[t,new Eo,new Qn]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(r)return r;throw new Error(`Cannot find a differ supporting object '${n}'`)}}return t.\u0275prov=Te({token:t,providedIn:"root",factory:DC}),t})();function dd(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(Xe(o)),Wn(o))for(let a=10;a<o.length;a++){const l=o[a],h=l[1].firstChild;null!==h&&dd(l[1],l,h,r)}const s=n.type;if(8&s)dd(t,e,n.child,r);else if(32&s){const a=Dh(n,e);let l;for(;l=a();)r.push(l)}else if(16&s){const a=wv(e,n);if(Array.isArray(a))r.push(...a);else{const l=Lc(e[16]);dd(l[1],l,a,r,!0)}}n=i?n.projectionNext:n.next}return r}class ru{constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,n=e[1];return dd(n,e,n.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(Wn(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(Ph(e,r),as(n,r))}this._attachedToViewContainer=!1}hv(this._lView[1],this._lView)}onDestroy(e){!function(t,e,n,r){const i=r_(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&i_(t).push(r,i.length-1))}(this._lView[1],this._lView,null,e)}markForCheck(){Kh(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Xh(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Ks(!0);try{Xh(t,e,n)}finally{Ks(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function(t,e){jc(t,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}class ER extends ru{constructor(e){super(e),this._view=e}detectChanges(){n_(this._view)}checkNoChanges(){!function(t){Ks(!0);try{n_(t)}finally{Ks(!1)}}(this._view)}get context(){return null}}const SR=function(t){return function(t,e,n){if(Zo(t)&&!n){const r=wn(t.index,e);return new ru(r,r)}return 47&t.type?new ru(e[16],e):null}(zt(),ue(),16==(16&t))};let Ip=(()=>{class t{}return t.__NG_ELEMENT_ID__=SR,t})();const IR=[new wC],xR=new nu([new _C]),RR=new Na(IR),OR=function(){return function(t,e){return 4&t.type?new NR(e,t,ka(t,e)):null}(zt(),ue())};let Zi=(()=>{class t{}return t.__NG_ELEMENT_ID__=OR,t})();const kR=Zi,NR=class extends kR{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}createEmbeddedView(e){const n=this._declarationTContainer.tViews,r=Bc(this._declarationLView,n,e,16,null,n.declTNode,null,null,null,null);r[17]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[19];return null!==o&&(r[19]=o.createEmbeddedView(n)),Uc(n,r,e),new ru(r)}};class Ei{}class SC{}const LR=function(){return function(t,e){let n;const r=e[t.index];if(Wn(r))n=r;else{let i;if(8&t.type)i=Xe(r);else{const o=e[11];i=o.createComment("");const s=Rt(t,e);ds(o,Hl(o,s),i,function(t,e){return dt(t)?t.nextSibling(e):e.nextSibling}(o,s),!1)}e[t.index]=n=t_(r,e,i,t),Ql(e,n)}return new TC(n,t,e)}(zt(),ue())};let Qr=(()=>{class t{}return t.__NG_ELEMENT_ID__=LR,t})();const BR=Qr,TC=class extends BR{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return ka(this._hostTNode,this._hostLView)}get injector(){return new ta(this._hostTNode,this._hostLView)}get parentInjector(){const e=Il(this._hostTNode,this._hostLView);if(nt(e)){const n=tt(e,this._hostLView),r=at(e);return new ta(n[1].data[r+8],n)}return new ta(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=MC(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,n,r){const i=e.createEmbeddedView(n||{});return this.insert(i,r),i}createComponent(e,n,r,i,o){const s=r||this.parentInjector;if(!o&&null==e.ngModule&&s){const l=s.get(Ei,null);l&&(o=l)}const a=e.create(s,i,void 0,o);return this.insert(a.hostView,n),a}insert(e,n){const r=e._lView,i=r[1];if(function(t){return Wn(t[3])}(r)){const m=this.indexOf(e);if(-1!==m)this.detach(m);else{const E=r[3],k=new TC(E,E[6],E[3]);k.detach(k.indexOf(e))}}const o=this._adjustIndex(n),s=this._lContainer;!function(t,e,n,r){const i=10+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-10?(e[4]=n[i],Ol(n,10+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(i,r,s,o);const a=Ah(o,s),l=r[11],h=Hl(l,s[7]);return null!==h&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,jc(t,r,n,1,i,o)}(i,s[6],l,r,h,a),e.attachToViewContainerRef(),Ol(Pp(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=MC(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=Ph(this._lContainer,n);r&&(as(Pp(this._lContainer),n),hv(r[1],r))}detach(e){const n=this._adjustIndex(e,-1),r=Ph(this._lContainer,n);return r&&null!=as(Pp(this._lContainer),n)?new ru(r):null}_adjustIndex(e,n=0){return null==e?this.length+n:e}};function MC(t){return t[8]}function Pp(t){return t[8]||(t[8]=[])}const ja={};class YC extends ps{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=Vt(e);return new KC(n,this.ngModule)}}function QC(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const FA=new Ge("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>ov});class KC extends pC{constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function(t){return t.map(TM).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}get inputs(){return QC(this.componentDef.inputs)}get outputs(){return QC(this.componentDef.outputs)}create(e,n,r,i){const o=(i=i||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,ja,i);return o!==ja||r===ja?o:e.get(n,r,i)}}}(e,i.injector):e,s=o.get(ld,pl),a=o.get(Mp,null),l=s.createRenderer(null,this.componentDef),h=this.componentDef.selectors[0][0]||"div",m=r?function(t,e,n){if(dt(t))return t.selectRootElement(e,n===Ut.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(l,r,this.componentDef.encapsulation):Ih(s.createRenderer(null,this.componentDef),h,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(h)),E=this.componentDef.onPush?576:528,k=function(t,e){return{components:[],scheduler:t||ov,clean:lI,playerHandler:e||null,flags:0}}(),N=Yl(0,null,null,1,0,null,null,null,null,null),H=Bc(null,N,k,E,null,null,s,l,a,o);let Z,K;Wi(H);try{const ae=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const l=ha(s,20,2,"#host",null),h=l.mergedAttrs=e.hostAttrs;null!==h&&(Kl(l,h,!0),null!==t&&(ge(i,t,h),null!==l.classes&&kh(i,t,l.classes),null!==l.styles&&Sv(i,t,l.styles)));const m=r.createRenderer(t,e),E=Bc(n,zv(e),null,e.onPush?64:16,n[20],l,r,m,o||null,null);return s.firstCreatePass&&(Pl(Dc(l,n),s,e.type),Xv(s,l),Zv(l,n.length,1)),Ql(n,E),n[20]=E}(m,this.componentDef,H,s,l);if(m)if(r)ge(l,m,["ng-version",vC.full]);else{const{attrs:re,classes:ve}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!$r(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);re&&ge(l,m,re),ve&&ve.length>0&&kh(l,m,ve.join(" "))}if(K=Qs(N,20),void 0!==n){const re=K.projection=[];for(let ve=0;ve<this.ngContentSelectors.length;ve++){const Me=n[ve];re.push(null!=Me?Array.from(Me):null)}}Z=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=zt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),e_(t,r,e,pa(t,e,1,null),n));const i=Sc(e,t,r.directiveStart,r);Sn(i,e);const o=Rt(r,e);return o&&Sn(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(l=>l(s,e)),e.contentQueries){const l=zt();e.contentQueries(1,s,l.directiveStart)}const a=zt();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(Hr(a.index),Kv(n[1],a,0,a.directiveStart,a.directiveEnd,e),Jv(e,s)),s}(ae,this.componentDef,H,k,[FI]),Uc(N,H,null)}finally{Zs()}return new jA(this.componentType,Z,ka(K,H),H,K)}}class jA extends class{}{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.instance=n,this.hostView=this.changeDetectorRef=new ER(i),this.componentType=e}get injector(){return new ta(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}const Ba=new Map;class HA extends Ei{constructor(e,n){super(),this._parent=n,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new YC(this);const r=On(e),i=function(t){return t[Vs]||null}(e);i&&_p(i),this._bootstrapComponents=vi(r.bootstrap),this._r3Injector=l_(e,n,[{provide:Ei,useValue:this},{provide:ps,useValue:this.componentFactoryResolver}],Ae(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,n=ft.THROW_IF_NOT_FOUND,r=Se.Default){return e===ft||e===Ei||e===ma?this:this._r3Injector.get(e,n,r)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Hp extends SC{constructor(e){super(),this.moduleType=e,null!==On(e)&&function(t){const e=new Set;!function n(r){const i=On(r,!0),o=i.id;null!==o&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${Ae(e)} vs ${Ae(e.name)}`)}(o,Ba.get(o),r),Ba.set(o,r));const s=vi(i.imports);for(const a of s)e.has(a)||(e.add(a),n(a))}(t)}(e)}create(e){return new HA(this.moduleType,e)}}function $p(t){return e=>{setTimeout(t,void 0,e)}}const nn=class extends z{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){var i,o,s;let a=e,l=n||(()=>null),h=r;if(e&&"object"==typeof e){const E=e;a=null===(i=E.next)||void 0===i?void 0:i.bind(E),l=null===(o=E.error)||void 0===o?void 0:o.bind(E),h=null===(s=E.complete)||void 0===s?void 0:s.bind(E)}this.__isAsync&&(l=$p(l),a&&(a=$p(a)),h&&(h=$p(h)));const m=super.subscribe({next:a,error:l,complete:h});return e instanceof V&&e.add(m),m}};Symbol;const gu=new Ge("Application Initializer");let Ha=(()=>{class t{constructor(n){this.appInits=n,this.resolve=ud,this.reject=ud,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const n=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const o=this.appInits[i]();if(Yc(o))n.push(o);else if(ed(o)){const s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});n.push(s)}}Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}}return t.\u0275fac=function(n){return new(n||t)(he(gu,8))},t.\u0275prov=Te({token:t,factory:t.\u0275fac}),t})();const mu=new Ge("AppId"),zO={provide:mu,useFactory:function(){return`${rg()}${rg()}${rg()}`},deps:[]};function rg(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const T0=new Ge("Platform Initializer"),bd=new Ge("Platform ID"),M0=new Ge("appBootstrapListener");let Cd=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Te({token:t,factory:t.\u0275fac}),t})();const Io=new Ge("LocaleId"),I0=new Ge("DefaultCurrencyCode");class WO{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}const ig=function(t){return new Hp(t)},qO=ig,YO=function(t){return Promise.resolve(ig(t))},P0=function(t){const e=ig(t),r=vi(On(t).declarations).reduce((i,o)=>{const s=Vt(o);return s&&i.push(new KC(s)),i},[]);return new WO(e,r)},QO=P0,KO=function(t){return Promise.resolve(P0(t))};let ys=(()=>{class t{constructor(){this.compileModuleSync=qO,this.compileModuleAsync=YO,this.compileModuleAndAllComponentsSync=QO,this.compileModuleAndAllComponentsAsync=KO}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Te({token:t,factory:t.\u0275fac}),t})();const ZO=(()=>Promise.resolve(0))();function og(t){"undefined"==typeof Zone?ZO.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Yt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new nn(!1),this.onMicrotaskEmpty=new nn(!1),this.onStable=new nn(!1),this.onError=new nn(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function(){let t=it.requestAnimationFrame,e=it.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(it,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,ag(t),t.isCheckStableRunning=!0,sg(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),ag(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return x0(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),R0(t)}},onInvoke:(n,r,i,o,s,a,l)=>{try{return x0(t),n.invoke(i,o,s,a,l)}finally{t.shouldCoalesceRunChangeDetection&&e(),R0(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&("microTask"==o.change?(t._hasPendingMicrotasks=o.microTask,ag(t),sg(t)):"macroTask"==o.change&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Yt.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Yt.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,t1,ud,ud);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const t1={};function sg(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function ag(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function x0(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function R0(t){t._nesting--,sg(t)}class i1{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new nn,this.onMicrotaskEmpty=new nn,this.onStable=new nn,this.onError=new nn}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}let cg=(()=>{class t{constructor(n){this._ngZone=n,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Yt.assertNotInAngularZone(),og(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())og(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:o,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(n,r,i){return[]}}return t.\u0275fac=function(n){return new(n||t)(he(Yt))},t.\u0275prov=Te({token:t,factory:t.\u0275fac}),t})(),A0=(()=>{class t{constructor(){this._applications=new Map,ug.addToWindow(this)}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return ug.findTestabilityInTree(this,n,r)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Te({token:t,factory:t.\u0275fac}),t})();class o1{addToWindow(e){}findTestabilityInTree(e,n,r){return null}}let ug=new o1,O0=!0,k0=!1;let Xr;const F0=new Ge("AllowMultipleToken");class lg{constructor(e,n){this.name=e,this.token=n}}function V0(t,e,n=[]){const r=`Platform: ${e}`,i=new Ge(r);return(o=[])=>{let s=L0();if(!s||s.injector.get(F0,!1))if(t)t(n.concat(o).concat({provide:i,useValue:!0}));else{const a=n.concat(o).concat({provide:i,useValue:!0},{provide:Hc,useValue:"platform"});!function(t){if(Xr&&!Xr.destroyed&&!Xr.injector.get(F0,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Xr=t.get(j0);const e=t.get(T0,null);e&&e.forEach(n=>n())}(ft.create({providers:a,name:r}))}return function(t){const e=L0();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function L0(){return Xr&&!Xr.destroyed?Xr:null}let j0=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const a=function(t,e){let n;return n="noop"===t?new i1:("zone.js"===t?void 0:t)||new Yt({enableLongStackTrace:(k0=!0,O0),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(r?r.ngZone:void 0,{ngZoneEventCoalescing:r&&r.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:r&&r.ngZoneRunCoalescing||!1}),l=[{provide:Yt,useValue:a}];return a.run(()=>{const h=ft.create({providers:l,parent:this.injector,name:n.moduleType.name}),m=n.create(h),E=m.injector.get(ls,null);if(!E)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return a.runOutsideAngular(()=>{const k=a.onError.subscribe({next:N=>{E.handleError(N)}});m.onDestroy(()=>{dg(this._modules,m),k.unsubscribe()})}),function(t,e,n){try{const r=n();return Yc(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(E,a,()=>{const k=m.injector.get(Ha);return k.runInitializers(),k.donePromise.then(()=>(_p(m.injector.get(Io,id)||id),this._moduleDoBootstrap(m),m))})})}bootstrapModule(n,r=[]){const i=B0({},r);return function(t,e,n){const r=new Hp(n);return Promise.resolve(r)}(0,0,n).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(n){const r=n.injector.get($a);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new Error(`The module ${Ae(n.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(n=>n.destroy()),this._destroyListeners.forEach(n=>n()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(n){return new(n||t)(he(ft))},t.\u0275prov=Te({token:t,factory:t.\u0275fac}),t})();function B0(t,e){return Array.isArray(e)?e.reduce(B0,t):Object.assign(Object.assign({},t),e)}let $a=(()=>{class t{constructor(n,r,i,o,s){this._zone=n,this._injector=r,this._exceptionHandler=i,this._componentFactoryResolver=o,this._initStatus=s,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const a=new R(h=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{h.next(this._stable),h.complete()})}),l=new R(h=>{let m;this._zone.runOutsideAngular(()=>{m=this._zone.onStable.subscribe(()=>{Yt.assertNotInAngularZone(),og(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,h.next(!0))})})});const E=this._zone.onUnstable.subscribe(()=>{Yt.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{h.next(!1)}))});return()=>{m.unsubscribe(),E.unsubscribe()}});this.isStable=function(...t){let e=Number.POSITIVE_INFINITY,n=null,r=t[t.length-1];return me(r)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof r&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof R?t[0]:Uo(e)(fo(t,n))}(a,l.pipe(t=>Ho()(function(t,e){return function(r){let i;i="function"==typeof t?t:function(){return t};const o=Object.create(r,Wu);return o.source=r,o.subjectFactory=i,o}}(Rf)(t))))}bootstrap(n,r){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let i;i=n instanceof pC?n:this._componentFactoryResolver.resolveComponentFactory(n),this.componentTypes.push(i.componentType);const o=function(t){return t.isBoundToModule}(i)?void 0:this._injector.get(Ei),a=i.create(ft.NULL,[],r||i.selector,o),l=a.location.nativeElement,h=a.injector.get(cg,null),m=h&&a.injector.get(A0);return h&&m&&m.registerApplication(l,h),a.onDestroy(()=>{this.detachView(a.hostView),dg(this.components,a),m&&m.unregisterApplication(l)}),this._loadComponent(a),a}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;dg(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(M0,[]).concat(this._bootstrapListeners).forEach(i=>i(n))}ngOnDestroy(){this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(n){return new(n||t)(he(Yt),he(ft),he(ls),he(ps),he(Ha))},t.\u0275prov=Te({token:t,factory:t.\u0275fac}),t})();function dg(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Ed{}class b1{}const C1={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let w1=(()=>{class t{constructor(n,r){this._compiler=n,this._config=r||C1}load(n){return this.loadAndCompile(n)}loadAndCompile(n){let[r,i]=n.split("#");return void 0===i&&(i="default"),Fe(255)(r).then(o=>o[i]).then(o=>z0(o,r,i)).then(o=>this._compiler.compileModuleAsync(o))}loadFactory(n){let[r,i]=n.split("#"),o="NgFactory";return void 0===i&&(i="default",o=""),Fe(255)(this._config.factoryPathPrefix+r+this._config.factoryPathSuffix).then(s=>s[i+o]).then(s=>z0(s,r,i))}}return t.\u0275fac=function(n){return new(n||t)(he(ys),he(b1,8))},t.\u0275prov=Te({token:t,factory:t.\u0275fac}),t})();function z0(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const A1=V0(null,"core",[{provide:bd,useValue:"unknown"},{provide:j0,deps:[ft]},{provide:A0,deps:[]},{provide:Cd,deps:[]}]),V1=[{provide:$a,useClass:$a,deps:[Yt,ft,ls,ps,Ha]},{provide:FA,deps:[Yt],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(n){e.push(n)}}},{provide:Ha,useClass:Ha,deps:[[new Qn,gu]]},{provide:ys,useClass:ys,deps:[]},zO,{provide:nu,useFactory:function(){return xR},deps:[]},{provide:Na,useFactory:function(){return RR},deps:[]},{provide:Io,useFactory:function(t){return _p(t=t||"undefined"!=typeof $localize&&$localize.locale||id),t},deps:[[new ca(Io),new Qn,new Eo]]},{provide:I0,useValue:"USD"}];let j1=(()=>{class t{constructor(n){}}return t.\u0275fac=function(n){return new(n||t)(he($a))},t.\u0275mod=bn({type:t}),t.\u0275inj=Ft({providers:V1}),t})(),Od=null;function Di(){return Od}const pn=new Ge("DocumentToken");let xo=(()=>{class t{historyGo(n){throw new Error("Not implemented")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Te({factory:Lk,token:t,providedIn:"platform"}),t})();function Lk(){return he(pw)}const jk=new Ge("Location Initialized");let pw=(()=>{class t extends xo{constructor(n){super(),this._doc=n,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Di().getBaseHref(this._doc)}onPopState(n){const r=Di().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=Di().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(n){this.location.pathname=n}pushState(n,r,i){gw()?this._history.pushState(n,r,i):this.location.hash=i}replaceState(n,r,i){gw()?this._history.replaceState(n,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}}return t.\u0275fac=function(n){return new(n||t)(he(pn))},t.\u0275prov=Te({factory:Bk,token:t,providedIn:"platform"}),t})();function gw(){return!!window.history.pushState}function Bk(){return new pw(he(pn))}function Tg(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function mw(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function to(t){return t&&"?"!==t[0]?"?"+t:t}let Wa=(()=>{class t{historyGo(n){throw new Error("Not implemented")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Te({factory:Uk,token:t,providedIn:"root"}),t})();function Uk(t){const e=he(pn).location;return new yw(he(xo),e&&e.origin||"")}const Cu=new Ge("appBaseHref");let yw=(()=>{class t extends Wa{constructor(n,r){if(super(),this._platformLocation=n,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Tg(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+to(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){const s=this.prepareExternalUrl(i+to(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){const s=this.prepareExternalUrl(i+to(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(n=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,n)}}return t.\u0275fac=function(n){return new(n||t)(he(xo),he(Cu,8))},t.\u0275prov=Te({token:t,factory:t.\u0275fac}),t})(),Hk=(()=>{class t extends Wa{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=Tg(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+to(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+to(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(n=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,n)}}return t.\u0275fac=function(n){return new(n||t)(he(xo),he(Cu,8))},t.\u0275prov=Te({token:t,factory:t.\u0275fac}),t})(),kd=(()=>{class t{constructor(n,r){this._subject=new nn,this._urlChangeListeners=[],this._platformStrategy=n;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=mw(vw(i)),this._platformStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}path(n=!1){return this.normalize(this._platformStrategy.path(n))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+to(r))}normalize(n){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,vw(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._platformStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._platformStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+to(r)),i)}replaceState(n,r="",i=null){this._platformStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+to(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(n=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,n)}onUrlChange(n){this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}}return t.\u0275fac=function(n){return new(n||t)(he(Wa),he(xo))},t.normalizeQueryParams=to,t.joinWithSlash=Tg,t.stripTrailingSlash=mw,t.\u0275prov=Te({factory:$k,token:t,providedIn:"root"}),t})();function $k(){return new kd(he(Wa),he(xo))}function vw(t){return t.replace(/\/index.html$/,"")}var Qt=(()=>((Qt=Qt||{})[Qt.Zero=0]="Zero",Qt[Qt.One=1]="One",Qt[Qt.Two=2]="Two",Qt[Qt.Few=3]="Few",Qt[Qt.Many=4]="Many",Qt[Qt.Other=5]="Other",Qt))();const Jk=function(t){return function(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=Hb(e);if(n)return n;const r=e.split("-")[0];if(n=Hb(r),n)return n;if("en"===r)return cx;throw new Error(`Missing locale data for the locale "${t}".`)}(t)[_e.PluralCase]};class zd{}let TN=(()=>{class t extends zd{constructor(n){super(),this.locale=n}getPluralCategory(n,r){switch(Jk(r||this.locale)(n)){case Qt.Zero:return"zero";case Qt.One:return"one";case Qt.Two:return"two";case Qt.Few:return"few";case Qt.Many:return"many";default:return"other"}}}return t.\u0275fac=function(n){return new(n||t)(he(Io))},t.\u0275prov=Te({token:t,factory:t.\u0275fac}),t})();function Mw(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,o]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}class PN{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Gd=(()=>{class t{constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(r){throw new Error(`Cannot find a differ supporting object '${n}' of type '${function(t){return t.name||typeof t}(n)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=[];n.forEachOperation((i,o,s)=>{if(null==i.previousIndex){const a=this._viewContainer.createEmbeddedView(this._template,new PN(null,this._ngForOf,-1,-1),null===s?void 0:s),l=new Iw(i,a);r.push(l)}else if(null==s)this._viewContainer.remove(null===o?void 0:o);else if(null!==o){const a=this._viewContainer.get(o);this._viewContainer.move(a,s);const l=new Iw(i,a);r.push(l)}});for(let i=0;i<r.length;i++)this._perViewChange(r[i].view,r[i].record);for(let i=0,o=this._viewContainer.length;i<o;i++){const s=this._viewContainer.get(i);s.context.index=i,s.context.count=o,s.context.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{this._viewContainer.get(i.currentIndex).context.$implicit=i.item})}_perViewChange(n,r){n.context.$implicit=r.item}static ngTemplateContextGuard(n,r){return!0}}return t.\u0275fac=function(n){return new(n||t)(ce(Qr),ce(Zi),ce(nu))},t.\u0275dir=Pe({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class Iw{constructor(e,n){this.record=e,this.view=n}}let Wd=(()=>{class t{constructor(n,r){this._viewContainer=n,this._context=new RN,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){Pw("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){Pw("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}}return t.\u0275fac=function(n){return new(n||t)(ce(Qr),ce(Zi))},t.\u0275dir=Pe({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class RN{constructor(){this.$implicit=null,this.ngIf=null}}function Pw(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Ae(e)}'.`)}let rF=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=bn({type:t}),t.\u0275inj=Ft({providers:[{provide:zd,useClass:TN}]}),t})();let Ow=(()=>{class t{}return t.\u0275prov=Te({token:t,providedIn:"root",factory:()=>new aF(he(pn),window)}),t})();class aF{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const n=function(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}(this.document,e);n&&(this.scrollToElement(n),this.attemptFocus(n))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const n=this.window.history;n&&n.scrollRestoration&&(n.scrollRestoration=e)}}scrollToElement(e){const n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=kw(this.window.history)||kw(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function kw(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class Nw{}class jg extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function(t){Od||(Od=t)}(new jg)}onAndCancel(e,n,r){return e.addEventListener(n,r,!1),()=>{e.removeEventListener(n,r,!1)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=(Du=Du||document.querySelector("base"),Du?Du.getAttribute("href"):null);return null==n?null:function(t){qd=qd||document.createElement("a"),qd.setAttribute("href",t);const e=qd.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){Du=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Mw(document.cookie,e)}}let qd,Du=null;const Fw=new Ge("TRANSITION_ID"),hF=[{provide:gu,useFactory:function(t,e,n){return()=>{n.get(Ha).donePromise.then(()=>{const r=Di(),i=e.querySelectorAll(`style[ng-transition="${t}"]`);for(let o=0;o<i.length;o++)r.remove(i[o])})}},deps:[Fw,pn,ft],multi:!0}];class Bg{static init(){!function(t){ug=t}(new Bg)}addToWindow(e){it.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new Error("Could not find testability for element.");return o},it.getAllAngularTestabilities=()=>e.getAllTestabilities(),it.getAllAngularRootElements=()=>e.getAllRootElements(),it.frameworkStabilizers||(it.frameworkStabilizers=[]),it.frameworkStabilizers.push(r=>{const i=it.getAllAngularTestabilities();let o=i.length,s=!1;const a=function(l){s=s||l,o--,0==o&&r(s)};i.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(e,n,r){if(null==n)return null;const i=e.getTestability(n);return null!=i?i:r?Di().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null}}let pF=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Te({token:t,factory:t.\u0275fac}),t})();const Su=new Ge("EventManagerPlugins");let Qd=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>i.manager=this),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}addGlobalEventListener(n,r,i){return this._findPluginFor(r).addGlobalEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){const r=this._eventNameToPlugin.get(n);if(r)return r;const i=this._plugins;for(let o=0;o<i.length;o++){const s=i[o];if(s.supports(n))return this._eventNameToPlugin.set(n,s),s}throw new Error(`No event manager plugin found for event ${n}`)}}return t.\u0275fac=function(n){return new(n||t)(he(Su),he(Yt))},t.\u0275prov=Te({token:t,factory:t.\u0275fac}),t})();class Ug{constructor(e){this._doc=e}addGlobalEventListener(e,n,r){const i=Di().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${n}`);return this.addEventListener(i,n,r)}}let Lw=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(n){const r=new Set;n.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(n){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Te({token:t,factory:t.\u0275fac}),t})(),Tu=(()=>{class t extends Lw{constructor(n){super(),this._doc=n,this._hostNodes=new Map,this._hostNodes.set(n.head,[])}_addStylesToHost(n,r,i){n.forEach(o=>{const s=this._doc.createElement("style");s.textContent=o,i.push(r.appendChild(s))})}addHost(n){const r=[];this._addStylesToHost(this._stylesSet,n,r),this._hostNodes.set(n,r)}removeHost(n){const r=this._hostNodes.get(n);r&&r.forEach(jw),this._hostNodes.delete(n)}onStylesAdded(n){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(n,i,r)})}ngOnDestroy(){this._hostNodes.forEach(n=>n.forEach(jw))}}return t.\u0275fac=function(n){return new(n||t)(he(pn))},t.\u0275prov=Te({token:t,factory:t.\u0275fac}),t})();function jw(t){Di().remove(t)}const Hg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},$g=/%COMP%/g;function Kd(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Kd(t,i,n):(i=i.replace($g,t),n.push(i))}return n}function Hw(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let zg=(()=>{class t{constructor(n,r,i){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Gg(n)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;switch(r.encapsulation){case Ut.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new PF(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(n),i}case 1:case Ut.ShadowDom:return new xF(this.eventManager,this.sharedStylesHost,n,r);default:if(!this.rendererByCompId.has(r.id)){const i=Kd(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(n){return new(n||t)(he(Qd),he(Tu),he(mu))},t.\u0275prov=Te({token:t,factory:t.\u0275fac}),t})();class Gg{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,n){return n?document.createElementNS(Hg[n]||n,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,n){e.appendChild(n)}insertBefore(e,n,r){e&&e.insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const o=Hg[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=Hg[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(ur.DashCase|ur.Important)?e.style.setProperty(n,r,i&ur.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&ur.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e[n]=r}setValue(e,n){e.nodeValue=n}listen(e,n,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,n,Hw(r)):this.eventManager.addEventListener(e,n,Hw(r))}}class PF extends Gg{constructor(e,n,r,i){super(e),this.component=r;const o=Kd(i+"-"+r.id,r.styles,[]);n.addStyles(o),this.contentAttr=function(t){return"_ngcontent-%COMP%".replace($g,t)}(i+"-"+r.id),this.hostAttr=function(t){return"_nghost-%COMP%".replace($g,t)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}class xF extends Gg{constructor(e,n,r,i){super(e),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=Kd(i.id,i.styles,[]);for(let s=0;s<o.length;s++){const a=document.createElement("style");a.textContent=o[s],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let RF=(()=>{class t extends Ug{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}}return t.\u0275fac=function(n){return new(n||t)(he(pn))},t.\u0275prov=Te({token:t,factory:t.\u0275fac}),t})();const Gw=["alt","control","meta","shift"],LF={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ww={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},jF={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let BF=(()=>{class t extends Ug{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i){const o=t.parseEventName(r),s=t.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Di().onAndCancel(n,o.domEventName,s))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=t._normalizeKey(r.pop());let s="";if(Gw.forEach(l=>{const h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,0!=r.length||0===o.length)return null;const a={};return a.domEventName=i,a.fullKey=s,a}static getEventFullKey(n){let r="",i=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&Ww.hasOwnProperty(e)&&(e=Ww[e]))}return LF[e]||e}(n);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Gw.forEach(o=>{o!=i&&jF[o](n)&&(r+=o+".")}),r+=i,r}static eventCallback(n,r,i){return o=>{t.getEventFullKey(o)===n&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){switch(n){case"esc":return"escape";default:return n}}}return t.\u0275fac=function(n){return new(n||t)(he(pn))},t.\u0275prov=Te({token:t,factory:t.\u0275fac}),t})();const YF=V0(A1,"browser",[{provide:bd,useValue:"browser"},{provide:T0,useValue:function(){jg.makeCurrent(),Bg.init()},multi:!0},{provide:pn,useFactory:function(){return function(t){qs=t}(document),document},deps:[]}]),QF=[[],{provide:Hc,useValue:"root"},{provide:ls,useFactory:function(){return new ls},deps:[]},{provide:Su,useClass:RF,multi:!0,deps:[pn,Yt,bd]},{provide:Su,useClass:BF,multi:!0,deps:[pn]},[],{provide:zg,useClass:zg,deps:[Qd,Tu,mu]},{provide:ld,useExisting:zg},{provide:Lw,useExisting:Tu},{provide:Tu,useClass:Tu,deps:[pn]},{provide:cg,useClass:cg,deps:[Yt]},{provide:Qd,useClass:Qd,deps:[Su,Yt]},{provide:Nw,useClass:pF,deps:[]},[]];let KF=(()=>{class t{constructor(n){if(n)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(n){return{ngModule:t,providers:[{provide:mu,useValue:n.appId},{provide:Fw,useExisting:mu},hF]}}}return t.\u0275fac=function(n){return new(n||t)(he(t,12))},t.\u0275mod=bn({type:t}),t.\u0275inj=Ft({providers:QF,imports:[rF,j1]}),t})();function Be(...t){let e=t[t.length-1];return me(e)?(t.pop(),Xn(t,e)):fo(t)}"undefined"!=typeof window&&window;class ri extends z{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return n&&!n.closed&&e.next(this._value),n}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Q;return this._value}next(e){super.next(this._value=e)}}class iV extends M{notifyNext(e,n,r,i,o){this.destination.next(n)}notifyError(e,n){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class oV extends M{constructor(e,n,r){super(),this.parent=e,this.outerValue=n,this.outerIndex=r,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function sV(t,e,n,r,i=new oV(t,n,r)){if(!i.closed)return e instanceof R?e.subscribe(i):gr(e)(i)}const Yw={};class cV{constructor(e){this.resultSelector=e}call(e,n){return n.subscribe(new uV(e,this.resultSelector))}}class uV extends iV{constructor(e,n){super(e),this.resultSelector=n,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(Yw),this.observables.push(e)}_complete(){const e=this.observables,n=e.length;if(0===n)this.destination.complete();else{this.active=n,this.toRespond=n;for(let r=0;r<n;r++)this.add(sV(this,e[r],void 0,r))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,n,r){const i=this.values,s=this.toRespond?i[r]===Yw?--this.toRespond:this.toRespond:0;i[r]=n,0===s&&(this.resultSelector?this._tryResultSelector(i):this.destination.next(i.slice()))}_tryResultSelector(e){let n;try{n=this.resultSelector.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(n)}}const Jd=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();function Kg(...t){return Uo(1)(Be(...t))}const qa=new R(t=>t.complete());function Xd(t){return t?function(t){return new R(e=>t.schedule(()=>e.complete()))}(t):qa}function Qw(t){return new R(e=>{let n;try{n=t()}catch(i){return void e.error(i)}return(n?vt(n):Xd()).subscribe(e)})}function ro(t,e){return"function"==typeof e?n=>n.pipe(ro((r,i)=>vt(t(r,i)).pipe(pe((o,s)=>e(r,o,i,s))))):n=>n.lift(new fV(t))}class fV{constructor(e){this.project=e}call(e,n){return n.subscribe(new hV(e,this.project))}}class hV extends oi{constructor(e,n){super(e),this.project=n,this.index=0}_next(e){let n;const r=this.index++;try{n=this.project(e,r)}catch(i){return void this.destination.error(i)}this._innerSub(n)}_innerSub(e){const n=this.innerSubscription;n&&n.unsubscribe();const r=new ii(this),i=this.destination;i.add(r),this.innerSubscription=xi(e,r),this.innerSubscription!==r&&i.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}const Kw=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function Jg(t){return e=>0===t?Xd():e.lift(new pV(t))}class pV{constructor(e){if(this.total=e,this.total<0)throw new Kw}call(e,n){return n.subscribe(new gV(e,this.total))}}class gV extends M{constructor(e,n){super(e),this.total=n,this.count=0}_next(e){const n=this.total,r=++this.count;r<=n&&(this.destination.next(e),r===n&&(this.destination.complete(),this.unsubscribe()))}}function Jw(...t){const e=t[t.length-1];return me(e)?(t.pop(),n=>Kg(t,n,e)):n=>Kg(t,n)}function Xw(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(i){return i.lift(new mV(t,e,n))}}class mV{constructor(e,n,r=!1){this.accumulator=e,this.seed=n,this.hasSeed=r}call(e,n){return n.subscribe(new yV(e,this.accumulator,this.seed,this.hasSeed))}}class yV extends M{constructor(e,n,r,i){super(e),this.accumulator=n,this._seed=r,this.hasSeed=i,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const n=this.index++;let r;try{r=this.accumulator(this.seed,e,n)}catch(i){this.destination.error(i)}this.seed=r,this.destination.next(r)}}function bs(t,e){return function(r){return r.lift(new vV(t,e))}}class vV{constructor(e,n){this.predicate=e,this.thisArg=n}call(e,n){return n.subscribe(new _V(e,this.predicate,this.thisArg))}}class _V extends M{constructor(e,n,r){super(e),this.predicate=n,this.thisArg=r,this.count=0}_next(e){let n;try{n=this.predicate.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}n&&this.destination.next(e)}}function Cs(t){return function(n){const r=new bV(t),i=n.lift(r);return r.caught=i}}class bV{constructor(e){this.selector=e}call(e,n){return n.subscribe(new CV(e,this.selector,this.caught))}}class CV extends oi{constructor(e,n,r){super(e),this.selector=n,this.caught=r}error(e){if(!this.isStopped){let n;try{n=this.selector(e,this.caught)}catch(o){return void super.error(o)}this._unsubscribeAndRecycle();const r=new ii(this);this.add(r);const i=xi(n,r);i!==r&&this.add(i)}}}function Ya(t,e){return Bt(t,e,1)}function Xg(t){return function(n){return 0===t?Xd():n.lift(new wV(t))}}class wV{constructor(e){if(this.total=e,this.total<0)throw new Kw}call(e,n){return n.subscribe(new EV(e,this.total))}}class EV extends M{constructor(e,n){super(e),this.total=n,this.ring=new Array,this.count=0}_next(e){const n=this.ring,r=this.total,i=this.count++;n.length<r?n.push(e):n[i%r]=e}_complete(){const e=this.destination;let n=this.count;if(n>0){const r=this.count>=this.total?this.total:this.count,i=this.ring;for(let o=0;o<r;o++){const s=n++%r;e.next(i[s])}}e.complete()}}function Zw(t=TV){return e=>e.lift(new DV(t))}class DV{constructor(e){this.errorFactory=e}call(e,n){return n.subscribe(new SV(e,this.errorFactory))}}class SV extends M{constructor(e,n){super(e),this.errorFactory=n,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(n){e=n}this.destination.error(e)}}}function TV(){return new Jd}function eE(t=null){return e=>e.lift(new MV(t))}class MV{constructor(e){this.defaultValue=e}call(e,n){return n.subscribe(new IV(e,this.defaultValue))}}class IV extends M{constructor(e,n){super(e),this.defaultValue=n,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function Qa(t,e){const n=arguments.length>=2;return r=>r.pipe(t?bs((i,o)=>t(i,o,r)):v,Jg(1),n?eE(e):Zw(()=>new Jd))}function Ao(){}function fr(t,e,n){return function(i){return i.lift(new xV(t,e,n))}}class xV{constructor(e,n,r){this.nextOrObserver=e,this.error=n,this.complete=r}call(e,n){return n.subscribe(new RV(e,this.nextOrObserver,this.error,this.complete))}}class RV extends M{constructor(e,n,r,i){super(e),this._tapNext=Ao,this._tapError=Ao,this._tapComplete=Ao,this._tapError=r||Ao,this._tapComplete=i||Ao,se(n)?(this._context=this,this._tapNext=n):n&&(this._context=n,this._tapNext=n.next||Ao,this._tapError=n.error||Ao,this._tapComplete=n.complete||Ao)}_next(e){try{this._tapNext.call(this._context,e)}catch(n){return void this.destination.error(n)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(n){return void this.destination.error(n)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}class OV{constructor(e){this.callback=e}call(e,n){return n.subscribe(new kV(e,this.callback))}}class kV extends M{constructor(e,n){super(e),this.add(new V(n))}}class io{constructor(e,n){this.id=e,this.url=n}}class Zg extends io{constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Mu extends io{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class tE extends io{constructor(e,n,r){super(e,n),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class NV extends io{constructor(e,n,r){super(e,n),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class FV extends io{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class VV extends io{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class LV extends io{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class jV extends io{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class BV extends io{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class nE{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class rE{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class UV{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class HV{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $V{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zV{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class iE{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const qe="primary";class GV{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function Ka(t){return new GV(t)}const oE="ngNavigationCancelingError";function em(t){const e=Error("NavigationCancelingError: "+t);return e[oE]=!0,e}function qV(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const s=r[o],a=t[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Si(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!sE(t[i],e[i]))return!1;return!0}function sE(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}return t===e}function aE(t){return Array.prototype.concat.apply([],t)}function cE(t){return t.length>0?t[t.length-1]:null}function vn(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function Ti(t){return ed(t)?t:Yc(t)?vt(Promise.resolve(t)):Be(t)}const KV={exact:function dE(t,e,n){if(!Es(t.segments,e.segments)||!Zd(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!dE(t.children[r],e.children[r],n))return!1;return!0},subset:fE},uE={exact:function(t,e){return Si(t,e)},subset:function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>sE(t[n],e[n]))},ignored:()=>!0};function lE(t,e,n){return KV[n.paths](t.root,e.root,n.matrixParams)&&uE[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function fE(t,e,n){return hE(t,e,e.segments,n)}function hE(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!(!Es(i,n)||e.hasChildren()||!Zd(i,n,r))}if(t.segments.length===n.length){if(!Es(t.segments,n)||!Zd(t.segments,n,r))return!1;for(const i in e.children)if(!t.children[i]||!fE(t.children[i],e.children[i],r))return!1;return!0}{const i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!!(Es(t.segments,i)&&Zd(t.segments,i,r)&&t.children[qe])&&hE(t.children[qe],e,o,r)}}function Zd(t,e,n){return e.every((r,i)=>uE[n](t[i].parameters,r.parameters))}class ws{constructor(e,n,r){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ka(this.queryParams)),this._queryParamMap}toString(){return tL.serialize(this)}}class Ze{constructor(e,n){this.segments=e,this.children=n,this.parent=null,vn(n,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ef(this)}}class Iu{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=Ka(this.parameters)),this._parameterMap}toString(){return yE(this)}}function Es(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}class tm{}class pE{parse(e){const n=new lL(e);return new ws(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){return`${`/${Pu(e.root,!0)}`}${function(t){const e=Object.keys(t).map(n=>{const r=t[n];return Array.isArray(r)?r.map(i=>`${tf(n)}=${tf(i)}`).join("&"):`${tf(n)}=${tf(r)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}(e.queryParams)}${"string"==typeof e.fragment?`#${function(t){return encodeURI(t)}(e.fragment)}`:""}`}}const tL=new pE;function ef(t){return t.segments.map(e=>yE(e)).join("/")}function Pu(t,e){if(!t.hasChildren())return ef(t);if(e){const n=t.children[qe]?Pu(t.children[qe],!1):"",r=[];return vn(t.children,(i,o)=>{o!==qe&&r.push(`${o}:${Pu(i,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function(t,e){let n=[];return vn(t.children,(r,i)=>{i===qe&&(n=n.concat(e(r,i)))}),vn(t.children,(r,i)=>{i!==qe&&(n=n.concat(e(r,i)))}),n}(t,(r,i)=>i===qe?[Pu(t.children[qe],!1)]:[`${i}:${Pu(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[qe]?`${ef(t)}/${n[0]}`:`${ef(t)}/(${n.join("//")})`}}function gE(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function tf(t){return gE(t).replace(/%3B/gi,";")}function nm(t){return gE(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function nf(t){return decodeURIComponent(t)}function mE(t){return nf(t.replace(/\+/g,"%20"))}function yE(t){return`${nm(t.path)}${function(t){return Object.keys(t).map(e=>`;${nm(e)}=${nm(t[e])}`).join("")}(t.parameters)}`}const oL=/^[^\/()?;=#]+/;function rf(t){const e=t.match(oL);return e?e[0]:""}const sL=/^[^=?&#]+/,cL=/^[^?&#]+/;class lL{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ze([],{}):new Ze([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[qe]=new Ze(e,n)),r}parseSegment(){const e=rf(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Iu(nf(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=rf(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=rf(this.remaining);i&&(r=i,this.capture(r))}e[nf(n)]=nf(r)}parseQueryParam(e){const n=function(t){const e=t.match(sL);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const s=function(t){const e=t.match(cL);return e?e[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const i=mE(n),o=mE(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=rf(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let o;r.indexOf(":")>-1?(o=r.substr(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=qe);const s=this.parseChildren();n[o]=1===Object.keys(s).length?s[qe]:new Ze([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class vE{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=rm(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=rm(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=im(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return im(e,this._root).map(n=>n.value)}}function rm(t,e){if(t===e.value)return e;for(const n of e.children){const r=rm(t,n);if(r)return r}return null}function im(t,e){if(t===e.value)return[e];for(const n of e.children){const r=im(t,n);if(r.length)return r.unshift(e),r}return[]}class oo{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function xu(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class _E extends vE{constructor(e,n){super(e),this.snapshot=n,om(this,e)}toString(){return this.snapshot.toString()}}function bE(t,e){const n=function(t,e){const s=new of([],{},{},"",{},qe,e,null,t.root,-1,{});return new wE("",new oo(s,[]))}(t,e),r=new ri([new Iu("",{})]),i=new ri({}),o=new ri({}),s=new ri({}),a=new ri(""),l=new so(r,i,s,a,o,qe,e,n.root);return l.snapshot=n.root,new _E(new oo(l,[]),n)}class so{constructor(e,n,r,i,o,s,a,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(pe(e=>Ka(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(pe(e=>Ka(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function CE(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const i=n[r],o=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function(t){return t.reduce((e,n)=>({params:Object.assign(Object.assign({},e.params),n.params),data:Object.assign(Object.assign({},e.data),n.data),resolve:Object.assign(Object.assign({},e.resolve),n._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class of{constructor(e,n,r,i,o,s,a,l,h,m,E){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._urlSegment=h,this._lastPathIndex=m,this._resolve=E}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ka(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ka(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class wE extends vE{constructor(e,n){super(n),this.url=e,om(this,n)}toString(){return EE(this._root)}}function om(t,e){e.value._routerState=t,e.children.forEach(n=>om(t,n))}function EE(t){const e=t.children.length>0?` { ${t.children.map(EE).join(", ")} } `:"";return`${t.value}${e}`}function sm(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Si(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Si(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Si(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Si(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function am(t,e){return Si(t.params,e.params)&&function(t,e){return Es(t,e)&&t.every((n,r)=>Si(n.parameters,e[r].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||am(t.parent,e.parent))}function sf(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(r=>{for(const i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return sf(t,r,i);return sf(t,r)})}(t,e,n);return new oo(r,i)}{if(t.shouldAttach(e.value)){const o=t.retrieve(e.value);if(null!==o){const s=o.route;return DE(e,s),s}}const r=function(t){return new so(new ri(t.url),new ri(t.params),new ri(t.queryParams),new ri(t.fragment),new ri(t.data),t.outlet,t.component,t)}(e.value),i=e.children.map(o=>sf(t,o));return new oo(r,i)}}function DE(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)DE(t.children[n],e.children[n])}function af(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Ru(t){return"object"==typeof t&&null!=t&&t.outlets}function cm(t,e,n,r,i){let o={};return r&&vn(r,(s,a)=>{o[a]=Array.isArray(s)?s.map(l=>`${l}`):`${s}`}),new ws(n.root===t?e:SE(n.root,t,e),o,i)}function SE(t,e,n){const r={};return vn(t.children,(i,o)=>{r[o]=i===e?n:SE(i,e,n)}),new Ze(t.segments,r)}class TE{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&af(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(Ru);if(i&&i!==cE(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class um{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function ME(t,e,n){if(t||(t=new Ze([],{})),0===t.segments.length&&t.hasChildren())return cf(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const s=t.segments[i],a=n[r];if(Ru(a))break;const l=`${a}`,h=r<n.length-1?n[r+1]:null;if(i>0&&void 0===l)break;if(l&&h&&"object"==typeof h&&void 0===h.outlets){if(!PE(l,h,s))return o;r+=2}else{if(!PE(l,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const o=new Ze(t.segments.slice(0,r.pathIndex),{});return o.children[qe]=new Ze(t.segments.slice(r.pathIndex),t.children),cf(o,0,i)}return r.match&&0===i.length?new Ze(t.segments,{}):r.match&&!t.hasChildren()?lm(t,e,n):r.match?cf(t,0,i):lm(t,e,n)}function cf(t,e,n){if(0===n.length)return new Ze(t.segments,{});{const r=function(t){return Ru(t[0])?t[0].outlets:{[qe]:t}}(n),i={};return vn(r,(o,s)=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=ME(t.children[s],e,o))}),vn(t.children,(o,s)=>{void 0===r[s]&&(i[s]=o)}),new Ze(t.segments,i)}}function lm(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(Ru(o)){const l=wL(o.outlets);return new Ze(r,l)}if(0===i&&af(n[0])){r.push(new Iu(t.segments[e].path,IE(n[0]))),i++;continue}const s=Ru(o)?o.outlets[qe]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&af(a)?(r.push(new Iu(s,IE(a))),i+=2):(r.push(new Iu(s,{})),i++)}return new Ze(r,{})}function wL(t){const e={};return vn(t,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(e[r]=lm(new Ze([],{}),0,n))}),e}function IE(t){const e={};return vn(t,(n,r)=>e[r]=`${n}`),e}function PE(t,e,n){return t==n.path&&Si(e,n.parameters)}class DL{constructor(e,n,r,i){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),sm(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const i=xu(n);e.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),vn(i,(o,s)=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){const i=e.value,o=n?n.value:null;if(i===o)if(i.component){const s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet);if(r&&r.outlet){const i=r.outlet.detach(),o=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:i,route:e,contexts:o})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=xu(e);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,n,r){const i=xu(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new zV(o.value.snapshot))}),e.children.length&&this.forwardEvent(new HV(e.value.snapshot))}activateRoutes(e,n,r){const i=e.value,o=n?n.value:null;if(sm(i),i===o)if(i.component){const s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){const s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),xE(a.route)}else{const a=function(t){for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(i.snapshot),l=a?a.module.componentFactoryResolver:null;s.attachRef=null,s.route=i,s.resolver=l,s.outlet&&s.outlet.activateWith(i,l),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}}function xE(t){sm(t.value),t.children.forEach(xE)}class dm{constructor(e,n){this.routes=e,this.module=n}}function Oo(t){return"function"==typeof t}function Ds(t){return t instanceof ws}const Au=Symbol("INITIAL_VALUE");function Ou(){return ro(t=>function(...t){let e,n;return me(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&L(t[0])&&(t=t[0]),fo(t,n).lift(new cV(e))}(t.map(e=>e.pipe(Jg(1),Jw(Au)))).pipe(Xw((e,n)=>{let r=!1;return n.reduce((i,o,s)=>i!==Au?i:(o===Au&&(r=!0),r||!1!==o&&s!==n.length-1&&!Ds(o)?i:o),e)},Au),bs(e=>e!==Au),pe(e=>Ds(e)?e:!0===e),Jg(1)))}let RE=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=tr({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(n,r){1&n&&Sr(0,"router-outlet")},directives:function(){return[vm]},encapsulation:2}),t})();function AE(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];RL(r,AL(e,r))}}function RL(t,e){t.children&&AE(t.children,e)}function AL(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function fm(t){const e=t.children&&t.children.map(fm),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==qe&&(n.component=RE),n}function xr(t){return t.outlet||qe}function OE(t,e){const n=t.filter(r=>xr(r)===e);return n.push(...t.filter(r=>xr(r)!==e)),n}const kE={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function uf(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},kE):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const o=(e.matcher||qV)(n,t,e);if(!o)return Object.assign({},kE);const s={};vn(o.posParams,(l,h)=>{s[h]=l.path});const a=o.consumed.length>0?Object.assign(Object.assign({},s),o.consumed[o.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:o.consumed,lastChild:o.consumed.length,parameters:a,positionalParamSegments:null!==(r=o.posParams)&&void 0!==r?r:{}}}function lf(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(r=>df(t,e,r)&&xr(r)!==qe)}(t,n,r)){const s=new Ze(e,function(t,e,n,r){const i={};i[qe]=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&xr(o)!==qe){const s=new Ze([],{});s._sourceSegment=t,s._segmentIndexShift=e.length,i[xr(o)]=s}return i}(t,e,r,new Ze(n,t.children)));return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(r=>df(t,e,r))}(t,n,r)){const s=new Ze(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(df(t,n,a)&&!i[xr(a)]){const l=new Ze([],{});l._sourceSegment=t,l._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[xr(a)]=l}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}const o=new Ze(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function df(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function NE(t,e,n,r){return!!(xr(t)===r||r!==qe&&df(e,n,t))&&("**"===t.path||uf(e,t,n).matched)}function FE(t,e,n){return 0===e.length&&!t.children[n]}class ku{constructor(e){this.segmentGroup=e||null}}class VE{constructor(e){this.urlTree=e}}function ff(t){return new R(e=>e.error(new ku(t)))}function LE(t){return new R(e=>e.error(new VE(t)))}function VL(t){return new R(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class BL{constructor(e,n,r,i,o){this.configLoader=n,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=e.get(Ei)}apply(){const e=lf(this.urlTree.root,[],[],this.config).segmentGroup,n=new Ze(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,n,qe).pipe(pe(o=>this.createUrlTree(hm(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Cs(o=>{if(o instanceof VE)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof ku?this.noMatchError(o):o}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,qe).pipe(pe(i=>this.createUrlTree(hm(i),e.queryParams,e.fragment))).pipe(Cs(i=>{throw i instanceof ku?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,n,r){const i=e.segments.length>0?new Ze([],{[qe]:e}):e;return new ws(i,n,r)}expandSegmentGroup(e,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,n,r).pipe(pe(o=>new Ze([],o))):this.expandSegment(e,r,n,r.segments,i,!0)}expandChildren(e,n,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return vt(i).pipe(Ya(o=>{const s=r.children[o],a=OE(n,o);return this.expandSegmentGroup(e,a,s,o).pipe(pe(l=>({segment:l,outlet:o})))}),Xw((o,s)=>(o[s.outlet]=s.segment,o),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?bs((i,o)=>t(i,o,r)):v,Xg(1),n?eE(e):Zw(()=>new Jd))}())}expandSegment(e,n,r,i,o,s){return vt(r).pipe(Ya(a=>this.expandSegmentAgainstRoute(e,n,r,a,i,o,s).pipe(Cs(h=>{if(h instanceof ku)return Be(null);throw h}))),Qa(a=>!!a),Cs((a,l)=>{if(a instanceof Jd||"EmptyError"===a.name){if(FE(n,i,o))return Be(new Ze([],{}));throw new ku(n)}throw a}))}expandSegmentAgainstRoute(e,n,r,i,o,s,a){return NE(i,n,o,s)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,n,i,o,s):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s):ff(n):ff(n)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,s):this.expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,i){const o=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?LE(o):this.lineralizeSegments(r,o).pipe(Bt(s=>{const a=new Ze(s,{});return this.expandSegment(e,a,n,s,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s){const{matched:a,consumedSegments:l,lastChild:h,positionalParamSegments:m}=uf(n,i,o);if(!a)return ff(n);const E=this.applyRedirectCommands(l,i.redirectTo,m);return i.redirectTo.startsWith("/")?LE(E):this.lineralizeSegments(i,E).pipe(Bt(k=>this.expandSegment(e,n,r,k.concat(o.slice(h)),s,!1)))}matchSegmentAgainstRoute(e,n,r,i,o){if("**"===r.path)return r.loadChildren?(r._loadedConfig?Be(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe(pe(k=>(r._loadedConfig=k,new Ze(i,{})))):Be(new Ze(i,{}));const{matched:s,consumedSegments:a,lastChild:l}=uf(n,r,i);if(!s)return ff(n);const h=i.slice(l);return this.getChildConfig(e,r,i).pipe(Bt(E=>{const k=E.module,N=E.routes,{segmentGroup:H,slicedSegments:Z}=lf(n,a,h,N),K=new Ze(H.segments,H.children);if(0===Z.length&&K.hasChildren())return this.expandChildren(k,N,K).pipe(pe(Me=>new Ze(a,Me)));if(0===N.length&&0===Z.length)return Be(new Ze(a,{}));const ae=xr(r)===o;return this.expandSegment(k,K,N,Z,ae?qe:o,!0).pipe(pe(ve=>new Ze(a.concat(ve.segments),ve.children)))}))}getChildConfig(e,n,r){return n.children?Be(new dm(n.children,e)):n.loadChildren?void 0!==n._loadedConfig?Be(n._loadedConfig):this.runCanLoadGuards(e.injector,n,r).pipe(Bt(i=>i?this.configLoader.load(e.injector,n).pipe(pe(o=>(n._loadedConfig=o,o))):function(t){return new R(e=>e.error(em(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(n))):Be(new dm([],e))}runCanLoadGuards(e,n,r){const i=n.canLoad;return i&&0!==i.length?Be(i.map(s=>{const a=e.get(s);let l;if(function(t){return t&&Oo(t.canLoad)}(a))l=a.canLoad(n,r);else{if(!Oo(a))throw new Error("Invalid CanLoad guard");l=a(n,r)}return Ti(l)})).pipe(Ou(),fr(s=>{if(!Ds(s))return;const a=em(`Redirecting to "${this.urlSerializer.serialize(s)}"`);throw a.url=s,a}),pe(s=>!0===s)):Be(!0)}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Be(r);if(i.numberOfChildren>1||!i.children[qe])return VL(e.redirectTo);i=i.children[qe]}}applyRedirectCommands(e,n,r){return this.applyRedirectCreatreUrlTree(n,this.urlSerializer.parse(n),e,r)}applyRedirectCreatreUrlTree(e,n,r,i){const o=this.createSegmentGroup(e,n.root,r,i);return new ws(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return vn(e,(i,o)=>{if("string"==typeof i&&i.startsWith(":")){const a=i.substring(1);r[o]=n[a]}else r[o]=i}),r}createSegmentGroup(e,n,r,i){const o=this.createSegments(e,n.segments,r,i);let s={};return vn(n.children,(a,l)=>{s[l]=this.createSegmentGroup(e,a,r,i)}),new Ze(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){const i=r[n.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${n.path}'.`);return i}findOrReturn(e,n){let r=0;for(const i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}}function hm(t){const e={};for(const r of Object.keys(t.children)){const o=hm(t.children[r]);(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function(t){if(1===t.numberOfChildren&&t.children[qe]){const e=t.children[qe];return new Ze(t.segments.concat(e.segments),e.children)}return t}(new Ze(t.segments,e))}class jE{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class hf{constructor(e,n){this.component=e,this.route=n}}function $L(t,e,n){const r=t._root;return Nu(r,e?e._root:null,n,[r.value])}function pf(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function Nu(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=xu(e);return t.children.forEach(s=>{(function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const l=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Es(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Es(t.url,e.url)||!Si(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!am(t,e)||!Si(t.queryParams,e.queryParams);case"paramsChange":default:return!am(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new jE(r)):(o.data=s.data,o._resolvedData=s._resolvedData),Nu(t,e,o.component?a?a.children:null:n,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new hf(a.outlet.component,s))}else s&&Fu(e,a,i),i.canActivateChecks.push(new jE(r)),Nu(t,null,o.component?a?a.children:null:n,r,i)})(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),vn(o,(s,a)=>Fu(s,n.getContext(a),i)),i}function Fu(t,e,n){const r=xu(t),i=t.value;vn(r,(o,s)=>{Fu(o,i.component?e?e.children.getContext(s):null:e,n)}),n.canDeactivateChecks.push(new hf(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class nj{}function BE(t){return new R(e=>e.error(t))}class ij{constructor(e,n,r,i,o,s){this.rootComponentType=e,this.config=n,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=s}recognize(){const e=lf(this.urlTree.root,[],[],this.config.filter(s=>void 0===s.redirectTo),this.relativeLinkResolution).segmentGroup,n=this.processSegmentGroup(this.config,e,qe);if(null===n)return null;const r=new of([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},qe,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new oo(r,n),o=new wE(this.url,i);return this.inheritParamsAndData(o._root),o}inheritParamsAndData(e){const n=e.value,r=CE(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,n,r){return 0===n.segments.length&&n.hasChildren()?this.processChildren(e,n):this.processSegment(e,n,n.segments,r)}processChildren(e,n){const r=[];for(const o of Object.keys(n.children)){const s=n.children[o],a=OE(e,o),l=this.processSegmentGroup(a,s,o);if(null===l)return null;r.push(...l)}const i=UE(r);return function(t){t.sort((e,n)=>e.value.outlet===qe?-1:n.value.outlet===qe?1:e.value.outlet.localeCompare(n.value.outlet))}(i),i}processSegment(e,n,r,i){for(const o of e){const s=this.processSegmentAgainstRoute(o,n,r,i);if(null!==s)return s}return FE(n,r,i)?[]:null}processSegmentAgainstRoute(e,n,r,i){if(e.redirectTo||!NE(e,n,r,i))return null;let o,s=[],a=[];if("**"===e.path){const N=r.length>0?cE(r).parameters:{};o=new of(r,N,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,zE(e),xr(e),e.component,e,HE(n),$E(n)+r.length,GE(e))}else{const N=uf(n,e,r);if(!N.matched)return null;s=N.consumedSegments,a=r.slice(N.lastChild),o=new of(s,N.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,zE(e),xr(e),e.component,e,HE(n),$E(n)+s.length,GE(e))}const l=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(e),{segmentGroup:h,slicedSegments:m}=lf(n,s,a,l.filter(N=>void 0===N.redirectTo),this.relativeLinkResolution);if(0===m.length&&h.hasChildren()){const N=this.processChildren(l,h);return null===N?null:[new oo(o,N)]}if(0===l.length&&0===m.length)return[new oo(o,[])];const E=xr(e)===i,k=this.processSegment(l,h,m,E?qe:i);return null===k?null:[new oo(o,k)]}}function aj(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function UE(t){const e=[],n=new Set;for(const r of t){if(!aj(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):e.push(r)}for(const r of n){const i=UE(r.children);e.push(new oo(r.value,i))}return e.filter(r=>!n.has(r))}function HE(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function $E(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function zE(t){return t.data||{}}function GE(t){return t.resolve||{}}function pm(t){return ro(e=>{const n=t(e);return n?vt(n).pipe(pe(()=>e)):Be(e)})}class gj extends class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}{}const gm=new Ge("ROUTES");class WE{constructor(e,n,r,i){this.loader=e,this.compiler=n,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,n){if(n._loader$)return n._loader$;this.onLoadStartListener&&this.onLoadStartListener(n);const i=this.loadModuleFactory(n.loadChildren).pipe(pe(o=>{this.onLoadEndListener&&this.onLoadEndListener(n);const s=o.create(e);return new dm(aE(s.injector.get(gm,void 0,Se.Self|Se.Optional)).map(fm),s)}),Cs(o=>{throw n._loader$=void 0,o}));return n._loader$=new xs(i,()=>new z).pipe(Ho()),n._loader$}loadModuleFactory(e){return"string"==typeof e?vt(this.loader.load(e)):Ti(e()).pipe(Bt(n=>n instanceof SC?Be(n):vt(this.compiler.compileModuleAsync(n))))}}class mj{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Ja,this.attachRef=null}}class Ja{constructor(){this.contexts=new Map}onChildOutletCreated(e,n){const r=this.getOrCreateContext(e);r.outlet=n,this.contexts.set(e,r)}onChildOutletDestroyed(e){const n=this.getContext(e);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let n=this.getContext(e);return n||(n=new mj,this.contexts.set(e,n)),n}getContext(e){return this.contexts.get(e)||null}}class vj{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,n){return e}}function _j(t){throw t}function bj(t,e,n){return e.parse("/")}function qE(t,e){return Be(null)}const Cj={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},wj={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let on=(()=>{class t{constructor(n,r,i,o,s,a,l,h){this.rootComponentType=n,this.urlSerializer=r,this.rootContexts=i,this.location=o,this.config=h,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new z,this.errorHandler=_j,this.malformedUriErrorHandler=bj,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:qE,afterPreactivation:qE},this.urlHandlingStrategy=new vj,this.routeReuseStrategy=new gj,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=s.get(Ei),this.console=s.get(Cd);const k=s.get(Yt);this.isNgZoneEnabled=k instanceof Yt&&Yt.isInAngularZone(),this.resetConfig(h),this.currentUrlTree=new ws(new Ze([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new WE(a,l,N=>this.triggerEvent(new nE(N)),N=>this.triggerEvent(new rE(N))),this.routerState=bE(this.currentUrlTree,this.rootComponentType),this.transitions=new ri({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var n;return null===(n=this.location.getState())||void 0===n?void 0:n.\u0275routerPageId}setupNavigations(n){const r=this.events;return n.pipe(bs(i=>0!==i.id),pe(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),ro(i=>{let o=!1,s=!1;return Be(i).pipe(fr(a=>{this.currentNavigation={id:a.id,initialUrl:a.currentRawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),ro(a=>{const l=this.browserUrlTree.toString(),h=!this.navigated||a.extractedUrl.toString()!==l||l!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||h)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return gf(a.source)&&(this.browserUrlTree=a.extractedUrl),Be(a).pipe(ro(E=>{const k=this.transitions.getValue();return r.next(new Zg(E.id,this.serializeUrl(E.extractedUrl),E.source,E.restoredState)),k!==this.transitions.getValue()?qa:Promise.resolve(E)}),function(t,e,n,r){return ro(i=>function(t,e,n,r,i){return new BL(t,e,n,r,i).apply()}(t,e,n,i.extractedUrl,r).pipe(pe(o=>Object.assign(Object.assign({},i),{urlAfterRedirects:o}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),fr(E=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:E.urlAfterRedirects})}),function(t,e,n,r,i){return Bt(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){try{const s=new ij(t,e,n,r,i,o).recognize();return null===s?BE(new nj):Be(s)}catch(s){return BE(s)}}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(pe(s=>Object.assign(Object.assign({},o),{targetSnapshot:s}))))}(this.rootComponentType,this.config,E=>this.serializeUrl(E),this.paramsInheritanceStrategy,this.relativeLinkResolution),fr(E=>{"eager"===this.urlUpdateStrategy&&(E.extras.skipLocationChange||this.setBrowserUrl(E.urlAfterRedirects,E),this.browserUrlTree=E.urlAfterRedirects);const k=new FV(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(E.urlAfterRedirects),E.targetSnapshot);r.next(k)}));if(h&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:k,extractedUrl:N,source:H,restoredState:Z,extras:K}=a,ae=new Zg(k,this.serializeUrl(N),H,Z);r.next(ae);const re=bE(N,this.rootComponentType).snapshot;return Be(Object.assign(Object.assign({},a),{targetSnapshot:re,urlAfterRedirects:N,extras:Object.assign(Object.assign({},K),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=a.rawUrl,this.browserUrlTree=a.urlAfterRedirects,a.resolve(null),qa}),pm(a=>{const{targetSnapshot:l,id:h,extractedUrl:m,rawUrl:E,extras:{skipLocationChange:k,replaceUrl:N}}=a;return this.hooks.beforePreactivation(l,{navigationId:h,appliedUrlTree:m,rawUrlTree:E,skipLocationChange:!!k,replaceUrl:!!N})}),fr(a=>{const l=new VV(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(l)}),pe(a=>Object.assign(Object.assign({},a),{guards:$L(a.targetSnapshot,a.currentSnapshot,this.rootContexts)})),function(t,e){return Bt(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Be(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return vt(t).pipe(Bt(i=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?Be(o.map(a=>{const l=pf(a,e,i);let h;if(function(t){return t&&Oo(t.canDeactivate)}(l))h=Ti(l.canDeactivate(t,e,n,r));else{if(!Oo(l))throw new Error("Invalid CanDeactivate guard");h=Ti(l(t,e,n,r))}return h.pipe(Qa())})).pipe(Ou()):Be(!0)}(i.component,i.route,n,e,r)),Qa(i=>!0!==i,!0))}(s,r,i,t).pipe(Bt(a=>a&&function(t){return"boolean"==typeof t}(a)?function(t,e,n,r){return vt(e).pipe(Ya(i=>Kg(function(t,e){return null!==t&&e&&e(new UV(t)),Be(!0)}(i.route.parent,r),function(t,e){return null!==t&&e&&e(new $V(t)),Be(!0)}(i.route,r),function(t,e,n){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(s)).filter(s=>null!==s).map(s=>Qw(()=>Be(s.guards.map(l=>{const h=pf(l,s.node,n);let m;if(function(t){return t&&Oo(t.canActivateChild)}(h))m=Ti(h.canActivateChild(r,t));else{if(!Oo(h))throw new Error("Invalid CanActivateChild guard");m=Ti(h(r,t))}return m.pipe(Qa())})).pipe(Ou())));return Be(o).pipe(Ou())}(t,i.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;return r&&0!==r.length?Be(r.map(o=>Qw(()=>{const s=pf(o,e,n);let a;if(function(t){return t&&Oo(t.canActivate)}(s))a=Ti(s.canActivate(e,t));else{if(!Oo(s))throw new Error("Invalid CanActivate guard");a=Ti(s(e,t))}return a.pipe(Qa())}))).pipe(Ou()):Be(!0)}(t,i.route,n))),Qa(i=>!0!==i,!0))}(r,o,t,e):Be(a)),pe(a=>Object.assign(Object.assign({},n),{guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),fr(a=>{if(Ds(a.guardsResult)){const h=em(`Redirecting to "${this.serializeUrl(a.guardsResult)}"`);throw h.url=a.guardsResult,h}const l=new LV(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(l)}),bs(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,""),!1)),pm(a=>{if(a.guards.canActivateChecks.length)return Be(a).pipe(fr(l=>{const h=new jV(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(h)}),ro(l=>{let h=!1;return Be(l).pipe(function(t,e){return Bt(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return Be(n);let o=0;return vt(i).pipe(Ya(s=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Be({});const o={};return vt(i).pipe(Bt(s=>function(t,e,n,r){const i=pf(t,e,r);return Ti(i.resolve?i.resolve(e,n):i(e,n))}(t[s],e,n,r).pipe(fr(a=>{o[s]=a}))),Xg(1),Bt(()=>Object.keys(o).length===i.length?Be(o):qa))}(t._resolve,t,e,r).pipe(pe(o=>(t._resolvedData=o,t.data=Object.assign(Object.assign({},t.data),CE(t,n).resolve),null)))}(s.route,r,t,e)),fr(()=>o++),Xg(1),Bt(s=>o===i.length?Be(n):qa))})}(this.paramsInheritanceStrategy,this.ngModule.injector),fr({next:()=>h=!0,complete:()=>{h||(this.restoreHistory(l),this.cancelNavigationTransition(l,"At least one route resolver didn't emit any value."))}}))}),fr(l=>{const h=new BV(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(h)}))}),pm(a=>{const{targetSnapshot:l,id:h,extractedUrl:m,rawUrl:E,extras:{skipLocationChange:k,replaceUrl:N}}=a;return this.hooks.afterPreactivation(l,{navigationId:h,appliedUrlTree:m,rawUrlTree:E,skipLocationChange:!!k,replaceUrl:!!N})}),pe(a=>{const l=function(t,e,n){const r=sf(t,e._root,n?n._root:void 0);return new _E(r,e)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return Object.assign(Object.assign({},a),{targetRouterState:l})}),fr(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((t,e,n)=>pe(r=>(new DL(e,r.targetRouterState,r.currentRouterState,n).activate(t),r)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),fr({next(){o=!0},complete(){o=!0}}),function(t){return e=>e.lift(new OV(t))}(()=>{if(!o&&!s){const a=`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(i),this.cancelNavigationTransition(i,a)):this.cancelNavigationTransition(i,a)}this.currentNavigation=null}),Cs(a=>{if(s=!0,function(t){return t&&t[oE]}(a)){const l=Ds(a.url);l||(this.navigated=!0,this.restoreHistory(i,!0));const h=new tE(i.id,this.serializeUrl(i.extractedUrl),a.message);r.next(h),l?setTimeout(()=>{const m=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),E={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||gf(i.source)};this.scheduleNavigation(m,"imperative",null,E,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const l=new NV(i.id,this.serializeUrl(i.extractedUrl),a);r.next(l);try{i.resolve(this.errorHandler(a))}catch(h){i.reject(h)}}return qa}))}))}resetRootComponentType(n){this.rootComponentType=n,this.routerState.root.component=this.rootComponentType}getTransition(){const n=this.transitions.value;return n.urlAfterRedirects=this.browserUrlTree,n}setTransition(n){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),n))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r=this.extractLocationChangeInfoFromEvent(n);this.shouldScheduleNavigation(this.lastLocationChangeInfo,r)&&setTimeout(()=>{const{source:i,state:o,urlTree:s}=r,a={replaceUrl:!0};if(o){const l=Object.assign({},o);delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(a.state=l)}this.scheduleNavigation(s,i,o,a)},0),this.lastLocationChangeInfo=r}))}extractLocationChangeInfoFromEvent(n){var r;return{source:"popstate"===n.type?"popstate":"hashchange",urlTree:this.parseUrl(n.url),state:(null===(r=n.state)||void 0===r?void 0:r.navigationId)?n.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(n,r){if(!n)return!0;const i=r.urlTree.toString()===n.urlTree.toString();return r.transitionId!==n.transitionId||!i||!("hashchange"===r.source&&"popstate"===n.source||"popstate"===r.source&&"hashchange"===n.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(n){this.events.next(n)}resetConfig(n){AE(n),this.config=n.map(fm),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(n,r={}){const{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=r,h=i||this.routerState.root,m=l?this.currentUrlTree.fragment:s;let E=null;switch(a){case"merge":E=Object.assign(Object.assign({},this.currentUrlTree.queryParams),o);break;case"preserve":E=this.currentUrlTree.queryParams;break;default:E=o||null}return null!==E&&(E=this.removeEmptyProps(E)),function(t,e,n,r,i){if(0===n.length)return cm(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new TE(!0,0,t);let e=0,n=!1;const r=t.reduce((i,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return vn(o.outlets,(l,h)=>{a[h]="string"==typeof l?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===s?(o.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?n=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,o]},[]);return new TE(n,e,r)}(n);if(o.toRoot())return cm(e.root,new Ze([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new um(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const o=n.snapshot._urlSegment;return new um(o,o===e.root,0)}const r=af(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new um(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?cf(s.segmentGroup,s.index,o.commands):ME(s.segmentGroup,s.index,o.commands);return cm(s.segmentGroup,a,e,r,i)}(h,this.currentUrlTree,n,E,null!=m?m:null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=Ds(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,"imperative",null,r)}navigate(n,r={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,n)}return r}isActive(n,r){let i;if(i=!0===r?Object.assign({},Cj):!1===r?Object.assign({},wj):r,Ds(n))return lE(this.currentUrlTree,n,i);const o=this.parseUrl(n);return lE(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.keys(n).reduce((r,i)=>{const o=n[i];return null!=o&&(r[i]=o),r},{})}processNavigations(){this.navigations.subscribe(n=>{this.navigated=!0,this.lastSuccessfulId=n.id,this.currentPageId=n.targetPageId,this.events.next(new Mu(n.id,this.serializeUrl(n.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,n.resolve(!0)},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)})}scheduleNavigation(n,r,i,o,s){var a,l;if(this.disposed)return Promise.resolve(!1);const h=this.getTransition(),m=gf(r)&&h&&!gf(h.source),N=(this.lastSuccessfulId===h.id||this.currentNavigation?h.rawUrl:h.urlAfterRedirects).toString()===n.toString();if(m&&N)return Promise.resolve(!0);let H,Z,K;s?(H=s.resolve,Z=s.reject,K=s.promise):K=new Promise((ve,Me)=>{H=ve,Z=Me});const ae=++this.navigationId;let re;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),re=i&&i.\u0275routerPageId?i.\u0275routerPageId:o.replaceUrl||o.skipLocationChange?null!==(a=this.browserPageId)&&void 0!==a?a:0:(null!==(l=this.browserPageId)&&void 0!==l?l:0)+1):re=0,this.setTransition({id:ae,targetPageId:re,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:n,extras:o,resolve:H,reject:Z,promise:K,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),K.catch(ve=>Promise.reject(ve))}setBrowserUrl(n,r){const i=this.urlSerializer.serialize(n),o=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",o):this.location.go(i,"",o)}restoreHistory(n,r=!1){var i,o;if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-n.targetPageId;"popstate"!==n.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===s?this.currentUrlTree===(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)&&0===s&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(s)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(n,r){const i=new tE(n.id,this.serializeUrl(n.extractedUrl),r);this.triggerEvent(i),n.resolve(!1)}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}}return t.\u0275fac=function(n){return new(n||t)(he(Rl),he(tm),he(Ja),he(kd),he(ft),he(Ed),he(ys),he(void 0))},t.\u0275prov=Te({token:t,factory:t.\u0275fac}),t})();function gf(t){return"imperative"!==t}let vm=(()=>{class t{constructor(n,r,i,o,s){this.parentContexts=n,this.location=r,this.resolver=i,this.changeDetector=s,this.activated=null,this._activatedRoute=null,this.activateEvents=new nn,this.deactivateEvents=new nn,this.name=o||qe,n.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const n=this.parentContexts.getContext(this.name);n&&n.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=n;const s=(r=r||this.resolver).resolveComponentFactory(n._futureSnapshot.routeConfig.component),a=this.parentContexts.getOrCreateContext(this.name).children,l=new Tj(n,a,this.location.injector);this.activated=this.location.createComponent(s,this.location.length,l),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(n){return new(n||t)(ce(Ja),ce(Qr),ce(ps),function(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const r=n.length;let i=0;for(;i<r;){const o=n[i];if(de(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(o===e)return n[i+1];i+=2}}}return null}(zt(),t)}("name"),ce(Ip))},t.\u0275dir=Pe({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class Tj{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===so?this.route:e===Ja?this.childContexts:this.parent.get(e,n)}}class YE{}class QE{preload(e,n){return Be(null)}}let KE=(()=>{class t{constructor(n,r,i,o,s){this.router=n,this.injector=o,this.preloadingStrategy=s,this.loader=new WE(r,i,h=>n.triggerEvent(new nE(h)),h=>n.triggerEvent(new rE(h)))}setUpPreloading(){this.subscription=this.router.events.pipe(bs(n=>n instanceof Mu),Ya(()=>this.preload())).subscribe(()=>{})}preload(){const n=this.injector.get(Ei);return this.processRoutes(n,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const i=[];for(const o of r)if(o.loadChildren&&!o.canLoad&&o._loadedConfig){const s=o._loadedConfig;i.push(this.processRoutes(s.module,s.routes))}else o.loadChildren&&!o.canLoad?i.push(this.preloadConfig(n,o)):o.children&&i.push(this.processRoutes(n,o.children));return vt(i).pipe(Uo(),pe(o=>{}))}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?Be(r._loadedConfig):this.loader.load(n.injector,r)).pipe(Bt(o=>(r._loadedConfig=o,this.processRoutes(o.module,o.routes)))))}}return t.\u0275fac=function(n){return new(n||t)(he(on),he(Ed),he(ys),he(ft),he(YE))},t.\u0275prov=Te({token:t,factory:t.\u0275fac}),t})(),_m=(()=>{class t{constructor(n,r,i={}){this.router=n,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(n=>{n instanceof Zg?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof Mu&&(this.lastId=n.id,this.scheduleScrollEvent(n,this.router.parseUrl(n.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(n=>{n instanceof iE&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.router.triggerEvent(new iE(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(n){return new(n||t)(he(on),he(Ow),he(void 0))},t.\u0275prov=Te({token:t,factory:t.\u0275fac}),t})();const Ss=new Ge("ROUTER_CONFIGURATION"),JE=new Ge("ROUTER_FORROOT_GUARD"),Ij=[kd,{provide:tm,useClass:pE},{provide:on,useFactory:function(t,e,n,r,i,o,s,a={},l,h){const m=new on(null,t,e,n,r,i,o,aE(s));return l&&(m.urlHandlingStrategy=l),h&&(m.routeReuseStrategy=h),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(a,m),a.enableTracing&&m.events.subscribe(E=>{var k,N;null===(k=console.group)||void 0===k||k.call(console,`Router Event: ${E.constructor.name}`),console.log(E.toString()),console.log(E),null===(N=console.groupEnd)||void 0===N||N.call(console)}),m},deps:[tm,Ja,kd,ft,Ed,ys,gm,Ss,[class{},new Qn],[class{},new Qn]]},Ja,{provide:so,useFactory:function(t){return t.routerState.root},deps:[on]},{provide:Ed,useClass:w1},KE,QE,class{preload(e,n){return n().pipe(Cs(()=>Be(null)))}},{provide:Ss,useValue:{enableTracing:!1}}];function Pj(){return new lg("Router",on)}let XE=(()=>{class t{constructor(n,r){}static forRoot(n,r){return{ngModule:t,providers:[Ij,ZE(n),{provide:JE,useFactory:Aj,deps:[[on,new Qn,new Eo]]},{provide:Ss,useValue:r||{}},{provide:Wa,useFactory:Rj,deps:[xo,[new ca(Cu),new Qn],Ss]},{provide:_m,useFactory:xj,deps:[on,Ow,Ss]},{provide:YE,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:QE},{provide:lg,multi:!0,useFactory:Pj},[bm,{provide:gu,multi:!0,useFactory:Fj,deps:[bm]},{provide:eD,useFactory:Vj,deps:[bm]},{provide:M0,multi:!0,useExisting:eD}]]}}static forChild(n){return{ngModule:t,providers:[ZE(n)]}}}return t.\u0275fac=function(n){return new(n||t)(he(JE,8),he(on,8))},t.\u0275mod=bn({type:t}),t.\u0275inj=Ft({}),t})();function xj(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new _m(t,e,n)}function Rj(t,e,n={}){return n.useHash?new Hk(t,e):new yw(t,e)}function Aj(t){return"guarded"}function ZE(t){return[{provide:BS,multi:!0,useValue:t},{provide:gm,multi:!0,useValue:t}]}let bm=(()=>{class t{constructor(n){this.injector=n,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new z}appInitializer(){return this.injector.get(jk,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(a=>r=a),o=this.injector.get(on),s=this.injector.get(Ss);return"disabled"===s.initialNavigation?(o.setUpLocationChangeListener(),r(!0)):"enabled"===s.initialNavigation||"enabledBlocking"===s.initialNavigation?(o.hooks.afterPreactivation=()=>this.initNavigation?Be(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),o.initialNavigation()):r(!0),i})}bootstrapListener(n){const r=this.injector.get(Ss),i=this.injector.get(KE),o=this.injector.get(_m),s=this.injector.get(on),a=this.injector.get($a);n===a.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&s.initialNavigation(),i.setUpPreloading(),o.init(),s.resetRootComponentType(a.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return t.\u0275fac=function(n){return new(n||t)(he(ft))},t.\u0275prov=Te({token:t,factory:t.\u0275fac}),t})();function Fj(t){return t.appInitializer.bind(t)}function Vj(t){return t.bootstrapListener.bind(t)}const eD=new Ge("Router Initializer");var hr=(()=>(function(t){t.HOME="",t.LOBBY="lobby",t.GAME="game",t.LOCAL="local",t.JOIN="join"}(hr||(hr={})),hr))();function tD(t,e,n,r,i,o,s){try{var a=t[o](s),l=a.value}catch(h){return void n(h)}a.done?e(l):Promise.resolve(l).then(r,i)}function ao(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function s(l){tD(o,r,i,s,a,"next",l)}function a(l){tD(o,r,i,s,a,"throw",l)}s(void 0)})}}var jj=Fe(805),nD=Fe.n(jj);class Bj extends V{constructor(e,n){super()}schedule(e,n=0){return this}}class rD extends Bj{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){if(this.closed)return this;this.state=e;const r=this.id,i=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(i,r,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(i,this.id,n),this}requestAsyncId(e,n,r=0){return setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(null!==r&&this.delay===r&&!1===this.pending)return n;clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i,r=!1;try{this.work(e)}catch(o){r=!0,i=!!o&&o||new Error(o)}if(r)return this.unsubscribe(),i}_unsubscribe(){const e=this.id,n=this.scheduler,r=n.actions,i=r.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==i&&r.splice(i,1),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null}}let iD=(()=>{class t{constructor(n,r=t.now){this.SchedulerAction=n,this.now=r}schedule(n,r=0,i){return new this.SchedulerAction(this,n).schedule(i,r)}}return t.now=()=>Date.now(),t})();class co extends iD{constructor(e,n=iD.now){super(e,()=>co.delegate&&co.delegate!==this?co.delegate.now():n()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,n=0,r){return co.delegate&&co.delegate!==this?co.delegate.schedule(e,n,r):super.schedule(e,n,r)}flush(e){const{actions:n}=this;if(this.active)return void n.push(e);let r;this.active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=n.shift());if(this.active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}}const $j=new class extends co{}(class extends rD{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return null!==r&&r>0||null===r&&this.delay>0?super.requestAsyncId(e,n,r):e.flush(this)}});class Rr{constructor(e,n,r){this.kind=e,this.value=n,this.error=r,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,n,r){switch(this.kind){case"N":return e&&e(this.value);case"E":return n&&n(this.error);case"C":return r&&r()}}accept(e,n,r){return e&&"function"==typeof e.next?this.observe(e):this.do(e,n,r)}toObservable(){switch(this.kind){case"N":return Be(this.value);case"E":return function(t,e){return new R(n=>n.error(t))}(this.error);case"C":return Xd()}throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new Rr("N",e):Rr.undefinedValueNotification}static createError(e){return new Rr("E",void 0,e)}static createComplete(){return Rr.completeNotification}}Rr.completeNotification=new Rr("C"),Rr.undefinedValueNotification=new Rr("N",void 0);class mf extends M{constructor(e,n,r=0){super(e),this.scheduler=n,this.delay=r}static dispatch(e){const{notification:n,destination:r}=e;n.observe(r),this.unsubscribe()}scheduleMessage(e){this.destination.add(this.scheduler.schedule(mf.dispatch,this.delay,new qj(e,this.destination)))}_next(e){this.scheduleMessage(Rr.createNext(e))}_error(e){this.scheduleMessage(Rr.createError(e)),this.unsubscribe()}_complete(){this.scheduleMessage(Rr.createComplete()),this.unsubscribe()}}class qj{constructor(e,n){this.notification=e,this.destination=n}}class Yj extends z{constructor(e=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY,r){super(),this.scheduler=r,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const n=this._events;n.push(e),n.length>this._bufferSize&&n.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new Qj(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=r.length;let s;if(this.closed)throw new Q;if(this.isStopped||this.hasError?s=V.EMPTY:(this.observers.push(e),s=new J(this,e)),i&&e.add(e=new mf(e,i)),n)for(let a=0;a<o&&!e.closed;a++)e.next(r[a]);else for(let a=0;a<o&&!e.closed;a++)e.next(r[a].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),s}_getNow(){return(this.scheduler||$j).now()}_trimBufferThenGetEvents(){const e=this._getNow(),n=this._bufferSize,r=this._windowTime,i=this._events,o=i.length;let s=0;for(;s<o&&!(e-i[s].time<r);)s++;return o>n&&(s=Math.max(s,o-n)),s>0&&i.splice(0,s),i}}class Qj{constructor(e,n){this.time=e,this.value=n}}const oD=new co(rD);function Xj(t){const{subscriber:e,counter:n,period:r}=t;e.next(n),this.schedule({subscriber:e,counter:n+1,period:r},r)}var Vu=Fe(330),sD=Fe(686);function yf(t){const e=Vu.getLogger(t);return e.setLevel("INFO"),e}sD.reg(Vu),sD.apply(Vu,{format:(t,e,n)=>`[${n}] ${t} ${e}:`});const Mi=yf("peer-to-peer.service");let Ts=(()=>{class t{constructor(){this.messageSubject=function(t){const e=new z,n=new z;let r=t(),i=n.subscribe(r);return{observable:e.asObservable().pipe(Jw(null),ro(()=>r)),reset:()=>{i.unsubscribe(),r=t(),i=n.subscribe(r),e.next()},subject:n}}(()=>new Yj(100)),this.peer=null,this.isHost=!0,this.isConnected=!1,this.connections={},this.connectionAdded=new z,this.connectionRemoved=new z,this.getConnections=()=>Object.keys(this.connections),this.getId=()=>{var n,r;return null!==(r=null===(n=this.peer)||void 0===n?void 0:n.id)&&void 0!==r?r:"default"},this.getIsHost=()=>this.isHost,this.getIsConnected=()=>this.isConnected,this.getMessageObservable=()=>this.messageSubject.observable}setupAsHost(){var n=this;return ao(function*(){var r;null===(r=n.peer)||void 0===r||r.destroy(),n.peer=new(nD())(n.getPeerConfig()),n.isHost=!0,yield n.connectToPeerServer(),n.isConnected=!0,n.peer.on("connection",i=>{i.on("open",()=>{n.addConnectionIfNotExist(i.peer,i)}),i.on("data",n.messageHandler.bind(n)),n.attachErrorAndCloseConnEvents(i)}),n.peer.on("close",()=>{Mi.warn("NOT ACCEPTING INCOMING CONNECTIONS??")})})()}setupByConnectingToId(n){var r=this;return ao(function*(){return r.destroy(),r.peer=new(nD())(r.getPeerConfig()),r.isHost=!1,yield r.connectToPeerServer(),new Promise((i,o)=>{const s=function(t=0,e=oD){return(!function(t){return!L(t)&&t-parseFloat(t)+1>=0}(t)||t<0)&&(t=0),(!e||"function"!=typeof e.schedule)&&(e=oD),new R(n=>(n.add(e.schedule(Xj,t,{subscriber:n,counter:0,period:t})),n))}(5e3).subscribe(l=>{o(`Could not connect after 5000ms. Is the host ${n} correct?`),s.unsubscribe()});Mi.info(`connecting to ${n}`);const a=r.peer.connect(n);a.on("data",l=>{r.messageHandler(l)}),a.on("open",()=>{Mi.info(`connected to ${n}!`),r.addConnectionIfNotExist(n,a),r.isConnected=!0,i(!0),s.unsubscribe()}),r.attachErrorAndCloseConnEvents(a,l=>{o(l),a.close(),s.unsubscribe()})})})()}getHostId(){return this.isHost?this.getId():this.getConnections()[0]}broadcastAndToSelf(n,r){const i=this.broadcast(n,r);return this.messageSubject.subject.next(i),i}broadcast(n,r){var i;const o=null!==(i=null==r?void 0:r.from)&&void 0!==i?i:this.getId(),s={from:o,type:"BROADCAST",data:n};(null==r?void 0:r.echo)&&(s.echoBroadcast=!0);for(const a in this.connections)a===o&&!(null==r?void 0:r.echo)||this.sendMessage(a,s);return s}sendSingleMessage(n,r){const i={from:this.getId(),type:"SINGLE",data:r};this.sendMessage(n,i)}dispose(){this.destroy()}getPeerConfig(){return{host:"heroku-chess-123.herokuapp.com",port:443,secure:!0}}connectToPeerServer(){return new Promise((n,r)=>{this.peer.on("open",i=>{Mi.info(`I am connected to peer server as (${this.getId()})`),n(!0)}),this.peer.on("error",i=>{r(i)})})}attachErrorAndCloseConnEvents(n,r){n.on("error",i=>{Mi.error(`connection: ${n.peer} error! ${i}`),this.onPeerDisconnected(n),null!=r&&r(i)}),this.attachToConnCloseEvents(n,()=>{Mi.info(`connection: ${n.peer} closed!`),this.onPeerDisconnected(n),null!=r&&r()})}attachToConnCloseEvents(n,r){n.on("close",()=>r()),n.on("iceStateChanged",i=>{"disconnected"===i&&r()})}onPeerDisconnected(n){this.deleteConnectionIfExists(n.peer),this.broadcastAndToSelf({command:"DISCONNECTED",name:n.peer})}destroy(){var n;null===(n=this.peer)||void 0===n||n.destroy(),this.isConnected=!1,this.isHost=!1,this.messageSubject.reset(),this.connections={}}messageHandler(n){Mi.info("incomingMessage",n),this.isHost&&"BROADCAST"===n.type?this.broadcast(n.data,{from:n.from,echo:n.echoBroadcast}):"DISCONNECTED"===n.data.command&&this.deleteConnectionIfExists(n.data.name),this.messageSubject.subject.next(n)}addConnectionIfNotExist(n,r){n in this.connections||(Mi.info(`new connection! ${n}`),this.connections[n]=r,this.connectionAdded.next(n))}deleteConnectionIfExists(n){n in this.connections&&(delete this.connections[n],this.connectionRemoved.next(n))}sendMessage(n,r){if(!(n in this.connections))return n===this.getId()?void this.messageSubject.subject.next(r):void Mi.warn(`cant send message ${this.getId()} ==> ${n}, ${r}`);Mi.debug(`SEND MESSAGE TO ${n}`,r),this.connections[n].send(r)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),cD=(()=>{class t{constructor(n,r){this.peerToPeerService=n,this.router=r}canActivate(n,r){return!!this.peerToPeerService.getIsConnected()||this.router.parseUrl(hr.JOIN+"/"+n.params.id)}}return t.\u0275fac=function(n){return new(n||t)(he(Ts),he(on))},t.\u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class r2{constructor(e){this.active=!0,this.id=e}setActive(e){this.active=e}}class i2{constructor(e){this.x=0,this.y=0,this.letter="A",this.dropzoneRef=null,this.dropIndex=-1,this.lastClicked=!1,this.id=e,this.invalid=!1}}class lD{constructor(){this.dropzones=Array(528).fill(null).map((e,n)=>new r2(n)),this.squares=[]}getDropzone(e){const n=parseInt(e.getAttribute("data-id"));return this.dropzones[n]}getSquareFromId(e){const n=this.squares.find(i=>i.id===e);if(n)return n;const r=new i2(e);return this.squares.push(r),r}getSquareFromEl(e){return this.getSquareFromId(parseInt(e.getAttribute("data-id")))}}class dD{constructor(e){this.tilesUsed=0,this.totalTiles=0,this.boardState=new lD,this.isEliminated=!1,this.id=e}}class fD{constructor(){this.subject=new z,this.q=[]}add(e){this.q.push(e),this.subject.next()}getLength(){return this.q.length}pop(){return this.q.shift()}}class hD{constructor(e){this.v=e}updateByAssignment(e,n){n in e&&(this.v[n]=e[n])}}class o2{updateBoard(e,n){const r=this.getInvSquares(e),i=this.getInvSquares(n),o=[];for(let s of e.squares){if(!(s.id in i)){o.push(s.id);continue}const a=i[s.id],l=new hD(s);l.updateByAssignment(a,"dropIndex"),l.updateByAssignment(a,"lastClicked"),l.updateByAssignment(a,"letter"),l.updateByAssignment(a,"x"),l.updateByAssignment(a,"y"),l.updateByAssignment(a,"invalid")}for(let s of n.squares)s.id in r||e.squares.push(s);e.squares=e.squares.filter(s=>!o.includes(s.id))}getInvSquares(e){const n={};for(let r of e.squares)n[r.id]=r;return n}}class s2{updatePlayer(e,n){const r=new hD(e);r.updateByAssignment(n,"isEliminated"),r.updateByAssignment(n,"tilesUsed"),r.updateByAssignment(n,"name"),(new o2).updateBoard(e.boardState,n.boardState)}}class pD{}class gD{}class uo{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(n=>{const r=n.indexOf(":");if(r>0){const i=n.slice(0,r),o=i.toLowerCase(),s=n.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(n=>{let r=e[n];const i=n.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(n,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof uo?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){const n=new uo;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof uo?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){const n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,n);const i=("a"===e.op?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":const o=e.value;if(o){let s=this.headers.get(n);if(!s)return;s=s.filter(a=>-1===o.indexOf(a)),0===s.length?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}else this.headers.delete(n),this.normalizedNames.delete(n)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}}class a2{encodeKey(e){return mD(e)}encodeValue(e){return mD(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const u2=/%(\d[a-f0-9])/gi,l2={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function mD(t){return encodeURIComponent(t).replace(u2,(e,n)=>{var r;return null!==(r=l2[n])&&void 0!==r?r:e})}function yD(t){return`${t}`}class ko{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new a2,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{const o=i.indexOf("="),[s,a]=-1==o?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],l=n.get(s)||[];l.push(a),n.set(s,l)}),n}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{const r=e.fromObject[n];this.map.set(n,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){const n=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const n=new ko({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const n=("a"===e.op?this.map.get(e.param):void 0)||[];n.push(yD(e.value)),this.map.set(e.param,n);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(yD(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class d2{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}keys(){return this.map.keys()}}function vD(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function _D(t){return"undefined"!=typeof Blob&&t instanceof Blob}function bD(t){return"undefined"!=typeof FormData&&t instanceof FormData}class Lu{constructor(e,n,r,i){let o;if(this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new uo),this.context||(this.context=new d2),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=n;else{const a=n.indexOf("?");this.urlWithParams=n+(-1===a?"?":a<n.length-1?"&":"")+s}}else this.params=new ko,this.urlWithParams=n}serializeBody(){return null===this.body?null:vD(this.body)||_D(this.body)||bD(this.body)||function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof ko?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||bD(this.body)?null:_D(this.body)?this.body.type||null:vD(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ko?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var n;const r=e.method||this.method,i=e.url||this.url,o=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,a=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,l=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let h=e.headers||this.headers,m=e.params||this.params;const E=null!==(n=e.context)&&void 0!==n?n:this.context;return void 0!==e.setHeaders&&(h=Object.keys(e.setHeaders).reduce((k,N)=>k.set(N,e.setHeaders[N]),h)),e.setParams&&(m=Object.keys(e.setParams).reduce((k,N)=>k.set(N,e.setParams[N]),m)),new Lu(r,i,s,{params:m,headers:h,context:E,reportProgress:l,responseType:o,withCredentials:a})}}var Jt=(()=>((Jt=Jt||{})[Jt.Sent=0]="Sent",Jt[Jt.UploadProgress=1]="UploadProgress",Jt[Jt.ResponseHeader=2]="ResponseHeader",Jt[Jt.DownloadProgress=3]="DownloadProgress",Jt[Jt.Response=4]="Response",Jt[Jt.User=5]="User",Jt))();class wm{constructor(e,n=200,r="OK"){this.headers=e.headers||new uo,this.status=void 0!==e.status?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Em extends wm{constructor(e={}){super(e),this.type=Jt.ResponseHeader}clone(e={}){return new Em({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class vf extends wm{constructor(e={}){super(e),this.type=Jt.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new vf({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class CD extends wm{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Dm(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let wD=(()=>{class t{constructor(n){this.handler=n}request(n,r,i={}){let o;if(n instanceof Lu)o=n;else{let l,h;l=i.headers instanceof uo?i.headers:new uo(i.headers),i.params&&(h=i.params instanceof ko?i.params:new ko({fromObject:i.params})),o=new Lu(n,r,void 0!==i.body?i.body:null,{headers:l,context:i.context,params:h,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const s=Be(o).pipe(Ya(l=>this.handler.handle(l)));if(n instanceof Lu||"events"===i.observe)return s;const a=s.pipe(bs(l=>l instanceof vf));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(pe(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(pe(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(pe(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));case"json":default:return a.pipe(pe(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:(new ko).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,i={}){return this.request("PATCH",n,Dm(i,r))}post(n,r,i={}){return this.request("POST",n,Dm(i,r))}put(n,r,i={}){return this.request("PUT",n,Dm(i,r))}}return t.\u0275fac=function(n){return new(n||t)(he(pD))},t.\u0275prov=Te({token:t,factory:t.\u0275fac}),t})();class ED{constructor(e,n){this.next=e,this.interceptor=n}handle(e){return this.interceptor.intercept(e,this.next)}}const DD=new Ge("HTTP_INTERCEPTORS");let p2=(()=>{class t{intercept(n,r){return r.handle(n)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Te({token:t,factory:t.\u0275fac}),t})();const g2=/^\)\]\}',?\n/;let SD=(()=>{class t{constructor(n){this.xhrFactory=n}handle(n){if("JSONP"===n.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new R(r=>{const i=this.xhrFactory.build();if(i.open(n.method,n.urlWithParams),n.withCredentials&&(i.withCredentials=!0),n.headers.forEach((N,H)=>i.setRequestHeader(N,H.join(","))),n.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!n.headers.has("Content-Type")){const N=n.detectContentTypeHeader();null!==N&&i.setRequestHeader("Content-Type",N)}if(n.responseType){const N=n.responseType.toLowerCase();i.responseType="json"!==N?N:"text"}const o=n.serializeBody();let s=null;const a=()=>{if(null!==s)return s;const N=1223===i.status?204:i.status,H=i.statusText||"OK",Z=new uo(i.getAllResponseHeaders()),K=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(i)||n.url;return s=new Em({headers:Z,status:N,statusText:H,url:K}),s},l=()=>{let{headers:N,status:H,statusText:Z,url:K}=a(),ae=null;204!==H&&(ae=void 0===i.response?i.responseText:i.response),0===H&&(H=ae?200:0);let re=H>=200&&H<300;if("json"===n.responseType&&"string"==typeof ae){const ve=ae;ae=ae.replace(g2,"");try{ae=""!==ae?JSON.parse(ae):null}catch(Me){ae=ve,re&&(re=!1,ae={error:Me,text:ae})}}re?(r.next(new vf({body:ae,headers:N,status:H,statusText:Z,url:K||void 0})),r.complete()):r.error(new CD({error:ae,headers:N,status:H,statusText:Z,url:K||void 0}))},h=N=>{const{url:H}=a(),Z=new CD({error:N,status:i.status||0,statusText:i.statusText||"Unknown Error",url:H||void 0});r.error(Z)};let m=!1;const E=N=>{m||(r.next(a()),m=!0);let H={type:Jt.DownloadProgress,loaded:N.loaded};N.lengthComputable&&(H.total=N.total),"text"===n.responseType&&!!i.responseText&&(H.partialText=i.responseText),r.next(H)},k=N=>{let H={type:Jt.UploadProgress,loaded:N.loaded};N.lengthComputable&&(H.total=N.total),r.next(H)};return i.addEventListener("load",l),i.addEventListener("error",h),i.addEventListener("timeout",h),i.addEventListener("abort",h),n.reportProgress&&(i.addEventListener("progress",E),null!==o&&i.upload&&i.upload.addEventListener("progress",k)),i.send(o),r.next({type:Jt.Sent}),()=>{i.removeEventListener("error",h),i.removeEventListener("abort",h),i.removeEventListener("load",l),i.removeEventListener("timeout",h),n.reportProgress&&(i.removeEventListener("progress",E),null!==o&&i.upload&&i.upload.removeEventListener("progress",k)),i.readyState!==i.DONE&&i.abort()}})}}return t.\u0275fac=function(n){return new(n||t)(he(Nw))},t.\u0275prov=Te({token:t,factory:t.\u0275fac}),t})();const Sm=new Ge("XSRF_COOKIE_NAME"),Tm=new Ge("XSRF_HEADER_NAME");class TD{}let y2=(()=>{class t{constructor(n,r,i){this.doc=n,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=Mw(n,this.cookieName),this.lastCookieString=n),this.lastToken}}return t.\u0275fac=function(n){return new(n||t)(he(pn),he(bd),he(Sm))},t.\u0275prov=Te({token:t,factory:t.\u0275fac}),t})(),Mm=(()=>{class t{constructor(n,r){this.tokenService=n,this.headerName=r}intercept(n,r){const i=n.url.toLowerCase();if("GET"===n.method||"HEAD"===n.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(n);const o=this.tokenService.getToken();return null!==o&&!n.headers.has(this.headerName)&&(n=n.clone({headers:n.headers.set(this.headerName,o)})),r.handle(n)}}return t.\u0275fac=function(n){return new(n||t)(he(TD),he(Tm))},t.\u0275prov=Te({token:t,factory:t.\u0275fac}),t})(),v2=(()=>{class t{constructor(n,r){this.backend=n,this.injector=r,this.chain=null}handle(n){if(null===this.chain){const r=this.injector.get(DD,[]);this.chain=r.reduceRight((i,o)=>new ED(i,o),this.backend)}return this.chain.handle(n)}}return t.\u0275fac=function(n){return new(n||t)(he(gD),he(ft))},t.\u0275prov=Te({token:t,factory:t.\u0275fac}),t})(),_2=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:Mm,useClass:p2}]}}static withOptions(n={}){return{ngModule:t,providers:[n.cookieName?{provide:Sm,useValue:n.cookieName}:[],n.headerName?{provide:Tm,useValue:n.headerName}:[]]}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=bn({type:t}),t.\u0275inj=Ft({providers:[Mm,{provide:DD,useExisting:Mm,multi:!0},{provide:TD,useClass:y2},{provide:Sm,useValue:"XSRF-TOKEN"},{provide:Tm,useValue:"X-XSRF-TOKEN"}]}),t})(),b2=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=bn({type:t}),t.\u0275inj=Ft({providers:[wD,{provide:pD,useClass:v2},SD,{provide:gD,useExisting:SD}],imports:[[_2.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})();const C2=yf("dictionary");let w2=(()=>{class t{constructor(n,r){this.httpClient=n,this.baseHref=r,this.dict=new Set,this.init()}init(){var n=this;return ao(function*(){return n.httpClient.get(n.baseHref+"assets/csw2019.txt",{responseType:"text"}).subscribe(r=>{const i=r.split("\r\n");for(let o=2;o<i.length;++o)n.dict.add(i[o])})})()}hasWord(n){return n=n.toUpperCase(),C2.info(`hasWord(${n}) = ${this.dict.has(n)}`),this.dict.has(n)}}return t.\u0275fac=function(n){return new(n||t)(he(wD),he(Cu))},t.\u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),MD=(()=>{class t{constructor(n){this.dictionaryService=n}getInvalidSquares(n){const r=[];for(let m=0;m<22;++m)r.push(Array(22).fill(null));for(const m of n)r[Math.floor(m.dropIndex/22)][m.dropIndex%22]=m;const i=new ID,o=new ID;for(let m=0;m<22;++m){for(let E=0;E<22;++E)i.next(r[m][E]),o.next(r[E][m]);i.clear(),o.clear()}const a=i.squares.concat(o.squares).filter(m=>this.isInvalidWord(m)),l=new Set,h=[];for(let m of a)for(let E of m)E.id in l||(l.add(E.id),h.push(E));return h}isInvalidWord(n){if(1===n.length)return!1;const r=n.map(i=>i.letter);return!this.dictionaryService.hasWord(r.join(""))}}return t.\u0275fac=function(n){return new(n||t)(he(w2))},t.\u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class ID{constructor(){this.squares=[],this.currentArr=[]}next(e){e?this.currentArr.push(e):this.clear()}clear(){this.currentArr.length&&this.squares.push(this.currentArr),this.currentArr=[]}}const E2=(0,Vu.getLogger)("game");let Ms=(()=>{class t{constructor(n,r,i){this.peerToPeerService=n,this.invalidSquareFinderService=r,this.router=i,this.letter$=new fD,this.gameStart$=new z,this.winner$=new z,this.loser$=new z,this.subs=[],this.state=t.getInitialState()}initFromPeerToPeer(){this.subs.length>0||(this.state.players=[],this.subs.forEach(n=>n.unsubscribe()),this.subs=[this.peerToPeerService.connectionRemoved.subscribe(n=>{this.state.players=this.state.players.filter(r=>r.id!==n)}),this.peerToPeerService.getMessageObservable().subscribe(n=>{switch(n.data.command){case"UPDATE_PLAYER":{let r=this.getPlayerById(n.data.playerId);if(!r){if(this.state.players.length>=8){E2.info(`a new player ${n.data.state.name} tried to join, but game was full`);break}r=new dD(n.data.playerId),this.state.players.push(r)}(new s2).updatePlayer(r,n.data.state)}break;case"GAME_START":this.letter$=new fD,this.resetLocalState(),this.gameStart$.next(!0);break;case"RECEIVE_LETTERS":{const r=this.getPlayerById(n.data.playerId);for(let i of n.data.letters)n.data.playerId===this.peerToPeerService.getId()&&this.letter$.add(i);r.totalTiles=n.data.playerTotalTiles}break;case"LOSER":this.getPlayerById(n.data.playerId).isEliminated=!0,n.data.playerId===this.peerToPeerService.getId()&&this.loser$.next();break;case"WINNER":this.winner$.next();break;case"UPDATE_SHARED_STATE":Object.assign(this.state,n.data.state);break;case"RETURN_TO_LOBBY":this.router.navigate([hr.LOBBY+"/"+this.peerToPeerService.getHostId()])}})])}dispose(){this.state=t.getInitialState(),this.subs.forEach(n=>n.unsubscribe),this.subs=[]}resetLocalState(){this.state.players.forEach(n=>{n.boardState=new lD,n.tilesUsed=0,n.isEliminated=!1}),this.state.canClaimSuccess=!1}updatePlayer(n){let r=this.getOrCreateMyPlayer();r.name=n,this.sendUpdateMessage(r)}updateAfterDrop(){let n=this.getOrCreateMyPlayer();n.tilesUsed=n.boardState.squares.reduce((r,i)=>{var o;return r+((null===(o=i.dropzoneRef)||void 0===o?void 0:o.id)<484?1:0)},0),this.state.canClaimSuccess=this.canClaimSuccess(),this.sendUpdateMessage(this.getOrCreateMyPlayer())}canClaimSuccess(){const n=this.getOrCreateMyPlayer();if(n.tilesUsed!==n.totalTiles)return!1;let i=0;const o=n.boardState.squares.filter(s=>-1!==s.dropIndex).map(s=>s.dropIndex);for(let s=0;s<o.length;++s)for(let a=s+1;a<o.length;++a){const l=o[s],h=o[a];let m=l%22,E=h%22;const N=l+1===h&&m+1==E||l-1==h&&m-1==E;(l+22===h||l-22===h||N)&&i++}return i===n.totalTiles-1}echoAllPlayers(){for(let n of this.state.players)this.sendUpdateMessage(n)}sendUpdateMessage(n){const r=JSON.parse(JSON.stringify(n));r.boardState.dropzones=[],this.peerToPeerService.broadcastAndToSelf({command:"UPDATE_PLAYER",state:r,playerId:n.id})}claimSuccess(){let n=this.getPlayerById(this.peerToPeerService.getId());const r=this.invalidSquareFinderService.getInvalidSquares(n.boardState.squares);this.peerToPeerService.sendSingleMessage(this.peerToPeerService.getHostId(),{command:"CLAIM_SUCCESS",boardValid:0===r.length,numLetters:n.totalTiles})}dump(n){let r=this.getPlayerById(this.peerToPeerService.getId());r.boardState.squares=r.boardState.squares.filter(i=>i.id!==n.id),this.peerToPeerService.sendSingleMessage(this.peerToPeerService.getHostId(),{command:"DUMP_LETTER",letter:n.letter})}getOrCreateMyPlayer(){let n=this.getPlayerById(this.peerToPeerService.getId());return n||(n=new dD(this.peerToPeerService.getId())),this.state.myPlayer=n}static getInitialState(){return{canDump:!0,canClaimSuccess:!1,winnerId:null,totalTilesInGame:0,tilesUsedByPlayers:0,tilesRemaining:0,players:[],totalPeerCount:1,inGame:!1,nextPeelWins:!1,gameOver:!1,myPlayer:null}}getPlayerById(n){return this.state.players.find(r=>r.id==n)}}return t.\u0275fac=function(n){return new(n||t)(he(Ts),he(MD),he(on))},t.\u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class S2{constructor(){this.d=new Map,this._size=0}get size(){return this._size}add(e){this.d.has(e)?(this.d.set(e,this.d.get(e)+1),this._size++):(this.d.set(e,1),this._size++)}delete(e){this.d.has(e)&&(this.d.set(e,this.d.get(e)-1),this._size--)}get(e){return this.d.get(e)}[Symbol.iterator](){let e=0,n=[];for(let[r,i]of this.d.entries())for(let o=0;o<i;++o)n.push(r);return{next:()=>({done:e===n.length,value:n[e++]})}}}let PD=(()=>{class t{constructor(){this.numTilesPerPlayerOverride=null,this.initialTilesOverride=null}getInitialTiles(){if(this.initialTilesOverride)return this.initialTilesOverride;let n=new Array;for(let[r,i]of T2.entries())for(let o=0;o<i;++o)n.push(r);return n}getNumTilesPerPlayer(n){if(this.numTilesPerPlayerOverride)return this.numTilesPerPlayerOverride;if(1<=n&&n<=4)return 21;if(5<=n&&n<=6)return 15;if(7<=n&&n<=8)return 11;throw new Error(`unknown for #players ${n}`)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const T2=new Map([["A",13],["B",3],["C",3],["D",6],["E",18],["F",3],["G",4],["H",3],["I",12],["J",2],["K",2],["L",5],["M",3],["N",8],["O",11],["P",3],["Q",2],["R",9],["S",6],["T",9],["U",6],["V",3],["W",3],["X",2],["Y",3],["Z",2]]),M2=(0,Vu.getLogger)("game-host");let _f=(()=>{class t{constructor(n,r,i){this.peerToPeerService=n,this.gameService=r,this.initialTilesProviderService=i,this.state=t.getDefaultState(),this.subs=[],this.subs=[this.peerToPeerService.connectionAdded.subscribe(()=>this.updateSharedState()),this.peerToPeerService.connectionRemoved.subscribe(()=>this.updateSharedState()),this.peerToPeerService.getMessageObservable().subscribe(o=>{switch(o.data.command){case"DUMP_LETTER":{this.state.lettersPerPlayer[o.from].delete(o.data.letter);let a=[o.data.letter];this.canDump&&(a=this.takeLetters(3),this.state.letters.push(o.data.letter)),this.sendPlayerLetters(o.from,a),this.updateSharedState()}break;case"CLAIM_SUCCESS":{const s=this.state.lettersPerPlayer[o.from];if(s.size!==o.data.numLetters){M2.warn(`CLAIM_SUCCESS: host suggests ${s.size}, message has ${o.data.numLetters}`);break}this.nextPeelWins?o.data.boardValid?this.state.winnerId||(this.state.winnerId=o.from,this.updateSharedState(),this.peerToPeerService.broadcastAndToSelf({command:"WINNER"})):(this.state.losers.push(o.from),this.peerToPeerService.broadcastAndToSelf({command:"LOSER",playerId:o.from}),this.addLetters(s)):this.giveEveryPlayerNLetters(1),this.updateSharedState()}}})]}createGame(){var n=this;return ao(function*(){yield n.peerToPeerService.setupAsHost()})()}startGame(){var n=this;return ao(function*(){n.dispose(),n.peerToPeerService.broadcastAndToSelf({command:"GAME_START"});const r=n.gameService.state.players.length;for(let o of n.gameService.state.players)n.state.lettersPerPlayer[o.id]=new S2;n.state.letters=n.initialTilesProviderService.getInitialTiles(),t.shuffleArray(n.state.letters);const i=n.initialTilesProviderService.getNumTilesPerPlayer(r);n.state.totalTilesInGame=n.state.letters.length,n.giveEveryPlayerNLetters(i),n.updateSharedState()})()}dispose(){this.state=t.getDefaultState()}updateSharedState(){this.peerToPeerService.broadcastAndToSelf({command:"UPDATE_SHARED_STATE",state:this.getSharedState()})}returnToLobby(){this.peerToPeerService.broadcastAndToSelf({command:"RETURN_TO_LOBBY"})}giveEveryPlayerNLetters(n){for(const r of this.gameService.state.players){if(r.isEliminated)continue;const i=this.takeLetters(n);this.sendPlayerLetters(r.id,i)}}sendPlayerLetters(n,r){for(const i of r)this.state.lettersPerPlayer[n].add(i);this.peerToPeerService.broadcastAndToSelf({command:"RECEIVE_LETTERS",playerId:n,playerTotalTiles:this.state.lettersPerPlayer[n].size,letters:r})}get nextPeelWins(){return this.state.letters.length<this.gameService.state.players.length-this.state.losers.length}get canDump(){return this.state.letters.length>=3}addLetters(n){this.state.letters=this.state.letters.concat([...n]),t.shuffleArray(this.state.letters)}static shuffleArray(n){for(let r=n.length-1;r>0;r--){const i=Math.floor(Math.random()*(r+1));[n[r],n[i]]=[n[i],n[r]]}}takeLetters(n){if(n>this.state.letters.length)throw new Error(`tried to take ${n} letters, only ${this.state.letters.length} available`);const r=this.state.letters.slice(0,n);return this.state.letters=this.state.letters.slice(n),r}static getDefaultState(){return{letters:t.getDefaultLetters(),lettersPerPlayer:{},totalTilesInGame:0,losers:[],winnerId:null,inGame:!1}}static getDefaultLetters(){let n=new Array;for(let r=0;r<26;++r){let i=String.fromCharCode("A".charCodeAt(0)+r);for(let o=0;o<2;++o)n.push(i)}return t.shuffleArray(n),n}getSharedState(){let n=0;for(let r of Object.keys(this.state.lettersPerPlayer))this.state.losers.includes(r)||(n+=this.state.lettersPerPlayer[r].size);return{winnerId:this.state.winnerId,canDump:this.canDump,nextPeelWins:this.nextPeelWins,tilesUsedByPlayers:n,totalTilesInGame:this.state.totalTilesInGame,tilesRemaining:this.state.letters.length,totalPeerCount:1+this.peerToPeerService.getConnections().length,inGame:this.state.inGame,gameOver:null!=this.state.winnerId||this.state.losers.length===Object.keys(this.state.lettersPerPlayer).length}}}return t.\u0275fac=function(n){return new(n||t)(he(Ts),he(Ms),he(PD))},t.\u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var I2=Fe(748),Im=Fe.n(I2);function P2(t,e){if(1&t&&(ot(0,"div",10),tn(1),st()),2&t){const n=e.$implicit,r=yn();td("transform","translate("+n.x+"px, "+n.y+"px"),To("draggable",!r.readonly)("last-clicked",n.lastClicked)("invalid",n.invalid),dr("data-id",n.id),gt(1),rd(n.letter)}}function x2(t,e){if(1&t&&Sr(0,"div",11),2&t){const n=e.$implicit,r=e.index;To("droppable",yn().boardState.dropzones[n].active),dr("data-id",r)}}function R2(t,e){if(1&t&&Sr(0,"div",11),2&t){const n=e.$implicit;To("droppable",yn().boardState.dropzones[n].active),dr("data-id",n)}}const A2=yf("board");let O2=(()=>{class t{constructor(n){this.gameService=n,this.readonly=!1,this.GRID_SIZE=22,this.topDropzones=Array(484).fill(null).map((r,i)=>i),this.bottomDropzones=Array(44).fill(null).map((r,i)=>484+i),this.readonlyGameServiceState=n.state,this.clickHander=this.clickEventListener.bind(this)}ngOnInit(){}ngOnDestroy(){var n;null===(n=this.letterSubscription)||void 0===n||n.unsubscribe(),document.removeEventListener("click",this.clickHander)}get boardState(){return this.playerModel.boardState}ngAfterViewInit(){this.readonly||(this.unloadQueue(),this.letterSubscription=this.gameService.letter$.subject.subscribe(()=>{this.unloadQueue()}),Im()(".draggable").draggable({listeners:{start:n=>{},end:n=>{},move:n=>{const r=this.boardState.getSquareFromEl(n.target),o=document.getElementById("board").getBoundingClientRect();this.setElementCoords(r,n.clientX-o.left-12.5,n.clientY-o.top-12.5)}}}).on("down",n=>{const i=this.boardState.getSquareFromEl(n.target);this.updateLastSquare(i),i.dropzoneRef.setActive(!0),i.dropIndex=-1}).on("up",n=>{const i=this.boardState.getSquareFromEl(n.target);i.dropzoneRef.setActive(!1),i.dropIndex=i.dropzoneRef.id;const o=document.querySelector(`.dropzone[data-id='${i.dropzoneRef.id}']`);this.setCoordsBasedOnDropZone(i,o),this.gameService.updateAfterDrop()}),Im()(".dropzone.droppable").dropzone({overlap:.25,ondragenter:n=>{this.boardState.getSquareFromEl(n.relatedTarget).dropzoneRef=this.boardState.getDropzone(n.target),n.target.classList.add("drop-target")},ondragleave:function(n){n.target.classList.remove("drop-target")},ondropdeactivate:function(n){n.target.classList.remove("drop-target")},ondrop:n=>{}}),document.addEventListener("click",this.clickHander))}clickEventListener(n){const r=n.target;(null==r?void 0:r.classList.contains("draggable"))||this.updateLastSquare(null)}claimSuccess(){this.gameService.claimSuccess()}dump(){var n;if(!this.lastSquare)return;const r=this.lastSquare;null===(n=r.dropzoneRef)||void 0===n||n.setActive(!0),this.gameService.dump(r),this.updateLastSquare(null),this.gameService.updateAfterDrop()}unloadQueue(){for(;this.gameService.letter$.getLength()>0;)this.addSquare(this.gameService.letter$.pop())}addSquare(n){window.requestAnimationFrame(()=>{const r=this.boardState.squares.length,i=this.boardState.getSquareFromId(t.squareIdCounter++);this.boardState.squares.length===r&&A2.warn(`could not add new square... apparently ${i.id} already exists.`),i.letter=n,(()=>{const s=a=>{const l=document.querySelector(`.dropzone[data-id='${a}']`),h=this.boardState.getDropzone(l);return!!h.active&&(this.setCoordsBasedOnDropZone(i,l),h.active=!1,!0)};for(let a=0;a<44;++a)if(s(484+a))return;for(let a=483;a>=0;--a)if(s(a))return})(),this.gameService.updateAfterDrop()})}setCoordsBasedOnDropZone(n,r){const i=Im().getElementRect(r),s=document.getElementById("board").getBoundingClientRect();this.setElementCoords(n,i.left-s.left-window.scrollX,i.top-s.top-window.scrollY),n.dropzoneRef=this.boardState.getDropzone(r)}setElementCoords(n,r,i){n.x=r,n.y=i}updateLastSquare(n){this.lastSquare&&(this.lastSquare.lastClicked=!1),this.lastSquare=n,this.lastSquare&&(this.lastSquare.lastClicked=!0)}}return t.squareIdCounter=500,t.\u0275fac=function(n){return new(n||t)(ce(Ms))},t.\u0275cmp=tr({type:t,selectors:[["app-board"]],inputs:{playerModel:"playerModel",readonly:"readonly"},decls:15,vars:7,consts:[[2,"margin","auto","width","100%"],["id","board",2,"margin","auto","position","relative"],[1,"dropzoneHelper"],["class","square",3,"draggable","last-clicked","invalid","transform",4,"ngFor","ngForOf"],["id","topArea"],["class","dropzone",3,"droppable",4,"ngFor","ngForOf"],["id","startArea"],[2,"font-size","15px"],[1,"win",3,"disabled","click"],[1,"dump",3,"disabled","click"],[1,"square"],[1,"dropzone"]],template:function(n,r){1&n&&(ot(0,"body",0),ot(1,"div",1),ot(2,"div",2),jn(3,P2,2,10,"div",3),ot(4,"div",4),jn(5,x2,1,3,"div",5),st(),ot(6,"div",6),ot(7,"div"),ot(8,"div",7),tn(9),st(),ot(10,"button",8),Lt("click",function(){return r.claimSuccess()}),tn(11),st(),ot(12,"button",9),Lt("click",function(){return r.dump()}),tn(13,"dump"),st(),st(),jn(14,R2,1,3,"div",5),st(),st(),st(),st()),2&n&&(gt(3),Ot("ngForOf",r.boardState.squares),gt(2),Ot("ngForOf",r.topDropzones),gt(4),Ra("tiles remaining: ",r.readonlyGameServiceState.tilesRemaining,""),gt(1),Ot("disabled",!r.readonlyGameServiceState.canClaimSuccess||r.readonly),gt(1),rd(r.readonlyGameServiceState.nextPeelWins?"win?":"peel"),gt(1),Ot("disabled",!r.readonlyGameServiceState.canDump||!r.lastSquare),gt(2),Ot("ngForOf",r.bottomDropzones))},directives:[Gd],styles:[".square[_ngcontent-%COMP%]{background-color:#efe1ca;left:0;top:0;position:absolute;z-index:500;box-sizing:border-box;width:25px;height:25px;line-height:25px;border:1px solid;border-radius:2px;text-align:center;margin:0;padding:0;display:inline-block;font-size:20px}.square.draggable[_ngcontent-%COMP%]{cursor:pointer!important}.square.last-clicked[_ngcontent-%COMP%]{background:orange;z-index:50000}.square.invalid[_ngcontent-%COMP%]{background:red}#board[_ngcontent-%COMP%]{width:538px;font-size:0}#topArea[_ngcontent-%COMP%], #startArea[_ngcontent-%COMP%]{padding:5px}#topArea[_ngcontent-%COMP%]{background-color:brown}#startArea[_ngcontent-%COMP%]{background-color:gray;margin-top:0}.dropzoneHelper[_ngcontent-%COMP%]{font-size:0}.row[_ngcontent-%COMP%]{height:25px}.row[_ngcontent-%COMP%], .dropzone[_ngcontent-%COMP%]{margin:0;padding:0;display:inline-block}.pad-5[_ngcontent-%COMP%]{padding:5px}.dropzone[_ngcontent-%COMP%]{width:24px;height:24px}.drop-target[_ngcontent-%COMP%]{background-color:#29e;opacity:.6}[_ngcontent-%COMP%]:export{boardSize:22;startAreaRows:2}"]}),t})();function k2(t,e){if(1&t&&(ot(0,"p"),tn(1),st()),2&t){const n=yn().$implicit;gt(1),Kc("",n.tilesUsed," / ",n.totalTiles,"")}}function N2(t,e){1&t&&(ot(0,"p"),tn(1,":("),st())}function F2(t,e){if(1&t){const n=qc();ot(0,"button",5),Lt("click",function(){const o=_o(n).$implicit;return yn().selectPlayer(o)}),tn(1),Sr(2,"br"),jn(3,k2,2,2,"p",2),jn(4,N2,2,0,"p",2),st()}if(2&t){const n=e.$implicit,r=yn();To("active",(null==r.activePlayer?null:r.activePlayer.id)===n.id),gt(1),yp(" ",n.name,"",n.id===r.hostId?"(host)":"","",n.id===r.myId?"(you)":"",""),gt(2),Ot("ngIf",!n.isEliminated),gt(1),Ot("ngIf",n.isEliminated)}}function V2(t,e){if(1&t&&(ot(0,"p"),tn(1),st()),2&t){const n=yn();gt(1),Ra("",n.winner.name," wins!")}}function L2(t,e){if(1&t){const n=qc();ot(0,"button",5),Lt("click",function(){return _o(n),yn().returnToLobby()}),tn(1,"Return to lobby"),st()}}function j2(t,e){if(1&t&&Sr(0,"app-board",7),2&t){const n=yn().$implicit,r=yn();td("opacity",5),Ot("playerModel",n)("readonly",n.id!==r.myId||null!==r.gameServiceState.winnerId||n.isEliminated)}}function B2(t,e){if(1&t&&(ot(0,"div"),jn(1,j2,1,4,"app-board",6),st()),2&t){const n=e.$implicit,r=yn();gt(1),Ot("ngIf",n.id===(null==r.activePlayer?null:r.activePlayer.id))}}let xD=(()=>{class t{constructor(n,r,i,o){this.gameService=n,this.peerToPeerService=r,this.gameHostService=i,this.invalidSquareService=o,this.isHost=!1}ngOnInit(){this.isHost=this.peerToPeerService.getIsHost(),this.activePlayer=this.gameService.getOrCreateMyPlayer(),this.myId=this.gameService.getOrCreateMyPlayer().id,this.hostId=this.peerToPeerService.getHostId(),this.gameServiceState=this.gameService.state,this.subs=[this.gameService.winner$.subscribe(()=>{this.activePlayer=this.gameService.getPlayerById(this.gameServiceState.winnerId),this.winner=this.activePlayer}),this.gameService.loser$.subscribe(()=>{let n=this.gameService.getOrCreateMyPlayer().boardState.squares;this.gameService.getOrCreateMyPlayer().isEliminated=!0,this.invalidSquareService.getInvalidSquares(n).forEach(i=>{i.invalid=!0}),this.gameService.updateAfterDrop()})]}selectPlayer(n){var r;this.activePlayer=n.id===(null===(r=this.activePlayer)||void 0===r?void 0:r.id)?null:n}returnToLobby(){this.gameHostService.returnToLobby()}}return t.\u0275fac=function(n){return new(n||t)(ce(Ms),ce(Ts),ce(_f),ce(MD))},t.\u0275cmp=tr({type:t,selectors:[["app-board-container"]],decls:6,vars:4,consts:[[2,"display","flex"],[3,"active","click",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"click"],[3,"opacity","playerModel","readonly",4,"ngIf"],[3,"playerModel","readonly"]],template:function(n,r){1&n&&(ot(0,"div",0),ot(1,"div"),jn(2,F2,5,7,"button",1),jn(3,V2,2,1,"p",2),jn(4,L2,2,0,"button",3),st(),jn(5,B2,2,1,"div",4),st()),2&n&&(gt(2),Ot("ngForOf",r.gameServiceState.players),gt(1),Ot("ngIf",r.gameServiceState.winnerId),gt(1),Ot("ngIf",r.isHost&&r.gameServiceState.gameOver),gt(1),Ot("ngForOf",r.gameServiceState.players))},directives:[Gd,Wd,O2],styles:[".active[_ngcontent-%COMP%]{background:orange}p[_ngcontent-%COMP%]{margin:0;padding:0}button[_ngcontent-%COMP%]{display:block;width:100%}"]}),t})(),U2=(()=>{class t{constructor(n){this.gameService=n}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)(ce(Ms))},t.\u0275cmp=tr({type:t,selectors:[["app-game"]],decls:1,vars:0,template:function(n,r){1&n&&Sr(0,"app-board-container")},directives:[xD],styles:[""]}),t})();const RD=yf("param-override");let AD=(()=>{class t{constructor(n){this.initialTilesProviderService=n}setupOverrides(n){(null==n?void 0:n.tiles)&&(RD.info("tiles override applied"),this.initialTilesProviderService.initialTilesOverride=null==n?void 0:n.tiles.split("")),(null==n?void 0:n.numTiles)&&(RD.info("numTiles override applied"),this.initialTilesProviderService.numTilesPerPlayerOverride=n.numTiles)}}return t.\u0275fac=function(n){return new(n||t)(he(PD))},t.\u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),H2=(()=>{class t{constructor(n,r,i,o,s,a){this.gameHostService=n,this.gameService=r,this.peerToPeerService=i,this.router=o,this.activatedRoute=s,this.paramOverrideService=a,this.loading=!1}ngOnInit(){this.gameHostService.dispose(),this.gameService.dispose(),this.peerToPeerService.dispose(),this.paramOverrideService.setupOverrides(this.activatedRoute.snapshot.queryParams)}createGame(){var n=this;return ao(function*(){n.loading=!0;try{yield n.gameHostService.createGame(),n.router.navigate([hr.LOBBY+"/"+n.peerToPeerService.getHostId()])}finally{n.loading=!1}})()}}return t.\u0275fac=function(n){return new(n||t)(ce(_f),ce(Ms),ce(Ts),ce(on),ce(so),ce(AD))},t.\u0275cmp=tr({type:t,selectors:[["app-home"]],decls:4,vars:1,consts:[[3,"disabled","click"]],template:function(n,r){1&n&&(ot(0,"h1"),tn(1,"Bananagrams"),st(),ot(2,"button",0),Lt("click",function(){return r.createGame()}),tn(3,"create game"),st()),2&n&&(gt(2),Ot("disabled",r.loading))},styles:[""]}),t})();function $2(t,e){1&t&&(ot(0,"div"),Sr(1,"div",1),st())}function z2(t,e){if(1&t){const n=qc();ot(0,"div"),ot(1,"p"),tn(2),st(),ot(3,"button",2),Lt("click",function(){return _o(n),yn().tryConnect()}),tn(4,"try again"),st(),st()}if(2&t){const n=yn();gt(2),Ra("Error: ",n.error,"")}}let G2=(()=>{class t{constructor(n,r,i){this.peerToPeerService=n,this.activatedRoute=r,this.router=i,this.error=null}ngOnInit(){var n=this;return ao(function*(){yield n.tryConnect()})()}tryConnect(){var n=this;return ao(function*(){n.error=null;try{(!n.peerToPeerService.getIsConnected()||!n.peerToPeerService.getIsHost())&&(yield n.peerToPeerService.setupByConnectingToId(n.activatedRoute.snapshot.params.id)),n.router.navigate([hr.LOBBY+"/"+n.peerToPeerService.getHostId()])}catch(r){n.error=r}})()}}return t.\u0275fac=function(n){return new(n||t)(ce(Ts),ce(so),ce(on))},t.\u0275cmp=tr({type:t,selectors:[["app-join"]],decls:4,vars:2,consts:[[4,"ngIf"],[1,"loader"],[3,"click"]],template:function(n,r){1&n&&(ot(0,"p"),tn(1,"joining..."),st(),jn(2,$2,2,0,"div",0),jn(3,z2,5,1,"div",0)),2&n&&(gt(2),Ot("ngIf",!r.error),gt(1),Ot("ngIf",r.error))},directives:[Wd],styles:[".loader[_ngcontent-%COMP%]{border:5px solid #f3f3f3;border-top:5px solid #555;border-radius:50%;width:50px;height:50px;animation:spin 1s linear infinite}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]}),t})();function bf(t,e){return new R(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const l=vt(t[a]);let h=!1;n.add(l.subscribe({next:m=>{h||(h=!0,s++),i[a]=m},error:m=>n.error(m),complete:()=>{o++,(o===r||!h)&&(s===r&&n.next(e?e.reduce((m,E,k)=>(m[E]=i[k],m),{}):i),n.complete())}}))}})}let OD=(()=>{class t{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}}return t.\u0275fac=function(n){return new(n||t)(ce(Xi),ce(dn))},t.\u0275dir=Pe({type:t}),t})(),Is=(()=>{class t extends OD{}return t.\u0275fac=function(){let e;return function(r){return(e||(e=Cr(t)))(r||t)}}(),t.\u0275dir=Pe({type:t,features:[Tt]}),t})();const Ii=new Ge("NgValueAccessor"),Y2={provide:Ii,useExisting:yt(()=>Cf),multi:!0},K2=new Ge("CompositionEventMode");let Cf=(()=>{class t extends OD{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=Di()?Di().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(n){this.setProperty("value",null==n?"":n)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}}return t.\u0275fac=function(n){return new(n||t)(ce(Xi),ce(dn),ce(K2,8))},t.\u0275dir=Pe({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,r){1&n&&Lt("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[xt([Y2]),Tt]}),t})();const Pn=new Ge("NgValidators"),Fo=new Ge("NgAsyncValidators");function zD(t){return null!=t}function GD(t){const e=Yc(t)?vt(t):t;return ed(e),e}function WD(t){let e={};return t.forEach(n=>{e=null!=n?Object.assign(Object.assign({},e),n):e}),0===Object.keys(e).length?null:e}function qD(t,e){return e.map(n=>n(t))}function YD(t){return t.map(e=>function(t){return!t.validate}(e)?e:n=>e.validate(n))}function Pm(t){return null!=t?function(t){if(!t)return null;const e=t.filter(zD);return 0==e.length?null:function(n){return WD(qD(n,e))}}(YD(t)):null}function xm(t){return null!=t?function(t){if(!t)return null;const e=t.filter(zD);return 0==e.length?null:function(n){return function(...t){if(1===t.length){const e=t[0];if(L(e))return bf(e,null);if(U(e)&&Object.getPrototypeOf(e)===Object.prototype){const n=Object.keys(e);return bf(n.map(r=>e[r]),n)}}if("function"==typeof t[t.length-1]){const e=t.pop();return bf(t=1===t.length&&L(t[0])?t[0]:t,null).pipe(pe(n=>e(...n)))}return bf(t,null)}(qD(n,e).map(GD)).pipe(pe(WD))}}(YD(t)):null}function JD(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function Rm(t){return t?Array.isArray(t)?t:[t]:[]}function wf(t,e){return Array.isArray(t)?t.includes(e):t===e}function eS(t,e){const n=Rm(e);return Rm(t).forEach(i=>{wf(n,i)||n.push(i)}),n}function tS(t,e){return Rm(e).filter(n=>!wf(t,n))}let nS=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=Pm(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=xm(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n){this.control&&this.control.reset(n)}hasError(n,r){return!!this.control&&this.control.hasError(n,r)}getError(n,r){return this.control?this.control.getError(n,r):null}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=Pe({type:t}),t})(),$n=(()=>{class t extends nS{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(){let e;return function(r){return(e||(e=Cr(t)))(r||t)}}(),t.\u0275dir=Pe({type:t,features:[Tt]}),t})();class Lo extends nS{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let iS=(()=>{class t extends class{constructor(e){this._cd=e}is(e){var n,r,i;return"submitted"===e?!!(null===(n=this._cd)||void 0===n?void 0:n.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}{constructor(n){super(n)}}return t.\u0275fac=function(n){return new(n||t)(ce(Lo,2))},t.\u0275dir=Pe({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,r){2&n&&To("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[Tt]}),t})();function ju(t,e){(function(t,e){const n=function(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(JD(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=function(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(JD(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();Tf(e._rawValidators,i),Tf(e._rawAsyncValidators,i)})(t,e),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&oS(t,e)})}(t,e),function(t,e){const n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&oS(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function Tf(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function oS(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function If(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Bu="VALID",Pf="INVALID",Za="PENDING",Uu="DISABLED";function Vm(t){return(jm(t)?t.validators:t)||null}function cS(t){return Array.isArray(t)?Pm(t):t||null}function Lm(t,e){return(jm(e)?e.asyncValidators:t)||null}function uS(t){return Array.isArray(t)?xm(t):t||null}function jm(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class Bm{constructor(e,n){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=n,this._composedValidatorFn=cS(this._rawValidators),this._composedAsyncValidatorFn=uS(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Bu}get invalid(){return this.status===Pf}get pending(){return this.status==Za}get disabled(){return this.status===Uu}get enabled(){return this.status!==Uu}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=cS(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=uS(e)}addValidators(e){this.setValidators(eS(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(eS(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(tS(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(tS(e,this._rawAsyncValidators))}hasValidator(e){return wf(this._rawValidators,e)}hasAsyncValidator(e){return wf(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Za,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=Uu,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=Bu,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Bu||this.status===Za)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Uu:Bu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Za,this._hasOwnPendingAsyncValidator=!0;const n=GD(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent)}get(e){return function(t,e,n){if(null==e||(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length))return null;let r=t;return e.forEach(i=>{r=r instanceof Um?r.controls.hasOwnProperty(i)?r.controls[i]:null:r instanceof dB&&r.at(i)||null}),r}(this,e)}getError(e,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new nn,this.statusChanges=new nn}_calculateStatus(){return this._allControlsDisabled()?Uu:this.errors?Pf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Za)?Za:this._anyControlsHaveStatus(Pf)?Pf:Bu}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){jm(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class xf extends Bm{constructor(e=null,n,r){super(Vm(n),Lm(r,n)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=null,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){If(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){If(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Um extends Bm{constructor(e,n,r){super(Vm(n),Lm(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(r=>{this._throwIfControlMissing(r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n instanceof xf?n.value:n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>!!r._syncPendingControls()||n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(n=>{const r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const n of Object.keys(this.controls)){const r=this.controls[n];if(this.contains(n)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,n,r)=>((n.enabled||this.disabled)&&(e[r]=n.value),e))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((n,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control with name: '${r}'.`)})}}class dB extends Bm{constructor(e,n,r){super(Vm(n),Lm(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,n={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(e,n,r={}){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),n&&(this.controls.splice(e,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,n={}){this._checkAllValuesPresent(e),e.forEach((r,i)=>{this._throwIfControlMissing(i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e=[],n={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(e=>e instanceof xf?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((n,r)=>!!r._syncPendingControls()||n,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((n,r)=>{e(n,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(n=>n.enabled&&e(n))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((n,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control at index: ${r}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const pB={provide:Lo,useExisting:yt(()=>$m)},fS=(()=>Promise.resolve(null))();let $m=(()=>{class t extends Lo{constructor(n,r,i,o){super(),this.control=new xf,this._registered=!1,this.update=new nn,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(o=>{o.constructor===Cf?n=o:function(t){return Object.getPrototypeOf(t.constructor)===Is}(o)?r=o:i=o}),i||r||n||null}(0,o)}ngOnChanges(n){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in n&&this._updateDisabled(n),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(t,e){return[...e.path,t]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){ju(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(n){fS.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1})})}_updateDisabled(n){const r=n.isDisabled.currentValue,i=""===r||r&&"false"!==r;fS.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(n){return new(n||t)(ce($n,9),ce(Pn,10),ce(Fo,10),ce(Ii,10))},t.\u0275dir=Pe({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[xt([pB]),Tt,$t]}),t})(),pS=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=bn({type:t}),t.\u0275inj=Ft({}),t})(),RS=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=bn({type:t}),t.\u0275inj=Ft({imports:[[pS]]}),t})(),jB=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=bn({type:t}),t.\u0275inj=Ft({imports:[RS]}),t})();function BB(t,e){if(1&t&&(ot(0,"li"),tn(1),st()),2&t){const n=e.$implicit,r=yn();gt(1),Kc(" ",n.name,"",n.id===(null==r.gameServiceState.myPlayer?null:r.gameServiceState.myPlayer.id)?"(you)":""," ")}}function UB(t,e){if(1&t){const n=qc();ot(0,"button",2),Lt("click",function(){return _o(n),yn().startGame()}),tn(1,"Start Game"),st()}2&t&&Ot("disabled",null===yn().gameServiceState.myPlayer)}let HB=(()=>{class t{constructor(n,r,i,o){this.gameService=n,this.peerToPeerService=r,this.gameHostService=i,this.router=o}ngOnInit(){var n=this;return ao(function*(){n.isHost=n.peerToPeerService.getIsHost(),n.gameServiceState=n.gameService.state,n.gameService.initFromPeerToPeer(),n.subs=[n.gameService.gameStart$.subscribe(r=>n.router.navigate([hr.GAME+"/"+n.peerToPeerService.getHostId()])),n.peerToPeerService.connectionAdded.subscribe(r=>{n.isHost&&n.gameService.echoAllPlayers()})]})()}ngOnDestroy(){this.subs.forEach(n=>n.unsubscribe)}setName(){this.gameService.updatePlayer(this.name)}startGame(){this.gameHostService.startGame()}}return t.\u0275fac=function(n){return new(n||t)(ce(Ms),ce(Ts),ce(_f),ce(on))},t.\u0275cmp=tr({type:t,selectors:[["app-lobby"]],decls:10,vars:6,consts:[[4,"ngFor","ngForOf"],["type","text",3,"ngModel","ngModelChange"],[3,"disabled","click"],[3,"disabled","click",4,"ngIf"]],template:function(n,r){1&n&&(ot(0,"p"),tn(1),st(),ot(2,"ul"),jn(3,BB,2,2,"li",0),st(),ot(4,"input",1),Lt("ngModelChange",function(o){return r.name=o}),st(),ot(5,"button",2),Lt("click",function(){return r.setName()}),tn(6,"Set name"),st(),Sr(7,"br"),Sr(8,"br"),jn(9,UB,2,1,"button",3)),2&n&&(gt(1),Kc("",r.gameServiceState.players.length," players. ",r.gameServiceState.totalPeerCount," in room."),gt(2),Ot("ngForOf",r.gameServiceState.players),gt(1),Ot("ngModel",r.name),gt(1),Ot("disabled",!r.name),gt(4),Ot("ngIf",r.isHost))},directives:[Gd,Cf,iS,$m,Wd],styles:[""]}),t})();const zB=[{path:hr.HOME,component:H2},{path:hr.LOCAL,component:(()=>{class t{constructor(n,r,i,o){this.gameService=n,this.gameHostService=r,this.activatedRoute=i,this.paramOverrideService=o}ngOnInit(){this.paramOverrideService.setupOverrides(this.activatedRoute.snapshot.queryParams),this.gameService.initFromPeerToPeer(),this.gameService.updatePlayer("abc"),this.gameHostService.startGame()}}return t.\u0275fac=function(n){return new(n||t)(ce(Ms),ce(_f),ce(so),ce(AD))},t.\u0275cmp=tr({type:t,selectors:[["app-local"]],decls:1,vars:0,template:function(n,r){1&n&&Sr(0,"app-board-container")},directives:[xD],styles:[""]}),t})()},{path:hr.JOIN+"/:id",component:G2},{path:hr.LOBBY+"/:id",component:HB,canActivate:[cD]},{path:hr.GAME+"/:id",component:U2,canActivate:[cD]}];let GB=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=bn({type:t}),t.\u0275inj=Ft({imports:[[XE.forRoot(zB)],XE]}),t})(),WB=(()=>{class t{constructor(){this.title="bananagrams"}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=tr({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(n,r){1&n&&Sr(0,"router-outlet")},directives:[vm],styles:[""]}),t})(),qB=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=bn({type:t,bootstrap:[WB]}),t.\u0275inj=Ft({providers:[{provide:Cu,useFactory:e=>e.getBaseHrefFromDOM(),deps:[xo]}],imports:[[KF,GB,jB,b2]]}),t})();(function(){if(k0)throw new Error("Cannot enable prod mode after platform setup.");O0=!1})(),YF().bootstrapModule(qB).catch(t=>console.error(t))},784:gn=>{function pt(Fe){var se=new Error("Cannot find module '"+Fe+"'");throw se.code="MODULE_NOT_FOUND",se}pt.keys=()=>[],pt.resolve=pt,pt.id=784,gn.exports=pt}},gn=>{gn(gn.s=311)}]);