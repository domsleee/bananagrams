(self.webpackChunkbananagrams=self.webpackChunkbananagrams||[]).push([[179],{255:mn=>{function gt(Fe){return Promise.resolve().then(()=>{var se=new Error("Cannot find module '"+Fe+"'");throw se.code="MODULE_NOT_FOUND",se})}gt.keys=()=>[],gt.resolve=gt,gt.id=255,mn.exports=gt},748:mn=>{mn.exports=function(){var gt={};Object.defineProperty(gt,"__esModule",{value:!0}),gt.default=void 0,gt.default=function(c){return!(!c||!c.Window)&&c instanceof c.Window};var Fe={};Object.defineProperty(Fe,"__esModule",{value:!0}),Fe.init=X,Fe.getWindow=function(c){return(0,gt.default)(c)?c:(c.ownerDocument||c).defaultView||we.window},Fe.window=Fe.realWindow=void 0;var se=void 0;Fe.realWindow=se;var we=void 0;function X(c){Fe.realWindow=se=c;var l=c.document.createTextNode("");l.ownerDocument!==c.document&&"function"==typeof c.wrap&&c.wrap(l)===l&&(c=c.wrap(c)),Fe.window=we=c}Fe.window=we,"undefined"!=typeof window&&window&&X(window);var O={};function F(c){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(l){return typeof l}:function(l){return l&&"function"==typeof Symbol&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(c)}Object.defineProperty(O,"__esModule",{value:!0}),O.default=void 0;var V=function(c){return!!c&&"object"===F(c)},U=function(c){return"function"==typeof c};O.default={window:function(c){return c===Fe.window||(0,gt.default)(c)},docFrag:function(c){return V(c)&&11===c.nodeType},object:V,func:U,number:function(c){return"number"==typeof c},bool:function(c){return"boolean"==typeof c},string:function(c){return"string"==typeof c},element:function(c){if(!c||"object"!==F(c))return!1;var l=Fe.getWindow(c)||Fe.window;return/object|function/.test(F(l.Element))?c instanceof l.Element:1===c.nodeType&&"string"==typeof c.nodeName},plainObject:function(c){return V(c)&&!!c.constructor&&/function Object\b/.test(c.constructor.toString())},array:function(c){return V(c)&&void 0!==c.length&&U(c.splice)}};var B={};function L(c){var l=c.interaction;if("drag"===l.prepared.name){var d=l.prepared.axis;"x"===d?(l.coords.cur.page.y=l.coords.start.page.y,l.coords.cur.client.y=l.coords.start.client.y,l.coords.velocity.client.y=0,l.coords.velocity.page.y=0):"y"===d&&(l.coords.cur.page.x=l.coords.start.page.x,l.coords.cur.client.x=l.coords.start.client.x,l.coords.velocity.client.x=0,l.coords.velocity.page.x=0)}}function _(c){var l=c.iEvent,d=c.interaction;if("drag"===d.prepared.name){var f=d.prepared.axis;if("x"===f||"y"===f){var g="x"===f?"y":"x";l.page[g]=d.coords.start.page[g],l.client[g]=d.coords.start.client[g],l.delta[g]=0}}}Object.defineProperty(B,"__esModule",{value:!0}),B.default=void 0;var P={id:"actions/drag",install:function(c){var l=c.actions,f=c.defaults;c.Interactable.prototype.draggable=P.draggable,l.map.drag=P,l.methodDict.drag="draggable",f.actions.drag=P.defaults},listeners:{"interactions:before-action-move":L,"interactions:action-resume":L,"interactions:action-move":_,"auto-start:check":function(c){var l=c.interaction,d=c.interactable,f=c.buttons,g=d.options.drag;if(g&&g.enabled&&(!l.pointerIsDown||!/mouse|pointer/.test(l.pointerType)||0!=(f&d.options.drag.mouseButtons)))return c.action={name:"drag",axis:"start"===g.lockAxis?g.startAxis:g.lockAxis},!1}},draggable:function(c){return O.default.object(c)?(this.options.drag.enabled=!1!==c.enabled,this.setPerAction("drag",c),this.setOnEvents("drag",c),/^(xy|x|y|start)$/.test(c.lockAxis)&&(this.options.drag.lockAxis=c.lockAxis),/^(xy|x|y)$/.test(c.startAxis)&&(this.options.drag.startAxis=c.startAxis),this):O.default.bool(c)?(this.options.drag.enabled=c,this):this.options.drag},beforeMove:L,move:_,defaults:{startAxis:"xy",lockAxis:"xy"},getCursor:function(){return"move"}};B.default=P;var I={};Object.defineProperty(I,"__esModule",{value:!0}),I.default=void 0;var S={init:function(c){var l=c;S.document=l.document,S.DocumentFragment=l.DocumentFragment||D,S.SVGElement=l.SVGElement||D,S.SVGSVGElement=l.SVGSVGElement||D,S.SVGElementInstance=l.SVGElementInstance||D,S.Element=l.Element||D,S.HTMLElement=l.HTMLElement||S.Element,S.Event=l.Event,S.Touch=l.Touch||D,S.PointerEvent=l.PointerEvent||l.MSPointerEvent},document:null,DocumentFragment:null,SVGElement:null,SVGSVGElement:null,SVGElementInstance:null,Element:null,HTMLElement:null,Event:null,Touch:null,PointerEvent:null};function D(){}I.default=S;var y={};Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var v={init:function(c){var l=I.default.Element,d=c.navigator||{};v.supportsTouch="ontouchstart"in c||O.default.func(c.DocumentTouch)&&I.default.document instanceof c.DocumentTouch,v.supportsPointerEvent=!1!==d.pointerEnabled&&!!I.default.PointerEvent,v.isIOS=/iP(hone|od|ad)/.test(d.platform),v.isIOS7=/iP(hone|od|ad)/.test(d.platform)&&/OS 7[^\d]/.test(d.appVersion),v.isIe9=/MSIE 9/.test(d.userAgent),v.isOperaMobile="Opera"===d.appName&&v.supportsTouch&&/Presto/.test(d.userAgent),v.prefixedMatchesSelector="matches"in l.prototype?"matches":"webkitMatchesSelector"in l.prototype?"webkitMatchesSelector":"mozMatchesSelector"in l.prototype?"mozMatchesSelector":"oMatchesSelector"in l.prototype?"oMatchesSelector":"msMatchesSelector",v.pEventTypes=v.supportsPointerEvent?I.default.PointerEvent===c.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,v.wheelEvent=I.default.document&&"onmousewheel"in I.default.document?"mousewheel":"wheel"},supportsTouch:null,supportsPointerEvent:null,isIOS7:null,isIOS:null,isIe9:null,isOperaMobile:null,prefixedMatchesSelector:null,pEventTypes:null,wheelEvent:null};y.default=v;var b={};function R(c){var l=c.parentNode;if(O.default.docFrag(l)){for(;(l=l.host)&&O.default.docFrag(l););return l}return l}function q(c,l){return Fe.window!==Fe.realWindow&&(l=l.replace(/\/deep\//g," ")),c[y.default.prefixedMatchesSelector](l)}Object.defineProperty(b,"__esModule",{value:!0}),b.nodeContains=function(c,l){if(c.contains)return c.contains(l);for(;l;){if(l===c)return!0;l=l.parentNode}return!1},b.closest=function(c,l){for(;O.default.element(c);){if(q(c,l))return c;c=R(c)}return null},b.parentNode=R,b.matchesSelector=q,b.indexOfDeepestElement=function(c){for(var l,d=[],f=0;f<c.length;f++){var g=c[f],C=c[l];if(g&&f!==l)if(C){var T=W(g),w=W(C);if(T!==g.ownerDocument)if(w!==g.ownerDocument)if(T!==w){d=d.length?d:Q(C);var x=void 0;if(C instanceof I.default.HTMLElement&&g instanceof I.default.SVGElement&&!(g instanceof I.default.SVGSVGElement)){if(g===w)continue;x=g.ownerSVGElement}else x=g;for(var j=Q(x,C.ownerDocument),$=0;j[$]&&j[$]===d[$];)$++;var Y=[j[$-1],j[$],d[$]];if(Y[0])for(var ne=Y[0].lastChild;ne;){if(ne===Y[1]){l=f,d=j;break}if(ne===Y[2])break;ne=ne.previousSibling}}else ie=g,te=C,(parseInt(Fe.getWindow(ie).getComputedStyle(ie).zIndex,10)||0)>=(parseInt(Fe.getWindow(te).getComputedStyle(te).zIndex,10)||0)&&(l=f);else l=f}else l=f}var ie,te;return l},b.matchesUpTo=function(c,l,d){for(;O.default.element(c);){if(q(c,l))return!0;if((c=R(c))===d)return q(c,l)}return!1},b.getActualElement=function(c){return c.correspondingUseElement||c},b.getScrollXY=J,b.getElementClientRect=ee,b.getElementRect=function(c){var l=ee(c);if(!y.default.isIOS7&&l){var d=J(Fe.getWindow(c));l.left+=d.x,l.right+=d.x,l.top+=d.y,l.bottom+=d.y}return l},b.getPath=function(c){for(var l=[];c;)l.push(c),c=R(c);return l},b.trySelector=function(c){return!!O.default.string(c)&&(I.default.document.querySelector(c),!0)};var W=function(c){return c.parentNode||c.host};function Q(c,l){for(var d,f=[],g=c;(d=W(g))&&g!==l&&d!==g.ownerDocument;)f.unshift(g),g=d;return f}function J(c){return{x:(c=c||Fe.window).scrollX||c.document.documentElement.scrollLeft,y:c.scrollY||c.document.documentElement.scrollTop}}function ee(c){var l=c instanceof I.default.SVGElement?c.getBoundingClientRect():c.getClientRects()[0];return l&&{left:l.left,right:l.right,top:l.top,bottom:l.bottom,width:l.width||l.right-l.left,height:l.height||l.bottom-l.top}}var z={};Object.defineProperty(z,"__esModule",{value:!0}),z.default=function(c,l){for(var d in l)c[d]=l[d];return c};var oe={};function me(c,l){(null==l||l>c.length)&&(l=c.length);for(var d=0,f=Array(l);d<l;d++)f[d]=c[d];return f}function pe(c,l,d){return"parent"===c?(0,b.parentNode)(d):"self"===c?l.getRect(d):(0,b.closest)(d,c)}Object.defineProperty(oe,"__esModule",{value:!0}),oe.getStringOptionResult=pe,oe.resolveRectLike=function(c,l,d,f){var g,C=c;return O.default.string(C)?C=pe(C,l,d):O.default.func(C)&&(C=C.apply(void 0,function(T){if(Array.isArray(T))return me(T)}(g=f)||function(T){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(T))return Array.from(T)}(g)||function(T,w){if(T){if("string"==typeof T)return me(T,w);var x=Object.prototype.toString.call(T).slice(8,-1);return"Object"===x&&T.constructor&&(x=T.constructor.name),"Map"===x||"Set"===x?Array.from(T):"Arguments"===x||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x)?me(T,w):void 0}}(g)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),O.default.element(C)&&(C=(0,b.getElementRect)(C)),C},oe.rectToXY=function(c){return c&&{x:"x"in c?c.x:c.left,y:"y"in c?c.y:c.top}},oe.xywhToTlbr=function(c){return!c||"left"in c&&"top"in c||((c=(0,z.default)({},c)).left=c.x||0,c.top=c.y||0,c.right=c.right||c.left+c.width,c.bottom=c.bottom||c.top+c.height),c},oe.tlbrToXywh=function(c){return!c||"x"in c&&"y"in c||((c=(0,z.default)({},c)).x=c.left||0,c.y=c.top||0,c.width=c.width||(c.right||0)-c.x,c.height=c.height||(c.bottom||0)-c.y),c},oe.addEdges=function(c,l,d){c.left&&(l.left+=d.x),c.right&&(l.right+=d.x),c.top&&(l.top+=d.y),c.bottom&&(l.bottom+=d.y),l.width=l.right-l.left,l.height=l.bottom-l.top};var De={};Object.defineProperty(De,"__esModule",{value:!0}),De.default=function(c,l,d){var f=c.options[d],C=(0,oe.resolveRectLike)(f&&f.origin||c.options.origin,c,l,[c&&l]);return(0,oe.rectToXY)(C)||{x:0,y:0}};var et={};function mt(c){return c.trim().split(/ +/)}Object.defineProperty(et,"__esModule",{value:!0}),et.default=function c(l,d,f){if(f=f||{},O.default.string(l)&&-1!==l.search(" ")&&(l=mt(l)),O.default.array(l))return l.reduce(function(x,j){return(0,z.default)(x,c(j,d,f))},f);if(O.default.object(l)&&(d=l,l=""),O.default.func(d))f[l]=f[l]||[],f[l].push(d);else if(O.default.array(d))for(var g=0;g<d.length;g++)c(l,d[g],f);else if(O.default.object(d))for(var T in d){var w=mt(T).map(function(x){return"".concat(l).concat(x)});c(w,d[T],f)}return f};var Jn={};Object.defineProperty(Jn,"__esModule",{value:!0}),Jn.default=void 0,Jn.default=function(c,l){return Math.sqrt(c*c+l*l)};var Ue={};function Ar(c,l){for(var d in l){var f=Ar.prefixedPropREs,g=!1;for(var C in f)if(0===d.indexOf(C)&&f[C].test(d)){g=!0;break}g||"function"==typeof l[d]||(c[d]=l[d])}return c}Object.defineProperty(Ue,"__esModule",{value:!0}),Ue.default=void 0,Ar.prefixedPropREs={webkit:/(Movement[XY]|Radius[XY]|RotationAngle|Force)$/,moz:/(Pressure)$/},Ue.default=Ar;var Ce={};function Rn(c){return c instanceof I.default.Event||c instanceof I.default.Touch}function pr(c,l,d){return(d=d||{}).x=l[(c=c||"page")+"X"],d.y=l[c+"Y"],d}function xi(c,l){return l=l||{x:0,y:0},y.default.isOperaMobile&&Rn(c)?(pr("screen",c,l),l.x+=window.scrollX,l.y+=window.scrollY):pr("page",c,l),l}function gr(c,l){return l=l||{},y.default.isOperaMobile&&Rn(c)?pr("screen",c,l):pr("client",c,l),l}function bn(c){var l=[];return O.default.array(c)?(l[0]=c[0],l[1]=c[1]):"touchend"===c.type?1===c.touches.length?(l[0]=c.touches[0],l[1]=c.changedTouches[0]):0===c.touches.length&&(l[0]=c.changedTouches[0],l[1]=c.changedTouches[1]):(l[0]=c.touches[0],l[1]=c.touches[1]),l}function Vo(c){for(var l={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},d=0;d<c.length;d++){var f=c[d];for(var g in l)l[g]+=f[g]}for(var C in l)l[C]/=c.length;return l}Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.copyCoords=function(c,l){c.page=c.page||{},c.page.x=l.page.x,c.page.y=l.page.y,c.client=c.client||{},c.client.x=l.client.x,c.client.y=l.client.y,c.timeStamp=l.timeStamp},Ce.setCoordDeltas=function(c,l,d){c.page.x=d.page.x-l.page.x,c.page.y=d.page.y-l.page.y,c.client.x=d.client.x-l.client.x,c.client.y=d.client.y-l.client.y,c.timeStamp=d.timeStamp-l.timeStamp},Ce.setCoordVelocity=function(c,l){var d=Math.max(l.timeStamp/1e3,.001);c.page.x=l.page.x/d,c.page.y=l.page.y/d,c.client.x=l.client.x/d,c.client.y=l.client.y/d,c.timeStamp=d},Ce.setZeroCoords=function(c){c.page.x=0,c.page.y=0,c.client.x=0,c.client.y=0},Ce.isNativePointer=Rn,Ce.getXY=pr,Ce.getPageXY=xi,Ce.getClientXY=gr,Ce.getPointerId=function(c){return O.default.number(c.pointerId)?c.pointerId:c.identifier},Ce.setCoords=function(c,l,d){var f=l.length>1?Vo(l):l[0];xi(f,c.page),gr(f,c.client),c.timeStamp=d},Ce.getTouchPair=bn,Ce.pointerAverage=Vo,Ce.touchBBox=function(c){if(!c.length)return null;var l=bn(c),d=Math.min(l[0].pageX,l[1].pageX),f=Math.min(l[0].pageY,l[1].pageY),g=Math.max(l[0].pageX,l[1].pageX),C=Math.max(l[0].pageY,l[1].pageY);return{x:d,y:f,left:d,top:f,right:g,bottom:C,width:g-d,height:C-f}},Ce.touchDistance=function(c,l){var d=l+"X",f=l+"Y",g=bn(c);return(0,Jn.default)(g[0][d]-g[1][d],g[0][f]-g[1][f])},Ce.touchAngle=function(c,l){var d=l+"X",f=l+"Y",g=bn(c);return 180*Math.atan2(g[1][f]-g[0][f],g[1][d]-g[0][d])/Math.PI},Ce.getPointerType=function(c){return O.default.string(c.pointerType)?c.pointerType:O.default.number(c.pointerType)?[void 0,void 0,"touch","pen","mouse"][c.pointerType]:/touch/.test(c.type||"")||c instanceof I.default.Touch?"touch":"mouse"},Ce.getEventTargets=function(c){var l=O.default.func(c.composedPath)?c.composedPath():c.path;return[b.getActualElement(l?l[0]:c.target),b.getActualElement(c.currentTarget)]},Ce.newCoords=function(){return{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0}},Ce.coordsToEvent=function(c){return{coords:c,get page(){return this.coords.page},get client(){return this.coords.client},get timeStamp(){return this.coords.timeStamp},get pageX(){return this.coords.page.x},get pageY(){return this.coords.page.y},get clientX(){return this.coords.client.x},get clientY(){return this.coords.client.y},get pointerId(){return this.coords.pointerId},get target(){return this.coords.target},get type(){return this.coords.type},get pointerType(){return this.coords.pointerType},get buttons(){return this.coords.buttons},preventDefault:function(){}}},Object.defineProperty(Ce,"pointerExtend",{enumerable:!0,get:function(){return Ue.default}});var Xn={};function Zn(c,l,d){return l in c?Object.defineProperty(c,l,{value:d,enumerable:!0,configurable:!0,writable:!0}):c[l]=d,c}Object.defineProperty(Xn,"__esModule",{value:!0}),Xn.BaseEvent=void 0;var jo=function(){function c(f){(function(g,C){if(!(g instanceof C))throw new TypeError("Cannot call a class as a function")})(this,c),Zn(this,"type",void 0),Zn(this,"target",void 0),Zn(this,"currentTarget",void 0),Zn(this,"interactable",void 0),Zn(this,"_interaction",void 0),Zn(this,"timeStamp",void 0),Zn(this,"immediatePropagationStopped",!1),Zn(this,"propagationStopped",!1),this._interaction=f}var d;return(d=[{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}])&&function(c,l){for(var d=0;d<l.length;d++){var f=l[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}(c.prototype,d),c}();Xn.BaseEvent=jo,Object.defineProperty(jo.prototype,"interaction",{get:function(){return this._interaction._proxy},set:function(){}});var Je={};Object.defineProperty(Je,"__esModule",{value:!0}),Je.find=Je.findIndex=Je.from=Je.merge=Je.remove=Je.contains=void 0,Je.contains=function(c,l){return-1!==c.indexOf(l)},Je.remove=function(c,l){return c.splice(c.indexOf(l),1)};var vt=function(c,l){for(var d=0;d<l.length;d++)c.push(l[d]);return c};Je.merge=vt,Je.from=function(c){return vt([],c)};var ii=function(c,l){for(var d=0;d<c.length;d++)if(l(c[d],d,c))return d;return-1};Je.findIndex=ii,Je.find=function(c,l){return c[ii(c,l)]};var St={};function oi(c){return(oi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(l){return typeof l}:function(l){return l&&"function"==typeof Symbol&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(c)}function Ri(c,l){return(Ri=Object.setPrototypeOf||function(d,f){return d.__proto__=f,d})(c,l)}function Bt(c,l){return!l||"object"!==oi(l)&&"function"!=typeof l?Or(c):l}function Or(c){if(void 0===c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function sc(c){return(sc=Object.setPrototypeOf?Object.getPrototypeOf:function(l){return l.__proto__||Object.getPrototypeOf(l)})(c)}function Ai(c,l,d){return l in c?Object.defineProperty(c,l,{value:d,enumerable:!0,configurable:!0,writable:!0}):c[l]=d,c}Object.defineProperty(St,"__esModule",{value:!0}),St.DropEvent=void 0;var Bo=function(c){!function(w,x){if("function"!=typeof x&&null!==x)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(x&&x.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),x&&Ri(w,x)}(T,c);var d,f,g,C=(f=T,g=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(w){return!1}}(),function(){var w,x=sc(f);if(g){var j=sc(this).constructor;w=Reflect.construct(x,arguments,j)}else w=x.apply(this,arguments);return Bt(this,w)});function T(w,x,j){var $;(function(te,ue){if(!(te instanceof ue))throw new TypeError("Cannot call a class as a function")})(this,T),Ai(Or($=C.call(this,x._interaction)),"target",void 0),Ai(Or($),"dropzone",void 0),Ai(Or($),"dragEvent",void 0),Ai(Or($),"relatedTarget",void 0),Ai(Or($),"draggable",void 0),Ai(Or($),"timeStamp",void 0),Ai(Or($),"propagationStopped",!1),Ai(Or($),"immediatePropagationStopped",!1);var Y="dragleave"===j?w.prev:w.cur,ne=Y.element,ie=Y.dropzone;return $.type=j,$.target=ne,$.currentTarget=ne,$.dropzone=ie,$.dragEvent=x,$.relatedTarget=x.target,$.draggable=x.interactable,$.timeStamp=x.timeStamp,$}return(d=[{key:"reject",value:function(){var w=this,x=this._interaction.dropState;if("dropactivate"===this.type||this.dropzone&&x.cur.dropzone===this.dropzone&&x.cur.element===this.target)if(x.prev.dropzone=this.dropzone,x.prev.element=this.target,x.rejected=!0,x.events.enter=null,this.stopImmediatePropagation(),"dropactivate"===this.type){var $=Je.findIndex(x.activeDrops,function(ne){return ne.dropzone===w.dropzone&&ne.element===w.target});x.activeDrops.splice($,1);var Y=new T(x,this.dragEvent,"dropdeactivate");Y.dropzone=this.dropzone,Y.target=this.target,this.dropzone.fire(Y)}else this.dropzone.fire(new T(x,this.dragEvent,"dragleave"))}},{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}])&&function(c,l){for(var d=0;d<l.length;d++){var f=l[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}(T.prototype,d),T}(Xn.BaseEvent);St.DropEvent=Bo;var ho={};function zl(c,l){for(var d=0;d<c.slice().length;d++){var f=c.slice()[d],g=f.dropzone,C=f.element;l.dropzone=g,l.target=C,g.fire(l),l.propagationStopped=l.immediatePropagationStopped=!1}}function Uo(c,l){for(var d=function(C,T){for(var w=C.interactables,x=[],j=0;j<w.list.length;j++){var $=w.list[j];if($.options.drop.enabled){var Y=$.options.drop.accept;if(!(O.default.element(Y)&&Y!==T||O.default.string(Y)&&!b.matchesSelector(T,Y)||O.default.func(Y)&&!Y({dropzone:$,draggableElement:T})))for(var ne=O.default.string($.target)?$._context.querySelectorAll($.target):O.default.array($.target)?$.target:[$.target],ie=0;ie<ne.length;ie++){var te=ne[ie];te!==T&&x.push({dropzone:$,element:te,rect:$.getRect(te)})}}}return x}(c,l),f=0;f<d.length;f++){var g=d[f];g.rect=g.dropzone.getRect(g.element)}return d}function Gl(c,l,d){for(var f=c.dropState,g=c.interactable,C=c.element,T=[],w=0;w<f.activeDrops.length;w++){var x=f.activeDrops[w],$=x.element;T.push(x.dropzone.dropCheck(l,d,g,C,$,x.rect)?$:null)}var ne=b.indexOfDeepestElement(T);return f.activeDrops[ne]||null}function ac(c,l,d){var f=c.dropState,g={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return"dragstart"===d.type&&(g.activate=new St.DropEvent(f,d,"dropactivate"),g.activate.target=null,g.activate.dropzone=null),"dragend"===d.type&&(g.deactivate=new St.DropEvent(f,d,"dropdeactivate"),g.deactivate.target=null,g.deactivate.dropzone=null),f.rejected||(f.cur.element!==f.prev.element&&(f.prev.dropzone&&(g.leave=new St.DropEvent(f,d,"dragleave"),d.dragLeave=g.leave.target=f.prev.element,d.prevDropzone=g.leave.dropzone=f.prev.dropzone),f.cur.dropzone&&(g.enter=new St.DropEvent(f,d,"dragenter"),d.dragEnter=f.cur.element,d.dropzone=f.cur.dropzone)),"dragend"===d.type&&f.cur.dropzone&&(g.drop=new St.DropEvent(f,d,"drop"),d.dropzone=f.cur.dropzone,d.relatedTarget=f.cur.element),"dragmove"===d.type&&f.cur.dropzone&&(g.move=new St.DropEvent(f,d,"dropmove"),g.move.dragmove=d,d.dropzone=f.cur.dropzone)),g}function As(c,l){var d=c.dropState,f=d.activeDrops,g=d.cur;l.leave&&d.prev.dropzone.fire(l.leave),l.enter&&g.dropzone.fire(l.enter),l.move&&g.dropzone.fire(l.move),l.drop&&g.dropzone.fire(l.drop),l.deactivate&&zl(f,l.deactivate),d.prev.dropzone=g.dropzone,d.prev.element=g.element}function Wl(c,l){var d=c.interaction,f=c.iEvent,g=c.event;if("dragmove"===f.type||"dragend"===f.type){var C=d.dropState;l.dynamicDrop&&(C.activeDrops=Uo(l,d.element));var T=f,w=Gl(d,T,g);C.rejected=C.rejected&&!!w&&w.dropzone===C.cur.dropzone&&w.element===C.cur.element,C.cur.dropzone=w&&w.dropzone,C.cur.element=w&&w.element,C.events=ac(d,0,T)}}Object.defineProperty(ho,"__esModule",{value:!0}),ho.default=void 0;var ql={id:"actions/drop",install:function(c){var l=c.actions,d=c.interactStatic,f=c.Interactable,g=c.defaults;c.usePlugin(B.default),f.prototype.dropzone=function(C){return function(T,w){if(O.default.object(w)){if(T.options.drop.enabled=!1!==w.enabled,w.listeners){var x=(0,et.default)(w.listeners),j=Object.keys(x).reduce(function($,Y){return $[/^(enter|leave)/.test(Y)?"drag".concat(Y):/^(activate|deactivate|move)/.test(Y)?"drop".concat(Y):Y]=x[Y],$},{});T.off(T.options.drop.listeners),T.on(j),T.options.drop.listeners=j}return O.default.func(w.ondrop)&&T.on("drop",w.ondrop),O.default.func(w.ondropactivate)&&T.on("dropactivate",w.ondropactivate),O.default.func(w.ondropdeactivate)&&T.on("dropdeactivate",w.ondropdeactivate),O.default.func(w.ondragenter)&&T.on("dragenter",w.ondragenter),O.default.func(w.ondragleave)&&T.on("dragleave",w.ondragleave),O.default.func(w.ondropmove)&&T.on("dropmove",w.ondropmove),/^(pointer|center)$/.test(w.overlap)?T.options.drop.overlap=w.overlap:O.default.number(w.overlap)&&(T.options.drop.overlap=Math.max(Math.min(1,w.overlap),0)),"accept"in w&&(T.options.drop.accept=w.accept),"checker"in w&&(T.options.drop.checker=w.checker),T}return O.default.bool(w)?(T.options.drop.enabled=w,T):T.options.drop}(this,C)},f.prototype.dropCheck=function(C,T,w,x,j,$){return function(Y,ne,ie,te,ue,ge,de){var Ee=!1;if(!(de=de||Y.getRect(ge)))return!!Y.options.drop.checker&&Y.options.drop.checker(ne,ie,Ee,Y,ge,te,ue);var xe=Y.options.drop.overlap;if("pointer"===xe){var Le=(0,De.default)(te,ue,"drag"),it=Ce.getPageXY(ne);it.x+=Le.x,it.y+=Le.y,Ee=it.x>de.left&&it.x<de.right&&it.y>de.top&&it.y<de.bottom}var tt=te.getRect(ue);if(tt&&"center"===xe){var Sn=tt.left+tt.width/2,Yn=tt.top+tt.height/2;Ee=Sn>=de.left&&Sn<=de.right&&Yn>=de.top&&Yn<=de.bottom}return tt&&O.default.number(xe)&&(Ee=Math.max(0,Math.min(de.right,tt.right)-Math.max(de.left,tt.left))*Math.max(0,Math.min(de.bottom,tt.bottom)-Math.max(de.top,tt.top))/(tt.width*tt.height)>=xe),Y.options.drop.checker&&(Ee=Y.options.drop.checker(ne,ie,Ee,Y,ge,te,ue)),Ee}(this,C,T,w,x,j,$)},d.dynamicDrop=function(C){return O.default.bool(C)?(c.dynamicDrop=C,d):c.dynamicDrop},(0,z.default)(l.phaselessTypes,{dragenter:!0,dragleave:!0,dropactivate:!0,dropdeactivate:!0,dropmove:!0,drop:!0}),l.methodDict.drop="dropzone",c.dynamicDrop=!1,g.actions.drop=ql.defaults},listeners:{"interactions:before-action-start":function(c){var l=c.interaction;"drag"===l.prepared.name&&(l.dropState={cur:{dropzone:null,element:null},prev:{dropzone:null,element:null},rejected:null,events:null,activeDrops:[]})},"interactions:after-action-start":function(c,l){var d=c.interaction,f=c.iEvent;if("drag"===d.prepared.name){var g=d.dropState;g.activeDrops=null,g.events=null,g.activeDrops=Uo(l,d.element),g.events=ac(d,0,f),g.events.activate&&(zl(g.activeDrops,g.events.activate),l.fire("actions/drop:start",{interaction:d,dragEvent:f}))}},"interactions:action-move":Wl,"interactions:after-action-move":function(c,l){var d=c.interaction,f=c.iEvent;"drag"===d.prepared.name&&(As(d,d.dropState.events),l.fire("actions/drop:move",{interaction:d,dragEvent:f}),d.dropState.events={})},"interactions:action-end":function(c,l){if("drag"===c.interaction.prepared.name){var d=c.interaction,f=c.iEvent;Wl(c,l),As(d,d.dropState.events),l.fire("actions/drop:end",{interaction:d,dragEvent:f})}},"interactions:stop":function(c){var l=c.interaction;if("drag"===l.prepared.name){var d=l.dropState;d&&(d.activeDrops=null,d.events=null,d.cur.dropzone=null,d.cur.element=null,d.prev.dropzone=null,d.prev.element=null,d.rejected=!1)}}},getActiveDrops:Uo,getDrop:Gl,getDropEvents:ac,fireDropEvents:As,defaults:{enabled:!1,accept:null,overlap:"pointer"}};ho.default=ql;var Os={};function cc(c){var l=c.interaction,d=c.iEvent,f=c.phase;if("gesture"===l.prepared.name){var g=l.pointers.map(function(j){return j.pointer}),C="start"===f,T="end"===f,w=l.interactable.options.deltaSource;if(d.touches=[g[0],g[1]],C)d.distance=Ce.touchDistance(g,w),d.box=Ce.touchBBox(g),d.scale=1,d.ds=0,d.angle=Ce.touchAngle(g,w),d.da=0,l.gesture.startDistance=d.distance,l.gesture.startAngle=d.angle;else if(T){var x=l.prevEvent;d.distance=x.distance,d.box=x.box,d.scale=x.scale,d.ds=0,d.angle=x.angle,d.da=0}else d.distance=Ce.touchDistance(g,w),d.box=Ce.touchBBox(g),d.scale=d.distance/l.gesture.startDistance,d.angle=Ce.touchAngle(g,w),d.ds=d.scale-l.gesture.scale,d.da=d.angle-l.gesture.angle;l.gesture.distance=d.distance,l.gesture.angle=d.angle,O.default.number(d.scale)&&d.scale!==1/0&&!isNaN(d.scale)&&(l.gesture.scale=d.scale)}}Object.defineProperty(Os,"__esModule",{value:!0}),Os.default=void 0;var lc={id:"actions/gesture",before:["actions/drag","actions/resize"],install:function(c){var l=c.actions,f=c.defaults;c.Interactable.prototype.gesturable=function(g){return O.default.object(g)?(this.options.gesture.enabled=!1!==g.enabled,this.setPerAction("gesture",g),this.setOnEvents("gesture",g),this):O.default.bool(g)?(this.options.gesture.enabled=g,this):this.options.gesture},l.map.gesture=lc,l.methodDict.gesture="gesturable",f.actions.gesture=lc.defaults},listeners:{"interactions:action-start":cc,"interactions:action-move":cc,"interactions:action-end":cc,"interactions:new":function(c){c.interaction.gesture={angle:0,distance:0,scale:1,startAngle:0,startDistance:0}},"auto-start:check":function(c){if(!(c.interaction.pointers.length<2)){var l=c.interactable.options.gesture;if(l&&l.enabled)return c.action={name:"gesture"},!1}}},defaults:{},getCursor:function(){return""}};Os.default=lc;var ks={};function ot(c,l,d,f,g,C,T){if(!l)return!1;if(!0===l){var w=O.default.number(C.width)?C.width:C.right-C.left,x=O.default.number(C.height)?C.height:C.bottom-C.top;if(T=Math.min(T,Math.abs(("left"===c||"right"===c?w:x)/2)),w<0&&("left"===c?c="right":"right"===c&&(c="left")),x<0&&("top"===c?c="bottom":"bottom"===c&&(c="top")),"left"===c)return d.x<(w>=0?C.left:C.right)+T;if("top"===c)return d.y<(x>=0?C.top:C.bottom)+T;if("right"===c)return d.x>(w>=0?C.right:C.left)-T;if("bottom"===c)return d.y>(x>=0?C.bottom:C.top)-T}return!!O.default.element(f)&&(O.default.element(l)?l===f:b.matchesUpTo(f,l,g))}function Ns(c){var d=c.interaction;if("resize"===d.prepared.name&&d.resizeAxes){var f=c.iEvent;d.interactable.options.resize.square?("y"===d.resizeAxes?f.delta.x=f.delta.y:f.delta.y=f.delta.x,f.axes="xy"):(f.axes=d.resizeAxes,"x"===d.resizeAxes?f.delta.y=0:"y"===d.resizeAxes&&(f.delta.x=0))}}Object.defineProperty(ks,"__esModule",{value:!0}),ks.default=void 0;var Ae={id:"actions/resize",before:["actions/drag"],install:function(c){var l=c.actions,d=c.browser,f=c.Interactable,g=c.defaults;Ae.cursors=d.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"},Ae.defaultMargin=d.supportsTouch||d.supportsPointerEvent?20:10,f.prototype.resizable=function(C){return T=this,x=c,O.default.object(w=C)?(T.options.resize.enabled=!1!==w.enabled,T.setPerAction("resize",w),T.setOnEvents("resize",w),O.default.string(w.axis)&&/^x$|^y$|^xy$/.test(w.axis)?T.options.resize.axis=w.axis:null===w.axis&&(T.options.resize.axis=x.defaults.actions.resize.axis),O.default.bool(w.preserveAspectRatio)?T.options.resize.preserveAspectRatio=w.preserveAspectRatio:O.default.bool(w.square)&&(T.options.resize.square=w.square),T):O.default.bool(w)?(T.options.resize.enabled=w,T):T.options.resize;var T,w,x},l.map.resize=Ae,l.methodDict.resize="resizable",g.actions.resize=Ae.defaults},listeners:{"interactions:new":function(c){c.interaction.resizeAxes="xy"},"interactions:action-start":function(c){(function(l){var f=l.interaction;if("resize"===f.prepared.name&&f.prepared.edges){var g=l.iEvent,C=f.rect;f._rects={start:(0,z.default)({},C),corrected:(0,z.default)({},C),previous:(0,z.default)({},C),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},g.edges=f.prepared.edges,g.rect=f._rects.corrected,g.deltaRect=f._rects.delta}})(c),Ns(c)},"interactions:action-move":function(c){(function(l){var f=l.interaction;if("resize"===f.prepared.name&&f.prepared.edges){var g=l.iEvent,C=f.interactable.options.resize.invert,T="reposition"===C||"negate"===C,w=f.rect,x=f._rects,j=x.start,$=x.corrected,Y=x.delta,ne=x.previous;if((0,z.default)(ne,$),T){if((0,z.default)($,w),"reposition"===C){if($.top>$.bottom){var ie=$.top;$.top=$.bottom,$.bottom=ie}if($.left>$.right){var te=$.left;$.left=$.right,$.right=te}}}else $.top=Math.min(w.top,j.bottom),$.bottom=Math.max(w.bottom,j.top),$.left=Math.min(w.left,j.right),$.right=Math.max(w.right,j.left);for(var ue in $.width=$.right-$.left,$.height=$.bottom-$.top,$)Y[ue]=$[ue]-ne[ue];g.edges=f.prepared.edges,g.rect=$,g.deltaRect=Y}})(c),Ns(c)},"interactions:action-end":function(c){var d=c.interaction;if("resize"===d.prepared.name&&d.prepared.edges){var f=c.iEvent;f.edges=d.prepared.edges,f.rect=d._rects.corrected,f.deltaRect=d._rects.delta}},"auto-start:check":function(c){var l=c.interaction,d=c.interactable,f=c.element,g=c.rect,C=c.buttons;if(g){var T=(0,z.default)({},l.coords.cur.page),w=d.options.resize;if(w&&w.enabled&&(!l.pointerIsDown||!/mouse|pointer/.test(l.pointerType)||0!=(C&w.mouseButtons))){if(O.default.object(w.edges)){var x={left:!1,right:!1,top:!1,bottom:!1};for(var j in x)x[j]=ot(j,w.edges[j],T,l._latestPointer.eventTarget,f,g,w.margin||Ae.defaultMargin);x.left=x.left&&!x.right,x.top=x.top&&!x.bottom,(x.left||x.right||x.top||x.bottom)&&(c.action={name:"resize",edges:x})}else{var $="y"!==w.axis&&T.x>g.right-Ae.defaultMargin,Y="x"!==w.axis&&T.y>g.bottom-Ae.defaultMargin;($||Y)&&(c.action={name:"resize",axes:($?"x":"")+(Y?"y":"")})}return!c.action&&void 0}}}},defaults:{square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},cursors:null,getCursor:function(c){var l=c.edges,d=c.axis,g=Ae.cursors,C=null;if(d)C=g[c.name+d];else if(l){for(var T="",w=["top","bottom","left","right"],x=0;x<w.length;x++){var j=w[x];l[j]&&(T+=j)}C=g[T]}return C},defaultMargin:null};ks.default=Ae;var Fs={};Object.defineProperty(Fs,"__esModule",{value:!0}),Fs.default=void 0,Fs.default={id:"actions",install:function(c){c.usePlugin(Os.default),c.usePlugin(ks.default),c.usePlugin(B.default),c.usePlugin(ho.default)}};var be={};Object.defineProperty(be,"__esModule",{value:!0}),be.default=void 0;var mr,po,si=0;be.default={request:function(c){return mr(c)},cancel:function(c){return po(c)},init:function(c){if(po=c.cancelAnimationFrame,!(mr=c.requestAnimationFrame))for(var l=["ms","moz","webkit","o"],d=0;d<l.length;d++){var f=l[d];mr=c["".concat(f,"RequestAnimationFrame")],po=c["".concat(f,"CancelAnimationFrame")]||c["".concat(f,"CancelRequestAnimationFrame")]}mr=mr&&mr.bind(c),po=po&&po.bind(c),mr||(mr=function(g){var C=Date.now(),T=Math.max(0,16-(C-si)),w=c.setTimeout(function(){g(C+T)},T);return si=C+T,w},po=function(g){return clearTimeout(g)})}};var yr={};Object.defineProperty(yr,"__esModule",{value:!0}),yr.getContainer=Yt,yr.getScroll=Ho,yr.getScrollSize=function(c){return O.default.window(c)&&(c=window.document.body),{x:c.scrollWidth,y:c.scrollHeight}},yr.getScrollSizeDelta=function(c,l){var d=c.interaction,f=c.element,g=d&&d.interactable.options[d.prepared.name].autoScroll;if(!g||!g.enabled)return l(),{x:0,y:0};var C=Yt(g.container,d.interactable,f),T=Ho(C);l();var w=Ho(C);return{x:w.x-T.x,y:w.y-T.y}},yr.default=void 0;var fe={defaults:{enabled:!1,margin:60,container:null,speed:300},now:Date.now,interaction:null,i:0,x:0,y:0,isScrolling:!1,prevTime:0,margin:0,speed:0,start:function(c){fe.isScrolling=!0,be.default.cancel(fe.i),c.autoScroll=fe,fe.interaction=c,fe.prevTime=fe.now(),fe.i=be.default.request(fe.scroll)},stop:function(){fe.isScrolling=!1,fe.interaction&&(fe.interaction.autoScroll=null),be.default.cancel(fe.i)},scroll:function(){var c=fe.interaction,l=c.interactable,d=c.element,g=l.options[c.prepared.name].autoScroll,C=Yt(g.container,l,d),T=fe.now(),x=g.speed*((T-fe.prevTime)/1e3);if(x>=1){var j={x:fe.x*x,y:fe.y*x};if(j.x||j.y){var $=Ho(C);O.default.window(C)?C.scrollBy(j.x,j.y):C&&(C.scrollLeft+=j.x,C.scrollTop+=j.y);var Y=Ho(C),ne={x:Y.x-$.x,y:Y.y-$.y};(ne.x||ne.y)&&l.fire({type:"autoscroll",target:d,interactable:l,delta:ne,interaction:c,container:C})}fe.prevTime=T}fe.isScrolling&&(be.default.cancel(fe.i),fe.i=be.default.request(fe.scroll))},check:function(c,l){var d;return null==(d=c.options[l].autoScroll)?void 0:d.enabled},onInteractionMove:function(c){var l=c.interaction,d=c.pointer;if(l.interacting()&&fe.check(l.interactable,l.prepared.name))if(l.simulation)fe.x=fe.y=0;else{var f,g,C,T,w=l.interactable,$=w.options[l.prepared.name].autoScroll,Y=Yt($.container,w,l.element);if(O.default.window(Y))T=d.clientX<fe.margin,f=d.clientY<fe.margin,g=d.clientX>Y.innerWidth-fe.margin,C=d.clientY>Y.innerHeight-fe.margin;else{var ne=b.getElementClientRect(Y);T=d.clientX<ne.left+fe.margin,f=d.clientY<ne.top+fe.margin,g=d.clientX>ne.right-fe.margin,C=d.clientY>ne.bottom-fe.margin}fe.x=g?1:T?-1:0,fe.y=C?1:f?-1:0,fe.isScrolling||(fe.margin=$.margin,fe.speed=$.speed,fe.start(l))}}};function Yt(c,l,d){return(O.default.string(c)?(0,oe.getStringOptionResult)(c,l,d):c)||(0,Fe.getWindow)(d)}function Ho(c){return O.default.window(c)&&(c=window.document.body),{x:c.scrollLeft,y:c.scrollTop}}yr.default={id:"auto-scroll",install:function(c){var l=c.defaults,d=c.actions;c.autoScroll=fe,fe.now=function(){return c.now()},d.phaselessTypes.autoscroll=!0,l.perAction.autoScroll=fe.defaults},listeners:{"interactions:new":function(c){c.interaction.autoScroll=null},"interactions:destroy":function(c){c.interaction.autoScroll=null,fe.stop(),fe.interaction&&(fe.interaction=null)},"interactions:stop":fe.stop,"interactions:action-move":function(c){return fe.onInteractionMove(c)}}};var zn={};Object.defineProperty(zn,"__esModule",{value:!0}),zn.warnOnce=function(c,l){var d=!1;return function(){return d||(Fe.window.console.warn(l),d=!0),c.apply(this,arguments)}},zn.copyAction=function(c,l){return c.name=l.name,c.axis=l.axis,c.edges=l.edges,c},zn.sign=void 0,zn.sign=function(c){return c>=0?1:-1};var Oi={};function An(c){return O.default.bool(c)?(this.options.styleCursor=c,this):null===c?(delete this.options.styleCursor,this):this.options.styleCursor}function sy(c){return O.default.func(c)?(this.options.actionChecker=c,this):null===c?(delete this.options.actionChecker,this):this.options.actionChecker}Object.defineProperty(Oi,"__esModule",{value:!0}),Oi.default=void 0,Oi.default={id:"auto-start/interactableMethods",install:function(c){var l=c.Interactable;l.prototype.getAction=function(d,f,g,C){var w,x,j,$,Y,ne,ie,T=(x=f,j=g,Y=c,ne=(w=this).getRect($=C),Y.fire("auto-start:check",ie={action:null,interactable:w,interaction:j,element:$,rect:ne,buttons:x.buttons||{0:1,1:4,3:8,4:16}[x.button]}),ie.action);return this.options.actionChecker?this.options.actionChecker(d,f,T,this,C,g):T},l.prototype.ignoreFrom=(0,zn.warnOnce)(function(d){return this._backCompatOption("ignoreFrom",d)},"Interactable.ignoreFrom() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),l.prototype.allowFrom=(0,zn.warnOnce)(function(d){return this._backCompatOption("allowFrom",d)},"Interactable.allowFrom() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),l.prototype.actionChecker=sy,l.prototype.styleCursor=An}};var $o={};function vr(c,l,d,f,g){return l.testIgnoreAllow(l.options[c.name],d,f)&&l.options[c.name].enabled&&dc(l,d,c,g)?c:null}function ay(c,l,d,f,g,C,T){for(var w=0,x=f.length;w<x;w++){var j=f[w],$=g[w],Y=j.getAction(l,d,c,$);if(Y){var ne=vr(Y,j,$,C,T);if(ne)return{action:ne,interactable:j,element:$}}}return{action:null,interactable:null,element:null}}function Nf(c,l,d,f,g){var C=[],T=[],w=f;function x($){C.push($),T.push(w)}for(;O.default.element(w);){C=[],T=[],g.interactables.forEachMatch(w,x);var j=ay(c,l,d,C,T,f,g);if(j.action&&!j.interactable.options[j.action.name].manualStart)return j;w=b.parentNode(w)}return{action:null,interactable:null,element:null}}function Ff(c,l,d){var f=l.action,g=l.interactable,C=l.element;f=f||{name:null},c.interactable=g,c.element=C,(0,zn.copyAction)(c.prepared,f),c.rect=g&&f.name?g.getRect(C):null,Kl(c,d),d.fire("autoStart:prepared",{interaction:c})}function dc(c,l,d,f){var g=c.options,C=g[d.name].max,T=g[d.name].maxPerElement,w=f.autoStart.maxInteractions,x=0,j=0,$=0;if(!(C&&T&&w))return!1;for(var Y=0;Y<f.interactions.list.length;Y++){var ne=f.interactions.list[Y],ie=ne.prepared.name;if(ne.interacting()&&(++x>=w||ne.interactable===c&&((j+=ie===d.name?1:0)>=C||ne.element===l&&($++,ie===d.name&&$>=T))))return!1}return w>0}function Yl(c,l){return O.default.number(c)?(l.autoStart.maxInteractions=c,this):l.autoStart.maxInteractions}function Ql(c,l,d){var f=d.autoStart.cursorElement;f&&f!==c&&(f.style.cursor=""),c.ownerDocument.documentElement.style.cursor=l,c.style.cursor=l,d.autoStart.cursorElement=l?c:null}function Kl(c,l){var d=c.interactable,f=c.element,g=c.prepared;if("mouse"===c.pointerType&&d&&d.options.styleCursor){var C="";if(g.name){var T=d.options[g.name].cursorChecker;C=O.default.func(T)?T(g,d,f,c._interacting):l.actions.map[g.name].getCursor(g)}Ql(c.element,C||"",l)}else l.autoStart.cursorElement&&Ql(l.autoStart.cursorElement,"",l)}Object.defineProperty($o,"__esModule",{value:!0}),$o.default=void 0,$o.default={id:"auto-start/base",before:["actions"],install:function(c){var l=c.interactStatic,d=c.defaults;c.usePlugin(Oi.default),d.base.actionChecker=null,d.base.styleCursor=!0,(0,z.default)(d.perAction,{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}),l.maxInteractions=function(f){return Yl(f,c)},c.autoStart={maxInteractions:1/0,withinInteractionLimit:dc,cursorElement:null}},listeners:{"interactions:down":function(c,l){var d=c.interaction,f=c.pointer,g=c.event,C=c.eventTarget;d.interacting()||Ff(d,Nf(d,f,g,C,l),l)},"interactions:move":function(c,l){var d,f,g,C,T,w;f=l,C=(d=c).pointer,T=d.event,w=d.eventTarget,"mouse"!==(g=d.interaction).pointerType||g.pointerIsDown||g.interacting()||Ff(g,Nf(g,C,T,w,f),f),function(d,f){var g=d.interaction;if(g.pointerIsDown&&!g.interacting()&&g.pointerWasMoved&&g.prepared.name){f.fire("autoStart:before-start",d);var C=g.interactable,T=g.prepared.name;T&&C&&(C.options[T].manualStart||!dc(C,g.element,g.prepared,f)?g.stop():(g.start(g.prepared,C,g.element),Kl(g,f)))}}(c,l)},"interactions:stop":function(c,l){var d=c.interaction,f=d.interactable;f&&f.options.styleCursor&&Ql(d.element,"",l)}},maxInteractions:Yl,withinInteractionLimit:dc,validateAction:vr};var cn={};Object.defineProperty(cn,"__esModule",{value:!0}),cn.default=void 0,cn.default={id:"auto-start/dragAxis",listeners:{"autoStart:before-start":function(c,l){var d=c.interaction,f=c.eventTarget,C=c.dy;if("drag"===d.prepared.name){var T=Math.abs(c.dx),w=Math.abs(C),x=d.interactable.options.drag,j=x.startAxis,$=T>w?"x":T<w?"y":"xy";if(d.prepared.axis="start"===x.lockAxis?$[0]:x.lockAxis,"xy"!==$&&"xy"!==j&&j!==$){d.prepared.name=null;for(var Y=f,ne=function(te){if(te!==d.interactable){var ue=d.interactable.options.drag;if(!ue.manualStart&&te.testIgnoreAllow(ue,Y,f)){var ge=te.getAction(d.downPointer,d.downEvent,d,Y);if(ge&&"drag"===ge.name&&function(de,Ee){if(!Ee)return!1;var xe=Ee.options.drag.startAxis;return"xy"===de||"xy"===xe||xe===de}($,te)&&$o.default.validateAction(ge,te,Y,f,l))return te}}};O.default.element(Y);){var ie=l.interactables.forEachMatch(Y,ne);if(ie){d.prepared.name="drag",d.interactable=ie,d.element=Y;break}Y=(0,b.parentNode)(Y)}}}}}};var fc={};function Jl(c){var l=c.prepared&&c.prepared.name;if(!l)return null;var d=c.interactable.options;return d[l].hold||d[l].delay}Object.defineProperty(fc,"__esModule",{value:!0}),fc.default=void 0,fc.default={id:"auto-start/hold",install:function(c){var l=c.defaults;c.usePlugin($o.default),l.perAction.hold=0,l.perAction.delay=0},listeners:{"interactions:new":function(c){c.interaction.autoStartHoldTimer=null},"autoStart:prepared":function(c){var l=c.interaction,d=Jl(l);d>0&&(l.autoStartHoldTimer=setTimeout(function(){l.start(l.prepared,l.interactable,l.element)},d))},"interactions:move":function(c){var l=c.interaction;l.autoStartHoldTimer&&l.pointerWasMoved&&!c.duplicate&&(clearTimeout(l.autoStartHoldTimer),l.autoStartHoldTimer=null)},"autoStart:before-start":function(c){var l=c.interaction;Jl(l)>0&&(l.prepared.name=null)}},getHoldDuration:Jl};var Se={};Object.defineProperty(Se,"__esModule",{value:!0}),Se.default=void 0,Se.default={id:"auto-start",install:function(c){c.usePlugin($o.default),c.usePlugin(fc.default),c.usePlugin(cn.default)}};var Lt={};function kr(c){return/^(always|never|auto)$/.test(c)?(this.options.preventDefault=c,this):O.default.bool(c)?(this.options.preventDefault=c?"always":"never",this):this.options.preventDefault}function Xl(c){var l=c.interaction;l.interactable&&l.interactable.checkAndPreventDefault(c.event)}function Zl(c){var l=c.Interactable;l.prototype.preventDefault=kr,l.prototype.checkAndPreventDefault=function(d){return function(f,g,C){var T=f.options.preventDefault;if("never"!==T)if("always"!==T){if(g.events.supportsPassive&&/^touch(start|move)$/.test(C.type)){var w=(0,Fe.getWindow)(C.target).document,x=g.getDocOptions(w);if(!x||!x.events||!1!==x.events.passive)return}/^(mouse|pointer|touch)*(down|start)/i.test(C.type)||O.default.element(C.target)&&(0,b.matchesSelector)(C.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||C.preventDefault()}else C.preventDefault()}(this,c,d)},c.interactions.docEvents.push({type:"dragstart",listener:function(d){for(var f=0;f<c.interactions.list.length;f++){var g=c.interactions.list[f];if(g.element&&(g.element===d.target||(0,b.nodeContains)(g.element,d.target)))return void g.interactable.checkAndPreventDefault(d)}}})}Object.defineProperty(Lt,"__esModule",{value:!0}),Lt.install=Zl,Lt.default=void 0;var Lf={id:"core/interactablePreventDefault",install:Zl,listeners:["down","move","up","cancel"].reduce(function(c,l){return c["interactions:".concat(l)]=Xl,c},{})};Lt.default=Lf;var Ls={};Object.defineProperty(Ls,"__esModule",{value:!0}),Ls.default=void 0,Ls.default={};var ai,c,zo={};Object.defineProperty(zo,"__esModule",{value:!0}),zo.default=void 0,(c=ai||(ai={})).touchAction="touchAction",c.boxSizing="boxSizing",c.noListeners="noListeners",zo.default={id:"dev-tools",install:function(){}};var ki={};Object.defineProperty(ki,"__esModule",{value:!0}),ki.default=function c(l){var d={};for(var f in l){var g=l[f];d[f]=O.default.plainObject(g)?c(g):O.default.array(g)?Je.from(g):g}return d};var Te={};function Vs(c,l){return function(d){if(Array.isArray(d))return d}(c)||function(d,f){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(d)){var g=[],C=!0,T=!1,w=void 0;try{for(var x,j=d[Symbol.iterator]();!(C=(x=j.next()).done)&&(g.push(x.value),!f||g.length!==f);C=!0);}catch($){T=!0,w=$}finally{try{C||null==j.return||j.return()}finally{if(T)throw w}}return g}}(c,l)||function(d,f){if(d){if("string"==typeof d)return tu(d,f);var g=Object.prototype.toString.call(d).slice(8,-1);return"Object"===g&&d.constructor&&(g=d.constructor.name),"Map"===g||"Set"===g?Array.from(d):"Arguments"===g||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g)?tu(d,f):void 0}}(c,l)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tu(c,l){(null==l||l>c.length)&&(l=c.length);for(var d=0,f=Array(l);d<l;d++)f[d]=c[d];return f}function li(c,l,d){return l in c?Object.defineProperty(c,l,{value:d,enumerable:!0,configurable:!0,writable:!0}):c[l]=d,c}Object.defineProperty(Te,"__esModule",{value:!0}),Te.getRectOffset=On,Te.default=void 0;var dy=function(){function c(f){(function(g,C){if(!(g instanceof C))throw new TypeError("Cannot call a class as a function")})(this,c),li(this,"states",[]),li(this,"startOffset",{left:0,right:0,top:0,bottom:0}),li(this,"startDelta",void 0),li(this,"result",void 0),li(this,"endResult",void 0),li(this,"edges",void 0),li(this,"interaction",void 0),this.interaction=f,this.result=er()}var d;return(d=[{key:"start",value:function(f,g){var j,$,Y,C=f.phase,T=this.interaction,w=(Y=($=(j=T).interactable.options[j.prepared.name]).modifiers)&&Y.length?Y:["snap","snapSize","snapEdges","restrict","restrictEdges","restrictSize"].map(function(ne){var ie=$[ne];return ie&&ie.enabled&&{options:ie,methods:ie._methods}}).filter(function(ne){return!!ne});this.prepareStates(w),this.edges=(0,z.default)({},T.edges),this.startOffset=On(T.rect,g),this.startDelta={x:0,y:0};var x=this.fillArg({phase:C,pageCoords:g,preEnd:!1});return this.result=er(),this.startAll(x),this.result=this.setAll(x)}},{key:"fillArg",value:function(f){var g=this.interaction;return f.interaction=g,f.interactable=g.interactable,f.element=g.element,f.rect=f.rect||g.rect,f.edges=this.edges,f.startOffset=this.startOffset,f}},{key:"startAll",value:function(f){for(var g=0;g<this.states.length;g++){var C=this.states[g];C.methods.start&&(f.state=C,C.methods.start(f))}}},{key:"setAll",value:function(f){var g=f.phase,C=f.preEnd,T=f.skipModifiers,w=f.rect;f.coords=(0,z.default)({},f.pageCoords),f.rect=(0,z.default)({},w);for(var x=T?this.states.slice(T):this.states,j=er(f.coords,f.rect),$=0;$<x.length;$++){var Y,ne=x[$],ie=ne.options,te=(0,z.default)({},f.coords),ue=null;null!=(Y=ne.methods)&&Y.set&&this.shouldDo(ie,C,g)&&(f.state=ne,ue=ne.methods.set(f),oe.addEdges(this.interaction.edges,f.rect,{x:f.coords.x-te.x,y:f.coords.y-te.y})),j.eventProps.push(ue)}j.delta.x=f.coords.x-f.pageCoords.x,j.delta.y=f.coords.y-f.pageCoords.y,j.rectDelta.left=f.rect.left-w.left,j.rectDelta.right=f.rect.right-w.right,j.rectDelta.top=f.rect.top-w.top,j.rectDelta.bottom=f.rect.bottom-w.bottom;var ge=this.result.coords,de=this.result.rect;return ge&&de&&(j.changed=j.rect.left!==de.left||j.rect.right!==de.right||j.rect.top!==de.top||j.rect.bottom!==de.bottom||ge.x!==j.coords.x||ge.y!==j.coords.y),j}},{key:"applyToInteraction",value:function(f){var g=this.interaction,T=g.coords.cur,w=g.coords.start,x=this.result,j=this.startDelta,$=x.delta;"start"===f.phase&&(0,z.default)(this.startDelta,x.delta);for(var Y=0;Y<[[w,j],[T,$]].length;Y++){var ne=Vs([[w,j],[T,$]][Y],2),ie=ne[0],te=ne[1];ie.page.x+=te.x,ie.page.y+=te.y,ie.client.x+=te.x,ie.client.y+=te.y}var ue=this.result.rectDelta,ge=f.rect||g.rect;ge.left+=ue.left,ge.right+=ue.right,ge.top+=ue.top,ge.bottom+=ue.bottom,ge.width=ge.right-ge.left,ge.height=ge.bottom-ge.top}},{key:"setAndApply",value:function(f){var g=this.interaction,w=f.skipModifiers,x=this.setAll(this.fillArg({preEnd:f.preEnd,phase:f.phase,pageCoords:f.modifiedCoords||g.coords.cur.page}));if(this.result=x,!x.changed&&(!w||w<this.states.length)&&g.interacting())return!1;if(f.modifiedCoords){var j=g.coords.cur.page,$={x:f.modifiedCoords.x-j.x,y:f.modifiedCoords.y-j.y};x.coords.x+=$.x,x.coords.y+=$.y,x.delta.x+=$.x,x.delta.y+=$.y}this.applyToInteraction(f)}},{key:"beforeEnd",value:function(f){var g=f.interaction,C=f.event,T=this.states;if(T&&T.length){for(var w=!1,x=0;x<T.length;x++){var j=T[x];f.state=j;var $=j.options,Y=j.methods,ne=Y.beforeEnd&&Y.beforeEnd(f);if(ne)return this.endResult=ne,!1;w=w||!w&&this.shouldDo($,!0,f.phase,!0)}w&&g.move({event:C,preEnd:!0})}}},{key:"stop",value:function(f){var g=f.interaction;if(this.states&&this.states.length){var C=(0,z.default)({states:this.states,interactable:g.interactable,element:g.element,rect:null},f);this.fillArg(C);for(var T=0;T<this.states.length;T++){var w=this.states[T];C.state=w,w.methods.stop&&w.methods.stop(C)}this.states=null,this.endResult=null}}},{key:"prepareStates",value:function(f){this.states=[];for(var g=0;g<f.length;g++){var C=f[g];this.states.push({options:C.options,methods:C.methods,index:g,name:C.name})}return this.states}},{key:"restoreInteractionCoords",value:function(f){var g=f.interaction,C=g.coords,T=g.rect,w=g.modification;if(w.result){for(var j=w.result,Y=j.rectDelta,ne=[[C.start,w.startDelta],[C.cur,j.delta]],ie=0;ie<ne.length;ie++){var te=Vs(ne[ie],2),ue=te[0],ge=te[1];ue.page.x-=ge.x,ue.page.y-=ge.y,ue.client.x-=ge.x,ue.client.y-=ge.y}T.left-=Y.left,T.right-=Y.right,T.top-=Y.top,T.bottom-=Y.bottom}}},{key:"shouldDo",value:function(f,g,C,T){return!(!f||!1===f.enabled||T&&!f.endOnly||f.endOnly&&!g||"start"===C&&!f.setStart)}},{key:"copyFrom",value:function(f){this.startOffset=f.startOffset,this.startDelta=f.startDelta,this.edges=f.edges,this.states=f.states.map(function(g){return(0,ki.default)(g)}),this.result=er((0,z.default)({},f.result.coords),(0,z.default)({},f.result.rect))}},{key:"destroy",value:function(){for(var f in this)this[f]=null}}])&&function(c,l){for(var d=0;d<l.length;d++){var f=l[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}(c.prototype,d),c}();function er(c,l){return{rect:l,coords:c,delta:{x:0,y:0},rectDelta:{left:0,right:0,top:0,bottom:0},eventProps:[],changed:!0}}function On(c,l){return c?{left:l.x-c.left,top:l.y-c.top,right:c.right-l.x,bottom:c.bottom-l.y}:{left:0,top:0,right:0,bottom:0}}Te.default=dy;var ln={};function hc(c){var d=c.interaction.modification.result;d&&(c.iEvent.modifiers=d.eventProps)}Object.defineProperty(ln,"__esModule",{value:!0}),ln.makeModifier=function(c,l){var d=c.defaults,f={start:c.start,set:c.set,beforeEnd:c.beforeEnd,stop:c.stop},g=function(C){var T=C||{};for(var w in T.enabled=!1!==T.enabled,d)w in T||(T[w]=d[w]);var x={options:T,methods:f,name:l,enable:function(){return T.enabled=!0,x},disable:function(){return T.enabled=!1,x}};return x};return l&&"string"==typeof l&&(g._defaults=d,g._methods=f),g},ln.addEventModifiers=hc,ln.default=void 0,ln.default={id:"modifiers/base",before:["actions"],install:function(c){c.defaults.perAction.modifiers=[]},listeners:{"interactions:new":function(c){var l=c.interaction;l.modification=new Te.default(l)},"interactions:before-action-start":function(c){var l=c.interaction.modification;l.start(c,c.interaction.coords.start.page),c.interaction.edges=l.edges,l.applyToInteraction(c)},"interactions:before-action-move":function(c){return c.interaction.modification.setAndApply(c)},"interactions:before-action-end":function(c){return c.interaction.modification.beforeEnd(c)},"interactions:action-start":hc,"interactions:action-move":hc,"interactions:action-end":hc,"interactions:after-action-start":function(c){return c.interaction.modification.restoreInteractionCoords(c)},"interactions:after-action-move":function(c){return c.interaction.modification.restoreInteractionCoords(c)},"interactions:stop":function(c){return c.interaction.modification.stop(c)}}};var Go={};Object.defineProperty(Go,"__esModule",{value:!0}),Go.defaults=void 0,Go.defaults={base:{preventDefault:"auto",deltaSource:"page"},perAction:{enabled:!1,origin:{x:0,y:0}},actions:{}};var Wo={};function nu(c){return(nu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(l){return typeof l}:function(l){return l&&"function"==typeof Symbol&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(c)}function st(c,l){return(st=Object.setPrototypeOf||function(d,f){return d.__proto__=f,d})(c,l)}function hy(c,l){return!l||"object"!==nu(l)&&"function"!=typeof l?lt(c):l}function lt(c){if(void 0===c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function ui(c){return(ui=Object.setPrototypeOf?Object.getPrototypeOf:function(l){return l.__proto__||Object.getPrototypeOf(l)})(c)}function Pe(c,l,d){return l in c?Object.defineProperty(c,l,{value:d,enumerable:!0,configurable:!0,writable:!0}):c[l]=d,c}Object.defineProperty(Wo,"__esModule",{value:!0}),Wo.InteractEvent=void 0;var qo=function(c){!function(w,x){if("function"!=typeof x&&null!==x)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(x&&x.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),x&&st(w,x)}(T,c);var d,f,g,C=(f=T,g=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(w){return!1}}(),function(){var w,x=ui(f);if(g){var j=ui(this).constructor;w=Reflect.construct(x,arguments,j)}else w=x.apply(this,arguments);return hy(this,w)});function T(w,x,j,$,Y,ne,ie){var te;(function(at,Qe){if(!(at instanceof Qe))throw new TypeError("Cannot call a class as a function")})(this,T),Pe(lt(te=C.call(this,w)),"target",void 0),Pe(lt(te),"currentTarget",void 0),Pe(lt(te),"relatedTarget",null),Pe(lt(te),"screenX",void 0),Pe(lt(te),"screenY",void 0),Pe(lt(te),"button",void 0),Pe(lt(te),"buttons",void 0),Pe(lt(te),"ctrlKey",void 0),Pe(lt(te),"shiftKey",void 0),Pe(lt(te),"altKey",void 0),Pe(lt(te),"metaKey",void 0),Pe(lt(te),"page",void 0),Pe(lt(te),"client",void 0),Pe(lt(te),"delta",void 0),Pe(lt(te),"rect",void 0),Pe(lt(te),"x0",void 0),Pe(lt(te),"y0",void 0),Pe(lt(te),"t0",void 0),Pe(lt(te),"dt",void 0),Pe(lt(te),"duration",void 0),Pe(lt(te),"clientX0",void 0),Pe(lt(te),"clientY0",void 0),Pe(lt(te),"velocity",void 0),Pe(lt(te),"speed",void 0),Pe(lt(te),"swipe",void 0),Pe(lt(te),"timeStamp",void 0),Pe(lt(te),"axes",void 0),Pe(lt(te),"preEnd",void 0);var ue=w.interactable,ge=(ue&&ue.options||Go.defaults).deltaSource,de=(0,De.default)(ue,Y=Y||w.element,j),Ee="start"===$,xe="end"===$,Le=Ee?lt(te):w.prevEvent,it=Ee?w.coords.start:xe?{page:Le.page,client:Le.client,timeStamp:w.coords.cur.timeStamp}:w.coords.cur;return te.page=(0,z.default)({},it.page),te.client=(0,z.default)({},it.client),te.rect=(0,z.default)({},w.rect),te.timeStamp=it.timeStamp,xe||(te.page.x-=de.x,te.page.y-=de.y,te.client.x-=de.x,te.client.y-=de.y),te.ctrlKey=x.ctrlKey,te.altKey=x.altKey,te.shiftKey=x.shiftKey,te.metaKey=x.metaKey,te.button=x.button,te.buttons=x.buttons,te.target=Y,te.currentTarget=Y,te.preEnd=ne,te.type=ie||j+($||""),te.interactable=ue,te.t0=Ee?w.pointers[w.pointers.length-1].downTime:Le.t0,te.x0=w.coords.start.page.x-de.x,te.y0=w.coords.start.page.y-de.y,te.clientX0=w.coords.start.client.x-de.x,te.clientY0=w.coords.start.client.y-de.y,te.delta=Ee||xe?{x:0,y:0}:{x:te[ge].x-Le[ge].x,y:te[ge].y-Le[ge].y},te.dt=w.coords.delta.timeStamp,te.duration=te.timeStamp-te.t0,te.velocity=(0,z.default)({},w.coords.velocity[ge]),te.speed=(0,Jn.default)(te.velocity.x,te.velocity.y),te.swipe=xe||"inertiastart"===$?te.getSwipe():null,te}return(d=[{key:"getSwipe",value:function(){var w=this._interaction;if(w.prevEvent.speed<600||this.timeStamp-w.prevEvent.timeStamp>150)return null;var x=180*Math.atan2(w.prevEvent.velocityY,w.prevEvent.velocityX)/Math.PI;x<0&&(x+=360);var j=112.5<=x&&x<247.5,$=202.5<=x&&x<337.5;return{up:$,down:!$&&22.5<=x&&x<157.5,left:j,right:!j&&(292.5<=x||x<67.5),angle:x,speed:w.prevEvent.speed,velocity:{x:w.prevEvent.velocityX,y:w.prevEvent.velocityY}}}},{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}])&&function(c,l){for(var d=0;d<l.length;d++){var f=l[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}(T.prototype,d),T}(Xn.BaseEvent);Wo.InteractEvent=qo,Object.defineProperties(qo.prototype,{pageX:{get:function(){return this.page.x},set:function(c){this.page.x=c}},pageY:{get:function(){return this.page.y},set:function(c){this.page.y=c}},clientX:{get:function(){return this.client.x},set:function(c){this.client.x=c}},clientY:{get:function(){return this.client.y},set:function(c){this.client.y=c}},dx:{get:function(){return this.delta.x},set:function(c){this.delta.x=c}},dy:{get:function(){return this.delta.y},set:function(c){this.delta.y=c}},velocityX:{get:function(){return this.velocity.x},set:function(c){this.velocity.x=c}},velocityY:{get:function(){return this.velocity.y},set:function(c){this.velocity.y=c}}});var Ni={};function Fi(c,l,d){return l in c?Object.defineProperty(c,l,{value:d,enumerable:!0,configurable:!0,writable:!0}):c[l]=d,c}Object.defineProperty(Ni,"__esModule",{value:!0}),Ni.PointerInfo=void 0,Ni.PointerInfo=function c(l,d,f,g,C){(function(T,w){if(!(T instanceof w))throw new TypeError("Cannot call a class as a function")})(this,c),Fi(this,"id",void 0),Fi(this,"pointer",void 0),Fi(this,"event",void 0),Fi(this,"downTime",void 0),Fi(this,"downTarget",void 0),this.id=l,this.pointer=d,this.event=f,this.downTime=g,this.downTarget=C};var Yo,js,Mt={};function Tt(c,l,d){return l in c?Object.defineProperty(c,l,{value:d,enumerable:!0,configurable:!0,writable:!0}):c[l]=d,c}Object.defineProperty(Mt,"__esModule",{value:!0}),Object.defineProperty(Mt,"PointerInfo",{enumerable:!0,get:function(){return Ni.PointerInfo}}),Mt.default=Mt.Interaction=Mt._ProxyMethods=Mt._ProxyValues=void 0,Mt._ProxyValues=Yo,function(c){c.interactable="",c.element="",c.prepared="",c.pointerIsDown="",c.pointerWasMoved="",c._proxy=""}(Yo||(Mt._ProxyValues=Yo={})),Mt._ProxyMethods=js,function(c){c.start="",c.move="",c.end="",c.stop="",c.interacting=""}(js||(Mt._ProxyMethods=js={}));var tr=0,ru=function(){function c(f){var g=this,C=f.pointerType,T=f.scopeFire;(function(ne,ie){if(!(ne instanceof ie))throw new TypeError("Cannot call a class as a function")})(this,c),Tt(this,"interactable",null),Tt(this,"element",null),Tt(this,"rect",void 0),Tt(this,"_rects",void 0),Tt(this,"edges",void 0),Tt(this,"_scopeFire",void 0),Tt(this,"prepared",{name:null,axis:null,edges:null}),Tt(this,"pointerType",void 0),Tt(this,"pointers",[]),Tt(this,"downEvent",null),Tt(this,"downPointer",{}),Tt(this,"_latestPointer",{pointer:null,event:null,eventTarget:null}),Tt(this,"prevEvent",null),Tt(this,"pointerIsDown",!1),Tt(this,"pointerWasMoved",!1),Tt(this,"_interacting",!1),Tt(this,"_ending",!1),Tt(this,"_stopped",!0),Tt(this,"_proxy",null),Tt(this,"simulation",null),Tt(this,"doMove",(0,zn.warnOnce)(function(ne){this.move(ne)},"The interaction.doMove() method has been renamed to interaction.move()")),Tt(this,"coords",{start:Ce.newCoords(),prev:Ce.newCoords(),cur:Ce.newCoords(),delta:Ce.newCoords(),velocity:Ce.newCoords()}),Tt(this,"_id",tr++),this._scopeFire=T,this.pointerType=C;var w=this;this._proxy={};var x=function(ne){Object.defineProperty(g._proxy,ne,{get:function(){return w[ne]}})};for(var j in Yo)x(j);var $=function(ne){Object.defineProperty(g._proxy,ne,{value:function(){return w[ne].apply(w,arguments)}})};for(var Y in js)$(Y);this._scopeFire("interactions:new",{interaction:this})}var d;return(d=[{key:"pointerMoveTolerance",get:function(){return 1}},{key:"pointerDown",value:function(f,g,C){var T=this.updatePointer(f,g,C,!0);this._scopeFire("interactions:down",{pointer:f,event:g,eventTarget:C,pointerIndex:T,pointerInfo:this.pointers[T],type:"down",interaction:this})}},{key:"start",value:function(f,g,C){return!(this.interacting()||!this.pointerIsDown||this.pointers.length<("gesture"===f.name?2:1)||!g.options[f.name].enabled)&&((0,zn.copyAction)(this.prepared,f),this.interactable=g,this.element=C,this.rect=g.getRect(C),this.edges=this.prepared.edges?(0,z.default)({},this.prepared.edges):{left:!0,right:!0,top:!0,bottom:!0},this._stopped=!1,this._interacting=this._doPhase({interaction:this,event:this.downEvent,phase:"start"})&&!this._stopped,this._interacting)}},{key:"pointerMove",value:function(f,g,C){this.simulation||this.modification&&this.modification.endResult||this.updatePointer(f,g,C,!1);var T,w,x=this.coords.cur.page.x===this.coords.prev.page.x&&this.coords.cur.page.y===this.coords.prev.page.y&&this.coords.cur.client.x===this.coords.prev.client.x&&this.coords.cur.client.y===this.coords.prev.client.y;this.pointerIsDown&&!this.pointerWasMoved&&(this.pointerWasMoved=(0,Jn.default)(T=this.coords.cur.client.x-this.coords.start.client.x,w=this.coords.cur.client.y-this.coords.start.client.y)>this.pointerMoveTolerance);var j=this.getPointerIndex(f),$={pointer:f,pointerIndex:j,pointerInfo:this.pointers[j],event:g,type:"move",eventTarget:C,dx:T,dy:w,duplicate:x,interaction:this};x||Ce.setCoordVelocity(this.coords.velocity,this.coords.delta),this._scopeFire("interactions:move",$),x||this.simulation||(this.interacting()&&($.type=null,this.move($)),this.pointerWasMoved&&Ce.copyCoords(this.coords.prev,this.coords.cur))}},{key:"move",value:function(f){f&&f.event||Ce.setZeroCoords(this.coords.delta),(f=(0,z.default)({pointer:this._latestPointer.pointer,event:this._latestPointer.event,eventTarget:this._latestPointer.eventTarget,interaction:this},f||{})).phase="move",this._doPhase(f)}},{key:"pointerUp",value:function(f,g,C,T){var w=this.getPointerIndex(f);-1===w&&(w=this.updatePointer(f,g,C,!1));var x=/cancel$/i.test(g.type)?"cancel":"up";this._scopeFire("interactions:".concat(x),{pointer:f,pointerIndex:w,pointerInfo:this.pointers[w],event:g,eventTarget:C,type:x,curEventTarget:T,interaction:this}),this.simulation||this.end(g),this.removePointer(f,g)}},{key:"documentBlur",value:function(f){this.end(f),this._scopeFire("interactions:blur",{event:f,type:"blur",interaction:this})}},{key:"end",value:function(f){var g;this._ending=!0,f=f||this._latestPointer.event,this.interacting()&&(g=this._doPhase({event:f,interaction:this,phase:"end"})),this._ending=!1,!0===g&&this.stop()}},{key:"currentAction",value:function(){return this._interacting?this.prepared.name:null}},{key:"interacting",value:function(){return this._interacting}},{key:"stop",value:function(){this._scopeFire("interactions:stop",{interaction:this}),this.interactable=this.element=null,this._interacting=!1,this._stopped=!0,this.prepared.name=this.prevEvent=null}},{key:"getPointerIndex",value:function(f){var g=Ce.getPointerId(f);return"mouse"===this.pointerType||"pen"===this.pointerType?this.pointers.length-1:Je.findIndex(this.pointers,function(C){return C.id===g})}},{key:"getPointerInfo",value:function(f){return this.pointers[this.getPointerIndex(f)]}},{key:"updatePointer",value:function(f,g,C,T){var w=Ce.getPointerId(f),x=this.getPointerIndex(f),j=this.pointers[x];return T=!1!==T&&(T||/(down|start)$/i.test(g.type)),j?j.pointer=f:(j=new Ni.PointerInfo(w,f,g,null,null),x=this.pointers.length,this.pointers.push(j)),Ce.setCoords(this.coords.cur,this.pointers.map(function($){return $.pointer}),this._now()),Ce.setCoordDeltas(this.coords.delta,this.coords.prev,this.coords.cur),T&&(this.pointerIsDown=!0,j.downTime=this.coords.cur.timeStamp,j.downTarget=C,Ce.pointerExtend(this.downPointer,f),this.interacting()||(Ce.copyCoords(this.coords.start,this.coords.cur),Ce.copyCoords(this.coords.prev,this.coords.cur),this.downEvent=g,this.pointerWasMoved=!1)),this._updateLatestPointer(f,g,C),this._scopeFire("interactions:update-pointer",{pointer:f,event:g,eventTarget:C,down:T,pointerInfo:j,pointerIndex:x,interaction:this}),x}},{key:"removePointer",value:function(f,g){var C=this.getPointerIndex(f);-1!==C&&(this._scopeFire("interactions:remove-pointer",{pointer:f,event:g,eventTarget:null,pointerIndex:C,pointerInfo:this.pointers[C],interaction:this}),this.pointers.splice(C,1),this.pointerIsDown=!1)}},{key:"_updateLatestPointer",value:function(f,g,C){this._latestPointer.pointer=f,this._latestPointer.event=g,this._latestPointer.eventTarget=C}},{key:"destroy",value:function(){this._latestPointer.pointer=null,this._latestPointer.event=null,this._latestPointer.eventTarget=null}},{key:"_createPreparedEvent",value:function(f,g,C,T){return new Wo.InteractEvent(this,f,this.prepared.name,g,this.element,C,T)}},{key:"_fireEvent",value:function(f){this.interactable.fire(f),(!this.prevEvent||f.timeStamp>=this.prevEvent.timeStamp)&&(this.prevEvent=f)}},{key:"_doPhase",value:function(f){var g=f.event,C=f.phase,T=f.preEnd,w=f.type,x=this.rect;if(x&&"move"===C&&(oe.addEdges(this.edges,x,this.coords.delta[this.interactable.options.deltaSource]),x.width=x.right-x.left,x.height=x.bottom-x.top),!1===this._scopeFire("interactions:before-action-".concat(C),f))return!1;var j=f.iEvent=this._createPreparedEvent(g,C,T,w);return this._scopeFire("interactions:action-".concat(C),f),"start"===C&&(this.prevEvent=j),this._fireEvent(j),this._scopeFire("interactions:after-action-".concat(C),f),!0}},{key:"_now",value:function(){return Date.now()}}])&&function(c,l){for(var d=0;d<l.length;d++){var f=l[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}(c.prototype,d),c}();Mt.Interaction=ru,Mt.default=ru;var di={};function pc(c){c.pointerIsDown&&(Me(c.coords.cur,c.offset.total),c.offset.pending.x=0,c.offset.pending.y=0)}function Cn(c){gc(c.interaction)}function gc(c){if(!(d=c).offset.pending.x&&!d.offset.pending.y)return!1;var d,l=c.offset.pending;return Me(c.coords.cur,l),Me(c.coords.delta,l),oe.addEdges(c.edges,c.rect,l),l.x=0,l.y=0,!0}function ou(c){var l=c.x,d=c.y;this.offset.pending.x+=l,this.offset.pending.y+=d,this.offset.total.x+=l,this.offset.total.y+=d}function Me(c,l){var d=c.page,f=c.client,g=l.x,C=l.y;d.x+=g,d.y+=C,f.x+=g,f.y+=C}Object.defineProperty(di,"__esModule",{value:!0}),di.addTotal=pc,di.applyPending=gc,di.default=void 0,Mt._ProxyMethods.offsetBy="",di.default={id:"offset",before:["modifiers","pointer-events","actions","inertia"],install:function(c){c.Interaction.prototype.offsetBy=ou},listeners:{"interactions:new":function(c){c.interaction.offset={total:{x:0,y:0},pending:{x:0,y:0}}},"interactions:update-pointer":function(c){return pc(c.interaction)},"interactions:before-action-start":Cn,"interactions:before-action-move":Cn,"interactions:before-action-end":function(c){var l=c.interaction;if(gc(l))return l.move({offset:!0}),l.end(),!1},"interactions:stop":function(c){var l=c.interaction;l.offset.total.x=0,l.offset.total.y=0,l.offset.pending.x=0,l.offset.pending.y=0}}};var Vt={};function Et(c,l,d){return l in c?Object.defineProperty(c,l,{value:d,enumerable:!0,configurable:!0,writable:!0}):c[l]=d,c}Object.defineProperty(Vt,"__esModule",{value:!0}),Vt.default=Vt.InertiaState=void 0;var kn=function(){function c(f){(function(g,C){if(!(g instanceof C))throw new TypeError("Cannot call a class as a function")})(this,c),Et(this,"active",!1),Et(this,"isModified",!1),Et(this,"smoothEnd",!1),Et(this,"allowResume",!1),Et(this,"modification",void 0),Et(this,"modifierCount",0),Et(this,"modifierArg",void 0),Et(this,"startCoords",void 0),Et(this,"t0",0),Et(this,"v0",0),Et(this,"te",0),Et(this,"targetOffset",void 0),Et(this,"modifiedOffset",void 0),Et(this,"currentOffset",void 0),Et(this,"lambda_v0",0),Et(this,"one_ve_v0",0),Et(this,"timeout",void 0),Et(this,"interaction",void 0),this.interaction=f}var d;return(d=[{key:"start",value:function(f){var g=this.interaction,C=Bs(g);if(!C||!C.enabled)return!1;var T=g.coords.velocity.client,w=(0,Jn.default)(T.x,T.y),x=this.modification||(this.modification=new Te.default(g));if(x.copyFrom(g.modification),this.t0=g._now(),this.allowResume=C.allowResume,this.v0=w,this.currentOffset={x:0,y:0},this.startCoords=g.coords.cur.page,this.modifierArg=x.fillArg({pageCoords:this.startCoords,preEnd:!0,phase:"inertiastart"}),this.t0-g.coords.cur.timeStamp<50&&w>C.minSpeed&&w>C.endSpeed)this.startInertia();else{if(x.result=x.setAll(this.modifierArg),!x.result.changed)return!1;this.startSmoothEnd()}return g.modification.result.rect=null,g.offsetBy(this.targetOffset),g._doPhase({interaction:g,event:f,phase:"inertiastart"}),g.offsetBy({x:-this.targetOffset.x,y:-this.targetOffset.y}),g.modification.result.rect=null,this.active=!0,g.simulation=this,!0}},{key:"startInertia",value:function(){var f=this,g=this.interaction.coords.velocity.client,C=Bs(this.interaction),T=C.resistance,w=-Math.log(C.endSpeed/this.v0)/T;this.targetOffset={x:(g.x-w)/T,y:(g.y-w)/T},this.te=w,this.lambda_v0=T/this.v0,this.one_ve_v0=1-C.endSpeed/this.v0;var x=this.modification,j=this.modifierArg;j.pageCoords={x:this.startCoords.x+this.targetOffset.x,y:this.startCoords.y+this.targetOffset.y},x.result=x.setAll(j),x.result.changed&&(this.isModified=!0,this.modifiedOffset={x:this.targetOffset.x+x.result.delta.x,y:this.targetOffset.y+x.result.delta.y}),this.onNextFrame(function(){return f.inertiaTick()})}},{key:"startSmoothEnd",value:function(){var f=this;this.smoothEnd=!0,this.isModified=!0,this.targetOffset={x:this.modification.result.delta.x,y:this.modification.result.delta.y},this.onNextFrame(function(){return f.smoothEndTick()})}},{key:"onNextFrame",value:function(f){var g=this;this.timeout=be.default.request(function(){g.active&&f()})}},{key:"inertiaTick",value:function(){var g,T,w,x=this,j=this.interaction,$=Bs(j).resistance,Y=(j._now()-this.t0)/1e3;if(Y<this.te){var ne,ie=1-(Math.exp(-$*Y)-this.lambda_v0)/this.one_ve_v0;this.isModified?(g=this.targetOffset.y,T=this.modifiedOffset.y,ne={x:Nn(w=ie,0,this.targetOffset.x,this.modifiedOffset.x),y:Nn(w,0,g,T)}):ne={x:this.targetOffset.x*ie,y:this.targetOffset.y*ie};var te={x:ne.x-this.currentOffset.x,y:ne.y-this.currentOffset.y};this.currentOffset.x+=te.x,this.currentOffset.y+=te.y,j.offsetBy(te),j.move(),this.onNextFrame(function(){return x.inertiaTick()})}else j.offsetBy({x:this.modifiedOffset.x-this.currentOffset.x,y:this.modifiedOffset.y-this.currentOffset.y}),this.end()}},{key:"smoothEndTick",value:function(){var f=this,g=this.interaction,C=g._now()-this.t0,T=Bs(g).smoothEndDuration;if(C<T){var w={x:ye(C,0,this.targetOffset.x,T),y:ye(C,0,this.targetOffset.y,T)},x={x:w.x-this.currentOffset.x,y:w.y-this.currentOffset.y};this.currentOffset.x+=x.x,this.currentOffset.y+=x.y,g.offsetBy(x),g.move({skipModifiers:this.modifierCount}),this.onNextFrame(function(){return f.smoothEndTick()})}else g.offsetBy({x:this.targetOffset.x-this.currentOffset.x,y:this.targetOffset.y-this.currentOffset.y}),this.end()}},{key:"resume",value:function(f){var g=f.pointer,C=f.event,T=f.eventTarget,w=this.interaction;w.offsetBy({x:-this.currentOffset.x,y:-this.currentOffset.y}),w.updatePointer(g,C,T,!0),w._doPhase({interaction:w,event:C,phase:"resume"}),(0,Ce.copyCoords)(w.coords.prev,w.coords.cur),this.stop()}},{key:"end",value:function(){this.interaction.move(),this.interaction.end(),this.stop()}},{key:"stop",value:function(){this.active=this.smoothEnd=!1,this.interaction.simulation=null,be.default.cancel(this.timeout)}}])&&function(c,l){for(var d=0;d<l.length;d++){var f=l[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}(c.prototype,d),c}();function Bs(c){var l=c.interactable,d=c.prepared;return l&&l.options&&d.name&&l.options[d.name].inertia}function Nn(c,l,d,f){var g=1-c;return g*g*l+2*g*c*d+c*c*f}function ye(c,l,d,f){return-d*(c/=f)*(c-2)+l}Vt.InertiaState=kn,Vt.default={id:"inertia",before:["modifiers","actions"],install:function(c){var l=c.defaults;c.usePlugin(di.default),c.usePlugin(ln.default),c.actions.phases.inertiastart=!0,c.actions.phases.resume=!0,l.perAction.inertia={enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300}},listeners:{"interactions:new":function(c){var l=c.interaction;l.inertia=new kn(l)},"interactions:before-action-end":function(c){var l=c.interaction;return(!l._interacting||l.simulation||!l.inertia.start(c.event))&&null},"interactions:down":function(c){var l=c.interaction,f=l.inertia;if(f.active)for(var g=c.eventTarget;O.default.element(g);){if(g===l.element){f.resume(c);break}g=b.parentNode(g)}},"interactions:stop":function(c){var l=c.interaction.inertia;l.active&&l.stop()},"interactions:before-action-resume":function(c){var l=c.interaction.modification;l.stop(c),l.start(c,c.interaction.coords.cur.page),l.applyToInteraction(c)},"interactions:before-action-inertiastart":function(c){return c.interaction.modification.setAndApply(c)},"interactions:action-resume":ln.addEventModifiers,"interactions:action-inertiastart":ln.addEventModifiers,"interactions:after-action-inertiastart":function(c){return c.interaction.modification.restoreInteractionCoords(c)},"interactions:after-action-resume":function(c){return c.interaction.modification.restoreInteractionCoords(c)}}};var ut={};function nr(c,l,d){return l in c?Object.defineProperty(c,l,{value:d,enumerable:!0,configurable:!0,writable:!0}):c[l]=d,c}function Ht(c,l){for(var d=0;d<l.length;d++){var f=l[d];if(c.immediatePropagationStopped)break;f(c)}}Object.defineProperty(ut,"__esModule",{value:!0}),ut.Eventable=void 0;var Li=function(){function c(f){(function(g,C){if(!(g instanceof C))throw new TypeError("Cannot call a class as a function")})(this,c),nr(this,"options",void 0),nr(this,"types",{}),nr(this,"propagationStopped",!1),nr(this,"immediatePropagationStopped",!1),nr(this,"global",void 0),this.options=(0,z.default)({},f||{})}var d;return(d=[{key:"fire",value:function(f){var g,C=this.global;(g=this.types[f.type])&&Ht(f,g),!f.propagationStopped&&C&&(g=C[f.type])&&Ht(f,g)}},{key:"on",value:function(f,g){var C=(0,et.default)(f,g);for(f in C)this.types[f]=Je.merge(this.types[f]||[],C[f])}},{key:"off",value:function(f,g){var C=(0,et.default)(f,g);for(f in C){var T=this.types[f];if(T&&T.length)for(var w=0;w<C[f].length;w++){var j=T.indexOf(C[f][w]);-1!==j&&T.splice(j,1)}}}},{key:"getRect",value:function(f){return null}}])&&function(c,l){for(var d=0;d<l.length;d++){var f=l[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}(c.prototype,d),c}();ut.Eventable=Li;var bt={};Object.defineProperty(bt,"__esModule",{value:!0}),bt.default=function(c,l){if(l.phaselessTypes[c])return!0;for(var d in l.map)if(0===c.indexOf(d)&&c.substr(d.length)in l.phases)return!0;return!1};var Vi={};Object.defineProperty(Vi,"__esModule",{value:!0}),Vi.createInteractStatic=function(c){var l=function d(f,g){var C=c.interactables.get(f,g);return C||((C=c.interactables.new(f,g)).events.global=d.globalEvents),C};return l.getPointerAverage=Ce.pointerAverage,l.getTouchBBox=Ce.touchBBox,l.getTouchDistance=Ce.touchDistance,l.getTouchAngle=Ce.touchAngle,l.getElementRect=b.getElementRect,l.getElementClientRect=b.getElementClientRect,l.matchesSelector=b.matchesSelector,l.closest=b.closest,l.globalEvents={},l.version="1.10.11",l.scope=c,l.use=function(d,f){return this.scope.usePlugin(d,f),this},l.isSet=function(d,f){return!!this.scope.interactables.get(d,f&&f.context)},l.on=(0,zn.warnOnce)(function(d,f,g){if(O.default.string(d)&&-1!==d.search(" ")&&(d=d.trim().split(/ +/)),O.default.array(d)){for(var C=0;C<d.length;C++)this.on(d[C],f,g);return this}if(O.default.object(d)){for(var w in d)this.on(w,d[w],f);return this}return(0,bt.default)(d,this.scope.actions)?this.globalEvents[d]?this.globalEvents[d].push(f):this.globalEvents[d]=[f]:this.scope.events.add(this.scope.document,d,f,{options:g}),this},"The interact.on() method is being deprecated"),l.off=(0,zn.warnOnce)(function(d,f,g){if(O.default.string(d)&&-1!==d.search(" ")&&(d=d.trim().split(/ +/)),O.default.array(d)){for(var C=0;C<d.length;C++)this.off(d[C],f,g);return this}if(O.default.object(d)){for(var w in d)this.off(w,d[w],f);return this}var x;return(0,bt.default)(d,this.scope.actions)?d in this.globalEvents&&-1!==(x=this.globalEvents[d].indexOf(f))&&this.globalEvents[d].splice(x,1):this.scope.events.remove(this.scope.document,d,f,g),this},"The interact.off() method is being deprecated"),l.debug=function(){return this.scope},l.supportsTouch=function(){return y.default.supportsTouch},l.supportsPointerEvent=function(){return y.default.supportsPointerEvent},l.stop=function(){for(var d=0;d<this.scope.interactions.list.length;d++)this.scope.interactions.list[d].stop();return this},l.pointerMoveTolerance=function(d){return O.default.number(d)?(this.scope.interactions.pointerMoveTolerance=d,this):this.scope.interactions.pointerMoveTolerance},l.addDocument=function(d,f){this.scope.addDocument(d,f)},l.removeDocument=function(d){this.scope.removeDocument(d)},l};var Nr={};function Gn(c,l,d){return l in c?Object.defineProperty(c,l,{value:d,enumerable:!0,configurable:!0,writable:!0}):c[l]=d,c}Object.defineProperty(Nr,"__esModule",{value:!0}),Nr.Interactable=void 0;var go=function(){function c(f,g,C,T){(function(w,x){if(!(w instanceof x))throw new TypeError("Cannot call a class as a function")})(this,c),Gn(this,"options",void 0),Gn(this,"_actions",void 0),Gn(this,"target",void 0),Gn(this,"events",new ut.Eventable),Gn(this,"_context",void 0),Gn(this,"_win",void 0),Gn(this,"_doc",void 0),Gn(this,"_scopeEvents",void 0),Gn(this,"_rectChecker",void 0),this._actions=g.actions,this.target=f,this._context=g.context||C,this._win=(0,Fe.getWindow)((0,b.trySelector)(f)?this._context:f),this._doc=this._win.document,this._scopeEvents=T,this.set(g)}var d;return(d=[{key:"_defaults",get:function(){return{base:{},perAction:{},actions:{}}}},{key:"setOnEvents",value:function(f,g){return O.default.func(g.onstart)&&this.on("".concat(f,"start"),g.onstart),O.default.func(g.onmove)&&this.on("".concat(f,"move"),g.onmove),O.default.func(g.onend)&&this.on("".concat(f,"end"),g.onend),O.default.func(g.oninertiastart)&&this.on("".concat(f,"inertiastart"),g.oninertiastart),this}},{key:"updatePerActionListeners",value:function(f,g,C){(O.default.array(g)||O.default.object(g))&&this.off(f,g),(O.default.array(C)||O.default.object(C))&&this.on(f,C)}},{key:"setPerAction",value:function(f,g){var C=this._defaults;for(var T in g){var w=T,x=this.options[f],j=g[w];"listeners"===w&&this.updatePerActionListeners(f,x.listeners,j),O.default.array(j)?x[w]=Je.from(j):O.default.plainObject(j)?(x[w]=(0,z.default)(x[w]||{},(0,ki.default)(j)),O.default.object(C.perAction[w])&&"enabled"in C.perAction[w]&&(x[w].enabled=!1!==j.enabled)):O.default.bool(j)&&O.default.object(C.perAction[w])?x[w].enabled=j:x[w]=j}}},{key:"getRect",value:function(f){return f=f||(O.default.element(this.target)?this.target:null),O.default.string(this.target)&&(f=f||this._context.querySelector(this.target)),(0,b.getElementRect)(f)}},{key:"rectChecker",value:function(f){var g=this;return O.default.func(f)?(this._rectChecker=f,this.getRect=function(C){var T=(0,z.default)({},g._rectChecker(C));return"width"in T||(T.width=T.right-T.left,T.height=T.bottom-T.top),T},this):null===f?(delete this.getRect,delete this._rectChecker,this):this.getRect}},{key:"_backCompatOption",value:function(f,g){if((0,b.trySelector)(g)||O.default.object(g)){for(var C in this.options[f]=g,this._actions.map)this.options[C][f]=g;return this}return this.options[f]}},{key:"origin",value:function(f){return this._backCompatOption("origin",f)}},{key:"deltaSource",value:function(f){return"page"===f||"client"===f?(this.options.deltaSource=f,this):this.options.deltaSource}},{key:"context",value:function(){return this._context}},{key:"inContext",value:function(f){return this._context===f.ownerDocument||(0,b.nodeContains)(this._context,f)}},{key:"testIgnoreAllow",value:function(f,g,C){return!this.testIgnore(f.ignoreFrom,g,C)&&this.testAllow(f.allowFrom,g,C)}},{key:"testAllow",value:function(f,g,C){return!f||!!O.default.element(C)&&(O.default.string(f)?(0,b.matchesUpTo)(C,f,g):!!O.default.element(f)&&(0,b.nodeContains)(f,C))}},{key:"testIgnore",value:function(f,g,C){return!(!f||!O.default.element(C))&&(O.default.string(f)?(0,b.matchesUpTo)(C,f,g):!!O.default.element(f)&&(0,b.nodeContains)(f,C))}},{key:"fire",value:function(f){return this.events.fire(f),this}},{key:"_onOff",value:function(f,g,C,T){O.default.object(g)&&!O.default.array(g)&&(T=C,C=null);var w="on"===f?"add":"remove",x=(0,et.default)(g,C);for(var j in x){"wheel"===j&&(j=y.default.wheelEvent);for(var $=0;$<x[j].length;$++){var Y=x[j][$];(0,bt.default)(j,this._actions)?this.events[f](j,Y):O.default.string(this.target)?this._scopeEvents["".concat(w,"Delegate")](this.target,this._context,j,Y,T):this._scopeEvents[w](this.target,j,Y,T)}}return this}},{key:"on",value:function(f,g,C){return this._onOff("on",f,g,C)}},{key:"off",value:function(f,g,C){return this._onOff("off",f,g,C)}},{key:"set",value:function(f){var g=this._defaults;for(var C in O.default.object(f)||(f={}),this.options=(0,ki.default)(g.base),this._actions.methodDict){var T=C,w=this._actions.methodDict[T];this.options[T]={},this.setPerAction(T,(0,z.default)((0,z.default)({},g.perAction),g.actions[T])),this[w](f[T])}for(var x in f)O.default.func(this[x])&&this[x](f[x]);return this}},{key:"unset",value:function(){if(O.default.string(this.target))for(var f in this._scopeEvents.delegatedEvents)for(var g=this._scopeEvents.delegatedEvents[f],C=g.length-1;C>=0;C--){var T=g[C],j=T.listeners;T.selector===this.target&&T.context===this._context&&g.splice(C,1);for(var $=j.length-1;$>=0;$--)this._scopeEvents.removeDelegate(this.target,this._context,f,j[$][0],j[$][1])}else this._scopeEvents.remove(this.target,"all")}}])&&function(c,l){for(var d=0;d<l.length;d++){var f=l[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}(c.prototype,d),c}();Nr.Interactable=go;var mo={};function un(c,l,d){return l in c?Object.defineProperty(c,l,{value:d,enumerable:!0,configurable:!0,writable:!0}):c[l]=d,c}Object.defineProperty(mo,"__esModule",{value:!0}),mo.InteractableSet=void 0;var Ko=function(){function c(f){var g=this;(function(C,T){if(!(C instanceof T))throw new TypeError("Cannot call a class as a function")})(this,c),un(this,"list",[]),un(this,"selectorMap",{}),un(this,"scope",void 0),this.scope=f,f.addListeners({"interactable:unset":function(C){var T=C.interactable,w=T.target,x=T._context,j=O.default.string(w)?g.selectorMap[w]:w[g.scope.id],$=Je.findIndex(j,function(Y){return Y.context===x});j[$]&&(j[$].context=null,j[$].interactable=null),j.splice($,1)}})}var d;return(d=[{key:"new",value:function(f,g){g=(0,z.default)(g||{},{actions:this.scope.actions});var C=new this.scope.Interactable(f,g,this.scope.document,this.scope.events),T={context:C._context,interactable:C};return this.scope.addDocument(C._doc),this.list.push(C),O.default.string(f)?(this.selectorMap[f]||(this.selectorMap[f]=[]),this.selectorMap[f].push(T)):(C.target[this.scope.id]||Object.defineProperty(f,this.scope.id,{value:[],configurable:!0}),f[this.scope.id].push(T)),this.scope.fire("interactable:new",{target:f,options:g,interactable:C,win:this.scope._win}),C}},{key:"get",value:function(f,g){var C=g&&g.context||this.scope.document,T=O.default.string(f),w=T?this.selectorMap[f]:f[this.scope.id];if(!w)return null;var x=Je.find(w,function(j){return j.context===C&&(T||j.interactable.inContext(f))});return x&&x.interactable}},{key:"forEachMatch",value:function(f,g){for(var C=0;C<this.list.length;C++){var T=this.list[C],w=void 0;if((O.default.string(T.target)?O.default.element(f)&&b.matchesSelector(f,T.target):f===T.target)&&T.inContext(f)&&(w=g(T)),void 0!==w)return w}}}])&&function(c,l){for(var d=0;d<l.length;d++){var f=l[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}(c.prototype,d),c}();mo.InteractableSet=Ko;var Fr={};function dt(c,l,d){return l in c?Object.defineProperty(c,l,{value:d,enumerable:!0,configurable:!0,writable:!0}):c[l]=d,c}function mc(c,l){return function(d){if(Array.isArray(d))return d}(c)||function(d,f){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(d)){var g=[],C=!0,T=!1,w=void 0;try{for(var x,j=d[Symbol.iterator]();!(C=(x=j.next()).done)&&(g.push(x.value),!f||g.length!==f);C=!0);}catch($){T=!0,w=$}finally{try{C||null==j.return||j.return()}finally{if(T)throw w}}return g}}(c,l)||function(d,f){if(d){if("string"==typeof d)return su(d,f);var g=Object.prototype.toString.call(d).slice(8,-1);return"Object"===g&&d.constructor&&(g=d.constructor.name),"Map"===g||"Set"===g?Array.from(d):"Arguments"===g||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g)?su(d,f):void 0}}(c,l)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function su(c,l){(null==l||l>c.length)&&(l=c.length);for(var d=0,f=Array(l);d<l;d++)f[d]=c[d];return f}Object.defineProperty(Fr,"__esModule",{value:!0}),Fr.default=void 0;var Us=function(){function c(f){(function(g,C){if(!(g instanceof C))throw new TypeError("Cannot call a class as a function")})(this,c),dt(this,"currentTarget",void 0),dt(this,"originalEvent",void 0),dt(this,"type",void 0),this.originalEvent=f,(0,Ue.default)(this,f)}var d;return(d=[{key:"preventOriginalDefault",value:function(){this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.originalEvent.stopPropagation()}},{key:"stopImmediatePropagation",value:function(){this.originalEvent.stopImmediatePropagation()}}])&&function(c,l){for(var d=0;d<l.length;d++){var f=l[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}(c.prototype,d),c}();function ji(c){if(!O.default.object(c))return{capture:!!c,passive:!1};var l=(0,z.default)({},c);return l.capture=!!c.capture,l.passive=!!c.passive,l}Fr.default={id:"events",install:function(c){var l,d=[],f={},g=[],C={add:T,remove:w,addDelegate:function($,Y,ne,ie,te){var ue=ji(te);if(!f[ne]){f[ne]=[];for(var ge=0;ge<g.length;ge++){var de=g[ge];T(de,ne,x),T(de,ne,j,!0)}}var Ee=f[ne],xe=Je.find(Ee,function(Le){return Le.selector===$&&Le.context===Y});xe||Ee.push(xe={selector:$,context:Y,listeners:[]}),xe.listeners.push([ie,ue])},removeDelegate:function($,Y,ne,ie,te){var ue,ge=ji(te),de=f[ne],Ee=!1;if(de)for(ue=de.length-1;ue>=0;ue--){var xe=de[ue];if(xe.selector===$&&xe.context===Y){for(var Le=xe.listeners,it=Le.length-1;it>=0;it--){var at=mc(Le[it],2),tt=at[1];if(at[0]===ie&&tt.capture===ge.capture&&tt.passive===ge.passive){Le.splice(it,1),Le.length||(de.splice(ue,1),w(Y,ne,x),w(Y,ne,j,!0)),Ee=!0;break}}if(Ee)break}}},delegateListener:x,delegateUseCapture:j,delegatedEvents:f,documents:g,targets:d,supportsOptions:!1,supportsPassive:!1};function T($,Y,ne,ie){var te=ji(ie),ue=Je.find(d,function(ge){return ge.eventTarget===$});ue||d.push(ue={eventTarget:$,events:{}}),ue.events[Y]||(ue.events[Y]=[]),$.addEventListener&&!Je.contains(ue.events[Y],ne)&&($.addEventListener(Y,ne,C.supportsOptions?te:te.capture),ue.events[Y].push(ne))}function w($,Y,ne,ie){var te=ji(ie),ue=Je.findIndex(d,function(it){return it.eventTarget===$}),ge=d[ue];if(ge&&ge.events)if("all"!==Y){var de=!1,Ee=ge.events[Y];if(Ee){if("all"===ne){for(var xe=Ee.length-1;xe>=0;xe--)w($,Y,Ee[xe],te);return}for(var Le=0;Le<Ee.length;Le++)if(Ee[Le]===ne){$.removeEventListener(Y,ne,C.supportsOptions?te:te.capture),Ee.splice(Le,1),0===Ee.length&&(delete ge.events[Y],de=!0);break}}de&&!Object.keys(ge.events).length&&d.splice(ue,1)}else for(Y in ge.events)ge.events.hasOwnProperty(Y)&&w($,Y,"all")}function x($,Y){for(var ne=ji(Y),ie=new Us($),te=f[$.type],ue=mc(Ce.getEventTargets($),1)[0],ge=ue;O.default.element(ge);){for(var de=0;de<te.length;de++){var Ee=te[de],Le=Ee.context;if(b.matchesSelector(ge,Ee.selector)&&b.nodeContains(Le,ue)&&b.nodeContains(Le,ge)){var it=Ee.listeners;ie.currentTarget=ge;for(var at=0;at<it.length;at++){var Qe=mc(it[at],2),Sn=Qe[1];Sn.capture===ne.capture&&Sn.passive===ne.passive&&(0,Qe[0])(ie)}}}ge=b.parentNode(ge)}}function j($){return x($,!0)}return null==(l=c.document)||l.createElement("div").addEventListener("test",null,{get capture(){return C.supportsOptions=!0},get passive(){return C.supportsPassive=!0}}),c.events=C,C}};var Bi={};Object.defineProperty(Bi,"__esModule",{value:!0}),Bi.default=void 0;var _r={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function(c){for(var l=0;l<_r.methodOrder.length;l++){var f=_r[_r.methodOrder[l]](c);if(f)return f}return null},simulationResume:function(c){var l=c.pointerType,f=c.eventTarget,g=c.scope;if(!/down|start/i.test(c.eventType))return null;for(var C=0;C<g.interactions.list.length;C++){var T=g.interactions.list[C],w=f;if(T.simulation&&T.simulation.allowResume&&T.pointerType===l)for(;w;){if(w===T.element)return T;w=b.parentNode(w)}}return null},mouseOrPen:function(c){var l,d=c.pointerId,f=c.pointerType,g=c.eventType,C=c.scope;if("mouse"!==f&&"pen"!==f)return null;for(var T=0;T<C.interactions.list.length;T++){var w=C.interactions.list[T];if(w.pointerType===f){if(w.simulation&&!Zt(w,d))continue;if(w.interacting())return w;l||(l=w)}}if(l)return l;for(var x=0;x<C.interactions.list.length;x++){var j=C.interactions.list[x];if(!(j.pointerType!==f||/down/i.test(g)&&j.simulation))return j}return null},hasPointer:function(c){for(var l=c.pointerId,d=c.scope,f=0;f<d.interactions.list.length;f++){var g=d.interactions.list[f];if(Zt(g,l))return g}return null},idle:function(c){for(var l=c.pointerType,d=c.scope,f=0;f<d.interactions.list.length;f++){var g=d.interactions.list[f];if(1===g.pointers.length){var C=g.interactable;if(C&&(!C.options.gesture||!C.options.gesture.enabled))continue}else if(g.pointers.length>=2)continue;if(!g.interacting()&&l===g.pointerType)return g}return null}};function Zt(c,l){return c.pointers.some(function(d){return d.id===l})}Bi.default=_r;var Ln={};function Wn(c){return(Wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(l){return typeof l}:function(l){return l&&"function"==typeof Symbol&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(c)}function Hs(c,l){return function(d){if(Array.isArray(d))return d}(c)||function(d,f){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(d)){var g=[],C=!0,T=!1,w=void 0;try{for(var x,j=d[Symbol.iterator]();!(C=(x=j.next()).done)&&(g.push(x.value),!f||g.length!==f);C=!0);}catch($){T=!0,w=$}finally{try{C||null==j.return||j.return()}finally{if(T)throw w}}return g}}(c,l)||function(d,f){if(d){if("string"==typeof d)return Xo(d,f);var g=Object.prototype.toString.call(d).slice(8,-1);return"Object"===g&&d.constructor&&(g=d.constructor.name),"Map"===g||"Set"===g?Array.from(d):"Arguments"===g||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g)?Xo(d,f):void 0}}(c,l)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xo(c,l){(null==l||l>c.length)&&(l=c.length);for(var d=0,f=Array(l);d<l;d++)f[d]=c[d];return f}function $s(c,l){if(!(c instanceof l))throw new TypeError("Cannot call a class as a function")}function au(c,l){return(au=Object.setPrototypeOf||function(d,f){return d.__proto__=f,d})(c,l)}function py(c,l){return!l||"object"!==Wn(l)&&"function"!=typeof l?function(d){if(void 0===d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d}(c):l}function yc(c){return(yc=Object.setPrototypeOf?Object.getPrototypeOf:function(l){return l.__proto__||Object.getPrototypeOf(l)})(c)}Object.defineProperty(Ln,"__esModule",{value:!0}),Ln.default=void 0;var vc=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer","windowBlur"];function jf(c,l){return function(d){var f=l.interactions.list,g=Ce.getPointerType(d),C=Hs(Ce.getEventTargets(d),2),T=C[0],w=C[1],x=[];if(/^touch/.test(d.type)){l.prevTouchTime=l.now();for(var j=0;j<d.changedTouches.length;j++){var $=d.changedTouches[j],Y={pointer:$,pointerId:Ce.getPointerId($),pointerType:g,eventType:d.type,eventTarget:T,curEventTarget:w,scope:l},ne=Bf(Y);x.push([Y.pointer,Y.eventTarget,Y.curEventTarget,ne])}}else{var ie=!1;if(!y.default.supportsPointerEvent&&/mouse/.test(d.type)){for(var te=0;te<f.length&&!ie;te++)ie="mouse"!==f[te].pointerType&&f[te].pointerIsDown;ie=ie||l.now()-l.prevTouchTime<500||0===d.timeStamp}if(!ie){var ue={pointer:d,pointerId:Ce.getPointerId(d),pointerType:g,eventType:d.type,curEventTarget:w,eventTarget:T,scope:l},ge=Bf(ue);x.push([ue.pointer,ue.eventTarget,ue.curEventTarget,ge])}}for(var de=0;de<x.length;de++){var Ee=Hs(x[de],4);Ee[3][c](Ee[0],d,Ee[1],Ee[2])}}}function Bf(c){var l=c.pointerType,d=c.scope,f={interaction:Bi.default.search(c),searchDetails:c};return d.fire("interactions:find",f),f.interaction||d.interactions.new({pointerType:l})}function cu(c,l){var d=c.doc,f=c.scope,g=c.options,C=f.interactions.docEvents,T=f.events,w=T[l];for(var x in f.browser.isIOS&&!g.events&&(g.events={passive:!1}),T.delegatedEvents)w(d,x,T.delegateListener),w(d,x,T.delegateUseCapture,!0);for(var j=g&&g.events,$=0;$<C.length;$++){var Y=C[$];w(d,Y.type,Y.listener,j)}}Ln.default={id:"core/interactions",install:function(c){for(var l={},d=0;d<vc.length;d++){var f=vc[d];l[f]=jf(f,c)}var g,C=y.default.pEventTypes;function T(){for(var w=0;w<c.interactions.list.length;w++){var x=c.interactions.list[w];if(x.pointerIsDown&&"touch"===x.pointerType&&!x._interacting)for(var j=function(){var Y=x.pointers[$];c.documents.some(function(ne){return(0,b.nodeContains)(ne.doc,Y.downTarget)})||x.removePointer(Y.pointer,Y.event)},$=0;$<x.pointers.length;$++)j()}}(g=I.default.PointerEvent?[{type:C.down,listener:T},{type:C.down,listener:l.pointerDown},{type:C.move,listener:l.pointerMove},{type:C.up,listener:l.pointerUp},{type:C.cancel,listener:l.pointerUp}]:[{type:"mousedown",listener:l.pointerDown},{type:"mousemove",listener:l.pointerMove},{type:"mouseup",listener:l.pointerUp},{type:"touchstart",listener:T},{type:"touchstart",listener:l.pointerDown},{type:"touchmove",listener:l.pointerMove},{type:"touchend",listener:l.pointerUp},{type:"touchcancel",listener:l.pointerUp}]).push({type:"blur",listener:function(w){for(var x=0;x<c.interactions.list.length;x++)c.interactions.list[x].documentBlur(w)}}),c.prevTouchTime=0,c.Interaction=function(w){!function(te,ue){if("function"!=typeof ue&&null!==ue)throw new TypeError("Super expression must either be null or a function");te.prototype=Object.create(ue&&ue.prototype,{constructor:{value:te,writable:!0,configurable:!0}}),ue&&au(te,ue)}(ie,w);var j,$,Y,ne=($=ie,Y=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(te){return!1}}(),function(){var te,ue=yc($);if(Y){var ge=yc(this).constructor;te=Reflect.construct(ue,arguments,ge)}else te=ue.apply(this,arguments);return py(this,te)});function ie(){return $s(this,ie),ne.apply(this,arguments)}return(j=[{key:"pointerMoveTolerance",get:function(){return c.interactions.pointerMoveTolerance},set:function(te){c.interactions.pointerMoveTolerance=te}},{key:"_now",value:function(){return c.now()}}])&&function(c,l){for(var d=0;d<l.length;d++){var f=l[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}(ie.prototype,j),ie}(Mt.default),c.interactions={list:[],new:function(w){w.scopeFire=function(j,$){return c.fire(j,$)};var x=new c.Interaction(w);return c.interactions.list.push(x),x},listeners:l,docEvents:g,pointerMoveTolerance:1},c.usePlugin(Lt.default)},listeners:{"scope:add-document":function(c){return cu(c,"add")},"scope:remove-document":function(c){return cu(c,"remove")},"interactable:unset":function(c,l){for(var d=c.interactable,f=l.interactions.list.length-1;f>=0;f--){var g=l.interactions.list[f];g.interactable===d&&(g.stop(),l.fire("interactions:destroy",{interaction:g}),g.destroy(),l.interactions.list.length>2&&l.interactions.list.splice(f,1))}}},onDocSignal:cu,doOnInteractions:jf,methodNames:vc};var zs={};function Uf(c){return(Uf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(l){return typeof l}:function(l){return l&&"function"==typeof Symbol&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(c)}function lu(c,l,d){return(lu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(f,g,C){var T=function(x,j){for(;!Object.prototype.hasOwnProperty.call(x,j)&&null!==(x=Zo(x)););return x}(f,g);if(T){var w=Object.getOwnPropertyDescriptor(T,g);return w.get?w.get.call(C):w.value}})(c,l,d||c)}function Hf(c,l){return(Hf=Object.setPrototypeOf||function(d,f){return d.__proto__=f,d})(c,l)}function my(c,l){return!l||"object"!==Uf(l)&&"function"!=typeof l?function(d){if(void 0===d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d}(c):l}function Zo(c){return(Zo=Object.setPrototypeOf?Object.getPrototypeOf:function(l){return l.__proto__||Object.getPrototypeOf(l)})(c)}function $f(c,l){if(!(c instanceof l))throw new TypeError("Cannot call a class as a function")}function zf(c,l){for(var d=0;d<l.length;d++){var f=l[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}function Gf(c,l,d){return l&&zf(c.prototype,l),d&&zf(c,d),c}function dn(c,l,d){return l in c?Object.defineProperty(c,l,{value:d,enumerable:!0,configurable:!0,writable:!0}):c[l]=d,c}Object.defineProperty(zs,"__esModule",{value:!0}),zs.initScope=Gs,zs.Scope=void 0;var uu=function(){function c(){var l=this;$f(this,c),dn(this,"id","__interact_scope_".concat(Math.floor(100*Math.random()))),dn(this,"isInitialized",!1),dn(this,"listenerMaps",[]),dn(this,"browser",y.default),dn(this,"defaults",(0,ki.default)(Go.defaults)),dn(this,"Eventable",ut.Eventable),dn(this,"actions",{map:{},phases:{start:!0,move:!0,end:!0},methodDict:{},phaselessTypes:{}}),dn(this,"interactStatic",(0,Vi.createInteractStatic)(this)),dn(this,"InteractEvent",Wo.InteractEvent),dn(this,"Interactable",void 0),dn(this,"interactables",new mo.InteractableSet(this)),dn(this,"_win",void 0),dn(this,"document",void 0),dn(this,"window",void 0),dn(this,"documents",[]),dn(this,"_plugins",{list:[],map:{}}),dn(this,"onWindowUnload",function(f){return l.removeDocument(f.target)});var d=this;this.Interactable=function(f){!function(x,j){if("function"!=typeof j&&null!==j)throw new TypeError("Super expression must either be null or a function");x.prototype=Object.create(j&&j.prototype,{constructor:{value:x,writable:!0,configurable:!0}}),j&&Hf(x,j)}(w,f);var g,C,T=(g=w,C=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(x){return!1}}(),function(){var x,j=Zo(g);if(C){var $=Zo(this).constructor;x=Reflect.construct(j,arguments,$)}else x=j.apply(this,arguments);return my(this,x)});function w(){return $f(this,w),T.apply(this,arguments)}return Gf(w,[{key:"_defaults",get:function(){return d.defaults}},{key:"set",value:function(x){return lu(Zo(w.prototype),"set",this).call(this,x),d.fire("interactable:set",{options:x,interactable:this}),this}},{key:"unset",value:function(){lu(Zo(w.prototype),"unset",this).call(this),d.interactables.list.splice(d.interactables.list.indexOf(this),1),d.fire("interactable:unset",{interactable:this})}}]),w}(Nr.Interactable)}return Gf(c,[{key:"addListeners",value:function(l,d){this.listenerMaps.push({id:d,map:l})}},{key:"fire",value:function(l,d){for(var f=0;f<this.listenerMaps.length;f++){var g=this.listenerMaps[f].map[l];if(g&&!1===g(d,this,l))return!1}}},{key:"init",value:function(l){return this.isInitialized?this:Gs(this,l)}},{key:"pluginIsInstalled",value:function(l){return this._plugins.map[l.id]||-1!==this._plugins.list.indexOf(l)}},{key:"usePlugin",value:function(l,d){if(!this.isInitialized)return this;if(this.pluginIsInstalled(l))return this;if(l.id&&(this._plugins.map[l.id]=l),this._plugins.list.push(l),l.install&&l.install(this,d),l.listeners&&l.before){for(var f=0,g=this.listenerMaps.length,C=l.before.reduce(function(w,x){return w[x]=!0,w[Wf(x)]=!0,w},{});f<g;f++){var T=this.listenerMaps[f].id;if(C[T]||C[Wf(T)])break}this.listenerMaps.splice(f,0,{id:l.id,map:l.listeners})}else l.listeners&&this.listenerMaps.push({id:l.id,map:l.listeners});return this}},{key:"addDocument",value:function(l,d){if(-1!==this.getDocIndex(l))return!1;var f=Fe.getWindow(l);d=d?(0,z.default)({},d):{},this.documents.push({doc:l,options:d}),this.events.documents.push(l),l!==this.document&&this.events.add(f,"unload",this.onWindowUnload),this.fire("scope:add-document",{doc:l,window:f,scope:this,options:d})}},{key:"removeDocument",value:function(l){var d=this.getDocIndex(l),f=Fe.getWindow(l),g=this.documents[d].options;this.events.remove(f,"unload",this.onWindowUnload),this.documents.splice(d,1),this.events.documents.splice(d,1),this.fire("scope:remove-document",{doc:l,window:f,scope:this,options:g})}},{key:"getDocIndex",value:function(l){for(var d=0;d<this.documents.length;d++)if(this.documents[d].doc===l)return d;return-1}},{key:"getDocOptions",value:function(l){var d=this.getDocIndex(l);return-1===d?null:this.documents[d].options}},{key:"now",value:function(){return(this.window.Date||Date).now()}}]),c}();function Gs(c,l){return c.isInitialized=!0,O.default.window(l)&&Fe.init(l),I.default.init(l),y.default.init(l),be.default.init(l),c.window=l,c.document=l.document,c.usePlugin(Ln.default),c.usePlugin(Fr.default),c}function Wf(c){return c&&c.replace(/\/.*$/,"")}zs.Scope=uu;var yn={};Object.defineProperty(yn,"__esModule",{value:!0}),yn.default=void 0;var qf=new zs.Scope;yn.default=qf.interactStatic;var du="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0;qf.init(du);var $t={};Object.defineProperty($t,"__esModule",{value:!0}),$t.default=void 0,$t.default=function(){};var es={};Object.defineProperty(es,"__esModule",{value:!0}),es.default=void 0,es.default=function(){};var Ws={};function fu(c,l){return function(d){if(Array.isArray(d))return d}(c)||function(d,f){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(d)){var g=[],C=!0,T=!1,w=void 0;try{for(var x,j=d[Symbol.iterator]();!(C=(x=j.next()).done)&&(g.push(x.value),!f||g.length!==f);C=!0);}catch($){T=!0,w=$}finally{try{C||null==j.return||j.return()}finally{if(T)throw w}}return g}}(c,l)||function(d,f){if(d){if("string"==typeof d)return _c(d,f);var g=Object.prototype.toString.call(d).slice(8,-1);return"Object"===g&&d.constructor&&(g=d.constructor.name),"Map"===g||"Set"===g?Array.from(d):"Arguments"===g||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g)?_c(d,f):void 0}}(c,l)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _c(c,l){(null==l||l>c.length)&&(l=c.length);for(var d=0,f=Array(l);d<l;d++)f[d]=c[d];return f}Object.defineProperty(Ws,"__esModule",{value:!0}),Ws.default=void 0,Ws.default=function(c){var l=[["x","y"],["left","top"],["right","bottom"],["width","height"]].filter(function(f){var g=fu(f,2);return g[0]in c||g[1]in c}),d=function(f,g){for(var T=c.limits,w=void 0===T?{left:-1/0,right:1/0,top:-1/0,bottom:1/0}:T,x=c.offset,j=void 0===x?{x:0,y:0}:x,$={range:c.range,grid:c,x:null,y:null},Y=0;Y<l.length;Y++){var ne=fu(l[Y],2),ie=ne[0],te=ne[1],ue=Math.round((f-j.x)/c[ie]),ge=Math.round((g-j.y)/c[te]);$[ie]=Math.max(w.left,Math.min(w.right,ue*c[ie]+j.x)),$[te]=Math.max(w.top,Math.min(w.bottom,ge*c[te]+j.y))}return $};return d.grid=c,d.coordFields=l,d};var vo={};Object.defineProperty(vo,"__esModule",{value:!0}),Object.defineProperty(vo,"edgeTarget",{enumerable:!0,get:function(){return $t.default}}),Object.defineProperty(vo,"elements",{enumerable:!0,get:function(){return es.default}}),Object.defineProperty(vo,"grid",{enumerable:!0,get:function(){return Ws.default}});var qs={};Object.defineProperty(qs,"__esModule",{value:!0}),qs.default=void 0,qs.default={id:"snappers",install:function(c){var l=c.interactStatic;l.snappers=(0,z.default)(l.snappers||{},vo),l.createSnapGrid=l.snappers.grid}};var _o={};function Vn(c,l){var d=Object.keys(c);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(c);l&&(f=f.filter(function(g){return Object.getOwnPropertyDescriptor(c,g).enumerable})),d.push.apply(d,f)}return d}function Ys(c){for(var l=1;l<arguments.length;l++){var d=null!=arguments[l]?arguments[l]:{};l%2?Vn(Object(d),!0).forEach(function(f){hu(c,f,d[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(d)):Vn(Object(d)).forEach(function(f){Object.defineProperty(c,f,Object.getOwnPropertyDescriptor(d,f))})}return c}function hu(c,l,d){return l in c?Object.defineProperty(c,l,{value:d,enumerable:!0,configurable:!0,writable:!0}):c[l]=d,c}Object.defineProperty(_o,"__esModule",{value:!0}),_o.aspectRatio=_o.default=void 0;var Qs={start:function(c){var l=c.state,d=c.rect,f=c.edges,C=l.options.ratio,T=l.options,w=T.equalDelta,x=T.modifiers;"preserve"===C&&(C=d.width/d.height),l.startCoords=(0,z.default)({},c.pageCoords),l.startRect=(0,z.default)({},d),l.ratio=C,l.equalDelta=w;var j=l.linkedEdges={top:f.top||f.left&&!f.bottom,left:f.left||f.top&&!f.right,bottom:f.bottom||f.right&&!f.top,right:f.right||f.bottom&&!f.left};if(l.xIsPrimaryAxis=!(!f.left&&!f.right),l.edgeSign=l.equalDelta?(j.left?1:-1)*(j.top?1:-1):(l.xIsPrimaryAxis?j.top:j.left)?-1:1,(0,z.default)(c.edges,j),x&&x.length){var Y=new Te.default(c.interaction);Y.copyFrom(c.interaction.modification),Y.prepareStates(x),l.subModification=Y,Y.startAll(Ys({},c))}},set:function(c){var l=c.state,d=c.rect,f=c.coords,g=(0,z.default)({},f),C=l.equalDelta?Yf:Cc;if(C(l,l.xIsPrimaryAxis,f,d),!l.subModification)return null;var T=(0,z.default)({},d);(0,oe.addEdges)(l.linkedEdges,T,{x:f.x-g.x,y:f.y-g.y});var w=l.subModification.setAll(Ys(Ys({},c),{},{rect:T,edges:l.linkedEdges,pageCoords:f,prevCoords:f,prevRect:T})),x=w.delta;return w.changed&&(C(l,Math.abs(x.x)>Math.abs(x.y),w.coords,w.rect),(0,z.default)(f,w.coords)),w.eventProps},defaults:{ratio:"preserve",equalDelta:!1,modifiers:[],enabled:!1}};function Yf(c,l,d){var f=c.startCoords,g=c.edgeSign;l?d.y=f.y+(d.x-f.x)*g:d.x=f.x+(d.y-f.y)*g}function Cc(c,l,d,f){var g=c.startRect,C=c.startCoords,T=c.ratio,w=c.edgeSign;l?d.y=C.y+(f.width/T-g.height)*w:d.x=C.x+(f.height*T-g.width)*w}_o.aspectRatio=Qs;var yy=(0,ln.makeModifier)(Qs,"aspectRatio");_o.default=yy;var ft={};Object.defineProperty(ft,"__esModule",{value:!0}),ft.default=void 0;var Qf=function(){};Qf._defaults={},ft.default=Qf;var wc={};Object.defineProperty(wc,"__esModule",{value:!0}),Object.defineProperty(wc,"default",{enumerable:!0,get:function(){return ft.default}});var Xe={};function Ec(c,l,d){return O.default.func(c)?oe.resolveRectLike(c,l.interactable,l.element,[d.x,d.y,l]):oe.resolveRectLike(c,l.interactable,l.element)}Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.getRestrictionRect=Ec,Xe.restrict=Xe.default=void 0;var Kf={start:function(c){var l=c.rect,d=c.startOffset,f=c.state,g=c.interaction,C=c.pageCoords,T=f.options,w=T.elementRect,x=(0,z.default)({left:0,top:0,right:0,bottom:0},T.offset||{});if(l&&w){var j=Ec(T.restriction,g,C);if(j){var $=j.right-j.left-l.width,Y=j.bottom-j.top-l.height;$<0&&(x.left+=$,x.right+=$),Y<0&&(x.top+=Y,x.bottom+=Y)}x.left+=d.left-l.width*w.left,x.top+=d.top-l.height*w.top,x.right+=d.right-l.width*(1-w.right),x.bottom+=d.bottom-l.height*(1-w.bottom)}f.offset=x},set:function(c){var l=c.coords,f=c.state,C=f.offset,T=Ec(f.options.restriction,c.interaction,l);if(T){var w=oe.xywhToTlbr(T);l.x=Math.max(Math.min(w.right-C.right,l.x),w.left+C.left),l.y=Math.max(Math.min(w.bottom-C.bottom,l.y),w.top+C.top)}},defaults:{restriction:null,elementRect:null,offset:null,endOnly:!1,enabled:!1}};Xe.restrict=Kf;var Ks=(0,ln.makeModifier)(Kf,"restrict");Xe.default=Ks;var Ot={};Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.restrictEdges=Ot.default=void 0;var gu={top:1/0,left:1/0,bottom:-1/0,right:-1/0},Js={top:-1/0,left:-1/0,bottom:1/0,right:1/0};function Hi(c,l){for(var d=["top","left","bottom","right"],f=0;f<d.length;f++){var g=d[f];g in c||(c[g]=l[g])}return c}var En={noInner:gu,noOuter:Js,start:function(c){var l,d=c.interaction,f=c.startOffset,g=c.state,C=g.options;if(C){var T=(0,Xe.getRestrictionRect)(C.offset,d,d.coords.start.page);l=oe.rectToXY(T)}g.offset={top:(l=l||{x:0,y:0}).y+f.top,left:l.x+f.left,bottom:l.y-f.bottom,right:l.x-f.right}},set:function(c){var l=c.coords,d=c.edges,f=c.interaction,g=c.state,C=g.offset,T=g.options;if(d){var w=(0,z.default)({},l),x=(0,Xe.getRestrictionRect)(T.inner,f,w)||{},j=(0,Xe.getRestrictionRect)(T.outer,f,w)||{};Hi(x,gu),Hi(j,Js),d.top?l.y=Math.min(Math.max(j.top+C.top,w.y),x.top+C.top):d.bottom&&(l.y=Math.max(Math.min(j.bottom+C.bottom,w.y),x.bottom+C.bottom)),d.left?l.x=Math.min(Math.max(j.left+C.left,w.x),x.left+C.left):d.right&&(l.x=Math.max(Math.min(j.right+C.right,w.x),x.right+C.right))}},defaults:{inner:null,outer:null,offset:null,endOnly:!1,enabled:!1}};Ot.restrictEdges=En;var mu=(0,ln.makeModifier)(En,"restrictEdges");Ot.default=mu;var hi={};Object.defineProperty(hi,"__esModule",{value:!0}),hi.restrictRect=hi.default=void 0;var Jf=(0,z.default)({get elementRect(){return{top:0,left:0,bottom:1,right:1}},set elementRect(c){}},Xe.restrict.defaults),Lr={start:Xe.restrict.start,set:Xe.restrict.set,defaults:Jf};hi.restrictRect=Lr;var yu=(0,ln.makeModifier)(Lr,"restrictRect");hi.default=yu;var pi={};Object.defineProperty(pi,"__esModule",{value:!0}),pi.restrictSize=pi.default=void 0;var ke={width:-1/0,height:-1/0},vy={width:1/0,height:1/0},vu={start:function(c){return Ot.restrictEdges.start(c)},set:function(c){var l=c.interaction,d=c.state,f=c.rect,g=c.edges,C=d.options;if(g){var T=oe.tlbrToXywh((0,Xe.getRestrictionRect)(C.min,l,c.coords))||ke,w=oe.tlbrToXywh((0,Xe.getRestrictionRect)(C.max,l,c.coords))||vy;d.options={endOnly:C.endOnly,inner:(0,z.default)({},Ot.restrictEdges.noInner),outer:(0,z.default)({},Ot.restrictEdges.noOuter)},g.top?(d.options.inner.top=f.bottom-T.height,d.options.outer.top=f.bottom-w.height):g.bottom&&(d.options.inner.bottom=f.top+T.height,d.options.outer.bottom=f.top+w.height),g.left?(d.options.inner.left=f.right-T.width,d.options.outer.left=f.right-w.width):g.right&&(d.options.inner.right=f.left+T.width,d.options.outer.right=f.left+w.width),Ot.restrictEdges.set(c),d.options=C}},defaults:{min:null,max:null,endOnly:!1,enabled:!1}};pi.restrictSize=vu;var Xf=(0,ln.makeModifier)(vu,"restrictSize");pi.default=Xf;var Dc={};Object.defineProperty(Dc,"__esModule",{value:!0}),Object.defineProperty(Dc,"default",{enumerable:!0,get:function(){return ft.default}});var Vr={};Object.defineProperty(Vr,"__esModule",{value:!0}),Vr.snap=Vr.default=void 0;var _u={start:function(c){var l,ne,ie,d=c.interaction,f=c.interactable,g=c.element,C=c.rect,T=c.state,w=c.startOffset,x=T.options,j=x.offsetWithOrigin?(0,oe.rectToXY)((0,oe.resolveRectLike)((ne=c).state.options.origin,null,null,[ie=ne.interaction.element]))||(0,De.default)(ne.interactable,ie,ne.interaction.prepared.name):{x:0,y:0};if("startCoords"===x.offset)l={x:d.coords.start.page.x,y:d.coords.start.page.y};else{var $=(0,oe.resolveRectLike)(x.offset,f,g,[d]);(l=(0,oe.rectToXY)($)||{x:0,y:0}).x+=j.x,l.y+=j.y}var Y=x.relativePoints;T.offsets=C&&Y&&Y.length?Y.map(function(ne,ie){return{index:ie,relativePoint:ne,x:w.left-C.width*ne.x+l.x,y:w.top-C.height*ne.y+l.y}}):[{index:0,relativePoint:null,x:l.x,y:l.y}]},set:function(c){var l=c.interaction,d=c.coords,f=c.state,g=f.options,C=f.offsets,T=(0,De.default)(l.interactable,l.element,l.prepared.name),w=(0,z.default)({},d),x=[];g.offsetWithOrigin||(w.x-=T.x,w.y-=T.y);for(var j=0;j<C.length;j++)for(var $=C[j],Y=w.x-$.x,ne=w.y-$.y,ie=0,te=g.targets.length;ie<te;ie++){var ue,ge=g.targets[ie];(ue=O.default.func(ge)?ge(Y,ne,l._proxy,$,ie):ge)&&x.push({x:(O.default.number(ue.x)?ue.x:Y)+$.x,y:(O.default.number(ue.y)?ue.y:ne)+$.y,range:O.default.number(ue.range)?ue.range:g.range,source:ge,index:ie,offset:$})}for(var de={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}},Ee=0;Ee<x.length;Ee++){var xe=x[Ee],Le=xe.range,it=xe.x-w.x,at=xe.y-w.y,Qe=(0,Jn.default)(it,at),tt=Qe<=Le;Le===1/0&&de.inRange&&de.range!==1/0&&(tt=!1),de.target&&!(tt?de.inRange&&Le!==1/0?Qe/Le<de.distance/de.range:Le===1/0&&de.range!==1/0||Qe<de.distance:!de.inRange&&Qe<de.distance)||(de.target=xe,de.distance=Qe,de.range=Le,de.inRange=tt,de.delta.x=it,de.delta.y=at)}return de.inRange&&(d.x=de.target.x,d.y=de.target.y),f.closest=de,de},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!0,origin:null,relativePoints:null,endOnly:!1,enabled:!1}};Vr.snap=_u;var Zf=(0,ln.makeModifier)(_u,"snap");Vr.default=Zf;var le={};function Ye(c,l){(null==l||l>c.length)&&(l=c.length);for(var d=0,f=Array(l);d<l;d++)f[d]=c[d];return f}Object.defineProperty(le,"__esModule",{value:!0}),le.snapSize=le.default=void 0;var gi={start:function(c){var l=c.state,d=c.edges,f=l.options;if(!d)return null;c.state={options:{targets:null,relativePoints:[{x:d.left?0:1,y:d.top?0:1}],offset:f.offset||"self",origin:{x:0,y:0},range:f.range}},l.targetFields=l.targetFields||[["width","height"],["x","y"]],Vr.snap.start(c),l.offsets=c.state.offsets,c.state=l},set:function(c){var l,f=c.interaction,g=c.state,C=c.coords,T=g.options,w=g.offsets,x={x:C.x-w[0].x,y:C.y-w[0].y};g.options=(0,z.default)({},T),g.options.targets=[];for(var j=0;j<(T.targets||[]).length;j++){var $=(T.targets||[])[j],Y=void 0;if(Y=O.default.func($)?$(x.x,x.y,f):$){for(var ne=0;ne<g.targetFields.length;ne++){var ie=(2,function(de){if(Array.isArray(de))return de}(l=g.targetFields[ne])||function(de,Ee){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(de)){var xe=[],Le=!0,it=!1,at=void 0;try{for(var Qe,tt=de[Symbol.iterator]();!(Le=(Qe=tt.next()).done)&&(xe.push(Qe.value),2!==xe.length);Le=!0);}catch(Sn){it=!0,at=Sn}finally{try{Le||null==tt.return||tt.return()}finally{if(it)throw at}}return xe}}(l)||function(de,Ee){if(de){if("string"==typeof de)return Ye(de,2);var xe=Object.prototype.toString.call(de).slice(8,-1);return"Object"===xe&&de.constructor&&(xe=de.constructor.name),"Map"===xe||"Set"===xe?Array.from(de):"Arguments"===xe||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(xe)?Ye(de,2):void 0}}(l)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),te=ie[0],ue=ie[1];if(te in Y||ue in Y){Y.x=Y[te],Y.y=Y[ue];break}}g.options.targets.push(Y)}}var ge=Vr.snap.set(c);return g.options=T,ge},defaults:{range:1/0,targets:null,offset:null,endOnly:!1,enabled:!1}};le.snapSize=gi;var zt=(0,ln.makeModifier)(gi,"snapSize");le.default=zt;var $i={};Object.defineProperty($i,"__esModule",{value:!0}),$i.snapEdges=$i.default=void 0;var bo={start:function(c){var l=c.edges;return l?(c.state.targetFields=c.state.targetFields||[[l.left?"left":"right",l.top?"top":"bottom"]],le.snapSize.start(c)):null},set:le.snapSize.set,defaults:(0,z.default)((0,ki.default)(le.snapSize.defaults),{targets:null,range:null,offset:{x:0,y:0}})};$i.snapEdges=bo;var br=(0,ln.makeModifier)(bo,"snapEdges");$i.default=br;var ts={};Object.defineProperty(ts,"__esModule",{value:!0}),Object.defineProperty(ts,"default",{enumerable:!0,get:function(){return ft.default}});var ns={};Object.defineProperty(ns,"__esModule",{value:!0}),Object.defineProperty(ns,"default",{enumerable:!0,get:function(){return ft.default}});var rs={};Object.defineProperty(rs,"__esModule",{value:!0}),rs.default=void 0,rs.default={aspectRatio:_o.default,restrictEdges:Ot.default,restrict:Xe.default,restrictRect:hi.default,restrictSize:pi.default,snapEdges:$i.default,snap:Vr.default,snapSize:le.default,spring:ts.default,avoid:wc.default,transform:ns.default,rubberband:Dc.default};var zi={};Object.defineProperty(zi,"__esModule",{value:!0}),zi.default=void 0,zi.default={id:"modifiers",install:function(c){var l=c.interactStatic;for(var d in c.usePlugin(ln.default),c.usePlugin(qs.default),l.modifiers=rs.default,rs.default){var f=rs.default[d],g=f._defaults;g._methods=f._methods,c.defaults.perAction[d]=g}}};var kt={};function or(c){return(or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(l){return typeof l}:function(l){return l&&"function"==typeof Symbol&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(c)}function Gi(c,l){return(Gi=Object.setPrototypeOf||function(d,f){return d.__proto__=f,d})(c,l)}function jr(c,l){return!l||"object"!==or(l)&&"function"!=typeof l?Dn(c):l}function Dn(c){if(void 0===c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function Zs(c){return(Zs=Object.setPrototypeOf?Object.getPrototypeOf:function(l){return l.__proto__||Object.getPrototypeOf(l)})(c)}function sr(c,l,d){return l in c?Object.defineProperty(c,l,{value:d,enumerable:!0,configurable:!0,writable:!0}):c[l]=d,c}Object.defineProperty(kt,"__esModule",{value:!0}),kt.PointerEvent=kt.default=void 0;var th=function(c){!function(w,x){if("function"!=typeof x&&null!==x)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(x&&x.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),x&&Gi(w,x)}(T,c);var d,f,g,C=(f=T,g=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(w){return!1}}(),function(){var w,x=Zs(f);if(g){var j=Zs(this).constructor;w=Reflect.construct(x,arguments,j)}else w=x.apply(this,arguments);return jr(this,w)});function T(w,x,j,$,Y,ne){var ie;if(function(ge,de){if(!(ge instanceof de))throw new TypeError("Cannot call a class as a function")}(this,T),sr(Dn(ie=C.call(this,Y)),"type",void 0),sr(Dn(ie),"originalEvent",void 0),sr(Dn(ie),"pointerId",void 0),sr(Dn(ie),"pointerType",void 0),sr(Dn(ie),"double",void 0),sr(Dn(ie),"pageX",void 0),sr(Dn(ie),"pageY",void 0),sr(Dn(ie),"clientX",void 0),sr(Dn(ie),"clientY",void 0),sr(Dn(ie),"dt",void 0),sr(Dn(ie),"eventable",void 0),Ce.pointerExtend(Dn(ie),j),j!==x&&Ce.pointerExtend(Dn(ie),x),ie.timeStamp=ne,ie.originalEvent=j,ie.type=w,ie.pointerId=Ce.getPointerId(x),ie.pointerType=Ce.getPointerType(x),ie.target=$,ie.currentTarget=null,"tap"===w){var te=Y.getPointerIndex(x);ie.dt=ie.timeStamp-Y.pointers[te].downTime,ie.double=!!(Y.prevTap&&"doubletap"!==Y.prevTap.type&&Y.prevTap.target===ie.target&&ie.timeStamp-Y.tapTime<500)}else"doubletap"===w&&(ie.dt=x.timeStamp-Y.tapTime);return ie}return(d=[{key:"_subtractOrigin",value:function(w){var x=w.x,j=w.y;return this.pageX-=x,this.pageY-=j,this.clientX-=x,this.clientY-=j,this}},{key:"_addOrigin",value:function(w){var x=w.x,j=w.y;return this.pageX+=x,this.pageY+=j,this.clientX+=x,this.clientY+=j,this}},{key:"preventDefault",value:function(){this.originalEvent.preventDefault()}}])&&function(c,l){for(var d=0;d<l.length;d++){var f=l[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}(T.prototype,d),T}(Xn.BaseEvent);kt.PointerEvent=kt.default=th;var Wi={};Object.defineProperty(Wi,"__esModule",{value:!0}),Wi.default=void 0;var Co={id:"pointer-events/base",before:["inertia","modifiers","auto-start","actions"],install:function(c){c.pointerEvents=Co,c.defaults.actions.pointerEvents=Co.defaults,(0,z.default)(c.actions.phaselessTypes,Co.types)},listeners:{"interactions:new":function(c){var l=c.interaction;l.prevTap=null,l.tapTime=0},"interactions:update-pointer":function(c){var d=c.pointerInfo;!c.down&&d.hold||(d.hold={duration:1/0,timeout:null})},"interactions:move":function(c,l){var d=c.interaction,f=c.pointer,g=c.event,C=c.eventTarget;c.duplicate||d.pointerIsDown&&!d.pointerWasMoved||(d.pointerIsDown&&Sc(c),Br({interaction:d,pointer:f,event:g,eventTarget:C,type:"move"},l))},"interactions:down":function(c,l){(function(d,f){for(var g=d.interaction,C=d.pointer,T=d.event,w=d.eventTarget,j=g.pointers[d.pointerIndex].hold,$=b.getPath(w),Y={interaction:g,pointer:C,event:T,eventTarget:w,type:"hold",targets:[],path:$,node:null},ne=0;ne<$.length;ne++)Y.node=$[ne],f.fire("pointerEvents:collect-targets",Y);if(Y.targets.length){for(var te=1/0,ue=0;ue<Y.targets.length;ue++){var ge=Y.targets[ue].eventable.options.holdDuration;ge<te&&(te=ge)}j.duration=te,j.timeout=setTimeout(function(){Br({interaction:g,eventTarget:w,pointer:C,event:T,type:"hold"},f)},te)}})(c,l),Br(c,l)},"interactions:up":function(c,l){var d,g;Sc(c),Br(c,l),(g=(d=c).interaction).pointerWasMoved||Br({interaction:g,eventTarget:d.eventTarget,pointer:d.pointer,event:d.event,type:"tap"},l)},"interactions:cancel":function(c,l){Sc(c),Br(c,l)}},PointerEvent:kt.PointerEvent,fire:Br,collectEventTargets:ea,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:{down:!0,move:!0,up:!0,cancel:!0,tap:!0,doubletap:!0,hold:!0}};function Br(c,l){var d=c.interaction,f=c.pointer,g=c.event,C=c.eventTarget,T=c.type,w=c.targets,x=void 0===w?ea(c,l):w,j=new kt.PointerEvent(T,f,g,C,d,l.now());l.fire("pointerEvents:new",{pointerEvent:j});for(var $={interaction:d,pointer:f,event:g,eventTarget:C,targets:x,type:T,pointerEvent:j},Y=0;Y<x.length;Y++){var ne=x[Y];for(var ie in ne.props||{})j[ie]=ne.props[ie];var te=(0,De.default)(ne.eventable,ne.node);if(j._subtractOrigin(te),j.eventable=ne.eventable,j.currentTarget=ne.node,ne.eventable.fire(j),j._addOrigin(te),j.immediatePropagationStopped||j.propagationStopped&&Y+1<x.length&&x[Y+1].node!==j.currentTarget)break}if(l.fire("pointerEvents:fired",$),"tap"===T){var ue=j.double?Br({interaction:d,pointer:f,event:g,eventTarget:C,type:"doubletap"},l):j;d.prevTap=ue,d.tapTime=ue.timeStamp}return j}function ea(c,l){var d=c.interaction,f=c.pointer,g=c.event,C=c.eventTarget,T=c.type,w=d.getPointerIndex(f),x=d.pointers[w];if("tap"===T&&(d.pointerWasMoved||!x||x.downTarget!==C))return[];for(var j=b.getPath(C),$={interaction:d,pointer:f,event:g,eventTarget:C,type:T,path:j,targets:[],node:null},Y=0;Y<j.length;Y++)$.node=j[Y],l.fire("pointerEvents:collect-targets",$);return"hold"===T&&($.targets=$.targets.filter(function(ie){var te;return ie.eventable.options.holdDuration===(null==(te=d.pointers[w])?void 0:te.hold.duration)})),$.targets}function Sc(c){var f=c.interaction.pointers[c.pointerIndex].hold;f&&f.timeout&&(clearTimeout(f.timeout),f.timeout=null)}Wi.default=Co;var qi={};function wu(c){var l=c.interaction;l.holdIntervalHandle&&(clearInterval(l.holdIntervalHandle),l.holdIntervalHandle=null)}Object.defineProperty(qi,"__esModule",{value:!0}),qi.default=void 0;var Eu={id:"pointer-events/holdRepeat",install:function(c){c.usePlugin(Wi.default);var l=c.pointerEvents;l.defaults.holdRepeatInterval=0,l.types.holdrepeat=c.actions.phaselessTypes.holdrepeat=!0},listeners:["move","up","cancel","endall"].reduce(function(c,l){return c["pointerEvents:".concat(l)]=wu,c},{"pointerEvents:new":function(c){var l=c.pointerEvent;"hold"===l.type&&(l.count=(l.count||0)+1)},"pointerEvents:fired":function(c,l){var d=c.interaction,f=c.pointerEvent,g=c.eventTarget,C=c.targets;if("hold"===f.type&&C.length){var T=C[0].eventable.options.holdRepeatInterval;T<=0||(d.holdIntervalHandle=setTimeout(function(){l.pointerEvents.fire({interaction:d,eventTarget:g,type:"hold",pointer:f,event:f},l)},T))}}})};qi.default=Eu;var is={};function Du(c){return(0,z.default)(this.events.options,c),this}Object.defineProperty(is,"__esModule",{value:!0}),is.default=void 0,is.default={id:"pointer-events/interactableTargets",install:function(c){var l=c.Interactable;l.prototype.pointerEvents=Du;var d=l.prototype._backCompatOption;l.prototype._backCompatOption=function(f,g){var C=d.call(this,f,g);return C===this&&(this.events.options[f]=g),C}},listeners:{"pointerEvents:collect-targets":function(c,l){var d=c.targets,f=c.node,g=c.type,C=c.eventTarget;l.interactables.forEachMatch(f,function(T){var w=T.events;w.types[g]&&w.types[g].length&&T.testIgnoreAllow(w.options,f,C)&&d.push({node:f,eventable:w,props:{interactable:T}})})},"interactable:new":function(c){var l=c.interactable;l.events.getRect=function(d){return l.getRect(d)}},"interactable:set":function(c,l){var d=c.interactable,f=c.options;(0,z.default)(d.events.options,l.pointerEvents.defaults),(0,z.default)(d.events.options,f.pointerEvents||{})}}};var na={};Object.defineProperty(na,"__esModule",{value:!0}),na.default=void 0,na.default={id:"pointer-events",install:function(c){c.usePlugin(Wi),c.usePlugin(qi.default),c.usePlugin(is.default)}};var Gt={};function Ur(c){var l=c.Interactable;c.actions.phases.reflow=!0,l.prototype.reflow=function(d){return function(f,g,C){for(var T=O.default.string(f.target)?Je.from(f._context.querySelectorAll(f.target)):[f.target],w=C.window.Promise,x=w?[]:null,j=function(){var Y=T[$],ne=f.getRect(Y);if(!ne)return"break";var ie=Je.find(C.interactions.list,function(Ee){return Ee.interacting()&&Ee.interactable===f&&Ee.element===Y&&Ee.prepared.name===g.name}),te=void 0;if(ie)ie.move(),x&&(te=ie._reflowPromise||new w(function(Ee){ie._reflowResolve=Ee}));else{var ue=(0,oe.tlbrToXywh)(ne),ge={page:{x:ue.x,y:ue.y},client:{x:ue.x,y:ue.y},timeStamp:C.now()},de=Ce.coordsToEvent(ge);te=function(Ee,xe,Le,it,at){var Qe=Ee.interactions.new({pointerType:"reflow"}),tt={interaction:Qe,event:at,pointer:at,eventTarget:Le,phase:"reflow"};Qe.interactable=xe,Qe.element=Le,Qe.prevEvent=at,Qe.updatePointer(at,at,Le,!0),Ce.setZeroCoords(Qe.coords.delta),(0,zn.copyAction)(Qe.prepared,it),Qe._doPhase(tt);var Sn=Ee.window.Promise,Yn=Sn?new Sn(function(Iu){Qe._reflowResolve=Iu}):void 0;return Qe._reflowPromise=Yn,Qe.start(it,xe,Le),Qe._interacting?(Qe.move(tt),Qe.end(at)):(Qe.stop(),Qe._reflowResolve()),Qe.removePointer(at,at),Yn}(C,f,Y,g,de)}x&&x.push(te)},$=0;$<T.length&&"break"!==j();$++);return x&&w.all(x).then(function(){return f})}(this,d,c)}}Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.install=Ur,Gt.default=void 0,Gt.default={id:"reflow",install:Ur,listeners:{"interactions:stop":function(c,l){var d=c.interaction;"reflow"===d.pointerType&&(d._reflowResolve&&d._reflowResolve(),Je.remove(l.interactions.list,d))}}};var qn={exports:{}};function Su(c){return(Su="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(l){return typeof l}:function(l){return l&&"function"==typeof Symbol&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(c)}if(Object.defineProperty(qn.exports,"__esModule",{value:!0}),qn.exports.default=void 0,yn.default.use(Lt.default),yn.default.use(di.default),yn.default.use(na.default),yn.default.use(Vt.default),yn.default.use(zi.default),yn.default.use(Se.default),yn.default.use(Fs.default),yn.default.use(yr.default),yn.default.use(Gt.default),qn.exports.default=yn.default,"object"===Su(qn)&&qn)try{qn.exports=yn.default}catch(c){}yn.default.default=yn.default,qn=qn.exports;var Yi={exports:{}};function Tu(c){return(Tu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(l){return typeof l}:function(l){return l&&"function"==typeof Symbol&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(c)}if(Object.defineProperty(Yi.exports,"__esModule",{value:!0}),Yi.exports.default=void 0,Yi.exports.default=qn.default,"object"===Tu(Yi)&&Yi)try{Yi.exports=qn.default}catch(c){}return qn.default.default=qn.default,Yi.exports}()},686:function(mn,gt,Fe){var se,we;void 0!==(we="function"==typeof(se=function(X){"use strict";var V,_,F={template:"[%t] %l:",levelFormatter:function(P){return P.toUpperCase()},nameFormatter:function(P){return P||"root"},timestampFormatter:function(P){return P.toTimeString().replace(/.*(\d{2}:\d{2}:\d{2}).*/,"$1")},format:void 0},U={},L={reg:function(P){if(!P||!P.getLogger)throw new TypeError("Argument is not a root logger");V=P},apply:function(P,A){if(!P||!P.setLevel)throw new TypeError("Argument is not a logger");var I=P.methodFactory,S=P.name||"",D=U[S]||U[""]||F;return U[S]||(P.methodFactory=function(y,v,p){var b=I(y,v,p),R=U[p]||U[""],q=-1!==R.template.indexOf("%t"),W=-1!==R.template.indexOf("%l"),Q=-1!==R.template.indexOf("%n");return function(){for(var J="",ee=arguments.length,z=Array(ee),oe=0;oe<ee;oe++)z[oe]=arguments[oe];if(S||!U[p]){var me=R.timestampFormatter(new Date),pe=R.levelFormatter(y),De=R.nameFormatter(p);R.format?J+=R.format(pe,De,me):(J+=R.template,q&&(J=J.replace(/%t/,me)),W&&(J=J.replace(/%l/,pe)),Q&&(J=J.replace(/%n/,De))),z.length&&"string"==typeof z[0]?z[0]=J+" "+z[0]:z.unshift(J)}b.apply(void 0,z)}}),(A=A||{}).template&&(A.format=void 0),U[S]=function(P){for(var S,A=1,I=arguments.length;A<I;A++)for(S in arguments[A])Object.prototype.hasOwnProperty.call(arguments[A],S)&&(P[S]=arguments[A][S]);return P}({},D,A),P.setLevel(P.getLevel()),V||P.warn("It is necessary to call the function reg() of loglevel-plugin-prefix before calling apply. From the next release, it will throw an error. See more: https://github.com/kutuluk/loglevel-plugin-prefix/blob/master/README.md"),P}};return X&&(_=X.prefix,L.noConflict=function(){return X.prefix===L&&(X.prefix=_),L}),L})?se.call(gt,Fe,gt,mn):se)&&(mn.exports=we)},330:function(mn,gt,Fe){var se,we;!function(X,O){"use strict";void 0!==(we="function"==typeof(se=function(){var X=function(){},O="undefined",F=typeof window!==O&&typeof window.navigator!==O&&/Trident\/|MSIE /.test(window.navigator.userAgent),V=["trace","debug","info","warn","error"];function U(M,y){var v=M[y];if("function"==typeof v.bind)return v.bind(M);try{return Function.prototype.bind.call(v,M)}catch(p){return function(){return Function.prototype.apply.apply(v,[M,arguments])}}}function G(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function B(M){return"debug"===M&&(M="log"),typeof console!==O&&("trace"===M&&F?G:void 0!==console[M]?U(console,M):void 0!==console.log?U(console,"log"):X)}function L(M,y){for(var v=0;v<V.length;v++){var p=V[v];this[p]=v<M?X:this.methodFactory(p,M,y)}this.log=this.debug}function _(M,y,v){return function(){typeof console!==O&&(L.call(this,y,v),this[M].apply(this,arguments))}}function P(M,y,v){return B(M)||_.apply(this,arguments)}function A(M,y,v){var b,p=this,R="loglevel";function W(){var J;if(typeof window!==O&&R){try{J=window.localStorage[R]}catch(oe){}if(typeof J===O)try{var ee=window.document.cookie,z=ee.indexOf(encodeURIComponent(R)+"=");-1!==z&&(J=/^([^;]+)/.exec(ee.slice(z))[1])}catch(oe){}return void 0===p.levels[J]&&(J=void 0),J}}"string"==typeof M?R+=":"+M:"symbol"==typeof M&&(R=void 0),p.name=M,p.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},p.methodFactory=v||P,p.getLevel=function(){return b},p.setLevel=function(J,ee){if("string"==typeof J&&void 0!==p.levels[J.toUpperCase()]&&(J=p.levels[J.toUpperCase()]),!("number"==typeof J&&J>=0&&J<=p.levels.SILENT))throw"log.setLevel() called with invalid level: "+J;if(b=J,!1!==ee&&function(J){var ee=(V[J]||"silent").toUpperCase();if(typeof window!==O&&R){try{return void(window.localStorage[R]=ee)}catch(z){}try{window.document.cookie=encodeURIComponent(R)+"="+ee+";"}catch(z){}}}(J),L.call(p,J,M),typeof console===O&&J<p.levels.SILENT)return"No console available for logging"},p.setDefaultLevel=function(J){W()||p.setLevel(J,!1)},p.enableAll=function(J){p.setLevel(p.levels.TRACE,J)},p.disableAll=function(J){p.setLevel(p.levels.SILENT,J)};var Q=W();null==Q&&(Q=null==y?"WARN":y),p.setLevel(Q,!1)}var I=new A,S={};I.getLogger=function(y){if("symbol"!=typeof y&&"string"!=typeof y||""===y)throw new TypeError("You must supply a name when creating a logger.");var v=S[y];return v||(v=S[y]=new A(y,I.getLevel(),I.methodFactory)),v};var D=typeof window!==O?window.log:void 0;return I.noConflict=function(){return typeof window!==O&&window.log===I&&(window.log=D),I},I.getLoggers=function(){return S},I.default=I,I})?se.call(gt,Fe,gt,mn):se)&&(mn.exports=we)}()},805:(mn,gt,Fe)=>{parcelRequire=function(se,we,X,O){var F,V="function"==typeof parcelRequire&&parcelRequire;function G(_,P){if(!we[_]){if(!se[_]){var A="function"==typeof parcelRequire&&parcelRequire;if(!P&&A)return A(_,!0);if(V)return V(_,!0);if("string"==typeof _)return Fe(784)(_);var I=new Error("Cannot find module '"+_+"'");throw I.code="MODULE_NOT_FOUND",I}D.resolve=function(M){return se[_][1][M]||M},D.cache={};var S=we[_]=new G.Module(_);se[_][0].call(S.exports,D,S,S.exports,this)}return we[_].exports;function D(M){return G(D.resolve(M))}}G.isParcelRequire=!0,G.Module=function(_){this.id=_,this.bundle=G,this.exports={}},G.modules=se,G.cache=we,G.parent=V,G.register=function(_,P){se[_]=[function(A,I){I.exports=P},{}]};for(var B=0;B<X.length;B++)try{G(X[B])}catch(_){F||(F=_)}if(X.length){var L=G(X[X.length-1]);mn.exports=L}if(parcelRequire=G,F)throw F;return G}({EgBh:[function(se,we,X){var O={};O.useBlobBuilder=function(){try{return new Blob([]),!1}catch(U){return!0}}(),O.useArrayBufferView=!O.useBlobBuilder&&function(){try{return 0===new Blob([new Uint8Array([])]).size}catch(U){return!0}}(),we.exports.binaryFeatures=O;var F=we.exports.BlobBuilder;function V(){this._pieces=[],this._parts=[]}"undefined"!=typeof window&&(F=we.exports.BlobBuilder=window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder||window.BlobBuilder),V.prototype.append=function(U){"number"==typeof U?this._pieces.push(U):(this.flush(),this._parts.push(U))},V.prototype.flush=function(){if(this._pieces.length>0){var U=new Uint8Array(this._pieces);O.useArrayBufferView||(U=U.buffer),this._parts.push(U),this._pieces=[]}},V.prototype.getBuffer=function(){if(this.flush(),O.useBlobBuilder){for(var U=new F,G=0,B=this._parts.length;G<B;G++)U.append(this._parts[G]);return U.getBlob()}return new Blob(this._parts)},we.exports.BufferBuilder=V},{}],kdPp:[function(se,we,X){var O=se("./bufferbuilder").BufferBuilder,F=se("./bufferbuilder").binaryFeatures;function U(_){this.index=0,this.dataBuffer=_,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}function G(){this.bufferBuilder=new O}function B(_){var P=_.charCodeAt(0);return P<=2047?"00":P<=65535?"000":P<=2097151?"0000":P<=67108863?"00000":"000000"}we.exports={unpack:function(_){return new U(_).unpack()},pack:function(_){var P=new G;return P.pack(_),P.getBuffer()}},U.prototype.unpack=function(){var _,P=this.unpack_uint8();if(P<128)return P;if((224^P)<32)return(224^P)-32;if((_=160^P)<=15)return this.unpack_raw(_);if((_=176^P)<=15)return this.unpack_string(_);if((_=144^P)<=15)return this.unpack_array(_);if((_=128^P)<=15)return this.unpack_map(_);switch(P){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:case 213:case 214:case 215:return;case 216:return _=this.unpack_uint16(),this.unpack_string(_);case 217:return _=this.unpack_uint32(),this.unpack_string(_);case 218:return _=this.unpack_uint16(),this.unpack_raw(_);case 219:return _=this.unpack_uint32(),this.unpack_raw(_);case 220:return _=this.unpack_uint16(),this.unpack_array(_);case 221:return _=this.unpack_uint32(),this.unpack_array(_);case 222:return _=this.unpack_uint16(),this.unpack_map(_);case 223:return _=this.unpack_uint32(),this.unpack_map(_)}},U.prototype.unpack_uint8=function(){var _=255&this.dataView[this.index];return this.index++,_},U.prototype.unpack_uint16=function(){var _=this.read(2),P=256*(255&_[0])+(255&_[1]);return this.index+=2,P},U.prototype.unpack_uint32=function(){var _=this.read(4),P=256*(256*(256*_[0]+_[1])+_[2])+_[3];return this.index+=4,P},U.prototype.unpack_uint64=function(){var _=this.read(8),P=256*(256*(256*(256*(256*(256*(256*_[0]+_[1])+_[2])+_[3])+_[4])+_[5])+_[6])+_[7];return this.index+=8,P},U.prototype.unpack_int8=function(){var _=this.unpack_uint8();return _<128?_:_-256},U.prototype.unpack_int16=function(){var _=this.unpack_uint16();return _<32768?_:_-65536},U.prototype.unpack_int32=function(){var _=this.unpack_uint32();return _<Math.pow(2,31)?_:_-Math.pow(2,32)},U.prototype.unpack_int64=function(){var _=this.unpack_uint64();return _<Math.pow(2,63)?_:_-Math.pow(2,64)},U.prototype.unpack_raw=function(_){if(this.length<this.index+_)throw new Error("BinaryPackFailure: index is out of range "+this.index+" "+_+" "+this.length);var P=this.dataBuffer.slice(this.index,this.index+_);return this.index+=_,P},U.prototype.unpack_string=function(_){for(var P,A,I=this.read(_),S=0,D="";S<_;)(P=I[S])<128?(D+=String.fromCharCode(P),S++):(192^P)<32?(A=(192^P)<<6|63&I[S+1],D+=String.fromCharCode(A),S+=2):(A=(15&P)<<12|(63&I[S+1])<<6|63&I[S+2],D+=String.fromCharCode(A),S+=3);return this.index+=_,D},U.prototype.unpack_array=function(_){for(var P=new Array(_),A=0;A<_;A++)P[A]=this.unpack();return P},U.prototype.unpack_map=function(_){for(var P={},A=0;A<_;A++){var I=this.unpack(),S=this.unpack();P[I]=S}return P},U.prototype.unpack_float=function(){var _=this.unpack_uint32();return(_>>31==0?1:-1)*(8388607&_|8388608)*Math.pow(2,(_>>23&255)-127-23)},U.prototype.unpack_double=function(){var _=this.unpack_uint32(),P=this.unpack_uint32(),A=(_>>20&2047)-1023;return(_>>31==0?1:-1)*((1048575&_|1048576)*Math.pow(2,A-20)+P*Math.pow(2,A-52))},U.prototype.read=function(_){var P=this.index;if(P+_<=this.length)return this.dataView.subarray(P,P+_);throw new Error("BinaryPackFailure: read index out of range")},G.prototype.getBuffer=function(){return this.bufferBuilder.getBuffer()},G.prototype.pack=function(_){var P=typeof _;if("string"===P)this.pack_string(_);else if("number"===P)Math.floor(_)===_?this.pack_integer(_):this.pack_double(_);else if("boolean"===P)!0===_?this.bufferBuilder.append(195):!1===_&&this.bufferBuilder.append(194);else if("undefined"===P)this.bufferBuilder.append(192);else{if("object"!==P)throw new Error('Type "'+P+'" not yet supported');if(null===_)this.bufferBuilder.append(192);else{var A=_.constructor;if(A==Array)this.pack_array(_);else if(A==Blob||A==File||_ instanceof Blob||_ instanceof File)this.pack_bin(_);else if(A==ArrayBuffer)this.pack_bin(F.useArrayBufferView?new Uint8Array(_):_);else if("BYTES_PER_ELEMENT"in _)this.pack_bin(F.useArrayBufferView?new Uint8Array(_.buffer):_.buffer);else if(A==Object||A.toString().startsWith("class"))this.pack_object(_);else if(A==Date)this.pack_string(_.toString());else{if("function"!=typeof _.toBinaryPack)throw new Error('Type "'+A.toString()+'" not yet supported');this.bufferBuilder.append(_.toBinaryPack())}}}this.bufferBuilder.flush()},G.prototype.pack_bin=function(_){var P=_.length||_.byteLength||_.size;if(P<=15)this.pack_uint8(160+P);else if(P<=65535)this.bufferBuilder.append(218),this.pack_uint16(P);else{if(!(P<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(219),this.pack_uint32(P)}this.bufferBuilder.append(_)},G.prototype.pack_string=function(_){var P=function(_){return _.length>600?new Blob([_]).size:_.replace(/[^\u0000-\u007F]/g,B).length}(_);if(P<=15)this.pack_uint8(176+P);else if(P<=65535)this.bufferBuilder.append(216),this.pack_uint16(P);else{if(!(P<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(217),this.pack_uint32(P)}this.bufferBuilder.append(_)},G.prototype.pack_array=function(_){var P=_.length;if(P<=15)this.pack_uint8(144+P);else if(P<=65535)this.bufferBuilder.append(220),this.pack_uint16(P);else{if(!(P<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(221),this.pack_uint32(P)}for(var A=0;A<P;A++)this.pack(_[A])},G.prototype.pack_integer=function(_){if(_>=-32&&_<=127)this.bufferBuilder.append(255&_);else if(_>=0&&_<=255)this.bufferBuilder.append(204),this.pack_uint8(_);else if(_>=-128&&_<=127)this.bufferBuilder.append(208),this.pack_int8(_);else if(_>=0&&_<=65535)this.bufferBuilder.append(205),this.pack_uint16(_);else if(_>=-32768&&_<=32767)this.bufferBuilder.append(209),this.pack_int16(_);else if(_>=0&&_<=4294967295)this.bufferBuilder.append(206),this.pack_uint32(_);else if(_>=-2147483648&&_<=2147483647)this.bufferBuilder.append(210),this.pack_int32(_);else if(_>=-0x8000000000000000&&_<=0x8000000000000000)this.bufferBuilder.append(211),this.pack_int64(_);else{if(!(_>=0&&_<=0x10000000000000000))throw new Error("Invalid integer");this.bufferBuilder.append(207),this.pack_uint64(_)}},G.prototype.pack_double=function(_){var P=0;_<0&&(P=1,_=-_);var A=Math.floor(Math.log(_)/Math.LN2),I=_/Math.pow(2,A)-1,S=Math.floor(I*Math.pow(2,52)),D=Math.pow(2,32),M=P<<31|A+1023<<20|S/D&1048575,y=S%D;this.bufferBuilder.append(203),this.pack_int32(M),this.pack_int32(y)},G.prototype.pack_object=function(_){var P=Object.keys(_).length;if(P<=15)this.pack_uint8(128+P);else if(P<=65535)this.bufferBuilder.append(222),this.pack_uint16(P);else{if(!(P<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(223),this.pack_uint32(P)}for(var A in _)_.hasOwnProperty(A)&&(this.pack(A),this.pack(_[A]))},G.prototype.pack_uint8=function(_){this.bufferBuilder.append(_)},G.prototype.pack_uint16=function(_){this.bufferBuilder.append(_>>8),this.bufferBuilder.append(255&_)},G.prototype.pack_uint32=function(_){var P=4294967295&_;this.bufferBuilder.append((4278190080&P)>>>24),this.bufferBuilder.append((16711680&P)>>>16),this.bufferBuilder.append((65280&P)>>>8),this.bufferBuilder.append(255&P)},G.prototype.pack_uint64=function(_){var P=_/Math.pow(2,32),A=_%Math.pow(2,32);this.bufferBuilder.append((4278190080&P)>>>24),this.bufferBuilder.append((16711680&P)>>>16),this.bufferBuilder.append((65280&P)>>>8),this.bufferBuilder.append(255&P),this.bufferBuilder.append((4278190080&A)>>>24),this.bufferBuilder.append((16711680&A)>>>16),this.bufferBuilder.append((65280&A)>>>8),this.bufferBuilder.append(255&A)},G.prototype.pack_int8=function(_){this.bufferBuilder.append(255&_)},G.prototype.pack_int16=function(_){this.bufferBuilder.append((65280&_)>>8),this.bufferBuilder.append(255&_)},G.prototype.pack_int32=function(_){this.bufferBuilder.append(_>>>24&255),this.bufferBuilder.append((16711680&_)>>>16),this.bufferBuilder.append((65280&_)>>>8),this.bufferBuilder.append(255&_)},G.prototype.pack_int64=function(_){var P=Math.floor(_/Math.pow(2,32)),A=_%Math.pow(2,32);this.bufferBuilder.append((4278190080&P)>>>24),this.bufferBuilder.append((16711680&P)>>>16),this.bufferBuilder.append((65280&P)>>>8),this.bufferBuilder.append(255&P),this.bufferBuilder.append((4278190080&A)>>>24),this.bufferBuilder.append((16711680&A)>>>16),this.bufferBuilder.append((65280&A)>>>8),this.bufferBuilder.append(255&A)}},{"./bufferbuilder":"EgBh"}],iSxC:[function(se,we,X){"use strict";function F(v){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(p){return typeof p}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(v)}Object.defineProperty(X,"__esModule",{value:!0}),X.extractVersion=G,X.wrapPeerConnectionEvent=function(v,p,b){if(v.RTCPeerConnection){var R=v.RTCPeerConnection.prototype,q=R.addEventListener;R.addEventListener=function(Q,J){if(Q!==p)return q.apply(this,arguments);var ee=function(z){var oe=b(z);oe&&J(oe)};return this._eventMap=this._eventMap||{},this._eventMap[J]=ee,q.apply(this,[Q,ee])};var W=R.removeEventListener;R.removeEventListener=function(Q,J){if(Q!==p||!this._eventMap||!this._eventMap[J])return W.apply(this,arguments);var ee=this._eventMap[J];return delete this._eventMap[J],W.apply(this,[Q,ee])},Object.defineProperty(R,"on"+p,{get:function(){return this["_on"+p]},set:function(Q){this["_on"+p]&&(this.removeEventListener(p,this["_on"+p]),delete this["_on"+p]),Q&&this.addEventListener(p,this["_on"+p]=Q)},enumerable:!0,configurable:!0})}},X.disableLog=function(v){return"boolean"!=typeof v?new Error("Argument type: "+F(v)+". Please use a boolean."):(V=v,v?"adapter.js logging disabled":"adapter.js logging enabled")},X.disableWarnings=function(v){return"boolean"!=typeof v?new Error("Argument type: "+F(v)+". Please use a boolean."):(U=!v,"adapter.js deprecation warnings "+(v?"disabled":"enabled"))},X.log=function(){if("object"===("undefined"==typeof window?"undefined":F(window))){if(V)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}},X.deprecated=function(v,p){U&&console.warn(v+" is deprecated, please use "+p+" instead.")},X.detectBrowser=function(v){var{navigator:p}=v,b={browser:null,version:null};if(void 0===v||!v.navigator)return b.browser="Not a browser.",b;if(p.mozGetUserMedia)b.browser="firefox",b.version=G(p.userAgent,/Firefox\/(\d+)\./,1);else if(p.webkitGetUserMedia||!1===v.isSecureContext&&v.webkitRTCPeerConnection&&!v.RTCIceGatherer)b.browser="chrome",b.version=G(p.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(p.mediaDevices&&p.userAgent.match(/Edge\/(\d+).(\d+)$/))b.browser="edge",b.version=G(p.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!v.RTCPeerConnection||!p.userAgent.match(/AppleWebKit\/(\d+)\./))return b.browser="Not a supported browser.",b;b.browser="safari",b.version=G(p.userAgent,/AppleWebKit\/(\d+)\./,1),b.supportsUnifiedPlan=v.RTCRtpTransceiver&&"currentDirection"in v.RTCRtpTransceiver.prototype}return b},X.compactObject=function D(v){return S(v)?Object.keys(v).reduce(function(p,b){var R=S(v[b]),q=R?D(v[b]):v[b],W=R&&!Object.keys(q).length;return void 0===q||W?p:Object.assign(p,function(v,p,b){return p in v?Object.defineProperty(v,p,{value:b,enumerable:!0,configurable:!0,writable:!0}):v[p]=b,v}({},b,q))},{}):v},X.walkStats=M,X.filterStats=function(v,p,b){var R=b?"outbound-rtp":"inbound-rtp",q=new Map;if(null===p)return q;var W=[];return v.forEach(function(Q){"track"===Q.type&&Q.trackIdentifier===p.id&&W.push(Q)}),W.forEach(function(Q){v.forEach(function(J){J.type===R&&J.trackId===Q.id&&M(v,J,q)})}),q};var V=!0,U=!0;function G(v,p,b){var R=v.match(p);return R&&R.length>=b&&parseInt(R[b],10)}function S(v){return"[object Object]"===Object.prototype.toString.call(v)}function M(v,p,b){p&&!b.has(p.id)&&(b.set(p.id,p),Object.keys(p).forEach(function(R){R.endsWith("Id")?M(v,v.get(p[R]),b):R.endsWith("Ids")&&p[R].forEach(function(q){M(v,v.get(q),b)})}))}},{}],s6SN:[function(se,we,X){"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.shimGetUserMedia=function(L){var _=L&&L.navigator;if(_.mediaDevices){var P=O.detectBrowser(L),A=function(M){if("object"!==U(M)||M.mandatory||M.optional)return M;var y={};return Object.keys(M).forEach(function(v){if("require"!==v&&"advanced"!==v&&"mediaSource"!==v){var p="object"===U(M[v])?M[v]:{ideal:M[v]};void 0!==p.exact&&"number"==typeof p.exact&&(p.min=p.max=p.exact);var b=function(q,W){return q?q+W.charAt(0).toUpperCase()+W.slice(1):"deviceId"===W?"sourceId":W};if(void 0!==p.ideal){y.optional=y.optional||[];var R={};"number"==typeof p.ideal?(R[b("min",v)]=p.ideal,y.optional.push(R),(R={})[b("max",v)]=p.ideal,y.optional.push(R)):(R[b("",v)]=p.ideal,y.optional.push(R))}void 0!==p.exact&&"number"!=typeof p.exact?(y.mandatory=y.mandatory||{},y.mandatory[b("",v)]=p.exact):["min","max"].forEach(function(q){void 0!==p[q]&&(y.mandatory=y.mandatory||{},y.mandatory[b(q,v)]=p[q])})}}),M.advanced&&(y.optional=(y.optional||[]).concat(M.advanced)),y},I=function(M,y){if(P.version>=61)return y(M);if((M=JSON.parse(JSON.stringify(M)))&&"object"===U(M.audio)){var v=function(q,W,Q){W in q&&!(Q in q)&&(q[Q]=q[W],delete q[W])};v((M=JSON.parse(JSON.stringify(M))).audio,"autoGainControl","googAutoGainControl"),v(M.audio,"noiseSuppression","googNoiseSuppression"),M.audio=A(M.audio)}if(M&&"object"===U(M.video)){var p=M.video.facingMode;p=p&&("object"===U(p)?p:{ideal:p});var b,R=P.version<66;if(p&&("user"===p.exact||"environment"===p.exact||"user"===p.ideal||"environment"===p.ideal)&&(!_.mediaDevices.getSupportedConstraints||!_.mediaDevices.getSupportedConstraints().facingMode||R)&&(delete M.video.facingMode,"environment"===p.exact||"environment"===p.ideal?b=["back","rear"]:"user"!==p.exact&&"user"!==p.ideal||(b=["front"]),b))return _.mediaDevices.enumerateDevices().then(function(q){var W=(q=q.filter(function(Q){return"videoinput"===Q.kind})).find(function(Q){return b.some(function(J){return Q.label.toLowerCase().includes(J)})});return!W&&q.length&&b.includes("back")&&(W=q[q.length-1]),W&&(M.video.deviceId=p.exact?{exact:W.deviceId}:{ideal:W.deviceId}),M.video=A(M.video),G("chrome: "+JSON.stringify(M)),y(M)});M.video=A(M.video)}return G("chrome: "+JSON.stringify(M)),y(M)},S=function(M){return P.version>=64?M:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[M.name]||M.name,message:M.message,constraint:M.constraint||M.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};if(_.getUserMedia=function(M,y,v){I(M,function(p){_.webkitGetUserMedia(p,y,function(b){v&&v(S(b))})})}.bind(_),_.mediaDevices.getUserMedia){var D=_.mediaDevices.getUserMedia.bind(_.mediaDevices);_.mediaDevices.getUserMedia=function(M){return I(M,function(y){return D(y).then(function(v){if(y.audio&&!v.getAudioTracks().length||y.video&&!v.getVideoTracks().length)throw v.getTracks().forEach(function(p){p.stop()}),new DOMException("","NotFoundError");return v},function(v){return Promise.reject(S(v))})})}}}};var O=function(L){if(L&&L.__esModule)return L;if(null===L||"object"!=typeof L&&"function"!=typeof L)return{default:L};var _=F();if(_&&_.has(L))return _.get(L);var P={},A=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var I in L)if(Object.prototype.hasOwnProperty.call(L,I)){var S=A?Object.getOwnPropertyDescriptor(L,I):null;S&&(S.get||S.set)?Object.defineProperty(P,I,S):P[I]=L[I]}return P.default=L,_&&_.set(L,P),P}(se("../utils.js"));function F(){if("function"!=typeof WeakMap)return null;var L=new WeakMap;return F=function(){return L},L}function U(L){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(_){return typeof _}:function(_){return _&&"function"==typeof Symbol&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(L)}var G=O.log},{"../utils.js":"iSxC"}],VHa8:[function(se,we,X){"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.shimGetDisplayMedia=function(F,V){F.navigator.mediaDevices&&"getDisplayMedia"in F.navigator.mediaDevices||F.navigator.mediaDevices&&("function"==typeof V?F.navigator.mediaDevices.getDisplayMedia=function(U){return V(U).then(function(G){var B=U.video&&U.video.width,L=U.video&&U.video.height;return U.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:G,maxFrameRate:U.video&&U.video.frameRate||3}},B&&(U.video.mandatory.maxWidth=B),L&&(U.video.mandatory.maxHeight=L),F.navigator.mediaDevices.getUserMedia(U)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}},{}],uI5X:[function(se,we,X){"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.shimMediaStream=function(p){p.MediaStream=p.MediaStream||p.webkitMediaStream},X.shimOnTrack=function(p){if("object"!==L(p)||!p.RTCPeerConnection||"ontrack"in p.RTCPeerConnection.prototype)O.wrapPeerConnectionEvent(p,"track",function(R){return R.transceiver||Object.defineProperty(R,"transceiver",{value:{receiver:R.receiver}}),R});else{Object.defineProperty(p.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(R){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=R)},enumerable:!0,configurable:!0});var b=p.RTCPeerConnection.prototype.setRemoteDescription;p.RTCPeerConnection.prototype.setRemoteDescription=function(){var R=this;return this._ontrackpoly||(this._ontrackpoly=function(q){q.stream.addEventListener("addtrack",function(W){var Q;Q=p.RTCPeerConnection.prototype.getReceivers?R.getReceivers().find(function(ee){return ee.track&&ee.track.id===W.track.id}):{track:W.track};var J=new Event("track");J.track=W.track,J.receiver=Q,J.transceiver={receiver:Q},J.streams=[q.stream],R.dispatchEvent(J)}),q.stream.getTracks().forEach(function(W){var Q;Q=p.RTCPeerConnection.prototype.getReceivers?R.getReceivers().find(function(ee){return ee.track&&ee.track.id===W.id}):{track:W};var J=new Event("track");J.track=W,J.receiver=Q,J.transceiver={receiver:Q},J.streams=[q.stream],R.dispatchEvent(J)})},this.addEventListener("addstream",this._ontrackpoly)),b.apply(this,arguments)}}},X.shimGetSendersWithDtmf=function(p){if("object"===L(p)&&p.RTCPeerConnection&&!("getSenders"in p.RTCPeerConnection.prototype)&&"createDTMFSender"in p.RTCPeerConnection.prototype){var b=function(ee,z){return{track:z,get dtmf(){return void 0===this._dtmf&&(this._dtmf="audio"===z.kind?ee.createDTMFSender(z):null),this._dtmf},_pc:ee}};if(!p.RTCPeerConnection.prototype.getSenders){p.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var R=p.RTCPeerConnection.prototype.addTrack;p.RTCPeerConnection.prototype.addTrack=function(ee,z){var oe=R.apply(this,arguments);return oe||(oe=b(this,ee),this._senders.push(oe)),oe};var q=p.RTCPeerConnection.prototype.removeTrack;p.RTCPeerConnection.prototype.removeTrack=function(ee){q.apply(this,arguments);var z=this._senders.indexOf(ee);-1!==z&&this._senders.splice(z,1)}}var W=p.RTCPeerConnection.prototype.addStream;p.RTCPeerConnection.prototype.addStream=function(ee){var z=this;this._senders=this._senders||[],W.apply(this,[ee]),ee.getTracks().forEach(function(oe){z._senders.push(b(z,oe))})};var Q=p.RTCPeerConnection.prototype.removeStream;p.RTCPeerConnection.prototype.removeStream=function(ee){var z=this;this._senders=this._senders||[],Q.apply(this,[ee]),ee.getTracks().forEach(function(oe){var me=z._senders.find(function(pe){return pe.track===oe});me&&z._senders.splice(z._senders.indexOf(me),1)})}}else if("object"===L(p)&&p.RTCPeerConnection&&"getSenders"in p.RTCPeerConnection.prototype&&"createDTMFSender"in p.RTCPeerConnection.prototype&&p.RTCRtpSender&&!("dtmf"in p.RTCRtpSender.prototype)){var J=p.RTCPeerConnection.prototype.getSenders;p.RTCPeerConnection.prototype.getSenders=function(){var ee=this,z=J.apply(this,[]);return z.forEach(function(oe){return oe._pc=ee}),z},Object.defineProperty(p.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&(this._dtmf="audio"===this.track.kind?this._pc.createDTMFSender(this.track):null),this._dtmf}})}},X.shimGetStats=function(p){if(p.RTCPeerConnection){var b=p.RTCPeerConnection.prototype.getStats;p.RTCPeerConnection.prototype.getStats=function(){var R=this,[q,W,Q]=arguments;if(arguments.length>0&&"function"==typeof q)return b.apply(this,arguments);if(0===b.length&&(0===arguments.length||"function"!=typeof q))return b.apply(this,[]);var J=function(z){var oe={};return z.result().forEach(function(me){var pe={id:me.id,timestamp:me.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[me.type]||me.type};me.names().forEach(function(De){pe[De]=me.stat(De)}),oe[pe.id]=pe}),oe},ee=function(z){return new Map(Object.keys(z).map(function(oe){return[oe,z[oe]]}))};return arguments.length>=2?b.apply(this,[function(z){W(ee(J(z)))},q]):new Promise(function(z,oe){b.apply(R,[function(me){z(ee(J(me)))},oe])}).then(W,Q)}}},X.shimSenderReceiverGetStats=function(p){if("object"===L(p)&&p.RTCPeerConnection&&p.RTCRtpSender&&p.RTCRtpReceiver){if(!("getStats"in p.RTCRtpSender.prototype)){var b=p.RTCPeerConnection.prototype.getSenders;b&&(p.RTCPeerConnection.prototype.getSenders=function(){var Q=this,J=b.apply(this,[]);return J.forEach(function(ee){return ee._pc=Q}),J});var R=p.RTCPeerConnection.prototype.addTrack;R&&(p.RTCPeerConnection.prototype.addTrack=function(){var Q=R.apply(this,arguments);return Q._pc=this,Q}),p.RTCRtpSender.prototype.getStats=function(){var Q=this;return this._pc.getStats().then(function(J){return O.filterStats(J,Q.track,!0)})}}if(!("getStats"in p.RTCRtpReceiver.prototype)){var q=p.RTCPeerConnection.prototype.getReceivers;q&&(p.RTCPeerConnection.prototype.getReceivers=function(){var Q=this,J=q.apply(this,[]);return J.forEach(function(ee){return ee._pc=Q}),J}),O.wrapPeerConnectionEvent(p,"track",function(Q){return Q.receiver._pc=Q.srcElement,Q}),p.RTCRtpReceiver.prototype.getStats=function(){var Q=this;return this._pc.getStats().then(function(J){return O.filterStats(J,Q.track,!1)})}}if("getStats"in p.RTCRtpSender.prototype&&"getStats"in p.RTCRtpReceiver.prototype){var W=p.RTCPeerConnection.prototype.getStats;p.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof p.MediaStreamTrack){var Q,J,ee,z=arguments[0];return this.getSenders().forEach(function(oe){oe.track===z&&(Q?ee=!0:Q=oe)}),this.getReceivers().forEach(function(oe){return oe.track===z&&(J?ee=!0:J=oe),oe.track===z}),ee||Q&&J?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):Q?Q.getStats():J?J.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return W.apply(this,arguments)}}}},X.shimAddTrackRemoveTrackWithNative=D,X.shimAddTrackRemoveTrack=function(p){if(p.RTCPeerConnection){var b=O.detectBrowser(p);if(p.RTCPeerConnection.prototype.addTrack&&b.version>=65)return D(p);var R=p.RTCPeerConnection.prototype.getLocalStreams;p.RTCPeerConnection.prototype.getLocalStreams=function(){var z=this,oe=R.apply(this);return this._reverseStreams=this._reverseStreams||{},oe.map(function(me){return z._reverseStreams[me.id]})};var q=p.RTCPeerConnection.prototype.addStream;p.RTCPeerConnection.prototype.addStream=function(z){var oe=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},z.getTracks().forEach(function(pe){if(oe.getSenders().find(function(De){return De.track===pe}))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[z.id]){var me=new p.MediaStream(z.getTracks());this._streams[z.id]=me,this._reverseStreams[me.id]=z,z=me}q.apply(this,[z])};var W=p.RTCPeerConnection.prototype.removeStream;p.RTCPeerConnection.prototype.removeStream=function(z){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},W.apply(this,[this._streams[z.id]||z]),delete this._reverseStreams[this._streams[z.id]?this._streams[z.id].id:z.id],delete this._streams[z.id]},p.RTCPeerConnection.prototype.addTrack=function(z,oe){var me=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var pe=[].slice.call(arguments,1);if(1!==pe.length||!pe[0].getTracks().find(function(mt){return mt===z}))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(function(mt){return mt.track===z}))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var De=this._streams[oe.id];if(De)De.addTrack(z),Promise.resolve().then(function(){me.dispatchEvent(new Event("negotiationneeded"))});else{var et=new p.MediaStream([z]);this._streams[oe.id]=et,this._reverseStreams[et.id]=oe,this.addStream(et)}return this.getSenders().find(function(mt){return mt.track===z})},["createOffer","createAnswer"].forEach(function(z){var oe=p.RTCPeerConnection.prototype[z],me=B({},z,function(){var pe=this,De=arguments;return arguments.length&&"function"==typeof arguments[0]?oe.apply(this,[function(et){var mt=ee(pe,et);De[0].apply(null,[mt])},function(et){De[1]&&De[1].apply(null,et)},arguments[2]]):oe.apply(this,arguments).then(function(et){return ee(pe,et)})});p.RTCPeerConnection.prototype[z]=me[z]});var Q=p.RTCPeerConnection.prototype.setLocalDescription;p.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=(z=this,me=(oe=arguments[0]).sdp,Object.keys(z._reverseStreams||[]).forEach(function(pe){var De=z._reverseStreams[pe],et=z._streams[De.id];me=me.replace(new RegExp(De.id,"g"),et.id)}),new RTCSessionDescription({type:oe.type,sdp:me})),Q.apply(this,arguments)):Q.apply(this,arguments);var z,oe,me};var J=Object.getOwnPropertyDescriptor(p.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(p.RTCPeerConnection.prototype,"localDescription",{get:function(){var z=J.get.apply(this);return""===z.type?z:ee(this,z)}}),p.RTCPeerConnection.prototype.removeTrack=function(z){var oe,me=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!z._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(z._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{},Object.keys(this._streams).forEach(function(pe){me._streams[pe].getTracks().find(function(De){return z.track===De})&&(oe=me._streams[pe])}),oe&&(1===oe.getTracks().length?this.removeStream(this._reverseStreams[oe.id]):oe.removeTrack(z.track),this.dispatchEvent(new Event("negotiationneeded")))}}function ee(z,oe){var me=oe.sdp;return Object.keys(z._reverseStreams||[]).forEach(function(pe){var De=z._reverseStreams[pe];me=me.replace(new RegExp(z._streams[De.id].id,"g"),De.id)}),new RTCSessionDescription({type:oe.type,sdp:me})}},X.shimPeerConnection=function(p){var b=O.detectBrowser(p);if(!p.RTCPeerConnection&&p.webkitRTCPeerConnection&&(p.RTCPeerConnection=p.webkitRTCPeerConnection),p.RTCPeerConnection){b.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(q){var W=p.RTCPeerConnection.prototype[q],Q=B({},q,function(){return arguments[0]=new("addIceCandidate"===q?p.RTCIceCandidate:p.RTCSessionDescription)(arguments[0]),W.apply(this,arguments)});p.RTCPeerConnection.prototype[q]=Q[q]});var R=p.RTCPeerConnection.prototype.addIceCandidate;p.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?b.version<78&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():R.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}},X.fixNegotiationNeeded=function(p){O.wrapPeerConnectionEvent(p,"negotiationneeded",function(b){if("stable"===b.target.signalingState)return b})},Object.defineProperty(X,"shimGetUserMedia",{enumerable:!0,get:function(){return F.shimGetUserMedia}}),Object.defineProperty(X,"shimGetDisplayMedia",{enumerable:!0,get:function(){return V.shimGetDisplayMedia}});var O=function(p){if(p&&p.__esModule)return p;if(null===p||"object"!=typeof p&&"function"!=typeof p)return{default:p};var b=U();if(b&&b.has(p))return b.get(p);var R={},q=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var W in p)if(Object.prototype.hasOwnProperty.call(p,W)){var Q=q?Object.getOwnPropertyDescriptor(p,W):null;Q&&(Q.get||Q.set)?Object.defineProperty(R,W,Q):R[W]=p[W]}return R.default=p,b&&b.set(p,R),R}(se("../utils.js")),F=se("./getusermedia"),V=se("./getdisplaymedia");function U(){if("function"!=typeof WeakMap)return null;var p=new WeakMap;return U=function(){return p},p}function B(p,b,R){return b in p?Object.defineProperty(p,b,{value:R,enumerable:!0,configurable:!0,writable:!0}):p[b]=R,p}function L(p){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"==typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(p)}function D(p){p.RTCPeerConnection.prototype.getLocalStreams=function(){var Q=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(function(J){return Q._shimmedLocalStreams[J][0]})};var b=p.RTCPeerConnection.prototype.addTrack;p.RTCPeerConnection.prototype.addTrack=function(Q,J){if(!J)return b.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var ee=b.apply(this,arguments);return this._shimmedLocalStreams[J.id]?-1===this._shimmedLocalStreams[J.id].indexOf(ee)&&this._shimmedLocalStreams[J.id].push(ee):this._shimmedLocalStreams[J.id]=[J,ee],ee};var R=p.RTCPeerConnection.prototype.addStream;p.RTCPeerConnection.prototype.addStream=function(Q){var J=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},Q.getTracks().forEach(function(oe){if(J.getSenders().find(function(me){return me.track===oe}))throw new DOMException("Track already exists.","InvalidAccessError")});var ee=this.getSenders();R.apply(this,arguments);var z=this.getSenders().filter(function(oe){return-1===ee.indexOf(oe)});this._shimmedLocalStreams[Q.id]=[Q].concat(z)};var q=p.RTCPeerConnection.prototype.removeStream;p.RTCPeerConnection.prototype.removeStream=function(Q){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[Q.id],q.apply(this,arguments)};var W=p.RTCPeerConnection.prototype.removeTrack;p.RTCPeerConnection.prototype.removeTrack=function(Q){var J=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Q&&Object.keys(this._shimmedLocalStreams).forEach(function(ee){var z=J._shimmedLocalStreams[ee].indexOf(Q);-1!==z&&J._shimmedLocalStreams[ee].splice(z,1),1===J._shimmedLocalStreams[ee].length&&delete J._shimmedLocalStreams[ee]}),W.apply(this,arguments)}}},{"../utils.js":"iSxC","./getusermedia":"s6SN","./getdisplaymedia":"VHa8"}],NZ1C:[function(se,we,X){"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.filterIceServers=function(G,B){var L=!1;return(G=JSON.parse(JSON.stringify(G))).filter(function(_){if(_&&(_.urls||_.url)){var P=_.urls||_.url;_.url&&!_.urls&&O.deprecated("RTCIceServer.url","RTCIceServer.urls");var A="string"==typeof P;return A&&(P=[P]),P=P.filter(function(I){if(0===I.indexOf("stun:"))return!1;var S=I.startsWith("turn")&&!I.startsWith("turn:[")&&I.includes("transport=udp");return S&&!L?(L=!0,!0):S&&!L}),delete _.url,_.urls=A?P[0]:P,!!P.length}})};var O=function(G){if(G&&G.__esModule)return G;if(null===G||"object"!=typeof G&&"function"!=typeof G)return{default:G};var B=F();if(B&&B.has(G))return B.get(G);var L={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var P in G)if(Object.prototype.hasOwnProperty.call(G,P)){var A=_?Object.getOwnPropertyDescriptor(G,P):null;A&&(A.get||A.set)?Object.defineProperty(L,P,A):L[P]=G[P]}return L.default=G,B&&B.set(G,L),L}(se("../utils"));function F(){if("function"!=typeof WeakMap)return null;var G=new WeakMap;return F=function(){return G},G}},{"../utils":"iSxC"}],YHvh:[function(se,we,X){"use strict";var O={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};O.localCName=O.generateIdentifier(),O.splitLines=function(F){return F.trim().split("\n").map(function(V){return V.trim()})},O.splitSections=function(F){return F.split("\nm=").map(function(V,U){return(U>0?"m="+V:V).trim()+"\r\n"})},O.getDescription=function(F){var V=O.splitSections(F);return V&&V[0]},O.getMediaSections=function(F){var V=O.splitSections(F);return V.shift(),V},O.matchPrefix=function(F,V){return O.splitLines(F).filter(function(U){return 0===U.indexOf(V)})},O.parseCandidate=function(F){for(var V,U={foundation:(V=0===F.indexOf("a=candidate:")?F.substring(12).split(" "):F.substring(10).split(" "))[0],component:parseInt(V[1],10),protocol:V[2].toLowerCase(),priority:parseInt(V[3],10),ip:V[4],address:V[4],port:parseInt(V[5],10),type:V[7]},G=8;G<V.length;G+=2)switch(V[G]){case"raddr":U.relatedAddress=V[G+1];break;case"rport":U.relatedPort=parseInt(V[G+1],10);break;case"tcptype":U.tcpType=V[G+1];break;case"ufrag":U.ufrag=V[G+1],U.usernameFragment=V[G+1];break;default:U[V[G]]=V[G+1]}return U},O.writeCandidate=function(F){var V=[];V.push(F.foundation),V.push(F.component),V.push(F.protocol.toUpperCase()),V.push(F.priority),V.push(F.address||F.ip),V.push(F.port);var U=F.type;return V.push("typ"),V.push(U),"host"!==U&&F.relatedAddress&&F.relatedPort&&(V.push("raddr"),V.push(F.relatedAddress),V.push("rport"),V.push(F.relatedPort)),F.tcpType&&"tcp"===F.protocol.toLowerCase()&&(V.push("tcptype"),V.push(F.tcpType)),(F.usernameFragment||F.ufrag)&&(V.push("ufrag"),V.push(F.usernameFragment||F.ufrag)),"candidate:"+V.join(" ")},O.parseIceOptions=function(F){return F.substr(14).split(" ")},O.parseRtpMap=function(F){var V=F.substr(9).split(" "),U={payloadType:parseInt(V.shift(),10)};return V=V[0].split("/"),U.name=V[0],U.clockRate=parseInt(V[1],10),U.channels=3===V.length?parseInt(V[2],10):1,U.numChannels=U.channels,U},O.writeRtpMap=function(F){var V=F.payloadType;void 0!==F.preferredPayloadType&&(V=F.preferredPayloadType);var U=F.channels||F.numChannels||1;return"a=rtpmap:"+V+" "+F.name+"/"+F.clockRate+(1!==U?"/"+U:"")+"\r\n"},O.parseExtmap=function(F){var V=F.substr(9).split(" ");return{id:parseInt(V[0],10),direction:V[0].indexOf("/")>0?V[0].split("/")[1]:"sendrecv",uri:V[1]}},O.writeExtmap=function(F){return"a=extmap:"+(F.id||F.preferredId)+(F.direction&&"sendrecv"!==F.direction?"/"+F.direction:"")+" "+F.uri+"\r\n"},O.parseFmtp=function(F){for(var V,U={},G=F.substr(F.indexOf(" ")+1).split(";"),B=0;B<G.length;B++)U[(V=G[B].trim().split("="))[0].trim()]=V[1];return U},O.writeFmtp=function(F){var V="",U=F.payloadType;if(void 0!==F.preferredPayloadType&&(U=F.preferredPayloadType),F.parameters&&Object.keys(F.parameters).length){var G=[];Object.keys(F.parameters).forEach(function(B){G.push(F.parameters[B]?B+"="+F.parameters[B]:B)}),V+="a=fmtp:"+U+" "+G.join(";")+"\r\n"}return V},O.parseRtcpFb=function(F){var V=F.substr(F.indexOf(" ")+1).split(" ");return{type:V.shift(),parameter:V.join(" ")}},O.writeRtcpFb=function(F){var V="",U=F.payloadType;return void 0!==F.preferredPayloadType&&(U=F.preferredPayloadType),F.rtcpFeedback&&F.rtcpFeedback.length&&F.rtcpFeedback.forEach(function(G){V+="a=rtcp-fb:"+U+" "+G.type+(G.parameter&&G.parameter.length?" "+G.parameter:"")+"\r\n"}),V},O.parseSsrcMedia=function(F){var V=F.indexOf(" "),U={ssrc:parseInt(F.substr(7,V-7),10)},G=F.indexOf(":",V);return G>-1?(U.attribute=F.substr(V+1,G-V-1),U.value=F.substr(G+1)):U.attribute=F.substr(V+1),U},O.parseSsrcGroup=function(F){var V=F.substr(13).split(" ");return{semantics:V.shift(),ssrcs:V.map(function(U){return parseInt(U,10)})}},O.getMid=function(F){var V=O.matchPrefix(F,"a=mid:")[0];if(V)return V.substr(6)},O.parseFingerprint=function(F){var V=F.substr(14).split(" ");return{algorithm:V[0].toLowerCase(),value:V[1]}},O.getDtlsParameters=function(F,V){return{role:"auto",fingerprints:O.matchPrefix(F+V,"a=fingerprint:").map(O.parseFingerprint)}},O.writeDtlsParameters=function(F,V){var U="a=setup:"+V+"\r\n";return F.fingerprints.forEach(function(G){U+="a=fingerprint:"+G.algorithm+" "+G.value+"\r\n"}),U},O.getIceParameters=function(F,V){var U=O.splitLines(F);return{usernameFragment:(U=U.concat(O.splitLines(V))).filter(function(G){return 0===G.indexOf("a=ice-ufrag:")})[0].substr(12),password:U.filter(function(G){return 0===G.indexOf("a=ice-pwd:")})[0].substr(10)}},O.writeIceParameters=function(F){return"a=ice-ufrag:"+F.usernameFragment+"\r\na=ice-pwd:"+F.password+"\r\n"},O.parseRtpParameters=function(F){for(var V={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},U=O.splitLines(F)[0].split(" "),G=3;G<U.length;G++){var B=U[G],L=O.matchPrefix(F,"a=rtpmap:"+B+" ")[0];if(L){var _=O.parseRtpMap(L),P=O.matchPrefix(F,"a=fmtp:"+B+" ");switch(_.parameters=P.length?O.parseFmtp(P[0]):{},_.rtcpFeedback=O.matchPrefix(F,"a=rtcp-fb:"+B+" ").map(O.parseRtcpFb),V.codecs.push(_),_.name.toUpperCase()){case"RED":case"ULPFEC":V.fecMechanisms.push(_.name.toUpperCase())}}}return O.matchPrefix(F,"a=extmap:").forEach(function(A){V.headerExtensions.push(O.parseExtmap(A))}),V},O.writeRtpDescription=function(F,V){var U="";U+="m="+F+" ",U+=V.codecs.length>0?"9":"0",U+=" UDP/TLS/RTP/SAVPF ",U+=V.codecs.map(function(B){return void 0!==B.preferredPayloadType?B.preferredPayloadType:B.payloadType}).join(" ")+"\r\n",U+="c=IN IP4 0.0.0.0\r\n",U+="a=rtcp:9 IN IP4 0.0.0.0\r\n",V.codecs.forEach(function(B){U+=O.writeRtpMap(B),U+=O.writeFmtp(B),U+=O.writeRtcpFb(B)});var G=0;return V.codecs.forEach(function(B){B.maxptime>G&&(G=B.maxptime)}),G>0&&(U+="a=maxptime:"+G+"\r\n"),U+="a=rtcp-mux\r\n",V.headerExtensions&&V.headerExtensions.forEach(function(B){U+=O.writeExtmap(B)}),U},O.parseRtpEncodingParameters=function(F){var V,U=[],G=O.parseRtpParameters(F),B=-1!==G.fecMechanisms.indexOf("RED"),L=-1!==G.fecMechanisms.indexOf("ULPFEC"),_=O.matchPrefix(F,"a=ssrc:").map(function(S){return O.parseSsrcMedia(S)}).filter(function(S){return"cname"===S.attribute}),P=_.length>0&&_[0].ssrc,A=O.matchPrefix(F,"a=ssrc-group:FID").map(function(S){return S.substr(17).split(" ").map(function(D){return parseInt(D,10)})});A.length>0&&A[0].length>1&&A[0][0]===P&&(V=A[0][1]),G.codecs.forEach(function(S){if("RTX"===S.name.toUpperCase()&&S.parameters.apt){var D={ssrc:P,codecPayloadType:parseInt(S.parameters.apt,10)};P&&V&&(D.rtx={ssrc:V}),U.push(D),B&&((D=JSON.parse(JSON.stringify(D))).fec={ssrc:P,mechanism:L?"red+ulpfec":"red"},U.push(D))}}),0===U.length&&P&&U.push({ssrc:P});var I=O.matchPrefix(F,"b=");return I.length&&(I=0===I[0].indexOf("b=TIAS:")?parseInt(I[0].substr(7),10):0===I[0].indexOf("b=AS:")?1e3*parseInt(I[0].substr(5),10)*.95-16e3:void 0,U.forEach(function(S){S.maxBitrate=I})),U},O.parseRtcpParameters=function(F){var V={},U=O.matchPrefix(F,"a=ssrc:").map(function(L){return O.parseSsrcMedia(L)}).filter(function(L){return"cname"===L.attribute})[0];U&&(V.cname=U.value,V.ssrc=U.ssrc);var G=O.matchPrefix(F,"a=rtcp-rsize");V.reducedSize=G.length>0,V.compound=0===G.length;var B=O.matchPrefix(F,"a=rtcp-mux");return V.mux=B.length>0,V},O.parseMsid=function(F){var V,U=O.matchPrefix(F,"a=msid:");if(1===U.length)return{stream:(V=U[0].substr(7).split(" "))[0],track:V[1]};var G=O.matchPrefix(F,"a=ssrc:").map(function(B){return O.parseSsrcMedia(B)}).filter(function(B){return"msid"===B.attribute});return G.length>0?{stream:(V=G[0].value.split(" "))[0],track:V[1]}:void 0},O.parseSctpDescription=function(F){var V,U=O.parseMLine(F),G=O.matchPrefix(F,"a=max-message-size:");G.length>0&&(V=parseInt(G[0].substr(19),10)),isNaN(V)&&(V=65536);var B=O.matchPrefix(F,"a=sctp-port:");if(B.length>0)return{port:parseInt(B[0].substr(12),10),protocol:U.fmt,maxMessageSize:V};if(O.matchPrefix(F,"a=sctpmap:").length>0){var L=O.matchPrefix(F,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(L[0],10),protocol:L[1],maxMessageSize:V}}},O.writeSctpDescription=function(F,V){var U=[];return U="DTLS/SCTP"!==F.protocol?["m="+F.kind+" 9 "+F.protocol+" "+V.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+V.port+"\r\n"]:["m="+F.kind+" 9 "+F.protocol+" "+V.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+V.port+" "+V.protocol+" 65535\r\n"],void 0!==V.maxMessageSize&&U.push("a=max-message-size:"+V.maxMessageSize+"\r\n"),U.join("")},O.generateSessionId=function(){return Math.random().toString().substr(2,21)},O.writeSessionBoilerplate=function(F,V,U){var G=void 0!==V?V:2;return"v=0\r\no="+(U||"thisisadapterortc")+" "+(F||O.generateSessionId())+" "+G+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},O.writeMediaSection=function(F,V,U,G){var B=O.writeRtpDescription(F.kind,V);if(B+=O.writeIceParameters(F.iceGatherer.getLocalParameters()),B+=O.writeDtlsParameters(F.dtlsTransport.getLocalParameters(),"offer"===U?"actpass":"active"),B+="a=mid:"+F.mid+"\r\n",B+=F.direction?"a="+F.direction+"\r\n":F.rtpSender&&F.rtpReceiver?"a=sendrecv\r\n":F.rtpSender?"a=sendonly\r\n":F.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",F.rtpSender){var L="msid:"+G.id+" "+F.rtpSender.track.id+"\r\n";B+="a="+L,B+="a=ssrc:"+F.sendEncodingParameters[0].ssrc+" "+L,F.sendEncodingParameters[0].rtx&&(B+="a=ssrc:"+F.sendEncodingParameters[0].rtx.ssrc+" "+L,B+="a=ssrc-group:FID "+F.sendEncodingParameters[0].ssrc+" "+F.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return B+="a=ssrc:"+F.sendEncodingParameters[0].ssrc+" cname:"+O.localCName+"\r\n",F.rtpSender&&F.sendEncodingParameters[0].rtx&&(B+="a=ssrc:"+F.sendEncodingParameters[0].rtx.ssrc+" cname:"+O.localCName+"\r\n"),B},O.getDirection=function(F,V){for(var U=O.splitLines(F),G=0;G<U.length;G++)switch(U[G]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return U[G].substr(2)}return V?O.getDirection(V):"sendrecv"},O.getKind=function(F){return O.splitLines(F)[0].split(" ")[0].substr(2)},O.isRejected=function(F){return"0"===F.split(" ",2)[1]},O.parseMLine=function(F){var V=O.splitLines(F)[0].substr(2).split(" ");return{kind:V[0],port:parseInt(V[1],10),protocol:V[2],fmt:V.slice(3).join(" ")}},O.parseOLine=function(F){var V=O.matchPrefix(F,"o=")[0].substr(2).split(" ");return{username:V[0],sessionId:V[1],sessionVersion:parseInt(V[2],10),netType:V[3],addressType:V[4],address:V[5]}},O.isValidSDP=function(F){if("string"!=typeof F||0===F.length)return!1;for(var V=O.splitLines(F),U=0;U<V.length;U++)if(V[U].length<2||"="!==V[U].charAt(1))return!1;return!0},"object"==typeof we&&(we.exports=O)},{}],NJ2u:[function(se,we,X){"use strict";var O=se("sdp");function V(P,A,I,S,D){var M=O.writeRtpDescription(P.kind,A);if(M+=O.writeIceParameters(P.iceGatherer.getLocalParameters()),M+=O.writeDtlsParameters(P.dtlsTransport.getLocalParameters(),"offer"===I?"actpass":D||"active"),M+="a=mid:"+P.mid+"\r\n",M+=P.rtpSender&&P.rtpReceiver?"a=sendrecv\r\n":P.rtpSender?"a=sendonly\r\n":P.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",P.rtpSender){var y=P.rtpSender._initialTrackId||P.rtpSender.track.id;P.rtpSender._initialTrackId=y;var v="msid:"+(S?S.id:"-")+" "+y+"\r\n";M+="a="+v,M+="a=ssrc:"+P.sendEncodingParameters[0].ssrc+" "+v,P.sendEncodingParameters[0].rtx&&(M+="a=ssrc:"+P.sendEncodingParameters[0].rtx.ssrc+" "+v,M+="a=ssrc-group:FID "+P.sendEncodingParameters[0].ssrc+" "+P.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return M+="a=ssrc:"+P.sendEncodingParameters[0].ssrc+" cname:"+O.localCName+"\r\n",P.rtpSender&&P.sendEncodingParameters[0].rtx&&(M+="a=ssrc:"+P.sendEncodingParameters[0].rtx.ssrc+" cname:"+O.localCName+"\r\n"),M}function G(P,A){var I={codecs:[],headerExtensions:[],fecMechanisms:[]},S=function(M,y){M=parseInt(M,10);for(var v=0;v<y.length;v++)if(y[v].payloadType===M||y[v].preferredPayloadType===M)return y[v]},D=function(M,y,v,p){var b=S(M.parameters.apt,v),R=S(y.parameters.apt,p);return b&&R&&b.name.toLowerCase()===R.name.toLowerCase()};return P.codecs.forEach(function(M){for(var y=0;y<A.codecs.length;y++){var v=A.codecs[y];if(M.name.toLowerCase()===v.name.toLowerCase()&&M.clockRate===v.clockRate){if("rtx"===M.name.toLowerCase()&&M.parameters&&v.parameters.apt&&!D(M,v,P.codecs,A.codecs))continue;(v=JSON.parse(JSON.stringify(v))).numChannels=Math.min(M.numChannels,v.numChannels),I.codecs.push(v),v.rtcpFeedback=v.rtcpFeedback.filter(function(p){for(var b=0;b<M.rtcpFeedback.length;b++)if(M.rtcpFeedback[b].type===p.type&&M.rtcpFeedback[b].parameter===p.parameter)return!0;return!1});break}}}),P.headerExtensions.forEach(function(M){for(var y=0;y<A.headerExtensions.length;y++){var v=A.headerExtensions[y];if(M.uri===v.uri){I.headerExtensions.push(v);break}}}),I}function B(P,A,I){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[A][P].indexOf(I)}function L(P,A){var I=P.getRemoteCandidates().find(function(S){return A.foundation===S.foundation&&A.ip===S.ip&&A.port===S.port&&A.priority===S.priority&&A.protocol===S.protocol&&A.type===S.type});return I||P.addRemoteCandidate(A),!I}function _(P,A){var I=new Error(A);return I.name=P,I.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[P],I}we.exports=function(P,A){function I(y,v){v.addTrack(y),v.dispatchEvent(new P.MediaStreamTrackEvent("addtrack",{track:y}))}function S(y,v,p,b){var R=new Event("track");R.track=v,R.receiver=p,R.transceiver={receiver:p},R.streams=b,P.setTimeout(function(){y._dispatchEvent("track",R)})}var D=function(y){var v=this,p=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(R){v[R]=p[R].bind(p)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",y=JSON.parse(JSON.stringify(y||{})),this.usingBundle="max-bundle"===y.bundlePolicy,"negotiate"===y.rtcpMuxPolicy)throw _("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(y.rtcpMuxPolicy||(y.rtcpMuxPolicy="require"),y.iceTransportPolicy){case"all":case"relay":break;default:y.iceTransportPolicy="all"}switch(y.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:y.bundlePolicy="balanced"}if(y.iceServers=function(P,A){var I=!1;return(P=JSON.parse(JSON.stringify(P))).filter(function(S){if(S&&(S.urls||S.url)){var D=S.urls||S.url;S.url&&!S.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var M="string"==typeof D;return M&&(D=[D]),D=D.filter(function(y){return 0!==y.indexOf("turn:")||-1===y.indexOf("transport=udp")||-1!==y.indexOf("turn:[")||I?0===y.indexOf("stun:")&&A>=14393&&-1===y.indexOf("?transport=udp"):(I=!0,!0)}),delete S.url,S.urls=M?D[0]:D,!!D.length}})}(y.iceServers||[],A),this._iceGatherers=[],y.iceCandidatePoolSize)for(var b=y.iceCandidatePoolSize;b>0;b--)this._iceGatherers.push(new P.RTCIceGatherer({iceServers:y.iceServers,gatherPolicy:y.iceTransportPolicy}));else y.iceCandidatePoolSize=0;this._config=y,this.transceivers=[],this._sdpSessionId=O.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(D.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(D.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),D.prototype.onicecandidate=null,D.prototype.onaddstream=null,D.prototype.ontrack=null,D.prototype.onremovestream=null,D.prototype.onsignalingstatechange=null,D.prototype.oniceconnectionstatechange=null,D.prototype.onconnectionstatechange=null,D.prototype.onicegatheringstatechange=null,D.prototype.onnegotiationneeded=null,D.prototype.ondatachannel=null,D.prototype._dispatchEvent=function(y,v){this._isClosed||(this.dispatchEvent(v),"function"==typeof this["on"+y]&&this["on"+y](v))},D.prototype._emitGatheringStateChange=function(){var y=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",y)},D.prototype.getConfiguration=function(){return this._config},D.prototype.getLocalStreams=function(){return this.localStreams},D.prototype.getRemoteStreams=function(){return this.remoteStreams},D.prototype._createTransceiver=function(y,v){var b={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:y,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&this.transceivers.length>0)b.iceTransport=this.transceivers[0].iceTransport,b.dtlsTransport=this.transceivers[0].dtlsTransport;else{var R=this._createIceAndDtlsTransports();b.iceTransport=R.iceTransport,b.dtlsTransport=R.dtlsTransport}return v||this.transceivers.push(b),b},D.prototype.addTrack=function(y,v){if(this._isClosed)throw _("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var p;if(this.transceivers.find(function(R){return R.track===y}))throw _("InvalidAccessError","Track already exists.");for(var b=0;b<this.transceivers.length;b++)this.transceivers[b].track||this.transceivers[b].kind!==y.kind||(p=this.transceivers[b]);return p||(p=this._createTransceiver(y.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(v)&&this.localStreams.push(v),p.track=y,p.stream=v,p.rtpSender=new P.RTCRtpSender(y,p.dtlsTransport),p.rtpSender},D.prototype.addStream=function(y){var v=this;if(A>=15025)y.getTracks().forEach(function(b){v.addTrack(b,y)});else{var p=y.clone();y.getTracks().forEach(function(b,R){var q=p.getTracks()[R];b.addEventListener("enabled",function(W){q.enabled=W.enabled})}),p.getTracks().forEach(function(b){v.addTrack(b,p)})}},D.prototype.removeTrack=function(y){if(this._isClosed)throw _("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(y instanceof P.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var v=this.transceivers.find(function(b){return b.rtpSender===y});if(!v)throw _("InvalidAccessError","Sender was not created by this connection.");var p=v.stream;v.rtpSender.stop(),v.rtpSender=null,v.track=null,v.stream=null,-1===this.transceivers.map(function(b){return b.stream}).indexOf(p)&&this.localStreams.indexOf(p)>-1&&this.localStreams.splice(this.localStreams.indexOf(p),1),this._maybeFireNegotiationNeeded()},D.prototype.removeStream=function(y){var v=this;y.getTracks().forEach(function(p){var b=v.getSenders().find(function(R){return R.track===p});b&&v.removeTrack(b)})},D.prototype.getSenders=function(){return this.transceivers.filter(function(y){return!!y.rtpSender}).map(function(y){return y.rtpSender})},D.prototype.getReceivers=function(){return this.transceivers.filter(function(y){return!!y.rtpReceiver}).map(function(y){return y.rtpReceiver})},D.prototype._createIceGatherer=function(y,v){var p=this;if(v&&y>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var b=new P.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(b,"state",{value:"new",writable:!0}),this.transceivers[y].bufferedCandidateEvents=[],this.transceivers[y].bufferCandidates=function(R){var q=!R.candidate||0===Object.keys(R.candidate).length;b.state=q?"completed":"gathering",null!==p.transceivers[y].bufferedCandidateEvents&&p.transceivers[y].bufferedCandidateEvents.push(R)},b.addEventListener("localcandidate",this.transceivers[y].bufferCandidates),b},D.prototype._gather=function(y,v){var p=this,b=this.transceivers[v].iceGatherer;if(!b.onlocalcandidate){var R=this.transceivers[v].bufferedCandidateEvents;this.transceivers[v].bufferedCandidateEvents=null,b.removeEventListener("localcandidate",this.transceivers[v].bufferCandidates),b.onlocalcandidate=function(q){if(!(p.usingBundle&&v>0)){var W=new Event("icecandidate");W.candidate={sdpMid:y,sdpMLineIndex:v};var Q=q.candidate,J=!Q||0===Object.keys(Q).length;if(J)"new"!==b.state&&"gathering"!==b.state||(b.state="completed");else{"new"===b.state&&(b.state="gathering"),Q.component=1,Q.ufrag=b.getLocalParameters().usernameFragment;var ee=O.writeCandidate(Q);W.candidate=Object.assign(W.candidate,O.parseCandidate(ee)),W.candidate.candidate=ee,W.candidate.toJSON=function(){return{candidate:W.candidate.candidate,sdpMid:W.candidate.sdpMid,sdpMLineIndex:W.candidate.sdpMLineIndex,usernameFragment:W.candidate.usernameFragment}}}var z=O.getMediaSections(p._localDescription.sdp);z[W.candidate.sdpMLineIndex]+=J?"a=end-of-candidates\r\n":"a="+W.candidate.candidate+"\r\n",p._localDescription.sdp=O.getDescription(p._localDescription.sdp)+z.join("");var oe=p.transceivers.every(function(me){return me.iceGatherer&&"completed"===me.iceGatherer.state});"gathering"!==p.iceGatheringState&&(p.iceGatheringState="gathering",p._emitGatheringStateChange()),J||p._dispatchEvent("icecandidate",W),oe&&(p._dispatchEvent("icecandidate",new Event("icecandidate")),p.iceGatheringState="complete",p._emitGatheringStateChange())}},P.setTimeout(function(){R.forEach(function(q){b.onlocalcandidate(q)})},0)}},D.prototype._createIceAndDtlsTransports=function(){var y=this,v=new P.RTCIceTransport(null);v.onicestatechange=function(){y._updateIceConnectionState(),y._updateConnectionState()};var p=new P.RTCDtlsTransport(v);return p.ondtlsstatechange=function(){y._updateConnectionState()},p.onerror=function(){Object.defineProperty(p,"state",{value:"failed",writable:!0}),y._updateConnectionState()},{iceTransport:v,dtlsTransport:p}},D.prototype._disposeIceAndDtlsTransports=function(y){var v=this.transceivers[y].iceGatherer;v&&(delete v.onlocalcandidate,delete this.transceivers[y].iceGatherer);var p=this.transceivers[y].iceTransport;p&&(delete p.onicestatechange,delete this.transceivers[y].iceTransport);var b=this.transceivers[y].dtlsTransport;b&&(delete b.ondtlsstatechange,delete b.onerror,delete this.transceivers[y].dtlsTransport)},D.prototype._transceive=function(y,v,p){var b=G(y.localCapabilities,y.remoteCapabilities);v&&y.rtpSender&&(b.encodings=y.sendEncodingParameters,b.rtcp={cname:O.localCName,compound:y.rtcpParameters.compound},y.recvEncodingParameters.length&&(b.rtcp.ssrc=y.recvEncodingParameters[0].ssrc),y.rtpSender.send(b)),p&&y.rtpReceiver&&b.codecs.length>0&&("video"===y.kind&&y.recvEncodingParameters&&A<15019&&y.recvEncodingParameters.forEach(function(R){delete R.rtx}),b.encodings=y.recvEncodingParameters.length?y.recvEncodingParameters:[{}],b.rtcp={compound:y.rtcpParameters.compound},y.rtcpParameters.cname&&(b.rtcp.cname=y.rtcpParameters.cname),y.sendEncodingParameters.length&&(b.rtcp.ssrc=y.sendEncodingParameters[0].ssrc),y.rtpReceiver.receive(b))},D.prototype.setLocalDescription=function(y){var v,p,b=this;if(-1===["offer","answer"].indexOf(y.type))return Promise.reject(_("TypeError",'Unsupported type "'+y.type+'"'));if(!B("setLocalDescription",y.type,b.signalingState)||b._isClosed)return Promise.reject(_("InvalidStateError","Can not set local "+y.type+" in state "+b.signalingState));if("offer"===y.type)v=O.splitSections(y.sdp),p=v.shift(),v.forEach(function(q,W){var Q=O.parseRtpParameters(q);b.transceivers[W].localCapabilities=Q}),b.transceivers.forEach(function(q,W){b._gather(q.mid,W)});else if("answer"===y.type){v=O.splitSections(b._remoteDescription.sdp),p=v.shift();var R=O.matchPrefix(p,"a=ice-lite").length>0;v.forEach(function(q,W){var Q=b.transceivers[W],J=Q.iceGatherer,ee=Q.iceTransport,z=Q.dtlsTransport,oe=Q.localCapabilities,me=Q.remoteCapabilities;if(!(O.isRejected(q)&&0===O.matchPrefix(q,"a=bundle-only").length||Q.rejected)){var pe=O.getIceParameters(q,p),De=O.getDtlsParameters(q,p);R&&(De.role="server"),b.usingBundle&&0!==W||(b._gather(Q.mid,W),"new"===ee.state&&ee.start(J,pe,R?"controlling":"controlled"),"new"===z.state&&z.start(De));var et=G(oe,me);b._transceive(Q,et.codecs.length>0,!1)}})}return b._localDescription={type:y.type,sdp:y.sdp},b._updateSignalingState("offer"===y.type?"have-local-offer":"stable"),Promise.resolve()},D.prototype.setRemoteDescription=function(y){var v=this;if(-1===["offer","answer"].indexOf(y.type))return Promise.reject(_("TypeError",'Unsupported type "'+y.type+'"'));if(!B("setRemoteDescription",y.type,v.signalingState)||v._isClosed)return Promise.reject(_("InvalidStateError","Can not set remote "+y.type+" in state "+v.signalingState));var p={};v.remoteStreams.forEach(function(ee){p[ee.id]=ee});var b=[],R=O.splitSections(y.sdp),q=R.shift(),W=O.matchPrefix(q,"a=ice-lite").length>0,Q=O.matchPrefix(q,"a=group:BUNDLE ").length>0;v.usingBundle=Q;var J=O.matchPrefix(q,"a=ice-options:")[0];return v.canTrickleIceCandidates=!!J&&J.substr(14).split(" ").indexOf("trickle")>=0,R.forEach(function(ee,z){var oe=O.splitLines(ee),me=O.getKind(ee),pe=O.isRejected(ee)&&0===O.matchPrefix(ee,"a=bundle-only").length,De=oe[0].substr(2).split(" ")[2],et=O.getDirection(ee,q),mt=O.parseMsid(ee),Jn=O.getMid(ee)||O.generateIdentifier();if(pe||"application"===me&&("DTLS/SCTP"===De||"UDP/DTLS/SCTP"===De))v.transceivers[z]={mid:Jn,kind:me,protocol:De,rejected:!0};else{var Ue,Ar,fo,Ce,Rn,pr,xi,gr,bn;!pe&&v.transceivers[z]&&v.transceivers[z].rejected&&(v.transceivers[z]=v._createTransceiver(me,!0));var Vo,Xn,Rs=O.parseRtpParameters(ee);pe||(Vo=O.getIceParameters(ee,q),(Xn=O.getDtlsParameters(ee,q)).role="client"),xi=O.parseRtpEncodingParameters(ee);var Zn=O.parseRtcpParameters(ee),jo=O.matchPrefix(ee,"a=end-of-candidates",q).length>0,Je=O.matchPrefix(ee,"a=candidate:").map(function(St){return O.parseCandidate(St)}).filter(function(St){return 1===St.component});if(("offer"===y.type||"answer"===y.type)&&!pe&&Q&&z>0&&v.transceivers[z]&&(v._disposeIceAndDtlsTransports(z),v.transceivers[z].iceGatherer=v.transceivers[0].iceGatherer,v.transceivers[z].iceTransport=v.transceivers[0].iceTransport,v.transceivers[z].dtlsTransport=v.transceivers[0].dtlsTransport,v.transceivers[z].rtpSender&&v.transceivers[z].rtpSender.setTransport(v.transceivers[0].dtlsTransport),v.transceivers[z].rtpReceiver&&v.transceivers[z].rtpReceiver.setTransport(v.transceivers[0].dtlsTransport)),"offer"!==y.type||pe)"answer"===y.type&&!pe&&(Ar=(Ue=v.transceivers[z]).iceGatherer,fo=Ue.iceTransport,Ce=Ue.dtlsTransport,Rn=Ue.rtpReceiver,pr=Ue.sendEncodingParameters,gr=Ue.localCapabilities,v.transceivers[z].recvEncodingParameters=xi,v.transceivers[z].remoteCapabilities=Rs,v.transceivers[z].rtcpParameters=Zn,Je.length&&"new"===fo.state&&(!W&&!jo||Q&&0!==z?Je.forEach(function(St){L(Ue.iceTransport,St)}):fo.setRemoteCandidates(Je)),Q&&0!==z||("new"===fo.state&&fo.start(Ar,Vo,"controlling"),"new"===Ce.state&&Ce.start(Xn)),!G(Ue.localCapabilities,Ue.remoteCapabilities).codecs.filter(function(St){return"rtx"===St.name.toLowerCase()}).length&&Ue.sendEncodingParameters[0].rtx&&delete Ue.sendEncodingParameters[0].rtx,v._transceive(Ue,"sendrecv"===et||"recvonly"===et,"sendrecv"===et||"sendonly"===et),!Rn||"sendrecv"!==et&&"sendonly"!==et?delete Ue.rtpReceiver:(bn=Rn.track,mt?(p[mt.stream]||(p[mt.stream]=new P.MediaStream),I(bn,p[mt.stream]),b.push([bn,Rn,p[mt.stream]])):(p.default||(p.default=new P.MediaStream),I(bn,p.default),b.push([bn,Rn,p.default]))));else{(Ue=v.transceivers[z]||v._createTransceiver(me)).mid=Jn,Ue.iceGatherer||(Ue.iceGatherer=v._createIceGatherer(z,Q)),Je.length&&"new"===Ue.iceTransport.state&&(!jo||Q&&0!==z?Je.forEach(function(St){L(Ue.iceTransport,St)}):Ue.iceTransport.setRemoteCandidates(Je)),gr=P.RTCRtpReceiver.getCapabilities(me),A<15019&&(gr.codecs=gr.codecs.filter(function(St){return"rtx"!==St.name})),pr=Ue.sendEncodingParameters||[{ssrc:1001*(2*z+2)}];var vt,ii=!1;"sendrecv"===et||"sendonly"===et?(ii=!Ue.rtpReceiver,Rn=Ue.rtpReceiver||new P.RTCRtpReceiver(Ue.dtlsTransport,me),ii&&(bn=Rn.track,mt&&"-"===mt.stream||(mt?(p[mt.stream]||(p[mt.stream]=new P.MediaStream,Object.defineProperty(p[mt.stream],"id",{get:function(){return mt.stream}})),Object.defineProperty(bn,"id",{get:function(){return mt.track}}),vt=p[mt.stream]):(p.default||(p.default=new P.MediaStream),vt=p.default)),vt&&(I(bn,vt),Ue.associatedRemoteMediaStreams.push(vt)),b.push([bn,Rn,vt]))):Ue.rtpReceiver&&Ue.rtpReceiver.track&&(Ue.associatedRemoteMediaStreams.forEach(function(St){var oi,oc,Ri=St.getTracks().find(function(Bt){return Bt.id===Ue.rtpReceiver.track.id});Ri&&((oc=St).removeTrack(oi=Ri),oc.dispatchEvent(new P.MediaStreamTrackEvent("removetrack",{track:oi})))}),Ue.associatedRemoteMediaStreams=[]),Ue.localCapabilities=gr,Ue.remoteCapabilities=Rs,Ue.rtpReceiver=Rn,Ue.rtcpParameters=Zn,Ue.sendEncodingParameters=pr,Ue.recvEncodingParameters=xi,v._transceive(v.transceivers[z],!1,ii)}}}),void 0===v._dtlsRole&&(v._dtlsRole="offer"===y.type?"active":"passive"),v._remoteDescription={type:y.type,sdp:y.sdp},v._updateSignalingState("offer"===y.type?"have-remote-offer":"stable"),Object.keys(p).forEach(function(ee){var z=p[ee];if(z.getTracks().length){if(-1===v.remoteStreams.indexOf(z)){v.remoteStreams.push(z);var oe=new Event("addstream");oe.stream=z,P.setTimeout(function(){v._dispatchEvent("addstream",oe)})}b.forEach(function(me){z.id===me[2].id&&S(v,me[0],me[1],[z])})}}),b.forEach(function(ee){ee[2]||S(v,ee[0],ee[1],[])}),P.setTimeout(function(){v&&v.transceivers&&v.transceivers.forEach(function(ee){ee.iceTransport&&"new"===ee.iceTransport.state&&ee.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),ee.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},D.prototype.close=function(){this.transceivers.forEach(function(y){y.iceTransport&&y.iceTransport.stop(),y.dtlsTransport&&y.dtlsTransport.stop(),y.rtpSender&&y.rtpSender.stop(),y.rtpReceiver&&y.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},D.prototype._updateSignalingState=function(y){this.signalingState=y;var v=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",v)},D.prototype._maybeFireNegotiationNeeded=function(){var y=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,P.setTimeout(function(){if(y.needNegotiation){y.needNegotiation=!1;var v=new Event("negotiationneeded");y._dispatchEvent("negotiationneeded",v)}},0))},D.prototype._updateIceConnectionState=function(){var y,v={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(b){b.iceTransport&&!b.rejected&&v[b.iceTransport.state]++}),y="new",v.failed>0?y="failed":v.checking>0?y="checking":v.disconnected>0?y="disconnected":v.new>0?y="new":v.connected>0?y="connected":v.completed>0&&(y="completed"),y!==this.iceConnectionState){this.iceConnectionState=y;var p=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",p)}},D.prototype._updateConnectionState=function(){var y,v={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(b){b.iceTransport&&b.dtlsTransport&&!b.rejected&&(v[b.iceTransport.state]++,v[b.dtlsTransport.state]++)}),v.connected+=v.completed,y="new",v.failed>0?y="failed":v.connecting>0?y="connecting":v.disconnected>0?y="disconnected":v.new>0?y="new":v.connected>0&&(y="connected"),y!==this.connectionState){this.connectionState=y;var p=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",p)}},D.prototype.createOffer=function(){var y=this;if(y._isClosed)return Promise.reject(_("InvalidStateError","Can not call createOffer after close"));var v=y.transceivers.filter(function(W){return"audio"===W.kind}).length,p=y.transceivers.filter(function(W){return"video"===W.kind}).length,b=arguments[0];if(b){if(b.mandatory||b.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==b.offerToReceiveAudio&&(v=!0===b.offerToReceiveAudio?1:!1===b.offerToReceiveAudio?0:b.offerToReceiveAudio),void 0!==b.offerToReceiveVideo&&(p=!0===b.offerToReceiveVideo?1:!1===b.offerToReceiveVideo?0:b.offerToReceiveVideo)}for(y.transceivers.forEach(function(W){"audio"===W.kind?--v<0&&(W.wantReceive=!1):"video"===W.kind&&--p<0&&(W.wantReceive=!1)});v>0||p>0;)v>0&&(y._createTransceiver("audio"),v--),p>0&&(y._createTransceiver("video"),p--);var R=O.writeSessionBoilerplate(y._sdpSessionId,y._sdpSessionVersion++);y.transceivers.forEach(function(W,Q){var J=W.track,ee=W.kind,z=W.mid||O.generateIdentifier();W.mid=z,W.iceGatherer||(W.iceGatherer=y._createIceGatherer(Q,y.usingBundle));var oe=P.RTCRtpSender.getCapabilities(ee);A<15019&&(oe.codecs=oe.codecs.filter(function(pe){return"rtx"!==pe.name})),oe.codecs.forEach(function(pe){"H264"===pe.name&&void 0===pe.parameters["level-asymmetry-allowed"]&&(pe.parameters["level-asymmetry-allowed"]="1"),W.remoteCapabilities&&W.remoteCapabilities.codecs&&W.remoteCapabilities.codecs.forEach(function(De){pe.name.toLowerCase()===De.name.toLowerCase()&&pe.clockRate===De.clockRate&&(pe.preferredPayloadType=De.payloadType)})}),oe.headerExtensions.forEach(function(pe){(W.remoteCapabilities&&W.remoteCapabilities.headerExtensions||[]).forEach(function(De){pe.uri===De.uri&&(pe.id=De.id)})});var me=W.sendEncodingParameters||[{ssrc:1001*(2*Q+1)}];J&&A>=15019&&"video"===ee&&!me[0].rtx&&(me[0].rtx={ssrc:me[0].ssrc+1}),W.wantReceive&&(W.rtpReceiver=new P.RTCRtpReceiver(W.dtlsTransport,ee)),W.localCapabilities=oe,W.sendEncodingParameters=me}),"max-compat"!==y._config.bundlePolicy&&(R+="a=group:BUNDLE "+y.transceivers.map(function(W){return W.mid}).join(" ")+"\r\n"),R+="a=ice-options:trickle\r\n",y.transceivers.forEach(function(W,Q){R+=V(W,W.localCapabilities,"offer",W.stream,y._dtlsRole),R+="a=rtcp-rsize\r\n",!W.iceGatherer||"new"===y.iceGatheringState||0!==Q&&y.usingBundle||(W.iceGatherer.getLocalCandidates().forEach(function(J){J.component=1,R+="a="+O.writeCandidate(J)+"\r\n"}),"completed"===W.iceGatherer.state&&(R+="a=end-of-candidates\r\n"))});var q=new P.RTCSessionDescription({type:"offer",sdp:R});return Promise.resolve(q)},D.prototype.createAnswer=function(){var y=this;if(y._isClosed)return Promise.reject(_("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==y.signalingState&&"have-local-pranswer"!==y.signalingState)return Promise.reject(_("InvalidStateError","Can not call createAnswer in signalingState "+y.signalingState));var v=O.writeSessionBoilerplate(y._sdpSessionId,y._sdpSessionVersion++);y.usingBundle&&(v+="a=group:BUNDLE "+y.transceivers.map(function(R){return R.mid}).join(" ")+"\r\n"),v+="a=ice-options:trickle\r\n";var p=O.getMediaSections(y._remoteDescription.sdp).length;y.transceivers.forEach(function(R,q){if(!(q+1>p)){if(R.rejected)return"application"===R.kind?v+="DTLS/SCTP"===R.protocol?"m=application 0 DTLS/SCTP 5000\r\n":"m=application 0 "+R.protocol+" webrtc-datachannel\r\n":"audio"===R.kind?v+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===R.kind&&(v+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(v+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+R.mid+"\r\n");var W;R.stream&&("audio"===R.kind?W=R.stream.getAudioTracks()[0]:"video"===R.kind&&(W=R.stream.getVideoTracks()[0]),W&&A>=15019&&"video"===R.kind&&!R.sendEncodingParameters[0].rtx&&(R.sendEncodingParameters[0].rtx={ssrc:R.sendEncodingParameters[0].ssrc+1}));var Q=G(R.localCapabilities,R.remoteCapabilities);!Q.codecs.filter(function(J){return"rtx"===J.name.toLowerCase()}).length&&R.sendEncodingParameters[0].rtx&&delete R.sendEncodingParameters[0].rtx,v+=V(R,Q,"answer",R.stream,y._dtlsRole),R.rtcpParameters&&R.rtcpParameters.reducedSize&&(v+="a=rtcp-rsize\r\n")}});var b=new P.RTCSessionDescription({type:"answer",sdp:v});return Promise.resolve(b)},D.prototype.addIceCandidate=function(y){var v,p=this;return y&&void 0===y.sdpMLineIndex&&!y.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(b,R){if(!p._remoteDescription)return R(_("InvalidStateError","Can not add ICE candidate without a remote description"));if(y&&""!==y.candidate){var q=y.sdpMLineIndex;if(y.sdpMid)for(var W=0;W<p.transceivers.length;W++)if(p.transceivers[W].mid===y.sdpMid){q=W;break}var Q=p.transceivers[q];if(!Q)return R(_("OperationError","Can not add ICE candidate"));if(Q.rejected)return b();var J=Object.keys(y.candidate).length>0?O.parseCandidate(y.candidate):{};if("tcp"===J.protocol&&(0===J.port||9===J.port)||J.component&&1!==J.component)return b();if((0===q||q>0&&Q.iceTransport!==p.transceivers[0].iceTransport)&&!L(Q.iceTransport,J))return R(_("OperationError","Can not add ICE candidate"));var ee=y.candidate.trim();0===ee.indexOf("a=")&&(ee=ee.substr(2)),(v=O.getMediaSections(p._remoteDescription.sdp))[q]+="a="+(J.type?ee:"end-of-candidates")+"\r\n",p._remoteDescription.sdp=O.getDescription(p._remoteDescription.sdp)+v.join("")}else for(var z=0;z<p.transceivers.length&&(p.transceivers[z].rejected||(p.transceivers[z].iceTransport.addRemoteCandidate({}),(v=O.getMediaSections(p._remoteDescription.sdp))[z]+="a=end-of-candidates\r\n",p._remoteDescription.sdp=O.getDescription(p._remoteDescription.sdp)+v.join(""),!p.usingBundle));z++);b()})},D.prototype.getStats=function(y){if(y&&y instanceof P.MediaStreamTrack){var v=null;if(this.transceivers.forEach(function(b){b.rtpSender&&b.rtpSender.track===y?v=b.rtpSender:b.rtpReceiver&&b.rtpReceiver.track===y&&(v=b.rtpReceiver)}),!v)throw _("InvalidAccessError","Invalid selector.");return v.getStats()}var p=[];return this.transceivers.forEach(function(b){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(R){b[R]&&p.push(b[R].getStats())})}),Promise.all(p).then(function(b){var R=new Map;return b.forEach(function(q){q.forEach(function(W){R.set(W.id,W)})}),R})},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach(function(y){var v=P[y];if(v&&v.prototype&&v.prototype.getStats){var p=v.prototype.getStats;v.prototype.getStats=function(){return p.apply(this).then(function(b){var R=new Map;return Object.keys(b).forEach(function(q){b[q].type=function(P){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[P.type]||P.type}(b[q]),R.set(q,b[q])}),R})}}});var M=["createOffer","createAnswer"];return M.forEach(function(y){var v=D.prototype[y];D.prototype[y]=function(){var p=arguments;return"function"==typeof p[0]||"function"==typeof p[1]?v.apply(this,[arguments[2]]).then(function(b){"function"==typeof p[0]&&p[0].apply(null,[b])},function(b){"function"==typeof p[1]&&p[1].apply(null,[b])}):v.apply(this,arguments)}}),(M=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach(function(y){var v=D.prototype[y];D.prototype[y]=function(){var p=arguments;return"function"==typeof p[1]||"function"==typeof p[2]?v.apply(this,arguments).then(function(){"function"==typeof p[1]&&p[1].apply(null)},function(b){"function"==typeof p[2]&&p[2].apply(null,[b])}):v.apply(this,arguments)}}),["getStats"].forEach(function(y){var v=D.prototype[y];D.prototype[y]=function(){var p=arguments;return"function"==typeof p[1]?v.apply(this,arguments).then(function(){"function"==typeof p[1]&&p[1].apply(null)}):v.apply(this,arguments)}}),D}},{sdp:"YHvh"}],YdKx:[function(se,we,X){"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.shimGetUserMedia=function(F){var V=F&&F.navigator,U=V.mediaDevices.getUserMedia.bind(V.mediaDevices);V.mediaDevices.getUserMedia=function(G){return U(G).catch(function(B){return Promise.reject({name:{PermissionDeniedError:"NotAllowedError"}[(L=B).name]||L.name,message:L.message,constraint:L.constraint,toString:function(){return this.name}});var L})}}},{}],P3bV:[function(se,we,X){"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.shimGetDisplayMedia=function(F){"getDisplayMedia"in F.navigator&&F.navigator.mediaDevices&&(F.navigator.mediaDevices&&"getDisplayMedia"in F.navigator.mediaDevices||(F.navigator.mediaDevices.getDisplayMedia=F.navigator.getDisplayMedia.bind(F.navigator)))}},{}],XRic:[function(se,we,X){"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.shimPeerConnection=function(I){var S=O.detectBrowser(I);if(I.RTCIceGatherer&&(I.RTCIceCandidate||(I.RTCIceCandidate=function(y){return y}),I.RTCSessionDescription||(I.RTCSessionDescription=function(y){return y}),S.version<15025)){var D=Object.getOwnPropertyDescriptor(I.MediaStreamTrack.prototype,"enabled");Object.defineProperty(I.MediaStreamTrack.prototype,"enabled",{set:function(y){D.set.call(this,y);var v=new Event("enabled");v.enabled=y,this.dispatchEvent(v)}})}!I.RTCRtpSender||"dtmf"in I.RTCRtpSender.prototype||Object.defineProperty(I.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new I.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),I.RTCDtmfSender&&!I.RTCDTMFSender&&(I.RTCDTMFSender=I.RTCDtmfSender);var M=(0,V.default)(I,S.version);I.RTCPeerConnection=function(y){return y&&y.iceServers&&(y.iceServers=(0,F.filterIceServers)(y.iceServers,S.version),O.log("ICE servers after filtering:",y.iceServers)),new M(y)},I.RTCPeerConnection.prototype=M.prototype},X.shimReplaceTrack=function(I){!I.RTCRtpSender||"replaceTrack"in I.RTCRtpSender.prototype||(I.RTCRtpSender.prototype.replaceTrack=I.RTCRtpSender.prototype.setTrack)},Object.defineProperty(X,"shimGetUserMedia",{enumerable:!0,get:function(){return U.shimGetUserMedia}}),Object.defineProperty(X,"shimGetDisplayMedia",{enumerable:!0,get:function(){return G.shimGetDisplayMedia}});var I,O=function(I){if(I&&I.__esModule)return I;if(null===I||"object"!=typeof I&&"function"!=typeof I)return{default:I};var S=L();if(S&&S.has(I))return S.get(I);var D={},M=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var y in I)if(Object.prototype.hasOwnProperty.call(I,y)){var v=M?Object.getOwnPropertyDescriptor(I,y):null;v&&(v.get||v.set)?Object.defineProperty(D,y,v):D[y]=I[y]}return D.default=I,S&&S.set(I,D),D}(se("../utils")),F=se("./filtericeservers"),V=(I=se("rtcpeerconnection-shim"))&&I.__esModule?I:{default:I},U=se("./getusermedia"),G=se("./getdisplaymedia");function L(){if("function"!=typeof WeakMap)return null;var I=new WeakMap;return L=function(){return I},I}},{"../utils":"iSxC","./filtericeservers":"NZ1C","rtcpeerconnection-shim":"NJ2u","./getusermedia":"YdKx","./getdisplaymedia":"P3bV"}],GzSv:[function(se,we,X){"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.shimGetUserMedia=function(B){var L=O.detectBrowser(B),_=B&&B.navigator,P=B&&B.MediaStreamTrack;if(_.getUserMedia=function(M,y,v){O.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),_.mediaDevices.getUserMedia(M).then(y,v)},!(L.version>55&&"autoGainControl"in _.mediaDevices.getSupportedConstraints())){var A=function(M,y,v){y in M&&!(v in M)&&(M[v]=M[y],delete M[y])},I=_.mediaDevices.getUserMedia.bind(_.mediaDevices);if(_.mediaDevices.getUserMedia=function(M){return"object"===U(M)&&"object"===U(M.audio)&&(M=JSON.parse(JSON.stringify(M)),A(M.audio,"autoGainControl","mozAutoGainControl"),A(M.audio,"noiseSuppression","mozNoiseSuppression")),I(M)},P&&P.prototype.getSettings){var S=P.prototype.getSettings;P.prototype.getSettings=function(){var M=S.apply(this,arguments);return A(M,"mozAutoGainControl","autoGainControl"),A(M,"mozNoiseSuppression","noiseSuppression"),M}}if(P&&P.prototype.applyConstraints){var D=P.prototype.applyConstraints;P.prototype.applyConstraints=function(M){return"audio"===this.kind&&"object"===U(M)&&(M=JSON.parse(JSON.stringify(M)),A(M,"autoGainControl","mozAutoGainControl"),A(M,"noiseSuppression","mozNoiseSuppression")),D.apply(this,[M])}}}};var O=function(B){if(B&&B.__esModule)return B;if(null===B||"object"!=typeof B&&"function"!=typeof B)return{default:B};var L=F();if(L&&L.has(B))return L.get(B);var _={},P=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var A in B)if(Object.prototype.hasOwnProperty.call(B,A)){var I=P?Object.getOwnPropertyDescriptor(B,A):null;I&&(I.get||I.set)?Object.defineProperty(_,A,I):_[A]=B[A]}return _.default=B,L&&L.set(B,_),_}(se("../utils"));function F(){if("function"!=typeof WeakMap)return null;var B=new WeakMap;return F=function(){return B},B}function U(B){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(L){return typeof L}:function(L){return L&&"function"==typeof Symbol&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L})(B)}},{"../utils":"iSxC"}],UuGU:[function(se,we,X){"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.shimGetDisplayMedia=function(F,V){F.navigator.mediaDevices&&"getDisplayMedia"in F.navigator.mediaDevices||F.navigator.mediaDevices&&(F.navigator.mediaDevices.getDisplayMedia=function(U){if(!U||!U.video){var G=new DOMException("getDisplayMedia without video constraints is undefined");return G.name="NotFoundError",G.code=8,Promise.reject(G)}return!0===U.video?U.video={mediaSource:V}:U.video.mediaSource=V,F.navigator.mediaDevices.getUserMedia(U)})}},{}],Fzdr:[function(se,we,X){"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.shimOnTrack=function(p){"object"===L(p)&&p.RTCTrackEvent&&"receiver"in p.RTCTrackEvent.prototype&&!("transceiver"in p.RTCTrackEvent.prototype)&&Object.defineProperty(p.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},X.shimPeerConnection=function(p){var b=O.detectBrowser(p);if("object"===L(p)&&(p.RTCPeerConnection||p.mozRTCPeerConnection)){if(!p.RTCPeerConnection&&p.mozRTCPeerConnection&&(p.RTCPeerConnection=p.mozRTCPeerConnection),b.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(Q){var J=p.RTCPeerConnection.prototype[Q],ee=function(p,b,R){return b in p?Object.defineProperty(p,b,{value:R,enumerable:!0,configurable:!0,writable:!0}):p[b]=R,p}({},Q,function(){return arguments[0]=new("addIceCandidate"===Q?p.RTCIceCandidate:p.RTCSessionDescription)(arguments[0]),J.apply(this,arguments)});p.RTCPeerConnection.prototype[Q]=ee[Q]}),b.version<68){var R=p.RTCPeerConnection.prototype.addIceCandidate;p.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?arguments[0]&&""===arguments[0].candidate?Promise.resolve():R.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}var q={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},W=p.RTCPeerConnection.prototype.getStats;p.RTCPeerConnection.prototype.getStats=function(){var[Q,J,ee]=arguments;return W.apply(this,[Q||null]).then(function(z){if(b.version<53&&!J)try{z.forEach(function(oe){oe.type=q[oe.type]||oe.type})}catch(oe){if("TypeError"!==oe.name)throw oe;z.forEach(function(me,pe){z.set(pe,Object.assign({},me,{type:q[me.type]||me.type}))})}return z}).then(J,ee)}}},X.shimSenderGetStats=function(p){if("object"===L(p)&&p.RTCPeerConnection&&p.RTCRtpSender&&(!p.RTCRtpSender||!("getStats"in p.RTCRtpSender.prototype))){var b=p.RTCPeerConnection.prototype.getSenders;b&&(p.RTCPeerConnection.prototype.getSenders=function(){var q=this,W=b.apply(this,[]);return W.forEach(function(Q){return Q._pc=q}),W});var R=p.RTCPeerConnection.prototype.addTrack;R&&(p.RTCPeerConnection.prototype.addTrack=function(){var q=R.apply(this,arguments);return q._pc=this,q}),p.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}},X.shimReceiverGetStats=function(p){if("object"===L(p)&&p.RTCPeerConnection&&p.RTCRtpSender&&(!p.RTCRtpSender||!("getStats"in p.RTCRtpReceiver.prototype))){var b=p.RTCPeerConnection.prototype.getReceivers;b&&(p.RTCPeerConnection.prototype.getReceivers=function(){var R=this,q=b.apply(this,[]);return q.forEach(function(W){return W._pc=R}),q}),O.wrapPeerConnectionEvent(p,"track",function(R){return R.receiver._pc=R.srcElement,R}),p.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}},X.shimRemoveStream=function(p){!p.RTCPeerConnection||"removeStream"in p.RTCPeerConnection.prototype||(p.RTCPeerConnection.prototype.removeStream=function(b){var R=this;O.deprecated("removeStream","removeTrack"),this.getSenders().forEach(function(q){q.track&&b.getTracks().includes(q.track)&&R.removeTrack(q)})})},X.shimRTCDataChannel=function(p){p.DataChannel&&!p.RTCDataChannel&&(p.RTCDataChannel=p.DataChannel)},X.shimAddTransceiver=function(p){if("object"===L(p)&&p.RTCPeerConnection){var b=p.RTCPeerConnection.prototype.addTransceiver;b&&(p.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];var R=arguments[1],q=R&&"sendEncodings"in R;q&&R.sendEncodings.forEach(function(ee){if("rid"in ee&&!/^[a-z0-9]{0,16}$/i.test(ee.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in ee&&!(parseFloat(ee.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in ee&&!(parseFloat(ee.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});var W=b.apply(this,arguments);if(q){var{sender:Q}=W,J=Q.getParameters();"encodings"in J||(J.encodings=R.sendEncodings,this.setParametersPromises.push(Q.setParameters(J).catch(function(){})))}return W})}},X.shimCreateOffer=function(p){if("object"===L(p)&&p.RTCPeerConnection){var b=p.RTCPeerConnection.prototype.createOffer;p.RTCPeerConnection.prototype.createOffer=function(){var R=arguments,q=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(function(){return b.apply(q,R)}).finally(function(){q.setParametersPromises=[]}):b.apply(this,arguments)}}},X.shimCreateAnswer=function(p){if("object"===L(p)&&p.RTCPeerConnection){var b=p.RTCPeerConnection.prototype.createAnswer;p.RTCPeerConnection.prototype.createAnswer=function(){var R=arguments,q=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(function(){return b.apply(q,R)}).finally(function(){q.setParametersPromises=[]}):b.apply(this,arguments)}}},Object.defineProperty(X,"shimGetUserMedia",{enumerable:!0,get:function(){return F.shimGetUserMedia}}),Object.defineProperty(X,"shimGetDisplayMedia",{enumerable:!0,get:function(){return V.shimGetDisplayMedia}});var O=function(p){if(p&&p.__esModule)return p;if(null===p||"object"!=typeof p&&"function"!=typeof p)return{default:p};var b=U();if(b&&b.has(p))return b.get(p);var R={},q=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var W in p)if(Object.prototype.hasOwnProperty.call(p,W)){var Q=q?Object.getOwnPropertyDescriptor(p,W):null;Q&&(Q.get||Q.set)?Object.defineProperty(R,W,Q):R[W]=p[W]}return R.default=p,b&&b.set(p,R),R}(se("../utils")),F=se("./getusermedia"),V=se("./getdisplaymedia");function U(){if("function"!=typeof WeakMap)return null;var p=new WeakMap;return U=function(){return p},p}function L(p){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"==typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(p)}},{"../utils":"iSxC","./getusermedia":"GzSv","./getdisplaymedia":"UuGU"}],t1lL:[function(se,we,X){"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.shimLocalStreamsAPI=function(D){if("object"===U(D)&&D.RTCPeerConnection){if("getLocalStreams"in D.RTCPeerConnection.prototype||(D.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in D.RTCPeerConnection.prototype)){var M=D.RTCPeerConnection.prototype.addTrack;D.RTCPeerConnection.prototype.addStream=function(y){var v=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(y)||this._localStreams.push(y),y.getAudioTracks().forEach(function(p){return M.call(v,p,y)}),y.getVideoTracks().forEach(function(p){return M.call(v,p,y)})},D.RTCPeerConnection.prototype.addTrack=function(y){var v=arguments[1];return v&&(this._localStreams?this._localStreams.includes(v)||this._localStreams.push(v):this._localStreams=[v]),M.apply(this,arguments)}}"removeStream"in D.RTCPeerConnection.prototype||(D.RTCPeerConnection.prototype.removeStream=function(y){var v=this;this._localStreams||(this._localStreams=[]);var p=this._localStreams.indexOf(y);if(-1!==p){this._localStreams.splice(p,1);var b=y.getTracks();this.getSenders().forEach(function(R){b.includes(R.track)&&v.removeTrack(R)})}})}},X.shimRemoteStreamsAPI=function(D){if("object"===U(D)&&D.RTCPeerConnection&&("getRemoteStreams"in D.RTCPeerConnection.prototype||(D.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in D.RTCPeerConnection.prototype))){Object.defineProperty(D.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(y){var v=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=y),this.addEventListener("track",this._onaddstreampoly=function(p){p.streams.forEach(function(b){if(v._remoteStreams||(v._remoteStreams=[]),!v._remoteStreams.includes(b)){v._remoteStreams.push(b);var R=new Event("addstream");R.stream=b,v.dispatchEvent(R)}})})}});var M=D.RTCPeerConnection.prototype.setRemoteDescription;D.RTCPeerConnection.prototype.setRemoteDescription=function(){var y=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(v){v.streams.forEach(function(p){if(y._remoteStreams||(y._remoteStreams=[]),!(y._remoteStreams.indexOf(p)>=0)){y._remoteStreams.push(p);var b=new Event("addstream");b.stream=p,y.dispatchEvent(b)}})}),M.apply(y,arguments)}}},X.shimCallbacksAPI=function(D){if("object"===U(D)&&D.RTCPeerConnection){var M=D.RTCPeerConnection.prototype,y=M.createOffer,v=M.createAnswer,p=M.setLocalDescription,b=M.setRemoteDescription,R=M.addIceCandidate;M.createOffer=function(W,Q){var J=arguments.length>=2?arguments[2]:arguments[0],ee=y.apply(this,[J]);return Q?(ee.then(W,Q),Promise.resolve()):ee},M.createAnswer=function(W,Q){var J=arguments.length>=2?arguments[2]:arguments[0],ee=v.apply(this,[J]);return Q?(ee.then(W,Q),Promise.resolve()):ee};var q=function(W,Q,J){var ee=p.apply(this,[W]);return J?(ee.then(Q,J),Promise.resolve()):ee};M.setLocalDescription=q,M.setRemoteDescription=q=function(W,Q,J){var ee=b.apply(this,[W]);return J?(ee.then(Q,J),Promise.resolve()):ee},M.addIceCandidate=q=function(W,Q,J){var ee=R.apply(this,[W]);return J?(ee.then(Q,J),Promise.resolve()):ee}}},X.shimGetUserMedia=function(D){var M=D&&D.navigator;if(M.mediaDevices&&M.mediaDevices.getUserMedia){var y=M.mediaDevices,v=y.getUserMedia.bind(y);M.mediaDevices.getUserMedia=function(p){return v(P(p))}}!M.getUserMedia&&M.mediaDevices&&M.mediaDevices.getUserMedia&&(M.getUserMedia=function(p,b,R){M.mediaDevices.getUserMedia(p).then(b,R)}.bind(M))},X.shimConstraints=P,X.shimRTCIceServerUrls=function(D){var M=D.RTCPeerConnection;D.RTCPeerConnection=function(y,v){if(y&&y.iceServers){for(var p=[],b=0;b<y.iceServers.length;b++){var R=y.iceServers[b];!R.hasOwnProperty("urls")&&R.hasOwnProperty("url")?(O.deprecated("RTCIceServer.url","RTCIceServer.urls"),(R=JSON.parse(JSON.stringify(R))).urls=R.url,delete R.url,p.push(R)):p.push(y.iceServers[b])}y.iceServers=p}return new M(y,v)},D.RTCPeerConnection.prototype=M.prototype,"generateCertificate"in D.RTCPeerConnection&&Object.defineProperty(D.RTCPeerConnection,"generateCertificate",{get:function(){return M.generateCertificate}})},X.shimTrackEventTransceiver=function(D){"object"===U(D)&&D.RTCTrackEvent&&"receiver"in D.RTCTrackEvent.prototype&&!("transceiver"in D.RTCTrackEvent.prototype)&&Object.defineProperty(D.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},X.shimCreateOfferLegacy=function(D){var M=D.RTCPeerConnection.prototype.createOffer;D.RTCPeerConnection.prototype.createOffer=function(y){if(y){void 0!==y.offerToReceiveAudio&&(y.offerToReceiveAudio=!!y.offerToReceiveAudio);var v=this.getTransceivers().find(function(b){return"audio"===b.receiver.track.kind});!1===y.offerToReceiveAudio&&v?"sendrecv"===v.direction?v.setDirection?v.setDirection("sendonly"):v.direction="sendonly":"recvonly"===v.direction&&(v.setDirection?v.setDirection("inactive"):v.direction="inactive"):!0!==y.offerToReceiveAudio||v||this.addTransceiver("audio"),void 0!==y.offerToReceiveVideo&&(y.offerToReceiveVideo=!!y.offerToReceiveVideo);var p=this.getTransceivers().find(function(b){return"video"===b.receiver.track.kind});!1===y.offerToReceiveVideo&&p?"sendrecv"===p.direction?p.setDirection?p.setDirection("sendonly"):p.direction="sendonly":"recvonly"===p.direction&&(p.setDirection?p.setDirection("inactive"):p.direction="inactive"):!0!==y.offerToReceiveVideo||p||this.addTransceiver("video")}return M.apply(this,arguments)}};var O=function(D){if(D&&D.__esModule)return D;if(null===D||"object"!=typeof D&&"function"!=typeof D)return{default:D};var M=F();if(M&&M.has(D))return M.get(D);var y={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in D)if(Object.prototype.hasOwnProperty.call(D,p)){var b=v?Object.getOwnPropertyDescriptor(D,p):null;b&&(b.get||b.set)?Object.defineProperty(y,p,b):y[p]=D[p]}return y.default=D,M&&M.set(D,y),y}(se("../utils"));function F(){if("function"!=typeof WeakMap)return null;var D=new WeakMap;return F=function(){return D},D}function U(D){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(M){return typeof M}:function(M){return M&&"function"==typeof Symbol&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M})(D)}function P(D){return D&&void 0!==D.video?Object.assign({},D,{video:O.compactObject(D.video)}):D}},{"../utils":"iSxC"}],GOQK:[function(se,we,X){"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.shimRTCIceCandidate=function(S){if(S.RTCIceCandidate&&(!S.RTCIceCandidate||!("foundation"in S.RTCIceCandidate.prototype))){var D=S.RTCIceCandidate;S.RTCIceCandidate=function(M){if("object"===B(M)&&M.candidate&&0===M.candidate.indexOf("a=")&&((M=JSON.parse(JSON.stringify(M))).candidate=M.candidate.substr(2)),M.candidate&&M.candidate.length){var y=new D(M),v=O.default.parseCandidate(M.candidate),p=Object.assign(y,v);return p.toJSON=function(){return{candidate:p.candidate,sdpMid:p.sdpMid,sdpMLineIndex:p.sdpMLineIndex,usernameFragment:p.usernameFragment}},p}return new D(M)},S.RTCIceCandidate.prototype=D.prototype,F.wrapPeerConnectionEvent(S,"icecandidate",function(M){return M.candidate&&Object.defineProperty(M,"candidate",{value:new S.RTCIceCandidate(M.candidate),writable:"false"}),M})}},X.shimMaxMessageSize=function(S){if(S.RTCPeerConnection){var D=F.detectBrowser(S);"sctp"in S.RTCPeerConnection.prototype||Object.defineProperty(S.RTCPeerConnection.prototype,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp}});var M=S.RTCPeerConnection.prototype.setRemoteDescription;S.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===D.browser&&D.version>=76){var{sdpSemantics:y}=this.getConfiguration();"plan-b"===y&&Object.defineProperty(this,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(function(J){if(!J||!J.sdp)return!1;var ee=O.default.splitSections(J.sdp);return ee.shift(),ee.some(function(z){var oe=O.default.parseMLine(z);return oe&&"application"===oe.kind&&-1!==oe.protocol.indexOf("SCTP")})}(arguments[0])){var v,p=function(J){var ee=J.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===ee||ee.length<2)return-1;var z=parseInt(ee[1],10);return z!=z?-1:z}(arguments[0]),b=(W=p,Q=65536,"firefox"===D.browser&&(Q=D.version<57?-1===W?16384:2147483637:D.version<60?57===D.version?65535:65536:2147483637),Q),R=function(J,ee){var z=65536;"firefox"===D.browser&&57===D.version&&(z=65535);var oe=O.default.matchPrefix(J.sdp,"a=max-message-size:");return oe.length>0?z=parseInt(oe[0].substr(19),10):"firefox"===D.browser&&-1!==ee&&(z=2147483637),z}(arguments[0],p);v=0===b&&0===R?Number.POSITIVE_INFINITY:0===b||0===R?Math.max(b,R):Math.min(b,R);var q={};Object.defineProperty(q,"maxMessageSize",{get:function(){return v}}),this._sctp=q}var W,Q;return M.apply(this,arguments)}}},X.shimSendThrowTypeError=function(S){if(S.RTCPeerConnection&&"createDataChannel"in S.RTCPeerConnection.prototype){var D=S.RTCPeerConnection.prototype.createDataChannel;S.RTCPeerConnection.prototype.createDataChannel=function(){var y=D.apply(this,arguments);return M(y,this),y},F.wrapPeerConnectionEvent(S,"datachannel",function(y){return M(y.channel,y.target),y})}function M(y,v){var p=y.send;y.send=function(){var b=arguments[0],R=b.length||b.size||b.byteLength;if("open"===y.readyState&&v.sctp&&R>v.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+v.sctp.maxMessageSize+" bytes)");return p.apply(y,arguments)}}},X.shimConnectionState=function(S){if(S.RTCPeerConnection&&!("connectionState"in S.RTCPeerConnection.prototype)){var D=S.RTCPeerConnection.prototype;Object.defineProperty(D,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(D,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(M){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),M&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=M)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(function(M){var y=D[M];D[M]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(v){var p=v.target;if(p._lastConnectionState!==p.connectionState){p._lastConnectionState=p.connectionState;var b=new Event("connectionstatechange",v);p.dispatchEvent(b)}return v},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),y.apply(this,arguments)}})}},X.removeAllowExtmapMixed=function(S){if(S.RTCPeerConnection){var D=F.detectBrowser(S);if(!("chrome"===D.browser&&D.version>=71)){var M=S.RTCPeerConnection.prototype.setRemoteDescription;S.RTCPeerConnection.prototype.setRemoteDescription=function(y){return y&&y.sdp&&-1!==y.sdp.indexOf("\na=extmap-allow-mixed")&&(y.sdp=y.sdp.split("\n").filter(function(v){return"a=extmap-allow-mixed"!==v.trim()}).join("\n")),M.apply(this,arguments)}}}};var S,O=(S=se("sdp"))&&S.__esModule?S:{default:S},F=function(S){if(S&&S.__esModule)return S;if(null===S||"object"!=typeof S&&"function"!=typeof S)return{default:S};var D=V();if(D&&D.has(S))return D.get(S);var M={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var v in S)if(Object.prototype.hasOwnProperty.call(S,v)){var p=y?Object.getOwnPropertyDescriptor(S,v):null;p&&(p.get||p.set)?Object.defineProperty(M,v,p):M[v]=S[v]}return M.default=S,D&&D.set(S,M),M}(se("./utils"));function V(){if("function"!=typeof WeakMap)return null;var S=new WeakMap;return V=function(){return S},S}function B(S){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(D){return typeof D}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D})(S)}},{sdp:"YHvh","./utils":"iSxC"}],KtlG:[function(se,we,X){"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.adapterFactory=function(){var{window:A}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},I=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0},S=O.log,D=O.detectBrowser(A),M={browserDetails:D,commonShim:B,extractVersion:O.extractVersion,disableLog:O.disableLog,disableWarnings:O.disableWarnings};switch(D.browser){case"chrome":if(!F||!F.shimPeerConnection||!I.shimChrome)return S("Chrome shim is not included in this adapter release."),M;S("adapter.js shimming chrome."),M.browserShim=F,F.shimGetUserMedia(A),F.shimMediaStream(A),F.shimPeerConnection(A),F.shimOnTrack(A),F.shimAddTrackRemoveTrack(A),F.shimGetSendersWithDtmf(A),F.shimGetStats(A),F.shimSenderReceiverGetStats(A),F.fixNegotiationNeeded(A),B.shimRTCIceCandidate(A),B.shimConnectionState(A),B.shimMaxMessageSize(A),B.shimSendThrowTypeError(A),B.removeAllowExtmapMixed(A);break;case"firefox":if(!U||!U.shimPeerConnection||!I.shimFirefox)return S("Firefox shim is not included in this adapter release."),M;S("adapter.js shimming firefox."),M.browserShim=U,U.shimGetUserMedia(A),U.shimPeerConnection(A),U.shimOnTrack(A),U.shimRemoveStream(A),U.shimSenderGetStats(A),U.shimReceiverGetStats(A),U.shimRTCDataChannel(A),U.shimAddTransceiver(A),U.shimCreateOffer(A),U.shimCreateAnswer(A),B.shimRTCIceCandidate(A),B.shimConnectionState(A),B.shimMaxMessageSize(A),B.shimSendThrowTypeError(A);break;case"edge":if(!V||!V.shimPeerConnection||!I.shimEdge)return S("MS edge shim is not included in this adapter release."),M;S("adapter.js shimming edge."),M.browserShim=V,V.shimGetUserMedia(A),V.shimGetDisplayMedia(A),V.shimPeerConnection(A),V.shimReplaceTrack(A),B.shimMaxMessageSize(A),B.shimSendThrowTypeError(A);break;case"safari":if(!G||!I.shimSafari)return S("Safari shim is not included in this adapter release."),M;S("adapter.js shimming safari."),M.browserShim=G,G.shimRTCIceServerUrls(A),G.shimCreateOfferLegacy(A),G.shimCallbacksAPI(A),G.shimLocalStreamsAPI(A),G.shimRemoteStreamsAPI(A),G.shimTrackEventTransceiver(A),G.shimGetUserMedia(A),B.shimRTCIceCandidate(A),B.shimMaxMessageSize(A),B.shimSendThrowTypeError(A),B.removeAllowExtmapMixed(A);break;default:S("Unsupported browser!")}return M};var O=_(se("./utils")),F=_(se("./chrome/chrome_shim")),V=_(se("./edge/edge_shim")),U=_(se("./firefox/firefox_shim")),G=_(se("./safari/safari_shim")),B=_(se("./common_shim"));function L(){if("function"!=typeof WeakMap)return null;var A=new WeakMap;return L=function(){return A},A}function _(A){if(A&&A.__esModule)return A;if(null===A||"object"!=typeof A&&"function"!=typeof A)return{default:A};var I=L();if(I&&I.has(A))return I.get(A);var S={},D=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var M in A)if(Object.prototype.hasOwnProperty.call(A,M)){var y=D?Object.getOwnPropertyDescriptor(A,M):null;y&&(y.get||y.set)?Object.defineProperty(S,M,y):S[M]=A[M]}return S.default=A,I&&I.set(A,S),S}},{"./utils":"iSxC","./chrome/chrome_shim":"uI5X","./edge/edge_shim":"XRic","./firefox/firefox_shim":"Fzdr","./safari/safari_shim":"t1lL","./common_shim":"GOQK"}],tI1X:[function(se,we,X){"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.default=void 0;var F=(0,se("./adapter_factory.js").adapterFactory)({window});X.default=F},{"./adapter_factory.js":"KtlG"}],sXtV:[function(se,we,X){"use strict";var O=this&&this.__importDefault||function(V){return V&&V.__esModule?V:{default:V}};Object.defineProperty(X,"__esModule",{value:!0});var F=O(se("webrtc-adapter"));X.webRTCAdapter=F.default},{"webrtc-adapter":"tI1X"}],I31f:[function(se,we,X){"use strict";Object.defineProperty(X,"__esModule",{value:!0});var O=se("./adapter");X.Supports=new(function(){function F(){this.isIOS=["iPad","iPhone","iPod"].includes(navigator.platform),this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}return F.prototype.isWebRTCSupported=function(){return"undefined"!=typeof RTCPeerConnection},F.prototype.isBrowserSupported=function(){var V=this.getBrowser(),U=this.getVersion();return!!this.supportedBrowsers.includes(V)&&("chrome"===V?U>=this.minChromeVersion:"firefox"===V?U>=this.minFirefoxVersion:"safari"===V&&!this.isIOS&&U>=this.minSafariVersion)},F.prototype.getBrowser=function(){return O.webRTCAdapter.browserDetails.browser},F.prototype.getVersion=function(){return O.webRTCAdapter.browserDetails.version||0},F.prototype.isUnifiedPlanSupported=function(){var V,U=this.getBrowser(),G=O.webRTCAdapter.browserDetails.version||0;if("chrome"===U&&G<72)return!1;if("firefox"===U&&G>=59)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;var B=!1;try{(V=new RTCPeerConnection).addTransceiver("audio"),B=!0}catch(L){}finally{V&&V.close()}return B},F.prototype.toString=function(){return"Supports: \n    browser:"+this.getBrowser()+" \n    version:"+this.getVersion()+" \n    isIOS:"+this.isIOS+" \n    isWebRTCSupported:"+this.isWebRTCSupported()+" \n    isBrowserSupported:"+this.isBrowserSupported()+" \n    isUnifiedPlanSupported:"+this.isUnifiedPlanSupported()},F}())},{"./adapter":"sXtV"}],BHXf:[function(se,we,X){"use strict";var O=this&&this.__importStar||function(G){if(G&&G.__esModule)return G;var B={};if(null!=G)for(var L in G)Object.hasOwnProperty.call(G,L)&&(B[L]=G[L]);return B.default=G,B};Object.defineProperty(X,"__esModule",{value:!0});var F=O(se("peerjs-js-binarypack")),V=se("./supports"),U={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"turn:0.peerjs.com:3478",username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};X.util=new(function(){function G(){this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.chunkedMTU=16300,this.defaultConfig=U,this.browser=V.Supports.getBrowser(),this.browserVersion=V.Supports.getVersion(),this.supports=function(){var B,L={browser:V.Supports.isBrowserSupported(),webRTC:V.Supports.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!L.webRTC)return L;try{B=new RTCPeerConnection(U),L.audioVideo=!0;var _=void 0;try{_=B.createDataChannel("_PEERJSTEST",{ordered:!0}),L.data=!0,L.reliable=!!_.ordered;try{_.binaryType="blob",L.binaryBlob=!V.Supports.isIOS}catch(P){}}catch(P){}finally{_&&_.close()}}catch(P){}finally{B&&B.close()}return L}(),this.pack=F.pack,this.unpack=F.unpack,this._dataCount=1}return G.prototype.noop=function(){},G.prototype.validateId=function(B){return!B||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(B)},G.prototype.chunk=function(B){for(var L=[],_=B.size,P=Math.ceil(_/X.util.chunkedMTU),A=0,I=0;I<_;){var S=Math.min(_,I+X.util.chunkedMTU),D=B.slice(I,S);L.push({__peerData:this._dataCount,n:A,data:D,total:P}),I=S,A++}return this._dataCount++,L},G.prototype.blobToArrayBuffer=function(B,L){var _=new FileReader;return _.onload=function(P){P.target&&L(P.target.result)},_.readAsArrayBuffer(B),_},G.prototype.binaryStringToArrayBuffer=function(B){for(var L=new Uint8Array(B.length),_=0;_<B.length;_++)L[_]=255&B.charCodeAt(_);return L.buffer},G.prototype.randomToken=function(){return Math.random().toString(36).substr(2)},G.prototype.isSecure=function(){return"https:"===location.protocol},G}())},{"peerjs-js-binarypack":"kdPp","./supports":"I31f"}],JJlS:[function(se,we,X){"use strict";var O=Object.prototype.hasOwnProperty,F="~";function V(){}function U(_,P,A){this.fn=_,this.context=P,this.once=A||!1}function G(_,P,A,I,S){if("function"!=typeof A)throw new TypeError("The listener must be a function");var D=new U(A,I||_,S),M=F?F+P:P;return _._events[M]?_._events[M].fn?_._events[M]=[_._events[M],D]:_._events[M].push(D):(_._events[M]=D,_._eventsCount++),_}function B(_,P){0==--_._eventsCount?_._events=new V:delete _._events[P]}function L(){this._events=new V,this._eventsCount=0}Object.create&&(V.prototype=Object.create(null),(new V).__proto__||(F=!1)),L.prototype.eventNames=function(){var _,P,A=[];if(0===this._eventsCount)return A;for(P in _=this._events)O.call(_,P)&&A.push(F?P.slice(1):P);return Object.getOwnPropertySymbols?A.concat(Object.getOwnPropertySymbols(_)):A},L.prototype.listeners=function(_){var A=this._events[F?F+_:_];if(!A)return[];if(A.fn)return[A.fn];for(var I=0,S=A.length,D=new Array(S);I<S;I++)D[I]=A[I].fn;return D},L.prototype.listenerCount=function(_){var A=this._events[F?F+_:_];return A?A.fn?1:A.length:0},L.prototype.emit=function(_,P,A,I,S,D){var M=F?F+_:_;if(!this._events[M])return!1;var y,v,p=this._events[M],b=arguments.length;if(p.fn){switch(p.once&&this.removeListener(_,p.fn,void 0,!0),b){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,P),!0;case 3:return p.fn.call(p.context,P,A),!0;case 4:return p.fn.call(p.context,P,A,I),!0;case 5:return p.fn.call(p.context,P,A,I,S),!0;case 6:return p.fn.call(p.context,P,A,I,S,D),!0}for(v=1,y=new Array(b-1);v<b;v++)y[v-1]=arguments[v];p.fn.apply(p.context,y)}else{var R,q=p.length;for(v=0;v<q;v++)switch(p[v].once&&this.removeListener(_,p[v].fn,void 0,!0),b){case 1:p[v].fn.call(p[v].context);break;case 2:p[v].fn.call(p[v].context,P);break;case 3:p[v].fn.call(p[v].context,P,A);break;case 4:p[v].fn.call(p[v].context,P,A,I);break;default:if(!y)for(R=1,y=new Array(b-1);R<b;R++)y[R-1]=arguments[R];p[v].fn.apply(p[v].context,y)}}return!0},L.prototype.on=function(_,P,A){return G(this,_,P,A,!1)},L.prototype.once=function(_,P,A){return G(this,_,P,A,!0)},L.prototype.removeListener=function(_,P,A,I){var S=F?F+_:_;if(!this._events[S])return this;if(!P)return B(this,S),this;var D=this._events[S];if(D.fn)D.fn!==P||I&&!D.once||A&&D.context!==A||B(this,S);else{for(var M=0,y=[],v=D.length;M<v;M++)(D[M].fn!==P||I&&!D[M].once||A&&D[M].context!==A)&&y.push(D[M]);y.length?this._events[S]=1===y.length?y[0]:y:B(this,S)}return this},L.prototype.removeAllListeners=function(_){var P;return _?this._events[P=F?F+_:_]&&B(this,P):(this._events=new V,this._eventsCount=0),this},L.prototype.off=L.prototype.removeListener,L.prototype.addListener=L.prototype.on,L.prefixed=F,L.EventEmitter=L,void 0!==we&&(we.exports=L)},{}],WOs9:[function(se,we,X){"use strict";var O=this&&this.__read||function(B,L){var _="function"==typeof Symbol&&B[Symbol.iterator];if(!_)return B;var P,A,I=_.call(B),S=[];try{for(;(void 0===L||L-- >0)&&!(P=I.next()).done;)S.push(P.value)}catch(D){A={error:D}}finally{try{P&&!P.done&&(_=I.return)&&_.call(I)}finally{if(A)throw A.error}}return S},F=this&&this.__spread||function(){for(var B=[],L=0;L<arguments.length;L++)B=B.concat(O(arguments[L]));return B};Object.defineProperty(X,"__esModule",{value:!0});var V,B,U="PeerJS: ";(B=V=X.LogLevel||(X.LogLevel={}))[B.Disabled=0]="Disabled",B[B.Errors=1]="Errors",B[B.Warnings=2]="Warnings",B[B.All=3]="All";var G=function(){function B(){this._logLevel=V.Disabled}return Object.defineProperty(B.prototype,"logLevel",{get:function(){return this._logLevel},set:function(L){this._logLevel=L},enumerable:!0,configurable:!0}),B.prototype.log=function(){for(var L=[],_=0;_<arguments.length;_++)L[_]=arguments[_];this._logLevel>=V.All&&this._print.apply(this,F([V.All],L))},B.prototype.warn=function(){for(var L=[],_=0;_<arguments.length;_++)L[_]=arguments[_];this._logLevel>=V.Warnings&&this._print.apply(this,F([V.Warnings],L))},B.prototype.error=function(){for(var L=[],_=0;_<arguments.length;_++)L[_]=arguments[_];this._logLevel>=V.Errors&&this._print.apply(this,F([V.Errors],L))},B.prototype.setLogFunction=function(L){this._print=L},B.prototype._print=function(L){for(var _=[],P=1;P<arguments.length;P++)_[P-1]=arguments[P];var A=F([U],_);for(var I in A)A[I]instanceof Error&&(A[I]="("+A[I].name+") "+A[I].message);L>=V.All?console.log.apply(console,F(A)):L>=V.Warnings?console.warn.apply(console,F(["WARNING"],A)):L>=V.Errors&&console.error.apply(console,F(["ERROR"],A))},B}();X.default=new G},{}],ZRYf:[function(se,we,X){"use strict";var _;Object.defineProperty(X,"__esModule",{value:!0}),(_=X.ConnectionEventType||(X.ConnectionEventType={})).Open="open",_.Stream="stream",_.Data="data",_.Close="close",_.Error="error",_.IceStateChanged="iceStateChanged",function(_){_.Data="data",_.Media="media"}(X.ConnectionType||(X.ConnectionType={})),function(_){_.Open="open",_.Close="close",_.Connection="connection",_.Call="call",_.Disconnected="disconnected",_.Error="error"}(X.PeerEventType||(X.PeerEventType={})),function(_){_.BrowserIncompatible="browser-incompatible",_.Disconnected="disconnected",_.InvalidID="invalid-id",_.InvalidKey="invalid-key",_.Network="network",_.PeerUnavailable="peer-unavailable",_.SslUnavailable="ssl-unavailable",_.ServerError="server-error",_.SocketError="socket-error",_.SocketClosed="socket-closed",_.UnavailableID="unavailable-id",_.WebRTC="webrtc"}(X.PeerErrorType||(X.PeerErrorType={})),function(_){_.Binary="binary",_.BinaryUTF8="binary-utf8",_.JSON="json"}(X.SerializationType||(X.SerializationType={})),function(_){_.Message="message",_.Disconnected="disconnected",_.Error="error",_.Close="close"}(X.SocketEventType||(X.SocketEventType={})),function(_){_.Heartbeat="HEARTBEAT",_.Candidate="CANDIDATE",_.Offer="OFFER",_.Answer="ANSWER",_.Open="OPEN",_.Error="ERROR",_.IdTaken="ID-TAKEN",_.InvalidKey="INVALID-KEY",_.Leave="LEAVE",_.Expire="EXPIRE"}(X.ServerMessageType||(X.ServerMessageType={}))},{}],wJlv:[function(se,we,X){"use strict";var A,O=this&&this.__extends||(A=function(I,S){return(A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,M){D.__proto__=M}||function(D,M){for(var y in M)M.hasOwnProperty(y)&&(D[y]=M[y])})(I,S)},function(I,S){function D(){this.constructor=I}A(I,S),I.prototype=null===S?Object.create(S):(D.prototype=S.prototype,new D)}),F=this&&this.__read||function(A,I){var S="function"==typeof Symbol&&A[Symbol.iterator];if(!S)return A;var D,M,y=S.call(A),v=[];try{for(;(void 0===I||I-- >0)&&!(D=y.next()).done;)v.push(D.value)}catch(p){M={error:p}}finally{try{D&&!D.done&&(S=y.return)&&S.call(y)}finally{if(M)throw M.error}}return v},V=this&&this.__spread||function(){for(var A=[],I=0;I<arguments.length;I++)A=A.concat(F(arguments[I]));return A},U=this&&this.__values||function(A){var I="function"==typeof Symbol&&Symbol.iterator,S=I&&A[I],D=0;if(S)return S.call(A);if(A&&"number"==typeof A.length)return{next:function(){return A&&D>=A.length&&(A=void 0),{value:A&&A[D++],done:!A}}};throw new TypeError(I?"Object is not iterable.":"Symbol.iterator is not defined.")},G=this&&this.__importDefault||function(A){return A&&A.__esModule?A:{default:A}};Object.defineProperty(X,"__esModule",{value:!0});var B=se("eventemitter3"),L=G(se("./logger")),_=se("./enums"),P=function(A){function I(S,D,M,y,v,p){void 0===p&&(p=5e3);var b=A.call(this)||this;return b.pingInterval=p,b._disconnected=!0,b._messagesQueue=[],b._baseUrl=(S?"wss://":"ws://")+D+":"+M+y+"peerjs?key="+v,b}return O(I,A),I.prototype.start=function(S,D){var M=this;this._id=S,!this._socket&&this._disconnected&&(this._socket=new WebSocket(this._baseUrl+"&id="+S+"&token="+D),this._disconnected=!1,this._socket.onmessage=function(v){var p;try{p=JSON.parse(v.data),L.default.log("Server message received:",p)}catch(b){return void L.default.log("Invalid server message",v.data)}M.emit(_.SocketEventType.Message,p)},this._socket.onclose=function(v){M._disconnected||(L.default.log("Socket closed.",v),M._cleanup(),M._disconnected=!0,M.emit(_.SocketEventType.Disconnected))},this._socket.onopen=function(){M._disconnected||(M._sendQueuedMessages(),L.default.log("Socket open"),M._scheduleHeartbeat())})},I.prototype._scheduleHeartbeat=function(){var S=this;this._wsPingTimer=setTimeout(function(){S._sendHeartbeat()},this.pingInterval)},I.prototype._sendHeartbeat=function(){if(this._wsOpen()){var S=JSON.stringify({type:_.ServerMessageType.Heartbeat});this._socket.send(S),this._scheduleHeartbeat()}else L.default.log("Cannot send heartbeat, because socket closed")},I.prototype._wsOpen=function(){return!!this._socket&&1===this._socket.readyState},I.prototype._sendQueuedMessages=function(){var S,D,M=V(this._messagesQueue);this._messagesQueue=[];try{for(var y=U(M),v=y.next();!v.done;v=y.next())this.send(v.value)}catch(b){S={error:b}}finally{try{v&&!v.done&&(D=y.return)&&D.call(y)}finally{if(S)throw S.error}}},I.prototype.send=function(S){if(!this._disconnected)if(this._id)if(S.type){if(this._wsOpen()){var D=JSON.stringify(S);this._socket.send(D)}}else this.emit(_.SocketEventType.Error,"Invalid message");else this._messagesQueue.push(S)},I.prototype.close=function(){this._disconnected||(this._cleanup(),this._disconnected=!0)},I.prototype._cleanup=function(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)},I}(B.EventEmitter);X.Socket=P},{eventemitter3:"JJlS","./logger":"WOs9","./enums":"ZRYf"}],HCdX:[function(se,we,X){"use strict";var O=this&&this.__assign||function(){return(O=Object.assign||function(P){for(var A,I=1,S=arguments.length;I<S;I++)for(var D in A=arguments[I])Object.prototype.hasOwnProperty.call(A,D)&&(P[D]=A[D]);return P}).apply(this,arguments)},F=this&&this.__awaiter||function(P,A,I,S){return new(I||(I=Promise))(function(D,M){function y(b){try{p(S.next(b))}catch(R){M(R)}}function v(b){try{p(S.throw(b))}catch(R){M(R)}}function p(b){var R;b.done?D(b.value):(R=b.value,R instanceof I?R:new I(function(q){q(R)})).then(y,v)}p((S=S.apply(P,A||[])).next())})},V=this&&this.__generator||function(P,A){var I,S,D,M,y={label:0,sent:function(){if(1&D[0])throw D[1];return D[1]},trys:[],ops:[]};return M={next:v(0),throw:v(1),return:v(2)},"function"==typeof Symbol&&(M[Symbol.iterator]=function(){return this}),M;function v(p){return function(b){return function(R){if(I)throw new TypeError("Generator is already executing.");for(;y;)try{if(I=1,S&&(D=2&R[0]?S.return:R[0]?S.throw||((D=S.return)&&D.call(S),0):S.next)&&!(D=D.call(S,R[1])).done)return D;switch(S=0,D&&(R=[2&R[0],D.value]),R[0]){case 0:case 1:D=R;break;case 4:return y.label++,{value:R[1],done:!1};case 5:y.label++,S=R[1],R=[0];continue;case 7:R=y.ops.pop(),y.trys.pop();continue;default:if(!(D=(D=y.trys).length>0&&D[D.length-1])&&(6===R[0]||2===R[0])){y=0;continue}if(3===R[0]&&(!D||R[1]>D[0]&&R[1]<D[3])){y.label=R[1];break}if(6===R[0]&&y.label<D[1]){y.label=D[1],D=R;break}if(D&&y.label<D[2]){y.label=D[2],y.ops.push(R);break}D[2]&&y.ops.pop(),y.trys.pop();continue}R=A.call(P,y)}catch(q){R=[6,q],S=0}finally{I=D=0}if(5&R[0])throw R[1];return{value:R[0]?R[1]:void 0,done:!0}}([p,b])}}},U=this&&this.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(X,"__esModule",{value:!0});var G=se("./util"),B=U(se("./logger")),L=se("./enums"),_=function(){function P(A){this.connection=A}return P.prototype.startConnection=function(A){var I=this._startPeerConnection();if(this.connection.peerConnection=I,this.connection.type===L.ConnectionType.Media&&A._stream&&this._addTracksToConnection(A._stream,I),A.originator){if(this.connection.type===L.ConnectionType.Data){var S=this.connection,M=I.createDataChannel(S.label,{ordered:!!A.reliable});S.initialize(M)}this._makeOffer()}else this.handleSDP("OFFER",A.sdp)},P.prototype._startPeerConnection=function(){B.default.log("Creating RTCPeerConnection.");var A=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(A),A},P.prototype._setupListeners=function(A){var I=this,S=this.connection.peer,D=this.connection.connectionId,M=this.connection.type,y=this.connection.provider;B.default.log("Listening for ICE candidates."),A.onicecandidate=function(v){v.candidate&&v.candidate.candidate&&(B.default.log("Received ICE candidates for "+S+":",v.candidate),y.socket.send({type:L.ServerMessageType.Candidate,payload:{candidate:v.candidate,type:M,connectionId:D},dst:S}))},A.oniceconnectionstatechange=function(){switch(A.iceConnectionState){case"failed":B.default.log("iceConnectionState is failed, closing connections to "+S),I.connection.emit(L.ConnectionEventType.Error,new Error("Negotiation of connection to "+S+" failed.")),I.connection.close();break;case"closed":B.default.log("iceConnectionState is closed, closing connections to "+S),I.connection.emit(L.ConnectionEventType.Error,new Error("Connection to "+S+" closed.")),I.connection.close();break;case"disconnected":B.default.log("iceConnectionState changed to disconnected on the connection with "+S);break;case"completed":A.onicecandidate=G.util.noop}I.connection.emit(L.ConnectionEventType.IceStateChanged,A.iceConnectionState)},B.default.log("Listening for data channel"),A.ondatachannel=function(v){B.default.log("Received data channel");var p=v.channel;y.getConnection(S,D).initialize(p)},B.default.log("Listening for remote stream"),A.ontrack=function(v){B.default.log("Received remote stream");var p=v.streams[0],b=y.getConnection(S,D);b.type===L.ConnectionType.Media&&I._addStreamToMediaConnection(p,b)}},P.prototype.cleanup=function(){B.default.log("Cleaning up PeerConnection to "+this.connection.peer);var A=this.connection.peerConnection;if(A){this.connection.peerConnection=null,A.onicecandidate=A.oniceconnectionstatechange=A.ondatachannel=A.ontrack=function(){};var S=!1;if(this.connection.type===L.ConnectionType.Data){var D=this.connection.dataChannel;D&&(S=!!D.readyState&&"closed"!==D.readyState)}("closed"!==A.signalingState||S)&&A.close()}},P.prototype._makeOffer=function(){return F(this,void 0,Promise,function(){var A,I,S,D,M,y,v;return V(this,function(p){switch(p.label){case 0:A=this.connection.peerConnection,I=this.connection.provider,p.label=1;case 1:return p.trys.push([1,7,,8]),[4,A.createOffer(this.connection.options.constraints)];case 2:S=p.sent(),B.default.log("Created offer."),this.connection.options.sdpTransform&&"function"==typeof this.connection.options.sdpTransform&&(S.sdp=this.connection.options.sdpTransform(S.sdp)||S.sdp),p.label=3;case 3:return p.trys.push([3,5,,6]),[4,A.setLocalDescription(S)];case 4:return p.sent(),B.default.log("Set localDescription:",S,"for:"+this.connection.peer),D={sdp:S,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata,browser:G.util.browser},this.connection.type===L.ConnectionType.Data&&(M=this.connection,D=O(O({},D),{label:M.label,reliable:M.reliable,serialization:M.serialization})),I.socket.send({type:L.ServerMessageType.Offer,payload:D,dst:this.connection.peer}),[3,6];case 5:return"OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"!=(y=p.sent())&&(I.emitError(L.PeerErrorType.WebRTC,y),B.default.log("Failed to setLocalDescription, ",y)),[3,6];case 6:return[3,8];case 7:return v=p.sent(),I.emitError(L.PeerErrorType.WebRTC,v),B.default.log("Failed to createOffer, ",v),[3,8];case 8:return[2]}})})},P.prototype._makeAnswer=function(){return F(this,void 0,Promise,function(){var A,I,S,D,M;return V(this,function(y){switch(y.label){case 0:A=this.connection.peerConnection,I=this.connection.provider,y.label=1;case 1:return y.trys.push([1,7,,8]),[4,A.createAnswer()];case 2:S=y.sent(),B.default.log("Created answer."),this.connection.options.sdpTransform&&"function"==typeof this.connection.options.sdpTransform&&(S.sdp=this.connection.options.sdpTransform(S.sdp)||S.sdp),y.label=3;case 3:return y.trys.push([3,5,,6]),[4,A.setLocalDescription(S)];case 4:return y.sent(),B.default.log("Set localDescription:",S,"for:"+this.connection.peer),I.socket.send({type:L.ServerMessageType.Answer,payload:{sdp:S,type:this.connection.type,connectionId:this.connection.connectionId,browser:G.util.browser},dst:this.connection.peer}),[3,6];case 5:return D=y.sent(),I.emitError(L.PeerErrorType.WebRTC,D),B.default.log("Failed to setLocalDescription, ",D),[3,6];case 6:return[3,8];case 7:return M=y.sent(),I.emitError(L.PeerErrorType.WebRTC,M),B.default.log("Failed to create answer, ",M),[3,8];case 8:return[2]}})})},P.prototype.handleSDP=function(A,I){return F(this,void 0,Promise,function(){var S,D,M,y;return V(this,function(v){switch(v.label){case 0:I=new RTCSessionDescription(I),S=this.connection.peerConnection,D=this.connection.provider,B.default.log("Setting remote description",I),M=this,v.label=1;case 1:return v.trys.push([1,5,,6]),[4,S.setRemoteDescription(I)];case 2:return v.sent(),B.default.log("Set remoteDescription:"+A+" for:"+this.connection.peer),"OFFER"!==A?[3,4]:[4,M._makeAnswer()];case 3:v.sent(),v.label=4;case 4:return[3,6];case 5:return y=v.sent(),D.emitError(L.PeerErrorType.WebRTC,y),B.default.log("Failed to setRemoteDescription, ",y),[3,6];case 6:return[2]}})})},P.prototype.handleCandidate=function(A){return F(this,void 0,Promise,function(){var I,S,D,M,y,v;return V(this,function(p){switch(p.label){case 0:B.default.log("handleCandidate:",A),I=A.candidate,S=A.sdpMLineIndex,D=A.sdpMid,M=this.connection.peerConnection,y=this.connection.provider,p.label=1;case 1:return p.trys.push([1,3,,4]),[4,M.addIceCandidate(new RTCIceCandidate({sdpMid:D,sdpMLineIndex:S,candidate:I}))];case 2:return p.sent(),B.default.log("Added ICE candidate for:"+this.connection.peer),[3,4];case 3:return v=p.sent(),y.emitError(L.PeerErrorType.WebRTC,v),B.default.log("Failed to handleCandidate, ",v),[3,4];case 4:return[2]}})})},P.prototype._addTracksToConnection=function(A,I){if(B.default.log("add tracks from stream "+A.id+" to peer connection"),!I.addTrack)return B.default.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");A.getTracks().forEach(function(S){I.addTrack(S,A)})},P.prototype._addStreamToMediaConnection=function(A,I){B.default.log("add stream "+A.id+" to media connection "+I.connectionId),I.addStream(A)},P}();X.Negotiator=_},{"./util":"BHXf","./logger":"WOs9","./enums":"ZRYf"}],tQFK:[function(se,we,X){"use strict";var U,O=this&&this.__extends||(U=function(G,B){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,_){L.__proto__=_}||function(L,_){for(var P in _)_.hasOwnProperty(P)&&(L[P]=_[P])})(G,B)},function(G,B){function L(){this.constructor=G}U(G,B),G.prototype=null===B?Object.create(B):(L.prototype=B.prototype,new L)});Object.defineProperty(X,"__esModule",{value:!0});var V=function(U){function G(B,L,_){var P=U.call(this)||this;return P.peer=B,P.provider=L,P.options=_,P._open=!1,P.metadata=_.metadata,P}return O(G,U),Object.defineProperty(G.prototype,"open",{get:function(){return this._open},enumerable:!0,configurable:!0}),G}(se("eventemitter3").EventEmitter);X.BaseConnection=V},{eventemitter3:"JJlS"}],dbHP:[function(se,we,X){"use strict";var I,O=this&&this.__extends||(I=function(S,D){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,y){M.__proto__=y}||function(M,y){for(var v in y)y.hasOwnProperty(v)&&(M[v]=y[v])})(S,D)},function(S,D){function M(){this.constructor=S}I(S,D),S.prototype=null===D?Object.create(D):(M.prototype=D.prototype,new M)}),F=this&&this.__assign||function(){return(F=Object.assign||function(I){for(var S,D=1,M=arguments.length;D<M;D++)for(var y in S=arguments[D])Object.prototype.hasOwnProperty.call(S,y)&&(I[y]=S[y]);return I}).apply(this,arguments)},V=this&&this.__values||function(I){var S="function"==typeof Symbol&&Symbol.iterator,D=S&&I[S],M=0;if(D)return D.call(I);if(I&&"number"==typeof I.length)return{next:function(){return I&&M>=I.length&&(I=void 0),{value:I&&I[M++],done:!I}}};throw new TypeError(S?"Object is not iterable.":"Symbol.iterator is not defined.")},U=this&&this.__importDefault||function(I){return I&&I.__esModule?I:{default:I}};Object.defineProperty(X,"__esModule",{value:!0});var G=se("./util"),B=U(se("./logger")),L=se("./negotiator"),_=se("./enums"),A=function(I){function S(D,M,y){var v=I.call(this,D,M,y)||this;return v._localStream=v.options._stream,v.connectionId=v.options.connectionId||S.ID_PREFIX+G.util.randomToken(),v._negotiator=new L.Negotiator(v),v._localStream&&v._negotiator.startConnection({_stream:v._localStream,originator:!0}),v}return O(S,I),Object.defineProperty(S.prototype,"type",{get:function(){return _.ConnectionType.Media},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"localStream",{get:function(){return this._localStream},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"remoteStream",{get:function(){return this._remoteStream},enumerable:!0,configurable:!0}),S.prototype.addStream=function(D){B.default.log("Receiving stream",D),this._remoteStream=D,I.prototype.emit.call(this,_.ConnectionEventType.Stream,D)},S.prototype.handleMessage=function(D){var M=D.type,y=D.payload;switch(D.type){case _.ServerMessageType.Answer:this._negotiator.handleSDP(M,y.sdp),this._open=!0;break;case _.ServerMessageType.Candidate:this._negotiator.handleCandidate(y.candidate);break;default:B.default.warn("Unrecognized message type:"+M+" from peer:"+this.peer)}},S.prototype.answer=function(D,M){var y,v;if(void 0===M&&(M={}),this._localStream)B.default.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");else{this._localStream=D,M&&M.sdpTransform&&(this.options.sdpTransform=M.sdpTransform),this._negotiator.startConnection(F(F({},this.options._payload),{_stream:D}));var p=this.provider._getMessages(this.connectionId);try{for(var b=V(p),R=b.next();!R.done;R=b.next())this.handleMessage(R.value)}catch(W){y={error:W}}finally{try{R&&!R.done&&(v=b.return)&&v.call(b)}finally{if(y)throw y.error}}this._open=!0}},S.prototype.close=function(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,I.prototype.emit.call(this,_.ConnectionEventType.Close))},S.ID_PREFIX="mc_",S}(se("./baseconnection").BaseConnection);X.MediaConnection=A},{"./util":"BHXf","./logger":"WOs9","./negotiator":"HCdX","./enums":"ZRYf","./baseconnection":"tQFK"}],GGp6:[function(se,we,X){"use strict";var B,O=this&&this.__extends||(B=function(L,_){return(B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,A){P.__proto__=A}||function(P,A){for(var I in A)A.hasOwnProperty(I)&&(P[I]=A[I])})(L,_)},function(L,_){function P(){this.constructor=L}B(L,_),L.prototype=null===_?Object.create(_):(P.prototype=_.prototype,new P)}),F=this&&this.__importDefault||function(B){return B&&B.__esModule?B:{default:B}};Object.defineProperty(X,"__esModule",{value:!0});var V=se("eventemitter3"),U=F(se("./logger")),G=function(B){function L(){var _=B.call(this)||this;return _.fileReader=new FileReader,_._queue=[],_._processing=!1,_.fileReader.onload=function(P){_._processing=!1,P.target&&_.emit("done",P.target.result),_.doNextTask()},_.fileReader.onerror=function(P){U.default.error("EncodingQueue error:",P),_._processing=!1,_.destroy(),_.emit("error",P)},_}return O(L,B),Object.defineProperty(L.prototype,"queue",{get:function(){return this._queue},enumerable:!0,configurable:!0}),Object.defineProperty(L.prototype,"size",{get:function(){return this.queue.length},enumerable:!0,configurable:!0}),Object.defineProperty(L.prototype,"processing",{get:function(){return this._processing},enumerable:!0,configurable:!0}),L.prototype.enque=function(_){this.queue.push(_),this.processing||this.doNextTask()},L.prototype.destroy=function(){this.fileReader.abort(),this._queue=[]},L.prototype.doNextTask=function(){0!==this.size&&(this.processing||(this._processing=!0,this.fileReader.readAsArrayBuffer(this.queue.shift())))},L}(V.EventEmitter);X.EncodingQueue=G},{eventemitter3:"JJlS","./logger":"WOs9"}],GBTQ:[function(se,we,X){"use strict";var I,O=this&&this.__extends||(I=function(S,D){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,y){M.__proto__=y}||function(M,y){for(var v in y)y.hasOwnProperty(v)&&(M[v]=y[v])})(S,D)},function(S,D){function M(){this.constructor=S}I(S,D),S.prototype=null===D?Object.create(D):(M.prototype=D.prototype,new M)}),F=this&&this.__values||function(I){var S="function"==typeof Symbol&&Symbol.iterator,D=S&&I[S],M=0;if(D)return D.call(I);if(I&&"number"==typeof I.length)return{next:function(){return I&&M>=I.length&&(I=void 0),{value:I&&I[M++],done:!I}}};throw new TypeError(S?"Object is not iterable.":"Symbol.iterator is not defined.")},V=this&&this.__importDefault||function(I){return I&&I.__esModule?I:{default:I}};Object.defineProperty(X,"__esModule",{value:!0});var U=se("./util"),G=V(se("./logger")),B=se("./negotiator"),L=se("./enums"),_=se("./baseconnection"),P=se("./encodingQueue"),A=function(I){function S(D,M,y){var v=I.call(this,D,M,y)||this;return v.stringify=JSON.stringify,v.parse=JSON.parse,v._buffer=[],v._bufferSize=0,v._buffering=!1,v._chunkedData={},v._encodingQueue=new P.EncodingQueue,v.connectionId=v.options.connectionId||S.ID_PREFIX+U.util.randomToken(),v.label=v.options.label||v.connectionId,v.serialization=v.options.serialization||L.SerializationType.Binary,v.reliable=!!v.options.reliable,v._encodingQueue.on("done",function(p){v._bufferedSend(p)}),v._encodingQueue.on("error",function(){G.default.error("DC#"+v.connectionId+": Error occured in encoding from blob to arraybuffer, close DC"),v.close()}),v._negotiator=new B.Negotiator(v),v._negotiator.startConnection(v.options._payload||{originator:!0}),v}return O(S,I),Object.defineProperty(S.prototype,"type",{get:function(){return L.ConnectionType.Data},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"dataChannel",{get:function(){return this._dc},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"bufferSize",{get:function(){return this._bufferSize},enumerable:!0,configurable:!0}),S.prototype.initialize=function(D){this._dc=D,this._configureDataChannel()},S.prototype._configureDataChannel=function(){var D=this;U.util.supports.binaryBlob&&!U.util.supports.reliable||(this.dataChannel.binaryType="arraybuffer"),this.dataChannel.onopen=function(){G.default.log("DC#"+D.connectionId+" dc connection success"),D._open=!0,D.emit(L.ConnectionEventType.Open)},this.dataChannel.onmessage=function(M){G.default.log("DC#"+D.connectionId+" dc onmessage:",M.data),D._handleDataMessage(M)},this.dataChannel.onclose=function(){G.default.log("DC#"+D.connectionId+" dc closed for:",D.peer),D.close()}},S.prototype._handleDataMessage=function(D){var M=this,y=D.data,v=y.constructor,p=y;if(this.serialization===L.SerializationType.Binary||this.serialization===L.SerializationType.BinaryUTF8){if(v===Blob)return void U.util.blobToArrayBuffer(y,function(R){var q=U.util.unpack(R);M.emit(L.ConnectionEventType.Data,q)});if(v===ArrayBuffer)p=U.util.unpack(y);else if(v===String){var b=U.util.binaryStringToArrayBuffer(y);p=U.util.unpack(b)}}else this.serialization===L.SerializationType.JSON&&(p=this.parse(y));p.__peerData?this._handleChunk(p):I.prototype.emit.call(this,L.ConnectionEventType.Data,p)},S.prototype._handleChunk=function(D){var M=D.__peerData,y=this._chunkedData[M]||{data:[],count:0,total:D.total};if(y.data[D.n]=D.data,y.count++,this._chunkedData[M]=y,y.total===y.count){delete this._chunkedData[M];var v=new Blob(y.data);this._handleDataMessage({data:v})}},S.prototype.close=function(){this._buffer=[],this._bufferSize=0,this._chunkedData={},this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this._dc=null),this._encodingQueue&&(this._encodingQueue.destroy(),this._encodingQueue.removeAllListeners(),this._encodingQueue=null),this.open&&(this._open=!1,I.prototype.emit.call(this,L.ConnectionEventType.Close))},S.prototype.send=function(D,M){if(this.open)if(this.serialization===L.SerializationType.JSON)this._bufferedSend(this.stringify(D));else if(this.serialization===L.SerializationType.Binary||this.serialization===L.SerializationType.BinaryUTF8){var y=U.util.pack(D);if(!M&&y.size>U.util.chunkedMTU)return void this._sendChunks(y);U.util.supports.binaryBlob?this._bufferedSend(y):this._encodingQueue.enque(y)}else this._bufferedSend(D);else I.prototype.emit.call(this,L.ConnectionEventType.Error,new Error("Connection is not open. You should listen for the `open` event before sending messages."))},S.prototype._bufferedSend=function(D){!this._buffering&&this._trySend(D)||(this._buffer.push(D),this._bufferSize=this._buffer.length)},S.prototype._trySend=function(D){var M=this;if(!this.open)return!1;if(this.dataChannel.bufferedAmount>S.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(function(){M._buffering=!1,M._tryBuffer()},50),!1;try{this.dataChannel.send(D)}catch(y){return G.default.error("DC#:"+this.connectionId+" Error when sending:",y),this._buffering=!0,this.close(),!1}return!0},S.prototype._tryBuffer=function(){this.open&&0!==this._buffer.length&&this._trySend(this._buffer[0])&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())},S.prototype._sendChunks=function(D){var M,y,v=U.util.chunk(D);G.default.log("DC#"+this.connectionId+" Try to send "+v.length+" chunks...");try{for(var p=F(v),b=p.next();!b.done;b=p.next())this.send(b.value,!0)}catch(q){M={error:q}}finally{try{b&&!b.done&&(y=p.return)&&y.call(p)}finally{if(M)throw M.error}}},S.prototype.handleMessage=function(D){var M=D.payload;switch(D.type){case L.ServerMessageType.Answer:this._negotiator.handleSDP(D.type,M.sdp);break;case L.ServerMessageType.Candidate:this._negotiator.handleCandidate(M.candidate);break;default:G.default.warn("Unrecognized message type:",D.type,"from peer:",this.peer)}},S.ID_PREFIX="dc_",S.MAX_BUFFERED_AMOUNT=8388608,S}(_.BaseConnection);X.DataConnection=A},{"./util":"BHXf","./logger":"WOs9","./negotiator":"HCdX","./enums":"ZRYf","./baseconnection":"tQFK","./encodingQueue":"GGp6"}],in7L:[function(se,we,X){"use strict";var O=this&&this.__awaiter||function(L,_,P,A){return new(P||(P=Promise))(function(I,S){function D(v){try{y(A.next(v))}catch(p){S(p)}}function M(v){try{y(A.throw(v))}catch(p){S(p)}}function y(v){var p;v.done?I(v.value):(p=v.value,p instanceof P?p:new P(function(b){b(p)})).then(D,M)}y((A=A.apply(L,_||[])).next())})},F=this&&this.__generator||function(L,_){var P,A,I,S,D={label:0,sent:function(){if(1&I[0])throw I[1];return I[1]},trys:[],ops:[]};return S={next:M(0),throw:M(1),return:M(2)},"function"==typeof Symbol&&(S[Symbol.iterator]=function(){return this}),S;function M(y){return function(v){return function(p){if(P)throw new TypeError("Generator is already executing.");for(;D;)try{if(P=1,A&&(I=2&p[0]?A.return:p[0]?A.throw||((I=A.return)&&I.call(A),0):A.next)&&!(I=I.call(A,p[1])).done)return I;switch(A=0,I&&(p=[2&p[0],I.value]),p[0]){case 0:case 1:I=p;break;case 4:return D.label++,{value:p[1],done:!1};case 5:D.label++,A=p[1],p=[0];continue;case 7:p=D.ops.pop(),D.trys.pop();continue;default:if(!(I=(I=D.trys).length>0&&I[I.length-1])&&(6===p[0]||2===p[0])){D=0;continue}if(3===p[0]&&(!I||p[1]>I[0]&&p[1]<I[3])){D.label=p[1];break}if(6===p[0]&&D.label<I[1]){D.label=I[1],I=p;break}if(I&&D.label<I[2]){D.label=I[2],D.ops.push(p);break}I[2]&&D.ops.pop(),D.trys.pop();continue}p=_.call(L,D)}catch(b){p=[6,b],A=0}finally{P=I=0}if(5&p[0])throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}([y,v])}}},V=this&&this.__importDefault||function(L){return L&&L.__esModule?L:{default:L}};Object.defineProperty(X,"__esModule",{value:!0});var U=se("./util"),G=V(se("./logger")),B=function(){function L(_){this._options=_}return L.prototype._buildUrl=function(_){return(this._options.secure?"https://":"http://")+this._options.host+":"+this._options.port+this._options.path+this._options.key+"/"+_+"?ts="+(new Date).getTime()+Math.random()},L.prototype.retrieveId=function(){return O(this,void 0,Promise,function(){var _,P,A,I;return F(this,function(S){switch(S.label){case 0:_=this._buildUrl("id"),S.label=1;case 1:return S.trys.push([1,3,,4]),[4,fetch(_)];case 2:if(200!==(P=S.sent()).status)throw new Error("Error. Status:"+P.status);return[2,P.text()];case 3:throw A=S.sent(),G.default.error("Error retrieving ID",A),I="","/"===this._options.path&&this._options.host!==U.util.CLOUD_HOST&&(I=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+I);case 4:return[2]}})})},L.prototype.listAllPeers=function(){return O(this,void 0,Promise,function(){var _,P,I;return F(this,function(S){switch(S.label){case 0:_=this._buildUrl("peers"),S.label=1;case 1:return S.trys.push([1,3,,4]),[4,fetch(_)];case 2:if(200!==(P=S.sent()).status)throw 401===P.status?new Error("It doesn't look like you have permission to list peers IDs. "+(this._options.host===U.util.CLOUD_HOST?"It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":"You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.")):new Error("Error. Status:"+P.status);return[2,P.json()];case 3:throw I=S.sent(),G.default.error("Error retrieving list peers",I),new Error("Could not get list peers from the server."+I);case 4:return[2]}})})},L}();X.API=B},{"./util":"BHXf","./logger":"WOs9"}],Hxpd:[function(se,we,X){"use strict";var v,O=this&&this.__extends||(v=function(p,b){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,q){R.__proto__=q}||function(R,q){for(var W in q)q.hasOwnProperty(W)&&(R[W]=q[W])})(p,b)},function(p,b){function R(){this.constructor=p}v(p,b),p.prototype=null===b?Object.create(b):(R.prototype=b.prototype,new R)}),F=this&&this.__assign||function(){return(F=Object.assign||function(v){for(var p,b=1,R=arguments.length;b<R;b++)for(var q in p=arguments[b])Object.prototype.hasOwnProperty.call(p,q)&&(v[q]=p[q]);return v}).apply(this,arguments)},V=this&&this.__values||function(v){var p="function"==typeof Symbol&&Symbol.iterator,b=p&&v[p],R=0;if(b)return b.call(v);if(v&&"number"==typeof v.length)return{next:function(){return v&&R>=v.length&&(v=void 0),{value:v&&v[R++],done:!v}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")},U=this&&this.__read||function(v,p){var b="function"==typeof Symbol&&v[Symbol.iterator];if(!b)return v;var R,q,W=b.call(v),Q=[];try{for(;(void 0===p||p-- >0)&&!(R=W.next()).done;)Q.push(R.value)}catch(J){q={error:J}}finally{try{R&&!R.done&&(b=W.return)&&b.call(W)}finally{if(q)throw q.error}}return Q},G=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(X,"__esModule",{value:!0});var B=se("eventemitter3"),L=se("./util"),_=G(se("./logger")),P=se("./socket"),A=se("./mediaconnection"),I=se("./dataconnection"),S=se("./enums"),D=se("./api"),y=function(v){function p(b,R){var q,W=v.call(this)||this;return W._id=null,W._lastServerId=null,W._destroyed=!1,W._disconnected=!1,W._open=!1,W._connections=new Map,W._lostMessages=new Map,b&&b.constructor==Object?R=b:b&&(q=b.toString()),R=F({debug:0,host:L.util.CLOUD_HOST,port:L.util.CLOUD_PORT,path:"/",key:p.DEFAULT_KEY,token:L.util.randomToken(),config:L.util.defaultConfig},R),W._options=R,"/"===W._options.host&&(W._options.host=window.location.hostname),W._options.path&&("/"!==W._options.path[0]&&(W._options.path="/"+W._options.path),"/"!==W._options.path[W._options.path.length-1]&&(W._options.path+="/")),void 0===W._options.secure&&W._options.host!==L.util.CLOUD_HOST?W._options.secure=L.util.isSecure():W._options.host==L.util.CLOUD_HOST&&(W._options.secure=!0),W._options.logFunction&&_.default.setLogFunction(W._options.logFunction),_.default.logLevel=W._options.debug||0,W._api=new D.API(R),W._socket=W._createServerConnection(),L.util.supports.audioVideo||L.util.supports.data?q&&!L.util.validateId(q)?(W._delayedAbort(S.PeerErrorType.InvalidID,'ID "'+q+'" is invalid'),W):(q?W._initialize(q):W._api.retrieveId().then(function(Q){return W._initialize(Q)}).catch(function(Q){return W._abort(S.PeerErrorType.ServerError,Q)}),W):(W._delayedAbort(S.PeerErrorType.BrowserIncompatible,"The current browser does not support WebRTC"),W)}return O(p,v),Object.defineProperty(p.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"open",{get:function(){return this._open},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"socket",{get:function(){return this._socket},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"connections",{get:function(){var b,R,q=Object.create(null);try{for(var W=V(this._connections),Q=W.next();!Q.done;Q=W.next()){var J=U(Q.value,2);q[J[0]]=J[1]}}catch(oe){b={error:oe}}finally{try{Q&&!Q.done&&(R=W.return)&&R.call(W)}finally{if(b)throw b.error}}return q},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"disconnected",{get:function(){return this._disconnected},enumerable:!0,configurable:!0}),p.prototype._createServerConnection=function(){var b=this,R=new P.Socket(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return R.on(S.SocketEventType.Message,function(q){b._handleMessage(q)}),R.on(S.SocketEventType.Error,function(q){b._abort(S.PeerErrorType.SocketError,q)}),R.on(S.SocketEventType.Disconnected,function(){b.disconnected||(b.emitError(S.PeerErrorType.Network,"Lost connection to server."),b.disconnect())}),R.on(S.SocketEventType.Close,function(){b.disconnected||b._abort(S.PeerErrorType.SocketClosed,"Underlying socket is already closed.")}),R},p.prototype._initialize=function(b){this._id=b,this.socket.start(b,this._options.token)},p.prototype._handleMessage=function(b){var R,q,W=b.type,Q=b.payload,J=b.src;switch(W){case S.ServerMessageType.Open:this._lastServerId=this.id,this._open=!0,this.emit(S.PeerEventType.Open,this.id);break;case S.ServerMessageType.Error:this._abort(S.PeerErrorType.ServerError,Q.msg);break;case S.ServerMessageType.IdTaken:this._abort(S.PeerErrorType.UnavailableID,'ID "'+this.id+'" is taken');break;case S.ServerMessageType.InvalidKey:this._abort(S.PeerErrorType.InvalidKey,'API KEY "'+this._options.key+'" is invalid');break;case S.ServerMessageType.Leave:_.default.log("Received leave message from "+J),this._cleanupPeer(J),this._connections.delete(J);break;case S.ServerMessageType.Expire:this.emitError(S.PeerErrorType.PeerUnavailable,"Could not connect to peer "+J);break;case S.ServerMessageType.Offer:var ee=Q.connectionId;if((De=this.getConnection(J,ee))&&(De.close(),_.default.warn("Offer received for existing Connection ID:"+ee)),Q.type===S.ConnectionType.Media)De=new A.MediaConnection(J,this,{connectionId:ee,_payload:Q,metadata:Q.metadata}),this._addConnection(J,De),this.emit(S.PeerEventType.Call,De);else{if(Q.type!==S.ConnectionType.Data)return void _.default.warn("Received malformed connection type:"+Q.type);De=new I.DataConnection(J,this,{connectionId:ee,_payload:Q,metadata:Q.metadata,label:Q.label,serialization:Q.serialization,reliable:Q.reliable}),this._addConnection(J,De),this.emit(S.PeerEventType.Connection,De)}var z=this._getMessages(ee);try{for(var oe=V(z),me=oe.next();!me.done;me=oe.next())De.handleMessage(me.value)}catch(et){R={error:et}}finally{try{me&&!me.done&&(q=oe.return)&&q.call(oe)}finally{if(R)throw R.error}}break;default:if(!Q)return void _.default.warn("You received a malformed message from "+J+" of type "+W);var De;(De=this.getConnection(J,ee=Q.connectionId))&&De.peerConnection?De.handleMessage(b):ee?this._storeMessage(ee,b):_.default.warn("You received an unrecognized message:",b)}},p.prototype._storeMessage=function(b,R){this._lostMessages.has(b)||this._lostMessages.set(b,[]),this._lostMessages.get(b).push(R)},p.prototype._getMessages=function(b){var R=this._lostMessages.get(b);return R?(this._lostMessages.delete(b),R):[]},p.prototype.connect=function(b,R){if(void 0===R&&(R={}),this.disconnected)return _.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),void this.emitError(S.PeerErrorType.Disconnected,"Cannot connect to new Peer after disconnecting from server.");var q=new I.DataConnection(b,this,R);return this._addConnection(b,q),q},p.prototype.call=function(b,R,q){if(void 0===q&&(q={}),this.disconnected)return _.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),void this.emitError(S.PeerErrorType.Disconnected,"Cannot connect to new Peer after disconnecting from server.");if(R){q._stream=R;var W=new A.MediaConnection(b,this,q);return this._addConnection(b,W),W}_.default.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.")},p.prototype._addConnection=function(b,R){_.default.log("add connection "+R.type+":"+R.connectionId+" to peerId:"+b),this._connections.has(b)||this._connections.set(b,[]),this._connections.get(b).push(R)},p.prototype._removeConnection=function(b){var R=this._connections.get(b.peer);if(R){var q=R.indexOf(b);-1!==q&&R.splice(q,1)}this._lostMessages.delete(b.connectionId)},p.prototype.getConnection=function(b,R){var q,W,Q=this._connections.get(b);if(!Q)return null;try{for(var J=V(Q),ee=J.next();!ee.done;ee=J.next()){var z=ee.value;if(z.connectionId===R)return z}}catch(oe){q={error:oe}}finally{try{ee&&!ee.done&&(W=J.return)&&W.call(J)}finally{if(q)throw q.error}}return null},p.prototype._delayedAbort=function(b,R){var q=this;setTimeout(function(){q._abort(b,R)},0)},p.prototype._abort=function(b,R){_.default.error("Aborting!"),this.emitError(b,R),this._lastServerId?this.disconnect():this.destroy()},p.prototype.emitError=function(b,R){var q;_.default.error("Error:",R),(q="string"==typeof R?new Error(R):R).type=b,this.emit(S.PeerEventType.Error,q)},p.prototype.destroy=function(){this.destroyed||(_.default.log("Destroy peer with ID:"+this.id),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit(S.PeerEventType.Close))},p.prototype._cleanup=function(){var b,R;try{for(var q=V(this._connections.keys()),W=q.next();!W.done;W=q.next()){var Q=W.value;this._cleanupPeer(Q),this._connections.delete(Q)}}catch(J){b={error:J}}finally{try{W&&!W.done&&(R=q.return)&&R.call(q)}finally{if(b)throw b.error}}this.socket.removeAllListeners()},p.prototype._cleanupPeer=function(b){var R,q,W=this._connections.get(b);if(W)try{for(var Q=V(W),J=Q.next();!J.done;J=Q.next())J.value.close()}catch(ee){R={error:ee}}finally{try{J&&!J.done&&(q=Q.return)&&q.call(Q)}finally{if(R)throw R.error}}},p.prototype.disconnect=function(){if(!this.disconnected){var b=this.id;_.default.log("Disconnect peer with ID:"+b),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=b,this._id=null,this.emit(S.PeerEventType.Disconnected,b)}},p.prototype.reconnect=function(){if(this.disconnected&&!this.destroyed)_.default.log("Attempting reconnection to server with ID "+this._lastServerId),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(this.disconnected||this.open)throw new Error("Peer "+this.id+" cannot reconnect because it is not disconnected from the server!");_.default.error("In a hurry? We're still trying to make the initial connection!")}},p.prototype.listAllPeers=function(b){var R=this;void 0===b&&(b=function(q){}),this._api.listAllPeers().then(function(q){return b(q)}).catch(function(q){return R._abort(S.PeerErrorType.ServerError,q)})},p.DEFAULT_KEY="peerjs",p}(B.EventEmitter);X.Peer=y},{eventemitter3:"JJlS","./util":"BHXf","./logger":"WOs9","./socket":"wJlv","./mediaconnection":"dbHP","./dataconnection":"GBTQ","./enums":"ZRYf","./api":"in7L"}],iTK6:[function(se,we,X){"use strict";Object.defineProperty(X,"__esModule",{value:!0});var O=se("./util"),F=se("./peer");X.peerjs={Peer:F.Peer,util:O.util},X.default=F.Peer,window.peerjs=X.peerjs,window.Peer=F.Peer},{"./util":"BHXf","./peer":"Hxpd"}]},{},["iTK6"])},996:(mn,gt,Fe)=>{"use strict";function se(t){return"function"==typeof t}let we=!1;const X={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else we&&console.log("RxJS: Back to a better error behavior. Thank you. <3");we=t},get useDeprecatedSynchronousErrorHandling(){return we}};function O(t){setTimeout(()=>{throw t},0)}const F={closed:!0,next(t){},error(t){if(X.useDeprecatedSynchronousErrorHandling)throw t;O(t)},complete(){}},V=Array.isArray||(t=>t&&"number"==typeof t.length);function U(t){return null!==t&&"object"==typeof t}const B=(()=>{function t(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((n,r)=>`${r+1}) ${n.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return t.prototype=Object.create(Error.prototype),t})();class L{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:r,_unsubscribe:i,_subscriptions:o}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof L)n.remove(this);else if(null!==n)for(let s=0;s<n.length;++s)n[s].remove(this);if(se(i)){r&&(this._unsubscribe=void 0);try{i.call(this)}catch(s){e=s instanceof B?_(s.errors):[s]}}if(V(o)){let s=-1,a=o.length;for(;++s<a;){const u=o[s];if(U(u))try{u.unsubscribe()}catch(h){e=e||[],h instanceof B?e=e.concat(_(h.errors)):e.push(h)}}}if(e)throw new B(e)}add(e){let n=e;if(!e)return L.EMPTY;switch(typeof e){case"function":n=new L(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof L)){const o=n;n=new L,n._subscriptions=[o]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof L){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(e){const n=this._subscriptions;if(n){const r=n.indexOf(e);-1!==r&&n.splice(r,1)}}}var t;function _(t){return t.reduce((e,n)=>e.concat(n instanceof B?n.errors:n),[])}L.EMPTY=((t=new L).closed=!0,t);const P="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class I extends L{constructor(e,n,r){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=F;break;case 1:if(!e){this.destination=F;break}if("object"==typeof e){e instanceof I?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new S(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new S(this,e,n,r)}}[P](){return this}static create(e,n,r){const i=new I(e,n,r);return i.syncErrorThrowable=!1,i}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class S extends I{constructor(e,n,r,i){super(),this._parentSubscriber=e;let o,s=this;se(n)?o=n:n&&(o=n.next,r=n.error,i=n.complete,n!==F&&(s=Object.create(n),se(s.unsubscribe)&&this.add(s.unsubscribe.bind(s)),s.unsubscribe=this.unsubscribe.bind(this))),this._context=s,this._next=o,this._error=r,this._complete=i}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:n}=this;X.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable?this.__tryOrSetError(n,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:n}=this,{useDeprecatedSynchronousErrorHandling:r}=X;if(this._error)r&&n.syncErrorThrowable?(this.__tryOrSetError(n,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(n.syncErrorThrowable)r?(n.syncErrorValue=e,n.syncErrorThrown=!0):O(e),this.unsubscribe();else{if(this.unsubscribe(),r)throw e;O(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const n=()=>this._complete.call(this._context);X.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,n){try{e.call(this._context,n)}catch(r){if(this.unsubscribe(),X.useDeprecatedSynchronousErrorHandling)throw r;O(r)}}__tryOrSetError(e,n,r){if(!X.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,r)}catch(i){return X.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=i,e.syncErrorThrown=!0,!0):(O(i),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const y="function"==typeof Symbol&&Symbol.observable||"@@observable";function v(t){return t}let R=(()=>{class t{constructor(n){this._isScalar=!1,n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const{operator:o}=this,s=function(t,e,n){if(t){if(t instanceof I)return t;if(t[P])return t[P]()}return t||e||n?new I(t,e,n):new I(F)}(n,r,i);if(s.add(o?o.call(s,this.source):this.source||X.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),X.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){X.useDeprecatedSynchronousErrorHandling&&(n.syncErrorThrown=!0,n.syncErrorValue=r),function(t){for(;t;){const{closed:e,destination:n,isStopped:r}=t;if(e||r)return!1;t=n&&n instanceof I?n:null}return!0}(n)?n.error(r):console.warn(r)}}forEach(n,r){return new(r=q(r))((i,o)=>{let s;s=this.subscribe(a=>{try{n(a)}catch(u){o(u),s&&s.unsubscribe()}},o,i)})}_subscribe(n){const{source:r}=this;return r&&r.subscribe(n)}[y](){return this}pipe(...n){return 0===n.length?this:function(t){return 0===t.length?v:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}(n)(this)}toPromise(n){return new(n=q(n))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function q(t){if(t||(t=X.Promise||Promise),!t)throw new Error("no Promise impl found");return t}const Q=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})();class J extends L{constructor(e,n){super(),this.subject=e,this.subscriber=n,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,n=e.observers;if(this.subject=null,!n||0===n.length||e.isStopped||e.closed)return;const r=n.indexOf(this.subscriber);-1!==r&&n.splice(r,1)}}class ee extends I{constructor(e){super(e),this.destination=e}}let z=(()=>{class t extends R{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[P](){return new ee(this)}lift(n){const r=new oe(this,this);return r.operator=n,r}next(n){if(this.closed)throw new Q;if(!this.isStopped){const{observers:r}=this,i=r.length,o=r.slice();for(let s=0;s<i;s++)o[s].next(n)}}error(n){if(this.closed)throw new Q;this.hasError=!0,this.thrownError=n,this.isStopped=!0;const{observers:r}=this,i=r.length,o=r.slice();for(let s=0;s<i;s++)o[s].error(n);this.observers.length=0}complete(){if(this.closed)throw new Q;this.isStopped=!0;const{observers:n}=this,r=n.length,i=n.slice();for(let o=0;o<r;o++)i[o].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(n){if(this.closed)throw new Q;return super._trySubscribe(n)}_subscribe(n){if(this.closed)throw new Q;return this.hasError?(n.error(this.thrownError),L.EMPTY):this.isStopped?(n.complete(),L.EMPTY):(this.observers.push(n),new J(this,n))}asObservable(){const n=new R;return n.source=this,n}}return t.create=(e,n)=>new oe(e,n),t})();class oe extends z{constructor(e,n){super(),this.destination=e,this.source=n}next(e){const{destination:n}=this;n&&n.next&&n.next(e)}error(e){const{destination:n}=this;n&&n.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:n}=this;return n?this.source.subscribe(e):L.EMPTY}}function me(t){return t&&"function"==typeof t.schedule}function pe(t,e){return function(r){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return r.lift(new De(t,e))}}class De{constructor(e,n){this.project=e,this.thisArg=n}call(e,n){return n.subscribe(new et(e,this.project,this.thisArg))}}class et extends I{constructor(e,n,r){super(e),this.project=n,this.count=0,this.thisArg=r||this}_next(e){let n;try{n=this.project.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}this.destination.next(n)}}const mt=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()},Ar="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",pr=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function xi(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}const gr=t=>{if(t&&"function"==typeof t[y])return(t=>e=>{const n=t[y]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)})(t);if(pr(t))return mt(t);if(xi(t))return(t=>e=>(t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,O),e))(t);if(t&&"function"==typeof t[Ar])return(t=>e=>{const n=t[Ar]();for(;;){let r;try{r=n.next()}catch(i){return e.error(i),e}if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof n.return&&e.add(()=>{n.return&&n.return()}),e})(t);{const n=`You provided ${U(t)?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(n)}};function Xn(t,e){return new R(n=>{const r=new L;let i=0;return r.add(e.schedule(function(){i!==t.length?(n.next(t[i++]),n.closed||r.add(this.schedule())):n.complete()})),r})}function vt(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[y]}(t))return function(t,e){return new R(n=>{const r=new L;return r.add(e.schedule(()=>{const i=t[y]();r.add(i.subscribe({next(o){r.add(e.schedule(()=>n.next(o)))},error(o){r.add(e.schedule(()=>n.error(o)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(xi(t))return function(t,e){return new R(n=>{const r=new L;return r.add(e.schedule(()=>t.then(i=>{r.add(e.schedule(()=>{n.next(i),r.add(e.schedule(()=>n.complete()))}))},i=>{r.add(e.schedule(()=>n.error(i)))}))),r})}(t,e);if(pr(t))return Xn(t,e);if(function(t){return t&&"function"==typeof t[Ar]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new R(n=>{const r=new L;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[Ar](),r.add(e.schedule(function(){if(n.closed)return;let o,s;try{const a=i.next();o=a.value,s=a.done}catch(a){return void n.error(a)}s?n.complete():(n.next(o),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof R?t:new R(gr(t))}class ii extends I{constructor(e){super(),this.parent=e}_next(e){this.parent.notifyNext(e)}_error(e){this.parent.notifyError(e),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class oi extends I{notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.destination.complete()}}function Ri(t,e){if(e.closed)return;if(t instanceof R)return t.subscribe(e);let n;try{n=gr(t)(e)}catch(r){e.error(r)}return n}function Bt(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?r=>r.pipe(Bt((i,o)=>vt(t(i,o)).pipe(pe((s,a)=>e(i,s,o,a))),n)):("number"==typeof e&&(n=e),r=>r.lift(new Or(t,n)))}class Or{constructor(e,n=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=n}call(e,n){return n.subscribe(new sc(e,this.project,this.concurrent))}}class sc extends oi{constructor(e,n,r=Number.POSITIVE_INFINITY){super(e),this.project=n,this.concurrent=r,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let n;const r=this.index++;try{n=this.project(e,r)}catch(i){return void this.destination.error(i)}this.active++,this._innerSub(n)}_innerSub(e){const n=new ii(this),r=this.destination;r.add(n);const i=Ri(e,n);i!==n&&r.add(i)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyComplete(){const e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function Bo(t=Number.POSITIVE_INFINITY){return Bt(v,t)}function ho(t,e){return e?Xn(t,e):new R(mt(t))}function Uo(){return function(e){return e.lift(new Gl(e))}}class Gl{constructor(e){this.connectable=e}call(e,n){const{connectable:r}=this;r._refCount++;const i=new ac(e,r),o=n.subscribe(i);return i.closed||(i.connection=r.connect()),o}}class ac extends I{constructor(e,n){super(e),this.connectable=n}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const n=e._refCount;if(n<=0)return void(this.connection=null);if(e._refCount=n-1,n>1)return void(this.connection=null);const{connection:r}=this,i=e._connection;this.connection=null,i&&(!r||i===r)&&i.unsubscribe()}}class As extends R{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new L,e.add(this.source.subscribe(new ql(this.getSubject(),this))),e.closed&&(this._connection=null,e=L.EMPTY)),e}refCount(){return Uo()(this)}}const Wl=(()=>{const t=As.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class ql extends ee{constructor(e,n){super(e),this.connectable=n}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const n=e._connection;e._refCount=0,e._subject=null,e._connection=null,n&&n.unsubscribe()}}}function Of(){return new z}function ot(t){for(let e in t)if(t[e]===ot)return e;throw Error("Could not find renamed property on target object.")}function Ns(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Ae(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Ae).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function uc(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const Fs=ot({__forward_ref__:ot});function yt(t){return t.__forward_ref__=yt,t.toString=function(){return Ae(this())},t}function be(t){return mr(t)?t():t}function mr(t){return"function"==typeof t&&t.hasOwnProperty(Fs)&&t.__forward_ref__===yt}class si extends Error{constructor(e,n){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(e,n)),this.code=e}}function fe(t){return"string"==typeof t?t:null==t?"":String(t)}function Yt(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():fe(t)}function Oi(t,e){const n=e?` in ${e}`:"";throw new si("201",`No provider for ${Yt(t)} found${n}`)}function cn(t,e){null==t&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}(e,t,null,"!=")}function Se(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Lt(t){return{providers:t.providers||[],imports:t.imports||[]}}function kr(t){return Xl(t,ai)||Xl(t,eu)}function Xl(t,e){return t.hasOwnProperty(e)?t[e]:null}function Ls(t){return t&&(t.hasOwnProperty(zo)||t.hasOwnProperty(ki))?t[zo]:null}const ai=ot({\u0275prov:ot}),zo=ot({\u0275inj:ot}),eu=ot({ngInjectableDef:ot}),ki=ot({ngInjectorDef:ot});var Te=(()=>((Te=Te||{})[Te.Default=0]="Default",Te[Te.Host=1]="Host",Te[Te.Self=2]="Self",Te[Te.SkipSelf=4]="SkipSelf",Te[Te.Optional=8]="Optional",Te))();let Vs;function ci(t){const e=Vs;return Vs=t,e}function li(t,e,n){const r=kr(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&Te.Optional?null:void 0!==e?e:void Oi(Ae(t),"Injector")}function er(t){return{toString:t}.toString()}var On=(()=>((On=On||{})[On.OnPush=0]="OnPush",On[On.Default=1]="Default",On))(),Ut=(()=>((Ut=Ut||{})[Ut.Emulated=0]="Emulated",Ut[Ut.None=2]="None",Ut[Ut.ShadowDom=3]="ShadowDom",Ut))();const Go="undefined"!=typeof globalThis&&globalThis,Wo="undefined"!=typeof window&&window,nu="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,st=Go||"undefined"!=typeof global&&global||Wo||nu,ui={},Pe=[],qo=ot({\u0275cmp:ot}),Ni=ot({\u0275dir:ot}),Fi=ot({\u0275pipe:ot}),Yo=ot({\u0275mod:ot}),js=ot({\u0275loc:ot}),Mt=ot({\u0275fac:ot}),Qo=ot({__NG_ELEMENT_ID__:ot});let Tt=0;function tr(t){return er(()=>{const n={},r={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:n,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===On.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||Pe,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||Ut.Emulated,id:"c",styles:t.styles||Pe,_:null,setInput:null,schemas:t.schemas||null,tView:null},i=t.directives,o=t.features,s=t.pipes;return r.id+=Tt++,r.inputs=ou(t.inputs,n),r.outputs=ou(t.outputs),o&&o.forEach(a=>a(r)),r.directiveDefs=i?()=>("function"==typeof i?i():i).map(iu):null,r.pipeDefs=s?()=>("function"==typeof s?s():s).map(di):null,r})}function iu(t){return Vt(t)||function(t){return t[Ni]||null}(t)}function di(t){return function(t){return t[Fi]||null}(t)}const pc={};function Cn(t){return er(()=>{const e={type:t.type,bootstrap:t.bootstrap||Pe,declarations:t.declarations||Pe,imports:t.imports||Pe,exports:t.exports||Pe,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(pc[t.id]=t.type),e})}function ou(t,e){if(null==t)return ui;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const Me=tr;function Vt(t){return t[qo]||null}function kn(t,e){const n=t[Yo]||null;if(!n&&!0===e)throw new Error(`Type ${Ae(t)} does not have '\u0275mod' property.`);return n}function Ln(t){return Array.isArray(t)&&"object"==typeof t[1]}function Wn(t){return Array.isArray(t)&&!0===t[1]}function Hs(t){return 0!=(8&t.flags)}function Xo(t){return 2==(2&t.flags)}function $s(t){return 1==(1&t.flags)}function ir(t){return null!==t.template}function au(t){return 0!=(512&t[2])}function Ui(t,e){return t.hasOwnProperty(Mt)?t[Mt]:null}class du{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function $t(){return es}function es(t){return t.type.prototype.ngOnChanges&&(t.setInput=fu),Ws}function Ws(){const t=vo(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===ui)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function fu(t,e,n,r){const i=vo(t)||function(t,e){return t[_c]=e}(t,{previous:ui,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new du(u&&u.currentValue,e,s===ui),t[r]=e}$t.ngInherit=!0;const _c="__ngSimpleChanges__";function vo(t){return t[_c]||null}let Qs;function ft(t){return!!t.listen}const pu={createRenderer:(t,e)=>void 0!==Qs?Qs:"undefined"!=typeof document?document:void 0};function Xe(t){for(;Array.isArray(t);)t=t[0];return t}function Ks(t,e){return Xe(e[t])}function Ot(t,e){return Xe(e[t.index])}function Js(t,e){return t.data[e]}function En(t,e){const n=e[t];return Ln(n)?n:n[0]}function hi(t){return 128==(128&t[2])}function Lr(t,e){return null==e?null:t[e]}function yu(t){t[18]=0}function pi(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const ke={lFrame:Eu(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Vr(){return ke.bindingsEnabled}function le(){return ke.lFrame.lView}function Ye(){return ke.lFrame.tView}function gi(t){return ke.lFrame.contextLView=t,t[8]}function zt(){let t=$i();for(;null!==t&&64===t.type;)t=t.parent;return t}function $i(){return ke.lFrame.currentTNode}function br(t,e){const n=ke.lFrame;n.currentTNode=t,n.isParent=e}function ts(){return ke.lFrame.isParent}function zi(){return ke.isInCheckNoChangesMode}function Xs(t){ke.isInCheckNoChangesMode=t}function or(){return ke.lFrame.bindingIndex}function Gi(){return ke.lFrame.bindingIndex++}function jr(t){const e=ke.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function sr(t,e){const n=ke.lFrame;n.bindingIndex=n.bindingRootIndex=t,Wi(e)}function Wi(t){ke.lFrame.currentDirectiveIndex=t}function ea(t){ke.lFrame.currentQueryIndex=t}function Sc(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function Cu(t,e,n){if(n&Te.SkipSelf){let i=e,o=t;for(;!(i=i.parent,null!==i||n&Te.Host||(i=Sc(o),null===i||(o=o[15],10&i.type))););if(null===i)return!1;e=i,t=o}const r=ke.lFrame=wu();return r.currentTNode=e,r.lView=t,!0}function qi(t){const e=wu(),n=t[1];ke.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function wu(){const t=ke.lFrame,e=null===t?null:t.child;return null===e?Eu(t):e}function Eu(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function is(){const t=ke.lFrame;return ke.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Du=is;function ta(){const t=is();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Gt(){return ke.lFrame.selectedIndex}function Ur(t){ke.lFrame.selectedIndex=t}function xt(){const t=ke.lFrame;return Js(t.tView,t.selectedIndex)}function c(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:h,ngOnDestroy:m}=o;s&&(t.contentHooks||(t.contentHooks=[])).push(-n,s),a&&((t.contentHooks||(t.contentHooks=[])).push(n,a),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,a)),u&&(t.viewHooks||(t.viewHooks=[])).push(-n,u),h&&((t.viewHooks||(t.viewHooks=[])).push(n,h),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,h)),null!=m&&(t.destroyHooks||(t.destroyHooks=[])).push(n,m)}}function l(t,e,n){g(t,e,3,n)}function d(t,e,n,r){(3&t[2])===n&&g(t,e,n,r)}function f(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function g(t,e,n,r){const o=null!=r?r:-1,s=e.length-1;let a=0;for(let u=void 0!==r?65535&t[18]:0;u<s;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(t[18]+=65536),(a<o||-1==o)&&(C(t,n,e,u),t[18]=(4294901760&t[18])+u+2),u++}function C(t,e,n,r){const i=n[r]<0,o=n[r+1],a=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{o.call(a)}finally{}}}else try{o.call(a)}finally{}}const T=-1;class w{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function ge(t,e,n){const r=ft(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];Ee(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function de(t){return 3===t||4===t||6===t}function Ee(t){return 64===t.charCodeAt(0)}function xe(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Le(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Le(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const a=t[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<t.length;){const a=t[o];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function it(t){return t!==T}function at(t){return 32767&t}function tt(t,e){let n=function(t){return t>>16}(t),r=e;for(;n>0;)r=r[15],n--;return r}let Sn=!0;function Yn(t){const e=Sn;return Sn=t,e}let FS=0;function Tc(t,e){const n=sh(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,oh(r.data,t),oh(e,null),oh(r.blueprint,null));const i=Pu(t,e),o=t.injectorIndex;if(it(i)){const s=at(i),a=tt(i,e),u=a[1].data;for(let h=0;h<8;h++)e[o+h]=a[s+h]|u[s+h]}return e[o+8]=i,o}function oh(t,e){t.push(0,0,0,0,0,0,0,0,e)}function sh(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Pu(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const o=i[1],s=o.type;if(r=2===s?o.declTNode:1===s?i[6]:null,null===r)return T;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return T}function Mu(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Qo)&&(r=n[Qo]),null==r&&(r=n[Qo]=FS++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Cy(t,e,n){if(n&Te.Optional)return t;Oi(e,"NodeInjector")}function wy(t,e,n,r){if(n&Te.Optional&&void 0===r&&(r=null),0==(n&(Te.Self|Te.Host))){const i=t[9],o=ci(void 0);try{return i?i.get(e,r,n&Te.Optional):li(e,r,n&Te.Optional)}finally{ci(o)}}return Cy(r,e,n)}function Ey(t,e,n,r=Te.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Qo)?t[Qo]:void 0;return"number"==typeof e?e>=0?255&e:jS:e}(n);if("function"==typeof o){if(!Cu(e,t,r))return r&Te.Host?Cy(i,n,r):wy(e,n,r,i);try{const s=o(r);if(null!=s||r&Te.Optional)return s;Oi(n)}finally{Du()}}else if("number"==typeof o){let s=null,a=sh(t,e),u=T,h=r&Te.Host?e[16][6]:null;for((-1===a||r&Te.SkipSelf)&&(u=-1===a?Pu(t,e):e[a+8],u!==T&&Ty(r,!1)?(s=e[1],a=at(u),e=tt(u,e)):a=-1);-1!==a;){const m=e[1];if(Sy(o,a,m.data)){const E=BS(a,e,n,s,r,h);if(E!==Dy)return E}u=e[a+8],u!==T&&Ty(r,e[1].data[a+8]===h)&&Sy(o,a,e)?(s=m,a=at(u),e=tt(u,e)):a=-1}}}return wy(e,n,r,i)}const Dy={};function jS(){return new ra(zt(),le())}function BS(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],m=function(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,m=o>>20,k=i?a+m:t.directiveEnd;for(let N=r?a:a+m;N<k;N++){const H=s[N];if(N<u&&n===H||N>=u&&H.type===n)return N}if(i){const N=s[u];if(N&&ir(N)&&N.type===n)return u}return null}(a,s,n,null==r?Xo(a)&&Sn:r!=s&&0!=(3&a.type),i&Te.Host&&o===a);return null!==m?Ic(e,s,m,a):Dy}function Ic(t,e,n,r){let i=t[n];const o=e.data;if(function(t){return t instanceof w}(i)){const s=i;s.resolving&&function(t,e){throw new si("200",`Circular dependency in DI detected for ${t}`)}(Yt(o[n]));const a=Yn(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?ci(s.injectImpl):null;Cu(t,r,Te.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const s=es(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,s)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&ci(u),Yn(a),s.resolving=!1,Du()}}return i}function Sy(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function Ty(t,e){return!(t&Te.Self||t&Te.Host&&e)}class ra{constructor(e,n){this._tNode=e,this._lView=n}get(e,n){return Ey(this._tNode,this._lView,e,void 0,n)}}function Cr(t){return er(()=>{const e=t.prototype.constructor,n=e[Mt]||ah(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const o=i[Mt]||ah(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function ah(t){return mr(t)?()=>{const e=ah(be(t));return e&&e()}:Ui(t)}const oa="__parameters__";function os(t,e,n){return er(()=>{const r=function(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;const s=new i(...o);return a.annotation=s,a;function a(u,h,m){const E=u.hasOwnProperty(oa)?u[oa]:Object.defineProperty(u,oa,{value:[]})[oa];for(;E.length<=m;)E.push(null);return(E[m]=E[m]||[]).push(s),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class Ge{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Se({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}toString(){return`InjectionToken ${this._desc}`}}const zS=new Ge("AnalyzeForEntryComponents"),Ru=Function;function mi(t,e){t.forEach(n=>Array.isArray(n)?mi(n,e):e(n))}function Ou(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function ss(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function ar(t,e,n){let r=aa(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function lh(t,e){const n=aa(t,e);if(n>=0)return t[1|n]}function aa(t,e){return function(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){const o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}(t,e,1)}const Ac={},dh="__NG_DI_FLAG__",ca="ngTempTokenPath",eT=/\n/gm,fh="__source",hh=ot({provide:String,useValue:ot});let Oc;function la(t){const e=Oc;return Oc=t,e}function nT(t,e=Te.Default){if(void 0===Oc)throw new Error("inject() must be called from an injection context");return null===Oc?li(t,void 0,e):Oc.get(t,e&Te.Optional?null:void 0,e)}function he(t,e=Te.Default){return(Vs||nT)(be(t),e)}function as(t){const e=[];for(let n=0;n<t.length;n++){const r=be(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let i,o=Te.Default;for(let s=0;s<r.length;s++){const a=r[s],u=rT(a);"number"==typeof u?-1===u?i=a.token:o|=u:i=a}e.push(he(i,o))}else e.push(he(r))}return e}function kc(t,e){return t[dh]=e,t.prototype[dh]=e,t}function rT(t){return t[dh]}function Ay(t,e,n,r){const i=t[ca];throw e[fh]&&i.unshift(e[fh]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=Ae(e);if(Array.isArray(e))i=e.map(Ae).join(" -> ");else if("object"==typeof e){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):Ae(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(eT,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[ca]=null,t}const ua=kc(os("Inject",t=>({token:t})),-1),Qn=kc(os("Optional"),8),Eo=kc(os("SkipSelf"),4);class cs{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function cr(t){return t instanceof cs?t.changingThisBreaksApplicationSecurity:t}function yi(t,e){const n=function(t){return t instanceof cs&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}const IT=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,PT=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Ct=(()=>((Ct=Ct||{})[Ct.NONE=0]="NONE",Ct[Ct.HTML=1]="HTML",Ct[Ct.STYLE=2]="STYLE",Ct[Ct.SCRIPT=3]="SCRIPT",Ct[Ct.URL=4]="URL",Ct[Ct.RESOURCE_URL=5]="RESOURCE_URL",Ct))();function Bu(t){const e=function(){const t=le();return t&&t[12]}();return e?e.sanitize(Ct.URL,t)||"":yi(t,"URL")?cr(t):function(t){return(t=String(t)).match(IT)||t.match(PT)?t:"unsafe:"+t}(fe(t))}const Jy="__ngContext__";function Tn(t,e){t[Jy]=e}function wh(t){const e=function(t){return t[Jy]||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Uu(t){return t.ngOriginalError}function KT(t,...e){t.error(...e)}class ls{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e),r=this._findContext(e),i=function(t){return t&&t.ngErrorLogger||KT}(e);i(this._console,"ERROR",e),n&&i(this._console,"ORIGINAL ERROR",n),r&&i(this._console,"ERROR CONTEXT",r)}_findContext(e){return e?function(t){return t.ngDebugContext}(e)||this._findContext(Uu(e)):null}_findOriginalError(e){let n=e&&Uu(e);for(;n&&Uu(n);)n=Uu(n);return n||null}}const sv=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(st))();function _i(t){return t instanceof Function?t():t}var lr=(()=>((lr=lr||{})[lr.Important=1]="Important",lr[lr.DashCase=2]="DashCase",lr))();function Sh(t,e){return undefined(t,e)}function Bc(t){const e=t[3];return Wn(e)?e[3]:e}function Th(t){return dv(t[13])}function Ih(t){return dv(t[4])}function dv(t){for(;null!==t&&!Wn(t);)t=t[4];return t}function pa(t,e,n,r,i){if(null!=r){let o,s=!1;Wn(r)?o=r:Ln(r)&&(s=!0,r=r[0]);const a=Xe(r);0===t&&null!==n?null==i?yv(e,n,a):us(e,n,a,i||null,!0):1===t&&null!==n?us(e,n,a,i||null,!0):2===t?function(t,e,n){const r=$u(t,e);r&&function(t,e,n,r){ft(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==Xe(n)&&pa(e,t,r,o,i);for(let a=10;a<n.length;a++){const u=n[a];Uc(u[1],u,t,e,r,o)}}(e,t,o,n,i)}}function Mh(t,e,n){return ft(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function hv(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,pi(i,-1)),n.splice(r,1)}function xh(t,e){if(t.length<=10)return;const n=10+e,r=t[n];if(r){const i=r[17];null!==i&&i!==t&&hv(i,r),e>0&&(t[n-1][4]=r[4]);const o=ss(t,10+e);!function(t,e){Uc(t,e,e[11],2,null,null),e[0]=null,e[6]=null}(r[1],r);const s=o[19];null!==s&&s.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function pv(t,e){if(!(256&e[2])){const n=e[11];ft(n)&&n.destroyNode&&Uc(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Rh(t[1],t);for(;e;){let n=null;if(Ln(e))n=e[13];else{const r=e[10];r&&(n=r)}if(!n){for(;e&&!e[4]&&e!==t;)Ln(e)&&Rh(e[1],e),e=e[3];null===e&&(e=t),Ln(e)&&Rh(e[1],e),n=e&&e[4]}e=n}}(e)}}function Rh(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof w)){const o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],u=o[s+1];try{u.call(a)}finally{}}else try{o.call(i)}finally{}}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const s=n[o+1],a="function"==typeof s?s(e):Xe(e[s]),u=r[i=n[o+2]],h=n[o+3];"boolean"==typeof h?a.removeEventListener(n[o],u,h):h>=0?r[i=h]():r[i=-h].unsubscribe(),o+=2}else{const s=r[i=n[o+1]];n[o].call(s)}if(null!==r){for(let o=i+1;o<r.length;o++)r[o]();e[7]=null}}(t,e),1===e[1].type&&ft(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&Wn(e[3])){n!==e[3]&&hv(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function gv(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const i=t.data[r.directiveStart].encapsulation;if(i===Ut.None||i===Ut.Emulated)return null}return Ot(r,n)}(t,e.parent,n)}function us(t,e,n,r,i){ft(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function yv(t,e,n){ft(t)?t.appendChild(e,n):e.appendChild(n)}function vv(t,e,n,r,i){null!==r?us(t,e,n,r,i):yv(t,e,n)}function $u(t,e){return ft(t)?t.parentNode(e):e.parentNode}let Cv=function(t,e,n){return 40&t.type?Ot(t,n):null};function zu(t,e,n,r){const i=gv(t,r,e),o=e[11],a=function(t,e,n){return Cv(t,e,n)}(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(let u=0;u<n.length;u++)vv(o,i,n[u],a,!1);else vv(o,i,n,a,!1)}function Gu(t,e){if(null!==e){const n=e.type;if(3&n)return Ot(e,t);if(4&n)return Oh(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return Gu(t,r);{const i=t[e.index];return Wn(i)?Oh(-1,i):Xe(i)}}if(32&n)return Sh(e,t)()||Xe(t[e.index]);{const r=Ev(t,e);return null!==r?Array.isArray(r)?r[0]:Gu(Bc(t[16]),r):Gu(t,e.next)}}return null}function Ev(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Oh(t,e){const n=10+t+1;if(n<e.length){const r=e[n],i=r[1].firstChild;if(null!==i)return Gu(r,i)}return e[7]}function kh(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&Tn(Xe(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)kh(t,e,n.child,r,i,o,!1),pa(e,t,i,a,o);else if(32&u){const h=Sh(n,r);let m;for(;m=h();)pa(e,t,i,m,o);pa(e,t,i,a,o)}else 16&u?Sv(t,e,r,n,i,o):pa(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Uc(t,e,n,r,i,o){kh(n,r,t.firstChild,e,i,o,!1)}function Sv(t,e,n,r,i,o){const s=n[16],u=s[6].projection[r.projection];if(Array.isArray(u))for(let h=0;h<u.length;h++)pa(e,t,i,u[h],o);else kh(t,e,u,s[3],i,o,!0)}function Tv(t,e,n){ft(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Nh(t,e,n){ft(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function Iv(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}const Pv="ng-template";function wI(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==Iv(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Mv(t){return 4===t.type&&t.value!==Pv}function EI(t,e,n){return e===(4!==t.type||n?t.value:Pv)}function DI(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(de(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!EI(t,u,n)||""===u&&1===e.length){if(Hr(r))return!1;s=!0}}else{const h=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!wI(t.attrs,h,n)){if(Hr(r))return!1;s=!0}continue}const E=SI(8&r?"class":u,i,Mv(t),n);if(-1===E){if(Hr(r))return!1;s=!0;continue}if(""!==h){let k;k=E>o?"":i[E+1].toLowerCase();const N=8&r?k:null;if(N&&-1!==Iv(N,h,0)||2&r&&h!==k){if(Hr(r))return!1;s=!0}}}}else{if(!s&&!Hr(r)&&!Hr(u))return!1;if(s&&Hr(u))continue;s=!1,r=u|1&r}}return Hr(r)||s}function Hr(t){return 0==(1&t)}function SI(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){const s=e[i];if(s===t)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function xv(t,e,n=!1){for(let r=0;r<e.length;r++)if(DI(t,e[r],n))return!0;return!1}function Rv(t,e){return t?":not("+e.trim()+")":e}function xI(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!Hr(s)&&(e+=Rv(o,i),i=""),r=s,o=o||!Hr(r);n++}return""!==i&&(e+=Rv(o,i)),e}const Ve={};function ct(t){Av(Ye(),le(),Gt()+t,zi())}function Av(t,e,n,r){if(!r)if(3==(3&e[2])){const o=t.preOrderCheckHooks;null!==o&&l(e,o,n)}else{const o=t.preOrderHooks;null!==o&&d(e,o,0,n)}Ur(n)}function Wu(t,e){return t<<17|e<<2}function $r(t){return t>>17&32767}function Fh(t){return 2|t}function Qi(t){return(131068&t)>>2}function Lh(t,e){return-131069&t|e<<2}function Vh(t){return 1|t}function Hv(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const s=t.data[o];ea(i),s.contentQueries(2,e[o],o)}}}function Hc(t,e,n,r,i,o,s,a,u,h){const m=e.blueprint.slice();return m[0]=i,m[2]=140|r,yu(m),m[3]=m[15]=t,m[8]=n,m[10]=s||t&&t[10],m[11]=a||t&&t[11],m[12]=u||t&&t[12]||null,m[9]=h||t&&t[9]||null,m[6]=o,m[16]=2==e.type?t[16]:m,m}function ga(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=$i(),s=ts(),u=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=u),null!==o&&(s?null==o.child&&null!==u.parent&&(o.child=u):null===o.next&&(o.next=u)),u}(t,e,n,r,i),ke.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const s=function(){const t=ke.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return br(o,!0),o}function ma(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function $c(t,e,n){qi(e);try{const r=t.viewQuery;null!==r&&ep(1,r,n);const i=t.template;null!==i&&$v(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Hv(t,e),t.staticViewQueries&&ep(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)lP(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[2]&=-5,ta()}}function ya(t,e,n,r){const i=e[2];if(256==(256&i))return;qi(e);const o=zi();try{yu(e),function(t){ke.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&$v(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const h=t.preOrderCheckHooks;null!==h&&l(e,h,null)}else{const h=t.preOrderHooks;null!==h&&d(e,h,0,null),f(e,0)}if(function(t){for(let e=Th(t);null!==e;e=Ih(e)){if(!e[2])continue;const n=e[9];for(let r=0;r<n.length;r++){const i=n[r],o=i[3];0==(1024&i[2])&&pi(o,1),i[2]|=1024}}}(e),function(t){for(let e=Th(t);null!==e;e=Ih(e))for(let n=10;n<e.length;n++){const r=e[n],i=r[1];hi(r)&&ya(i,r,i.template,r[8])}}(e),null!==t.contentQueries&&Hv(t,e),!o)if(s){const h=t.contentCheckHooks;null!==h&&l(e,h)}else{const h=t.contentHooks;null!==h&&d(e,h,1),f(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const i=n[r];if(i<0)Ur(~i);else{const o=i,s=n[++r],a=n[++r];sr(s,o),a(2,e[o])}}}finally{Ur(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)cP(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&ep(2,u,r),!o)if(s){const h=t.viewCheckHooks;null!==h&&l(e,h)}else{const h=t.viewHooks;null!==h&&d(e,h,2),f(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,pi(e[3],-1))}finally{ta()}}function $I(t,e,n,r){const i=e[10],o=!zi(),s=function(t){return 4==(4&t[2])}(e);try{o&&!s&&i.begin&&i.begin(),s&&$c(t,e,r),ya(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function $v(t,e,n,r,i){const o=Gt(),s=2&r;try{Ur(-1),s&&e.length>20&&Av(t,e,20,zi()),n(r,i)}finally{Ur(o)}}function Wh(t,e,n){!Vr()||(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Tc(n,e),Tn(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const u=t.data[a],h=ir(u);h&&rP(e,n,u);const m=Ic(e,t,a,n);Tn(m,e),null!==s&&iP(0,a-i,m,u,0,s),h&&(En(n.index,e)[8]=m)}}(t,e,n,Ot(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,a=ke.lFrame.currentDirectiveIndex;try{Ur(s);for(let u=r;u<i;u++){const h=t.data[u],m=e[u];Wi(u),(null!==h.hostBindings||0!==h.hostVars||null!==h.hostAttrs)&&Xv(h,m)}}finally{Ur(-1),Wi(a)}}(t,e,n))}function qh(t,e,n=Ot){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function Gv(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Qu(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Qu(t,e,n,r,i,o,s,a,u,h){const m=20+r,E=m+i,k=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Ve);return n}(m,E),N="function"==typeof h?h():h;return k[1]={type:t,blueprint:k,template:n,queries:null,viewQuery:a,declTNode:e,data:k.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:E,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:N,incompleteFirstPass:!1}}function Qv(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function ur(t,e,n,r,i,o,s,a){const u=Ot(e,n);let m,h=e.inputs;!a&&null!=h&&(m=h[r])?(c_(t,n,m,r,i),Xo(e)&&function(t,e){const n=En(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r=function(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=s?s(i,e.value||"",r):i,ft(o)?o.setProperty(u,r,i):Ee(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function Yh(t,e,n,r){let i=!1;if(Vr()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];xv(n,s.selectors,!1)&&(i||(i=[]),Mu(Tc(n,e),t,s.type),ir(s)?(Zv(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,e_(n,t.data.length,o.length);for(let m=0;m<o.length;m++){const E=o[m];E.providersResolver&&E.providersResolver(E)}let a=!1,u=!1,h=ma(t,e,o.length,null);for(let m=0;m<o.length;m++){const E=o[m];n.mergedAttrs=xe(n.mergedAttrs,E.hostAttrs),t_(t,n,e,h,E),nP(h,E,s),null!==E.contentQueries&&(n.flags|=8),(null!==E.hostBindings||null!==E.hostAttrs||0!==E.hostVars)&&(n.flags|=128);const k=E.type.prototype;!a&&(k.ngOnChanges||k.ngOnInit||k.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),a=!0),!u&&(k.ngOnChanges||k.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),u=!0),h++}!function(t,e){const r=e.directiveEnd,i=t.data,o=e.attrs,s=[];let a=null,u=null;for(let h=e.directiveStart;h<r;h++){const m=i[h],E=m.inputs,k=null===o||Mv(e)?null:oP(E,o);s.push(k),a=Qv(E,h,a),u=Qv(m.outputs,h,u)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=s,e.inputs=a,e.outputs=u}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const o=n[e[i+1]];if(null==o)throw new si("301",`Export of name '${e[i+1]}' not found!`);r.push(e[i],o)}}}(n,r,s)}return n.mergedAttrs=xe(n.mergedAttrs,n.attrs),i}function Jv(t,e,n,r,i,o){const s=o.hostBindings;if(s){let a=t.hostBindingOpCodes;null===a&&(a=t.hostBindingOpCodes=[]);const u=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(a)!=u&&a.push(u),a.push(r,i,s)}}function Xv(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Zv(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function nP(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;ir(e)&&(n[""]=t)}}function e_(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function t_(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=Ui(i.type)),s=new w(o,ir(i),null);t.blueprint[r]=s,n[r]=s,Jv(t,e,0,r,ma(t,n,i.hostVars,Ve),i)}function rP(t,e,n){const r=Ot(e,t),i=Gv(n),o=t[10],s=Ku(t,Hc(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function bi(t,e,n,r,i,o){const s=Ot(t,e);!function(t,e,n,r,i,o,s){if(null==o)ft(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?fe(o):s(o,r||"",i);ft(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],s,o,t.value,n,r,i)}function iP(t,e,n,r,i,o){const s=o[e];if(null!==s){const a=r.setInput;for(let u=0;u<s.length;){const h=s[u++],m=s[u++],E=s[u++];null!==a?r.setInput(n,E,h,m):n[m]=E}}}function oP(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function n_(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function cP(t,e){const n=En(e,t);if(hi(n)){const r=n[1];80&n[2]?ya(r,n,r.template,n[8]):n[5]>0&&Kh(n)}}function Kh(t){for(let r=Th(t);null!==r;r=Ih(r))for(let i=10;i<r.length;i++){const o=r[i];if(1024&o[2]){const s=o[1];ya(s,o,s.template,o[8])}else o[5]>0&&Kh(o)}const n=t[1].components;if(null!==n)for(let r=0;r<n.length;r++){const i=En(n[r],t);hi(i)&&i[5]>0&&Kh(i)}}function lP(t,e){const n=En(e,t),r=n[1];(function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])})(r,n),$c(r,n,n[8])}function Ku(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Jh(t){for(;t;){t[2]|=64;const e=Bc(t);if(au(t)&&!e)return t;t=e}return null}function Zh(t,e,n){const r=e[10];r.begin&&r.begin();try{ya(t,e,t.template,n)}catch(i){throw a_(e,i),i}finally{r.end&&r.end()}}function r_(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=wh(n),i=r[1];$I(i,r,i.template,n)}}(t[8])}function ep(t,e,n){ea(0),e(t,n)}const pP=(()=>Promise.resolve(null))();function i_(t){return t[7]||(t[7]=[])}function o_(t){return t.cleanup||(t.cleanup=[])}function a_(t,e){const n=t[9],r=n?n.get(ls,null):null;r&&r.handleError(e)}function c_(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],h=t.data[s];null!==h.setInput?h.setInput(u,i,r,a):u[a]=i}}function Ji(t,e,n){const r=Ks(e,t);!function(t,e,n){ft(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}function Ju(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?i=uc(i,a):2==o&&(r=uc(r,a+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const va=new Ge("INJECTOR",-1);class l_{get(e,n=Ac){if(n===Ac){const r=new Error(`NullInjectorError: No provider for ${Ae(e)}!`);throw r.name="NullInjectorError",r}return n}}const zc=new Ge("Set Injector scope."),Gc={},yP={};let tp;function u_(){return void 0===tp&&(tp=new l_),tp}function d_(t,e=null,n=null,r){return new _P(t,n,e||u_(),r)}class _P{constructor(e,n,r,i=null){this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const o=[];n&&mi(n,a=>this.processProvider(a,e,n)),mi([e],a=>this.processInjectorType(a,[],o)),this.records.set(va,_a(void 0,this));const s=this.records.get(zc);this.scope=null!=s?s.value:null,this.source=i||("object"==typeof e?null:Ae(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,n=Ac,r=Te.Default){this.assertNotDestroyed();const i=la(this),o=ci(void 0);try{if(!(r&Te.SkipSelf)){let a=this.records.get(e);if(void 0===a){const u=function(t){return"function"==typeof t||"object"==typeof t&&t instanceof Ge}(e)&&kr(e);a=u&&this.injectableDefInScope(u)?_a(np(e),Gc):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(r&Te.Self?u_():this.parent).get(e,n=r&Te.Optional&&n===Ac?null:n)}catch(s){if("NullInjectorError"===s.name){if((s[ca]=s[ca]||[]).unshift(Ae(e)),i)throw s;return Ay(s,e,"R3InjectorError",this.source)}throw s}finally{ci(o),la(i)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((r,i)=>e.push(Ae(i))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(e,n,r){if(!(e=be(e)))return!1;let i=Ls(e);const o=null==i&&e.ngModule||void 0,s=void 0===o?e:o,a=-1!==r.indexOf(s);if(void 0!==o&&(i=Ls(o)),null==i)return!1;if(null!=i.imports&&!a){let m;r.push(s);try{mi(i.imports,E=>{this.processInjectorType(E,n,r)&&(void 0===m&&(m=[]),m.push(E))})}finally{}if(void 0!==m)for(let E=0;E<m.length;E++){const{ngModule:k,providers:N}=m[E];mi(N,H=>this.processProvider(H,k,N||Pe))}}this.injectorDefTypes.add(s);const u=Ui(s)||(()=>new s);this.records.set(s,_a(u,Gc));const h=i.providers;if(null!=h&&!a){const m=e;mi(h,E=>this.processProvider(E,m,h))}return void 0!==o&&void 0!==e.providers}processProvider(e,n,r){let i=ba(e=be(e))?e:be(e&&e.provide);const o=function(t,e,n){return h_(t)?_a(void 0,t.useValue):_a(f_(t),Gc)}(e);if(ba(e)||!0!==e.multi)this.records.get(i);else{let s=this.records.get(i);s||(s=_a(void 0,Gc,!0),s.factory=()=>as(s.multi),this.records.set(i,s)),i=e,s.multi.push(e)}this.records.set(i,o)}hydrate(e,n){return n.value===Gc&&(n.value=yP,n.value=n.factory()),"object"==typeof n.value&&n.value&&function(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this.onDestroy.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=be(e.providedIn);return"string"==typeof n?"any"===n||n===this.scope:this.injectorDefTypes.has(n)}}function np(t){const e=kr(t),n=null!==e?e.factory:Ui(t);if(null!==n)return n;if(t instanceof Ge)throw new Error(`Token ${Ae(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const r=function(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}(e,"?");throw new Error(`Can't resolve all parameters for ${Ae(t)}: (${r.join(", ")}).`)}const n=function(t){const e=t&&(t[ai]||t[eu]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function f_(t,e,n){let r;if(ba(t)){const i=be(t);return Ui(i)||np(i)}if(h_(t))r=()=>be(t.useValue);else if(function(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...as(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>he(be(t.useExisting));else{const i=be(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return Ui(i)||np(i);r=()=>new i(...as(t.deps))}return r}function _a(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function h_(t){return null!==t&&"object"==typeof t&&hh in t}function ba(t){return"function"==typeof t}const p_=function(t,e,n){return function(t,e=null,n=null,r){const i=d_(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let ht=(()=>{class t{static create(n,r){return Array.isArray(n)?p_(n,r,""):p_(n.providers,n.parent,n.name||"")}}return t.THROW_IF_NOT_FOUND=Ac,t.NULL=new l_,t.\u0275prov=Se({token:t,providedIn:"any",factory:()=>he(va)}),t.__NG_ELEMENT_ID__=-1,t})();function BP(t,e){c(wh(t)[1],zt())}function It(t){let e=function(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const r=[t];for(;e;){let i;if(ir(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const s=t;s.inputs=cp(t.inputs),s.declaredInputs=cp(t.declaredInputs),s.outputs=cp(t.outputs);const a=i.hostBindings;a&&zP(t,a);const u=i.viewQuery,h=i.contentQueries;if(u&&HP(t,u),h&&$P(t,h),Ns(t.inputs,i.inputs),Ns(t.declaredInputs,i.declaredInputs),Ns(t.outputs,i.outputs),ir(i)&&i.data.animation){const m=t.data;m.animation=(m.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(t),a===It&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=xe(i.hostAttrs,n=xe(n,i.hostAttrs))}}(r)}function cp(t){return t===ui?{}:t===Pe?[]:t}function HP(t,e){const n=t.viewQuery;t.viewQuery=n?(r,i)=>{e(r,i),n(r,i)}:e}function $P(t,e){const n=t.contentQueries;t.contentQueries=n?(r,i,o)=>{e(r,i,o),n(r,i,o)}:e}function zP(t,e){const n=t.hostBindings;t.hostBindings=n?(r,i)=>{e(r,i),n(r,i)}:e}let Xu=null;function Ca(){if(!Xu){const t=st.Symbol;if(t&&t.iterator)Xu=t.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let n=0;n<e.length;++n){const r=e[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(Xu=r)}}}return Xu}function qc(t){return!!lp(t)&&(Array.isArray(t)||!(t instanceof Map)&&Ca()in t)}function lp(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function In(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function ds(t,e,n,r){const i=In(t,e,n);return In(t,e+1,r)||i}function dr(t,e,n,r){const i=le();return In(i,Gi(),e)&&(Ye(),bi(xt(),i,t,e,n,r)),dr}function Ea(t,e,n,r){return In(t,Gi(),n)?e+fe(n)+r:Ve}function Sa(t,e,n,r,i,o,s,a){const h=function(t,e,n,r,i){const o=ds(t,e,n,r);return In(t,e+2,i)||o}(t,or(),n,i,s);return jr(3),h?e+fe(n)+r+fe(i)+o+fe(s)+a:Ve}function vn(t,e,n,r,i,o,s,a){const u=le(),h=Ye(),m=t+20,E=h.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const h=e.consts,m=ga(e,t,4,s||null,Lr(h,a));Yh(e,n,m,Lr(h,u)),c(e,m);const E=m.tViews=Qu(2,m,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,h);return null!==e.queries&&(e.queries.template(e,m),E.queries=e.queries.embeddedTView(m)),m}(m,h,u,e,n,r,i,o,s):h.data[m];br(E,!1);const k=u[11].createComment("");zu(h,u,k,E),Tn(k,u),Ku(u,u[m]=n_(k,u,k,E)),$s(E)&&Wh(h,u,E),null!=s&&qh(u,E,a)}function ce(t,e=Te.Default){const n=le();return null===n?he(t,e):Ey(zt(),n,be(t),e)}function wt(t,e,n){const r=le();return In(r,Gi(),e)&&ur(Ye(),xt(),r,t,e,r[11],n,!1),wt}function pp(t,e,n,r,i){const s=i?"class":"style";c_(t,n,e.inputs[s],s,r)}function nt(t,e,n,r){const i=le(),o=Ye(),s=20+t,a=i[11],u=i[s]=Mh(a,e,ke.lFrame.currentNamespace),h=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,h=ga(e,t,2,i,Lr(a,o));return Yh(e,n,h,Lr(a,s)),null!==h.attrs&&Ju(h,h.attrs,!1),null!==h.mergedAttrs&&Ju(h,h.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,h),h}(s,o,i,0,e,n,r):o.data[s];br(h,!0);const m=h.mergedAttrs;null!==m&&ge(a,u,m);const E=h.classes;null!==E&&Nh(a,u,E);const k=h.styles;null!==k&&Tv(a,u,k),64!=(64&h.flags)&&zu(o,i,u,h),0===ke.lFrame.elementDepthCount&&Tn(u,i),ke.lFrame.elementDepthCount++,$s(h)&&(Wh(o,i,h),function(t,e,n){if(Hs(e)){const i=e.directiveEnd;for(let o=e.directiveStart;o<i;o++){const s=t.data[o];s.contentQueries&&s.contentQueries(1,n[o],o)}}}(o,h,i)),null!==r&&qh(i,h)}function rt(){let t=zt();ts()?ke.lFrame.isParent=!1:(t=t.parent,br(t,!1));const e=t;ke.lFrame.elementDepthCount--;const n=Ye();n.firstCreatePass&&(c(n,t),Hs(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&pp(n,e,le(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&pp(n,e,le(),e.stylesWithoutHost,!1)}function Wr(t,e,n,r){nt(t,e,n,r),rt()}function fs(){return le()}function Qc(t){return!!t&&"function"==typeof t.then}const td=function(t){return!!t&&"function"==typeof t.subscribe};function Rt(t,e,n,r){const i=le(),o=Ye(),s=zt();return function(t,e,n,r,i,o,s,a){const u=$s(r),m=t.firstCreatePass&&o_(t),E=e[8],k=i_(e);let N=!0;if(3&r.type||a){const K=Ot(r,e),ae=a?a(K):K,re=k.length,ve=a?Ie=>a(Xe(Ie[r.index])):r.index;if(ft(n)){let Ie=null;if(!a&&u&&(Ie=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===n&&i[o+1]===r){const a=e[7],u=i[o+2];return a.length>u?a[u]:null}"string"==typeof s&&(o+=2)}return null}(t,e,i,r.index)),null!==Ie)(Ie.__ngLastListenerFn__||Ie).__ngNextListenerFn__=o,Ie.__ngLastListenerFn__=o,N=!1;else{o=gp(r,e,E,o,!1);const We=n.listen(ae,i,o);k.push(o,We),m&&m.push(i,ve,re,re+1)}}else o=gp(r,e,E,o,!0),ae.addEventListener(i,o,s),k.push(o),m&&m.push(i,ve,re,s)}else o=gp(r,e,E,o,!1);const H=r.outputs;let Z;if(N&&null!==H&&(Z=H[i])){const K=Z.length;if(K)for(let ae=0;ae<K;ae+=2){const an=e[Z[ae]][Z[ae+1]].subscribe(o),Rr=k.length;k.push(o,an),m&&m.push(i,r.index,Rr,-(Rr+1))}}}(o,i,i[11],s,t,e,!!n,r),Rt}function rb(t,e,n,r){try{return!1!==n(r)}catch(i){return a_(t,i),!1}}function gp(t,e,n,r,i){return function o(s){if(s===Function)return r;const a=2&t.flags?En(t.index,e):e;0==(32&e[2])&&Jh(a);let u=rb(e,0,r,s),h=o.__ngNextListenerFn__;for(;h;)u=rb(e,0,h,s)&&u,h=h.__ngNextListenerFn__;return i&&!1===u&&(s.preventDefault(),s.returnValue=!1),u}}function tn(t=1){return function(t){return(ke.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,ke.lFrame.contextLView))[8]}(t)}function nd(t,e,n,r,i){const o=le(),s=Ea(o,e,n,r);return s!==Ve&&ur(Ye(),xt(),o,t,s,o[11],i,!1),nd}function hb(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?$r(o):Qi(o),u=!1;for(;0!==a&&(!1===u||s);){const m=t[a+1];RM(t[a],e)&&(u=!0,t[a+1]=r?Vh(m):Fh(m)),a=r?$r(m):Qi(m)}u&&(t[n+1]=r?Fh(o):Vh(o))}function RM(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&aa(t,e)>=0}function rd(t,e,n){return qr(t,e,n,!1),rd}function hs(t,e){return qr(t,e,null,!0),hs}function qr(t,e,n,r){const i=le(),o=Ye(),s=jr(2);o.firstUpdatePass&&function(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[Gt()],s=function(t,e){return e>=t.expandoStartIndex}(t,n);(function(t,e){return 0!=(t.flags&(e?16:32))})(o,r)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=ke.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=Kc(n=mp(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=mp(i,t,e,n,r),null===o){let u=function(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==Qi(r))return t[$r(r)]}(t,e,r);void 0!==u&&Array.isArray(u)&&(u=mp(null,t,e,u[1],r),u=Kc(u,e.attrs,r),function(t,e,n,r){t[$r(n?e.classBindings:e.styleBindings)]=r}(t,e,r,u))}else o=function(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=Kc(r,t[o].hostAttrs,n);return Kc(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=$r(s),u=Qi(s);t[r]=n;let m,h=!1;if(Array.isArray(n)){const E=n;m=E[1],(null===m||aa(E,m)>0)&&(h=!0)}else m=n;if(i)if(0!==u){const k=$r(t[a+1]);t[r+1]=Wu(k,a),0!==k&&(t[k+1]=Lh(t[k+1],r)),t[a+1]=function(t,e){return 131071&t|e<<17}(t[a+1],r)}else t[r+1]=Wu(a,0),0!==a&&(t[a+1]=Lh(t[a+1],r)),a=r;else t[r+1]=Wu(u,0),0===a?a=r:t[u+1]=Lh(t[u+1],r),u=r;h&&(t[r+1]=Fh(t[r+1])),hb(t,m,r,!0),hb(t,m,r,!1),function(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&aa(o,e)>=0&&(n[r+1]=Vh(n[r+1]))}(e,m,t,r,o),s=Wu(a,u),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}(o,t,s,r),e!==Ve&&In(i,s,e)&&function(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,h=u[a+1];id(function(t){return 1==(1&t)}(h)?Db(u,e,n,i,Qi(h),s):void 0)||(id(o)||function(t){return 2==(2&t)}(h)&&(o=Db(u,null,n,i,a,s)),function(t,e,n,r,i){const o=ft(t);if(e)i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r);else{let s=-1===r.indexOf("-")?void 0:lr.DashCase;if(null==i)o?t.removeStyle(n,r,s):n.style.removeProperty(r);else{const a="string"==typeof i&&i.endsWith("!important");a&&(i=i.slice(0,-10),s|=lr.Important),o?t.setStyle(n,r,i,s):n.style.setProperty(r,i,a?"important":"")}}}(r,s,Ks(Gt(),n),i,o))}(o,o.data[Gt()],i,i[11],t,i[s+1]=function(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=Ae(cr(t)))),t}(e,n),r,s)}function mp(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=Kc(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Kc(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),ar(t,s,!!n||e[++o]))}return void 0===t?null:t}function Db(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const u=t[i],h=Array.isArray(u),m=h?u[1]:u,E=null===m;let k=n[i+1];k===Ve&&(k=E?Pe:void 0);let N=E?lh(k,r):m===r?k:void 0;if(h&&!id(N)&&(N=lh(u,r)),id(N)&&(a=N,s))return a;const H=t[i+1];i=s?$r(H):Qi(H)}if(null!==e){let u=o?e.residualClasses:e.residualStyles;null!=u&&(a=lh(u,r))}return a}function id(t){return void 0!==t}function Wt(t,e=""){const n=le(),r=Ye(),i=t+20,o=r.firstCreatePass?ga(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return ft(t)?t.createText(e):t.createTextNode(e)}(n[11],e);zu(r,n,s,o),br(o,!1)}function od(t){return ps("",t,""),od}function ps(t,e,n){const r=le(),i=Ea(r,t,e,n);return i!==Ve&&Ji(r,Gt(),i),ps}function Jc(t,e,n,r,i){const o=le(),s=function(t,e,n,r,i,o){const a=ds(t,or(),n,i);return jr(2),a?e+fe(n)+r+fe(i)+o:Ve}(o,t,e,n,r,i);return s!==Ve&&Ji(o,Gt(),s),Jc}function yp(t,e,n,r,i,o,s){const a=le(),u=Sa(a,t,e,n,r,i,o,s);return u!==Ve&&Ji(a,Gt(),u),yp}const gs=void 0;var fx=["en",[["a","p"],["AM","PM"],gs],[["AM","PM"],gs,gs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],gs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],gs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",gs,"{1} 'at' {0}",gs],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){const e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let Oa={};function $b(t){return t in Oa||(Oa[t]=st.ng&&st.ng.common&&st.ng.common.locales&&st.ng.common.locales[t]),Oa[t]}var _e=(()=>((_e=_e||{})[_e.LocaleId=0]="LocaleId",_e[_e.DayPeriodsFormat=1]="DayPeriodsFormat",_e[_e.DayPeriodsStandalone=2]="DayPeriodsStandalone",_e[_e.DaysFormat=3]="DaysFormat",_e[_e.DaysStandalone=4]="DaysStandalone",_e[_e.MonthsFormat=5]="MonthsFormat",_e[_e.MonthsStandalone=6]="MonthsStandalone",_e[_e.Eras=7]="Eras",_e[_e.FirstDayOfWeek=8]="FirstDayOfWeek",_e[_e.WeekendRange=9]="WeekendRange",_e[_e.DateFormat=10]="DateFormat",_e[_e.TimeFormat=11]="TimeFormat",_e[_e.DateTimeFormat=12]="DateTimeFormat",_e[_e.NumberSymbols=13]="NumberSymbols",_e[_e.NumberFormats=14]="NumberFormats",_e[_e.CurrencyCode=15]="CurrencyCode",_e[_e.CurrencySymbol=16]="CurrencySymbol",_e[_e.CurrencyName=17]="CurrencyName",_e[_e.Currencies=18]="Currencies",_e[_e.Directionality=19]="Directionality",_e[_e.PluralCase=20]="PluralCase",_e[_e.ExtraData=21]="ExtraData",_e))();const sd="en-US";let zb=sd;function _p(t){cn(t,"Expected localeId to be defined"),"string"==typeof t&&(zb=t.toLowerCase().replace(/_/g,"-"))}function wp(t,e,n,r,i){if(t=be(t),Array.isArray(t))for(let o=0;o<t.length;o++)wp(t[o],e,n,r,i);else{const o=Ye(),s=le();let a=ba(t)?t:be(t.provide),u=f_(t);const h=zt(),m=1048575&h.providerIndexes,E=h.directiveStart,k=h.providerIndexes>>20;if(ba(t)||!t.multi){const N=new w(u,i,ce),H=Dp(a,e,i?m:m+k,E);-1===H?(Mu(Tc(h,s),o,a),Ep(o,t,e.length),e.push(a),h.directiveStart++,h.directiveEnd++,i&&(h.providerIndexes+=1048576),n.push(N),s.push(N)):(n[H]=N,s[H]=N)}else{const N=Dp(a,e,m+k,E),H=Dp(a,e,m,m+k),Z=N>=0&&n[N],K=H>=0&&n[H];if(i&&!K||!i&&!Z){Mu(Tc(h,s),o,a);const ae=function(t,e,n,r,i){const o=new w(t,n,ce);return o.multi=[],o.index=e,o.componentProviders=0,pC(o,i,r&&!n),o}(i?lR:cR,n.length,i,r,u);!i&&K&&(n[H].providerFactory=ae),Ep(o,t,e.length,0),e.push(a),h.directiveStart++,h.directiveEnd++,i&&(h.providerIndexes+=1048576),n.push(ae),s.push(ae)}else Ep(o,t,N>-1?N:H,pC(n[i?H:N],u,!i&&r));!i&&r&&K&&n[H].componentProviders++}}}function Ep(t,e,n,r){const i=ba(e);if(i||function(t){return!!t.useClass}(e)){const s=(e.useClass||e).prototype.ngOnDestroy;if(s){const a=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const u=a.indexOf(n);-1===u?a.push(n,[r,s]):a[u+1].push(r,s)}else a.push(n,s)}}}function pC(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Dp(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function cR(t,e,n,r){return Sp(this.multi,[])}function lR(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=Ic(n,n[1],this.providerFactory.index,r);o=a.slice(0,s),Sp(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],Sp(i,o);return o}function Sp(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function At(t,e=[]){return n=>{n.providersResolver=(r,i)=>function(t,e,n){const r=Ye();if(r.firstCreatePass){const i=ir(t);wp(n,r.data,r.blueprint,i,!0),wp(e,r.data,r.blueprint,i,!1)}}(r,i?i(t):t,e)}}class gC{}const yC="ngComponent";class fR{resolveComponentFactory(e){throw function(t){const e=Error(`No component factory found for ${Ae(t)}. Did you add it to @NgModule.entryComponents?`);return e[yC]=t,e}(e)}}let ms=(()=>{class t{}return t.NULL=new fR,t})();function dd(...t){}function Na(t,e){return new fn(Ot(t,e))}const gR=function(){return Na(zt(),le())};let fn=(()=>{class t{constructor(n){this.nativeElement=n}}return t.__NG_ELEMENT_ID__=gR,t})();class fd{}let Zi=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>yR(),t})();const yR=function(){const t=le(),n=En(zt().index,t);return function(t){return t[11]}(Ln(n)?n:t)};let Ip=(()=>{class t{}return t.\u0275prov=Se({token:t,providedIn:"root",factory:()=>null}),t})();class nl{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const _C=new nl("12.2.9");class bC{constructor(){}supports(e){return qc(e)}create(e){return new CR(e)}}const bR=(t,e)=>e;class CR{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||bR}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){const s=!r||n&&n.currentIndex<wC(r,i,o)?n:r,a=wC(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,null==s.previousIndex)i++;else{o||(o=[]);const h=a-i,m=u-i;if(h!=m){for(let k=0;k<h;k++){const N=k<o.length?o[k]:o[k]=0,H=N+k;m<=H&&H<h&&(o[k]=N+1)}o[s.previousIndex]=m-h}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!qc(e))throw new Error(`Error trying to diff '${Ae(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,o,s,n=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)):(n=this._mismatch(n,o,s,a),r=!0),n=n._next}else i=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Ca()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(e,a=>{s=this._trackByFn(i,a),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,s,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new wR(n,r),o,i),e}_verifyReinsertion(e,n,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,o=e._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){const i=null===n?this._itHead:n._next;return e._next=i,e._prev=n,null===i?this._itTail=e:i._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new CC),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,r=e._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new CC),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class wR{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ER{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const n=e._prevDup,r=e._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class CC{constructor(){this.map=new Map}put(e){const n=e.trackById;let r=this.map.get(n);r||(r=new ER,this.map.set(n,r)),r.add(e)}get(e,n){const i=this.map.get(e);return i?i.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function wC(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class EC{constructor(){}supports(e){return e instanceof Map||lp(e)}create(){return new DR}}class DR{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let n;for(n=this._mapHead;null!==n;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;null!==n;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}diff(e){if(e){if(!(e instanceof Map||lp(e)))throw new Error(`Error trying to diff '${Ae(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(n&&n.key===i)this._maybeAddToChanges(n,r),this._appendAfter=n,n=n._next;else{const o=this._getOrCreateRecordForKey(i,r);n=this._insertBeforeOrAppend(n,o)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){const r=e._prev;return n._next=e,n._prev=r,e._prev=n,r&&(r._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,n);const o=i._prev,s=i._next;return o&&(o._next=s),s&&(s._prev=o),i._next=null,i._prev=null,i}const r=new SR(e);return this._records.set(e,r),r.currentValue=n,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(r=>n(e[r],r))}}class SR{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function DC(){return new rl([new bC])}let rl=(()=>{class t{constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||DC()),deps:[[t,new Eo,new Qn]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new Error(`Cannot find a differ supporting object '${n}' of type '${function(t){return t.name||typeof t}(n)}'`)}}return t.\u0275prov=Se({token:t,providedIn:"root",factory:DC}),t})();function SC(){return new Fa([new EC])}let Fa=(()=>{class t{constructor(n){this.factories=n}static create(n,r){if(r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||SC()),deps:[[t,new Eo,new Qn]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(r)return r;throw new Error(`Cannot find a differ supporting object '${n}'`)}}return t.\u0275prov=Se({token:t,providedIn:"root",factory:SC}),t})();function hd(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(Xe(o)),Wn(o))for(let a=10;a<o.length;a++){const u=o[a],h=u[1].firstChild;null!==h&&hd(u[1],u,h,r)}const s=n.type;if(8&s)hd(t,e,n.child,r);else if(32&s){const a=Sh(n,e);let u;for(;u=a();)r.push(u)}else if(16&s){const a=Ev(e,n);if(Array.isArray(a))r.push(...a);else{const u=Bc(e[16]);hd(u[1],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}class il{constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,n=e[1];return hd(n,e,n.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(Wn(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(xh(e,r),ss(n,r))}this._attachedToViewContainer=!1}pv(this._lView[1],this._lView)}onDestroy(e){!function(t,e,n,r){const i=i_(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&o_(t).push(r,i.length-1))}(this._lView[1],this._lView,null,e)}markForCheck(){Jh(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Zh(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Xs(!0);try{Zh(t,e,n)}finally{Xs(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function(t,e){Uc(t,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}class IR extends il{constructor(e){super(e),this._view=e}detectChanges(){r_(this._view)}checkNoChanges(){!function(t){Xs(!0);try{r_(t)}finally{Xs(!1)}}(this._view)}get context(){return null}}const MR=function(t){return function(t,e,n){if(Xo(t)&&!n){const r=En(t.index,e);return new il(r,r)}return 47&t.type?new il(e[16],e):null}(zt(),le(),16==(16&t))};let Pp=(()=>{class t{}return t.__NG_ELEMENT_ID__=MR,t})();const AR=[new EC],kR=new rl([new bC]),NR=new Fa(AR),LR=function(){return function(t,e){return 4&t.type?new jR(e,t,Na(t,e)):null}(zt(),le())};let eo=(()=>{class t{}return t.__NG_ELEMENT_ID__=LR,t})();const VR=eo,jR=class extends VR{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}createEmbeddedView(e){const n=this._declarationTContainer.tViews,r=Hc(this._declarationLView,n,e,16,null,n.declTNode,null,null,null,null);r[17]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[19];return null!==o&&(r[19]=o.createEmbeddedView(n)),$c(n,r,e),new il(r)}};class Di{}class TC{}const HR=function(){return function(t,e){let n;const r=e[t.index];if(Wn(r))n=r;else{let i;if(8&t.type)i=Xe(r);else{const o=e[11];i=o.createComment("");const s=Ot(t,e);us(o,$u(o,s),i,function(t,e){return ft(t)?t.nextSibling(e):e.nextSibling}(o,s),!1)}e[t.index]=n=n_(r,e,i,t),Ku(e,n)}return new IC(n,t,e)}(zt(),le())};let Qr=(()=>{class t{}return t.__NG_ELEMENT_ID__=HR,t})();const zR=Qr,IC=class extends zR{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Na(this._hostTNode,this._hostLView)}get injector(){return new ra(this._hostTNode,this._hostLView)}get parentInjector(){const e=Pu(this._hostTNode,this._hostLView);if(it(e)){const n=tt(e,this._hostLView),r=at(e);return new ra(n[1].data[r+8],n)}return new ra(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=PC(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,n,r){const i=e.createEmbeddedView(n||{});return this.insert(i,r),i}createComponent(e,n,r,i,o){const s=r||this.parentInjector;if(!o&&null==e.ngModule&&s){const u=s.get(Di,null);u&&(o=u)}const a=e.create(s,i,void 0,o);return this.insert(a.hostView,n),a}insert(e,n){const r=e._lView,i=r[1];if(function(t){return Wn(t[3])}(r)){const m=this.indexOf(e);if(-1!==m)this.detach(m);else{const E=r[3],k=new IC(E,E[6],E[3]);k.detach(k.indexOf(e))}}const o=this._adjustIndex(n),s=this._lContainer;!function(t,e,n,r){const i=10+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-10?(e[4]=n[i],Ou(n,10+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(i,r,s,o);const a=Oh(o,s),u=r[11],h=$u(u,s[7]);return null!==h&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,Uc(t,r,n,1,i,o)}(i,s[6],u,r,h,a),e.attachToViewContainerRef(),Ou(Mp(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=PC(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=xh(this._lContainer,n);r&&(ss(Mp(this._lContainer),n),pv(r[1],r))}detach(e){const n=this._adjustIndex(e,-1),r=xh(this._lContainer,n);return r&&null!=ss(Mp(this._lContainer),n)?new il(r):null}_adjustIndex(e,n=0){return null==e?this.length+n:e}};function PC(t){return t[8]}function Mp(t){return t[8]||(t[8]=[])}const Ba={};class QC extends ms{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=Vt(e);return new JC(n,this.ngModule)}}function KC(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const BA=new Ge("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>sv});class JC extends gC{constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function(t){return t.map(xI).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}get inputs(){return KC(this.componentDef.inputs)}get outputs(){return KC(this.componentDef.outputs)}create(e,n,r,i){const o=(i=i||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,Ba,i);return o!==Ba||r===Ba?o:e.get(n,r,i)}}}(e,i.injector):e,s=o.get(fd,pu),a=o.get(Ip,null),u=s.createRenderer(null,this.componentDef),h=this.componentDef.selectors[0][0]||"div",m=r?function(t,e,n){if(ft(t))return t.selectRootElement(e,n===Ut.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(u,r,this.componentDef.encapsulation):Mh(s.createRenderer(null,this.componentDef),h,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(h)),E=this.componentDef.onPush?576:528,k=function(t,e){return{components:[],scheduler:t||sv,clean:pP,playerHandler:e||null,flags:0}}(),N=Qu(0,null,null,1,0,null,null,null,null,null),H=Hc(null,N,k,E,null,null,s,u,a,o);let Z,K;qi(H);try{const ae=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const u=ga(s,20,2,"#host",null),h=u.mergedAttrs=e.hostAttrs;null!==h&&(Ju(u,h,!0),null!==t&&(ge(i,t,h),null!==u.classes&&Nh(i,t,u.classes),null!==u.styles&&Tv(i,t,u.styles)));const m=r.createRenderer(t,e),E=Hc(n,Gv(e),null,e.onPush?64:16,n[20],u,r,m,o||null,null);return s.firstCreatePass&&(Mu(Tc(u,n),s,e.type),Zv(s,u),e_(u,n.length,1)),Ku(n,E),n[20]=E}(m,this.componentDef,H,s,u);if(m)if(r)ge(u,m,["ng-version",_C.full]);else{const{attrs:re,classes:ve}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!Hr(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);re&&ge(u,m,re),ve&&ve.length>0&&Nh(u,m,ve.join(" "))}if(K=Js(N,20),void 0!==n){const re=K.projection=[];for(let ve=0;ve<this.ngContentSelectors.length;ve++){const Ie=n[ve];re.push(null!=Ie?Array.from(Ie):null)}}Z=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=zt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),t_(t,r,e,ma(t,e,1,null),n));const i=Ic(e,t,r.directiveStart,r);Tn(i,e);const o=Ot(r,e);return o&&Tn(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(u=>u(s,e)),e.contentQueries){const u=zt();e.contentQueries(1,s,u.directiveStart)}const a=zt();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(Ur(a.index),Jv(n[1],a,0,a.directiveStart,a.directiveEnd,e),Xv(e,s)),s}(ae,this.componentDef,H,k,[BP]),$c(N,H,null)}finally{ta()}return new $A(this.componentType,Z,Na(K,H),H,K)}}class $A extends class{}{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.instance=n,this.hostView=this.changeDetectorRef=new IR(i),this.componentType=e}get injector(){return new ra(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}const Ua=new Map;class WA extends Di{constructor(e,n){super(),this._parent=n,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new QC(this);const r=kn(e),i=function(t){return t[js]||null}(e);i&&_p(i),this._bootstrapComponents=_i(r.bootstrap),this._r3Injector=d_(e,n,[{provide:Di,useValue:this},{provide:ms,useValue:this.componentFactoryResolver}],Ae(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,n=ht.THROW_IF_NOT_FOUND,r=Te.Default){return e===ht||e===Di||e===va?this:this._r3Injector.get(e,n,r)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Hp extends TC{constructor(e){super(),this.moduleType=e,null!==kn(e)&&function(t){const e=new Set;!function n(r){const i=kn(r,!0),o=i.id;null!==o&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${Ae(e)} vs ${Ae(e.name)}`)}(o,Ua.get(o),r),Ua.set(o,r));const s=_i(i.imports);for(const a of s)e.has(a)||(e.add(a),n(a))}(t)}(e)}create(e){return new WA(this.moduleType,e)}}function $p(t){return e=>{setTimeout(t,void 0,e)}}const rn=class extends z{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){var i,o,s;let a=e,u=n||(()=>null),h=r;if(e&&"object"==typeof e){const E=e;a=null===(i=E.next)||void 0===i?void 0:i.bind(E),u=null===(o=E.error)||void 0===o?void 0:o.bind(E),h=null===(s=E.complete)||void 0===s?void 0:s.bind(E)}this.__isAsync&&(u=$p(u),a&&(a=$p(a)),h&&(h=$p(h)));const m=super.subscribe({next:a,error:u,complete:h});return e instanceof L&&e.add(m),m}};Symbol;const ml=new Ge("Application Initializer");let $a=(()=>{class t{constructor(n){this.appInits=n,this.resolve=dd,this.reject=dd,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const n=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const o=this.appInits[i]();if(Qc(o))n.push(o);else if(td(o)){const s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});n.push(s)}}Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}}return t.\u0275fac=function(n){return new(n||t)(he(ml,8))},t.\u0275prov=Se({token:t,factory:t.\u0275fac}),t})();const yl=new Ge("AppId"),YO={provide:yl,useFactory:function(){return`${rg()}${rg()}${rg()}`},deps:[]};function rg(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const I0=new Ge("Platform Initializer"),wd=new Ge("Platform ID"),P0=new Ge("appBootstrapListener");let Ed=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Se({token:t,factory:t.\u0275fac}),t})();const Io=new Ge("LocaleId"),M0=new Ge("DefaultCurrencyCode");class KO{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}const ig=function(t){return new Hp(t)},JO=ig,XO=function(t){return Promise.resolve(ig(t))},x0=function(t){const e=ig(t),r=_i(kn(t).declarations).reduce((i,o)=>{const s=Vt(o);return s&&i.push(new JC(s)),i},[]);return new KO(e,r)},ZO=x0,e1=function(t){return Promise.resolve(x0(t))};let _s=(()=>{class t{constructor(){this.compileModuleSync=JO,this.compileModuleAsync=XO,this.compileModuleAndAllComponentsSync=ZO,this.compileModuleAndAllComponentsAsync=e1}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Se({token:t,factory:t.\u0275fac}),t})();const r1=(()=>Promise.resolve(0))();function og(t){"undefined"==typeof Zone?r1.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Qt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new rn(!1),this.onMicrotaskEmpty=new rn(!1),this.onStable=new rn(!1),this.onError=new rn(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function(){let t=st.requestAnimationFrame,e=st.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(st,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,ag(t),t.isCheckStableRunning=!0,sg(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),ag(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return R0(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),A0(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return R0(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),A0(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&("microTask"==o.change?(t._hasPendingMicrotasks=o.microTask,ag(t),sg(t)):"macroTask"==o.change&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Qt.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Qt.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,o1,dd,dd);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const o1={};function sg(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function ag(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function R0(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function A0(t){t._nesting--,sg(t)}class c1{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new rn,this.onMicrotaskEmpty=new rn,this.onStable=new rn,this.onError=new rn}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}let cg=(()=>{class t{constructor(n){this._ngZone=n,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Qt.assertNotInAngularZone(),og(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())og(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:o,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(n,r,i){return[]}}return t.\u0275fac=function(n){return new(n||t)(he(Qt))},t.\u0275prov=Se({token:t,factory:t.\u0275fac}),t})(),O0=(()=>{class t{constructor(){this._applications=new Map,lg.addToWindow(this)}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return lg.findTestabilityInTree(this,n,r)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Se({token:t,factory:t.\u0275fac}),t})();class l1{addToWindow(e){}findTestabilityInTree(e,n,r){return null}}let lg=new l1,k0=!0,N0=!1;let Xr;const L0=new Ge("AllowMultipleToken");class ug{constructor(e,n){this.name=e,this.token=n}}function V0(t,e,n=[]){const r=`Platform: ${e}`,i=new Ge(r);return(o=[])=>{let s=j0();if(!s||s.injector.get(L0,!1))if(t)t(n.concat(o).concat({provide:i,useValue:!0}));else{const a=n.concat(o).concat({provide:i,useValue:!0},{provide:zc,useValue:"platform"});!function(t){if(Xr&&!Xr.destroyed&&!Xr.injector.get(L0,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Xr=t.get(B0);const e=t.get(I0,null);e&&e.forEach(n=>n())}(ht.create({providers:a,name:r}))}return function(t){const e=j0();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function j0(){return Xr&&!Xr.destroyed?Xr:null}let B0=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const a=function(t,e){let n;return n="noop"===t?new c1:("zone.js"===t?void 0:t)||new Qt({enableLongStackTrace:(N0=!0,k0),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(r?r.ngZone:void 0,{ngZoneEventCoalescing:r&&r.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:r&&r.ngZoneRunCoalescing||!1}),u=[{provide:Qt,useValue:a}];return a.run(()=>{const h=ht.create({providers:u,parent:this.injector,name:n.moduleType.name}),m=n.create(h),E=m.injector.get(ls,null);if(!E)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return a.runOutsideAngular(()=>{const k=a.onError.subscribe({next:N=>{E.handleError(N)}});m.onDestroy(()=>{dg(this._modules,m),k.unsubscribe()})}),function(t,e,n){try{const r=n();return Qc(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(E,a,()=>{const k=m.injector.get($a);return k.runInitializers(),k.donePromise.then(()=>(_p(m.injector.get(Io,sd)||sd),this._moduleDoBootstrap(m),m))})})}bootstrapModule(n,r=[]){const i=U0({},r);return function(t,e,n){const r=new Hp(n);return Promise.resolve(r)}(0,0,n).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(n){const r=n.injector.get(za);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new Error(`The module ${Ae(n.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(n=>n.destroy()),this._destroyListeners.forEach(n=>n()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(n){return new(n||t)(he(ht))},t.\u0275prov=Se({token:t,factory:t.\u0275fac}),t})();function U0(t,e){return Array.isArray(e)?e.reduce(U0,t):Object.assign(Object.assign({},t),e)}let za=(()=>{class t{constructor(n,r,i,o,s){this._zone=n,this._injector=r,this._exceptionHandler=i,this._componentFactoryResolver=o,this._initStatus=s,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const a=new R(h=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{h.next(this._stable),h.complete()})}),u=new R(h=>{let m;this._zone.runOutsideAngular(()=>{m=this._zone.onStable.subscribe(()=>{Qt.assertNotInAngularZone(),og(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,h.next(!0))})})});const E=this._zone.onUnstable.subscribe(()=>{Qt.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{h.next(!1)}))});return()=>{m.unsubscribe(),E.unsubscribe()}});this.isStable=function(...t){let e=Number.POSITIVE_INFINITY,n=null,r=t[t.length-1];return me(r)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof r&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof R?t[0]:Bo(e)(ho(t,n))}(a,u.pipe(t=>Uo()(function(t,e){return function(r){let i;i="function"==typeof t?t:function(){return t};const o=Object.create(r,Wl);return o.source=r,o.subjectFactory=i,o}}(Of)(t))))}bootstrap(n,r){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let i;i=n instanceof gC?n:this._componentFactoryResolver.resolveComponentFactory(n),this.componentTypes.push(i.componentType);const o=function(t){return t.isBoundToModule}(i)?void 0:this._injector.get(Di),a=i.create(ht.NULL,[],r||i.selector,o),u=a.location.nativeElement,h=a.injector.get(cg,null),m=h&&a.injector.get(O0);return h&&m&&m.registerApplication(u,h),a.onDestroy(()=>{this.detachView(a.hostView),dg(this.components,a),m&&m.unregisterApplication(u)}),this._loadComponent(a),a}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;dg(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(P0,[]).concat(this._bootstrapListeners).forEach(i=>i(n))}ngOnDestroy(){this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(n){return new(n||t)(he(Qt),he(ht),he(ls),he(ms),he($a))},t.\u0275prov=Se({token:t,factory:t.\u0275fac}),t})();function dg(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Sd{}class D1{}const S1={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let T1=(()=>{class t{constructor(n,r){this._compiler=n,this._config=r||S1}load(n){return this.loadAndCompile(n)}loadAndCompile(n){let[r,i]=n.split("#");return void 0===i&&(i="default"),Fe(255)(r).then(o=>o[i]).then(o=>G0(o,r,i)).then(o=>this._compiler.compileModuleAsync(o))}loadFactory(n){let[r,i]=n.split("#"),o="NgFactory";return void 0===i&&(i="default",o=""),Fe(255)(this._config.factoryPathPrefix+r+this._config.factoryPathSuffix).then(s=>s[i+o]).then(s=>G0(s,r,i))}}return t.\u0275fac=function(n){return new(n||t)(he(_s),he(D1,8))},t.\u0275prov=Se({token:t,factory:t.\u0275fac}),t})();function G0(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const F1=V0(null,"core",[{provide:wd,useValue:"unknown"},{provide:B0,deps:[ht]},{provide:O0,deps:[]},{provide:Ed,deps:[]}]),U1=[{provide:za,useClass:za,deps:[Qt,ht,ls,ms,$a]},{provide:BA,deps:[Qt],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(n){e.push(n)}}},{provide:$a,useClass:$a,deps:[[new Qn,ml]]},{provide:_s,useClass:_s,deps:[]},YO,{provide:rl,useFactory:function(){return kR},deps:[]},{provide:Fa,useFactory:function(){return NR},deps:[]},{provide:Io,useFactory:function(t){return _p(t=t||"undefined"!=typeof $localize&&$localize.locale||sd),t},deps:[[new ua(Io),new Qn,new Eo]]},{provide:M0,useValue:"USD"}];let $1=(()=>{class t{constructor(n){}}return t.\u0275fac=function(n){return new(n||t)(he(za))},t.\u0275mod=Cn({type:t}),t.\u0275inj=Lt({providers:U1}),t})(),Nd=null;function Si(){return Nd}const gn=new Ge("DocumentToken");let Mo=(()=>{class t{historyGo(n){throw new Error("Not implemented")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Se({factory:Hk,token:t,providedIn:"platform"}),t})();function Hk(){return he(gw)}const $k=new Ge("Location Initialized");let gw=(()=>{class t extends Mo{constructor(n){super(),this._doc=n,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Si().getBaseHref(this._doc)}onPopState(n){const r=Si().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=Si().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(n){this.location.pathname=n}pushState(n,r,i){mw()?this._history.pushState(n,r,i):this.location.hash=i}replaceState(n,r,i){mw()?this._history.replaceState(n,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}}return t.\u0275fac=function(n){return new(n||t)(he(gn))},t.\u0275prov=Se({factory:zk,token:t,providedIn:"platform"}),t})();function mw(){return!!window.history.pushState}function zk(){return new gw(he(gn))}function Tg(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function yw(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function no(t){return t&&"?"!==t[0]?"?"+t:t}let qa=(()=>{class t{historyGo(n){throw new Error("Not implemented")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Se({factory:Gk,token:t,providedIn:"root"}),t})();function Gk(t){const e=he(gn).location;return new vw(he(Mo),e&&e.origin||"")}const Ya=new Ge("appBaseHref");let vw=(()=>{class t extends qa{constructor(n,r){if(super(),this._platformLocation=n,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Tg(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+no(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){const s=this.prepareExternalUrl(i+no(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){const s=this.prepareExternalUrl(i+no(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(n=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,n)}}return t.\u0275fac=function(n){return new(n||t)(he(Mo),he(Ya,8))},t.\u0275prov=Se({token:t,factory:t.\u0275fac}),t})(),Wk=(()=>{class t extends qa{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=Tg(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+no(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+no(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(n=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,n)}}return t.\u0275fac=function(n){return new(n||t)(he(Mo),he(Ya,8))},t.\u0275prov=Se({token:t,factory:t.\u0275fac}),t})(),Fd=(()=>{class t{constructor(n,r){this._subject=new rn,this._urlChangeListeners=[],this._platformStrategy=n;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=yw(_w(i)),this._platformStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}path(n=!1){return this.normalize(this._platformStrategy.path(n))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+no(r))}normalize(n){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,_w(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._platformStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._platformStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+no(r)),i)}replaceState(n,r="",i=null){this._platformStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+no(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(n=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,n)}onUrlChange(n){this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}}return t.\u0275fac=function(n){return new(n||t)(he(qa),he(Mo))},t.normalizeQueryParams=no,t.joinWithSlash=Tg,t.stripTrailingSlash=yw,t.\u0275prov=Se({factory:qk,token:t,providedIn:"root"}),t})();function qk(){return new Fd(he(qa),he(Mo))}function _w(t){return t.replace(/\/index.html$/,"")}var Kt=(()=>((Kt=Kt||{})[Kt.Zero=0]="Zero",Kt[Kt.One=1]="One",Kt[Kt.Two=2]="Two",Kt[Kt.Few=3]="Few",Kt[Kt.Many=4]="Many",Kt[Kt.Other=5]="Other",Kt))();const tN=function(t){return function(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=$b(e);if(n)return n;const r=e.split("-")[0];if(n=$b(r),n)return n;if("en"===r)return fx;throw new Error(`Missing locale data for the locale "${t}".`)}(t)[_e.PluralCase]};class Wd{}let xN=(()=>{class t extends Wd{constructor(n){super(),this.locale=n}getPluralCategory(n,r){switch(tN(r||this.locale)(n)){case Kt.Zero:return"zero";case Kt.One:return"one";case Kt.Two:return"two";case Kt.Few:return"few";case Kt.Many:return"many";default:return"other"}}}return t.\u0275fac=function(n){return new(n||t)(he(Io))},t.\u0275prov=Se({token:t,factory:t.\u0275fac}),t})();function Pw(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,o]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}class ON{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let qd=(()=>{class t{constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(r){throw new Error(`Cannot find a differ supporting object '${n}' of type '${function(t){return t.name||typeof t}(n)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=[];n.forEachOperation((i,o,s)=>{if(null==i.previousIndex){const a=this._viewContainer.createEmbeddedView(this._template,new ON(null,this._ngForOf,-1,-1),null===s?void 0:s),u=new Mw(i,a);r.push(u)}else if(null==s)this._viewContainer.remove(null===o?void 0:o);else if(null!==o){const a=this._viewContainer.get(o);this._viewContainer.move(a,s);const u=new Mw(i,a);r.push(u)}});for(let i=0;i<r.length;i++)this._perViewChange(r[i].view,r[i].record);for(let i=0,o=this._viewContainer.length;i<o;i++){const s=this._viewContainer.get(i);s.context.index=i,s.context.count=o,s.context.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{this._viewContainer.get(i.currentIndex).context.$implicit=i.item})}_perViewChange(n,r){n.context.$implicit=r.item}static ngTemplateContextGuard(n,r){return!0}}return t.\u0275fac=function(n){return new(n||t)(ce(Qr),ce(eo),ce(rl))},t.\u0275dir=Me({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class Mw{constructor(e,n){this.record=e,this.view=n}}let Yd=(()=>{class t{constructor(n,r){this._viewContainer=n,this._context=new NN,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){xw("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){xw("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}}return t.\u0275fac=function(n){return new(n||t)(ce(Qr),ce(eo))},t.\u0275dir=Me({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class NN{constructor(){this.$implicit=null,this.ngIf=null}}function xw(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Ae(e)}'.`)}let aF=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Cn({type:t}),t.\u0275inj=Lt({providers:[{provide:Wd,useClass:xN}]}),t})();let kw=(()=>{class t{}return t.\u0275prov=Se({token:t,providedIn:"root",factory:()=>new dF(he(gn),window)}),t})();class dF{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const n=function(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}(this.document,e);n&&(this.scrollToElement(n),this.attemptFocus(n))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const n=this.window.history;n&&n.scrollRestoration&&(n.scrollRestoration=e)}}scrollToElement(e){const n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Nw(this.window.history)||Nw(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Nw(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class Fw{}class jg extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function(t){Nd||(Nd=t)}(new jg)}onAndCancel(e,n,r){return e.addEventListener(n,r,!1),()=>{e.removeEventListener(n,r,!1)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=(Dl=Dl||document.querySelector("base"),Dl?Dl.getAttribute("href"):null);return null==n?null:function(t){Qd=Qd||document.createElement("a"),Qd.setAttribute("href",t);const e=Qd.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){Dl=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Pw(document.cookie,e)}}let Qd,Dl=null;const Lw=new Ge("TRANSITION_ID"),yF=[{provide:ml,useFactory:function(t,e,n){return()=>{n.get($a).donePromise.then(()=>{const r=Si(),i=e.querySelectorAll(`style[ng-transition="${t}"]`);for(let o=0;o<i.length;o++)r.remove(i[o])})}},deps:[Lw,gn,ht],multi:!0}];class Bg{static init(){!function(t){lg=t}(new Bg)}addToWindow(e){st.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new Error("Could not find testability for element.");return o},st.getAllAngularTestabilities=()=>e.getAllTestabilities(),st.getAllAngularRootElements=()=>e.getAllRootElements(),st.frameworkStabilizers||(st.frameworkStabilizers=[]),st.frameworkStabilizers.push(r=>{const i=st.getAllAngularTestabilities();let o=i.length,s=!1;const a=function(u){s=s||u,o--,0==o&&r(s)};i.forEach(function(u){u.whenStable(a)})})}findTestabilityInTree(e,n,r){if(null==n)return null;const i=e.getTestability(n);return null!=i?i:r?Si().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null}}let vF=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Se({token:t,factory:t.\u0275fac}),t})();const Sl=new Ge("EventManagerPlugins");let Jd=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>i.manager=this),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}addGlobalEventListener(n,r,i){return this._findPluginFor(r).addGlobalEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){const r=this._eventNameToPlugin.get(n);if(r)return r;const i=this._plugins;for(let o=0;o<i.length;o++){const s=i[o];if(s.supports(n))return this._eventNameToPlugin.set(n,s),s}throw new Error(`No event manager plugin found for event ${n}`)}}return t.\u0275fac=function(n){return new(n||t)(he(Sl),he(Qt))},t.\u0275prov=Se({token:t,factory:t.\u0275fac}),t})();class Ug{constructor(e){this._doc=e}addGlobalEventListener(e,n,r){const i=Si().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${n}`);return this.addEventListener(i,n,r)}}let jw=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(n){const r=new Set;n.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(n){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Se({token:t,factory:t.\u0275fac}),t})(),Tl=(()=>{class t extends jw{constructor(n){super(),this._doc=n,this._hostNodes=new Map,this._hostNodes.set(n.head,[])}_addStylesToHost(n,r,i){n.forEach(o=>{const s=this._doc.createElement("style");s.textContent=o,i.push(r.appendChild(s))})}addHost(n){const r=[];this._addStylesToHost(this._stylesSet,n,r),this._hostNodes.set(n,r)}removeHost(n){const r=this._hostNodes.get(n);r&&r.forEach(Bw),this._hostNodes.delete(n)}onStylesAdded(n){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(n,i,r)})}ngOnDestroy(){this._hostNodes.forEach(n=>n.forEach(Bw))}}return t.\u0275fac=function(n){return new(n||t)(he(gn))},t.\u0275prov=Se({token:t,factory:t.\u0275fac}),t})();function Bw(t){Si().remove(t)}const Hg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},$g=/%COMP%/g;function Xd(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Xd(t,i,n):(i=i.replace($g,t),n.push(i))}return n}function $w(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let zg=(()=>{class t{constructor(n,r,i){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Gg(n)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;switch(r.encapsulation){case Ut.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new OF(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(n),i}case 1:case Ut.ShadowDom:return new kF(this.eventManager,this.sharedStylesHost,n,r);default:if(!this.rendererByCompId.has(r.id)){const i=Xd(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(n){return new(n||t)(he(Jd),he(Tl),he(yl))},t.\u0275prov=Se({token:t,factory:t.\u0275fac}),t})();class Gg{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,n){return n?document.createElementNS(Hg[n]||n,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,n){e.appendChild(n)}insertBefore(e,n,r){e&&e.insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const o=Hg[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=Hg[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(lr.DashCase|lr.Important)?e.style.setProperty(n,r,i&lr.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&lr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e[n]=r}setValue(e,n){e.nodeValue=n}listen(e,n,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,n,$w(r)):this.eventManager.addEventListener(e,n,$w(r))}}class OF extends Gg{constructor(e,n,r,i){super(e),this.component=r;const o=Xd(i+"-"+r.id,r.styles,[]);n.addStyles(o),this.contentAttr=function(t){return"_ngcontent-%COMP%".replace($g,t)}(i+"-"+r.id),this.hostAttr=function(t){return"_nghost-%COMP%".replace($g,t)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}class kF extends Gg{constructor(e,n,r,i){super(e),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=Xd(i.id,i.styles,[]);for(let s=0;s<o.length;s++){const a=document.createElement("style");a.textContent=o[s],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let NF=(()=>{class t extends Ug{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}}return t.\u0275fac=function(n){return new(n||t)(he(gn))},t.\u0275prov=Se({token:t,factory:t.\u0275fac}),t})();const Ww=["alt","control","meta","shift"],HF={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},qw={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},$F={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let zF=(()=>{class t extends Ug{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i){const o=t.parseEventName(r),s=t.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Si().onAndCancel(n,o.domEventName,s))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=t._normalizeKey(r.pop());let s="";if(Ww.forEach(u=>{const h=r.indexOf(u);h>-1&&(r.splice(h,1),s+=u+".")}),s+=o,0!=r.length||0===o.length)return null;const a={};return a.domEventName=i,a.fullKey=s,a}static getEventFullKey(n){let r="",i=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&qw.hasOwnProperty(e)&&(e=qw[e]))}return HF[e]||e}(n);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Ww.forEach(o=>{o!=i&&$F[o](n)&&(r+=o+".")}),r+=i,r}static eventCallback(n,r,i){return o=>{t.getEventFullKey(o)===n&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){switch(n){case"esc":return"escape";default:return n}}}return t.\u0275fac=function(n){return new(n||t)(he(gn))},t.\u0275prov=Se({token:t,factory:t.\u0275fac}),t})();const XF=V0(F1,"browser",[{provide:wd,useValue:"browser"},{provide:I0,useValue:function(){jg.makeCurrent(),Bg.init()},multi:!0},{provide:gn,useFactory:function(){return function(t){Qs=t}(document),document},deps:[]}]),ZF=[[],{provide:zc,useValue:"root"},{provide:ls,useFactory:function(){return new ls},deps:[]},{provide:Sl,useClass:NF,multi:!0,deps:[gn,Qt,wd]},{provide:Sl,useClass:zF,multi:!0,deps:[gn]},[],{provide:zg,useClass:zg,deps:[Jd,Tl,yl]},{provide:fd,useExisting:zg},{provide:jw,useExisting:Tl},{provide:Tl,useClass:Tl,deps:[gn]},{provide:cg,useClass:cg,deps:[Qt]},{provide:Jd,useClass:Jd,deps:[Sl,Qt]},{provide:Fw,useClass:vF,deps:[]},[]];let eL=(()=>{class t{constructor(n){if(n)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(n){return{ngModule:t,providers:[{provide:yl,useValue:n.appId},{provide:Lw,useExisting:yl},yF]}}}return t.\u0275fac=function(n){return new(n||t)(he(t,12))},t.\u0275mod=Cn({type:t}),t.\u0275inj=Lt({providers:ZF,imports:[aF,$1]}),t})();function Be(...t){let e=t[t.length-1];return me(e)?(t.pop(),Xn(t,e)):ho(t)}"undefined"!=typeof window&&window;class ri extends z{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return n&&!n.closed&&e.next(this._value),n}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Q;return this._value}next(e){super.next(this._value=e)}}class cL extends I{notifyNext(e,n,r,i,o){this.destination.next(n)}notifyError(e,n){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class lL extends I{constructor(e,n,r){super(),this.parent=e,this.outerValue=n,this.outerIndex=r,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function uL(t,e,n,r,i=new lL(t,n,r)){if(!i.closed)return e instanceof R?e.subscribe(i):gr(e)(i)}const Qw={};class fL{constructor(e){this.resultSelector=e}call(e,n){return n.subscribe(new hL(e,this.resultSelector))}}class hL extends cL{constructor(e,n){super(e),this.resultSelector=n,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(Qw),this.observables.push(e)}_complete(){const e=this.observables,n=e.length;if(0===n)this.destination.complete();else{this.active=n,this.toRespond=n;for(let r=0;r<n;r++)this.add(uL(this,e[r],void 0,r))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,n,r){const i=this.values,s=this.toRespond?i[r]===Qw?--this.toRespond:this.toRespond:0;i[r]=n,0===s&&(this.resultSelector?this._tryResultSelector(i):this.destination.next(i.slice()))}_tryResultSelector(e){let n;try{n=this.resultSelector.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(n)}}const Zd=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();function Kg(...t){return Bo(1)(Be(...t))}const Qa=new R(t=>t.complete());function ef(t){return t?function(t){return new R(e=>t.schedule(()=>e.complete()))}(t):Qa}function Kw(t){return new R(e=>{let n;try{n=t()}catch(i){return void e.error(i)}return(n?vt(n):ef()).subscribe(e)})}function io(t,e){return"function"==typeof e?n=>n.pipe(io((r,i)=>vt(t(r,i)).pipe(pe((o,s)=>e(r,o,i,s))))):n=>n.lift(new mL(t))}class mL{constructor(e){this.project=e}call(e,n){return n.subscribe(new yL(e,this.project))}}class yL extends oi{constructor(e,n){super(e),this.project=n,this.index=0}_next(e){let n;const r=this.index++;try{n=this.project(e,r)}catch(i){return void this.destination.error(i)}this._innerSub(n)}_innerSub(e){const n=this.innerSubscription;n&&n.unsubscribe();const r=new ii(this),i=this.destination;i.add(r),this.innerSubscription=Ri(e,r),this.innerSubscription!==r&&i.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}const Jw=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function Jg(t){return e=>0===t?ef():e.lift(new vL(t))}class vL{constructor(e){if(this.total=e,this.total<0)throw new Jw}call(e,n){return n.subscribe(new _L(e,this.total))}}class _L extends I{constructor(e,n){super(e),this.total=n,this.count=0}_next(e){const n=this.total,r=++this.count;r<=n&&(this.destination.next(e),r===n&&(this.destination.complete(),this.unsubscribe()))}}function Xw(...t){const e=t[t.length-1];return me(e)?(t.pop(),n=>Kg(t,n,e)):n=>Kg(t,n)}function Zw(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(i){return i.lift(new bL(t,e,n))}}class bL{constructor(e,n,r=!1){this.accumulator=e,this.seed=n,this.hasSeed=r}call(e,n){return n.subscribe(new CL(e,this.accumulator,this.seed,this.hasSeed))}}class CL extends I{constructor(e,n,r,i){super(e),this.accumulator=n,this._seed=r,this.hasSeed=i,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const n=this.index++;let r;try{r=this.accumulator(this.seed,e,n)}catch(i){this.destination.error(i)}this.seed=r,this.destination.next(r)}}function ws(t,e){return function(r){return r.lift(new wL(t,e))}}class wL{constructor(e,n){this.predicate=e,this.thisArg=n}call(e,n){return n.subscribe(new EL(e,this.predicate,this.thisArg))}}class EL extends I{constructor(e,n,r){super(e),this.predicate=n,this.thisArg=r,this.count=0}_next(e){let n;try{n=this.predicate.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}n&&this.destination.next(e)}}function Es(t){return function(n){const r=new DL(t),i=n.lift(r);return r.caught=i}}class DL{constructor(e){this.selector=e}call(e,n){return n.subscribe(new SL(e,this.selector,this.caught))}}class SL extends oi{constructor(e,n,r){super(e),this.selector=n,this.caught=r}error(e){if(!this.isStopped){let n;try{n=this.selector(e,this.caught)}catch(o){return void super.error(o)}this._unsubscribeAndRecycle();const r=new ii(this);this.add(r);const i=Ri(n,r);i!==r&&this.add(i)}}}function Ka(t,e){return Bt(t,e,1)}function Xg(t){return function(n){return 0===t?ef():n.lift(new TL(t))}}class TL{constructor(e){if(this.total=e,this.total<0)throw new Jw}call(e,n){return n.subscribe(new IL(e,this.total))}}class IL extends I{constructor(e,n){super(e),this.total=n,this.ring=new Array,this.count=0}_next(e){const n=this.ring,r=this.total,i=this.count++;n.length<r?n.push(e):n[i%r]=e}_complete(){const e=this.destination;let n=this.count;if(n>0){const r=this.count>=this.total?this.total:this.count,i=this.ring;for(let o=0;o<r;o++){const s=n++%r;e.next(i[s])}}e.complete()}}function eE(t=xL){return e=>e.lift(new PL(t))}class PL{constructor(e){this.errorFactory=e}call(e,n){return n.subscribe(new ML(e,this.errorFactory))}}class ML extends I{constructor(e,n){super(e),this.errorFactory=n,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(n){e=n}this.destination.error(e)}}}function xL(){return new Zd}function tE(t=null){return e=>e.lift(new RL(t))}class RL{constructor(e){this.defaultValue=e}call(e,n){return n.subscribe(new AL(e,this.defaultValue))}}class AL extends I{constructor(e,n){super(e),this.defaultValue=n,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function Ja(t,e){const n=arguments.length>=2;return r=>r.pipe(t?ws((i,o)=>t(i,o,r)):v,Jg(1),n?tE(e):eE(()=>new Zd))}function Ro(){}function fr(t,e,n){return function(i){return i.lift(new kL(t,e,n))}}class kL{constructor(e,n,r){this.nextOrObserver=e,this.error=n,this.complete=r}call(e,n){return n.subscribe(new NL(e,this.nextOrObserver,this.error,this.complete))}}class NL extends I{constructor(e,n,r,i){super(e),this._tapNext=Ro,this._tapError=Ro,this._tapComplete=Ro,this._tapError=r||Ro,this._tapComplete=i||Ro,se(n)?(this._context=this,this._tapNext=n):n&&(this._context=n,this._tapNext=n.next||Ro,this._tapError=n.error||Ro,this._tapComplete=n.complete||Ro)}_next(e){try{this._tapNext.call(this._context,e)}catch(n){return void this.destination.error(n)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(n){return void this.destination.error(n)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}class LL{constructor(e){this.callback=e}call(e,n){return n.subscribe(new VL(e,this.callback))}}class VL extends I{constructor(e,n){super(e),this.add(new L(n))}}class oo{constructor(e,n){this.id=e,this.url=n}}class Zg extends oo{constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Il extends oo{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class nE extends oo{constructor(e,n,r){super(e,n),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class jL extends oo{constructor(e,n,r){super(e,n),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class BL extends oo{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class UL extends oo{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class HL extends oo{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class $L extends oo{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zL extends oo{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rE{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class iE{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class GL{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class WL{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qL{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class YL{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class oE{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const qe="primary";class QL{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function Xa(t){return new QL(t)}const sE="ngNavigationCancelingError";function em(t){const e=Error("NavigationCancelingError: "+t);return e[sE]=!0,e}function JL(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const s=r[o],a=t[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Ti(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!aE(t[i],e[i]))return!1;return!0}function aE(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}return t===e}function cE(t){return Array.prototype.concat.apply([],t)}function lE(t){return t.length>0?t[t.length-1]:null}function _n(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function Ii(t){return td(t)?t:Qc(t)?vt(Promise.resolve(t)):Be(t)}const eV={exact:function fE(t,e,n){if(!Ss(t.segments,e.segments)||!tf(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!fE(t.children[r],e.children[r],n))return!1;return!0},subset:hE},uE={exact:function(t,e){return Ti(t,e)},subset:function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>aE(t[n],e[n]))},ignored:()=>!0};function dE(t,e,n){return eV[n.paths](t.root,e.root,n.matrixParams)&&uE[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function hE(t,e,n){return pE(t,e,e.segments,n)}function pE(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!(!Ss(i,n)||e.hasChildren()||!tf(i,n,r))}if(t.segments.length===n.length){if(!Ss(t.segments,n)||!tf(t.segments,n,r))return!1;for(const i in e.children)if(!t.children[i]||!hE(t.children[i],e.children[i],r))return!1;return!0}{const i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!!(Ss(t.segments,i)&&tf(t.segments,i,r)&&t.children[qe])&&pE(t.children[qe],e,o,r)}}function tf(t,e,n){return e.every((r,i)=>uE[n](t[i].parameters,r.parameters))}class Ds{constructor(e,n,r){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Xa(this.queryParams)),this._queryParamMap}toString(){return oV.serialize(this)}}class Ze{constructor(e,n){this.segments=e,this.children=n,this.parent=null,_n(n,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return nf(this)}}class Pl{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=Xa(this.parameters)),this._parameterMap}toString(){return vE(this)}}function Ss(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}class tm{}class gE{parse(e){const n=new pV(e);return new Ds(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){return`${`/${Ml(e.root,!0)}`}${function(t){const e=Object.keys(t).map(n=>{const r=t[n];return Array.isArray(r)?r.map(i=>`${rf(n)}=${rf(i)}`).join("&"):`${rf(n)}=${rf(r)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}(e.queryParams)}${"string"==typeof e.fragment?`#${function(t){return encodeURI(t)}(e.fragment)}`:""}`}}const oV=new gE;function nf(t){return t.segments.map(e=>vE(e)).join("/")}function Ml(t,e){if(!t.hasChildren())return nf(t);if(e){const n=t.children[qe]?Ml(t.children[qe],!1):"",r=[];return _n(t.children,(i,o)=>{o!==qe&&r.push(`${o}:${Ml(i,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function(t,e){let n=[];return _n(t.children,(r,i)=>{i===qe&&(n=n.concat(e(r,i)))}),_n(t.children,(r,i)=>{i!==qe&&(n=n.concat(e(r,i)))}),n}(t,(r,i)=>i===qe?[Ml(t.children[qe],!1)]:[`${i}:${Ml(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[qe]?`${nf(t)}/${n[0]}`:`${nf(t)}/(${n.join("//")})`}}function mE(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function rf(t){return mE(t).replace(/%3B/gi,";")}function nm(t){return mE(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function of(t){return decodeURIComponent(t)}function yE(t){return of(t.replace(/\+/g,"%20"))}function vE(t){return`${nm(t.path)}${function(t){return Object.keys(t).map(e=>`;${nm(e)}=${nm(t[e])}`).join("")}(t.parameters)}`}const lV=/^[^\/()?;=#]+/;function sf(t){const e=t.match(lV);return e?e[0]:""}const uV=/^[^=?&#]+/,fV=/^[^?&#]+/;class pV{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ze([],{}):new Ze([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[qe]=new Ze(e,n)),r}parseSegment(){const e=sf(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Pl(of(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=sf(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=sf(this.remaining);i&&(r=i,this.capture(r))}e[of(n)]=of(r)}parseQueryParam(e){const n=function(t){const e=t.match(uV);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const s=function(t){const e=t.match(fV);return e?e[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const i=yE(n),o=yE(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=sf(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let o;r.indexOf(":")>-1?(o=r.substr(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=qe);const s=this.parseChildren();n[o]=1===Object.keys(s).length?s[qe]:new Ze([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class _E{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=rm(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=rm(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=im(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return im(e,this._root).map(n=>n.value)}}function rm(t,e){if(t===e.value)return e;for(const n of e.children){const r=rm(t,n);if(r)return r}return null}function im(t,e){if(t===e.value)return[e];for(const n of e.children){const r=im(t,n);if(r.length)return r.unshift(e),r}return[]}class so{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function xl(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class bE extends _E{constructor(e,n){super(e),this.snapshot=n,om(this,e)}toString(){return this.snapshot.toString()}}function CE(t,e){const n=function(t,e){const s=new af([],{},{},"",{},qe,e,null,t.root,-1,{});return new EE("",new so(s,[]))}(t,e),r=new ri([new Pl("",{})]),i=new ri({}),o=new ri({}),s=new ri({}),a=new ri(""),u=new ao(r,i,s,a,o,qe,e,n.root);return u.snapshot=n.root,new bE(new so(u,[]),n)}class ao{constructor(e,n,r,i,o,s,a,u){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this._futureSnapshot=u}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(pe(e=>Xa(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(pe(e=>Xa(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function wE(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const i=n[r],o=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function(t){return t.reduce((e,n)=>({params:Object.assign(Object.assign({},e.params),n.params),data:Object.assign(Object.assign({},e.data),n.data),resolve:Object.assign(Object.assign({},e.resolve),n._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class af{constructor(e,n,r,i,o,s,a,u,h,m,E){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._urlSegment=h,this._lastPathIndex=m,this._resolve=E}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Xa(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Xa(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class EE extends _E{constructor(e,n){super(n),this.url=e,om(this,n)}toString(){return DE(this._root)}}function om(t,e){e.value._routerState=t,e.children.forEach(n=>om(t,n))}function DE(t){const e=t.children.length>0?` { ${t.children.map(DE).join(", ")} } `:"";return`${t.value}${e}`}function sm(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Ti(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Ti(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Ti(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Ti(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function am(t,e){return Ti(t.params,e.params)&&function(t,e){return Ss(t,e)&&t.every((n,r)=>Ti(n.parameters,e[r].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||am(t.parent,e.parent))}function cf(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(r=>{for(const i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return cf(t,r,i);return cf(t,r)})}(t,e,n);return new so(r,i)}{if(t.shouldAttach(e.value)){const o=t.retrieve(e.value);if(null!==o){const s=o.route;return SE(e,s),s}}const r=function(t){return new ao(new ri(t.url),new ri(t.params),new ri(t.queryParams),new ri(t.fragment),new ri(t.data),t.outlet,t.component,t)}(e.value),i=e.children.map(o=>cf(t,o));return new so(r,i)}}function SE(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)SE(t.children[n],e.children[n])}function lf(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Rl(t){return"object"==typeof t&&null!=t&&t.outlets}function cm(t,e,n,r,i){let o={};return r&&_n(r,(s,a)=>{o[a]=Array.isArray(s)?s.map(u=>`${u}`):`${s}`}),new Ds(n.root===t?e:TE(n.root,t,e),o,i)}function TE(t,e,n){const r={};return _n(t.children,(i,o)=>{r[o]=i===e?n:TE(i,e,n)}),new Ze(t.segments,r)}class IE{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&lf(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(Rl);if(i&&i!==lE(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class lm{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function PE(t,e,n){if(t||(t=new Ze([],{})),0===t.segments.length&&t.hasChildren())return uf(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const s=t.segments[i],a=n[r];if(Rl(a))break;const u=`${a}`,h=r<n.length-1?n[r+1]:null;if(i>0&&void 0===u)break;if(u&&h&&"object"==typeof h&&void 0===h.outlets){if(!xE(u,h,s))return o;r+=2}else{if(!xE(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const o=new Ze(t.segments.slice(0,r.pathIndex),{});return o.children[qe]=new Ze(t.segments.slice(r.pathIndex),t.children),uf(o,0,i)}return r.match&&0===i.length?new Ze(t.segments,{}):r.match&&!t.hasChildren()?um(t,e,n):r.match?uf(t,0,i):um(t,e,n)}function uf(t,e,n){if(0===n.length)return new Ze(t.segments,{});{const r=function(t){return Rl(t[0])?t[0].outlets:{[qe]:t}}(n),i={};return _n(r,(o,s)=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=PE(t.children[s],e,o))}),_n(t.children,(o,s)=>{void 0===r[s]&&(i[s]=o)}),new Ze(t.segments,i)}}function um(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(Rl(o)){const u=TV(o.outlets);return new Ze(r,u)}if(0===i&&lf(n[0])){r.push(new Pl(t.segments[e].path,ME(n[0]))),i++;continue}const s=Rl(o)?o.outlets[qe]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&lf(a)?(r.push(new Pl(s,ME(a))),i+=2):(r.push(new Pl(s,{})),i++)}return new Ze(r,{})}function TV(t){const e={};return _n(t,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(e[r]=um(new Ze([],{}),0,n))}),e}function ME(t){const e={};return _n(t,(n,r)=>e[r]=`${n}`),e}function xE(t,e,n){return t==n.path&&Ti(e,n.parameters)}class PV{constructor(e,n,r,i){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),sm(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const i=xl(n);e.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),_n(i,(o,s)=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){const i=e.value,o=n?n.value:null;if(i===o)if(i.component){const s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet);if(r&&r.outlet){const i=r.outlet.detach(),o=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:i,route:e,contexts:o})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=xl(e);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,n,r){const i=xl(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new YL(o.value.snapshot))}),e.children.length&&this.forwardEvent(new WL(e.value.snapshot))}activateRoutes(e,n,r){const i=e.value,o=n?n.value:null;if(sm(i),i===o)if(i.component){const s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){const s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),RE(a.route)}else{const a=function(t){for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(i.snapshot),u=a?a.module.componentFactoryResolver:null;s.attachRef=null,s.route=i,s.resolver=u,s.outlet&&s.outlet.activateWith(i,u),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}}function RE(t){sm(t.value),t.children.forEach(RE)}class dm{constructor(e,n){this.routes=e,this.module=n}}function Ao(t){return"function"==typeof t}function Ts(t){return t instanceof Ds}const Al=Symbol("INITIAL_VALUE");function Ol(){return io(t=>function(...t){let e,n;return me(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&V(t[0])&&(t=t[0]),ho(t,n).lift(new fL(e))}(t.map(e=>e.pipe(Jg(1),Xw(Al)))).pipe(Zw((e,n)=>{let r=!1;return n.reduce((i,o,s)=>i!==Al?i:(o===Al&&(r=!0),r||!1!==o&&s!==n.length-1&&!Ts(o)?i:o),e)},Al),ws(e=>e!==Al),pe(e=>Ts(e)?e:!0===e),Jg(1)))}let AE=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=tr({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(n,r){1&n&&Wr(0,"router-outlet")},directives:function(){return[vm]},encapsulation:2}),t})();function OE(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];NV(r,FV(e,r))}}function NV(t,e){t.children&&OE(t.children,e)}function FV(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function fm(t){const e=t.children&&t.children.map(fm),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==qe&&(n.component=AE),n}function Mr(t){return t.outlet||qe}function kE(t,e){const n=t.filter(r=>Mr(r)===e);return n.push(...t.filter(r=>Mr(r)!==e)),n}const NE={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function df(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},NE):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const o=(e.matcher||JL)(n,t,e);if(!o)return Object.assign({},NE);const s={};_n(o.posParams,(u,h)=>{s[h]=u.path});const a=o.consumed.length>0?Object.assign(Object.assign({},s),o.consumed[o.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:o.consumed,lastChild:o.consumed.length,parameters:a,positionalParamSegments:null!==(r=o.posParams)&&void 0!==r?r:{}}}function ff(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(r=>hf(t,e,r)&&Mr(r)!==qe)}(t,n,r)){const s=new Ze(e,function(t,e,n,r){const i={};i[qe]=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&Mr(o)!==qe){const s=new Ze([],{});s._sourceSegment=t,s._segmentIndexShift=e.length,i[Mr(o)]=s}return i}(t,e,r,new Ze(n,t.children)));return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(r=>hf(t,e,r))}(t,n,r)){const s=new Ze(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(hf(t,n,a)&&!i[Mr(a)]){const u=new Ze([],{});u._sourceSegment=t,u._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[Mr(a)]=u}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}const o=new Ze(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function hf(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function FE(t,e,n,r){return!!(Mr(t)===r||r!==qe&&hf(e,n,t))&&("**"===t.path||df(e,t,n).matched)}function LE(t,e,n){return 0===e.length&&!t.children[n]}class kl{constructor(e){this.segmentGroup=e||null}}class VE{constructor(e){this.urlTree=e}}function pf(t){return new R(e=>e.error(new kl(t)))}function jE(t){return new R(e=>e.error(new VE(t)))}function UV(t){return new R(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class zV{constructor(e,n,r,i,o){this.configLoader=n,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=e.get(Di)}apply(){const e=ff(this.urlTree.root,[],[],this.config).segmentGroup,n=new Ze(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,n,qe).pipe(pe(o=>this.createUrlTree(hm(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Es(o=>{if(o instanceof VE)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof kl?this.noMatchError(o):o}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,qe).pipe(pe(i=>this.createUrlTree(hm(i),e.queryParams,e.fragment))).pipe(Es(i=>{throw i instanceof kl?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,n,r){const i=e.segments.length>0?new Ze([],{[qe]:e}):e;return new Ds(i,n,r)}expandSegmentGroup(e,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,n,r).pipe(pe(o=>new Ze([],o))):this.expandSegment(e,r,n,r.segments,i,!0)}expandChildren(e,n,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return vt(i).pipe(Ka(o=>{const s=r.children[o],a=kE(n,o);return this.expandSegmentGroup(e,a,s,o).pipe(pe(u=>({segment:u,outlet:o})))}),Zw((o,s)=>(o[s.outlet]=s.segment,o),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?ws((i,o)=>t(i,o,r)):v,Xg(1),n?tE(e):eE(()=>new Zd))}())}expandSegment(e,n,r,i,o,s){return vt(r).pipe(Ka(a=>this.expandSegmentAgainstRoute(e,n,r,a,i,o,s).pipe(Es(h=>{if(h instanceof kl)return Be(null);throw h}))),Ja(a=>!!a),Es((a,u)=>{if(a instanceof Zd||"EmptyError"===a.name){if(LE(n,i,o))return Be(new Ze([],{}));throw new kl(n)}throw a}))}expandSegmentAgainstRoute(e,n,r,i,o,s,a){return FE(i,n,o,s)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,n,i,o,s):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s):pf(n):pf(n)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,s):this.expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,i){const o=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?jE(o):this.lineralizeSegments(r,o).pipe(Bt(s=>{const a=new Ze(s,{});return this.expandSegment(e,a,n,s,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s){const{matched:a,consumedSegments:u,lastChild:h,positionalParamSegments:m}=df(n,i,o);if(!a)return pf(n);const E=this.applyRedirectCommands(u,i.redirectTo,m);return i.redirectTo.startsWith("/")?jE(E):this.lineralizeSegments(i,E).pipe(Bt(k=>this.expandSegment(e,n,r,k.concat(o.slice(h)),s,!1)))}matchSegmentAgainstRoute(e,n,r,i,o){if("**"===r.path)return r.loadChildren?(r._loadedConfig?Be(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe(pe(k=>(r._loadedConfig=k,new Ze(i,{})))):Be(new Ze(i,{}));const{matched:s,consumedSegments:a,lastChild:u}=df(n,r,i);if(!s)return pf(n);const h=i.slice(u);return this.getChildConfig(e,r,i).pipe(Bt(E=>{const k=E.module,N=E.routes,{segmentGroup:H,slicedSegments:Z}=ff(n,a,h,N),K=new Ze(H.segments,H.children);if(0===Z.length&&K.hasChildren())return this.expandChildren(k,N,K).pipe(pe(Ie=>new Ze(a,Ie)));if(0===N.length&&0===Z.length)return Be(new Ze(a,{}));const ae=Mr(r)===o;return this.expandSegment(k,K,N,Z,ae?qe:o,!0).pipe(pe(ve=>new Ze(a.concat(ve.segments),ve.children)))}))}getChildConfig(e,n,r){return n.children?Be(new dm(n.children,e)):n.loadChildren?void 0!==n._loadedConfig?Be(n._loadedConfig):this.runCanLoadGuards(e.injector,n,r).pipe(Bt(i=>i?this.configLoader.load(e.injector,n).pipe(pe(o=>(n._loadedConfig=o,o))):function(t){return new R(e=>e.error(em(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(n))):Be(new dm([],e))}runCanLoadGuards(e,n,r){const i=n.canLoad;return i&&0!==i.length?Be(i.map(s=>{const a=e.get(s);let u;if(function(t){return t&&Ao(t.canLoad)}(a))u=a.canLoad(n,r);else{if(!Ao(a))throw new Error("Invalid CanLoad guard");u=a(n,r)}return Ii(u)})).pipe(Ol(),fr(s=>{if(!Ts(s))return;const a=em(`Redirecting to "${this.urlSerializer.serialize(s)}"`);throw a.url=s,a}),pe(s=>!0===s)):Be(!0)}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Be(r);if(i.numberOfChildren>1||!i.children[qe])return UV(e.redirectTo);i=i.children[qe]}}applyRedirectCommands(e,n,r){return this.applyRedirectCreatreUrlTree(n,this.urlSerializer.parse(n),e,r)}applyRedirectCreatreUrlTree(e,n,r,i){const o=this.createSegmentGroup(e,n.root,r,i);return new Ds(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return _n(e,(i,o)=>{if("string"==typeof i&&i.startsWith(":")){const a=i.substring(1);r[o]=n[a]}else r[o]=i}),r}createSegmentGroup(e,n,r,i){const o=this.createSegments(e,n.segments,r,i);let s={};return _n(n.children,(a,u)=>{s[u]=this.createSegmentGroup(e,a,r,i)}),new Ze(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){const i=r[n.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${n.path}'.`);return i}findOrReturn(e,n){let r=0;for(const i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}}function hm(t){const e={};for(const r of Object.keys(t.children)){const o=hm(t.children[r]);(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function(t){if(1===t.numberOfChildren&&t.children[qe]){const e=t.children[qe];return new Ze(t.segments.concat(e.segments),e.children)}return t}(new Ze(t.segments,e))}class BE{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class gf{constructor(e,n){this.component=e,this.route=n}}function qV(t,e,n){const r=t._root;return Nl(r,e?e._root:null,n,[r.value])}function mf(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function Nl(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=xl(e);return t.children.forEach(s=>{(function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Ss(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Ss(t.url,e.url)||!Ti(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!am(t,e)||!Ti(t.queryParams,e.queryParams);case"paramsChange":default:return!am(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new BE(r)):(o.data=s.data,o._resolvedData=s._resolvedData),Nl(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new gf(a.outlet.component,s))}else s&&Fl(e,a,i),i.canActivateChecks.push(new BE(r)),Nl(t,null,o.component?a?a.children:null:n,r,i)})(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),_n(o,(s,a)=>Fl(s,n.getContext(a),i)),i}function Fl(t,e,n){const r=xl(t),i=t.value;_n(r,(o,s)=>{Fl(o,i.component?e?e.children.getContext(s):null:e,n)}),n.canDeactivateChecks.push(new gf(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class sj{}function UE(t){return new R(e=>e.error(t))}class cj{constructor(e,n,r,i,o,s){this.rootComponentType=e,this.config=n,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=s}recognize(){const e=ff(this.urlTree.root,[],[],this.config.filter(s=>void 0===s.redirectTo),this.relativeLinkResolution).segmentGroup,n=this.processSegmentGroup(this.config,e,qe);if(null===n)return null;const r=new af([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},qe,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new so(r,n),o=new EE(this.url,i);return this.inheritParamsAndData(o._root),o}inheritParamsAndData(e){const n=e.value,r=wE(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,n,r){return 0===n.segments.length&&n.hasChildren()?this.processChildren(e,n):this.processSegment(e,n,n.segments,r)}processChildren(e,n){const r=[];for(const o of Object.keys(n.children)){const s=n.children[o],a=kE(e,o),u=this.processSegmentGroup(a,s,o);if(null===u)return null;r.push(...u)}const i=HE(r);return function(t){t.sort((e,n)=>e.value.outlet===qe?-1:n.value.outlet===qe?1:e.value.outlet.localeCompare(n.value.outlet))}(i),i}processSegment(e,n,r,i){for(const o of e){const s=this.processSegmentAgainstRoute(o,n,r,i);if(null!==s)return s}return LE(n,r,i)?[]:null}processSegmentAgainstRoute(e,n,r,i){if(e.redirectTo||!FE(e,n,r,i))return null;let o,s=[],a=[];if("**"===e.path){const N=r.length>0?lE(r).parameters:{};o=new af(r,N,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,GE(e),Mr(e),e.component,e,$E(n),zE(n)+r.length,WE(e))}else{const N=df(n,e,r);if(!N.matched)return null;s=N.consumedSegments,a=r.slice(N.lastChild),o=new af(s,N.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,GE(e),Mr(e),e.component,e,$E(n),zE(n)+s.length,WE(e))}const u=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(e),{segmentGroup:h,slicedSegments:m}=ff(n,s,a,u.filter(N=>void 0===N.redirectTo),this.relativeLinkResolution);if(0===m.length&&h.hasChildren()){const N=this.processChildren(u,h);return null===N?null:[new so(o,N)]}if(0===u.length&&0===m.length)return[new so(o,[])];const E=Mr(e)===i,k=this.processSegment(u,h,m,E?qe:i);return null===k?null:[new so(o,k)]}}function dj(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function HE(t){const e=[],n=new Set;for(const r of t){if(!dj(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):e.push(r)}for(const r of n){const i=HE(r.children);e.push(new so(r.value,i))}return e.filter(r=>!n.has(r))}function $E(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function zE(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function GE(t){return t.data||{}}function WE(t){return t.resolve||{}}function pm(t){return io(e=>{const n=t(e);return n?vt(n).pipe(pe(()=>e)):Be(e)})}class _j extends class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}{}const gm=new Ge("ROUTES");class qE{constructor(e,n,r,i){this.loader=e,this.compiler=n,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,n){if(n._loader$)return n._loader$;this.onLoadStartListener&&this.onLoadStartListener(n);const i=this.loadModuleFactory(n.loadChildren).pipe(pe(o=>{this.onLoadEndListener&&this.onLoadEndListener(n);const s=o.create(e);return new dm(cE(s.injector.get(gm,void 0,Te.Self|Te.Optional)).map(fm),s)}),Es(o=>{throw n._loader$=void 0,o}));return n._loader$=new As(i,()=>new z).pipe(Uo()),n._loader$}loadModuleFactory(e){return"string"==typeof e?vt(this.loader.load(e)):Ii(e()).pipe(Bt(n=>n instanceof TC?Be(n):vt(this.compiler.compileModuleAsync(n))))}}class bj{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Za,this.attachRef=null}}class Za{constructor(){this.contexts=new Map}onChildOutletCreated(e,n){const r=this.getOrCreateContext(e);r.outlet=n,this.contexts.set(e,r)}onChildOutletDestroyed(e){const n=this.getContext(e);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let n=this.getContext(e);return n||(n=new bj,this.contexts.set(e,n)),n}getContext(e){return this.contexts.get(e)||null}}class wj{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,n){return e}}function Ej(t){throw t}function Dj(t,e,n){return e.parse("/")}function YE(t,e){return Be(null)}const Sj={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Tj={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let sn=(()=>{class t{constructor(n,r,i,o,s,a,u,h){this.rootComponentType=n,this.urlSerializer=r,this.rootContexts=i,this.location=o,this.config=h,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new z,this.errorHandler=Ej,this.malformedUriErrorHandler=Dj,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:YE,afterPreactivation:YE},this.urlHandlingStrategy=new wj,this.routeReuseStrategy=new _j,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=s.get(Di),this.console=s.get(Ed);const k=s.get(Qt);this.isNgZoneEnabled=k instanceof Qt&&Qt.isInAngularZone(),this.resetConfig(h),this.currentUrlTree=new Ds(new Ze([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new qE(a,u,N=>this.triggerEvent(new rE(N)),N=>this.triggerEvent(new iE(N))),this.routerState=CE(this.currentUrlTree,this.rootComponentType),this.transitions=new ri({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var n;return null===(n=this.location.getState())||void 0===n?void 0:n.\u0275routerPageId}setupNavigations(n){const r=this.events;return n.pipe(ws(i=>0!==i.id),pe(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),io(i=>{let o=!1,s=!1;return Be(i).pipe(fr(a=>{this.currentNavigation={id:a.id,initialUrl:a.currentRawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),io(a=>{const u=this.browserUrlTree.toString(),h=!this.navigated||a.extractedUrl.toString()!==u||u!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||h)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return yf(a.source)&&(this.browserUrlTree=a.extractedUrl),Be(a).pipe(io(E=>{const k=this.transitions.getValue();return r.next(new Zg(E.id,this.serializeUrl(E.extractedUrl),E.source,E.restoredState)),k!==this.transitions.getValue()?Qa:Promise.resolve(E)}),function(t,e,n,r){return io(i=>function(t,e,n,r,i){return new zV(t,e,n,r,i).apply()}(t,e,n,i.extractedUrl,r).pipe(pe(o=>Object.assign(Object.assign({},i),{urlAfterRedirects:o}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),fr(E=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:E.urlAfterRedirects})}),function(t,e,n,r,i){return Bt(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){try{const s=new cj(t,e,n,r,i,o).recognize();return null===s?UE(new sj):Be(s)}catch(s){return UE(s)}}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(pe(s=>Object.assign(Object.assign({},o),{targetSnapshot:s}))))}(this.rootComponentType,this.config,E=>this.serializeUrl(E),this.paramsInheritanceStrategy,this.relativeLinkResolution),fr(E=>{"eager"===this.urlUpdateStrategy&&(E.extras.skipLocationChange||this.setBrowserUrl(E.urlAfterRedirects,E),this.browserUrlTree=E.urlAfterRedirects);const k=new BL(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(E.urlAfterRedirects),E.targetSnapshot);r.next(k)}));if(h&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:k,extractedUrl:N,source:H,restoredState:Z,extras:K}=a,ae=new Zg(k,this.serializeUrl(N),H,Z);r.next(ae);const re=CE(N,this.rootComponentType).snapshot;return Be(Object.assign(Object.assign({},a),{targetSnapshot:re,urlAfterRedirects:N,extras:Object.assign(Object.assign({},K),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=a.rawUrl,this.browserUrlTree=a.urlAfterRedirects,a.resolve(null),Qa}),pm(a=>{const{targetSnapshot:u,id:h,extractedUrl:m,rawUrl:E,extras:{skipLocationChange:k,replaceUrl:N}}=a;return this.hooks.beforePreactivation(u,{navigationId:h,appliedUrlTree:m,rawUrlTree:E,skipLocationChange:!!k,replaceUrl:!!N})}),fr(a=>{const u=new UL(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(u)}),pe(a=>Object.assign(Object.assign({},a),{guards:qV(a.targetSnapshot,a.currentSnapshot,this.rootContexts)})),function(t,e){return Bt(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Be(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return vt(t).pipe(Bt(i=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?Be(o.map(a=>{const u=mf(a,e,i);let h;if(function(t){return t&&Ao(t.canDeactivate)}(u))h=Ii(u.canDeactivate(t,e,n,r));else{if(!Ao(u))throw new Error("Invalid CanDeactivate guard");h=Ii(u(t,e,n,r))}return h.pipe(Ja())})).pipe(Ol()):Be(!0)}(i.component,i.route,n,e,r)),Ja(i=>!0!==i,!0))}(s,r,i,t).pipe(Bt(a=>a&&function(t){return"boolean"==typeof t}(a)?function(t,e,n,r){return vt(e).pipe(Ka(i=>Kg(function(t,e){return null!==t&&e&&e(new GL(t)),Be(!0)}(i.route.parent,r),function(t,e){return null!==t&&e&&e(new qL(t)),Be(!0)}(i.route,r),function(t,e,n){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(s)).filter(s=>null!==s).map(s=>Kw(()=>Be(s.guards.map(u=>{const h=mf(u,s.node,n);let m;if(function(t){return t&&Ao(t.canActivateChild)}(h))m=Ii(h.canActivateChild(r,t));else{if(!Ao(h))throw new Error("Invalid CanActivateChild guard");m=Ii(h(r,t))}return m.pipe(Ja())})).pipe(Ol())));return Be(o).pipe(Ol())}(t,i.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;return r&&0!==r.length?Be(r.map(o=>Kw(()=>{const s=mf(o,e,n);let a;if(function(t){return t&&Ao(t.canActivate)}(s))a=Ii(s.canActivate(e,t));else{if(!Ao(s))throw new Error("Invalid CanActivate guard");a=Ii(s(e,t))}return a.pipe(Ja())}))).pipe(Ol()):Be(!0)}(t,i.route,n))),Ja(i=>!0!==i,!0))}(r,o,t,e):Be(a)),pe(a=>Object.assign(Object.assign({},n),{guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),fr(a=>{if(Ts(a.guardsResult)){const h=em(`Redirecting to "${this.serializeUrl(a.guardsResult)}"`);throw h.url=a.guardsResult,h}const u=new HL(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(u)}),ws(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,""),!1)),pm(a=>{if(a.guards.canActivateChecks.length)return Be(a).pipe(fr(u=>{const h=new $L(u.id,this.serializeUrl(u.extractedUrl),this.serializeUrl(u.urlAfterRedirects),u.targetSnapshot);this.triggerEvent(h)}),io(u=>{let h=!1;return Be(u).pipe(function(t,e){return Bt(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return Be(n);let o=0;return vt(i).pipe(Ka(s=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Be({});const o={};return vt(i).pipe(Bt(s=>function(t,e,n,r){const i=mf(t,e,r);return Ii(i.resolve?i.resolve(e,n):i(e,n))}(t[s],e,n,r).pipe(fr(a=>{o[s]=a}))),Xg(1),Bt(()=>Object.keys(o).length===i.length?Be(o):Qa))}(t._resolve,t,e,r).pipe(pe(o=>(t._resolvedData=o,t.data=Object.assign(Object.assign({},t.data),wE(t,n).resolve),null)))}(s.route,r,t,e)),fr(()=>o++),Xg(1),Bt(s=>o===i.length?Be(n):Qa))})}(this.paramsInheritanceStrategy,this.ngModule.injector),fr({next:()=>h=!0,complete:()=>{h||(this.restoreHistory(u),this.cancelNavigationTransition(u,"At least one route resolver didn't emit any value."))}}))}),fr(u=>{const h=new zL(u.id,this.serializeUrl(u.extractedUrl),this.serializeUrl(u.urlAfterRedirects),u.targetSnapshot);this.triggerEvent(h)}))}),pm(a=>{const{targetSnapshot:u,id:h,extractedUrl:m,rawUrl:E,extras:{skipLocationChange:k,replaceUrl:N}}=a;return this.hooks.afterPreactivation(u,{navigationId:h,appliedUrlTree:m,rawUrlTree:E,skipLocationChange:!!k,replaceUrl:!!N})}),pe(a=>{const u=function(t,e,n){const r=cf(t,e._root,n?n._root:void 0);return new bE(r,e)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return Object.assign(Object.assign({},a),{targetRouterState:u})}),fr(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((t,e,n)=>pe(r=>(new PV(e,r.targetRouterState,r.currentRouterState,n).activate(t),r)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),fr({next(){o=!0},complete(){o=!0}}),function(t){return e=>e.lift(new LL(t))}(()=>{if(!o&&!s){const a=`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(i),this.cancelNavigationTransition(i,a)):this.cancelNavigationTransition(i,a)}this.currentNavigation=null}),Es(a=>{if(s=!0,function(t){return t&&t[sE]}(a)){const u=Ts(a.url);u||(this.navigated=!0,this.restoreHistory(i,!0));const h=new nE(i.id,this.serializeUrl(i.extractedUrl),a.message);r.next(h),u?setTimeout(()=>{const m=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),E={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||yf(i.source)};this.scheduleNavigation(m,"imperative",null,E,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const u=new jL(i.id,this.serializeUrl(i.extractedUrl),a);r.next(u);try{i.resolve(this.errorHandler(a))}catch(h){i.reject(h)}}return Qa}))}))}resetRootComponentType(n){this.rootComponentType=n,this.routerState.root.component=this.rootComponentType}getTransition(){const n=this.transitions.value;return n.urlAfterRedirects=this.browserUrlTree,n}setTransition(n){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),n))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r=this.extractLocationChangeInfoFromEvent(n);this.shouldScheduleNavigation(this.lastLocationChangeInfo,r)&&setTimeout(()=>{const{source:i,state:o,urlTree:s}=r,a={replaceUrl:!0};if(o){const u=Object.assign({},o);delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(a.state=u)}this.scheduleNavigation(s,i,o,a)},0),this.lastLocationChangeInfo=r}))}extractLocationChangeInfoFromEvent(n){var r;return{source:"popstate"===n.type?"popstate":"hashchange",urlTree:this.parseUrl(n.url),state:(null===(r=n.state)||void 0===r?void 0:r.navigationId)?n.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(n,r){if(!n)return!0;const i=r.urlTree.toString()===n.urlTree.toString();return r.transitionId!==n.transitionId||!i||!("hashchange"===r.source&&"popstate"===n.source||"popstate"===r.source&&"hashchange"===n.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(n){this.events.next(n)}resetConfig(n){OE(n),this.config=n.map(fm),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(n,r={}){const{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,h=i||this.routerState.root,m=u?this.currentUrlTree.fragment:s;let E=null;switch(a){case"merge":E=Object.assign(Object.assign({},this.currentUrlTree.queryParams),o);break;case"preserve":E=this.currentUrlTree.queryParams;break;default:E=o||null}return null!==E&&(E=this.removeEmptyProps(E)),function(t,e,n,r,i){if(0===n.length)return cm(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new IE(!0,0,t);let e=0,n=!1;const r=t.reduce((i,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return _n(o.outlets,(u,h)=>{a[h]="string"==typeof u?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===s?(o.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?n=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,o]},[]);return new IE(n,e,r)}(n);if(o.toRoot())return cm(e.root,new Ze([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new lm(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const o=n.snapshot._urlSegment;return new lm(o,o===e.root,0)}const r=lf(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new lm(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?uf(s.segmentGroup,s.index,o.commands):PE(s.segmentGroup,s.index,o.commands);return cm(s.segmentGroup,a,e,r,i)}(h,this.currentUrlTree,n,E,null!=m?m:null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=Ts(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,"imperative",null,r)}navigate(n,r={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,n)}return r}isActive(n,r){let i;if(i=!0===r?Object.assign({},Sj):!1===r?Object.assign({},Tj):r,Ts(n))return dE(this.currentUrlTree,n,i);const o=this.parseUrl(n);return dE(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.keys(n).reduce((r,i)=>{const o=n[i];return null!=o&&(r[i]=o),r},{})}processNavigations(){this.navigations.subscribe(n=>{this.navigated=!0,this.lastSuccessfulId=n.id,this.currentPageId=n.targetPageId,this.events.next(new Il(n.id,this.serializeUrl(n.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,n.resolve(!0)},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)})}scheduleNavigation(n,r,i,o,s){var a,u;if(this.disposed)return Promise.resolve(!1);const h=this.getTransition(),m=yf(r)&&h&&!yf(h.source),N=(this.lastSuccessfulId===h.id||this.currentNavigation?h.rawUrl:h.urlAfterRedirects).toString()===n.toString();if(m&&N)return Promise.resolve(!0);let H,Z,K;s?(H=s.resolve,Z=s.reject,K=s.promise):K=new Promise((ve,Ie)=>{H=ve,Z=Ie});const ae=++this.navigationId;let re;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),re=i&&i.\u0275routerPageId?i.\u0275routerPageId:o.replaceUrl||o.skipLocationChange?null!==(a=this.browserPageId)&&void 0!==a?a:0:(null!==(u=this.browserPageId)&&void 0!==u?u:0)+1):re=0,this.setTransition({id:ae,targetPageId:re,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:n,extras:o,resolve:H,reject:Z,promise:K,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),K.catch(ve=>Promise.reject(ve))}setBrowserUrl(n,r){const i=this.urlSerializer.serialize(n),o=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",o):this.location.go(i,"",o)}restoreHistory(n,r=!1){var i,o;if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-n.targetPageId;"popstate"!==n.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===s?this.currentUrlTree===(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)&&0===s&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(s)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(n,r){const i=new nE(n.id,this.serializeUrl(n.extractedUrl),r);this.triggerEvent(i),n.resolve(!1)}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}}return t.\u0275fac=function(n){return new(n||t)(he(Ru),he(tm),he(Za),he(Fd),he(ht),he(Sd),he(_s),he(void 0))},t.\u0275prov=Se({token:t,factory:t.\u0275fac}),t})();function yf(t){return"imperative"!==t}let vm=(()=>{class t{constructor(n,r,i,o,s){this.parentContexts=n,this.location=r,this.resolver=i,this.changeDetector=s,this.activated=null,this._activatedRoute=null,this.activateEvents=new rn,this.deactivateEvents=new rn,this.name=o||qe,n.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const n=this.parentContexts.getContext(this.name);n&&n.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=n;const s=(r=r||this.resolver).resolveComponentFactory(n._futureSnapshot.routeConfig.component),a=this.parentContexts.getOrCreateContext(this.name).children,u=new xj(n,a,this.location.injector);this.activated=this.location.createComponent(s,this.location.length,u),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(n){return new(n||t)(ce(Za),ce(Qr),ce(ms),function(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const r=n.length;let i=0;for(;i<r;){const o=n[i];if(de(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(o===e)return n[i+1];i+=2}}}return null}(zt(),t)}("name"),ce(Pp))},t.\u0275dir=Me({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class xj{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===ao?this.route:e===Za?this.childContexts:this.parent.get(e,n)}}class QE{}class KE{preload(e,n){return Be(null)}}let JE=(()=>{class t{constructor(n,r,i,o,s){this.router=n,this.injector=o,this.preloadingStrategy=s,this.loader=new qE(r,i,h=>n.triggerEvent(new rE(h)),h=>n.triggerEvent(new iE(h)))}setUpPreloading(){this.subscription=this.router.events.pipe(ws(n=>n instanceof Il),Ka(()=>this.preload())).subscribe(()=>{})}preload(){const n=this.injector.get(Di);return this.processRoutes(n,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const i=[];for(const o of r)if(o.loadChildren&&!o.canLoad&&o._loadedConfig){const s=o._loadedConfig;i.push(this.processRoutes(s.module,s.routes))}else o.loadChildren&&!o.canLoad?i.push(this.preloadConfig(n,o)):o.children&&i.push(this.processRoutes(n,o.children));return vt(i).pipe(Bo(),pe(o=>{}))}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?Be(r._loadedConfig):this.loader.load(n.injector,r)).pipe(Bt(o=>(r._loadedConfig=o,this.processRoutes(o.module,o.routes)))))}}return t.\u0275fac=function(n){return new(n||t)(he(sn),he(Sd),he(_s),he(ht),he(QE))},t.\u0275prov=Se({token:t,factory:t.\u0275fac}),t})(),_m=(()=>{class t{constructor(n,r,i={}){this.router=n,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(n=>{n instanceof Zg?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof Il&&(this.lastId=n.id,this.scheduleScrollEvent(n,this.router.parseUrl(n.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(n=>{n instanceof oE&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.router.triggerEvent(new oE(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(n){return new(n||t)(he(sn),he(kw),he(void 0))},t.\u0275prov=Se({token:t,factory:t.\u0275fac}),t})();const Is=new Ge("ROUTER_CONFIGURATION"),XE=new Ge("ROUTER_FORROOT_GUARD"),Aj=[Fd,{provide:tm,useClass:gE},{provide:sn,useFactory:function(t,e,n,r,i,o,s,a={},u,h){const m=new sn(null,t,e,n,r,i,o,cE(s));return u&&(m.urlHandlingStrategy=u),h&&(m.routeReuseStrategy=h),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(a,m),a.enableTracing&&m.events.subscribe(E=>{var k,N;null===(k=console.group)||void 0===k||k.call(console,`Router Event: ${E.constructor.name}`),console.log(E.toString()),console.log(E),null===(N=console.groupEnd)||void 0===N||N.call(console)}),m},deps:[tm,Za,Fd,ht,Sd,_s,gm,Is,[class{},new Qn],[class{},new Qn]]},Za,{provide:ao,useFactory:function(t){return t.routerState.root},deps:[sn]},{provide:Sd,useClass:T1},JE,KE,class{preload(e,n){return n().pipe(Es(()=>Be(null)))}},{provide:Is,useValue:{enableTracing:!1}}];function Oj(){return new ug("Router",sn)}let ZE=(()=>{class t{constructor(n,r){}static forRoot(n,r){return{ngModule:t,providers:[Aj,eD(n),{provide:XE,useFactory:Fj,deps:[[sn,new Qn,new Eo]]},{provide:Is,useValue:r||{}},{provide:qa,useFactory:Nj,deps:[Mo,[new ua(Ya),new Qn],Is]},{provide:_m,useFactory:kj,deps:[sn,kw,Is]},{provide:QE,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:KE},{provide:ug,multi:!0,useFactory:Oj},[bm,{provide:ml,multi:!0,useFactory:Bj,deps:[bm]},{provide:tD,useFactory:Uj,deps:[bm]},{provide:P0,multi:!0,useExisting:tD}]]}}static forChild(n){return{ngModule:t,providers:[eD(n)]}}}return t.\u0275fac=function(n){return new(n||t)(he(XE,8),he(sn,8))},t.\u0275mod=Cn({type:t}),t.\u0275inj=Lt({}),t})();function kj(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new _m(t,e,n)}function Nj(t,e,n={}){return n.useHash?new Wk(t,e):new vw(t,e)}function Fj(t){return"guarded"}function eD(t){return[{provide:zS,multi:!0,useValue:t},{provide:gm,multi:!0,useValue:t}]}let bm=(()=>{class t{constructor(n){this.injector=n,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new z}appInitializer(){return this.injector.get($k,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(a=>r=a),o=this.injector.get(sn),s=this.injector.get(Is);return"disabled"===s.initialNavigation?(o.setUpLocationChangeListener(),r(!0)):"enabled"===s.initialNavigation||"enabledBlocking"===s.initialNavigation?(o.hooks.afterPreactivation=()=>this.initNavigation?Be(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),o.initialNavigation()):r(!0),i})}bootstrapListener(n){const r=this.injector.get(Is),i=this.injector.get(JE),o=this.injector.get(_m),s=this.injector.get(sn),a=this.injector.get(za);n===a.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&s.initialNavigation(),i.setUpPreloading(),o.init(),s.resetRootComponentType(a.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return t.\u0275fac=function(n){return new(n||t)(he(ht))},t.\u0275prov=Se({token:t,factory:t.\u0275fac}),t})();function Bj(t){return t.appInitializer.bind(t)}function Uj(t){return t.bootstrapListener.bind(t)}const tD=new Ge("Router Initializer");var hr=(()=>(function(t){t.HOME="",t.LOBBY="lobby",t.GAME="game",t.LOCAL="local",t.JOIN="join"}(hr||(hr={})),hr))();function nD(t,e,n,r,i,o,s){try{var a=t[o](s),u=a.value}catch(h){return void n(h)}a.done?e(u):Promise.resolve(u).then(r,i)}function co(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function s(u){nD(o,r,i,s,a,"next",u)}function a(u){nD(o,r,i,s,a,"throw",u)}s(void 0)})}}var $j=Fe(805),rD=Fe.n($j);class zj extends L{constructor(e,n){super()}schedule(e,n=0){return this}}class iD extends zj{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){if(this.closed)return this;this.state=e;const r=this.id,i=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(i,r,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(i,this.id,n),this}requestAsyncId(e,n,r=0){return setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(null!==r&&this.delay===r&&!1===this.pending)return n;clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i,r=!1;try{this.work(e)}catch(o){r=!0,i=!!o&&o||new Error(o)}if(r)return this.unsubscribe(),i}_unsubscribe(){const e=this.id,n=this.scheduler,r=n.actions,i=r.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==i&&r.splice(i,1),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null}}let oD=(()=>{class t{constructor(n,r=t.now){this.SchedulerAction=n,this.now=r}schedule(n,r=0,i){return new this.SchedulerAction(this,n).schedule(i,r)}}return t.now=()=>Date.now(),t})();class lo extends oD{constructor(e,n=oD.now){super(e,()=>lo.delegate&&lo.delegate!==this?lo.delegate.now():n()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,n=0,r){return lo.delegate&&lo.delegate!==this?lo.delegate.schedule(e,n,r):super.schedule(e,n,r)}flush(e){const{actions:n}=this;if(this.active)return void n.push(e);let r;this.active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=n.shift());if(this.active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}}const qj=new class extends lo{}(class extends iD{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return null!==r&&r>0||null===r&&this.delay>0?super.requestAsyncId(e,n,r):e.flush(this)}});class xr{constructor(e,n,r){this.kind=e,this.value=n,this.error=r,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,n,r){switch(this.kind){case"N":return e&&e(this.value);case"E":return n&&n(this.error);case"C":return r&&r()}}accept(e,n,r){return e&&"function"==typeof e.next?this.observe(e):this.do(e,n,r)}toObservable(){switch(this.kind){case"N":return Be(this.value);case"E":return function(t,e){return new R(n=>n.error(t))}(this.error);case"C":return ef()}throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new xr("N",e):xr.undefinedValueNotification}static createError(e){return new xr("E",void 0,e)}static createComplete(){return xr.completeNotification}}xr.completeNotification=new xr("C"),xr.undefinedValueNotification=new xr("N",void 0);class vf extends I{constructor(e,n,r=0){super(e),this.scheduler=n,this.delay=r}static dispatch(e){const{notification:n,destination:r}=e;n.observe(r),this.unsubscribe()}scheduleMessage(e){this.destination.add(this.scheduler.schedule(vf.dispatch,this.delay,new Jj(e,this.destination)))}_next(e){this.scheduleMessage(xr.createNext(e))}_error(e){this.scheduleMessage(xr.createError(e)),this.unsubscribe()}_complete(){this.scheduleMessage(xr.createComplete()),this.unsubscribe()}}class Jj{constructor(e,n){this.notification=e,this.destination=n}}class Xj extends z{constructor(e=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY,r){super(),this.scheduler=r,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const n=this._events;n.push(e),n.length>this._bufferSize&&n.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new Zj(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=r.length;let s;if(this.closed)throw new Q;if(this.isStopped||this.hasError?s=L.EMPTY:(this.observers.push(e),s=new J(this,e)),i&&e.add(e=new vf(e,i)),n)for(let a=0;a<o&&!e.closed;a++)e.next(r[a]);else for(let a=0;a<o&&!e.closed;a++)e.next(r[a].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),s}_getNow(){return(this.scheduler||qj).now()}_trimBufferThenGetEvents(){const e=this._getNow(),n=this._bufferSize,r=this._windowTime,i=this._events,o=i.length;let s=0;for(;s<o&&!(e-i[s].time<r);)s++;return o>n&&(s=Math.max(s,o-n)),s>0&&i.splice(0,s),i}}class Zj{constructor(e,n){this.time=e,this.value=n}}const sD=new lo(iD);function n2(t){const{subscriber:e,counter:n,period:r}=t;e.next(n),this.schedule({subscriber:e,counter:n+1,period:r},r)}var Ll=Fe(330),aD=Fe(686);function _f(t){const e=Ll.getLogger(t);return e.setLevel("INFO"),e}aD.reg(Ll),aD.apply(Ll,{format:(t,e,n)=>`[${n}] ${t} ${e}:`});const Pi=_f("peer-to-peer.service");let Ps=(()=>{class t{constructor(){this.messageSubject=function(t){const e=new z,n=new z;let r=t(),i=n.subscribe(r);return{observable:e.asObservable().pipe(Xw(null),io(()=>r)),reset:()=>{i.unsubscribe(),r=t(),i=n.subscribe(r),e.next()},subject:n}}(()=>new Xj(100)),this.peer=null,this.isHost=!0,this.isConnected=!1,this.connections={},this.connectionAdded=new z,this.connectionRemoved=new z,this.getConnections=()=>Object.keys(this.connections),this.getId=()=>{var n,r;return null!==(r=null===(n=this.peer)||void 0===n?void 0:n.id)&&void 0!==r?r:"default"},this.getIsHost=()=>this.isHost,this.getIsConnected=()=>this.isConnected,this.getMessageObservable=()=>this.messageSubject.observable}setupAsHost(){var n=this;return co(function*(){var r;null===(r=n.peer)||void 0===r||r.destroy(),n.peer=new(rD())(n.getPeerConfig()),n.isHost=!0,yield n.connectToPeerServer(),n.isConnected=!0,n.peer.on("connection",i=>{i.on("open",()=>{n.addConnectionIfNotExist(i.peer,i)}),i.on("data",n.messageHandler.bind(n)),n.attachErrorAndCloseConnEvents(i)}),n.peer.on("close",()=>{Pi.warn("NOT ACCEPTING INCOMING CONNECTIONS??")})})()}setupByConnectingToId(n){var r=this;return co(function*(){return r.destroy(),r.peer=new(rD())(r.getPeerConfig()),r.isHost=!1,yield r.connectToPeerServer(),new Promise((i,o)=>{const s=function(t=0,e=sD){return(!function(t){return!V(t)&&t-parseFloat(t)+1>=0}(t)||t<0)&&(t=0),(!e||"function"!=typeof e.schedule)&&(e=sD),new R(n=>(n.add(e.schedule(n2,t,{subscriber:n,counter:0,period:t})),n))}(5e3).subscribe(u=>{o(`Could not connect after 5000ms. Is the host ${n} correct?`),s.unsubscribe()});Pi.info(`connecting to ${n}`);const a=r.peer.connect(n);a.on("data",u=>{r.messageHandler(u)}),a.on("open",()=>{Pi.info(`connected to ${n}!`),r.addConnectionIfNotExist(n,a),r.isConnected=!0,i(!0),s.unsubscribe()}),r.attachErrorAndCloseConnEvents(a,u=>{o(u),a.close(),s.unsubscribe()})})})()}getHostId(){return this.isHost?this.getId():this.getConnections()[0]}broadcastAndToSelf(n,r){const i=this.broadcast(n,r);return this.messageSubject.subject.next(i),i}broadcast(n,r){var i;const o=null!==(i=null==r?void 0:r.from)&&void 0!==i?i:this.getId(),s={from:o,type:"BROADCAST",data:n};(null==r?void 0:r.echo)&&(s.echoBroadcast=!0);for(const a in this.connections)a===o&&!(null==r?void 0:r.echo)||this.sendMessage(a,s);return s}sendSingleMessage(n,r){const i={from:this.getId(),type:"SINGLE",data:r};this.sendMessage(n,i)}dispose(){this.destroy()}getPeerConfig(){return{host:"heroku-chess-123.herokuapp.com",port:443,secure:!0}}connectToPeerServer(){return new Promise((n,r)=>{this.peer.on("open",i=>{Pi.info(`I am connected to peer server as (${this.getId()})`),n(!0)}),this.peer.on("error",i=>{r(i)})})}attachErrorAndCloseConnEvents(n,r){n.on("error",i=>{Pi.error(`connection: ${n.peer} error! ${i}`),this.onPeerDisconnected(n),null!=r&&r(i)}),this.attachToConnCloseEvents(n,()=>{Pi.info(`connection: ${n.peer} closed!`),this.onPeerDisconnected(n),null!=r&&r()})}attachToConnCloseEvents(n,r){n.on("close",()=>r()),n.on("iceStateChanged",i=>{"disconnected"===i&&r()})}onPeerDisconnected(n){this.deleteConnectionIfExists(n.peer),this.broadcastAndToSelf({command:"DISCONNECTED",name:n.peer})}destroy(){var n;null===(n=this.peer)||void 0===n||n.destroy(),this.isConnected=!1,this.isHost=!1,this.messageSubject.reset(),this.connections={}}messageHandler(n){Pi.debug("incomingMessage",n),this.isHost&&"BROADCAST"===n.type?this.broadcast(n.data,{from:n.from,echo:n.echoBroadcast}):"DISCONNECTED"===n.data.command&&this.deleteConnectionIfExists(n.data.name),this.messageSubject.subject.next(n)}addConnectionIfNotExist(n,r){n in this.connections||(Pi.info(`new connection! ${n}`),this.connections[n]=r,this.connectionAdded.next(n))}deleteConnectionIfExists(n){n in this.connections&&(delete this.connections[n],this.connectionRemoved.next(n))}sendMessage(n,r){if(!(n in this.connections))return n===this.getId()?void this.messageSubject.subject.next(r):void Pi.warn(`cant send message ${this.getId()} ==> ${n}, ${r}`);Pi.debug(`SEND MESSAGE TO ${n}`,r),this.connections[n].send(r)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Se({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),lD=(()=>{class t{constructor(n,r){this.peerToPeerService=n,this.router=r}canActivate(n,r){return!!this.peerToPeerService.getIsConnected()||this.router.parseUrl(hr.JOIN+"/"+n.params.id)}}return t.\u0275fac=function(n){return new(n||t)(he(Ps),he(sn))},t.\u0275prov=Se({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class a2{constructor(e){this.active=!0,this.id=e}}class c2{constructor(e){this.x=0,this.y=0,this.letter="A",this.dropIndex=-1,this.lastClicked=!1,this.id=e,this.invalid=!1}}class dD{constructor(){this._dropzones=null,this.squares=[]}get dropzones(){return this._dropzones||(this._dropzones=Array(528).fill(null).map((e,n)=>new a2(n))),this._dropzones}set dropzones(e){this._dropzones=e}getDropzone(e){const n=parseInt(e.getAttribute("data-id"));return this.getDropzoneFromId(n)}getDropzoneFromId(e){return-1===e?null:this.dropzones[e]}getSquareFromId(e){const n=this.squares.find(i=>i.id===e);if(n)return n;const r=new c2(e);return this.squares.push(r),r}getSquareFromEl(e){return this.getSquareFromId(parseInt(e.getAttribute("data-id")))}}class fD{constructor(e){this.tilesUsed=0,this.totalTiles=0,this.boardState=new dD,this.isEliminated=!1,this.isSpectator=!1,this.disconnected=!1,this.id=e}}class hD{constructor(){this.subject=new z,this.q=[]}add(e){this.q.push(e),this.subject.next()}getLength(){return this.q.length}pop(){return this.q.shift()}}class pD{constructor(e){this.v=e}updateByAssignment(e,n){n in e&&(this.v[n]=e[n])}}class l2{updateBoard(e,n){const r=this.getInvSquares(e.squares),i=this.getInvSquares(n.squares),o=[];for(let s of e.squares){if(!(s.id in i)){o.push(s.id);continue}const a=i[s.id],u=new pD(s);u.updateByAssignment(a,"dropIndex"),u.updateByAssignment(a,"lastClicked"),u.updateByAssignment(a,"letter"),u.updateByAssignment(a,"x"),u.updateByAssignment(a,"y"),u.updateByAssignment(a,"invalid")}for(let s of n.squares)s.id in r||e.squares.push(s);e.squares=e.squares.filter(s=>!o.includes(s.id))}getInvSquares(e){const n={};for(let r of e)n[r.id]=r;return n}}const gD=["isEliminated","isSpectator","tilesUsed","name","disconnected","totalTiles"];class u2{updatePlayer(e,n){const r=new pD(e);for(let i of gD)r.updateByAssignment(n,i);(new l2).updateBoard(e.boardState,n.boardState)}}class mD{}class yD{}class uo{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(n=>{const r=n.indexOf(":");if(r>0){const i=n.slice(0,r),o=i.toLowerCase(),s=n.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(n=>{let r=e[n];const i=n.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(n,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof uo?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){const n=new uo;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof uo?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){const n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,n);const i=("a"===e.op?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":const o=e.value;if(o){let s=this.headers.get(n);if(!s)return;s=s.filter(a=>-1===o.indexOf(a)),0===s.length?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}else this.headers.delete(n),this.normalizedNames.delete(n)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}}class d2{encodeKey(e){return vD(e)}encodeValue(e){return vD(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const h2=/%(\d[a-f0-9])/gi,p2={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function vD(t){return encodeURIComponent(t).replace(h2,(e,n)=>{var r;return null!==(r=p2[n])&&void 0!==r?r:e})}function _D(t){return`${t}`}class Oo{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new d2,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{const o=i.indexOf("="),[s,a]=-1==o?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],u=n.get(s)||[];u.push(a),n.set(s,u)}),n}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{const r=e.fromObject[n];this.map.set(n,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){const n=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const n=new Oo({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const n=("a"===e.op?this.map.get(e.param):void 0)||[];n.push(_D(e.value)),this.map.set(e.param,n);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(_D(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class g2{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}keys(){return this.map.keys()}}function bD(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function CD(t){return"undefined"!=typeof Blob&&t instanceof Blob}function wD(t){return"undefined"!=typeof FormData&&t instanceof FormData}class Vl{constructor(e,n,r,i){let o;if(this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new uo),this.context||(this.context=new g2),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=n;else{const a=n.indexOf("?");this.urlWithParams=n+(-1===a?"?":a<n.length-1?"&":"")+s}}else this.params=new Oo,this.urlWithParams=n}serializeBody(){return null===this.body?null:bD(this.body)||CD(this.body)||wD(this.body)||function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Oo?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||wD(this.body)?null:CD(this.body)?this.body.type||null:bD(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Oo?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var n;const r=e.method||this.method,i=e.url||this.url,o=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,a=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,u=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let h=e.headers||this.headers,m=e.params||this.params;const E=null!==(n=e.context)&&void 0!==n?n:this.context;return void 0!==e.setHeaders&&(h=Object.keys(e.setHeaders).reduce((k,N)=>k.set(N,e.setHeaders[N]),h)),e.setParams&&(m=Object.keys(e.setParams).reduce((k,N)=>k.set(N,e.setParams[N]),m)),new Vl(r,i,s,{params:m,headers:h,context:E,reportProgress:u,responseType:o,withCredentials:a})}}var Xt=(()=>((Xt=Xt||{})[Xt.Sent=0]="Sent",Xt[Xt.UploadProgress=1]="UploadProgress",Xt[Xt.ResponseHeader=2]="ResponseHeader",Xt[Xt.DownloadProgress=3]="DownloadProgress",Xt[Xt.Response=4]="Response",Xt[Xt.User=5]="User",Xt))();class wm{constructor(e,n=200,r="OK"){this.headers=e.headers||new uo,this.status=void 0!==e.status?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Em extends wm{constructor(e={}){super(e),this.type=Xt.ResponseHeader}clone(e={}){return new Em({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class bf extends wm{constructor(e={}){super(e),this.type=Xt.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new bf({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class ED extends wm{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Dm(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let DD=(()=>{class t{constructor(n){this.handler=n}request(n,r,i={}){let o;if(n instanceof Vl)o=n;else{let u,h;u=i.headers instanceof uo?i.headers:new uo(i.headers),i.params&&(h=i.params instanceof Oo?i.params:new Oo({fromObject:i.params})),o=new Vl(n,r,void 0!==i.body?i.body:null,{headers:u,context:i.context,params:h,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const s=Be(o).pipe(Ka(u=>this.handler.handle(u)));if(n instanceof Vl||"events"===i.observe)return s;const a=s.pipe(ws(u=>u instanceof bf));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(pe(u=>{if(null!==u.body&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return a.pipe(pe(u=>{if(null!==u.body&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return a.pipe(pe(u=>{if(null!==u.body&&"string"!=typeof u.body)throw new Error("Response is not a string.");return u.body}));case"json":default:return a.pipe(pe(u=>u.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:(new Oo).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,i={}){return this.request("PATCH",n,Dm(i,r))}post(n,r,i={}){return this.request("POST",n,Dm(i,r))}put(n,r,i={}){return this.request("PUT",n,Dm(i,r))}}return t.\u0275fac=function(n){return new(n||t)(he(mD))},t.\u0275prov=Se({token:t,factory:t.\u0275fac}),t})();class SD{constructor(e,n){this.next=e,this.interceptor=n}handle(e){return this.interceptor.intercept(e,this.next)}}const TD=new Ge("HTTP_INTERCEPTORS");let v2=(()=>{class t{intercept(n,r){return r.handle(n)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Se({token:t,factory:t.\u0275fac}),t})();const _2=/^\)\]\}',?\n/;let ID=(()=>{class t{constructor(n){this.xhrFactory=n}handle(n){if("JSONP"===n.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new R(r=>{const i=this.xhrFactory.build();if(i.open(n.method,n.urlWithParams),n.withCredentials&&(i.withCredentials=!0),n.headers.forEach((N,H)=>i.setRequestHeader(N,H.join(","))),n.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!n.headers.has("Content-Type")){const N=n.detectContentTypeHeader();null!==N&&i.setRequestHeader("Content-Type",N)}if(n.responseType){const N=n.responseType.toLowerCase();i.responseType="json"!==N?N:"text"}const o=n.serializeBody();let s=null;const a=()=>{if(null!==s)return s;const N=1223===i.status?204:i.status,H=i.statusText||"OK",Z=new uo(i.getAllResponseHeaders()),K=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(i)||n.url;return s=new Em({headers:Z,status:N,statusText:H,url:K}),s},u=()=>{let{headers:N,status:H,statusText:Z,url:K}=a(),ae=null;204!==H&&(ae=void 0===i.response?i.responseText:i.response),0===H&&(H=ae?200:0);let re=H>=200&&H<300;if("json"===n.responseType&&"string"==typeof ae){const ve=ae;ae=ae.replace(_2,"");try{ae=""!==ae?JSON.parse(ae):null}catch(Ie){ae=ve,re&&(re=!1,ae={error:Ie,text:ae})}}re?(r.next(new bf({body:ae,headers:N,status:H,statusText:Z,url:K||void 0})),r.complete()):r.error(new ED({error:ae,headers:N,status:H,statusText:Z,url:K||void 0}))},h=N=>{const{url:H}=a(),Z=new ED({error:N,status:i.status||0,statusText:i.statusText||"Unknown Error",url:H||void 0});r.error(Z)};let m=!1;const E=N=>{m||(r.next(a()),m=!0);let H={type:Xt.DownloadProgress,loaded:N.loaded};N.lengthComputable&&(H.total=N.total),"text"===n.responseType&&!!i.responseText&&(H.partialText=i.responseText),r.next(H)},k=N=>{let H={type:Xt.UploadProgress,loaded:N.loaded};N.lengthComputable&&(H.total=N.total),r.next(H)};return i.addEventListener("load",u),i.addEventListener("error",h),i.addEventListener("timeout",h),i.addEventListener("abort",h),n.reportProgress&&(i.addEventListener("progress",E),null!==o&&i.upload&&i.upload.addEventListener("progress",k)),i.send(o),r.next({type:Xt.Sent}),()=>{i.removeEventListener("error",h),i.removeEventListener("abort",h),i.removeEventListener("load",u),i.removeEventListener("timeout",h),n.reportProgress&&(i.removeEventListener("progress",E),null!==o&&i.upload&&i.upload.removeEventListener("progress",k)),i.readyState!==i.DONE&&i.abort()}})}}return t.\u0275fac=function(n){return new(n||t)(he(Fw))},t.\u0275prov=Se({token:t,factory:t.\u0275fac}),t})();const Sm=new Ge("XSRF_COOKIE_NAME"),Tm=new Ge("XSRF_HEADER_NAME");class PD{}let C2=(()=>{class t{constructor(n,r,i){this.doc=n,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=Pw(n,this.cookieName),this.lastCookieString=n),this.lastToken}}return t.\u0275fac=function(n){return new(n||t)(he(gn),he(wd),he(Sm))},t.\u0275prov=Se({token:t,factory:t.\u0275fac}),t})(),Im=(()=>{class t{constructor(n,r){this.tokenService=n,this.headerName=r}intercept(n,r){const i=n.url.toLowerCase();if("GET"===n.method||"HEAD"===n.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(n);const o=this.tokenService.getToken();return null!==o&&!n.headers.has(this.headerName)&&(n=n.clone({headers:n.headers.set(this.headerName,o)})),r.handle(n)}}return t.\u0275fac=function(n){return new(n||t)(he(PD),he(Tm))},t.\u0275prov=Se({token:t,factory:t.\u0275fac}),t})(),w2=(()=>{class t{constructor(n,r){this.backend=n,this.injector=r,this.chain=null}handle(n){if(null===this.chain){const r=this.injector.get(TD,[]);this.chain=r.reduceRight((i,o)=>new SD(i,o),this.backend)}return this.chain.handle(n)}}return t.\u0275fac=function(n){return new(n||t)(he(yD),he(ht))},t.\u0275prov=Se({token:t,factory:t.\u0275fac}),t})(),E2=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:Im,useClass:v2}]}}static withOptions(n={}){return{ngModule:t,providers:[n.cookieName?{provide:Sm,useValue:n.cookieName}:[],n.headerName?{provide:Tm,useValue:n.headerName}:[]]}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Cn({type:t}),t.\u0275inj=Lt({providers:[Im,{provide:TD,useExisting:Im,multi:!0},{provide:PD,useClass:C2},{provide:Sm,useValue:"XSRF-TOKEN"},{provide:Tm,useValue:"X-XSRF-TOKEN"}]}),t})(),D2=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Cn({type:t}),t.\u0275inj=Lt({providers:[DD,{provide:mD,useClass:w2},ID,{provide:yD,useExisting:ID}],imports:[[E2.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})();const S2=_f("dictionary");let T2=(()=>{class t{constructor(n,r){this.httpClient=n,this.baseHref=r,this.dict=new Set,window.fixDictionary=()=>this.init(),window.checkWord=i=>this.hasWord(i),this.init()}init(){var n=this;return co(function*(){return n.httpClient.get(n.baseHref+"assets/csw2019.txt",{responseType:"text"}).subscribe(r=>{n.addAllWords(r.split("\r\n")),n.addAllWords(r.split("\n"))})})()}addAllWords(n){for(let r of n)this.dict.add(r)}hasWord(n){return n=n.toUpperCase(),S2.info(`hasWord(${n}) = ${this.dict.has(n)}`),this.dict.has(n)}}return t.\u0275fac=function(n){return new(n||t)(he(DD),he(Ya))},t.\u0275prov=Se({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),MD=(()=>{class t{constructor(n){this.dictionaryService=n}getInvalidSquares(n){const r=[];for(let m=0;m<22;++m)r.push(Array(22).fill(null));for(const m of n)r[Math.floor(m.dropIndex/22)][m.dropIndex%22]=m;const i=new xD,o=new xD;for(let m=0;m<22;++m){for(let E=0;E<22;++E)i.next(r[m][E]),o.next(r[E][m]);i.clear(),o.clear()}const a=i.squares.concat(o.squares).filter(m=>this.isInvalidWord(m)),u=new Set,h=[];for(let m of a)for(let E of m)E.id in u||(u.add(E.id),h.push(E));return h}isInvalidWord(n){if(1===n.length)return!1;const r=n.map(i=>i.letter);return!this.dictionaryService.hasWord(r.join(""))}}return t.\u0275fac=function(n){return new(n||t)(he(T2))},t.\u0275prov=Se({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class xD{constructor(){this.squares=[],this.currentArr=[]}next(e){e?this.currentArr.push(e):this.clear()}clear(){this.currentArr.length&&this.squares.push(this.currentArr),this.currentArr=[]}}let I2=(()=>{class t{constructor(){}isOneComponent(n){return 1===this.getNumComponents(n)}getNumComponents(n){const r=n.map(h=>h.dropIndex),i=new Set(r),o=[],s={},a={};for(const h of r)o.push(h);let u=0;for(;o.length;){const h=o.pop();if(!(h in a)){a[h]=1,h in s||(s[h]=u++);for(const m of this.getAdjacentSquares(h))i.has(m)&&(s[m]=s[h],a[m]||o.push(m))}}return u}*getAdjacentSquares(n){const r=n%22;yield n-22,yield n+22,r>0&&(yield n-1),r<21&&(yield n+1)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Se({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const RD="bananagrams-";let P2=(()=>{class t{constructor(){this.localState=this.getLocalState()}getLocalState(){const n=localStorage.getItem(RD);if(null===n)return this.getDefaultLocalState();try{return JSON.parse(n)}catch(r){return this.getDefaultLocalState()}}getDefaultLocalState(){return{previousIds:[]}}updateLocalState(){localStorage.setItem(RD,JSON.stringify(this.localState))}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Se({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const AD=(0,Ll.getLogger)("game");let Ms=(()=>{class t{constructor(n,r,i,o,s){this.peerToPeerService=n,this.invalidSquareFinderService=r,this.router=i,this.boardAlgorithmsService=o,this.localStorageService=s,this.letter$=new hD,this.gameStart$=new z,this.winner$=new z,this.loser$=new z,this.subs=[],this.state=t.getInitialState()}initFromPeerToPeer(){if(this.subs.length>0)return;this.state.players=[];const n=this.peerToPeerService.getId(),r=this.localStorageService.localState.previousIds;r.includes(n)||(r.push(n),this.localStorageService.localState.previousIds=r.slice(Math.max(r.length-10,0)),this.localStorageService.updateLocalState()),this.subs=[this.peerToPeerService.connectionRemoved.subscribe(i=>{this.peerToPeerService.getIsHost();const o=this.getPlayerById(i);o&&(o.disconnected=!0)}),this.peerToPeerService.getMessageObservable().subscribe(i=>{switch(i.data.command){case"UPDATE_PLAYER":{let o=this.getPlayerById(i.data.playerId);o||(o=new fD(i.data.playerId),this.state.players.push(o),this.localStorageService.localState.previousIds.includes(o.id)&&o.id!==this.peerToPeerService.getId()&&(AD.info(`has been ${o.id} before.`),this.state.rejoinCandidate=o)),(new u2).updatePlayer(o,i.data.state)}break;case"GAME_START":this.letter$=new hD,this.resetLocalState(),this.gameStart$.next(!0);break;case"REJOIN_AS_PLAYER":{AD.info("REJOIN AS PLAYER",i);const o=this.getPlayerById(i.data.toPlayer);o&&(this.state.players=this.state.players.filter(s=>s.id!==i.from),o.id=i.from,o.disconnected=!1,o.id===this.peerToPeerService.getId()&&(this.state.rejoinCandidate=null))}break;case"RECEIVE_LETTERS":{const o=this.getPlayerById(i.data.playerId);for(let s of i.data.letters)i.data.playerId===this.peerToPeerService.getId()&&this.letter$.add(s);o.totalTiles=i.data.playerTotalTiles}break;case"LOSER":this.getPlayerById(i.data.playerId).isEliminated=!0,i.data.playerId===this.peerToPeerService.getId()&&this.loser$.next();break;case"PLAYER_DISCONNECTED":{let o=this.getPlayerById(i.data.playerId);o&&(o.disconnected=!0)}break;case"WINNER":this.winner$.next();break;case"UPDATE_SHARED_STATE":Object.assign(this.state,i.data.state);break;case"RETURN_TO_LOBBY":this.router.navigate([hr.LOBBY+"/"+this.peerToPeerService.getHostId()])}})],this.peerToPeerService.sendSingleMessage(this.peerToPeerService.getHostId(),{command:"REQUEST_ALL_STATE"})}dispose(){this.state=t.getInitialState(),this.subs.forEach(n=>n.unsubscribe),this.subs=[]}resetLocalState(){this.state.players.forEach(n=>{n.boardState=new dD,n.tilesUsed=0,n.isEliminated=!1,n.isSpectator=!1}),this.state.canClaimSuccess=!1}rejoinAsPlayer(n){this.peerToPeerService.broadcastAndToSelf({command:"REJOIN_AS_PLAYER",toPlayer:n.id})}updatePlayer(n){let r=this.getOrCreateMyPlayer();r.name=n,this.sendPlayerUpdateMessage(r),this.sendPlayerUpdateMessage(r,this.peerToPeerService.getId())}updateAfterDrop(){let n=this.getOrCreateMyPlayer();n.tilesUsed=n.boardState.squares.reduce((r,i)=>r+(i.dropIndex<484?1:0),0),this.state.canClaimSuccess=this.canClaimSuccess(),this.sendUpdateMessage(this.getOrCreateMyPlayer())}canClaimSuccess(){const n=this.getOrCreateMyPlayer();return n.tilesUsed===n.totalTiles&&this.boardAlgorithmsService.isOneComponent(n.boardState.squares)}sendUpdateMessage(n){this.sendPlayerUpdateMessage(n)}sendPlayerUpdateMessage(n,r=null){const i=gD.filter(a=>"boardState"!==a);let o={};for(const a of i)o[a]=n[a];o.boardState={dropzones:[],squares:n.boardState.squares};const s={command:"UPDATE_PLAYER",state:o,playerId:n.id};r?this.peerToPeerService.sendSingleMessage(r,s):this.peerToPeerService.broadcast(s)}claimSuccess(){let n=this.getPlayerById(this.peerToPeerService.getId());const r=this.invalidSquareFinderService.getInvalidSquares(n.boardState.squares);this.peerToPeerService.sendSingleMessage(this.peerToPeerService.getHostId(),{command:"CLAIM_SUCCESS",boardValid:0===r.length,numLetters:n.totalTiles})}dump(n){let r=this.getPlayerById(this.peerToPeerService.getId());r.boardState.squares=r.boardState.squares.filter(i=>i.id!==n.id),this.peerToPeerService.sendSingleMessage(this.peerToPeerService.getHostId(),{command:"DUMP_LETTER",letter:n.letter})}getOrCreateMyPlayer(){let n=this.getPlayerById(this.peerToPeerService.getId());return n||(n=new fD(this.peerToPeerService.getId())),this.state.myPlayer=n}static getInitialState(){return{canDump:!0,canClaimSuccess:!1,winnerId:null,totalTilesInGame:0,tilesUsedByPlayers:0,tilesRemaining:0,players:[],totalPeerCount:0,inGame:!1,nextPeelWins:!1,gameOver:!1,myPlayer:null,rejoinCandidate:null}}getPlayerById(n){return this.state.players.find(r=>r.id==n)}}return t.\u0275fac=function(n){return new(n||t)(he(Ps),he(MD),he(sn),he(I2),he(P2))},t.\u0275prov=Se({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class M2{runAnimation(){let e=[];for(let i=0;i<50;++i){const o=document.createElement("div");o.classList.add("banana"),e.push({div:o,endX:600*Math.random()-300,rot:(Math.random()<=.5?-1:1)*(720+360*Math.random()*5),offsetT:140*Math.random()})}for(let i of e)document.getElementById("board").appendChild(i.div);const n=140;this.frameTimer=new R2;let r=0;this.frameTimer.onGenerateFrame=()=>{for(let i of e){let o=(r+i.offsetT)%n;const h=o>=40&&o<=100?1:o<40?o/40:(140-o)/40;i.div.style.transform=`translateX(${i.endX*(o/n)}px) translateY(${.035*(o+80)*(o-140)}px) rotate(${i.rot*(o/n)}deg)`,i.div.style.opacity=h.toString()}r+=1,r%=n},this.frameTimer.start()}stopAnimation(){clearTimeout(this.timer),this.frameTimer&&this.frameTimer.stop()}}class R2{constructor(){this.running=!1,this.lastFrameTime=null,this.onAnimationFrame=e=>{this.requestAnimationFrame();let n=e%this.interval,r=e-n;if(!this.lastFrameTime)return void(this.lastFrameTime=r);let i=Math.round((r-this.lastFrameTime)/this.interval);if(0===i)return;this.generateFrame();let o=this.interval-n;for(let s=1;s<i;s++)setTimeout(()=>{this.generateFrame()},s*o/i)},this.onAnimationFrame=this.onAnimationFrame.bind(this),this.running=!0,this.interval=1e3/60.098,this.lastFrameTime=!1}start(){this.running=!0,this.requestAnimationFrame()}stop(){this.running=!1,this.requestId&&window.cancelAnimationFrame(this.requestId),this.lastFrameTime=!1}requestAnimationFrame(){this.requestId=window.requestAnimationFrame(this.onAnimationFrame)}generateFrame(){this.onGenerateFrame(),this.lastFrameTime+=this.interval}}class Pm{constructor(){this.d=new Map,this._size=0}get size(){return this._size}add(e){this.d.has(e)?(this.d.set(e,this.d.get(e)+1),this._size++):(this.d.set(e,1),this._size++)}delete(e){this.d.has(e)&&(this.d.set(e,this.d.get(e)-1),this._size--)}get(e){return this.d.get(e)}[Symbol.iterator](){let e=0,n=[];for(let[r,i]of this.d.entries())for(let o=0;o<i;++o)n.push(r);return{next:()=>({done:e===n.length,value:n[e++]})}}}let OD=(()=>{class t{constructor(){this.numTilesPerPlayerOverride=null,this.initialTilesOverride=null}getInitialTiles(n=0){if(this.initialTilesOverride)return this.initialTilesOverride;let r=new Array;const i=1+Math.floor((n-1)/8);for(let[o,s]of A2.entries())for(let a=0;a<s*i;++a)r.push(o);return r}getNumTilesPerPlayer(n){return this.numTilesPerPlayerOverride?this.numTilesPerPlayerOverride:1<=n&&n<=4?21:5<=n&&n<=6?15:11}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Se({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const A2=new Map([["A",13],["B",3],["C",3],["D",6],["E",18],["F",3],["G",4],["H",3],["I",12],["J",2],["K",2],["L",5],["M",3],["N",8],["O",11],["P",3],["Q",2],["R",9],["S",6],["T",9],["U",6],["V",3],["W",3],["X",2],["Y",3],["Z",2]]),O2=(0,Ll.getLogger)("game-host");let Cf=(()=>{class t{constructor(n,r,i){this.peerToPeerService=n,this.gameService=r,this.initialTilesProviderService=i,this.state=t.getDefaultState(),this.subs=[],this.subs=[this.peerToPeerService.connectionAdded.subscribe(()=>this.updateSharedState()),this.peerToPeerService.connectionRemoved.subscribe(o=>{const s=this.gameService.getPlayerById(o);s&&this.peerToPeerService.broadcastAndToSelf({command:"PLAYER_DISCONNECTED",playerId:s.id}),this.updateSharedState()}),this.peerToPeerService.getMessageObservable().subscribe(o=>{var s;switch(o.data.command){case"DUMP_LETTER":{this.state.lettersPerPlayer[o.from].delete(o.data.letter);let u=[o.data.letter];this.canDump&&(u=this.takeLetters(3),this.state.letters.push(o.data.letter)),this.sendPlayerLetters(o.from,u),this.updateSharedState()}break;case"CLAIM_SUCCESS":{const a=this.state.lettersPerPlayer[o.from];if(a.size!==o.data.numLetters){O2.warn(`CLAIM_SUCCESS: host suggests ${a.size}, message has ${o.data.numLetters}`);break}this.nextPeelWins?o.data.boardValid?this.state.winnerId||(this.state.winnerId=o.from,this.updateSharedState(),this.peerToPeerService.broadcastAndToSelf({command:"WINNER"})):(this.state.losers.push(o.from),this.peerToPeerService.broadcastAndToSelf({command:"LOSER",playerId:o.from}),this.addLetters(a)):this.giveEveryPlayerNLetters(1),this.updateSharedState()}break;case"REQUEST_ALL_STATE":for(let a of this.gameService.state.players)this.gameService.sendPlayerUpdateMessage(a,o.from);this.updateSharedState();break;case"REJOIN_AS_PLAYER":this.state.lettersPerPlayer[o.from]=null!==(s=this.state.lettersPerPlayer[o.data.toPlayer])&&void 0!==s?s:new Pm,this.state.lettersPerPlayer[o.data.toPlayer]=new Pm}})]}createGame(){var n=this;return co(function*(){yield n.peerToPeerService.setupAsHost()})()}startGame(){var n=this;return co(function*(){n.dispose(),n.state.inGame=!0,n.peerToPeerService.broadcastAndToSelf({command:"GAME_START"});const r=n.gameService.state.players.length;for(let o of n.gameService.state.players)n.state.lettersPerPlayer[o.id]=new Pm;n.state.letters=n.initialTilesProviderService.getInitialTiles(r),t.shuffleArray(n.state.letters);const i=n.initialTilesProviderService.getNumTilesPerPlayer(r);n.state.totalTilesInGame=n.state.letters.length,n.giveEveryPlayerNLetters(i,!0),n.updateSharedState()})()}dispose(){this.state=t.getDefaultState()}updateSharedState(){this.peerToPeerService.broadcastAndToSelf({command:"UPDATE_SHARED_STATE",state:this.getSharedState()})}returnToLobby(){this.state.inGame=!1,this.peerToPeerService.broadcastAndToSelf({command:"RETURN_TO_LOBBY"})}giveEveryPlayerNLetters(n,r=!1){for(const i of this.getActivePlayers(r)){if(i.disconnected)continue;const o=this.takeLetters(n);this.sendPlayerLetters(i.id,o)}}getActivePlayers(n=!1){return this.gameService.state.players.filter(r=>{var i,o;return!r.isEliminated&&(n||(null!==(o=null===(i=this.state.lettersPerPlayer[r.id])||void 0===i?void 0:i.size)&&void 0!==o?o:0)>0)})}sendPlayerLetters(n,r){for(const i of r)this.state.lettersPerPlayer[n].add(i);this.peerToPeerService.broadcastAndToSelf({command:"RECEIVE_LETTERS",playerId:n,playerTotalTiles:this.state.lettersPerPlayer[n].size,letters:r})}get nextPeelWins(){const n=this.getActivePlayers().length;return this.state.letters.length<n}get canDump(){return this.state.letters.length>=3}addLetters(n){this.state.letters=this.state.letters.concat([...n]),t.shuffleArray(this.state.letters)}static shuffleArray(n){for(let r=n.length-1;r>0;r--){const i=Math.floor(Math.random()*(r+1));[n[r],n[i]]=[n[i],n[r]]}}takeLetters(n){if(n>this.state.letters.length)throw new Error(`tried to take ${n} letters, only ${this.state.letters.length} available`);const r=this.state.letters.slice(0,n);return this.state.letters=this.state.letters.slice(n),r}static getDefaultState(){return{letters:t.getDefaultLetters(),lettersPerPlayer:{},totalTilesInGame:0,losers:[],winnerId:null,inGame:!1}}static getDefaultLetters(){let n=new Array;for(let r=0;r<26;++r){let i=String.fromCharCode("A".charCodeAt(0)+r);for(let o=0;o<2;++o)n.push(i)}return t.shuffleArray(n),n}getSharedState(){let n=0;for(let r of Object.keys(this.state.lettersPerPlayer))this.state.losers.includes(r)||(n+=this.state.lettersPerPlayer[r].size);return{winnerId:this.state.winnerId,canDump:this.canDump,nextPeelWins:this.nextPeelWins,tilesUsedByPlayers:n,totalTilesInGame:this.state.totalTilesInGame,tilesRemaining:this.state.letters.length,totalPeerCount:1+this.peerToPeerService.getConnections().length,inGame:this.state.inGame,gameOver:null!=this.state.winnerId||this.state.losers.length===Object.keys(this.state.lettersPerPlayer).length}}}return t.\u0275fac=function(n){return new(n||t)(he(Ps),he(Ms),he(OD))},t.\u0275prov=Se({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var k2=Fe(748),Mm=Fe.n(k2);function N2(t,e){if(1&t&&(nt(0,"div",10),Wt(1),rt()),2&t){const n=e.$implicit,r=tn();rd("transform","translate("+n.x+"px, "+n.y+"px"),hs("draggable",!r.readonly)("last-clicked",n.lastClicked)("invalid",n.invalid),dr("data-id",n.id),ct(1),od(n.letter)}}function F2(t,e){1&t&&Wr(0,"div",11),2&t&&dr("data-id",e.$implicit)}function L2(t,e){1&t&&Wr(0,"div",11),2&t&&dr("data-id",e.$implicit)}const V2=_f("board");let j2=(()=>{class t{constructor(n){this.gameService=n,this.readonly=!1,this.GRID_SIZE=22,this.topDropzones=Array(484).fill(null).map((r,i)=>i),this.bottomDropzones=Array(44).fill(null).map((r,i)=>484+i),this.readonlyGameServiceState=n.state,this.clickHander=this.clickEventListener.bind(this)}ngOnInit(){let n=this.boardState.squares.filter(r=>r.lastClicked);n.length&&(this.lastSquare=n[0]);for(let r=1;r<n.length;++r)n[r].lastClicked=!1}ngOnDestroy(){var n;null===(n=this.letterSubscription)||void 0===n||n.unsubscribe(),document.removeEventListener("click",this.clickHander)}get boardState(){return this.playerModel.boardState}ngAfterViewInit(){this.readonly||(this.unloadQueue(),this.letterSubscription=this.gameService.letter$.subject.subscribe(()=>{this.unloadQueue()}),Mm()(".draggable").draggable({listeners:{start:n=>{},end:n=>{},move:n=>{const r=this.boardState.getSquareFromEl(n.target),o=document.getElementById("board").getBoundingClientRect();this.setElementCoords(r,n.clientX-o.left-12.5,n.clientY-o.top-12.5)}}}).on("down",n=>{const i=this.boardState.getSquareFromEl(n.target);this.updateLastSquare(i),this.setDropzoneActive(i.dropIndex,!0)}).on("up",n=>{const i=this.boardState.getSquareFromEl(n.target),o=document.querySelector(`.dropzone[data-id='${i.dropIndex}']`);this.setCoordsBasedOnDropZone(i,o),this.gameService.updateAfterDrop()}),Mm()(".dropzone.droppable").dropzone({overlap:.25,ondragenter:n=>{const i=this.boardState.getSquareFromEl(n.relatedTarget),o=this.boardState.getDropzone(n.target);o&&(i.dropIndex=o.id),n.target.classList.add("drop-target")},ondragleave:function(n){n.target.classList.remove("drop-target")},ondropdeactivate:function(n){n.target.classList.remove("drop-target")},ondrop:n=>{}}),document.addEventListener("click",this.clickHander))}setDropzoneActive(n,r){const i=this.boardState.getDropzoneFromId(n);i&&(i.active=r)}clickEventListener(n){const r=n.target;(null==r?void 0:r.classList.contains("draggable"))||this.updateLastSquare(null)}claimSuccess(){this.gameService.claimSuccess()}dump(){if(!this.lastSquare)return;const n=this.lastSquare;this.setDropzoneActive(n.dropIndex,!0),this.gameService.dump(n),this.updateLastSquare(null),this.gameService.updateAfterDrop()}unloadQueue(){for(;this.gameService.letter$.getLength()>0;)this.addSquare(this.gameService.letter$.pop())}addSquare(n){window.requestAnimationFrame(()=>{const r=this.boardState.squares.length,i=this.boardState.getSquareFromId(t.squareIdCounter++);this.boardState.squares.length===r&&V2.warn(`could not add new square... apparently ${i.id} already exists.`),i.letter=n,(()=>{const s=a=>{const u=document.querySelector(`.dropzone[data-id='${a}']`);return!!this.boardState.getDropzone(u).active&&(this.setCoordsBasedOnDropZone(i,u),!0)};for(let a=0;a<44;++a)if(s(484+a))return;for(let a=483;a>=0;--a)if(s(a))return})(),this.gameService.updateAfterDrop()})}setCoordsBasedOnDropZone(n,r){const i=Mm().getElementRect(r),s=document.getElementById("board").getBoundingClientRect();this.setElementCoords(n,i.left-s.left-window.scrollX,i.top-s.top-window.scrollY),-1!=n.dropIndex&&this.setDropzoneActive(n.dropIndex,!0),n.dropIndex=this.boardState.getDropzone(r).id,this.setDropzoneActive(n.dropIndex,!1)}setElementCoords(n,r,i){n.x=r,n.y=i}updateLastSquare(n){this.lastSquare&&(this.lastSquare.lastClicked=!1),this.lastSquare=n,this.lastSquare&&(this.lastSquare.lastClicked=!0)}}return t.squareIdCounter=500,t.\u0275fac=function(n){return new(n||t)(ce(Ms))},t.\u0275cmp=tr({type:t,selectors:[["app-board"]],inputs:{playerModel:"playerModel",readonly:"readonly"},decls:15,vars:7,consts:[[2,"margin","auto","width","100%"],["id","board",2,"margin","auto","position","relative"],[1,"dropzoneHelper"],["class","square",3,"draggable","last-clicked","invalid","transform",4,"ngFor","ngForOf"],["id","topArea"],["class","dropzone droppable",4,"ngFor","ngForOf"],["id","startArea"],[2,"font-size","15px"],[1,"win",3,"disabled","click"],[1,"dump",3,"disabled","click"],[1,"square"],[1,"dropzone","droppable"]],template:function(n,r){1&n&&(nt(0,"body",0),nt(1,"div",1),nt(2,"div",2),vn(3,N2,2,10,"div",3),nt(4,"div",4),vn(5,F2,1,1,"div",5),rt(),nt(6,"div",6),nt(7,"div"),nt(8,"div",7),Wt(9),rt(),nt(10,"button",8),Rt("click",function(){return r.claimSuccess()}),Wt(11),rt(),nt(12,"button",9),Rt("click",function(){return r.dump()}),Wt(13,"dump"),rt(),rt(),vn(14,L2,1,1,"div",5),rt(),rt(),rt(),rt()),2&n&&(ct(3),wt("ngForOf",r.boardState.squares),ct(2),wt("ngForOf",r.topDropzones),ct(4),ps("tiles remaining: ",r.readonlyGameServiceState.tilesRemaining,""),ct(1),wt("disabled",!r.readonlyGameServiceState.canClaimSuccess||r.readonly),ct(1),od(r.readonlyGameServiceState.nextPeelWins?"win?":"peel"),ct(1),wt("disabled",!r.readonlyGameServiceState.canDump||!r.lastSquare),ct(2),wt("ngForOf",r.bottomDropzones))},directives:[qd],styles:[".square[_ngcontent-%COMP%]{background-color:#efe1ca;left:0;top:0;position:absolute;z-index:500;box-sizing:border-box;width:25px;height:25px;line-height:25px;border:1px solid;border-radius:2px;text-align:center;margin:0;padding:0;display:inline-block;font-size:20px}.square.draggable[_ngcontent-%COMP%]{cursor:pointer!important}.square.last-clicked[_ngcontent-%COMP%]{background:orange;z-index:50000}.square.invalid[_ngcontent-%COMP%]{background:red}#board[_ngcontent-%COMP%]{width:538px;font-size:0}#topArea[_ngcontent-%COMP%], #startArea[_ngcontent-%COMP%]{padding:5px}#topArea[_ngcontent-%COMP%]{background-color:brown}#startArea[_ngcontent-%COMP%]{background-color:gray;margin-top:0}.dropzoneHelper[_ngcontent-%COMP%]{font-size:0}.row[_ngcontent-%COMP%]{height:25px}.row[_ngcontent-%COMP%], .dropzone[_ngcontent-%COMP%]{margin:0;padding:0;display:inline-block}.pad-5[_ngcontent-%COMP%]{padding:5px}.dropzone[_ngcontent-%COMP%]{width:24px;height:24px}.drop-target[_ngcontent-%COMP%]{background-color:#29e;opacity:.6}[_ngcontent-%COMP%]:export{boardSize:22;startAreaRows:2}"]}),t})();function B2(t,e){if(1&t&&(nt(0,"p"),Wt(1),rt()),2&t){const n=tn().$implicit;ct(1),Jc("",n.tilesUsed," / ",n.totalTiles,"")}}function U2(t,e){1&t&&(nt(0,"p"),Wt(1,":("),rt())}function H2(t,e){if(1&t){const n=fs();nt(0,"button",5),Rt("click",function(){const o=gi(n).$implicit;return tn().selectPlayer(o)}),Wt(1),Wr(2,"br"),vn(3,B2,2,2,"p",2),vn(4,U2,2,0,"p",2),rt()}if(2&t){const n=e.$implicit,r=tn();hs("disconnected",n.disconnected)("active",(null==r.activePlayer?null:r.activePlayer.id)===n.id),ct(1),yp(" ",n.name,"",n.id===r.hostId?"(host)":"","",n.id===r.myId?"(you)":"",""),ct(2),wt("ngIf",!n.isEliminated),ct(1),wt("ngIf",n.isEliminated)}}function $2(t,e){if(1&t&&(nt(0,"p"),Wt(1),rt()),2&t){const n=tn();ct(1),ps("",n.winner.name," wins!")}}function z2(t,e){if(1&t){const n=fs();nt(0,"button",5),Rt("click",function(){return gi(n),tn().returnToLobby()}),Wt(1,"Return to lobby"),rt()}}function G2(t,e){if(1&t&&Wr(0,"app-board",7),2&t){const n=tn().$implicit,r=tn();rd("opacity",5),wt("playerModel",n)("readonly",n.id!==r.myId||null!==r.gameServiceState.winnerId||n.isEliminated)}}function W2(t,e){if(1&t&&(nt(0,"div"),vn(1,G2,1,4,"app-board",6),rt()),2&t){const n=e.$implicit,r=tn();ct(1),wt("ngIf",n.id===(null==r.activePlayer?null:r.activePlayer.id))}}let kD=(()=>{class t{constructor(n,r,i,o){this.gameService=n,this.peerToPeerService=r,this.gameHostService=i,this.invalidSquareService=o,this.isHost=!1}ngOnInit(){this.isHost=this.peerToPeerService.getIsHost(),this.activePlayer=this.gameService.getOrCreateMyPlayer(),this.myId=this.gameService.getOrCreateMyPlayer().id,this.hostId=this.peerToPeerService.getHostId(),this.gameServiceState=this.gameService.state,this.subs=[this.gameService.winner$.subscribe(()=>{this.activePlayer=this.gameService.getPlayerById(this.gameServiceState.winnerId),this.winner=this.activePlayer,this.playAnimation()}),this.gameService.loser$.subscribe(()=>{let n=this.gameService.getOrCreateMyPlayer().boardState.squares;this.gameService.getOrCreateMyPlayer().isEliminated=!0,this.invalidSquareService.getInvalidSquares(n).forEach(i=>{i.invalid=!0}),this.gameService.updateAfterDrop()})]}ngAfterViewInit(){}selectPlayer(n){var r;this.activePlayer=n.id===(null===(r=this.activePlayer)||void 0===r?void 0:r.id)?null:n}returnToLobby(){this.gameHostService.returnToLobby()}playAnimation(){(new M2).runAnimation()}}return t.\u0275fac=function(n){return new(n||t)(ce(Ms),ce(Ps),ce(Cf),ce(MD))},t.\u0275cmp=tr({type:t,selectors:[["app-board-container"]],decls:6,vars:4,consts:[[2,"display","flex"],[3,"disconnected","active","click",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"click"],[3,"opacity","playerModel","readonly",4,"ngIf"],[3,"playerModel","readonly"]],template:function(n,r){1&n&&(nt(0,"div",0),nt(1,"div"),vn(2,H2,5,9,"button",1),vn(3,$2,2,1,"p",2),vn(4,z2,2,0,"button",3),rt(),vn(5,W2,2,1,"div",4),rt()),2&n&&(ct(2),wt("ngForOf",r.gameServiceState.players),ct(1),wt("ngIf",r.gameServiceState.winnerId),ct(1),wt("ngIf",r.isHost&&r.gameServiceState.gameOver),ct(1),wt("ngForOf",r.gameServiceState.players))},directives:[qd,Yd,j2],styles:[".active[_ngcontent-%COMP%]{background:orange}p[_ngcontent-%COMP%]{margin:0;padding:0}button[_ngcontent-%COMP%]{display:block;width:100%}.disconnected[_ngcontent-%COMP%]{color:gray}"]}),t})(),q2=(()=>{class t{constructor(n){this.gameService=n}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)(ce(Ms))},t.\u0275cmp=tr({type:t,selectors:[["app-game"]],decls:1,vars:0,template:function(n,r){1&n&&Wr(0,"app-board-container")},directives:[kD],styles:[""]}),t})();const ND=_f("param-override");let FD=(()=>{class t{constructor(n){this.initialTilesProviderService=n}setupOverrides(n){(null==n?void 0:n.tiles)&&(ND.info("tiles override applied"),this.initialTilesProviderService.initialTilesOverride=null==n?void 0:n.tiles.split("")),(null==n?void 0:n.numTiles)&&(ND.info("numTiles override applied"),this.initialTilesProviderService.numTilesPerPlayerOverride=n.numTiles)}}return t.\u0275fac=function(n){return new(n||t)(he(OD))},t.\u0275prov=Se({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Y2=(()=>{class t{constructor(n,r,i,o,s,a){this.gameHostService=n,this.gameService=r,this.peerToPeerService=i,this.router=o,this.activatedRoute=s,this.paramOverrideService=a,this.loading=!1}ngOnInit(){this.gameHostService.dispose(),this.gameService.dispose(),this.peerToPeerService.dispose(),this.paramOverrideService.setupOverrides(this.activatedRoute.snapshot.queryParams)}createGame(){var n=this;return co(function*(){n.loading=!0;try{yield n.gameHostService.createGame(),n.router.navigate([hr.LOBBY+"/"+n.peerToPeerService.getHostId()])}finally{n.loading=!1}})()}}return t.\u0275fac=function(n){return new(n||t)(ce(Cf),ce(Ms),ce(Ps),ce(sn),ce(ao),ce(FD))},t.\u0275cmp=tr({type:t,selectors:[["app-home"]],decls:4,vars:1,consts:[[3,"disabled","click"]],template:function(n,r){1&n&&(nt(0,"h1"),Wt(1,"Bananagrams"),rt(),nt(2,"button",0),Rt("click",function(){return r.createGame()}),Wt(3,"create game"),rt()),2&n&&(ct(2),wt("disabled",r.loading))},styles:[""]}),t})();function Q2(t,e){1&t&&(nt(0,"div"),Wr(1,"div",1),rt())}function K2(t,e){if(1&t){const n=fs();nt(0,"div"),nt(1,"p"),Wt(2),rt(),nt(3,"button",2),Rt("click",function(){return gi(n),tn().tryConnect()}),Wt(4,"try again"),rt(),rt()}if(2&t){const n=tn();ct(2),ps("Error: ",n.error,"")}}let J2=(()=>{class t{constructor(n,r,i){this.peerToPeerService=n,this.activatedRoute=r,this.router=i,this.error=null}ngOnInit(){var n=this;return co(function*(){yield n.tryConnect()})()}tryConnect(){var n=this;return co(function*(){n.error=null;try{(!n.peerToPeerService.getIsConnected()||!n.peerToPeerService.getIsHost())&&(yield n.peerToPeerService.setupByConnectingToId(n.activatedRoute.snapshot.params.id)),n.router.navigate([hr.LOBBY+"/"+n.peerToPeerService.getHostId()])}catch(r){n.error=r}})()}}return t.\u0275fac=function(n){return new(n||t)(ce(Ps),ce(ao),ce(sn))},t.\u0275cmp=tr({type:t,selectors:[["app-join"]],decls:4,vars:2,consts:[[4,"ngIf"],[1,"loader"],[3,"click"]],template:function(n,r){1&n&&(nt(0,"p"),Wt(1,"joining..."),rt(),vn(2,Q2,2,0,"div",0),vn(3,K2,5,1,"div",0)),2&n&&(ct(2),wt("ngIf",!r.error),ct(1),wt("ngIf",r.error))},directives:[Yd],styles:[".loader[_ngcontent-%COMP%]{border:5px solid #f3f3f3;border-top:5px solid #555;border-radius:50%;width:50px;height:50px;animation:spin 1s linear infinite}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]}),t})();function wf(t,e){return new R(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const u=vt(t[a]);let h=!1;n.add(u.subscribe({next:m=>{h||(h=!0,s++),i[a]=m},error:m=>n.error(m),complete:()=>{o++,(o===r||!h)&&(s===r&&n.next(e?e.reduce((m,E,k)=>(m[E]=i[k],m),{}):i),n.complete())}}))}})}let LD=(()=>{class t{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}}return t.\u0275fac=function(n){return new(n||t)(ce(Zi),ce(fn))},t.\u0275dir=Me({type:t}),t})(),xs=(()=>{class t extends LD{}return t.\u0275fac=function(){let e;return function(r){return(e||(e=Cr(t)))(r||t)}}(),t.\u0275dir=Me({type:t,features:[It]}),t})();const Mi=new Ge("NgValueAccessor"),eB={provide:Mi,useExisting:yt(()=>Ef),multi:!0},nB=new Ge("CompositionEventMode");let Ef=(()=>{class t extends LD{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=Si()?Si().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(n){this.setProperty("value",null==n?"":n)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}}return t.\u0275fac=function(n){return new(n||t)(ce(Zi),ce(fn),ce(nB,8))},t.\u0275dir=Me({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,r){1&n&&Rt("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[At([eB]),It]}),t})();const xn=new Ge("NgValidators"),No=new Ge("NgAsyncValidators");function YD(t){return null!=t}function QD(t){const e=Qc(t)?vt(t):t;return td(e),e}function KD(t){let e={};return t.forEach(n=>{e=null!=n?Object.assign(Object.assign({},e),n):e}),0===Object.keys(e).length?null:e}function JD(t,e){return e.map(n=>n(t))}function XD(t){return t.map(e=>function(t){return!t.validate}(e)?e:n=>e.validate(n))}function xm(t){return null!=t?function(t){if(!t)return null;const e=t.filter(YD);return 0==e.length?null:function(n){return KD(JD(n,e))}}(XD(t)):null}function Rm(t){return null!=t?function(t){if(!t)return null;const e=t.filter(YD);return 0==e.length?null:function(n){return function(...t){if(1===t.length){const e=t[0];if(V(e))return wf(e,null);if(U(e)&&Object.getPrototypeOf(e)===Object.prototype){const n=Object.keys(e);return wf(n.map(r=>e[r]),n)}}if("function"==typeof t[t.length-1]){const e=t.pop();return wf(t=1===t.length&&V(t[0])?t[0]:t,null).pipe(pe(n=>e(...n)))}return wf(t,null)}(JD(n,e).map(QD)).pipe(pe(KD))}}(XD(t)):null}function tS(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function Am(t){return t?Array.isArray(t)?t:[t]:[]}function Df(t,e){return Array.isArray(t)?t.includes(e):t===e}function iS(t,e){const n=Am(e);return Am(t).forEach(i=>{Df(n,i)||n.push(i)}),n}function oS(t,e){return Am(e).filter(n=>!Df(t,n))}let sS=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=xm(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=Rm(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n){this.control&&this.control.reset(n)}hasError(n,r){return!!this.control&&this.control.hasError(n,r)}getError(n,r){return this.control?this.control.getError(n,r):null}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=Me({type:t}),t})(),$n=(()=>{class t extends sS{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(){let e;return function(r){return(e||(e=Cr(t)))(r||t)}}(),t.\u0275dir=Me({type:t,features:[It]}),t})();class Lo extends sS{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let cS=(()=>{class t extends class{constructor(e){this._cd=e}is(e){var n,r,i;return"submitted"===e?!!(null===(n=this._cd)||void 0===n?void 0:n.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}{constructor(n){super(n)}}return t.\u0275fac=function(n){return new(n||t)(ce(Lo,2))},t.\u0275dir=Me({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,r){2&n&&hs("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[It]}),t})();function jl(t,e){(function(t,e){const n=function(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(tS(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=function(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(tS(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();Pf(e._rawValidators,i),Pf(e._rawAsyncValidators,i)})(t,e),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&lS(t,e)})}(t,e),function(t,e){const n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&lS(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function Pf(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function lS(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function xf(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Bl="VALID",Rf="INVALID",tc="PENDING",Ul="DISABLED";function Vm(t){return(Bm(t)?t.validators:t)||null}function fS(t){return Array.isArray(t)?xm(t):t||null}function jm(t,e){return(Bm(e)?e.asyncValidators:t)||null}function hS(t){return Array.isArray(t)?Rm(t):t||null}function Bm(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class Um{constructor(e,n){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=n,this._composedValidatorFn=fS(this._rawValidators),this._composedAsyncValidatorFn=hS(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Bl}get invalid(){return this.status===Rf}get pending(){return this.status==tc}get disabled(){return this.status===Ul}get enabled(){return this.status!==Ul}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=fS(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=hS(e)}addValidators(e){this.setValidators(iS(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(iS(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(oS(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(oS(e,this._rawAsyncValidators))}hasValidator(e){return Df(this._rawValidators,e)}hasAsyncValidator(e){return Df(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=tc,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=Ul,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=Bl,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Bl||this.status===tc)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ul:Bl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=tc,this._hasOwnPendingAsyncValidator=!0;const n=QD(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent)}get(e){return function(t,e,n){if(null==e||(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length))return null;let r=t;return e.forEach(i=>{r=r instanceof Hm?r.controls.hasOwnProperty(i)?r.controls[i]:null:r instanceof yB&&r.at(i)||null}),r}(this,e)}getError(e,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new rn,this.statusChanges=new rn}_calculateStatus(){return this._allControlsDisabled()?Ul:this.errors?Rf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(tc)?tc:this._anyControlsHaveStatus(Rf)?Rf:Bl}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Bm(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Af extends Um{constructor(e=null,n,r){super(Vm(n),jm(r,n)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=null,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){xf(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){xf(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Hm extends Um{constructor(e,n,r){super(Vm(n),jm(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(r=>{this._throwIfControlMissing(r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n instanceof Af?n.value:n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>!!r._syncPendingControls()||n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(n=>{const r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const n of Object.keys(this.controls)){const r=this.controls[n];if(this.contains(n)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,n,r)=>((n.enabled||this.disabled)&&(e[r]=n.value),e))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((n,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control with name: '${r}'.`)})}}class yB extends Um{constructor(e,n,r){super(Vm(n),jm(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,n={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(e,n,r={}){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),n&&(this.controls.splice(e,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,n={}){this._checkAllValuesPresent(e),e.forEach((r,i)=>{this._throwIfControlMissing(i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e=[],n={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(e=>e instanceof Af?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((n,r)=>!!r._syncPendingControls()||n,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((n,r)=>{e(n,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(n=>n.enabled&&e(n))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((n,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control at index: ${r}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const bB={provide:Lo,useExisting:yt(()=>zm)},mS=(()=>Promise.resolve(null))();let zm=(()=>{class t extends Lo{constructor(n,r,i,o){super(),this.control=new Af,this._registered=!1,this.update=new rn,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(o=>{o.constructor===Ef?n=o:function(t){return Object.getPrototypeOf(t.constructor)===xs}(o)?r=o:i=o}),i||r||n||null}(0,o)}ngOnChanges(n){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in n&&this._updateDisabled(n),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(t,e){return[...e.path,t]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){jl(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(n){mS.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1})})}_updateDisabled(n){const r=n.isDisabled.currentValue,i=""===r||r&&"false"!==r;mS.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(n){return new(n||t)(ce($n,9),ce(xn,10),ce(No,10),ce(Mi,10))},t.\u0275dir=Me({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[At([bB]),It,$t]}),t})(),vS=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Cn({type:t}),t.\u0275inj=Lt({}),t})(),NS=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Cn({type:t}),t.\u0275inj=Lt({imports:[[vS]]}),t})(),GB=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Cn({type:t}),t.\u0275inj=Lt({imports:[NS]}),t})();function WB(t,e){if(1&t&&(nt(0,"li"),Wt(1),rt()),2&t){const n=e.$implicit,r=tn();hs("strikethrough",n.disconnected),ct(1),Jc(" ",n.name,"",n.id===(null==r.gameServiceState.myPlayer?null:r.gameServiceState.myPlayer.id)?"(you)":""," ")}}function qB(t,e){if(1&t){const n=fs();nt(0,"button",3),Rt("click",function(){return gi(n),tn().rejoin()}),Wt(1),rt()}if(2&t){const n=tn();wt("disabled",n.rejoining),ct(1),ps("rejoin as ",n.gameServiceState.rejoinCandidate.name,"?")}}function YB(t,e){if(1&t){const n=fs();nt(0,"button",3),Rt("click",function(){return gi(n),tn().joinAsSpectator()}),Wt(1,"join as spectator"),rt()}if(2&t){const n=tn();wt("disabled",n.rejoining||!n.gameServiceState.inGame)}}function QB(t,e){if(1&t){const n=fs();nt(0,"button",3),Rt("click",function(){return gi(n),tn().startGame()}),Wt(1,"Start Game"),rt()}2&t&&wt("disabled",null===tn().gameServiceState.myPlayer)}let KB=(()=>{class t{constructor(n,r,i,o,s){this.gameService=n,this.peerToPeerService=r,this.gameHostService=i,this.router=o,this.baseHref=s,this.rejoining=!1}ngOnInit(){var n=this;return co(function*(){console.log("ngOnInit"),n.isHost=n.peerToPeerService.getIsHost(),n.gameServiceState=n.gameService.state,n.gameService.initFromPeerToPeer(),n.subs=[n.gameService.gameStart$.subscribe(r=>n.gotoGame())]})()}gotoGame(){this.router.navigate([hr.GAME+"/"+this.peerToPeerService.getHostId()])}ngOnDestroy(){this.subs.forEach(n=>n.unsubscribe)}setName(){this.gameService.updatePlayer(this.name)}startGame(){this.gameHostService.startGame()}rejoin(){this.rejoining=!0,this.gameService.rejoinAsPlayer(this.gameServiceState.rejoinCandidate),setTimeout(()=>this.rejoining=!1,500),this.gameServiceState.inGame&&this.gotoGame()}joinAsSpectator(){this.gameService.getOrCreateMyPlayer().isSpectator=!0,this.gotoGame()}}return t.\u0275fac=function(n){return new(n||t)(ce(Ms),ce(Ps),ce(Cf),ce(sn),ce(Ya))},t.\u0275cmp=tr({type:t,selectors:[["app-lobby"]],decls:11,vars:9,consts:[[3,"src"],[3,"strikethrough",4,"ngFor","ngForOf"],["type","text",3,"ngModel","ngModelChange"],[3,"disabled","click"],[3,"disabled","click",4,"ngIf"]],template:function(n,r){1&n&&(Wr(0,"img",0),nt(1,"p"),Wt(2),rt(),nt(3,"ul"),vn(4,WB,2,4,"li",1),rt(),nt(5,"input",2),Rt("ngModelChange",function(o){return r.name=o}),rt(),nt(6,"button",3),Rt("click",function(){return r.setName()}),Wt(7,"Set name"),rt(),vn(8,qB,2,2,"button",4),vn(9,YB,2,1,"button",4),vn(10,QB,2,1,"button",4)),2&n&&(nd("src","",r.baseHref,"assets/banana.jpeg",Bu),ct(2),Jc("",r.gameServiceState.players.length," players. ",r.gameServiceState.totalPeerCount," in room."),ct(2),wt("ngForOf",r.gameServiceState.players),ct(1),wt("ngModel",r.name),ct(1),wt("disabled",!r.name||0===r.gameServiceState.totalPeerCount||r.rejoining),ct(2),wt("ngIf",!r.isHost&&r.gameServiceState.rejoinCandidate),ct(1),wt("ngIf",!r.isHost),ct(1),wt("ngIf",r.isHost))},directives:[qd,Ef,cS,zm,Yd],styles:[".strikethrough[_ngcontent-%COMP%]{text-decoration:line-through}button[_ngcontent-%COMP%]{display:block;margin-top:1em}img[_ngcontent-%COMP%]{display:block;width:200px}"]}),t})();const XB=[{path:hr.HOME,component:Y2},{path:hr.LOCAL,component:(()=>{class t{constructor(n,r,i,o){this.gameService=n,this.gameHostService=r,this.activatedRoute=i,this.paramOverrideService=o}ngOnInit(){this.paramOverrideService.setupOverrides(this.activatedRoute.snapshot.queryParams),this.gameService.initFromPeerToPeer(),this.gameService.updatePlayer("abc"),this.gameHostService.startGame()}}return t.\u0275fac=function(n){return new(n||t)(ce(Ms),ce(Cf),ce(ao),ce(FD))},t.\u0275cmp=tr({type:t,selectors:[["app-local"]],decls:1,vars:0,template:function(n,r){1&n&&Wr(0,"app-board-container")},directives:[kD],styles:[""]}),t})()},{path:hr.JOIN+"/:id",component:J2},{path:hr.LOBBY+"/:id",component:KB,canActivate:[lD]},{path:hr.GAME+"/:id",component:q2,canActivate:[lD]}];let ZB=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Cn({type:t}),t.\u0275inj=Lt({imports:[[ZE.forRoot(XB)],ZE]}),t})(),eU=(()=>{class t{constructor(){this.title="bananagrams"}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=tr({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(n,r){1&n&&Wr(0,"router-outlet")},directives:[vm],styles:[""]}),t})(),tU=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Cn({type:t,bootstrap:[eU]}),t.\u0275inj=Lt({providers:[{provide:Ya,useFactory:e=>e.getBaseHrefFromDOM(),deps:[Mo]}],imports:[[eL,ZB,GB,D2]]}),t})();(function(){if(N0)throw new Error("Cannot enable prod mode after platform setup.");k0=!1})(),XF().bootstrapModule(tU).catch(t=>console.error(t))},784:mn=>{function gt(Fe){var se=new Error("Cannot find module '"+Fe+"'");throw se.code="MODULE_NOT_FOUND",se}gt.keys=()=>[],gt.resolve=gt,gt.id=784,mn.exports=gt}},mn=>{mn(mn.s=996)}]);