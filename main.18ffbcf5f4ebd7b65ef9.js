(self.webpackChunkbananagrams=self.webpackChunkbananagrams||[]).push([[179],{255:Ke=>{function j(I){return Promise.resolve().then(()=>{var R=new Error("Cannot find module '"+I+"'");throw R.code="MODULE_NOT_FOUND",R})}j.keys=()=>[],j.resolve=j,j.id=255,Ke.exports=j},624:Ke=>{"use strict";var j=Object.prototype.hasOwnProperty,I="~";function R(){}function U(W,B,T){this.fn=W,this.context=B,this.once=T||!1}function te(W,B,T,S,x){if("function"!=typeof T)throw new TypeError("The listener must be a function");var V=new U(T,S||W,x),O=I?I+B:B;return W._events[O]?W._events[O].fn?W._events[O]=[W._events[O],V]:W._events[O].push(V):(W._events[O]=V,W._eventsCount++),W}function A(W,B){0==--W._eventsCount?W._events=new R:delete W._events[B]}function X(){this._events=new R,this._eventsCount=0}Object.create&&(R.prototype=Object.create(null),(new R).__proto__||(I=!1)),X.prototype.eventNames=function(){var T,S,B=[];if(0===this._eventsCount)return B;for(S in T=this._events)j.call(T,S)&&B.push(I?S.slice(1):S);return Object.getOwnPropertySymbols?B.concat(Object.getOwnPropertySymbols(T)):B},X.prototype.listeners=function(B){var S=this._events[I?I+B:B];if(!S)return[];if(S.fn)return[S.fn];for(var x=0,V=S.length,O=new Array(V);x<V;x++)O[x]=S[x].fn;return O},X.prototype.listenerCount=function(B){var S=this._events[I?I+B:B];return S?S.fn?1:S.length:0},X.prototype.emit=function(B,T,S,x,V,O){var J=I?I+B:B;if(!this._events[J])return!1;var H,E,M=this._events[J],$=arguments.length;if(M.fn){switch(M.once&&this.removeListener(B,M.fn,void 0,!0),$){case 1:return M.fn.call(M.context),!0;case 2:return M.fn.call(M.context,T),!0;case 3:return M.fn.call(M.context,T,S),!0;case 4:return M.fn.call(M.context,T,S,x),!0;case 5:return M.fn.call(M.context,T,S,x,V),!0;case 6:return M.fn.call(M.context,T,S,x,V,O),!0}for(E=1,H=new Array($-1);E<$;E++)H[E-1]=arguments[E];M.fn.apply(M.context,H)}else{var G,C=M.length;for(E=0;E<C;E++)switch(M[E].once&&this.removeListener(B,M[E].fn,void 0,!0),$){case 1:M[E].fn.call(M[E].context);break;case 2:M[E].fn.call(M[E].context,T);break;case 3:M[E].fn.call(M[E].context,T,S);break;case 4:M[E].fn.call(M[E].context,T,S,x);break;default:if(!H)for(G=1,H=new Array($-1);G<$;G++)H[G-1]=arguments[G];M[E].fn.apply(M[E].context,H)}}return!0},X.prototype.on=function(B,T,S){return te(this,B,T,S,!1)},X.prototype.once=function(B,T,S){return te(this,B,T,S,!0)},X.prototype.removeListener=function(B,T,S,x){var V=I?I+B:B;if(!this._events[V])return this;if(!T)return A(this,V),this;var O=this._events[V];if(O.fn)O.fn===T&&(!x||O.once)&&(!S||O.context===S)&&A(this,V);else{for(var J=0,M=[],$=O.length;J<$;J++)(O[J].fn!==T||x&&!O[J].once||S&&O[J].context!==S)&&M.push(O[J]);M.length?this._events[V]=1===M.length?M[0]:M:A(this,V)}return this},X.prototype.removeAllListeners=function(B){var T;return B?this._events[T=I?I+B:B]&&A(this,T):(this._events=new R,this._eventsCount=0),this},X.prototype.off=X.prototype.removeListener,X.prototype.addListener=X.prototype.on,X.prefixed=I,X.EventEmitter=X,Ke.exports=X},748:Ke=>{Ke.exports=function(){var j={};Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0,j.default=function(c){return!(!c||!c.Window)&&c instanceof c.Window};var I={};Object.defineProperty(I,"__esModule",{value:!0}),I.init=te,I.getWindow=function(c){return(0,j.default)(c)?c:(c.ownerDocument||c).defaultView||U.window},I.window=I.realWindow=void 0;var R=void 0;I.realWindow=R;var U=void 0;function te(c){I.realWindow=R=c;var l=c.document.createTextNode("");l.ownerDocument!==c.document&&"function"==typeof c.wrap&&c.wrap(l)===l&&(c=c.wrap(c)),I.window=U=c}I.window=U,"undefined"!=typeof window&&window&&te(window);var A={};function X(c){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(l){return typeof l}:function(l){return l&&"function"==typeof Symbol&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(c)}Object.defineProperty(A,"__esModule",{value:!0}),A.default=void 0;var W=function(c){return!!c&&"object"===X(c)},B=function(c){return"function"==typeof c};A.default={window:function(c){return c===I.window||(0,j.default)(c)},docFrag:function(c){return W(c)&&11===c.nodeType},object:W,func:B,number:function(c){return"number"==typeof c},bool:function(c){return"boolean"==typeof c},string:function(c){return"string"==typeof c},element:function(c){if(!c||"object"!==X(c))return!1;var l=I.getWindow(c)||I.window;return/object|function/.test(X(l.Element))?c instanceof l.Element:1===c.nodeType&&"string"==typeof c.nodeName},plainObject:function(c){return W(c)&&!!c.constructor&&/function Object\b/.test(c.constructor.toString())},array:function(c){return W(c)&&void 0!==c.length&&B(c.splice)}};var S={};function x(c){var l=c.interaction;if("drag"===l.prepared.name){var d=l.prepared.axis;"x"===d?(l.coords.cur.page.y=l.coords.start.page.y,l.coords.cur.client.y=l.coords.start.client.y,l.coords.velocity.client.y=0,l.coords.velocity.page.y=0):"y"===d&&(l.coords.cur.page.x=l.coords.start.page.x,l.coords.cur.client.x=l.coords.start.client.x,l.coords.velocity.client.x=0,l.coords.velocity.page.x=0)}}function V(c){var l=c.iEvent,d=c.interaction;if("drag"===d.prepared.name){var f=d.prepared.axis;if("x"===f||"y"===f){var p="x"===f?"y":"x";l.page[p]=d.coords.start.page[p],l.client[p]=d.coords.start.client[p],l.delta[p]=0}}}Object.defineProperty(S,"__esModule",{value:!0}),S.default=void 0;var O={id:"actions/drag",install:function(c){var l=c.actions,f=c.defaults;c.Interactable.prototype.draggable=O.draggable,l.map.drag=O,l.methodDict.drag="draggable",f.actions.drag=O.defaults},listeners:{"interactions:before-action-move":x,"interactions:action-resume":x,"interactions:action-move":V,"auto-start:check":function(c){var l=c.interaction,d=c.interactable,f=c.buttons,p=d.options.drag;if(p&&p.enabled&&(!l.pointerIsDown||!/mouse|pointer/.test(l.pointerType)||0!=(f&d.options.drag.mouseButtons)))return c.action={name:"drag",axis:"start"===p.lockAxis?p.startAxis:p.lockAxis},!1}},draggable:function(c){return A.default.object(c)?(this.options.drag.enabled=!1!==c.enabled,this.setPerAction("drag",c),this.setOnEvents("drag",c),/^(xy|x|y|start)$/.test(c.lockAxis)&&(this.options.drag.lockAxis=c.lockAxis),/^(xy|x|y)$/.test(c.startAxis)&&(this.options.drag.startAxis=c.startAxis),this):A.default.bool(c)?(this.options.drag.enabled=c,this):this.options.drag},beforeMove:x,move:V,defaults:{startAxis:"xy",lockAxis:"xy"},getCursor:function(){return"move"}};S.default=O;var M={};Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var $={init:function(c){var l=c;$.document=l.document,$.DocumentFragment=l.DocumentFragment||H,$.SVGElement=l.SVGElement||H,$.SVGSVGElement=l.SVGSVGElement||H,$.SVGElementInstance=l.SVGElementInstance||H,$.Element=l.Element||H,$.HTMLElement=l.HTMLElement||$.Element,$.Event=l.Event,$.Touch=l.Touch||H,$.PointerEvent=l.PointerEvent||l.MSPointerEvent},document:null,DocumentFragment:null,SVGElement:null,SVGSVGElement:null,SVGElementInstance:null,Element:null,HTMLElement:null,Event:null,Touch:null,PointerEvent:null};function H(){}M.default=$;var C={};Object.defineProperty(C,"__esModule",{value:!0}),C.default=void 0;var G={init:function(c){var l=M.default.Element,d=c.navigator||{};G.supportsTouch="ontouchstart"in c||A.default.func(c.DocumentTouch)&&M.default.document instanceof c.DocumentTouch,G.supportsPointerEvent=!1!==d.pointerEnabled&&!!M.default.PointerEvent,G.isIOS=/iP(hone|od|ad)/.test(d.platform),G.isIOS7=/iP(hone|od|ad)/.test(d.platform)&&/OS 7[^\d]/.test(d.appVersion),G.isIe9=/MSIE 9/.test(d.userAgent),G.isOperaMobile="Opera"===d.appName&&G.supportsTouch&&/Presto/.test(d.userAgent),G.prefixedMatchesSelector="matches"in l.prototype?"matches":"webkitMatchesSelector"in l.prototype?"webkitMatchesSelector":"mozMatchesSelector"in l.prototype?"mozMatchesSelector":"oMatchesSelector"in l.prototype?"oMatchesSelector":"msMatchesSelector",G.pEventTypes=G.supportsPointerEvent?M.default.PointerEvent===c.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,G.wheelEvent=M.default.document&&"onmousewheel"in M.default.document?"mousewheel":"wheel"},supportsTouch:null,supportsPointerEvent:null,isIOS7:null,isIOS:null,isIe9:null,isOperaMobile:null,prefixedMatchesSelector:null,pEventTypes:null,wheelEvent:null};C.default=G;var re={};function ve(c){var l=c.parentNode;if(A.default.docFrag(l)){for(;(l=l.host)&&A.default.docFrag(l););return l}return l}function Se(c,l){return I.window!==I.realWindow&&(l=l.replace(/\/deep\//g," ")),c[C.default.prefixedMatchesSelector](l)}Object.defineProperty(re,"__esModule",{value:!0}),re.nodeContains=function(c,l){if(c.contains)return c.contains(l);for(;l;){if(l===c)return!0;l=l.parentNode}return!1},re.closest=function(c,l){for(;A.default.element(c);){if(Se(c,l))return c;c=ve(c)}return null},re.parentNode=ve,re.matchesSelector=Se,re.indexOfDeepestElement=function(c){for(var l,d=[],f=0;f<c.length;f++){var p=c[f],m=c[l];if(p&&f!==l)if(m){var b=Ue(p),v=Ue(m);if(b!==p.ownerDocument)if(v!==p.ownerDocument)if(b!==v){d=d.length?d:Ze(m);var D=void 0;if(m instanceof M.default.HTMLElement&&p instanceof M.default.SVGElement&&!(p instanceof M.default.SVGSVGElement)){if(p===v)continue;D=p.ownerSVGElement}else D=p;for(var k=Ze(D,m.ownerDocument),L=0;k[L]&&k[L]===d[L];)L++;var q=[k[L-1],k[L],d[L]];if(q[0])for(var se=q[0].lastChild;se;){if(se===q[1]){l=f,d=k;break}if(se===q[2])break;se=se.previousSibling}}else ue=p,ie=m,(parseInt(I.getWindow(ue).getComputedStyle(ue).zIndex,10)||0)>=(parseInt(I.getWindow(ie).getComputedStyle(ie).zIndex,10)||0)&&(l=f);else l=f}else l=f}var ue,ie;return l},re.matchesUpTo=function(c,l,d){for(;A.default.element(c);){if(Se(c,l))return!0;if((c=ve(c))===d)return Se(c,l)}return!1},re.getActualElement=function(c){return c.correspondingUseElement||c},re.getScrollXY=be,re.getElementClientRect=Ae,re.getElementRect=function(c){var l=Ae(c);if(!C.default.isIOS7&&l){var d=be(I.getWindow(c));l.left+=d.x,l.right+=d.x,l.top+=d.y,l.bottom+=d.y}return l},re.getPath=function(c){for(var l=[];c;)l.push(c),c=ve(c);return l},re.trySelector=function(c){return!!A.default.string(c)&&(M.default.document.querySelector(c),!0)};var Ue=function(c){return c.parentNode||c.host};function Ze(c,l){for(var d,f=[],p=c;(d=Ue(p))&&p!==l&&d!==p.ownerDocument;)f.unshift(p),p=d;return f}function be(c){return{x:(c=c||I.window).scrollX||c.document.documentElement.scrollLeft,y:c.scrollY||c.document.documentElement.scrollTop}}function Ae(c){var l=c instanceof M.default.SVGElement?c.getBoundingClientRect():c.getClientRects()[0];return l&&{left:l.left,right:l.right,top:l.top,bottom:l.bottom,width:l.width||l.right-l.left,height:l.height||l.bottom-l.top}}var ye={};Object.defineProperty(ye,"__esModule",{value:!0}),ye.default=function(c,l){for(var d in l)c[d]=l[d];return c};var ke={};function st(c,l){(null==l||l>c.length)&&(l=c.length);for(var d=0,f=Array(l);d<l;d++)f[d]=c[d];return f}function je(c,l,d){return"parent"===c?(0,re.parentNode)(d):"self"===c?l.getRect(d):(0,re.closest)(d,c)}Object.defineProperty(ke,"__esModule",{value:!0}),ke.getStringOptionResult=je,ke.resolveRectLike=function(c,l,d,f){var p,m=c;return A.default.string(m)?m=je(m,l,d):A.default.func(m)&&(m=m.apply(void 0,function(b){if(Array.isArray(b))return st(b)}(p=f)||function(b){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(b))return Array.from(b)}(p)||function(b,v){if(b){if("string"==typeof b)return st(b,v);var D=Object.prototype.toString.call(b).slice(8,-1);return"Object"===D&&b.constructor&&(D=b.constructor.name),"Map"===D||"Set"===D?Array.from(b):"Arguments"===D||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(D)?st(b,v):void 0}}(p)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),A.default.element(m)&&(m=(0,re.getElementRect)(m)),m},ke.rectToXY=function(c){return c&&{x:"x"in c?c.x:c.left,y:"y"in c?c.y:c.top}},ke.xywhToTlbr=function(c){return!c||"left"in c&&"top"in c||((c=(0,ye.default)({},c)).left=c.x||0,c.top=c.y||0,c.right=c.right||c.left+c.width,c.bottom=c.bottom||c.top+c.height),c},ke.tlbrToXywh=function(c){return!c||"x"in c&&"y"in c||((c=(0,ye.default)({},c)).x=c.left||0,c.y=c.top||0,c.width=c.width||(c.right||0)-c.x,c.height=c.height||(c.bottom||0)-c.y),c},ke.addEdges=function(c,l,d){c.left&&(l.left+=d.x),c.right&&(l.right+=d.x),c.top&&(l.top+=d.y),c.bottom&&(l.bottom+=d.y),l.width=l.right-l.left,l.height=l.bottom-l.top};var It={};Object.defineProperty(It,"__esModule",{value:!0}),It.default=function(c,l,d){var f=c.options[d],m=(0,ke.resolveRectLike)(f&&f.origin||c.options.origin,c,l,[c&&l]);return(0,ke.rectToXY)(m)||{x:0,y:0}};var Pt={};function Kr(c){return c.trim().split(/ +/)}Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.default=function c(l,d,f){if(f=f||{},A.default.string(l)&&-1!==l.search(" ")&&(l=Kr(l)),A.default.array(l))return l.reduce(function(D,k){return(0,ye.default)(D,c(k,d,f))},f);if(A.default.object(l)&&(d=l,l=""),A.default.func(d))f[l]=f[l]||[],f[l].push(d);else if(A.default.array(d))for(var p=0;p<d.length;p++)c(l,d[p],f);else if(A.default.object(d))for(var b in d){var v=Kr(b).map(function(D){return"".concat(l).concat(D)});c(v,d[b],f)}return f};var He={};Object.defineProperty(He,"__esModule",{value:!0}),He.default=void 0,He.default=function(c,l){return Math.sqrt(c*c+l*l)};var or={};function In(c,l){for(var d in l){var f=In.prefixedPropREs,p=!1;for(var m in f)if(0===d.indexOf(m)&&f[m].test(d)){p=!0;break}p||"function"==typeof l[d]||(c[d]=l[d])}return c}Object.defineProperty(or,"__esModule",{value:!0}),or.default=void 0,In.prefixedPropREs={webkit:/(Movement[XY]|Radius[XY]|RotationAngle|Force)$/,moz:/(Pressure)$/},or.default=In;var Ie={};function Ar(c){return c instanceof M.default.Event||c instanceof M.default.Touch}function kn(c,l,d){return(d=d||{}).x=l[(c=c||"page")+"X"],d.y=l[c+"Y"],d}function sr(c,l){return l=l||{x:0,y:0},C.default.isOperaMobile&&Ar(c)?(kn("screen",c,l),l.x+=window.scrollX,l.y+=window.scrollY):kn("page",c,l),l}function fn(c,l){return l=l||{},C.default.isOperaMobile&&Ar(c)?kn("screen",c,l):kn("client",c,l),l}function Rr(c){var l=[];return A.default.array(c)?(l[0]=c[0],l[1]=c[1]):"touchend"===c.type?1===c.touches.length?(l[0]=c.touches[0],l[1]=c.changedTouches[0]):0===c.touches.length&&(l[0]=c.changedTouches[0],l[1]=c.changedTouches[1]):(l[0]=c.touches[0],l[1]=c.touches[1]),l}function Si(c){for(var l={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},d=0;d<c.length;d++){var f=c[d];for(var p in l)l[p]+=f[p]}for(var m in l)l[m]/=c.length;return l}Object.defineProperty(Ie,"__esModule",{value:!0}),Ie.copyCoords=function(c,l){c.page=c.page||{},c.page.x=l.page.x,c.page.y=l.page.y,c.client=c.client||{},c.client.x=l.client.x,c.client.y=l.client.y,c.timeStamp=l.timeStamp},Ie.setCoordDeltas=function(c,l,d){c.page.x=d.page.x-l.page.x,c.page.y=d.page.y-l.page.y,c.client.x=d.client.x-l.client.x,c.client.y=d.client.y-l.client.y,c.timeStamp=d.timeStamp-l.timeStamp},Ie.setCoordVelocity=function(c,l){var d=Math.max(l.timeStamp/1e3,.001);c.page.x=l.page.x/d,c.page.y=l.page.y/d,c.client.x=l.client.x/d,c.client.y=l.client.y/d,c.timeStamp=d},Ie.setZeroCoords=function(c){c.page.x=0,c.page.y=0,c.client.x=0,c.client.y=0},Ie.isNativePointer=Ar,Ie.getXY=kn,Ie.getPageXY=sr,Ie.getClientXY=fn,Ie.getPointerId=function(c){return A.default.number(c.pointerId)?c.pointerId:c.identifier},Ie.setCoords=function(c,l,d){var f=l.length>1?Si(l):l[0];sr(f,c.page),fn(f,c.client),c.timeStamp=d},Ie.getTouchPair=Rr,Ie.pointerAverage=Si,Ie.touchBBox=function(c){if(!c.length)return null;var l=Rr(c),d=Math.min(l[0].pageX,l[1].pageX),f=Math.min(l[0].pageY,l[1].pageY),p=Math.max(l[0].pageX,l[1].pageX),m=Math.max(l[0].pageY,l[1].pageY);return{x:d,y:f,left:d,top:f,right:p,bottom:m,width:p-d,height:m-f}},Ie.touchDistance=function(c,l){var d=l+"X",f=l+"Y",p=Rr(c);return(0,He.default)(p[0][d]-p[1][d],p[0][f]-p[1][f])},Ie.touchAngle=function(c,l){var d=l+"X",f=l+"Y",p=Rr(c);return 180*Math.atan2(p[1][f]-p[0][f],p[1][d]-p[0][d])/Math.PI},Ie.getPointerType=function(c){return A.default.string(c.pointerType)?c.pointerType:A.default.number(c.pointerType)?[void 0,void 0,"touch","pen","mouse"][c.pointerType]:/touch/.test(c.type||"")||c instanceof M.default.Touch?"touch":"mouse"},Ie.getEventTargets=function(c){var l=A.default.func(c.composedPath)?c.composedPath():c.path;return[re.getActualElement(l?l[0]:c.target),re.getActualElement(c.currentTarget)]},Ie.newCoords=function(){return{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0}},Ie.coordsToEvent=function(c){return{coords:c,get page(){return this.coords.page},get client(){return this.coords.client},get timeStamp(){return this.coords.timeStamp},get pageX(){return this.coords.page.x},get pageY(){return this.coords.page.y},get clientX(){return this.coords.client.x},get clientY(){return this.coords.client.y},get pointerId(){return this.coords.pointerId},get target(){return this.coords.target},get type(){return this.coords.type},get pointerType(){return this.coords.pointerType},get buttons(){return this.coords.buttons},preventDefault:function(){}}},Object.defineProperty(Ie,"pointerExtend",{enumerable:!0,get:function(){return or.default}});var Pn={};function Nn(c,l,d){return l in c?Object.defineProperty(c,l,{value:d,enumerable:!0,configurable:!0,writable:!0}):c[l]=d,c}Object.defineProperty(Pn,"__esModule",{value:!0}),Pn.BaseEvent=void 0;var ar=function(){function c(f){(function(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")})(this,c),Nn(this,"type",void 0),Nn(this,"target",void 0),Nn(this,"currentTarget",void 0),Nn(this,"interactable",void 0),Nn(this,"_interaction",void 0),Nn(this,"timeStamp",void 0),Nn(this,"immediatePropagationStopped",!1),Nn(this,"propagationStopped",!1),this._interaction=f}var d;return(d=[{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}])&&function(c,l){for(var d=0;d<l.length;d++){var f=l[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}(c.prototype,d),c}();Pn.BaseEvent=ar,Object.defineProperty(ar.prototype,"interaction",{get:function(){return this._interaction._proxy},set:function(){}});var ut={};Object.defineProperty(ut,"__esModule",{value:!0}),ut.find=ut.findIndex=ut.from=ut.merge=ut.remove=ut.contains=void 0,ut.contains=function(c,l){return-1!==c.indexOf(l)},ut.remove=function(c,l){return c.splice(c.indexOf(l),1)};var Et=function(c,l){for(var d=0;d<l.length;d++)c.push(l[d]);return c};ut.merge=Et,ut.from=function(c){return Et([],c)};var Jr=function(c,l){for(var d=0;d<c.length;d++)if(l(c[d],d,c))return d;return-1};ut.findIndex=Jr,ut.find=function(c,l){return c[Jr(c,l)]};var Wn={};function Ut(c){return(Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(l){return typeof l}:function(l){return l&&"function"==typeof Symbol&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(c)}function Xr(c,l){return(Xr=Object.setPrototypeOf||function(d,f){return d.__proto__=f,d})(c,l)}function Yt(c,l){return!l||"object"!==Ut(l)&&"function"!=typeof l?cr(c):l}function cr(c){if(void 0===c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function os(c){return(os=Object.setPrototypeOf?Object.getPrototypeOf:function(l){return l.__proto__||Object.getPrototypeOf(l)})(c)}function lr(c,l,d){return l in c?Object.defineProperty(c,l,{value:d,enumerable:!0,configurable:!0,writable:!0}):c[l]=d,c}Object.defineProperty(Wn,"__esModule",{value:!0}),Wn.DropEvent=void 0;var Or=function(c){!function(v,D){if("function"!=typeof D&&null!==D)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(D&&D.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),D&&Xr(v,D)}(b,c);var d,f,p,m=(f=b,p=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(v){return!1}}(),function(){var v,D=os(f);if(p){var k=os(this).constructor;v=Reflect.construct(D,arguments,k)}else v=D.apply(this,arguments);return Yt(this,v)});function b(v,D,k){var L;(function(ie,Ce){if(!(ie instanceof Ce))throw new TypeError("Cannot call a class as a function")})(this,b),lr(cr(L=m.call(this,D._interaction)),"target",void 0),lr(cr(L),"dropzone",void 0),lr(cr(L),"dragEvent",void 0),lr(cr(L),"relatedTarget",void 0),lr(cr(L),"draggable",void 0),lr(cr(L),"timeStamp",void 0),lr(cr(L),"propagationStopped",!1),lr(cr(L),"immediatePropagationStopped",!1);var q="dragleave"===k?v.prev:v.cur,se=q.element,ue=q.dropzone;return L.type=k,L.target=se,L.currentTarget=se,L.dropzone=ue,L.dragEvent=D,L.relatedTarget=D.target,L.draggable=D.interactable,L.timeStamp=D.timeStamp,L}return(d=[{key:"reject",value:function(){var v=this,D=this._interaction.dropState;if("dropactivate"===this.type||this.dropzone&&D.cur.dropzone===this.dropzone&&D.cur.element===this.target)if(D.prev.dropzone=this.dropzone,D.prev.element=this.target,D.rejected=!0,D.events.enter=null,this.stopImmediatePropagation(),"dropactivate"===this.type){var L=ut.findIndex(D.activeDrops,function(se){return se.dropzone===v.dropzone&&se.element===v.target});D.activeDrops.splice(L,1);var q=new b(D,this.dragEvent,"dropdeactivate");q.dropzone=this.dropzone,q.target=this.target,this.dropzone.fire(q)}else this.dropzone.fire(new b(D,this.dragEvent,"dragleave"))}},{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}])&&function(c,l){for(var d=0;d<l.length;d++){var f=l[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}(b.prototype,d),b}(Pn.BaseEvent);Wn.DropEvent=Or;var ur={};function wi(c,l){for(var d=0;d<c.slice().length;d++){var f=c.slice()[d],p=f.dropzone,m=f.element;l.dropzone=p,l.target=m,p.fire(l),l.propagationStopped=l.immediatePropagationStopped=!1}}function Zr(c,l){for(var d=function(m,b){for(var v=m.interactables,D=[],k=0;k<v.list.length;k++){var L=v.list[k];if(L.options.drop.enabled){var q=L.options.drop.accept;if(!(A.default.element(q)&&q!==b||A.default.string(q)&&!re.matchesSelector(b,q)||A.default.func(q)&&!q({dropzone:L,draggableElement:b})))for(var se=A.default.string(L.target)?L._context.querySelectorAll(L.target):A.default.array(L.target)?L.target:[L.target],ue=0;ue<se.length;ue++){var ie=se[ue];ie!==b&&D.push({dropzone:L,element:ie,rect:L.getRect(ie)})}}}return D}(c,l),f=0;f<d.length;f++){var p=d[f];p.rect=p.dropzone.getRect(p.element)}return d}function Oo(c,l,d){for(var f=c.dropState,p=c.interactable,m=c.element,b=[],v=0;v<f.activeDrops.length;v++){var D=f.activeDrops[v],L=D.element;b.push(D.dropzone.dropCheck(l,d,p,m,L,D.rect)?L:null)}var se=re.indexOfDeepestElement(b);return f.activeDrops[se]||null}function Ti(c,l,d){var f=c.dropState,p={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return"dragstart"===d.type&&(p.activate=new Wn.DropEvent(f,d,"dropactivate"),p.activate.target=null,p.activate.dropzone=null),"dragend"===d.type&&(p.deactivate=new Wn.DropEvent(f,d,"dropdeactivate"),p.deactivate.target=null,p.deactivate.dropzone=null),f.rejected||(f.cur.element!==f.prev.element&&(f.prev.dropzone&&(p.leave=new Wn.DropEvent(f,d,"dragleave"),d.dragLeave=p.leave.target=f.prev.element,d.prevDropzone=p.leave.dropzone=f.prev.dropzone),f.cur.dropzone&&(p.enter=new Wn.DropEvent(f,d,"dragenter"),d.dragEnter=f.cur.element,d.dropzone=f.cur.dropzone)),"dragend"===d.type&&f.cur.dropzone&&(p.drop=new Wn.DropEvent(f,d,"drop"),d.dropzone=f.cur.dropzone,d.relatedTarget=f.cur.element),"dragmove"===d.type&&f.cur.dropzone&&(p.move=new Wn.DropEvent(f,d,"dropmove"),p.move.dragmove=d,d.dropzone=f.cur.dropzone)),p}function ko(c,l){var d=c.dropState,f=d.activeDrops,p=d.cur;l.leave&&d.prev.dropzone.fire(l.leave),l.enter&&p.dropzone.fire(l.enter),l.move&&p.dropzone.fire(l.move),l.drop&&p.dropzone.fire(l.drop),l.deactivate&&wi(f,l.deactivate),d.prev.dropzone=p.dropzone,d.prev.element=p.element}function vc(c,l){var d=c.interaction,f=c.iEvent,p=c.event;if("dragmove"===f.type||"dragend"===f.type){var m=d.dropState;l.dynamicDrop&&(m.activeDrops=Zr(l,d.element));var b=f,v=Oo(d,b,p);m.rejected=m.rejected&&!!v&&v.dropzone===m.cur.dropzone&&v.element===m.cur.element,m.cur.dropzone=v&&v.dropzone,m.cur.element=v&&v.element,m.events=Ti(d,0,b)}}Object.defineProperty(ur,"__esModule",{value:!0}),ur.default=void 0;var Ys={id:"actions/drop",install:function(c){var l=c.actions,d=c.interactStatic,f=c.Interactable,p=c.defaults;c.usePlugin(S.default),f.prototype.dropzone=function(m){return function(b,v){if(A.default.object(v)){if(b.options.drop.enabled=!1!==v.enabled,v.listeners){var D=(0,Pt.default)(v.listeners),k=Object.keys(D).reduce(function(L,q){return L[/^(enter|leave)/.test(q)?"drag".concat(q):/^(activate|deactivate|move)/.test(q)?"drop".concat(q):q]=D[q],L},{});b.off(b.options.drop.listeners),b.on(k),b.options.drop.listeners=k}return A.default.func(v.ondrop)&&b.on("drop",v.ondrop),A.default.func(v.ondropactivate)&&b.on("dropactivate",v.ondropactivate),A.default.func(v.ondropdeactivate)&&b.on("dropdeactivate",v.ondropdeactivate),A.default.func(v.ondragenter)&&b.on("dragenter",v.ondragenter),A.default.func(v.ondragleave)&&b.on("dragleave",v.ondragleave),A.default.func(v.ondropmove)&&b.on("dropmove",v.ondropmove),/^(pointer|center)$/.test(v.overlap)?b.options.drop.overlap=v.overlap:A.default.number(v.overlap)&&(b.options.drop.overlap=Math.max(Math.min(1,v.overlap),0)),"accept"in v&&(b.options.drop.accept=v.accept),"checker"in v&&(b.options.drop.checker=v.checker),b}return A.default.bool(v)?(b.options.drop.enabled=v,b):b.options.drop}(this,m)},f.prototype.dropCheck=function(m,b,v,D,k,L){return function(q,se,ue,ie,Ce,Te,Ee){var Re=!1;if(!(Ee=Ee||q.getRect(Te)))return!!q.options.drop.checker&&q.options.drop.checker(se,ue,Re,q,Te,ie,Ce);var Be=q.options.drop.overlap;if("pointer"===Be){var qe=(0,It.default)(ie,Ce,"drag"),mt=Ie.getPageXY(se);mt.x+=qe.x,mt.y+=qe.y,Re=mt.x>Ee.left&&mt.x<Ee.right&&mt.y>Ee.top&&mt.y<Ee.bottom}var ht=ie.getRect(Ce);if(ht&&"center"===Be){var Bn=ht.left+ht.width/2,gr=ht.top+ht.height/2;Re=Bn>=Ee.left&&Bn<=Ee.right&&gr>=Ee.top&&gr<=Ee.bottom}return ht&&A.default.number(Be)&&(Re=Math.max(0,Math.min(Ee.right,ht.right)-Math.max(Ee.left,ht.left))*Math.max(0,Math.min(Ee.bottom,ht.bottom)-Math.max(Ee.top,ht.top))/(ht.width*ht.height)>=Be),q.options.drop.checker&&(Re=q.options.drop.checker(se,ue,Re,q,Te,ie,Ce)),Re}(this,m,b,v,D,k,L)},d.dynamicDrop=function(m){return A.default.bool(m)?(c.dynamicDrop=m,d):c.dynamicDrop},(0,ye.default)(l.phaselessTypes,{dragenter:!0,dragleave:!0,dropactivate:!0,dropdeactivate:!0,dropmove:!0,drop:!0}),l.methodDict.drop="dropzone",c.dynamicDrop=!1,p.actions.drop=Ys.defaults},listeners:{"interactions:before-action-start":function(c){var l=c.interaction;"drag"===l.prepared.name&&(l.dropState={cur:{dropzone:null,element:null},prev:{dropzone:null,element:null},rejected:null,events:null,activeDrops:[]})},"interactions:after-action-start":function(c,l){var d=c.interaction,f=c.iEvent;if("drag"===d.prepared.name){var p=d.dropState;p.activeDrops=null,p.events=null,p.activeDrops=Zr(l,d.element),p.events=Ti(d,0,f),p.events.activate&&(wi(p.activeDrops,p.events.activate),l.fire("actions/drop:start",{interaction:d,dragEvent:f}))}},"interactions:action-move":vc,"interactions:after-action-move":function(c,l){var d=c.interaction,f=c.iEvent;"drag"===d.prepared.name&&(ko(d,d.dropState.events),l.fire("actions/drop:move",{interaction:d,dragEvent:f}),d.dropState.events={})},"interactions:action-end":function(c,l){if("drag"===c.interaction.prepared.name){var d=c.interaction,f=c.iEvent;vc(c,l),ko(d,d.dropState.events),l.fire("actions/drop:end",{interaction:d,dragEvent:f})}},"interactions:stop":function(c){var l=c.interaction;if("drag"===l.prepared.name){var d=l.dropState;d&&(d.activeDrops=null,d.events=null,d.cur.dropzone=null,d.cur.element=null,d.prev.dropzone=null,d.prev.element=null,d.rejected=!1)}}},getActiveDrops:Zr,getDrop:Oo,getDropEvents:Ti,fireDropEvents:ko,defaults:{enabled:!1,accept:null,overlap:"pointer"}};ur.default=Ys;var z={};function oe(c){var l=c.interaction,d=c.iEvent,f=c.phase;if("gesture"===l.prepared.name){var p=l.pointers.map(function(k){return k.pointer}),m="start"===f,b="end"===f,v=l.interactable.options.deltaSource;if(d.touches=[p[0],p[1]],m)d.distance=Ie.touchDistance(p,v),d.box=Ie.touchBBox(p),d.scale=1,d.ds=0,d.angle=Ie.touchAngle(p,v),d.da=0,l.gesture.startDistance=d.distance,l.gesture.startAngle=d.angle;else if(b){var D=l.prevEvent;d.distance=D.distance,d.box=D.box,d.scale=D.scale,d.ds=0,d.angle=D.angle,d.da=0}else d.distance=Ie.touchDistance(p,v),d.box=Ie.touchBBox(p),d.scale=d.distance/l.gesture.startDistance,d.angle=Ie.touchAngle(p,v),d.ds=d.scale-l.gesture.scale,d.da=d.angle-l.gesture.angle;l.gesture.distance=d.distance,l.gesture.angle=d.angle,A.default.number(d.scale)&&d.scale!==1/0&&!isNaN(d.scale)&&(l.gesture.scale=d.scale)}}Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var N={id:"actions/gesture",before:["actions/drag","actions/resize"],install:function(c){var l=c.actions,f=c.defaults;c.Interactable.prototype.gesturable=function(p){return A.default.object(p)?(this.options.gesture.enabled=!1!==p.enabled,this.setPerAction("gesture",p),this.setOnEvents("gesture",p),this):A.default.bool(p)?(this.options.gesture.enabled=p,this):this.options.gesture},l.map.gesture=N,l.methodDict.gesture="gesturable",f.actions.gesture=N.defaults},listeners:{"interactions:action-start":oe,"interactions:action-move":oe,"interactions:action-end":oe,"interactions:new":function(c){c.interaction.gesture={angle:0,distance:0,scale:1,startAngle:0,startDistance:0}},"auto-start:check":function(c){if(!(c.interaction.pointers.length<2)){var l=c.interactable.options.gesture;if(l&&l.enabled)return c.action={name:"gesture"},!1}}},defaults:{},getCursor:function(){return""}};z.default=N;var le={};function ee(c,l,d,f,p,m,b){if(!l)return!1;if(!0===l){var v=A.default.number(m.width)?m.width:m.right-m.left,D=A.default.number(m.height)?m.height:m.bottom-m.top;if(b=Math.min(b,Math.abs(("left"===c||"right"===c?v:D)/2)),v<0&&("left"===c?c="right":"right"===c&&(c="left")),D<0&&("top"===c?c="bottom":"bottom"===c&&(c="top")),"left"===c)return d.x<(v>=0?m.left:m.right)+b;if("top"===c)return d.y<(D>=0?m.top:m.bottom)+b;if("right"===c)return d.x>(v>=0?m.right:m.left)-b;if("bottom"===c)return d.y>(D>=0?m.bottom:m.top)-b}return!!A.default.element(f)&&(A.default.element(l)?l===f:re.matchesUpTo(f,l,p))}function ne(c){var d=c.interaction;if("resize"===d.prepared.name&&d.resizeAxes){var f=c.iEvent;d.interactable.options.resize.square?("y"===d.resizeAxes?f.delta.x=f.delta.y:f.delta.y=f.delta.x,f.axes="xy"):(f.axes=d.resizeAxes,"x"===d.resizeAxes?f.delta.y=0:"y"===d.resizeAxes&&(f.delta.x=0))}}Object.defineProperty(le,"__esModule",{value:!0}),le.default=void 0;var ae={id:"actions/resize",before:["actions/drag"],install:function(c){var l=c.actions,d=c.browser,f=c.Interactable,p=c.defaults;ae.cursors=d.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"},ae.defaultMargin=d.supportsTouch||d.supportsPointerEvent?20:10,f.prototype.resizable=function(m){return b=this,D=c,A.default.object(v=m)?(b.options.resize.enabled=!1!==v.enabled,b.setPerAction("resize",v),b.setOnEvents("resize",v),A.default.string(v.axis)&&/^x$|^y$|^xy$/.test(v.axis)?b.options.resize.axis=v.axis:null===v.axis&&(b.options.resize.axis=D.defaults.actions.resize.axis),A.default.bool(v.preserveAspectRatio)?b.options.resize.preserveAspectRatio=v.preserveAspectRatio:A.default.bool(v.square)&&(b.options.resize.square=v.square),b):A.default.bool(v)?(b.options.resize.enabled=v,b):b.options.resize;var b,v,D},l.map.resize=ae,l.methodDict.resize="resizable",p.actions.resize=ae.defaults},listeners:{"interactions:new":function(c){c.interaction.resizeAxes="xy"},"interactions:action-start":function(c){(function(l){var f=l.interaction;if("resize"===f.prepared.name&&f.prepared.edges){var p=l.iEvent,m=f.rect;f._rects={start:(0,ye.default)({},m),corrected:(0,ye.default)({},m),previous:(0,ye.default)({},m),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},p.edges=f.prepared.edges,p.rect=f._rects.corrected,p.deltaRect=f._rects.delta}})(c),ne(c)},"interactions:action-move":function(c){(function(l){var f=l.interaction;if("resize"===f.prepared.name&&f.prepared.edges){var p=l.iEvent,m=f.interactable.options.resize.invert,b="reposition"===m||"negate"===m,v=f.rect,D=f._rects,k=D.start,L=D.corrected,q=D.delta,se=D.previous;if((0,ye.default)(se,L),b){if((0,ye.default)(L,v),"reposition"===m){if(L.top>L.bottom){var ue=L.top;L.top=L.bottom,L.bottom=ue}if(L.left>L.right){var ie=L.left;L.left=L.right,L.right=ie}}}else L.top=Math.min(v.top,k.bottom),L.bottom=Math.max(v.bottom,k.top),L.left=Math.min(v.left,k.right),L.right=Math.max(v.right,k.left);for(var Ce in L.width=L.right-L.left,L.height=L.bottom-L.top,L)q[Ce]=L[Ce]-se[Ce];p.edges=f.prepared.edges,p.rect=L,p.deltaRect=q}})(c),ne(c)},"interactions:action-end":function(c){var d=c.interaction;if("resize"===d.prepared.name&&d.prepared.edges){var f=c.iEvent;f.edges=d.prepared.edges,f.rect=d._rects.corrected,f.deltaRect=d._rects.delta}},"auto-start:check":function(c){var l=c.interaction,d=c.interactable,f=c.element,p=c.rect,m=c.buttons;if(p){var b=(0,ye.default)({},l.coords.cur.page),v=d.options.resize;if(v&&v.enabled&&(!l.pointerIsDown||!/mouse|pointer/.test(l.pointerType)||0!=(m&v.mouseButtons))){if(A.default.object(v.edges)){var D={left:!1,right:!1,top:!1,bottom:!1};for(var k in D)D[k]=ee(k,v.edges[k],b,l._latestPointer.eventTarget,f,p,v.margin||ae.defaultMargin);D.left=D.left&&!D.right,D.top=D.top&&!D.bottom,(D.left||D.right||D.top||D.bottom)&&(c.action={name:"resize",edges:D})}else{var L="y"!==v.axis&&b.x>p.right-ae.defaultMargin,q="x"!==v.axis&&b.y>p.bottom-ae.defaultMargin;(L||q)&&(c.action={name:"resize",axes:(L?"x":"")+(q?"y":"")})}return!c.action&&void 0}}}},defaults:{square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},cursors:null,getCursor:function(c){var l=c.edges,d=c.axis,p=ae.cursors,m=null;if(d)m=p[c.name+d];else if(l){for(var b="",v=["top","bottom","left","right"],D=0;D<v.length;D++){var k=v[D];l[k]&&(b+=k)}m=p[b]}return m},defaultMargin:null};le.default=ae;var ge={};Object.defineProperty(ge,"__esModule",{value:!0}),ge.default=void 0,ge.default={id:"actions",install:function(c){c.usePlugin(z.default),c.usePlugin(le.default),c.usePlugin(S.default),c.usePlugin(ur.default)}};var de={};Object.defineProperty(de,"__esModule",{value:!0}),de.default=void 0;var it,kt,Nt=0;de.default={request:function(c){return it(c)},cancel:function(c){return kt(c)},init:function(c){if(kt=c.cancelAnimationFrame,!(it=c.requestAnimationFrame))for(var l=["ms","moz","webkit","o"],d=0;d<l.length;d++){var f=l[d];it=c["".concat(f,"RequestAnimationFrame")],kt=c["".concat(f,"CancelAnimationFrame")]||c["".concat(f,"CancelRequestAnimationFrame")]}it=it&&it.bind(c),kt=kt&&kt.bind(c),it||(it=function(p){var m=Date.now(),b=Math.max(0,16-(m-Nt)),v=c.setTimeout(function(){p(m+b)},b);return Nt=m+b,v},kt=function(p){return clearTimeout(p)})}};var kr={};Object.defineProperty(kr,"__esModule",{value:!0}),kr.getContainer=cn,kr.getScroll=ss,kr.getScrollSize=function(c){return A.default.window(c)&&(c=window.document.body),{x:c.scrollWidth,y:c.scrollHeight}},kr.getScrollSizeDelta=function(c,l){var d=c.interaction,f=c.element,p=d&&d.interactable.options[d.prepared.name].autoScroll;if(!p||!p.enabled)return l(),{x:0,y:0};var m=cn(p.container,d.interactable,f),b=ss(m);l();var v=ss(m);return{x:v.x-b.x,y:v.y-b.y}},kr.default=void 0;var we={defaults:{enabled:!1,margin:60,container:null,speed:300},now:Date.now,interaction:null,i:0,x:0,y:0,isScrolling:!1,prevTime:0,margin:0,speed:0,start:function(c){we.isScrolling=!0,de.default.cancel(we.i),c.autoScroll=we,we.interaction=c,we.prevTime=we.now(),we.i=de.default.request(we.scroll)},stop:function(){we.isScrolling=!1,we.interaction&&(we.interaction.autoScroll=null),de.default.cancel(we.i)},scroll:function(){var c=we.interaction,l=c.interactable,d=c.element,p=l.options[c.prepared.name].autoScroll,m=cn(p.container,l,d),b=we.now(),D=p.speed*((b-we.prevTime)/1e3);if(D>=1){var k={x:we.x*D,y:we.y*D};if(k.x||k.y){var L=ss(m);A.default.window(m)?m.scrollBy(k.x,k.y):m&&(m.scrollLeft+=k.x,m.scrollTop+=k.y);var q=ss(m),se={x:q.x-L.x,y:q.y-L.y};(se.x||se.y)&&l.fire({type:"autoscroll",target:d,interactable:l,delta:se,interaction:c,container:m})}we.prevTime=b}we.isScrolling&&(de.default.cancel(we.i),we.i=de.default.request(we.scroll))},check:function(c,l){var d;return null==(d=c.options[l].autoScroll)?void 0:d.enabled},onInteractionMove:function(c){var l=c.interaction,d=c.pointer;if(l.interacting()&&we.check(l.interactable,l.prepared.name))if(l.simulation)we.x=we.y=0;else{var f,p,m,b,v=l.interactable,L=v.options[l.prepared.name].autoScroll,q=cn(L.container,v,l.element);if(A.default.window(q))b=d.clientX<we.margin,f=d.clientY<we.margin,p=d.clientX>q.innerWidth-we.margin,m=d.clientY>q.innerHeight-we.margin;else{var se=re.getElementClientRect(q);b=d.clientX<se.left+we.margin,f=d.clientY<se.top+we.margin,p=d.clientX>se.right-we.margin,m=d.clientY>se.bottom-we.margin}we.x=p?1:b?-1:0,we.y=m?1:f?-1:0,we.isScrolling||(we.margin=L.margin,we.speed=L.speed,we.start(l))}}};function cn(c,l,d){return(A.default.string(c)?(0,ke.getStringOptionResult)(c,l,d):c)||(0,I.getWindow)(d)}function ss(c){return A.default.window(c)&&(c=window.document.body),{x:c.scrollLeft,y:c.scrollTop}}kr.default={id:"auto-scroll",install:function(c){var l=c.defaults,d=c.actions;c.autoScroll=we,we.now=function(){return c.now()},d.phaselessTypes.autoscroll=!0,l.perAction.autoScroll=we.defaults},listeners:{"interactions:new":function(c){c.interaction.autoScroll=null},"interactions:destroy":function(c){c.interaction.autoScroll=null,we.stop(),we.interaction&&(we.interaction=null)},"interactions:stop":we.stop,"interactions:action-move":function(c){return we.onInteractionMove(c)}}};var dr={};Object.defineProperty(dr,"__esModule",{value:!0}),dr.warnOnce=function(c,l){var d=!1;return function(){return d||(I.window.console.warn(l),d=!0),c.apply(this,arguments)}},dr.copyAction=function(c,l){return c.name=l.name,c.axis=l.axis,c.edges=l.edges,c},dr.sign=void 0,dr.sign=function(c){return c>=0?1:-1};var Zi={};function qn(c){return A.default.bool(c)?(this.options.styleCursor=c,this):null===c?(delete this.options.styleCursor,this):this.options.styleCursor}function dy(c){return A.default.func(c)?(this.options.actionChecker=c,this):null===c?(delete this.options.actionChecker,this):this.options.actionChecker}Object.defineProperty(Zi,"__esModule",{value:!0}),Zi.default=void 0,Zi.default={id:"auto-start/interactableMethods",install:function(c){var l=c.Interactable;l.prototype.getAction=function(d,f,p,m){var v,D,k,L,q,se,ue,b=(D=f,k=p,q=c,se=(v=this).getRect(L=m),q.fire("auto-start:check",ue={action:null,interactable:v,interaction:k,element:L,rect:se,buttons:D.buttons||{0:1,1:4,3:8,4:16}[D.button]}),ue.action);return this.options.actionChecker?this.options.actionChecker(d,f,b,this,m,p):b},l.prototype.ignoreFrom=(0,dr.warnOnce)(function(d){return this._backCompatOption("ignoreFrom",d)},"Interactable.ignoreFrom() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),l.prototype.allowFrom=(0,dr.warnOnce)(function(d){return this._backCompatOption("allowFrom",d)},"Interactable.allowFrom() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),l.prototype.actionChecker=dy,l.prototype.styleCursor=qn}};var as={};function Nr(c,l,d,f,p){return l.testIgnoreAllow(l.options[c.name],d,f)&&l.options[c.name].enabled&&_c(l,d,c,p)?c:null}function fy(c,l,d,f,p,m,b){for(var v=0,D=f.length;v<D;v++){var k=f[v],L=p[v],q=k.getAction(l,d,c,L);if(q){var se=Nr(q,k,L,m,b);if(se)return{action:se,interactable:k,element:L}}}return{action:null,interactable:null,element:null}}function Vf(c,l,d,f,p){var m=[],b=[],v=f;function D(L){m.push(L),b.push(v)}for(;A.default.element(v);){m=[],b=[],p.interactables.forEachMatch(v,D);var k=fy(c,l,d,m,b,f,p);if(k.action&&!k.interactable.options[k.action.name].manualStart)return k;v=re.parentNode(v)}return{action:null,interactable:null,element:null}}function Lf(c,l,d){var f=l.action,p=l.interactable,m=l.element;f=f||{name:null},c.interactable=p,c.element=m,(0,dr.copyAction)(c.prepared,f),c.rect=p&&f.name?p.getRect(m):null,eu(c,d),d.fire("autoStart:prepared",{interaction:c})}function _c(c,l,d,f){var p=c.options,m=p[d.name].max,b=p[d.name].maxPerElement,v=f.autoStart.maxInteractions,D=0,k=0,L=0;if(!(m&&b&&v))return!1;for(var q=0;q<f.interactions.list.length;q++){var se=f.interactions.list[q],ue=se.prepared.name;if(se.interacting()&&(++D>=v||se.interactable===c&&((k+=ue===d.name?1:0)>=m||se.element===l&&(L++,ue===d.name&&L>=b))))return!1}return v>0}function Xl(c,l){return A.default.number(c)?(l.autoStart.maxInteractions=c,this):l.autoStart.maxInteractions}function Zl(c,l,d){var f=d.autoStart.cursorElement;f&&f!==c&&(f.style.cursor=""),c.ownerDocument.documentElement.style.cursor=l,c.style.cursor=l,d.autoStart.cursorElement=l?c:null}function eu(c,l){var d=c.interactable,f=c.element,p=c.prepared;if("mouse"===c.pointerType&&d&&d.options.styleCursor){var m="";if(p.name){var b=d.options[p.name].cursorChecker;m=A.default.func(b)?b(p,d,f,c._interacting):l.actions.map[p.name].getCursor(p)}Zl(c.element,m||"",l)}else l.autoStart.cursorElement&&Zl(l.autoStart.cursorElement,"",l)}Object.defineProperty(as,"__esModule",{value:!0}),as.default=void 0,as.default={id:"auto-start/base",before:["actions"],install:function(c){var l=c.interactStatic,d=c.defaults;c.usePlugin(Zi.default),d.base.actionChecker=null,d.base.styleCursor=!0,(0,ye.default)(d.perAction,{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}),l.maxInteractions=function(f){return Xl(f,c)},c.autoStart={maxInteractions:1/0,withinInteractionLimit:_c,cursorElement:null}},listeners:{"interactions:down":function(c,l){var d=c.interaction,f=c.pointer,p=c.event,m=c.eventTarget;d.interacting()||Lf(d,Vf(d,f,p,m,l),l)},"interactions:move":function(c,l){var d,f,p,m,b,v;f=l,m=(d=c).pointer,b=d.event,v=d.eventTarget,"mouse"!==(p=d.interaction).pointerType||p.pointerIsDown||p.interacting()||Lf(p,Vf(p,m,b,v,f),f),function(d,f){var p=d.interaction;if(p.pointerIsDown&&!p.interacting()&&p.pointerWasMoved&&p.prepared.name){f.fire("autoStart:before-start",d);var m=p.interactable,b=p.prepared.name;b&&m&&(m.options[b].manualStart||!_c(m,p.element,p.prepared,f)?p.stop():(p.start(p.prepared,m,p.element),eu(p,f)))}}(c,l)},"interactions:stop":function(c,l){var d=c.interaction,f=d.interactable;f&&f.options.styleCursor&&Zl(d.element,"",l)}},maxInteractions:Xl,withinInteractionLimit:_c,validateAction:Nr};var bn={};Object.defineProperty(bn,"__esModule",{value:!0}),bn.default=void 0,bn.default={id:"auto-start/dragAxis",listeners:{"autoStart:before-start":function(c,l){var d=c.interaction,f=c.eventTarget,m=c.dy;if("drag"===d.prepared.name){var b=Math.abs(c.dx),v=Math.abs(m),D=d.interactable.options.drag,k=D.startAxis,L=b>v?"x":b<v?"y":"xy";if(d.prepared.axis="start"===D.lockAxis?L[0]:D.lockAxis,"xy"!==L&&"xy"!==k&&k!==L){d.prepared.name=null;for(var q=f,se=function(ie){if(ie!==d.interactable){var Ce=d.interactable.options.drag;if(!Ce.manualStart&&ie.testIgnoreAllow(Ce,q,f)){var Te=ie.getAction(d.downPointer,d.downEvent,d,q);if(Te&&"drag"===Te.name&&function(Ee,Re){if(!Re)return!1;var Be=Re.options.drag.startAxis;return"xy"===Ee||"xy"===Be||Be===Ee}(L,ie)&&as.default.validateAction(Te,ie,q,f,l))return ie}}};A.default.element(q);){var ue=l.interactables.forEachMatch(q,se);if(ue){d.prepared.name="drag",d.interactable=ue,d.element=q;break}q=(0,re.parentNode)(q)}}}}}};var bc={};function tu(c){var l=c.prepared&&c.prepared.name;if(!l)return null;var d=c.interactable.options;return d[l].hold||d[l].delay}Object.defineProperty(bc,"__esModule",{value:!0}),bc.default=void 0,bc.default={id:"auto-start/hold",install:function(c){var l=c.defaults;c.usePlugin(as.default),l.perAction.hold=0,l.perAction.delay=0},listeners:{"interactions:new":function(c){c.interaction.autoStartHoldTimer=null},"autoStart:prepared":function(c){var l=c.interaction,d=tu(l);d>0&&(l.autoStartHoldTimer=setTimeout(function(){l.start(l.prepared,l.interactable,l.element)},d))},"interactions:move":function(c){var l=c.interaction;l.autoStartHoldTimer&&l.pointerWasMoved&&!c.duplicate&&(clearTimeout(l.autoStartHoldTimer),l.autoStartHoldTimer=null)},"autoStart:before-start":function(c){var l=c.interaction;tu(l)>0&&(l.prepared.name=null)}},getHoldDuration:tu};var Oe={};Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.default=void 0,Oe.default={id:"auto-start",install:function(c){c.usePlugin(as.default),c.usePlugin(bc.default),c.usePlugin(bn.default)}};var Kt={};function ei(c){return/^(always|never|auto)$/.test(c)?(this.options.preventDefault=c,this):A.default.bool(c)?(this.options.preventDefault=c?"always":"never",this):this.options.preventDefault}function nu(c){var l=c.interaction;l.interactable&&l.interactable.checkAndPreventDefault(c.event)}function ru(c){var l=c.Interactable;l.prototype.preventDefault=ei,l.prototype.checkAndPreventDefault=function(d){return function(f,p,m){var b=f.options.preventDefault;if("never"!==b)if("always"!==b){if(p.events.supportsPassive&&/^touch(start|move)$/.test(m.type)){var v=(0,I.getWindow)(m.target).document,D=p.getDocOptions(v);if(!D||!D.events||!1!==D.events.passive)return}/^(mouse|pointer|touch)*(down|start)/i.test(m.type)||A.default.element(m.target)&&(0,re.matchesSelector)(m.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||m.preventDefault()}else m.preventDefault()}(this,c,d)},c.interactions.docEvents.push({type:"dragstart",listener:function(d){for(var f=0;f<c.interactions.list.length;f++){var p=c.interactions.list[f];if(p.element&&(p.element===d.target||(0,re.nodeContains)(p.element,d.target)))return void p.interactable.checkAndPreventDefault(d)}}})}Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.install=ru,Kt.default=void 0;var jf={id:"core/interactablePreventDefault",install:ru,listeners:["down","move","up","cancel"].reduce(function(c,l){return c["interactions:".concat(l)]=nu,c},{})};Kt.default=jf;var Ks={};Object.defineProperty(Ks,"__esModule",{value:!0}),Ks.default=void 0,Ks.default={};var xi,c,cs={};Object.defineProperty(cs,"__esModule",{value:!0}),cs.default=void 0,(c=xi||(xi={})).touchAction="touchAction",c.boxSizing="boxSizing",c.noListeners="noListeners",cs.default={id:"dev-tools",install:function(){}};var eo={};Object.defineProperty(eo,"__esModule",{value:!0}),eo.default=function c(l){var d={};for(var f in l){var p=l[f];d[f]=A.default.plainObject(p)?c(p):A.default.array(p)?ut.from(p):p}return d};var Ne={};function Js(c,l){return function(d){if(Array.isArray(d))return d}(c)||function(d,f){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(d)){var p=[],m=!0,b=!1,v=void 0;try{for(var D,k=d[Symbol.iterator]();!(m=(D=k.next()).done)&&(p.push(D.value),!f||p.length!==f);m=!0);}catch(L){b=!0,v=L}finally{try{m||null==k.return||k.return()}finally{if(b)throw v}}return p}}(c,l)||function(d,f){if(d){if("string"==typeof d)return ou(d,f);var p=Object.prototype.toString.call(d).slice(8,-1);return"Object"===p&&d.constructor&&(p=d.constructor.name),"Map"===p||"Set"===p?Array.from(d):"Arguments"===p||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p)?ou(d,f):void 0}}(c,l)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ou(c,l){(null==l||l>c.length)&&(l=c.length);for(var d=0,f=Array(l);d<l;d++)f[d]=c[d];return f}function Pi(c,l,d){return l in c?Object.defineProperty(c,l,{value:d,enumerable:!0,configurable:!0,writable:!0}):c[l]=d,c}Object.defineProperty(Ne,"__esModule",{value:!0}),Ne.getRectOffset=Qn,Ne.default=void 0;var my=function(){function c(f){(function(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")})(this,c),Pi(this,"states",[]),Pi(this,"startOffset",{left:0,right:0,top:0,bottom:0}),Pi(this,"startDelta",void 0),Pi(this,"result",void 0),Pi(this,"endResult",void 0),Pi(this,"edges",void 0),Pi(this,"interaction",void 0),this.interaction=f,this.result=vr()}var d;return(d=[{key:"start",value:function(f,p){var k,L,q,m=f.phase,b=this.interaction,v=(q=(L=(k=b).interactable.options[k.prepared.name]).modifiers)&&q.length?q:["snap","snapSize","snapEdges","restrict","restrictEdges","restrictSize"].map(function(se){var ue=L[se];return ue&&ue.enabled&&{options:ue,methods:ue._methods}}).filter(function(se){return!!se});this.prepareStates(v),this.edges=(0,ye.default)({},b.edges),this.startOffset=Qn(b.rect,p),this.startDelta={x:0,y:0};var D=this.fillArg({phase:m,pageCoords:p,preEnd:!1});return this.result=vr(),this.startAll(D),this.result=this.setAll(D)}},{key:"fillArg",value:function(f){var p=this.interaction;return f.interaction=p,f.interactable=p.interactable,f.element=p.element,f.rect=f.rect||p.rect,f.edges=this.edges,f.startOffset=this.startOffset,f}},{key:"startAll",value:function(f){for(var p=0;p<this.states.length;p++){var m=this.states[p];m.methods.start&&(f.state=m,m.methods.start(f))}}},{key:"setAll",value:function(f){var p=f.phase,m=f.preEnd,b=f.skipModifiers,v=f.rect;f.coords=(0,ye.default)({},f.pageCoords),f.rect=(0,ye.default)({},v);for(var D=b?this.states.slice(b):this.states,k=vr(f.coords,f.rect),L=0;L<D.length;L++){var q,se=D[L],ue=se.options,ie=(0,ye.default)({},f.coords),Ce=null;null!=(q=se.methods)&&q.set&&this.shouldDo(ue,m,p)&&(f.state=se,Ce=se.methods.set(f),ke.addEdges(this.interaction.edges,f.rect,{x:f.coords.x-ie.x,y:f.coords.y-ie.y})),k.eventProps.push(Ce)}k.delta.x=f.coords.x-f.pageCoords.x,k.delta.y=f.coords.y-f.pageCoords.y,k.rectDelta.left=f.rect.left-v.left,k.rectDelta.right=f.rect.right-v.right,k.rectDelta.top=f.rect.top-v.top,k.rectDelta.bottom=f.rect.bottom-v.bottom;var Te=this.result.coords,Ee=this.result.rect;return Te&&Ee&&(k.changed=k.rect.left!==Ee.left||k.rect.right!==Ee.right||k.rect.top!==Ee.top||k.rect.bottom!==Ee.bottom||Te.x!==k.coords.x||Te.y!==k.coords.y),k}},{key:"applyToInteraction",value:function(f){var p=this.interaction,b=p.coords.cur,v=p.coords.start,D=this.result,k=this.startDelta,L=D.delta;"start"===f.phase&&(0,ye.default)(this.startDelta,D.delta);for(var q=0;q<[[v,k],[b,L]].length;q++){var se=Js([[v,k],[b,L]][q],2),ue=se[0],ie=se[1];ue.page.x+=ie.x,ue.page.y+=ie.y,ue.client.x+=ie.x,ue.client.y+=ie.y}var Ce=this.result.rectDelta,Te=f.rect||p.rect;Te.left+=Ce.left,Te.right+=Ce.right,Te.top+=Ce.top,Te.bottom+=Ce.bottom,Te.width=Te.right-Te.left,Te.height=Te.bottom-Te.top}},{key:"setAndApply",value:function(f){var p=this.interaction,v=f.skipModifiers,D=this.setAll(this.fillArg({preEnd:f.preEnd,phase:f.phase,pageCoords:f.modifiedCoords||p.coords.cur.page}));if(this.result=D,!D.changed&&(!v||v<this.states.length)&&p.interacting())return!1;if(f.modifiedCoords){var k=p.coords.cur.page,L={x:f.modifiedCoords.x-k.x,y:f.modifiedCoords.y-k.y};D.coords.x+=L.x,D.coords.y+=L.y,D.delta.x+=L.x,D.delta.y+=L.y}this.applyToInteraction(f)}},{key:"beforeEnd",value:function(f){var p=f.interaction,m=f.event,b=this.states;if(b&&b.length){for(var v=!1,D=0;D<b.length;D++){var k=b[D];f.state=k;var L=k.options,q=k.methods,se=q.beforeEnd&&q.beforeEnd(f);if(se)return this.endResult=se,!1;v=v||!v&&this.shouldDo(L,!0,f.phase,!0)}v&&p.move({event:m,preEnd:!0})}}},{key:"stop",value:function(f){var p=f.interaction;if(this.states&&this.states.length){var m=(0,ye.default)({states:this.states,interactable:p.interactable,element:p.element,rect:null},f);this.fillArg(m);for(var b=0;b<this.states.length;b++){var v=this.states[b];m.state=v,v.methods.stop&&v.methods.stop(m)}this.states=null,this.endResult=null}}},{key:"prepareStates",value:function(f){this.states=[];for(var p=0;p<f.length;p++){var m=f[p];this.states.push({options:m.options,methods:m.methods,index:p,name:m.name})}return this.states}},{key:"restoreInteractionCoords",value:function(f){var p=f.interaction,m=p.coords,b=p.rect,v=p.modification;if(v.result){for(var k=v.result,q=k.rectDelta,se=[[m.start,v.startDelta],[m.cur,k.delta]],ue=0;ue<se.length;ue++){var ie=Js(se[ue],2),Ce=ie[0],Te=ie[1];Ce.page.x-=Te.x,Ce.page.y-=Te.y,Ce.client.x-=Te.x,Ce.client.y-=Te.y}b.left-=q.left,b.right-=q.right,b.top-=q.top,b.bottom-=q.bottom}}},{key:"shouldDo",value:function(f,p,m,b){return!(!f||!1===f.enabled||b&&!f.endOnly||f.endOnly&&!p||"start"===m&&!f.setStart)}},{key:"copyFrom",value:function(f){this.startOffset=f.startOffset,this.startDelta=f.startDelta,this.edges=f.edges,this.states=f.states.map(function(p){return(0,eo.default)(p)}),this.result=vr((0,ye.default)({},f.result.coords),(0,ye.default)({},f.result.rect))}},{key:"destroy",value:function(){for(var f in this)this[f]=null}}])&&function(c,l){for(var d=0;d<l.length;d++){var f=l[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}(c.prototype,d),c}();function vr(c,l){return{rect:l,coords:c,delta:{x:0,y:0},rectDelta:{left:0,right:0,top:0,bottom:0},eventProps:[],changed:!0}}function Qn(c,l){return c?{left:l.x-c.left,top:l.y-c.top,right:c.right-l.x,bottom:c.bottom-l.y}:{left:0,top:0,right:0,bottom:0}}Ne.default=my;var Cn={};function Cc(c){var d=c.interaction.modification.result;d&&(c.iEvent.modifiers=d.eventProps)}Object.defineProperty(Cn,"__esModule",{value:!0}),Cn.makeModifier=function(c,l){var d=c.defaults,f={start:c.start,set:c.set,beforeEnd:c.beforeEnd,stop:c.stop},p=function(m){var b=m||{};for(var v in b.enabled=!1!==b.enabled,d)v in b||(b[v]=d[v]);var D={options:b,methods:f,name:l,enable:function(){return b.enabled=!0,D},disable:function(){return b.enabled=!1,D}};return D};return l&&"string"==typeof l&&(p._defaults=d,p._methods=f),p},Cn.addEventModifiers=Cc,Cn.default=void 0,Cn.default={id:"modifiers/base",before:["actions"],install:function(c){c.defaults.perAction.modifiers=[]},listeners:{"interactions:new":function(c){var l=c.interaction;l.modification=new Ne.default(l)},"interactions:before-action-start":function(c){var l=c.interaction.modification;l.start(c,c.interaction.coords.start.page),c.interaction.edges=l.edges,l.applyToInteraction(c)},"interactions:before-action-move":function(c){return c.interaction.modification.setAndApply(c)},"interactions:before-action-end":function(c){return c.interaction.modification.beforeEnd(c)},"interactions:action-start":Cc,"interactions:action-move":Cc,"interactions:action-end":Cc,"interactions:after-action-start":function(c){return c.interaction.modification.restoreInteractionCoords(c)},"interactions:after-action-move":function(c){return c.interaction.modification.restoreInteractionCoords(c)},"interactions:stop":function(c){return c.interaction.modification.stop(c)}}};var ls={};Object.defineProperty(ls,"__esModule",{value:!0}),ls.defaults=void 0,ls.defaults={base:{preventDefault:"auto",deltaSource:"page"},perAction:{enabled:!1,origin:{x:0,y:0}},actions:{}};var us={};function su(c){return(su="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(l){return typeof l}:function(l){return l&&"function"==typeof Symbol&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(c)}function yt(c,l){return(yt=Object.setPrototypeOf||function(d,f){return d.__proto__=f,d})(c,l)}function vy(c,l){return!l||"object"!==su(l)&&"function"!=typeof l?Ct(c):l}function Ct(c){if(void 0===c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function Mi(c){return(Mi=Object.setPrototypeOf?Object.getPrototypeOf:function(l){return l.__proto__||Object.getPrototypeOf(l)})(c)}function Ve(c,l,d){return l in c?Object.defineProperty(c,l,{value:d,enumerable:!0,configurable:!0,writable:!0}):c[l]=d,c}Object.defineProperty(us,"__esModule",{value:!0}),us.InteractEvent=void 0;var ds=function(c){!function(v,D){if("function"!=typeof D&&null!==D)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(D&&D.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),D&&yt(v,D)}(b,c);var d,f,p,m=(f=b,p=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(v){return!1}}(),function(){var v,D=Mi(f);if(p){var k=Mi(this).constructor;v=Reflect.construct(D,arguments,k)}else v=D.apply(this,arguments);return vy(this,v)});function b(v,D,k,L,q,se,ue){var ie;(function(_t,ct){if(!(_t instanceof ct))throw new TypeError("Cannot call a class as a function")})(this,b),Ve(Ct(ie=m.call(this,v)),"target",void 0),Ve(Ct(ie),"currentTarget",void 0),Ve(Ct(ie),"relatedTarget",null),Ve(Ct(ie),"screenX",void 0),Ve(Ct(ie),"screenY",void 0),Ve(Ct(ie),"button",void 0),Ve(Ct(ie),"buttons",void 0),Ve(Ct(ie),"ctrlKey",void 0),Ve(Ct(ie),"shiftKey",void 0),Ve(Ct(ie),"altKey",void 0),Ve(Ct(ie),"metaKey",void 0),Ve(Ct(ie),"page",void 0),Ve(Ct(ie),"client",void 0),Ve(Ct(ie),"delta",void 0),Ve(Ct(ie),"rect",void 0),Ve(Ct(ie),"x0",void 0),Ve(Ct(ie),"y0",void 0),Ve(Ct(ie),"t0",void 0),Ve(Ct(ie),"dt",void 0),Ve(Ct(ie),"duration",void 0),Ve(Ct(ie),"clientX0",void 0),Ve(Ct(ie),"clientY0",void 0),Ve(Ct(ie),"velocity",void 0),Ve(Ct(ie),"speed",void 0),Ve(Ct(ie),"swipe",void 0),Ve(Ct(ie),"timeStamp",void 0),Ve(Ct(ie),"axes",void 0),Ve(Ct(ie),"preEnd",void 0);var Ce=v.interactable,Te=(Ce&&Ce.options||ls.defaults).deltaSource,Ee=(0,It.default)(Ce,q=q||v.element,k),Re="start"===L,Be="end"===L,qe=Re?Ct(ie):v.prevEvent,mt=Re?v.coords.start:Be?{page:qe.page,client:qe.client,timeStamp:v.coords.cur.timeStamp}:v.coords.cur;return ie.page=(0,ye.default)({},mt.page),ie.client=(0,ye.default)({},mt.client),ie.rect=(0,ye.default)({},v.rect),ie.timeStamp=mt.timeStamp,Be||(ie.page.x-=Ee.x,ie.page.y-=Ee.y,ie.client.x-=Ee.x,ie.client.y-=Ee.y),ie.ctrlKey=D.ctrlKey,ie.altKey=D.altKey,ie.shiftKey=D.shiftKey,ie.metaKey=D.metaKey,ie.button=D.button,ie.buttons=D.buttons,ie.target=q,ie.currentTarget=q,ie.preEnd=se,ie.type=ue||k+(L||""),ie.interactable=Ce,ie.t0=Re?v.pointers[v.pointers.length-1].downTime:qe.t0,ie.x0=v.coords.start.page.x-Ee.x,ie.y0=v.coords.start.page.y-Ee.y,ie.clientX0=v.coords.start.client.x-Ee.x,ie.clientY0=v.coords.start.client.y-Ee.y,ie.delta=Re||Be?{x:0,y:0}:{x:ie[Te].x-qe[Te].x,y:ie[Te].y-qe[Te].y},ie.dt=v.coords.delta.timeStamp,ie.duration=ie.timeStamp-ie.t0,ie.velocity=(0,ye.default)({},v.coords.velocity[Te]),ie.speed=(0,He.default)(ie.velocity.x,ie.velocity.y),ie.swipe=Be||"inertiastart"===L?ie.getSwipe():null,ie}return(d=[{key:"getSwipe",value:function(){var v=this._interaction;if(v.prevEvent.speed<600||this.timeStamp-v.prevEvent.timeStamp>150)return null;var D=180*Math.atan2(v.prevEvent.velocityY,v.prevEvent.velocityX)/Math.PI;D<0&&(D+=360);var k=112.5<=D&&D<247.5,L=202.5<=D&&D<337.5;return{up:L,down:!L&&22.5<=D&&D<157.5,left:k,right:!k&&(292.5<=D||D<67.5),angle:D,speed:v.prevEvent.speed,velocity:{x:v.prevEvent.velocityX,y:v.prevEvent.velocityY}}}},{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}])&&function(c,l){for(var d=0;d<l.length;d++){var f=l[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}(b.prototype,d),b}(Pn.BaseEvent);us.InteractEvent=ds,Object.defineProperties(ds.prototype,{pageX:{get:function(){return this.page.x},set:function(c){this.page.x=c}},pageY:{get:function(){return this.page.y},set:function(c){this.page.y=c}},clientX:{get:function(){return this.client.x},set:function(c){this.client.x=c}},clientY:{get:function(){return this.client.y},set:function(c){this.client.y=c}},dx:{get:function(){return this.delta.x},set:function(c){this.delta.x=c}},dy:{get:function(){return this.delta.y},set:function(c){this.delta.y=c}},velocityX:{get:function(){return this.velocity.x},set:function(c){this.velocity.x=c}},velocityY:{get:function(){return this.velocity.y},set:function(c){this.velocity.y=c}}});var to={};function no(c,l,d){return l in c?Object.defineProperty(c,l,{value:d,enumerable:!0,configurable:!0,writable:!0}):c[l]=d,c}Object.defineProperty(to,"__esModule",{value:!0}),to.PointerInfo=void 0,to.PointerInfo=function c(l,d,f,p,m){(function(b,v){if(!(b instanceof v))throw new TypeError("Cannot call a class as a function")})(this,c),no(this,"id",void 0),no(this,"pointer",void 0),no(this,"event",void 0),no(this,"downTime",void 0),no(this,"downTarget",void 0),this.id=l,this.pointer=d,this.event=f,this.downTime=p,this.downTarget=m};var fs,Xs,Ht={};function Lt(c,l,d){return l in c?Object.defineProperty(c,l,{value:d,enumerable:!0,configurable:!0,writable:!0}):c[l]=d,c}Object.defineProperty(Ht,"__esModule",{value:!0}),Object.defineProperty(Ht,"PointerInfo",{enumerable:!0,get:function(){return to.PointerInfo}}),Ht.default=Ht.Interaction=Ht._ProxyMethods=Ht._ProxyValues=void 0,Ht._ProxyValues=fs,function(c){c.interactable="",c.element="",c.prepared="",c.pointerIsDown="",c.pointerWasMoved="",c._proxy=""}(fs||(Ht._ProxyValues=fs={})),Ht._ProxyMethods=Xs,function(c){c.start="",c.move="",c.end="",c.stop="",c.interacting=""}(Xs||(Ht._ProxyMethods=Xs={}));var _r=0,au=function(){function c(f){var p=this,m=f.pointerType,b=f.scopeFire;(function(se,ue){if(!(se instanceof ue))throw new TypeError("Cannot call a class as a function")})(this,c),Lt(this,"interactable",null),Lt(this,"element",null),Lt(this,"rect",void 0),Lt(this,"_rects",void 0),Lt(this,"edges",void 0),Lt(this,"_scopeFire",void 0),Lt(this,"prepared",{name:null,axis:null,edges:null}),Lt(this,"pointerType",void 0),Lt(this,"pointers",[]),Lt(this,"downEvent",null),Lt(this,"downPointer",{}),Lt(this,"_latestPointer",{pointer:null,event:null,eventTarget:null}),Lt(this,"prevEvent",null),Lt(this,"pointerIsDown",!1),Lt(this,"pointerWasMoved",!1),Lt(this,"_interacting",!1),Lt(this,"_ending",!1),Lt(this,"_stopped",!0),Lt(this,"_proxy",null),Lt(this,"simulation",null),Lt(this,"doMove",(0,dr.warnOnce)(function(se){this.move(se)},"The interaction.doMove() method has been renamed to interaction.move()")),Lt(this,"coords",{start:Ie.newCoords(),prev:Ie.newCoords(),cur:Ie.newCoords(),delta:Ie.newCoords(),velocity:Ie.newCoords()}),Lt(this,"_id",_r++),this._scopeFire=b,this.pointerType=m;var v=this;this._proxy={};var D=function(se){Object.defineProperty(p._proxy,se,{get:function(){return v[se]}})};for(var k in fs)D(k);var L=function(se){Object.defineProperty(p._proxy,se,{value:function(){return v[se].apply(v,arguments)}})};for(var q in Xs)L(q);this._scopeFire("interactions:new",{interaction:this})}var d;return(d=[{key:"pointerMoveTolerance",get:function(){return 1}},{key:"pointerDown",value:function(f,p,m){var b=this.updatePointer(f,p,m,!0);this._scopeFire("interactions:down",{pointer:f,event:p,eventTarget:m,pointerIndex:b,pointerInfo:this.pointers[b],type:"down",interaction:this})}},{key:"start",value:function(f,p,m){return!(this.interacting()||!this.pointerIsDown||this.pointers.length<("gesture"===f.name?2:1)||!p.options[f.name].enabled)&&((0,dr.copyAction)(this.prepared,f),this.interactable=p,this.element=m,this.rect=p.getRect(m),this.edges=this.prepared.edges?(0,ye.default)({},this.prepared.edges):{left:!0,right:!0,top:!0,bottom:!0},this._stopped=!1,this._interacting=this._doPhase({interaction:this,event:this.downEvent,phase:"start"})&&!this._stopped,this._interacting)}},{key:"pointerMove",value:function(f,p,m){this.simulation||this.modification&&this.modification.endResult||this.updatePointer(f,p,m,!1);var b,v,D=this.coords.cur.page.x===this.coords.prev.page.x&&this.coords.cur.page.y===this.coords.prev.page.y&&this.coords.cur.client.x===this.coords.prev.client.x&&this.coords.cur.client.y===this.coords.prev.client.y;this.pointerIsDown&&!this.pointerWasMoved&&(this.pointerWasMoved=(0,He.default)(b=this.coords.cur.client.x-this.coords.start.client.x,v=this.coords.cur.client.y-this.coords.start.client.y)>this.pointerMoveTolerance);var k=this.getPointerIndex(f),L={pointer:f,pointerIndex:k,pointerInfo:this.pointers[k],event:p,type:"move",eventTarget:m,dx:b,dy:v,duplicate:D,interaction:this};D||Ie.setCoordVelocity(this.coords.velocity,this.coords.delta),this._scopeFire("interactions:move",L),D||this.simulation||(this.interacting()&&(L.type=null,this.move(L)),this.pointerWasMoved&&Ie.copyCoords(this.coords.prev,this.coords.cur))}},{key:"move",value:function(f){f&&f.event||Ie.setZeroCoords(this.coords.delta),(f=(0,ye.default)({pointer:this._latestPointer.pointer,event:this._latestPointer.event,eventTarget:this._latestPointer.eventTarget,interaction:this},f||{})).phase="move",this._doPhase(f)}},{key:"pointerUp",value:function(f,p,m,b){var v=this.getPointerIndex(f);-1===v&&(v=this.updatePointer(f,p,m,!1));var D=/cancel$/i.test(p.type)?"cancel":"up";this._scopeFire("interactions:".concat(D),{pointer:f,pointerIndex:v,pointerInfo:this.pointers[v],event:p,eventTarget:m,type:D,curEventTarget:b,interaction:this}),this.simulation||this.end(p),this.removePointer(f,p)}},{key:"documentBlur",value:function(f){this.end(f),this._scopeFire("interactions:blur",{event:f,type:"blur",interaction:this})}},{key:"end",value:function(f){var p;this._ending=!0,f=f||this._latestPointer.event,this.interacting()&&(p=this._doPhase({event:f,interaction:this,phase:"end"})),this._ending=!1,!0===p&&this.stop()}},{key:"currentAction",value:function(){return this._interacting?this.prepared.name:null}},{key:"interacting",value:function(){return this._interacting}},{key:"stop",value:function(){this._scopeFire("interactions:stop",{interaction:this}),this.interactable=this.element=null,this._interacting=!1,this._stopped=!0,this.prepared.name=this.prevEvent=null}},{key:"getPointerIndex",value:function(f){var p=Ie.getPointerId(f);return"mouse"===this.pointerType||"pen"===this.pointerType?this.pointers.length-1:ut.findIndex(this.pointers,function(m){return m.id===p})}},{key:"getPointerInfo",value:function(f){return this.pointers[this.getPointerIndex(f)]}},{key:"updatePointer",value:function(f,p,m,b){var v=Ie.getPointerId(f),D=this.getPointerIndex(f),k=this.pointers[D];return b=!1!==b&&(b||/(down|start)$/i.test(p.type)),k?k.pointer=f:(k=new to.PointerInfo(v,f,p,null,null),D=this.pointers.length,this.pointers.push(k)),Ie.setCoords(this.coords.cur,this.pointers.map(function(L){return L.pointer}),this._now()),Ie.setCoordDeltas(this.coords.delta,this.coords.prev,this.coords.cur),b&&(this.pointerIsDown=!0,k.downTime=this.coords.cur.timeStamp,k.downTarget=m,Ie.pointerExtend(this.downPointer,f),this.interacting()||(Ie.copyCoords(this.coords.start,this.coords.cur),Ie.copyCoords(this.coords.prev,this.coords.cur),this.downEvent=p,this.pointerWasMoved=!1)),this._updateLatestPointer(f,p,m),this._scopeFire("interactions:update-pointer",{pointer:f,event:p,eventTarget:m,down:b,pointerInfo:k,pointerIndex:D,interaction:this}),D}},{key:"removePointer",value:function(f,p){var m=this.getPointerIndex(f);-1!==m&&(this._scopeFire("interactions:remove-pointer",{pointer:f,event:p,eventTarget:null,pointerIndex:m,pointerInfo:this.pointers[m],interaction:this}),this.pointers.splice(m,1),this.pointerIsDown=!1)}},{key:"_updateLatestPointer",value:function(f,p,m){this._latestPointer.pointer=f,this._latestPointer.event=p,this._latestPointer.eventTarget=m}},{key:"destroy",value:function(){this._latestPointer.pointer=null,this._latestPointer.event=null,this._latestPointer.eventTarget=null}},{key:"_createPreparedEvent",value:function(f,p,m,b){return new us.InteractEvent(this,f,this.prepared.name,p,this.element,m,b)}},{key:"_fireEvent",value:function(f){this.interactable.fire(f),(!this.prevEvent||f.timeStamp>=this.prevEvent.timeStamp)&&(this.prevEvent=f)}},{key:"_doPhase",value:function(f){var p=f.event,m=f.phase,b=f.preEnd,v=f.type,D=this.rect;if(D&&"move"===m&&(ke.addEdges(this.edges,D,this.coords.delta[this.interactable.options.deltaSource]),D.width=D.right-D.left,D.height=D.bottom-D.top),!1===this._scopeFire("interactions:before-action-".concat(m),f))return!1;var k=f.iEvent=this._createPreparedEvent(p,m,b,v);return this._scopeFire("interactions:action-".concat(m),f),"start"===m&&(this.prevEvent=k),this._fireEvent(k),this._scopeFire("interactions:after-action-".concat(m),f),!0}},{key:"_now",value:function(){return Date.now()}}])&&function(c,l){for(var d=0;d<l.length;d++){var f=l[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}(c.prototype,d),c}();Ht.Interaction=au,Ht.default=au;var Ai={};function Ec(c){c.pointerIsDown&&(Le(c.coords.cur,c.offset.total),c.offset.pending.x=0,c.offset.pending.y=0)}function Fn(c){Dc(c.interaction)}function Dc(c){if(!(d=c).offset.pending.x&&!d.offset.pending.y)return!1;var d,l=c.offset.pending;return Le(c.coords.cur,l),Le(c.coords.delta,l),ke.addEdges(c.edges,c.rect,l),l.x=0,l.y=0,!0}function lu(c){var l=c.x,d=c.y;this.offset.pending.x+=l,this.offset.pending.y+=d,this.offset.total.x+=l,this.offset.total.y+=d}function Le(c,l){var d=c.page,f=c.client,p=l.x,m=l.y;d.x+=p,d.y+=m,f.x+=p,f.y+=m}Object.defineProperty(Ai,"__esModule",{value:!0}),Ai.addTotal=Ec,Ai.applyPending=Dc,Ai.default=void 0,Ht._ProxyMethods.offsetBy="",Ai.default={id:"offset",before:["modifiers","pointer-events","actions","inertia"],install:function(c){c.Interaction.prototype.offsetBy=lu},listeners:{"interactions:new":function(c){c.interaction.offset={total:{x:0,y:0},pending:{x:0,y:0}}},"interactions:update-pointer":function(c){return Ec(c.interaction)},"interactions:before-action-start":Fn,"interactions:before-action-move":Fn,"interactions:before-action-end":function(c){var l=c.interaction;if(Dc(l))return l.move({offset:!0}),l.end(),!1},"interactions:stop":function(c){var l=c.interaction;l.offset.total.x=0,l.offset.total.y=0,l.offset.pending.x=0,l.offset.pending.y=0}}};var Jt={};function Ft(c,l,d){return l in c?Object.defineProperty(c,l,{value:d,enumerable:!0,configurable:!0,writable:!0}):c[l]=d,c}Object.defineProperty(Jt,"__esModule",{value:!0}),Jt.default=Jt.InertiaState=void 0;var Yn=function(){function c(f){(function(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")})(this,c),Ft(this,"active",!1),Ft(this,"isModified",!1),Ft(this,"smoothEnd",!1),Ft(this,"allowResume",!1),Ft(this,"modification",void 0),Ft(this,"modifierCount",0),Ft(this,"modifierArg",void 0),Ft(this,"startCoords",void 0),Ft(this,"t0",0),Ft(this,"v0",0),Ft(this,"te",0),Ft(this,"targetOffset",void 0),Ft(this,"modifiedOffset",void 0),Ft(this,"currentOffset",void 0),Ft(this,"lambda_v0",0),Ft(this,"one_ve_v0",0),Ft(this,"timeout",void 0),Ft(this,"interaction",void 0),this.interaction=f}var d;return(d=[{key:"start",value:function(f){var p=this.interaction,m=Zs(p);if(!m||!m.enabled)return!1;var b=p.coords.velocity.client,v=(0,He.default)(b.x,b.y),D=this.modification||(this.modification=new Ne.default(p));if(D.copyFrom(p.modification),this.t0=p._now(),this.allowResume=m.allowResume,this.v0=v,this.currentOffset={x:0,y:0},this.startCoords=p.coords.cur.page,this.modifierArg=D.fillArg({pageCoords:this.startCoords,preEnd:!0,phase:"inertiastart"}),this.t0-p.coords.cur.timeStamp<50&&v>m.minSpeed&&v>m.endSpeed)this.startInertia();else{if(D.result=D.setAll(this.modifierArg),!D.result.changed)return!1;this.startSmoothEnd()}return p.modification.result.rect=null,p.offsetBy(this.targetOffset),p._doPhase({interaction:p,event:f,phase:"inertiastart"}),p.offsetBy({x:-this.targetOffset.x,y:-this.targetOffset.y}),p.modification.result.rect=null,this.active=!0,p.simulation=this,!0}},{key:"startInertia",value:function(){var f=this,p=this.interaction.coords.velocity.client,m=Zs(this.interaction),b=m.resistance,v=-Math.log(m.endSpeed/this.v0)/b;this.targetOffset={x:(p.x-v)/b,y:(p.y-v)/b},this.te=v,this.lambda_v0=b/this.v0,this.one_ve_v0=1-m.endSpeed/this.v0;var D=this.modification,k=this.modifierArg;k.pageCoords={x:this.startCoords.x+this.targetOffset.x,y:this.startCoords.y+this.targetOffset.y},D.result=D.setAll(k),D.result.changed&&(this.isModified=!0,this.modifiedOffset={x:this.targetOffset.x+D.result.delta.x,y:this.targetOffset.y+D.result.delta.y}),this.onNextFrame(function(){return f.inertiaTick()})}},{key:"startSmoothEnd",value:function(){var f=this;this.smoothEnd=!0,this.isModified=!0,this.targetOffset={x:this.modification.result.delta.x,y:this.modification.result.delta.y},this.onNextFrame(function(){return f.smoothEndTick()})}},{key:"onNextFrame",value:function(f){var p=this;this.timeout=de.default.request(function(){p.active&&f()})}},{key:"inertiaTick",value:function(){var p,b,v,D=this,k=this.interaction,L=Zs(k).resistance,q=(k._now()-this.t0)/1e3;if(q<this.te){var se,ue=1-(Math.exp(-L*q)-this.lambda_v0)/this.one_ve_v0;this.isModified?(p=this.targetOffset.y,b=this.modifiedOffset.y,se={x:Kn(v=ue,0,this.targetOffset.x,this.modifiedOffset.x),y:Kn(v,0,p,b)}):se={x:this.targetOffset.x*ue,y:this.targetOffset.y*ue};var ie={x:se.x-this.currentOffset.x,y:se.y-this.currentOffset.y};this.currentOffset.x+=ie.x,this.currentOffset.y+=ie.y,k.offsetBy(ie),k.move(),this.onNextFrame(function(){return D.inertiaTick()})}else k.offsetBy({x:this.modifiedOffset.x-this.currentOffset.x,y:this.modifiedOffset.y-this.currentOffset.y}),this.end()}},{key:"smoothEndTick",value:function(){var f=this,p=this.interaction,m=p._now()-this.t0,b=Zs(p).smoothEndDuration;if(m<b){var v={x:xe(m,0,this.targetOffset.x,b),y:xe(m,0,this.targetOffset.y,b)},D={x:v.x-this.currentOffset.x,y:v.y-this.currentOffset.y};this.currentOffset.x+=D.x,this.currentOffset.y+=D.y,p.offsetBy(D),p.move({skipModifiers:this.modifierCount}),this.onNextFrame(function(){return f.smoothEndTick()})}else p.offsetBy({x:this.targetOffset.x-this.currentOffset.x,y:this.targetOffset.y-this.currentOffset.y}),this.end()}},{key:"resume",value:function(f){var p=f.pointer,m=f.event,b=f.eventTarget,v=this.interaction;v.offsetBy({x:-this.currentOffset.x,y:-this.currentOffset.y}),v.updatePointer(p,m,b,!0),v._doPhase({interaction:v,event:m,phase:"resume"}),(0,Ie.copyCoords)(v.coords.prev,v.coords.cur),this.stop()}},{key:"end",value:function(){this.interaction.move(),this.interaction.end(),this.stop()}},{key:"stop",value:function(){this.active=this.smoothEnd=!1,this.interaction.simulation=null,de.default.cancel(this.timeout)}}])&&function(c,l){for(var d=0;d<l.length;d++){var f=l[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}(c.prototype,d),c}();function Zs(c){var l=c.interactable,d=c.prepared;return l&&l.options&&d.name&&l.options[d.name].inertia}function Kn(c,l,d,f){var p=1-c;return p*p*l+2*p*c*d+c*c*f}function xe(c,l,d,f){return-d*(c/=f)*(c-2)+l}Jt.InertiaState=Yn,Jt.default={id:"inertia",before:["modifiers","actions"],install:function(c){var l=c.defaults;c.usePlugin(Ai.default),c.usePlugin(Cn.default),c.actions.phases.inertiastart=!0,c.actions.phases.resume=!0,l.perAction.inertia={enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300}},listeners:{"interactions:new":function(c){var l=c.interaction;l.inertia=new Yn(l)},"interactions:before-action-end":function(c){var l=c.interaction;return(!l._interacting||l.simulation||!l.inertia.start(c.event))&&null},"interactions:down":function(c){var l=c.interaction,f=l.inertia;if(f.active)for(var p=c.eventTarget;A.default.element(p);){if(p===l.element){f.resume(c);break}p=re.parentNode(p)}},"interactions:stop":function(c){var l=c.interaction.inertia;l.active&&l.stop()},"interactions:before-action-resume":function(c){var l=c.interaction.modification;l.stop(c),l.start(c,c.interaction.coords.cur.page),l.applyToInteraction(c)},"interactions:before-action-inertiastart":function(c){return c.interaction.modification.setAndApply(c)},"interactions:action-resume":Cn.addEventModifiers,"interactions:action-inertiastart":Cn.addEventModifiers,"interactions:after-action-inertiastart":function(c){return c.interaction.modification.restoreInteractionCoords(c)},"interactions:after-action-resume":function(c){return c.interaction.modification.restoreInteractionCoords(c)}}};var Dt={};function br(c,l,d){return l in c?Object.defineProperty(c,l,{value:d,enumerable:!0,configurable:!0,writable:!0}):c[l]=d,c}function tn(c,l){for(var d=0;d<l.length;d++){var f=l[d];if(c.immediatePropagationStopped)break;f(c)}}Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.Eventable=void 0;var ro=function(){function c(f){(function(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")})(this,c),br(this,"options",void 0),br(this,"types",{}),br(this,"propagationStopped",!1),br(this,"immediatePropagationStopped",!1),br(this,"global",void 0),this.options=(0,ye.default)({},f||{})}var d;return(d=[{key:"fire",value:function(f){var p,m=this.global;(p=this.types[f.type])&&tn(f,p),!f.propagationStopped&&m&&(p=m[f.type])&&tn(f,p)}},{key:"on",value:function(f,p){var m=(0,Pt.default)(f,p);for(f in m)this.types[f]=ut.merge(this.types[f]||[],m[f])}},{key:"off",value:function(f,p){var m=(0,Pt.default)(f,p);for(f in m){var b=this.types[f];if(b&&b.length)for(var v=0;v<m[f].length;v++){var k=b.indexOf(m[f][v]);-1!==k&&b.splice(k,1)}}}},{key:"getRect",value:function(f){return null}}])&&function(c,l){for(var d=0;d<l.length;d++){var f=l[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}(c.prototype,d),c}();Dt.Eventable=ro;var At={};Object.defineProperty(At,"__esModule",{value:!0}),At.default=function(c,l){if(l.phaselessTypes[c])return!0;for(var d in l.map)if(0===c.indexOf(d)&&c.substr(d.length)in l.phases)return!0;return!1};var io={};Object.defineProperty(io,"__esModule",{value:!0}),io.createInteractStatic=function(c){var l=function d(f,p){var m=c.interactables.get(f,p);return m||((m=c.interactables.new(f,p)).events.global=d.globalEvents),m};return l.getPointerAverage=Ie.pointerAverage,l.getTouchBBox=Ie.touchBBox,l.getTouchDistance=Ie.touchDistance,l.getTouchAngle=Ie.touchAngle,l.getElementRect=re.getElementRect,l.getElementClientRect=re.getElementClientRect,l.matchesSelector=re.matchesSelector,l.closest=re.closest,l.globalEvents={},l.version="1.10.11",l.scope=c,l.use=function(d,f){return this.scope.usePlugin(d,f),this},l.isSet=function(d,f){return!!this.scope.interactables.get(d,f&&f.context)},l.on=(0,dr.warnOnce)(function(d,f,p){if(A.default.string(d)&&-1!==d.search(" ")&&(d=d.trim().split(/ +/)),A.default.array(d)){for(var m=0;m<d.length;m++)this.on(d[m],f,p);return this}if(A.default.object(d)){for(var v in d)this.on(v,d[v],f);return this}return(0,At.default)(d,this.scope.actions)?this.globalEvents[d]?this.globalEvents[d].push(f):this.globalEvents[d]=[f]:this.scope.events.add(this.scope.document,d,f,{options:p}),this},"The interact.on() method is being deprecated"),l.off=(0,dr.warnOnce)(function(d,f,p){if(A.default.string(d)&&-1!==d.search(" ")&&(d=d.trim().split(/ +/)),A.default.array(d)){for(var m=0;m<d.length;m++)this.off(d[m],f,p);return this}if(A.default.object(d)){for(var v in d)this.off(v,d[v],f);return this}var D;return(0,At.default)(d,this.scope.actions)?d in this.globalEvents&&-1!==(D=this.globalEvents[d].indexOf(f))&&this.globalEvents[d].splice(D,1):this.scope.events.remove(this.scope.document,d,f,p),this},"The interact.off() method is being deprecated"),l.debug=function(){return this.scope},l.supportsTouch=function(){return C.default.supportsTouch},l.supportsPointerEvent=function(){return C.default.supportsPointerEvent},l.stop=function(){for(var d=0;d<this.scope.interactions.list.length;d++)this.scope.interactions.list[d].stop();return this},l.pointerMoveTolerance=function(d){return A.default.number(d)?(this.scope.interactions.pointerMoveTolerance=d,this):this.scope.interactions.pointerMoveTolerance},l.addDocument=function(d,f){this.scope.addDocument(d,f)},l.removeDocument=function(d){this.scope.removeDocument(d)},l};var ti={};function fr(c,l,d){return l in c?Object.defineProperty(c,l,{value:d,enumerable:!0,configurable:!0,writable:!0}):c[l]=d,c}Object.defineProperty(ti,"__esModule",{value:!0}),ti.Interactable=void 0;var No=function(){function c(f,p,m,b){(function(v,D){if(!(v instanceof D))throw new TypeError("Cannot call a class as a function")})(this,c),fr(this,"options",void 0),fr(this,"_actions",void 0),fr(this,"target",void 0),fr(this,"events",new Dt.Eventable),fr(this,"_context",void 0),fr(this,"_win",void 0),fr(this,"_doc",void 0),fr(this,"_scopeEvents",void 0),fr(this,"_rectChecker",void 0),this._actions=p.actions,this.target=f,this._context=p.context||m,this._win=(0,I.getWindow)((0,re.trySelector)(f)?this._context:f),this._doc=this._win.document,this._scopeEvents=b,this.set(p)}var d;return(d=[{key:"_defaults",get:function(){return{base:{},perAction:{},actions:{}}}},{key:"setOnEvents",value:function(f,p){return A.default.func(p.onstart)&&this.on("".concat(f,"start"),p.onstart),A.default.func(p.onmove)&&this.on("".concat(f,"move"),p.onmove),A.default.func(p.onend)&&this.on("".concat(f,"end"),p.onend),A.default.func(p.oninertiastart)&&this.on("".concat(f,"inertiastart"),p.oninertiastart),this}},{key:"updatePerActionListeners",value:function(f,p,m){(A.default.array(p)||A.default.object(p))&&this.off(f,p),(A.default.array(m)||A.default.object(m))&&this.on(f,m)}},{key:"setPerAction",value:function(f,p){var m=this._defaults;for(var b in p){var v=b,D=this.options[f],k=p[v];"listeners"===v&&this.updatePerActionListeners(f,D.listeners,k),A.default.array(k)?D[v]=ut.from(k):A.default.plainObject(k)?(D[v]=(0,ye.default)(D[v]||{},(0,eo.default)(k)),A.default.object(m.perAction[v])&&"enabled"in m.perAction[v]&&(D[v].enabled=!1!==k.enabled)):A.default.bool(k)&&A.default.object(m.perAction[v])?D[v].enabled=k:D[v]=k}}},{key:"getRect",value:function(f){return f=f||(A.default.element(this.target)?this.target:null),A.default.string(this.target)&&(f=f||this._context.querySelector(this.target)),(0,re.getElementRect)(f)}},{key:"rectChecker",value:function(f){var p=this;return A.default.func(f)?(this._rectChecker=f,this.getRect=function(m){var b=(0,ye.default)({},p._rectChecker(m));return"width"in b||(b.width=b.right-b.left,b.height=b.bottom-b.top),b},this):null===f?(delete this.getRect,delete this._rectChecker,this):this.getRect}},{key:"_backCompatOption",value:function(f,p){if((0,re.trySelector)(p)||A.default.object(p)){for(var m in this.options[f]=p,this._actions.map)this.options[m][f]=p;return this}return this.options[f]}},{key:"origin",value:function(f){return this._backCompatOption("origin",f)}},{key:"deltaSource",value:function(f){return"page"===f||"client"===f?(this.options.deltaSource=f,this):this.options.deltaSource}},{key:"context",value:function(){return this._context}},{key:"inContext",value:function(f){return this._context===f.ownerDocument||(0,re.nodeContains)(this._context,f)}},{key:"testIgnoreAllow",value:function(f,p,m){return!this.testIgnore(f.ignoreFrom,p,m)&&this.testAllow(f.allowFrom,p,m)}},{key:"testAllow",value:function(f,p,m){return!f||!!A.default.element(m)&&(A.default.string(f)?(0,re.matchesUpTo)(m,f,p):!!A.default.element(f)&&(0,re.nodeContains)(f,m))}},{key:"testIgnore",value:function(f,p,m){return!(!f||!A.default.element(m))&&(A.default.string(f)?(0,re.matchesUpTo)(m,f,p):!!A.default.element(f)&&(0,re.nodeContains)(f,m))}},{key:"fire",value:function(f){return this.events.fire(f),this}},{key:"_onOff",value:function(f,p,m,b){A.default.object(p)&&!A.default.array(p)&&(b=m,m=null);var v="on"===f?"add":"remove",D=(0,Pt.default)(p,m);for(var k in D){"wheel"===k&&(k=C.default.wheelEvent);for(var L=0;L<D[k].length;L++){var q=D[k][L];(0,At.default)(k,this._actions)?this.events[f](k,q):A.default.string(this.target)?this._scopeEvents["".concat(v,"Delegate")](this.target,this._context,k,q,b):this._scopeEvents[v](this.target,k,q,b)}}return this}},{key:"on",value:function(f,p,m){return this._onOff("on",f,p,m)}},{key:"off",value:function(f,p,m){return this._onOff("off",f,p,m)}},{key:"set",value:function(f){var p=this._defaults;for(var m in A.default.object(f)||(f={}),this.options=(0,eo.default)(p.base),this._actions.methodDict){var b=m,v=this._actions.methodDict[b];this.options[b]={},this.setPerAction(b,(0,ye.default)((0,ye.default)({},p.perAction),p.actions[b])),this[v](f[b])}for(var D in f)A.default.func(this[D])&&this[D](f[D]);return this}},{key:"unset",value:function(){if(A.default.string(this.target))for(var f in this._scopeEvents.delegatedEvents)for(var p=this._scopeEvents.delegatedEvents[f],m=p.length-1;m>=0;m--){var b=p[m],k=b.listeners;b.selector===this.target&&b.context===this._context&&p.splice(m,1);for(var L=k.length-1;L>=0;L--)this._scopeEvents.removeDelegate(this.target,this._context,f,k[L][0],k[L][1])}else this._scopeEvents.remove(this.target,"all")}}])&&function(c,l){for(var d=0;d<l.length;d++){var f=l[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}(c.prototype,d),c}();ti.Interactable=No;var Fo={};function En(c,l,d){return l in c?Object.defineProperty(c,l,{value:d,enumerable:!0,configurable:!0,writable:!0}):c[l]=d,c}Object.defineProperty(Fo,"__esModule",{value:!0}),Fo.InteractableSet=void 0;var ps=function(){function c(f){var p=this;(function(m,b){if(!(m instanceof b))throw new TypeError("Cannot call a class as a function")})(this,c),En(this,"list",[]),En(this,"selectorMap",{}),En(this,"scope",void 0),this.scope=f,f.addListeners({"interactable:unset":function(m){var b=m.interactable,v=b.target,D=b._context,k=A.default.string(v)?p.selectorMap[v]:v[p.scope.id],L=ut.findIndex(k,function(q){return q.context===D});k[L]&&(k[L].context=null,k[L].interactable=null),k.splice(L,1)}})}var d;return(d=[{key:"new",value:function(f,p){p=(0,ye.default)(p||{},{actions:this.scope.actions});var m=new this.scope.Interactable(f,p,this.scope.document,this.scope.events),b={context:m._context,interactable:m};return this.scope.addDocument(m._doc),this.list.push(m),A.default.string(f)?(this.selectorMap[f]||(this.selectorMap[f]=[]),this.selectorMap[f].push(b)):(m.target[this.scope.id]||Object.defineProperty(f,this.scope.id,{value:[],configurable:!0}),f[this.scope.id].push(b)),this.scope.fire("interactable:new",{target:f,options:p,interactable:m,win:this.scope._win}),m}},{key:"get",value:function(f,p){var m=p&&p.context||this.scope.document,b=A.default.string(f),v=b?this.selectorMap[f]:f[this.scope.id];if(!v)return null;var D=ut.find(v,function(k){return k.context===m&&(b||k.interactable.inContext(f))});return D&&D.interactable}},{key:"forEachMatch",value:function(f,p){for(var m=0;m<this.list.length;m++){var b=this.list[m],v=void 0;if((A.default.string(b.target)?A.default.element(f)&&re.matchesSelector(f,b.target):f===b.target)&&b.inContext(f)&&(v=p(b)),void 0!==v)return v}}}])&&function(c,l){for(var d=0;d<l.length;d++){var f=l[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}(c.prototype,d),c}();Fo.InteractableSet=ps;var ni={};function St(c,l,d){return l in c?Object.defineProperty(c,l,{value:d,enumerable:!0,configurable:!0,writable:!0}):c[l]=d,c}function Sc(c,l){return function(d){if(Array.isArray(d))return d}(c)||function(d,f){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(d)){var p=[],m=!0,b=!1,v=void 0;try{for(var D,k=d[Symbol.iterator]();!(m=(D=k.next()).done)&&(p.push(D.value),!f||p.length!==f);m=!0);}catch(L){b=!0,v=L}finally{try{m||null==k.return||k.return()}finally{if(b)throw v}}return p}}(c,l)||function(d,f){if(d){if("string"==typeof d)return uu(d,f);var p=Object.prototype.toString.call(d).slice(8,-1);return"Object"===p&&d.constructor&&(p=d.constructor.name),"Map"===p||"Set"===p?Array.from(d):"Arguments"===p||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p)?uu(d,f):void 0}}(c,l)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uu(c,l){(null==l||l>c.length)&&(l=c.length);for(var d=0,f=Array(l);d<l;d++)f[d]=c[d];return f}Object.defineProperty(ni,"__esModule",{value:!0}),ni.default=void 0;var ea=function(){function c(f){(function(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")})(this,c),St(this,"currentTarget",void 0),St(this,"originalEvent",void 0),St(this,"type",void 0),this.originalEvent=f,(0,or.default)(this,f)}var d;return(d=[{key:"preventOriginalDefault",value:function(){this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.originalEvent.stopPropagation()}},{key:"stopImmediatePropagation",value:function(){this.originalEvent.stopImmediatePropagation()}}])&&function(c,l){for(var d=0;d<l.length;d++){var f=l[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}(c.prototype,d),c}();function oo(c){if(!A.default.object(c))return{capture:!!c,passive:!1};var l=(0,ye.default)({},c);return l.capture=!!c.capture,l.passive=!!c.passive,l}ni.default={id:"events",install:function(c){var l,d=[],f={},p=[],m={add:b,remove:v,addDelegate:function(L,q,se,ue,ie){var Ce=oo(ie);if(!f[se]){f[se]=[];for(var Te=0;Te<p.length;Te++){var Ee=p[Te];b(Ee,se,D),b(Ee,se,k,!0)}}var Re=f[se],Be=ut.find(Re,function(qe){return qe.selector===L&&qe.context===q});Be||Re.push(Be={selector:L,context:q,listeners:[]}),Be.listeners.push([ue,Ce])},removeDelegate:function(L,q,se,ue,ie){var Ce,Te=oo(ie),Ee=f[se],Re=!1;if(Ee)for(Ce=Ee.length-1;Ce>=0;Ce--){var Be=Ee[Ce];if(Be.selector===L&&Be.context===q){for(var qe=Be.listeners,mt=qe.length-1;mt>=0;mt--){var _t=Sc(qe[mt],2),ht=_t[1];if(_t[0]===ue&&ht.capture===Te.capture&&ht.passive===Te.passive){qe.splice(mt,1),qe.length||(Ee.splice(Ce,1),v(q,se,D),v(q,se,k,!0)),Re=!0;break}}if(Re)break}}},delegateListener:D,delegateUseCapture:k,delegatedEvents:f,documents:p,targets:d,supportsOptions:!1,supportsPassive:!1};function b(L,q,se,ue){var ie=oo(ue),Ce=ut.find(d,function(Te){return Te.eventTarget===L});Ce||d.push(Ce={eventTarget:L,events:{}}),Ce.events[q]||(Ce.events[q]=[]),L.addEventListener&&!ut.contains(Ce.events[q],se)&&(L.addEventListener(q,se,m.supportsOptions?ie:ie.capture),Ce.events[q].push(se))}function v(L,q,se,ue){var ie=oo(ue),Ce=ut.findIndex(d,function(mt){return mt.eventTarget===L}),Te=d[Ce];if(Te&&Te.events)if("all"!==q){var Ee=!1,Re=Te.events[q];if(Re){if("all"===se){for(var Be=Re.length-1;Be>=0;Be--)v(L,q,Re[Be],ie);return}for(var qe=0;qe<Re.length;qe++)if(Re[qe]===se){L.removeEventListener(q,se,m.supportsOptions?ie:ie.capture),Re.splice(qe,1),0===Re.length&&(delete Te.events[q],Ee=!0);break}}Ee&&!Object.keys(Te.events).length&&d.splice(Ce,1)}else for(q in Te.events)Te.events.hasOwnProperty(q)&&v(L,q,"all")}function D(L,q){for(var se=oo(q),ue=new ea(L),ie=f[L.type],Ce=Sc(Ie.getEventTargets(L),1)[0],Te=Ce;A.default.element(Te);){for(var Ee=0;Ee<ie.length;Ee++){var Re=ie[Ee],qe=Re.context;if(re.matchesSelector(Te,Re.selector)&&re.nodeContains(qe,Ce)&&re.nodeContains(qe,Te)){var mt=Re.listeners;ue.currentTarget=Te;for(var _t=0;_t<mt.length;_t++){var ct=Sc(mt[_t],2),Bn=ct[1];Bn.capture===se.capture&&Bn.passive===se.passive&&(0,ct[0])(ue)}}}Te=re.parentNode(Te)}}function k(L){return D(L,!0)}return null==(l=c.document)||l.createElement("div").addEventListener("test",null,{get capture(){return m.supportsOptions=!0},get passive(){return m.supportsPassive=!0}}),c.events=m,m}};var so={};Object.defineProperty(so,"__esModule",{value:!0}),so.default=void 0;var Fr={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function(c){for(var l=0;l<Fr.methodOrder.length;l++){var f=Fr[Fr.methodOrder[l]](c);if(f)return f}return null},simulationResume:function(c){var l=c.pointerType,f=c.eventTarget,p=c.scope;if(!/down|start/i.test(c.eventType))return null;for(var m=0;m<p.interactions.list.length;m++){var b=p.interactions.list[m],v=f;if(b.simulation&&b.simulation.allowResume&&b.pointerType===l)for(;v;){if(v===b.element)return b;v=re.parentNode(v)}}return null},mouseOrPen:function(c){var l,d=c.pointerId,f=c.pointerType,p=c.eventType,m=c.scope;if("mouse"!==f&&"pen"!==f)return null;for(var b=0;b<m.interactions.list.length;b++){var v=m.interactions.list[b];if(v.pointerType===f){if(v.simulation&&!hn(v,d))continue;if(v.interacting())return v;l||(l=v)}}if(l)return l;for(var D=0;D<m.interactions.list.length;D++){var k=m.interactions.list[D];if(!(k.pointerType!==f||/down/i.test(p)&&k.simulation))return k}return null},hasPointer:function(c){for(var l=c.pointerId,d=c.scope,f=0;f<d.interactions.list.length;f++){var p=d.interactions.list[f];if(hn(p,l))return p}return null},idle:function(c){for(var l=c.pointerType,d=c.scope,f=0;f<d.interactions.list.length;f++){var p=d.interactions.list[f];if(1===p.pointers.length){var m=p.interactable;if(m&&(!m.options.gesture||!m.options.gesture.enabled))continue}else if(p.pointers.length>=2)continue;if(!p.interacting()&&l===p.pointerType)return p}return null}};function hn(c,l){return c.pointers.some(function(d){return d.id===l})}so.default=Fr;var Xn={};function hr(c){return(hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(l){return typeof l}:function(l){return l&&"function"==typeof Symbol&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(c)}function ta(c,l){return function(d){if(Array.isArray(d))return d}(c)||function(d,f){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(d)){var p=[],m=!0,b=!1,v=void 0;try{for(var D,k=d[Symbol.iterator]();!(m=(D=k.next()).done)&&(p.push(D.value),!f||p.length!==f);m=!0);}catch(L){b=!0,v=L}finally{try{m||null==k.return||k.return()}finally{if(b)throw v}}return p}}(c,l)||function(d,f){if(d){if("string"==typeof d)return ms(d,f);var p=Object.prototype.toString.call(d).slice(8,-1);return"Object"===p&&d.constructor&&(p=d.constructor.name),"Map"===p||"Set"===p?Array.from(d):"Arguments"===p||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p)?ms(d,f):void 0}}(c,l)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ms(c,l){(null==l||l>c.length)&&(l=c.length);for(var d=0,f=Array(l);d<l;d++)f[d]=c[d];return f}function na(c,l){if(!(c instanceof l))throw new TypeError("Cannot call a class as a function")}function du(c,l){return(du=Object.setPrototypeOf||function(d,f){return d.__proto__=f,d})(c,l)}function _y(c,l){return!l||"object"!==hr(l)&&"function"!=typeof l?function(d){if(void 0===d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d}(c):l}function wc(c){return(wc=Object.setPrototypeOf?Object.getPrototypeOf:function(l){return l.__proto__||Object.getPrototypeOf(l)})(c)}Object.defineProperty(Xn,"__esModule",{value:!0}),Xn.default=void 0;var Tc=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer","windowBlur"];function Uf(c,l){return function(d){var f=l.interactions.list,p=Ie.getPointerType(d),m=ta(Ie.getEventTargets(d),2),b=m[0],v=m[1],D=[];if(/^touch/.test(d.type)){l.prevTouchTime=l.now();for(var k=0;k<d.changedTouches.length;k++){var L=d.changedTouches[k],q={pointer:L,pointerId:Ie.getPointerId(L),pointerType:p,eventType:d.type,eventTarget:b,curEventTarget:v,scope:l},se=Hf(q);D.push([q.pointer,q.eventTarget,q.curEventTarget,se])}}else{var ue=!1;if(!C.default.supportsPointerEvent&&/mouse/.test(d.type)){for(var ie=0;ie<f.length&&!ue;ie++)ue="mouse"!==f[ie].pointerType&&f[ie].pointerIsDown;ue=ue||l.now()-l.prevTouchTime<500||0===d.timeStamp}if(!ue){var Ce={pointer:d,pointerId:Ie.getPointerId(d),pointerType:p,eventType:d.type,curEventTarget:v,eventTarget:b,scope:l},Te=Hf(Ce);D.push([Ce.pointer,Ce.eventTarget,Ce.curEventTarget,Te])}}for(var Ee=0;Ee<D.length;Ee++){var Re=ta(D[Ee],4);Re[3][c](Re[0],d,Re[1],Re[2])}}}function Hf(c){var l=c.pointerType,d=c.scope,f={interaction:so.default.search(c),searchDetails:c};return d.fire("interactions:find",f),f.interaction||d.interactions.new({pointerType:l})}function fu(c,l){var d=c.doc,f=c.scope,p=c.options,m=f.interactions.docEvents,b=f.events,v=b[l];for(var D in f.browser.isIOS&&!p.events&&(p.events={passive:!1}),b.delegatedEvents)v(d,D,b.delegateListener),v(d,D,b.delegateUseCapture,!0);for(var k=p&&p.events,L=0;L<m.length;L++){var q=m[L];v(d,q.type,q.listener,k)}}Xn.default={id:"core/interactions",install:function(c){for(var l={},d=0;d<Tc.length;d++){var f=Tc[d];l[f]=Uf(f,c)}var p,m=C.default.pEventTypes;function b(){for(var v=0;v<c.interactions.list.length;v++){var D=c.interactions.list[v];if(D.pointerIsDown&&"touch"===D.pointerType&&!D._interacting)for(var k=function(){var q=D.pointers[L];c.documents.some(function(se){return(0,re.nodeContains)(se.doc,q.downTarget)})||D.removePointer(q.pointer,q.event)},L=0;L<D.pointers.length;L++)k()}}(p=M.default.PointerEvent?[{type:m.down,listener:b},{type:m.down,listener:l.pointerDown},{type:m.move,listener:l.pointerMove},{type:m.up,listener:l.pointerUp},{type:m.cancel,listener:l.pointerUp}]:[{type:"mousedown",listener:l.pointerDown},{type:"mousemove",listener:l.pointerMove},{type:"mouseup",listener:l.pointerUp},{type:"touchstart",listener:b},{type:"touchstart",listener:l.pointerDown},{type:"touchmove",listener:l.pointerMove},{type:"touchend",listener:l.pointerUp},{type:"touchcancel",listener:l.pointerUp}]).push({type:"blur",listener:function(v){for(var D=0;D<c.interactions.list.length;D++)c.interactions.list[D].documentBlur(v)}}),c.prevTouchTime=0,c.Interaction=function(v){!function(ie,Ce){if("function"!=typeof Ce&&null!==Ce)throw new TypeError("Super expression must either be null or a function");ie.prototype=Object.create(Ce&&Ce.prototype,{constructor:{value:ie,writable:!0,configurable:!0}}),Ce&&du(ie,Ce)}(ue,v);var k,L,q,se=(L=ue,q=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ie){return!1}}(),function(){var ie,Ce=wc(L);if(q){var Te=wc(this).constructor;ie=Reflect.construct(Ce,arguments,Te)}else ie=Ce.apply(this,arguments);return _y(this,ie)});function ue(){return na(this,ue),se.apply(this,arguments)}return(k=[{key:"pointerMoveTolerance",get:function(){return c.interactions.pointerMoveTolerance},set:function(ie){c.interactions.pointerMoveTolerance=ie}},{key:"_now",value:function(){return c.now()}}])&&function(c,l){for(var d=0;d<l.length;d++){var f=l[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}(ue.prototype,k),ue}(Ht.default),c.interactions={list:[],new:function(v){v.scopeFire=function(k,L){return c.fire(k,L)};var D=new c.Interaction(v);return c.interactions.list.push(D),D},listeners:l,docEvents:p,pointerMoveTolerance:1},c.usePlugin(Kt.default)},listeners:{"scope:add-document":function(c){return fu(c,"add")},"scope:remove-document":function(c){return fu(c,"remove")},"interactable:unset":function(c,l){for(var d=c.interactable,f=l.interactions.list.length-1;f>=0;f--){var p=l.interactions.list[f];p.interactable===d&&(p.stop(),l.fire("interactions:destroy",{interaction:p}),p.destroy(),l.interactions.list.length>2&&l.interactions.list.splice(f,1))}}},onDocSignal:fu,doOnInteractions:Uf,methodNames:Tc};var ra={};function $f(c){return($f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(l){return typeof l}:function(l){return l&&"function"==typeof Symbol&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(c)}function hu(c,l,d){return(hu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(f,p,m){var b=function(D,k){for(;!Object.prototype.hasOwnProperty.call(D,k)&&null!==(D=ys(D)););return D}(f,p);if(b){var v=Object.getOwnPropertyDescriptor(b,p);return v.get?v.get.call(m):v.value}})(c,l,d||c)}function Gf(c,l){return(Gf=Object.setPrototypeOf||function(d,f){return d.__proto__=f,d})(c,l)}function Cy(c,l){return!l||"object"!==$f(l)&&"function"!=typeof l?function(d){if(void 0===d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d}(c):l}function ys(c){return(ys=Object.setPrototypeOf?Object.getPrototypeOf:function(l){return l.__proto__||Object.getPrototypeOf(l)})(c)}function zf(c,l){if(!(c instanceof l))throw new TypeError("Cannot call a class as a function")}function Wf(c,l){for(var d=0;d<l.length;d++){var f=l[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}function qf(c,l,d){return l&&Wf(c.prototype,l),d&&Wf(c,d),c}function Dn(c,l,d){return l in c?Object.defineProperty(c,l,{value:d,enumerable:!0,configurable:!0,writable:!0}):c[l]=d,c}Object.defineProperty(ra,"__esModule",{value:!0}),ra.initScope=ia,ra.Scope=void 0;var pu=function(){function c(){var l=this;zf(this,c),Dn(this,"id","__interact_scope_".concat(Math.floor(100*Math.random()))),Dn(this,"isInitialized",!1),Dn(this,"listenerMaps",[]),Dn(this,"browser",C.default),Dn(this,"defaults",(0,eo.default)(ls.defaults)),Dn(this,"Eventable",Dt.Eventable),Dn(this,"actions",{map:{},phases:{start:!0,move:!0,end:!0},methodDict:{},phaselessTypes:{}}),Dn(this,"interactStatic",(0,io.createInteractStatic)(this)),Dn(this,"InteractEvent",us.InteractEvent),Dn(this,"Interactable",void 0),Dn(this,"interactables",new Fo.InteractableSet(this)),Dn(this,"_win",void 0),Dn(this,"document",void 0),Dn(this,"window",void 0),Dn(this,"documents",[]),Dn(this,"_plugins",{list:[],map:{}}),Dn(this,"onWindowUnload",function(f){return l.removeDocument(f.target)});var d=this;this.Interactable=function(f){!function(D,k){if("function"!=typeof k&&null!==k)throw new TypeError("Super expression must either be null or a function");D.prototype=Object.create(k&&k.prototype,{constructor:{value:D,writable:!0,configurable:!0}}),k&&Gf(D,k)}(v,f);var p,m,b=(p=v,m=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(D){return!1}}(),function(){var D,k=ys(p);if(m){var L=ys(this).constructor;D=Reflect.construct(k,arguments,L)}else D=k.apply(this,arguments);return Cy(this,D)});function v(){return zf(this,v),b.apply(this,arguments)}return qf(v,[{key:"_defaults",get:function(){return d.defaults}},{key:"set",value:function(D){return hu(ys(v.prototype),"set",this).call(this,D),d.fire("interactable:set",{options:D,interactable:this}),this}},{key:"unset",value:function(){hu(ys(v.prototype),"unset",this).call(this),d.interactables.list.splice(d.interactables.list.indexOf(this),1),d.fire("interactable:unset",{interactable:this})}}]),v}(ti.Interactable)}return qf(c,[{key:"addListeners",value:function(l,d){this.listenerMaps.push({id:d,map:l})}},{key:"fire",value:function(l,d){for(var f=0;f<this.listenerMaps.length;f++){var p=this.listenerMaps[f].map[l];if(p&&!1===p(d,this,l))return!1}}},{key:"init",value:function(l){return this.isInitialized?this:ia(this,l)}},{key:"pluginIsInstalled",value:function(l){return this._plugins.map[l.id]||-1!==this._plugins.list.indexOf(l)}},{key:"usePlugin",value:function(l,d){if(!this.isInitialized)return this;if(this.pluginIsInstalled(l))return this;if(l.id&&(this._plugins.map[l.id]=l),this._plugins.list.push(l),l.install&&l.install(this,d),l.listeners&&l.before){for(var f=0,p=this.listenerMaps.length,m=l.before.reduce(function(v,D){return v[D]=!0,v[Qf(D)]=!0,v},{});f<p;f++){var b=this.listenerMaps[f].id;if(m[b]||m[Qf(b)])break}this.listenerMaps.splice(f,0,{id:l.id,map:l.listeners})}else l.listeners&&this.listenerMaps.push({id:l.id,map:l.listeners});return this}},{key:"addDocument",value:function(l,d){if(-1!==this.getDocIndex(l))return!1;var f=I.getWindow(l);d=d?(0,ye.default)({},d):{},this.documents.push({doc:l,options:d}),this.events.documents.push(l),l!==this.document&&this.events.add(f,"unload",this.onWindowUnload),this.fire("scope:add-document",{doc:l,window:f,scope:this,options:d})}},{key:"removeDocument",value:function(l){var d=this.getDocIndex(l),f=I.getWindow(l),p=this.documents[d].options;this.events.remove(f,"unload",this.onWindowUnload),this.documents.splice(d,1),this.events.documents.splice(d,1),this.fire("scope:remove-document",{doc:l,window:f,scope:this,options:p})}},{key:"getDocIndex",value:function(l){for(var d=0;d<this.documents.length;d++)if(this.documents[d].doc===l)return d;return-1}},{key:"getDocOptions",value:function(l){var d=this.getDocIndex(l);return-1===d?null:this.documents[d].options}},{key:"now",value:function(){return(this.window.Date||Date).now()}}]),c}();function ia(c,l){return c.isInitialized=!0,A.default.window(l)&&I.init(l),M.default.init(l),C.default.init(l),de.default.init(l),c.window=l,c.document=l.document,c.usePlugin(Xn.default),c.usePlugin(ni.default),c}function Qf(c){return c&&c.replace(/\/.*$/,"")}ra.Scope=pu;var Mn={};Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.default=void 0;var Yf=new ra.Scope;Mn.default=Yf.interactStatic;var gu="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0;Yf.init(gu);var nn={};Object.defineProperty(nn,"__esModule",{value:!0}),nn.default=void 0,nn.default=function(){};var vs={};Object.defineProperty(vs,"__esModule",{value:!0}),vs.default=void 0,vs.default=function(){};var oa={};function mu(c,l){return function(d){if(Array.isArray(d))return d}(c)||function(d,f){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(d)){var p=[],m=!0,b=!1,v=void 0;try{for(var D,k=d[Symbol.iterator]();!(m=(D=k.next()).done)&&(p.push(D.value),!f||p.length!==f);m=!0);}catch(L){b=!0,v=L}finally{try{m||null==k.return||k.return()}finally{if(b)throw v}}return p}}(c,l)||function(d,f){if(d){if("string"==typeof d)return xc(d,f);var p=Object.prototype.toString.call(d).slice(8,-1);return"Object"===p&&d.constructor&&(p=d.constructor.name),"Map"===p||"Set"===p?Array.from(d):"Arguments"===p||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p)?xc(d,f):void 0}}(c,l)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xc(c,l){(null==l||l>c.length)&&(l=c.length);for(var d=0,f=Array(l);d<l;d++)f[d]=c[d];return f}Object.defineProperty(oa,"__esModule",{value:!0}),oa.default=void 0,oa.default=function(c){var l=[["x","y"],["left","top"],["right","bottom"],["width","height"]].filter(function(f){var p=mu(f,2);return p[0]in c||p[1]in c}),d=function(f,p){for(var b=c.limits,v=void 0===b?{left:-1/0,right:1/0,top:-1/0,bottom:1/0}:b,D=c.offset,k=void 0===D?{x:0,y:0}:D,L={range:c.range,grid:c,x:null,y:null},q=0;q<l.length;q++){var se=mu(l[q],2),ue=se[0],ie=se[1],Ce=Math.round((f-k.x)/c[ue]),Te=Math.round((p-k.y)/c[ie]);L[ue]=Math.max(v.left,Math.min(v.right,Ce*c[ue]+k.x)),L[ie]=Math.max(v.top,Math.min(v.bottom,Te*c[ie]+k.y))}return L};return d.grid=c,d.coordFields=l,d};var Lo={};Object.defineProperty(Lo,"__esModule",{value:!0}),Object.defineProperty(Lo,"edgeTarget",{enumerable:!0,get:function(){return nn.default}}),Object.defineProperty(Lo,"elements",{enumerable:!0,get:function(){return vs.default}}),Object.defineProperty(Lo,"grid",{enumerable:!0,get:function(){return oa.default}});var sa={};Object.defineProperty(sa,"__esModule",{value:!0}),sa.default=void 0,sa.default={id:"snappers",install:function(c){var l=c.interactStatic;l.snappers=(0,ye.default)(l.snappers||{},Lo),l.createSnapGrid=l.snappers.grid}};var jo={};function Zn(c,l){var d=Object.keys(c);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(c);l&&(f=f.filter(function(p){return Object.getOwnPropertyDescriptor(c,p).enumerable})),d.push.apply(d,f)}return d}function aa(c){for(var l=1;l<arguments.length;l++){var d=null!=arguments[l]?arguments[l]:{};l%2?Zn(Object(d),!0).forEach(function(f){yu(c,f,d[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(d)):Zn(Object(d)).forEach(function(f){Object.defineProperty(c,f,Object.getOwnPropertyDescriptor(d,f))})}return c}function yu(c,l,d){return l in c?Object.defineProperty(c,l,{value:d,enumerable:!0,configurable:!0,writable:!0}):c[l]=d,c}Object.defineProperty(jo,"__esModule",{value:!0}),jo.aspectRatio=jo.default=void 0;var ca={start:function(c){var l=c.state,d=c.rect,f=c.edges,m=l.options.ratio,b=l.options,v=b.equalDelta,D=b.modifiers;"preserve"===m&&(m=d.width/d.height),l.startCoords=(0,ye.default)({},c.pageCoords),l.startRect=(0,ye.default)({},d),l.ratio=m,l.equalDelta=v;var k=l.linkedEdges={top:f.top||f.left&&!f.bottom,left:f.left||f.top&&!f.right,bottom:f.bottom||f.right&&!f.top,right:f.right||f.bottom&&!f.left};if(l.xIsPrimaryAxis=!(!f.left&&!f.right),l.edgeSign=l.equalDelta?(k.left?1:-1)*(k.top?1:-1):(l.xIsPrimaryAxis?k.top:k.left)?-1:1,(0,ye.default)(c.edges,k),D&&D.length){var q=new Ne.default(c.interaction);q.copyFrom(c.interaction.modification),q.prepareStates(D),l.subModification=q,q.startAll(aa({},c))}},set:function(c){var l=c.state,d=c.rect,f=c.coords,p=(0,ye.default)({},f),m=l.equalDelta?Kf:Pc;if(m(l,l.xIsPrimaryAxis,f,d),!l.subModification)return null;var b=(0,ye.default)({},d);(0,ke.addEdges)(l.linkedEdges,b,{x:f.x-p.x,y:f.y-p.y});var v=l.subModification.setAll(aa(aa({},c),{},{rect:b,edges:l.linkedEdges,pageCoords:f,prevCoords:f,prevRect:b})),D=v.delta;return v.changed&&(m(l,Math.abs(D.x)>Math.abs(D.y),v.coords,v.rect),(0,ye.default)(f,v.coords)),v.eventProps},defaults:{ratio:"preserve",equalDelta:!1,modifiers:[],enabled:!1}};function Kf(c,l,d){var f=c.startCoords,p=c.edgeSign;l?d.y=f.y+(d.x-f.x)*p:d.x=f.x+(d.y-f.y)*p}function Pc(c,l,d,f){var p=c.startRect,m=c.startCoords,b=c.ratio,v=c.edgeSign;l?d.y=m.y+(f.width/b-p.height)*v:d.x=m.x+(f.height*b-p.width)*v}jo.aspectRatio=ca;var Ey=(0,Cn.makeModifier)(ca,"aspectRatio");jo.default=Ey;var wt={};Object.defineProperty(wt,"__esModule",{value:!0}),wt.default=void 0;var Jf=function(){};Jf._defaults={},wt.default=Jf;var Mc={};Object.defineProperty(Mc,"__esModule",{value:!0}),Object.defineProperty(Mc,"default",{enumerable:!0,get:function(){return wt.default}});var dt={};function Ac(c,l,d){return A.default.func(c)?ke.resolveRectLike(c,l.interactable,l.element,[d.x,d.y,l]):ke.resolveRectLike(c,l.interactable,l.element)}Object.defineProperty(dt,"__esModule",{value:!0}),dt.getRestrictionRect=Ac,dt.restrict=dt.default=void 0;var Xf={start:function(c){var l=c.rect,d=c.startOffset,f=c.state,p=c.interaction,m=c.pageCoords,b=f.options,v=b.elementRect,D=(0,ye.default)({left:0,top:0,right:0,bottom:0},b.offset||{});if(l&&v){var k=Ac(b.restriction,p,m);if(k){var L=k.right-k.left-l.width,q=k.bottom-k.top-l.height;L<0&&(D.left+=L,D.right+=L),q<0&&(D.top+=q,D.bottom+=q)}D.left+=d.left-l.width*v.left,D.top+=d.top-l.height*v.top,D.right+=d.right-l.width*(1-v.right),D.bottom+=d.bottom-l.height*(1-v.bottom)}f.offset=D},set:function(c){var l=c.coords,f=c.state,m=f.offset,b=Ac(f.options.restriction,c.interaction,l);if(b){var v=ke.xywhToTlbr(b);l.x=Math.max(Math.min(v.right-m.right,l.x),v.left+m.left),l.y=Math.max(Math.min(v.bottom-m.bottom,l.y),v.top+m.top)}},defaults:{restriction:null,elementRect:null,offset:null,endOnly:!1,enabled:!1}};dt.restrict=Xf;var la=(0,Cn.makeModifier)(Xf,"restrict");dt.default=la;var zt={};Object.defineProperty(zt,"__esModule",{value:!0}),zt.restrictEdges=zt.default=void 0;var _u={top:1/0,left:1/0,bottom:-1/0,right:-1/0},ua={top:-1/0,left:-1/0,bottom:1/0,right:1/0};function co(c,l){for(var d=["top","left","bottom","right"],f=0;f<d.length;f++){var p=d[f];p in c||(c[p]=l[p])}return c}var Ln={noInner:_u,noOuter:ua,start:function(c){var l,d=c.interaction,f=c.startOffset,p=c.state,m=p.options;if(m){var b=(0,dt.getRestrictionRect)(m.offset,d,d.coords.start.page);l=ke.rectToXY(b)}p.offset={top:(l=l||{x:0,y:0}).y+f.top,left:l.x+f.left,bottom:l.y-f.bottom,right:l.x-f.right}},set:function(c){var l=c.coords,d=c.edges,f=c.interaction,p=c.state,m=p.offset,b=p.options;if(d){var v=(0,ye.default)({},l),D=(0,dt.getRestrictionRect)(b.inner,f,v)||{},k=(0,dt.getRestrictionRect)(b.outer,f,v)||{};co(D,_u),co(k,ua),d.top?l.y=Math.min(Math.max(k.top+m.top,v.y),D.top+m.top):d.bottom&&(l.y=Math.max(Math.min(k.bottom+m.bottom,v.y),D.bottom+m.bottom)),d.left?l.x=Math.min(Math.max(k.left+m.left,v.x),D.left+m.left):d.right&&(l.x=Math.max(Math.min(k.right+m.right,v.x),D.right+m.right))}},defaults:{inner:null,outer:null,offset:null,endOnly:!1,enabled:!1}};zt.restrictEdges=Ln;var bu=(0,Cn.makeModifier)(Ln,"restrictEdges");zt.default=bu;var Oi={};Object.defineProperty(Oi,"__esModule",{value:!0}),Oi.restrictRect=Oi.default=void 0;var Zf=(0,ye.default)({get elementRect(){return{top:0,left:0,bottom:1,right:1}},set elementRect(c){}},dt.restrict.defaults),ri={start:dt.restrict.start,set:dt.restrict.set,defaults:Zf};Oi.restrictRect=ri;var Cu=(0,Cn.makeModifier)(ri,"restrictRect");Oi.default=Cu;var ki={};Object.defineProperty(ki,"__esModule",{value:!0}),ki.restrictSize=ki.default=void 0;var ze={width:-1/0,height:-1/0},Dy={width:1/0,height:1/0},Eu={start:function(c){return zt.restrictEdges.start(c)},set:function(c){var l=c.interaction,d=c.state,f=c.rect,p=c.edges,m=d.options;if(p){var b=ke.tlbrToXywh((0,dt.getRestrictionRect)(m.min,l,c.coords))||ze,v=ke.tlbrToXywh((0,dt.getRestrictionRect)(m.max,l,c.coords))||Dy;d.options={endOnly:m.endOnly,inner:(0,ye.default)({},zt.restrictEdges.noInner),outer:(0,ye.default)({},zt.restrictEdges.noOuter)},p.top?(d.options.inner.top=f.bottom-b.height,d.options.outer.top=f.bottom-v.height):p.bottom&&(d.options.inner.bottom=f.top+b.height,d.options.outer.bottom=f.top+v.height),p.left?(d.options.inner.left=f.right-b.width,d.options.outer.left=f.right-v.width):p.right&&(d.options.inner.right=f.left+b.width,d.options.outer.right=f.left+v.width),zt.restrictEdges.set(c),d.options=m}},defaults:{min:null,max:null,endOnly:!1,enabled:!1}};ki.restrictSize=Eu;var eh=(0,Cn.makeModifier)(Eu,"restrictSize");ki.default=eh;var Rc={};Object.defineProperty(Rc,"__esModule",{value:!0}),Object.defineProperty(Rc,"default",{enumerable:!0,get:function(){return wt.default}});var ii={};Object.defineProperty(ii,"__esModule",{value:!0}),ii.snap=ii.default=void 0;var Du={start:function(c){var l,se,ue,d=c.interaction,f=c.interactable,p=c.element,m=c.rect,b=c.state,v=c.startOffset,D=b.options,k=D.offsetWithOrigin?(0,ke.rectToXY)((0,ke.resolveRectLike)((se=c).state.options.origin,null,null,[ue=se.interaction.element]))||(0,It.default)(se.interactable,ue,se.interaction.prepared.name):{x:0,y:0};if("startCoords"===D.offset)l={x:d.coords.start.page.x,y:d.coords.start.page.y};else{var L=(0,ke.resolveRectLike)(D.offset,f,p,[d]);(l=(0,ke.rectToXY)(L)||{x:0,y:0}).x+=k.x,l.y+=k.y}var q=D.relativePoints;b.offsets=m&&q&&q.length?q.map(function(se,ue){return{index:ue,relativePoint:se,x:v.left-m.width*se.x+l.x,y:v.top-m.height*se.y+l.y}}):[{index:0,relativePoint:null,x:l.x,y:l.y}]},set:function(c){var l=c.interaction,d=c.coords,f=c.state,p=f.options,m=f.offsets,b=(0,It.default)(l.interactable,l.element,l.prepared.name),v=(0,ye.default)({},d),D=[];p.offsetWithOrigin||(v.x-=b.x,v.y-=b.y);for(var k=0;k<m.length;k++)for(var L=m[k],q=v.x-L.x,se=v.y-L.y,ue=0,ie=p.targets.length;ue<ie;ue++){var Ce,Te=p.targets[ue];(Ce=A.default.func(Te)?Te(q,se,l._proxy,L,ue):Te)&&D.push({x:(A.default.number(Ce.x)?Ce.x:q)+L.x,y:(A.default.number(Ce.y)?Ce.y:se)+L.y,range:A.default.number(Ce.range)?Ce.range:p.range,source:Te,index:ue,offset:L})}for(var Ee={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}},Re=0;Re<D.length;Re++){var Be=D[Re],qe=Be.range,mt=Be.x-v.x,_t=Be.y-v.y,ct=(0,He.default)(mt,_t),ht=ct<=qe;qe===1/0&&Ee.inRange&&Ee.range!==1/0&&(ht=!1),Ee.target&&!(ht?Ee.inRange&&qe!==1/0?ct/qe<Ee.distance/Ee.range:qe===1/0&&Ee.range!==1/0||ct<Ee.distance:!Ee.inRange&&ct<Ee.distance)||(Ee.target=Be,Ee.distance=ct,Ee.range=qe,Ee.inRange=ht,Ee.delta.x=mt,Ee.delta.y=_t)}return Ee.inRange&&(d.x=Ee.target.x,d.y=Ee.target.y),f.closest=Ee,Ee},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!0,origin:null,relativePoints:null,endOnly:!1,enabled:!1}};ii.snap=Du;var th=(0,Cn.makeModifier)(Du,"snap");ii.default=th;var me={};function at(c,l){(null==l||l>c.length)&&(l=c.length);for(var d=0,f=Array(l);d<l;d++)f[d]=c[d];return f}Object.defineProperty(me,"__esModule",{value:!0}),me.snapSize=me.default=void 0;var Ni={start:function(c){var l=c.state,d=c.edges,f=l.options;if(!d)return null;c.state={options:{targets:null,relativePoints:[{x:d.left?0:1,y:d.top?0:1}],offset:f.offset||"self",origin:{x:0,y:0},range:f.range}},l.targetFields=l.targetFields||[["width","height"],["x","y"]],ii.snap.start(c),l.offsets=c.state.offsets,c.state=l},set:function(c){var l,f=c.interaction,p=c.state,m=c.coords,b=p.options,v=p.offsets,D={x:m.x-v[0].x,y:m.y-v[0].y};p.options=(0,ye.default)({},b),p.options.targets=[];for(var k=0;k<(b.targets||[]).length;k++){var L=(b.targets||[])[k],q=void 0;if(q=A.default.func(L)?L(D.x,D.y,f):L){for(var se=0;se<p.targetFields.length;se++){var ue=(2,function(Ee){if(Array.isArray(Ee))return Ee}(l=p.targetFields[se])||function(Ee,Re){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(Ee)){var Be=[],qe=!0,mt=!1,_t=void 0;try{for(var ct,ht=Ee[Symbol.iterator]();!(qe=(ct=ht.next()).done)&&(Be.push(ct.value),2!==Be.length);qe=!0);}catch(Bn){mt=!0,_t=Bn}finally{try{qe||null==ht.return||ht.return()}finally{if(mt)throw _t}}return Be}}(l)||function(Ee,Re){if(Ee){if("string"==typeof Ee)return at(Ee,2);var Be=Object.prototype.toString.call(Ee).slice(8,-1);return"Object"===Be&&Ee.constructor&&(Be=Ee.constructor.name),"Map"===Be||"Set"===Be?Array.from(Ee):"Arguments"===Be||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Be)?at(Ee,2):void 0}}(l)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),ie=ue[0],Ce=ue[1];if(ie in q||Ce in q){q.x=q[ie],q.y=q[Ce];break}}p.options.targets.push(q)}}var Te=ii.snap.set(c);return p.options=b,Te},defaults:{range:1/0,targets:null,offset:null,endOnly:!1,enabled:!1}};me.snapSize=Ni;var rn=(0,Cn.makeModifier)(Ni,"snapSize");me.default=rn;var lo={};Object.defineProperty(lo,"__esModule",{value:!0}),lo.snapEdges=lo.default=void 0;var Bo={start:function(c){var l=c.edges;return l?(c.state.targetFields=c.state.targetFields||[[l.left?"left":"right",l.top?"top":"bottom"]],me.snapSize.start(c)):null},set:me.snapSize.set,defaults:(0,ye.default)((0,eo.default)(me.snapSize.defaults),{targets:null,range:null,offset:{x:0,y:0}})};lo.snapEdges=Bo;var Vr=(0,Cn.makeModifier)(Bo,"snapEdges");lo.default=Vr;var _s={};Object.defineProperty(_s,"__esModule",{value:!0}),Object.defineProperty(_s,"default",{enumerable:!0,get:function(){return wt.default}});var bs={};Object.defineProperty(bs,"__esModule",{value:!0}),Object.defineProperty(bs,"default",{enumerable:!0,get:function(){return wt.default}});var Cs={};Object.defineProperty(Cs,"__esModule",{value:!0}),Cs.default=void 0,Cs.default={aspectRatio:jo.default,restrictEdges:zt.default,restrict:dt.default,restrictRect:Oi.default,restrictSize:ki.default,snapEdges:lo.default,snap:ii.default,snapSize:me.default,spring:_s.default,avoid:Mc.default,transform:bs.default,rubberband:Rc.default};var uo={};Object.defineProperty(uo,"__esModule",{value:!0}),uo.default=void 0,uo.default={id:"modifiers",install:function(c){var l=c.interactStatic;for(var d in c.usePlugin(Cn.default),c.usePlugin(sa.default),l.modifiers=Cs.default,Cs.default){var f=Cs.default[d],p=f._defaults;p._methods=f._methods,c.defaults.perAction[d]=p}}};var Wt={};function Dr(c){return(Dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(l){return typeof l}:function(l){return l&&"function"==typeof Symbol&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(c)}function fo(c,l){return(fo=Object.setPrototypeOf||function(d,f){return d.__proto__=f,d})(c,l)}function oi(c,l){return!l||"object"!==Dr(l)&&"function"!=typeof l?jn(c):l}function jn(c){if(void 0===c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function fa(c){return(fa=Object.setPrototypeOf?Object.getPrototypeOf:function(l){return l.__proto__||Object.getPrototypeOf(l)})(c)}function Sr(c,l,d){return l in c?Object.defineProperty(c,l,{value:d,enumerable:!0,configurable:!0,writable:!0}):c[l]=d,c}Object.defineProperty(Wt,"__esModule",{value:!0}),Wt.PointerEvent=Wt.default=void 0;var rh=function(c){!function(v,D){if("function"!=typeof D&&null!==D)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(D&&D.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),D&&fo(v,D)}(b,c);var d,f,p,m=(f=b,p=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(v){return!1}}(),function(){var v,D=fa(f);if(p){var k=fa(this).constructor;v=Reflect.construct(D,arguments,k)}else v=D.apply(this,arguments);return oi(this,v)});function b(v,D,k,L,q,se){var ue;if(function(Te,Ee){if(!(Te instanceof Ee))throw new TypeError("Cannot call a class as a function")}(this,b),Sr(jn(ue=m.call(this,q)),"type",void 0),Sr(jn(ue),"originalEvent",void 0),Sr(jn(ue),"pointerId",void 0),Sr(jn(ue),"pointerType",void 0),Sr(jn(ue),"double",void 0),Sr(jn(ue),"pageX",void 0),Sr(jn(ue),"pageY",void 0),Sr(jn(ue),"clientX",void 0),Sr(jn(ue),"clientY",void 0),Sr(jn(ue),"dt",void 0),Sr(jn(ue),"eventable",void 0),Ie.pointerExtend(jn(ue),k),k!==D&&Ie.pointerExtend(jn(ue),D),ue.timeStamp=se,ue.originalEvent=k,ue.type=v,ue.pointerId=Ie.getPointerId(D),ue.pointerType=Ie.getPointerType(D),ue.target=L,ue.currentTarget=null,"tap"===v){var ie=q.getPointerIndex(D);ue.dt=ue.timeStamp-q.pointers[ie].downTime,ue.double=!!(q.prevTap&&"doubletap"!==q.prevTap.type&&q.prevTap.target===ue.target&&ue.timeStamp-q.tapTime<500)}else"doubletap"===v&&(ue.dt=D.timeStamp-q.tapTime);return ue}return(d=[{key:"_subtractOrigin",value:function(v){var D=v.x,k=v.y;return this.pageX-=D,this.pageY-=k,this.clientX-=D,this.clientY-=k,this}},{key:"_addOrigin",value:function(v){var D=v.x,k=v.y;return this.pageX+=D,this.pageY+=k,this.clientX+=D,this.clientY+=k,this}},{key:"preventDefault",value:function(){this.originalEvent.preventDefault()}}])&&function(c,l){for(var d=0;d<l.length;d++){var f=l[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}(b.prototype,d),b}(Pn.BaseEvent);Wt.PointerEvent=Wt.default=rh;var ho={};Object.defineProperty(ho,"__esModule",{value:!0}),ho.default=void 0;var Uo={id:"pointer-events/base",before:["inertia","modifiers","auto-start","actions"],install:function(c){c.pointerEvents=Uo,c.defaults.actions.pointerEvents=Uo.defaults,(0,ye.default)(c.actions.phaselessTypes,Uo.types)},listeners:{"interactions:new":function(c){var l=c.interaction;l.prevTap=null,l.tapTime=0},"interactions:update-pointer":function(c){var d=c.pointerInfo;!c.down&&d.hold||(d.hold={duration:1/0,timeout:null})},"interactions:move":function(c,l){var d=c.interaction,f=c.pointer,p=c.event,m=c.eventTarget;c.duplicate||d.pointerIsDown&&!d.pointerWasMoved||(d.pointerIsDown&&Oc(c),si({interaction:d,pointer:f,event:p,eventTarget:m,type:"move"},l))},"interactions:down":function(c,l){(function(d,f){for(var p=d.interaction,m=d.pointer,b=d.event,v=d.eventTarget,k=p.pointers[d.pointerIndex].hold,L=re.getPath(v),q={interaction:p,pointer:m,event:b,eventTarget:v,type:"hold",targets:[],path:L,node:null},se=0;se<L.length;se++)q.node=L[se],f.fire("pointerEvents:collect-targets",q);if(q.targets.length){for(var ie=1/0,Ce=0;Ce<q.targets.length;Ce++){var Te=q.targets[Ce].eventable.options.holdDuration;Te<ie&&(ie=Te)}k.duration=ie,k.timeout=setTimeout(function(){si({interaction:p,eventTarget:v,pointer:m,event:b,type:"hold"},f)},ie)}})(c,l),si(c,l)},"interactions:up":function(c,l){var d,p;Oc(c),si(c,l),(p=(d=c).interaction).pointerWasMoved||si({interaction:p,eventTarget:d.eventTarget,pointer:d.pointer,event:d.event,type:"tap"},l)},"interactions:cancel":function(c,l){Oc(c),si(c,l)}},PointerEvent:Wt.PointerEvent,fire:si,collectEventTargets:ha,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:{down:!0,move:!0,up:!0,cancel:!0,tap:!0,doubletap:!0,hold:!0}};function si(c,l){var d=c.interaction,f=c.pointer,p=c.event,m=c.eventTarget,b=c.type,v=c.targets,D=void 0===v?ha(c,l):v,k=new Wt.PointerEvent(b,f,p,m,d,l.now());l.fire("pointerEvents:new",{pointerEvent:k});for(var L={interaction:d,pointer:f,event:p,eventTarget:m,targets:D,type:b,pointerEvent:k},q=0;q<D.length;q++){var se=D[q];for(var ue in se.props||{})k[ue]=se.props[ue];var ie=(0,It.default)(se.eventable,se.node);if(k._subtractOrigin(ie),k.eventable=se.eventable,k.currentTarget=se.node,se.eventable.fire(k),k._addOrigin(ie),k.immediatePropagationStopped||k.propagationStopped&&q+1<D.length&&D[q+1].node!==k.currentTarget)break}if(l.fire("pointerEvents:fired",L),"tap"===b){var Ce=k.double?si({interaction:d,pointer:f,event:p,eventTarget:m,type:"doubletap"},l):k;d.prevTap=Ce,d.tapTime=Ce.timeStamp}return k}function ha(c,l){var d=c.interaction,f=c.pointer,p=c.event,m=c.eventTarget,b=c.type,v=d.getPointerIndex(f),D=d.pointers[v];if("tap"===b&&(d.pointerWasMoved||!D||D.downTarget!==m))return[];for(var k=re.getPath(m),L={interaction:d,pointer:f,event:p,eventTarget:m,type:b,path:k,targets:[],node:null},q=0;q<k.length;q++)L.node=k[q],l.fire("pointerEvents:collect-targets",L);return"hold"===b&&(L.targets=L.targets.filter(function(ue){var ie;return ue.eventable.options.holdDuration===(null==(ie=d.pointers[v])?void 0:ie.hold.duration)})),L.targets}function Oc(c){var f=c.interaction.pointers[c.pointerIndex].hold;f&&f.timeout&&(clearTimeout(f.timeout),f.timeout=null)}ho.default=Uo;var po={};function Tu(c){var l=c.interaction;l.holdIntervalHandle&&(clearInterval(l.holdIntervalHandle),l.holdIntervalHandle=null)}Object.defineProperty(po,"__esModule",{value:!0}),po.default=void 0;var xu={id:"pointer-events/holdRepeat",install:function(c){c.usePlugin(ho.default);var l=c.pointerEvents;l.defaults.holdRepeatInterval=0,l.types.holdrepeat=c.actions.phaselessTypes.holdrepeat=!0},listeners:["move","up","cancel","endall"].reduce(function(c,l){return c["pointerEvents:".concat(l)]=Tu,c},{"pointerEvents:new":function(c){var l=c.pointerEvent;"hold"===l.type&&(l.count=(l.count||0)+1)},"pointerEvents:fired":function(c,l){var d=c.interaction,f=c.pointerEvent,p=c.eventTarget,m=c.targets;if("hold"===f.type&&m.length){var b=m[0].eventable.options.holdRepeatInterval;b<=0||(d.holdIntervalHandle=setTimeout(function(){l.pointerEvents.fire({interaction:d,eventTarget:p,type:"hold",pointer:f,event:f},l)},b))}}})};po.default=xu;var Es={};function Iu(c){return(0,ye.default)(this.events.options,c),this}Object.defineProperty(Es,"__esModule",{value:!0}),Es.default=void 0,Es.default={id:"pointer-events/interactableTargets",install:function(c){var l=c.Interactable;l.prototype.pointerEvents=Iu;var d=l.prototype._backCompatOption;l.prototype._backCompatOption=function(f,p){var m=d.call(this,f,p);return m===this&&(this.events.options[f]=p),m}},listeners:{"pointerEvents:collect-targets":function(c,l){var d=c.targets,f=c.node,p=c.type,m=c.eventTarget;l.interactables.forEachMatch(f,function(b){var v=b.events;v.types[p]&&v.types[p].length&&b.testIgnoreAllow(v.options,f,m)&&d.push({node:f,eventable:v,props:{interactable:b}})})},"interactable:new":function(c){var l=c.interactable;l.events.getRect=function(d){return l.getRect(d)}},"interactable:set":function(c,l){var d=c.interactable,f=c.options;(0,ye.default)(d.events.options,l.pointerEvents.defaults),(0,ye.default)(d.events.options,f.pointerEvents||{})}}};var ga={};Object.defineProperty(ga,"__esModule",{value:!0}),ga.default=void 0,ga.default={id:"pointer-events",install:function(c){c.usePlugin(ho),c.usePlugin(po.default),c.usePlugin(Es.default)}};var on={};function ai(c){var l=c.Interactable;c.actions.phases.reflow=!0,l.prototype.reflow=function(d){return function(f,p,m){for(var b=A.default.string(f.target)?ut.from(f._context.querySelectorAll(f.target)):[f.target],v=m.window.Promise,D=v?[]:null,k=function(){var q=b[L],se=f.getRect(q);if(!se)return"break";var ue=ut.find(m.interactions.list,function(Re){return Re.interacting()&&Re.interactable===f&&Re.element===q&&Re.prepared.name===p.name}),ie=void 0;if(ue)ue.move(),D&&(ie=ue._reflowPromise||new v(function(Re){ue._reflowResolve=Re}));else{var Ce=(0,ke.tlbrToXywh)(se),Te={page:{x:Ce.x,y:Ce.y},client:{x:Ce.x,y:Ce.y},timeStamp:m.now()},Ee=Ie.coordsToEvent(Te);ie=function(Re,Be,qe,mt,_t){var ct=Re.interactions.new({pointerType:"reflow"}),ht={interaction:ct,event:_t,pointer:_t,eventTarget:qe,phase:"reflow"};ct.interactable=Be,ct.element=qe,ct.prevEvent=_t,ct.updatePointer(_t,_t,qe,!0),Ie.setZeroCoords(ct.coords.delta),(0,dr.copyAction)(ct.prepared,mt),ct._doPhase(ht);var Bn=Re.window.Promise,gr=Bn?new Bn(function(Au){ct._reflowResolve=Au}):void 0;return ct._reflowPromise=gr,ct.start(mt,Be,qe),ct._interacting?(ct.move(ht),ct.end(_t)):(ct.stop(),ct._reflowResolve()),ct.removePointer(_t,_t),gr}(m,f,q,p,Ee)}D&&D.push(ie)},L=0;L<b.length&&"break"!==k();L++);return D&&v.all(D).then(function(){return f})}(this,d,c)}}Object.defineProperty(on,"__esModule",{value:!0}),on.install=ai,on.default=void 0,on.default={id:"reflow",install:ai,listeners:{"interactions:stop":function(c,l){var d=c.interaction;"reflow"===d.pointerType&&(d._reflowResolve&&d._reflowResolve(),ut.remove(l.interactions.list,d))}}};var pr={exports:{}};function Pu(c){return(Pu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(l){return typeof l}:function(l){return l&&"function"==typeof Symbol&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(c)}if(Object.defineProperty(pr.exports,"__esModule",{value:!0}),pr.exports.default=void 0,Mn.default.use(Kt.default),Mn.default.use(Ai.default),Mn.default.use(ga.default),Mn.default.use(Jt.default),Mn.default.use(uo.default),Mn.default.use(Oe.default),Mn.default.use(ge.default),Mn.default.use(kr.default),Mn.default.use(on.default),pr.exports.default=Mn.default,"object"===Pu(pr)&&pr)try{pr.exports=Mn.default}catch(c){}Mn.default.default=Mn.default,pr=pr.exports;var go={exports:{}};function Mu(c){return(Mu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(l){return typeof l}:function(l){return l&&"function"==typeof Symbol&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(c)}if(Object.defineProperty(go.exports,"__esModule",{value:!0}),go.exports.default=void 0,go.exports.default=pr.default,"object"===Mu(go)&&go)try{go.exports=pr.default}catch(c){}return pr.default.default=pr.default,go.exports}()},686:function(Ke,j,I){var R,U;void 0!==(U="function"==typeof(R=function(te){"use strict";var W,V,X={template:"[%t] %l:",levelFormatter:function(O){return O.toUpperCase()},nameFormatter:function(O){return O||"root"},timestampFormatter:function(O){return O.toTimeString().replace(/.*(\d{2}:\d{2}:\d{2}).*/,"$1")},format:void 0},B={},x={reg:function(O){if(!O||!O.getLogger)throw new TypeError("Argument is not a root logger");W=O},apply:function(O,J){if(!O||!O.setLevel)throw new TypeError("Argument is not a logger");var M=O.methodFactory,$=O.name||"",H=B[$]||B[""]||X;return B[$]||(O.methodFactory=function(C,G,Y){var re=M(C,G,Y),ve=B[Y]||B[""],Se=-1!==ve.template.indexOf("%t"),Ue=-1!==ve.template.indexOf("%l"),Ze=-1!==ve.template.indexOf("%n");return function(){for(var be="",Ae=arguments.length,ye=Array(Ae),ke=0;ke<Ae;ke++)ye[ke]=arguments[ke];if($||!B[Y]){var st=ve.timestampFormatter(new Date),je=ve.levelFormatter(C),It=ve.nameFormatter(Y);ve.format?be+=ve.format(je,It,st):(be+=ve.template,Se&&(be=be.replace(/%t/,st)),Ue&&(be=be.replace(/%l/,je)),Ze&&(be=be.replace(/%n/,It))),ye.length&&"string"==typeof ye[0]?ye[0]=be+" "+ye[0]:ye.unshift(be)}re.apply(void 0,ye)}}),(J=J||{}).template&&(J.format=void 0),B[$]=function(O){for(var $,J=1,M=arguments.length;J<M;J++)for($ in arguments[J])Object.prototype.hasOwnProperty.call(arguments[J],$)&&(O[$]=arguments[J][$]);return O}({},H,J),O.setLevel(O.getLevel()),W||O.warn("It is necessary to call the function reg() of loglevel-plugin-prefix before calling apply. From the next release, it will throw an error. See more: https://github.com/kutuluk/loglevel-plugin-prefix/blob/master/README.md"),O}};return te&&(V=te.prefix,x.noConflict=function(){return te.prefix===x&&(te.prefix=V),x}),x})?R.call(j,I,j,Ke):R)&&(Ke.exports=U)},330:function(Ke,j,I){var R,U;!function(te,A){"use strict";void 0!==(U="function"==typeof(R=function(){var te=function(){},A="undefined",X=typeof window!==A&&typeof window.navigator!==A&&/Trident\/|MSIE /.test(window.navigator.userAgent),W=["trace","debug","info","warn","error"];function B(E,C){var G=E[C];if("function"==typeof G.bind)return G.bind(E);try{return Function.prototype.bind.call(G,E)}catch(Y){return function(){return Function.prototype.apply.apply(G,[E,arguments])}}}function T(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function S(E){return"debug"===E&&(E="log"),typeof console!==A&&("trace"===E&&X?T:void 0!==console[E]?B(console,E):void 0!==console.log?B(console,"log"):te)}function x(E,C){for(var G=0;G<W.length;G++){var Y=W[G];this[Y]=G<E?te:this.methodFactory(Y,E,C)}this.log=this.debug}function V(E,C,G){return function(){typeof console!==A&&(x.call(this,C,G),this[E].apply(this,arguments))}}function O(E,C,G){return S(E)||V.apply(this,arguments)}function J(E,C,G){var re,Y=this,ve="loglevel";function Ue(){var be;if(typeof window!==A&&ve){try{be=window.localStorage[ve]}catch(ke){}if(typeof be===A)try{var Ae=window.document.cookie,ye=Ae.indexOf(encodeURIComponent(ve)+"=");-1!==ye&&(be=/^([^;]+)/.exec(Ae.slice(ye))[1])}catch(ke){}return void 0===Y.levels[be]&&(be=void 0),be}}"string"==typeof E?ve+=":"+E:"symbol"==typeof E&&(ve=void 0),Y.name=E,Y.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},Y.methodFactory=G||O,Y.getLevel=function(){return re},Y.setLevel=function(be,Ae){if("string"==typeof be&&void 0!==Y.levels[be.toUpperCase()]&&(be=Y.levels[be.toUpperCase()]),!("number"==typeof be&&be>=0&&be<=Y.levels.SILENT))throw"log.setLevel() called with invalid level: "+be;if(re=be,!1!==Ae&&function(be){var Ae=(W[be]||"silent").toUpperCase();if(typeof window!==A&&ve){try{return void(window.localStorage[ve]=Ae)}catch(ye){}try{window.document.cookie=encodeURIComponent(ve)+"="+Ae+";"}catch(ye){}}}(be),x.call(Y,be,E),typeof console===A&&be<Y.levels.SILENT)return"No console available for logging"},Y.setDefaultLevel=function(be){Ue()||Y.setLevel(be,!1)},Y.enableAll=function(be){Y.setLevel(Y.levels.TRACE,be)},Y.disableAll=function(be){Y.setLevel(Y.levels.SILENT,be)};var Ze=Ue();null==Ze&&(Ze=null==C?"WARN":C),Y.setLevel(Ze,!1)}var M=new J,$={};M.getLogger=function(C){if("symbol"!=typeof C&&"string"!=typeof C||""===C)throw new TypeError("You must supply a name when creating a logger.");var G=$[C];return G||(G=$[C]=new J(C,M.getLevel(),M.methodFactory)),G};var H=typeof window!==A?window.log:void 0;return M.noConflict=function(){return typeof window!==A&&window.log===M&&(window.log=H),M},M.getLoggers=function(){return $},M.default=M,M})?R.call(j,I,j,Ke):R)&&(Ke.exports=U)}()},715:(Ke,j,I)=>{var R=I(370).MY,U=I(370).cx;function A(T){this.index=0,this.dataBuffer=T,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}function X(){this.bufferBuilder=new R}function W(T){var S=T.charCodeAt(0);return S<=2047?"00":S<=65535?"000":S<=2097151?"0000":S<=67108863?"00000":"000000"}Ke.exports={unpack:function(T){return new A(T).unpack()},pack:function(T){var S=new X;return S.pack(T),S.getBuffer()}},A.prototype.unpack=function(){var S,T=this.unpack_uint8();if(T<128)return T;if((224^T)<32)return(224^T)-32;if((S=160^T)<=15)return this.unpack_raw(S);if((S=176^T)<=15)return this.unpack_string(S);if((S=144^T)<=15)return this.unpack_array(S);if((S=128^T)<=15)return this.unpack_map(S);switch(T){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:case 213:case 214:case 215:return;case 216:return S=this.unpack_uint16(),this.unpack_string(S);case 217:return S=this.unpack_uint32(),this.unpack_string(S);case 218:return S=this.unpack_uint16(),this.unpack_raw(S);case 219:return S=this.unpack_uint32(),this.unpack_raw(S);case 220:return S=this.unpack_uint16(),this.unpack_array(S);case 221:return S=this.unpack_uint32(),this.unpack_array(S);case 222:return S=this.unpack_uint16(),this.unpack_map(S);case 223:return S=this.unpack_uint32(),this.unpack_map(S)}},A.prototype.unpack_uint8=function(){var T=255&this.dataView[this.index];return this.index++,T},A.prototype.unpack_uint16=function(){var T=this.read(2),S=256*(255&T[0])+(255&T[1]);return this.index+=2,S},A.prototype.unpack_uint32=function(){var T=this.read(4),S=256*(256*(256*T[0]+T[1])+T[2])+T[3];return this.index+=4,S},A.prototype.unpack_uint64=function(){var T=this.read(8),S=256*(256*(256*(256*(256*(256*(256*T[0]+T[1])+T[2])+T[3])+T[4])+T[5])+T[6])+T[7];return this.index+=8,S},A.prototype.unpack_int8=function(){var T=this.unpack_uint8();return T<128?T:T-256},A.prototype.unpack_int16=function(){var T=this.unpack_uint16();return T<32768?T:T-65536},A.prototype.unpack_int32=function(){var T=this.unpack_uint32();return T<Math.pow(2,31)?T:T-Math.pow(2,32)},A.prototype.unpack_int64=function(){var T=this.unpack_uint64();return T<Math.pow(2,63)?T:T-Math.pow(2,64)},A.prototype.unpack_raw=function(T){if(this.length<this.index+T)throw new Error("BinaryPackFailure: index is out of range "+this.index+" "+T+" "+this.length);var S=this.dataBuffer.slice(this.index,this.index+T);return this.index+=T,S},A.prototype.unpack_string=function(T){for(var O,J,S=this.read(T),x=0,V="";x<T;)(O=S[x])<128?(V+=String.fromCharCode(O),x++):(192^O)<32?(J=(192^O)<<6|63&S[x+1],V+=String.fromCharCode(J),x+=2):(J=(15&O)<<12|(63&S[x+1])<<6|63&S[x+2],V+=String.fromCharCode(J),x+=3);return this.index+=T,V},A.prototype.unpack_array=function(T){for(var S=new Array(T),x=0;x<T;x++)S[x]=this.unpack();return S},A.prototype.unpack_map=function(T){for(var S={},x=0;x<T;x++){var V=this.unpack(),O=this.unpack();S[V]=O}return S},A.prototype.unpack_float=function(){var T=this.unpack_uint32();return(0==T>>31?1:-1)*(8388607&T|8388608)*Math.pow(2,(T>>23&255)-127-23)},A.prototype.unpack_double=function(){var T=this.unpack_uint32(),S=this.unpack_uint32(),V=(T>>20&2047)-1023;return(0==T>>31?1:-1)*((1048575&T|1048576)*Math.pow(2,V-20)+S*Math.pow(2,V-52))},A.prototype.read=function(T){var S=this.index;if(S+T<=this.length)return this.dataView.subarray(S,S+T);throw new Error("BinaryPackFailure: read index out of range")},X.prototype.getBuffer=function(){return this.bufferBuilder.getBuffer()},X.prototype.pack=function(T){var S=typeof T;if("string"===S)this.pack_string(T);else if("number"===S)Math.floor(T)===T?this.pack_integer(T):this.pack_double(T);else if("boolean"===S)!0===T?this.bufferBuilder.append(195):!1===T&&this.bufferBuilder.append(194);else if("undefined"===S)this.bufferBuilder.append(192);else{if("object"!==S)throw new Error('Type "'+S+'" not yet supported');if(null===T)this.bufferBuilder.append(192);else{var x=T.constructor;if(x==Array)this.pack_array(T);else if(x==Blob||x==File||T instanceof Blob||T instanceof File)this.pack_bin(T);else if(x==ArrayBuffer)this.pack_bin(U.useArrayBufferView?new Uint8Array(T):T);else if("BYTES_PER_ELEMENT"in T)this.pack_bin(U.useArrayBufferView?new Uint8Array(T.buffer):T.buffer);else if(x==Object||x.toString().startsWith("class"))this.pack_object(T);else if(x==Date)this.pack_string(T.toString());else{if("function"!=typeof T.toBinaryPack)throw new Error('Type "'+x.toString()+'" not yet supported');this.bufferBuilder.append(T.toBinaryPack())}}}this.bufferBuilder.flush()},X.prototype.pack_bin=function(T){var S=T.length||T.byteLength||T.size;if(S<=15)this.pack_uint8(160+S);else if(S<=65535)this.bufferBuilder.append(218),this.pack_uint16(S);else{if(!(S<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(219),this.pack_uint32(S)}this.bufferBuilder.append(T)},X.prototype.pack_string=function(T){var S=function(T){return T.length>600?new Blob([T]).size:T.replace(/[^\u0000-\u007F]/g,W).length}(T);if(S<=15)this.pack_uint8(176+S);else if(S<=65535)this.bufferBuilder.append(216),this.pack_uint16(S);else{if(!(S<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(217),this.pack_uint32(S)}this.bufferBuilder.append(T)},X.prototype.pack_array=function(T){var S=T.length;if(S<=15)this.pack_uint8(144+S);else if(S<=65535)this.bufferBuilder.append(220),this.pack_uint16(S);else{if(!(S<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(221),this.pack_uint32(S)}for(var x=0;x<S;x++)this.pack(T[x])},X.prototype.pack_integer=function(T){if(T>=-32&&T<=127)this.bufferBuilder.append(255&T);else if(T>=0&&T<=255)this.bufferBuilder.append(204),this.pack_uint8(T);else if(T>=-128&&T<=127)this.bufferBuilder.append(208),this.pack_int8(T);else if(T>=0&&T<=65535)this.bufferBuilder.append(205),this.pack_uint16(T);else if(T>=-32768&&T<=32767)this.bufferBuilder.append(209),this.pack_int16(T);else if(T>=0&&T<=4294967295)this.bufferBuilder.append(206),this.pack_uint32(T);else if(T>=-2147483648&&T<=2147483647)this.bufferBuilder.append(210),this.pack_int32(T);else if(T>=-0x8000000000000000&&T<=0x8000000000000000)this.bufferBuilder.append(211),this.pack_int64(T);else{if(!(T>=0&&T<=0x10000000000000000))throw new Error("Invalid integer");this.bufferBuilder.append(207),this.pack_uint64(T)}},X.prototype.pack_double=function(T){var S=0;T<0&&(S=1,T=-T);var x=Math.floor(Math.log(T)/Math.LN2),V=T/Math.pow(2,x)-1,O=Math.floor(V*Math.pow(2,52)),J=Math.pow(2,32),M=S<<31|x+1023<<20|O/J&1048575,$=O%J;this.bufferBuilder.append(203),this.pack_int32(M),this.pack_int32($)},X.prototype.pack_object=function(T){var x=Object.keys(T).length;if(x<=15)this.pack_uint8(128+x);else if(x<=65535)this.bufferBuilder.append(222),this.pack_uint16(x);else{if(!(x<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(223),this.pack_uint32(x)}for(var V in T)T.hasOwnProperty(V)&&(this.pack(V),this.pack(T[V]))},X.prototype.pack_uint8=function(T){this.bufferBuilder.append(T)},X.prototype.pack_uint16=function(T){this.bufferBuilder.append(T>>8),this.bufferBuilder.append(255&T)},X.prototype.pack_uint32=function(T){var S=4294967295&T;this.bufferBuilder.append((4278190080&S)>>>24),this.bufferBuilder.append((16711680&S)>>>16),this.bufferBuilder.append((65280&S)>>>8),this.bufferBuilder.append(255&S)},X.prototype.pack_uint64=function(T){var S=T/Math.pow(2,32),x=T%Math.pow(2,32);this.bufferBuilder.append((4278190080&S)>>>24),this.bufferBuilder.append((16711680&S)>>>16),this.bufferBuilder.append((65280&S)>>>8),this.bufferBuilder.append(255&S),this.bufferBuilder.append((4278190080&x)>>>24),this.bufferBuilder.append((16711680&x)>>>16),this.bufferBuilder.append((65280&x)>>>8),this.bufferBuilder.append(255&x)},X.prototype.pack_int8=function(T){this.bufferBuilder.append(255&T)},X.prototype.pack_int16=function(T){this.bufferBuilder.append((65280&T)>>8),this.bufferBuilder.append(255&T)},X.prototype.pack_int32=function(T){this.bufferBuilder.append(T>>>24&255),this.bufferBuilder.append((16711680&T)>>>16),this.bufferBuilder.append((65280&T)>>>8),this.bufferBuilder.append(255&T)},X.prototype.pack_int64=function(T){var S=Math.floor(T/Math.pow(2,32)),x=T%Math.pow(2,32);this.bufferBuilder.append((4278190080&S)>>>24),this.bufferBuilder.append((16711680&S)>>>16),this.bufferBuilder.append((65280&S)>>>8),this.bufferBuilder.append(255&S),this.bufferBuilder.append((4278190080&x)>>>24),this.bufferBuilder.append((16711680&x)>>>16),this.bufferBuilder.append((65280&x)>>>8),this.bufferBuilder.append(255&x)}},370:Ke=>{var j={};j.useBlobBuilder=function(){try{return new Blob([]),!1}catch(U){return!0}}(),j.useArrayBufferView=!j.useBlobBuilder&&function(){try{return 0===new Blob([new Uint8Array([])]).size}catch(U){return!0}}(),Ke.exports.cx=j;var I=Ke.exports.xE;function R(){this._pieces=[],this._parts=[]}"undefined"!=typeof window&&(I=Ke.exports.xE=window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder||window.BlobBuilder),R.prototype.append=function(U){"number"==typeof U?this._pieces.push(U):(this.flush(),this._parts.push(U))},R.prototype.flush=function(){if(this._pieces.length>0){var U=new Uint8Array(this._pieces);j.useArrayBufferView||(U=U.buffer),this._parts.push(U),this._pieces=[]}},R.prototype.getBuffer=function(){if(this.flush(),j.useBlobBuilder){for(var U=new I,te=0,A=this._parts.length;te<A;te++)U.append(this._parts[te]);return U.getBlob()}return new Blob(this._parts)},Ke.exports.MY=R},568:function(Ke,j,I){"use strict";var R=this&&this.__importDefault||function(te){return te&&te.__esModule?te:{default:te}};Object.defineProperty(j,"__esModule",{value:!0}),j.webRTCAdapter=void 0;var U=R(I(958));j.webRTCAdapter=U.default},782:function(Ke,j,I){"use strict";var R=this&&this.__awaiter||function(B,T,S,x){return new(S||(S=Promise))(function(O,J){function M(E){try{H(x.next(E))}catch(C){J(C)}}function $(E){try{H(x.throw(E))}catch(C){J(C)}}function H(E){E.done?O(E.value):function(O){return O instanceof S?O:new S(function(J){J(O)})}(E.value).then(M,$)}H((x=x.apply(B,T||[])).next())})},U=this&&this.__generator||function(B,T){var x,V,O,J,S={label:0,sent:function(){if(1&O[0])throw O[1];return O[1]},trys:[],ops:[]};return J={next:M(0),throw:M(1),return:M(2)},"function"==typeof Symbol&&(J[Symbol.iterator]=function(){return this}),J;function M(H){return function(E){return function(H){if(x)throw new TypeError("Generator is already executing.");for(;S;)try{if(x=1,V&&(O=2&H[0]?V.return:H[0]?V.throw||((O=V.return)&&O.call(V),0):V.next)&&!(O=O.call(V,H[1])).done)return O;switch(V=0,O&&(H=[2&H[0],O.value]),H[0]){case 0:case 1:O=H;break;case 4:return S.label++,{value:H[1],done:!1};case 5:S.label++,V=H[1],H=[0];continue;case 7:H=S.ops.pop(),S.trys.pop();continue;default:if(!(O=(O=S.trys).length>0&&O[O.length-1])&&(6===H[0]||2===H[0])){S=0;continue}if(3===H[0]&&(!O||H[1]>O[0]&&H[1]<O[3])){S.label=H[1];break}if(6===H[0]&&S.label<O[1]){S.label=O[1],O=H;break}if(O&&S.label<O[2]){S.label=O[2],S.ops.push(H);break}O[2]&&S.ops.pop(),S.trys.pop();continue}H=T.call(B,S)}catch(E){H=[6,E],V=0}finally{x=O=0}if(5&H[0])throw H[1];return{value:H[0]?H[1]:void 0,done:!0}}([H,E])}}},te=this&&this.__importDefault||function(B){return B&&B.__esModule?B:{default:B}};Object.defineProperty(j,"__esModule",{value:!0}),j.API=void 0;var A=I(487),X=te(I(794)),W=function(){function B(T){this._options=T}return B.prototype._buildUrl=function(T){return(this._options.secure?"https://":"http://")+this._options.host+":"+this._options.port+this._options.path+this._options.key+"/"+T+"?ts="+(new Date).getTime()+Math.random()},B.prototype.retrieveId=function(){return R(this,void 0,void 0,function(){var T,S,x,V;return U(this,function(O){switch(O.label){case 0:T=this._buildUrl("id"),O.label=1;case 1:return O.trys.push([1,3,,4]),[4,fetch(T)];case 2:if(200!==(S=O.sent()).status)throw new Error("Error. Status:"+S.status);return[2,S.text()];case 3:throw x=O.sent(),X.default.error("Error retrieving ID",x),V="","/"===this._options.path&&this._options.host!==A.util.CLOUD_HOST&&(V=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+V);case 4:return[2]}})})},B.prototype.listAllPeers=function(){return R(this,void 0,void 0,function(){var T,S,x,V;return U(this,function(O){switch(O.label){case 0:T=this._buildUrl("peers"),O.label=1;case 1:return O.trys.push([1,3,,4]),[4,fetch(T)];case 2:if(200!==(S=O.sent()).status)throw 401===S.status?("",x=this._options.host===A.util.CLOUD_HOST?"It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":"You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+x)):new Error("Error. Status:"+S.status);return[2,S.json()];case 3:throw V=O.sent(),X.default.error("Error retrieving list peers",V),new Error("Could not get list peers from the server."+V);case 4:return[2]}})})},B}();j.API=W},25:function(Ke,j,I){"use strict";var A,R=this&&this.__extends||(A=function(X,W){return(A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,T){B.__proto__=T}||function(B,T){for(var S in T)Object.prototype.hasOwnProperty.call(T,S)&&(B[S]=T[S])})(X,W)},function(X,W){if("function"!=typeof W&&null!==W)throw new TypeError("Class extends value "+String(W)+" is not a constructor or null");function B(){this.constructor=X}A(X,W),X.prototype=null===W?Object.create(W):(B.prototype=W.prototype,new B)});Object.defineProperty(j,"__esModule",{value:!0}),j.BaseConnection=void 0;var te=function(A){function X(W,B,T){var S=A.call(this)||this;return S.peer=W,S.provider=B,S.options=T,S._open=!1,S.metadata=T.metadata,S}return R(X,A),Object.defineProperty(X.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),X}(I(624).EventEmitter);j.BaseConnection=te},465:function(Ke,j,I){"use strict";var x,R=this&&this.__extends||(x=function(V,O){return(x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(J,M){J.__proto__=M}||function(J,M){for(var $ in M)Object.prototype.hasOwnProperty.call(M,$)&&(J[$]=M[$])})(V,O)},function(V,O){if("function"!=typeof O&&null!==O)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function J(){this.constructor=V}x(V,O),V.prototype=null===O?Object.create(O):(J.prototype=O.prototype,new J)}),U=this&&this.__importDefault||function(x){return x&&x.__esModule?x:{default:x}};Object.defineProperty(j,"__esModule",{value:!0}),j.DataConnection=void 0;var te=I(487),A=U(I(794)),X=I(272),W=I(387),B=I(25),T=I(679),S=function(x){function V(O,J,M){var $=x.call(this,O,J,M)||this;return $.stringify=JSON.stringify,$.parse=JSON.parse,$._buffer=[],$._bufferSize=0,$._buffering=!1,$._chunkedData={},$._encodingQueue=new T.EncodingQueue,$.connectionId=$.options.connectionId||V.ID_PREFIX+te.util.randomToken(),$.label=$.options.label||$.connectionId,$.serialization=$.options.serialization||W.SerializationType.Binary,$.reliable=!!$.options.reliable,$._encodingQueue.on("done",function(H){$._bufferedSend(H)}),$._encodingQueue.on("error",function(){A.default.error("DC#"+$.connectionId+": Error occured in encoding from blob to arraybuffer, close DC"),$.close()}),$._negotiator=new X.Negotiator($),$._negotiator.startConnection($.options._payload||{originator:!0}),$}return R(V,x),Object.defineProperty(V.prototype,"type",{get:function(){return W.ConnectionType.Data},enumerable:!1,configurable:!0}),Object.defineProperty(V.prototype,"dataChannel",{get:function(){return this._dc},enumerable:!1,configurable:!0}),Object.defineProperty(V.prototype,"bufferSize",{get:function(){return this._bufferSize},enumerable:!1,configurable:!0}),V.prototype.initialize=function(O){this._dc=O,this._configureDataChannel()},V.prototype._configureDataChannel=function(){var O=this;(!te.util.supports.binaryBlob||te.util.supports.reliable)&&(this.dataChannel.binaryType="arraybuffer"),this.dataChannel.onopen=function(){A.default.log("DC#"+O.connectionId+" dc connection success"),O._open=!0,O.emit(W.ConnectionEventType.Open)},this.dataChannel.onmessage=function(J){A.default.log("DC#"+O.connectionId+" dc onmessage:",J.data),O._handleDataMessage(J)},this.dataChannel.onclose=function(){A.default.log("DC#"+O.connectionId+" dc closed for:",O.peer),O.close()}},V.prototype._handleDataMessage=function(O){var J=this,M=O.data,$=M.constructor,E=M;if(this.serialization===W.SerializationType.Binary||this.serialization===W.SerializationType.BinaryUTF8){if($===Blob)return void te.util.blobToArrayBuffer(M,function(G){var Y=te.util.unpack(G);J.emit(W.ConnectionEventType.Data,Y)});if($===ArrayBuffer)E=te.util.unpack(M);else if($===String){var C=te.util.binaryStringToArrayBuffer(M);E=te.util.unpack(C)}}else this.serialization===W.SerializationType.JSON&&(E=this.parse(M));E.__peerData?this._handleChunk(E):x.prototype.emit.call(this,W.ConnectionEventType.Data,E)},V.prototype._handleChunk=function(O){var J=O.__peerData,M=this._chunkedData[J]||{data:[],count:0,total:O.total};if(M.data[O.n]=O.data,M.count++,this._chunkedData[J]=M,M.total===M.count){delete this._chunkedData[J];var $=new Blob(M.data);this._handleDataMessage({data:$})}},V.prototype.close=function(){this._buffer=[],this._bufferSize=0,this._chunkedData={},this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this._dc=null),this._encodingQueue&&(this._encodingQueue.destroy(),this._encodingQueue.removeAllListeners(),this._encodingQueue=null),this.open&&(this._open=!1,x.prototype.emit.call(this,W.ConnectionEventType.Close))},V.prototype.send=function(O,J){if(this.open)if(this.serialization===W.SerializationType.JSON)this._bufferedSend(this.stringify(O));else if(this.serialization===W.SerializationType.Binary||this.serialization===W.SerializationType.BinaryUTF8){var M=te.util.pack(O);if(!J&&M.size>te.util.chunkedMTU)return void this._sendChunks(M);te.util.supports.binaryBlob?this._bufferedSend(M):this._encodingQueue.enque(M)}else this._bufferedSend(O);else x.prototype.emit.call(this,W.ConnectionEventType.Error,new Error("Connection is not open. You should listen for the `open` event before sending messages."))},V.prototype._bufferedSend=function(O){(this._buffering||!this._trySend(O))&&(this._buffer.push(O),this._bufferSize=this._buffer.length)},V.prototype._trySend=function(O){var J=this;if(!this.open)return!1;if(this.dataChannel.bufferedAmount>V.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(function(){J._buffering=!1,J._tryBuffer()},50),!1;try{this.dataChannel.send(O)}catch(M){return A.default.error("DC#:"+this.connectionId+" Error when sending:",M),this._buffering=!0,this.close(),!1}return!0},V.prototype._tryBuffer=function(){this.open&&0!==this._buffer.length&&this._trySend(this._buffer[0])&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())},V.prototype._sendChunks=function(O){var J=te.util.chunk(O);A.default.log("DC#"+this.connectionId+" Try to send "+J.length+" chunks...");for(var M=0,$=J;M<$.length;M++)this.send($[M],!0)},V.prototype.handleMessage=function(O){var J=O.payload;switch(O.type){case W.ServerMessageType.Answer:this._negotiator.handleSDP(O.type,J.sdp);break;case W.ServerMessageType.Candidate:this._negotiator.handleCandidate(J.candidate);break;default:A.default.warn("Unrecognized message type:",O.type,"from peer:",this.peer)}},V.ID_PREFIX="dc_",V.MAX_BUFFERED_AMOUNT=8388608,V}(B.BaseConnection);j.DataConnection=S},679:function(Ke,j,I){"use strict";var W,R=this&&this.__extends||(W=function(B,T){return(W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,x){S.__proto__=x}||function(S,x){for(var V in x)Object.prototype.hasOwnProperty.call(x,V)&&(S[V]=x[V])})(B,T)},function(B,T){if("function"!=typeof T&&null!==T)throw new TypeError("Class extends value "+String(T)+" is not a constructor or null");function S(){this.constructor=B}W(B,T),B.prototype=null===T?Object.create(T):(S.prototype=T.prototype,new S)}),U=this&&this.__importDefault||function(W){return W&&W.__esModule?W:{default:W}};Object.defineProperty(j,"__esModule",{value:!0}),j.EncodingQueue=void 0;var te=I(624),A=U(I(794)),X=function(W){function B(){var T=W.call(this)||this;return T.fileReader=new FileReader,T._queue=[],T._processing=!1,T.fileReader.onload=function(S){T._processing=!1,S.target&&T.emit("done",S.target.result),T.doNextTask()},T.fileReader.onerror=function(S){A.default.error("EncodingQueue error:",S),T._processing=!1,T.destroy(),T.emit("error",S)},T}return R(B,W),Object.defineProperty(B.prototype,"queue",{get:function(){return this._queue},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"size",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"processing",{get:function(){return this._processing},enumerable:!1,configurable:!0}),B.prototype.enque=function(T){this.queue.push(T),!this.processing&&this.doNextTask()},B.prototype.destroy=function(){this.fileReader.abort(),this._queue=[]},B.prototype.doNextTask=function(){0!==this.size&&(this.processing||(this._processing=!0,this.fileReader.readAsArrayBuffer(this.queue.shift())))},B}(te.EventEmitter);j.EncodingQueue=X},387:(Ke,j)=>{"use strict";var B;Object.defineProperty(j,"__esModule",{value:!0}),j.ServerMessageType=j.SocketEventType=j.SerializationType=j.PeerErrorType=j.PeerEventType=j.ConnectionType=j.ConnectionEventType=void 0,(B=j.ConnectionEventType||(j.ConnectionEventType={})).Open="open",B.Stream="stream",B.Data="data",B.Close="close",B.Error="error",B.IceStateChanged="iceStateChanged",function(B){B.Data="data",B.Media="media"}(j.ConnectionType||(j.ConnectionType={})),function(B){B.Open="open",B.Close="close",B.Connection="connection",B.Call="call",B.Disconnected="disconnected",B.Error="error"}(j.PeerEventType||(j.PeerEventType={})),function(B){B.BrowserIncompatible="browser-incompatible",B.Disconnected="disconnected",B.InvalidID="invalid-id",B.InvalidKey="invalid-key",B.Network="network",B.PeerUnavailable="peer-unavailable",B.SslUnavailable="ssl-unavailable",B.ServerError="server-error",B.SocketError="socket-error",B.SocketClosed="socket-closed",B.UnavailableID="unavailable-id",B.WebRTC="webrtc"}(j.PeerErrorType||(j.PeerErrorType={})),function(B){B.Binary="binary",B.BinaryUTF8="binary-utf8",B.JSON="json"}(j.SerializationType||(j.SerializationType={})),function(B){B.Message="message",B.Disconnected="disconnected",B.Error="error",B.Close="close"}(j.SocketEventType||(j.SocketEventType={})),function(B){B.Heartbeat="HEARTBEAT",B.Candidate="CANDIDATE",B.Offer="OFFER",B.Answer="ANSWER",B.Open="OPEN",B.Error="ERROR",B.IdTaken="ID-TAKEN",B.InvalidKey="INVALID-KEY",B.Leave="LEAVE",B.Expire="EXPIRE"}(j.ServerMessageType||(j.ServerMessageType={}))},818:(Ke,j,I)=>{"use strict";Object.defineProperty(j,"__esModule",{value:!0}),j.peerjs=void 0;var R=I(487),U=I(163);j.peerjs={Peer:U.Peer,util:R.util},j.default=U.Peer,window.peerjs=j.peerjs,window.Peer=U.Peer},204:function(Ke,j,I){"use strict";var R=this&&this.__createBinding||(Object.create?function(te,A,X,W){void 0===W&&(W=X),Object.defineProperty(te,W,{enumerable:!0,get:function(){return A[X]}})}:function(te,A,X,W){void 0===W&&(W=X),te[W]=A[X]}),U=this&&this.__exportStar||function(te,A){for(var X in te)"default"!==X&&!Object.prototype.hasOwnProperty.call(A,X)&&R(A,te,X)};Object.defineProperty(j,"__esModule",{value:!0}),U(I(568),j),U(I(782),j),U(I(25),j),U(I(465),j),U(I(679),j),U(I(387),j),U(I(818),j),U(I(794),j),U(I(848),j),U(I(272),j),U(I(163),j),U(I(253),j),U(I(244),j),U(I(559),j),U(I(487),j)},794:function(Ke,j){"use strict";var I=this&&this.__spreadArray||function(A,X){for(var W=0,B=X.length,T=A.length;W<B;W++,T++)A[T]=X[W];return A};Object.defineProperty(j,"__esModule",{value:!0}),j.LogLevel=void 0;var U,A,R="PeerJS: ";(A=U=j.LogLevel||(j.LogLevel={}))[A.Disabled=0]="Disabled",A[A.Errors=1]="Errors",A[A.Warnings=2]="Warnings",A[A.All=3]="All";var te=function(){function A(){this._logLevel=U.Disabled}return Object.defineProperty(A.prototype,"logLevel",{get:function(){return this._logLevel},set:function(X){this._logLevel=X},enumerable:!1,configurable:!0}),A.prototype.log=function(){for(var X=[],W=0;W<arguments.length;W++)X[W]=arguments[W];this._logLevel>=U.All&&this._print.apply(this,I([U.All],X))},A.prototype.warn=function(){for(var X=[],W=0;W<arguments.length;W++)X[W]=arguments[W];this._logLevel>=U.Warnings&&this._print.apply(this,I([U.Warnings],X))},A.prototype.error=function(){for(var X=[],W=0;W<arguments.length;W++)X[W]=arguments[W];this._logLevel>=U.Errors&&this._print.apply(this,I([U.Errors],X))},A.prototype.setLogFunction=function(X){this._print=X},A.prototype._print=function(X){for(var W=[],B=1;B<arguments.length;B++)W[B-1]=arguments[B];var T=I([R],W);for(var S in T)T[S]instanceof Error&&(T[S]="("+T[S].name+") "+T[S].message);X>=U.All?console.log.apply(console,T):X>=U.Warnings?console.warn.apply(console,I(["WARNING"],T)):X>=U.Errors&&console.error.apply(console,I(["ERROR"],T))},A}();j.default=new te},848:function(Ke,j,I){"use strict";var x,R=this&&this.__extends||(x=function(V,O){return(x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(J,M){J.__proto__=M}||function(J,M){for(var $ in M)Object.prototype.hasOwnProperty.call(M,$)&&(J[$]=M[$])})(V,O)},function(V,O){if("function"!=typeof O&&null!==O)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function J(){this.constructor=V}x(V,O),V.prototype=null===O?Object.create(O):(J.prototype=O.prototype,new J)}),U=this&&this.__assign||function(){return(U=Object.assign||function(x){for(var V,O=1,J=arguments.length;O<J;O++)for(var M in V=arguments[O])Object.prototype.hasOwnProperty.call(V,M)&&(x[M]=V[M]);return x}).apply(this,arguments)},te=this&&this.__importDefault||function(x){return x&&x.__esModule?x:{default:x}};Object.defineProperty(j,"__esModule",{value:!0}),j.MediaConnection=void 0;var A=I(487),X=te(I(794)),W=I(272),B=I(387),S=function(x){function V(O,J,M){var $=x.call(this,O,J,M)||this;return $._localStream=$.options._stream,$.connectionId=$.options.connectionId||V.ID_PREFIX+A.util.randomToken(),$._negotiator=new W.Negotiator($),$._localStream&&$._negotiator.startConnection({_stream:$._localStream,originator:!0}),$}return R(V,x),Object.defineProperty(V.prototype,"type",{get:function(){return B.ConnectionType.Media},enumerable:!1,configurable:!0}),Object.defineProperty(V.prototype,"localStream",{get:function(){return this._localStream},enumerable:!1,configurable:!0}),Object.defineProperty(V.prototype,"remoteStream",{get:function(){return this._remoteStream},enumerable:!1,configurable:!0}),V.prototype.addStream=function(O){X.default.log("Receiving stream",O),this._remoteStream=O,x.prototype.emit.call(this,B.ConnectionEventType.Stream,O)},V.prototype.handleMessage=function(O){var J=O.type,M=O.payload;switch(O.type){case B.ServerMessageType.Answer:this._negotiator.handleSDP(J,M.sdp),this._open=!0;break;case B.ServerMessageType.Candidate:this._negotiator.handleCandidate(M.candidate);break;default:X.default.warn("Unrecognized message type:"+J+" from peer:"+this.peer)}},V.prototype.answer=function(O,J){if(void 0===J&&(J={}),this._localStream)X.default.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");else{this._localStream=O,J&&J.sdpTransform&&(this.options.sdpTransform=J.sdpTransform),this._negotiator.startConnection(U(U({},this.options._payload),{_stream:O}));for(var $=0,H=this.provider._getMessages(this.connectionId);$<H.length;$++)this.handleMessage(H[$]);this._open=!0}},V.prototype.close=function(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,x.prototype.emit.call(this,B.ConnectionEventType.Close))},V.ID_PREFIX="mc_",V}(I(25).BaseConnection);j.MediaConnection=S},272:function(Ke,j,I){"use strict";var R=this&&this.__assign||function(){return(R=Object.assign||function(S){for(var x,V=1,O=arguments.length;V<O;V++)for(var J in x=arguments[V])Object.prototype.hasOwnProperty.call(x,J)&&(S[J]=x[J]);return S}).apply(this,arguments)},U=this&&this.__awaiter||function(S,x,V,O){return new(V||(V=Promise))(function(M,$){function H(G){try{C(O.next(G))}catch(Y){$(Y)}}function E(G){try{C(O.throw(G))}catch(Y){$(Y)}}function C(G){G.done?M(G.value):function(M){return M instanceof V?M:new V(function($){$(M)})}(G.value).then(H,E)}C((O=O.apply(S,x||[])).next())})},te=this&&this.__generator||function(S,x){var O,J,M,$,V={label:0,sent:function(){if(1&M[0])throw M[1];return M[1]},trys:[],ops:[]};return $={next:H(0),throw:H(1),return:H(2)},"function"==typeof Symbol&&($[Symbol.iterator]=function(){return this}),$;function H(C){return function(G){return function(C){if(O)throw new TypeError("Generator is already executing.");for(;V;)try{if(O=1,J&&(M=2&C[0]?J.return:C[0]?J.throw||((M=J.return)&&M.call(J),0):J.next)&&!(M=M.call(J,C[1])).done)return M;switch(J=0,M&&(C=[2&C[0],M.value]),C[0]){case 0:case 1:M=C;break;case 4:return V.label++,{value:C[1],done:!1};case 5:V.label++,J=C[1],C=[0];continue;case 7:C=V.ops.pop(),V.trys.pop();continue;default:if(!(M=(M=V.trys).length>0&&M[M.length-1])&&(6===C[0]||2===C[0])){V=0;continue}if(3===C[0]&&(!M||C[1]>M[0]&&C[1]<M[3])){V.label=C[1];break}if(6===C[0]&&V.label<M[1]){V.label=M[1],M=C;break}if(M&&V.label<M[2]){V.label=M[2],V.ops.push(C);break}M[2]&&V.ops.pop(),V.trys.pop();continue}C=x.call(S,V)}catch(G){C=[6,G],J=0}finally{O=M=0}if(5&C[0])throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}([C,G])}}},A=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(j,"__esModule",{value:!0}),j.Negotiator=void 0;var X=I(487),W=A(I(794)),B=I(387),T=function(){function S(x){this.connection=x}return S.prototype.startConnection=function(x){var V=this._startPeerConnection();if(this.connection.peerConnection=V,this.connection.type===B.ConnectionType.Media&&x._stream&&this._addTracksToConnection(x._stream,V),x.originator){if(this.connection.type===B.ConnectionType.Data){var O=this.connection,M=V.createDataChannel(O.label,{ordered:!!x.reliable});O.initialize(M)}this._makeOffer()}else this.handleSDP("OFFER",x.sdp)},S.prototype._startPeerConnection=function(){W.default.log("Creating RTCPeerConnection.");var x=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(x),x},S.prototype._setupListeners=function(x){var V=this,O=this.connection.peer,J=this.connection.connectionId,M=this.connection.type,$=this.connection.provider;W.default.log("Listening for ICE candidates."),x.onicecandidate=function(H){!H.candidate||!H.candidate.candidate||(W.default.log("Received ICE candidates for "+O+":",H.candidate),$.socket.send({type:B.ServerMessageType.Candidate,payload:{candidate:H.candidate,type:M,connectionId:J},dst:O}))},x.oniceconnectionstatechange=function(){switch(x.iceConnectionState){case"failed":W.default.log("iceConnectionState is failed, closing connections to "+O),V.connection.emit(B.ConnectionEventType.Error,new Error("Negotiation of connection to "+O+" failed.")),V.connection.close();break;case"closed":W.default.log("iceConnectionState is closed, closing connections to "+O),V.connection.emit(B.ConnectionEventType.Error,new Error("Connection to "+O+" closed.")),V.connection.close();break;case"disconnected":W.default.log("iceConnectionState changed to disconnected on the connection with "+O);break;case"completed":x.onicecandidate=X.util.noop}V.connection.emit(B.ConnectionEventType.IceStateChanged,x.iceConnectionState)},W.default.log("Listening for data channel"),x.ondatachannel=function(H){W.default.log("Received data channel");var E=H.channel;$.getConnection(O,J).initialize(E)},W.default.log("Listening for remote stream"),x.ontrack=function(H){W.default.log("Received remote stream");var E=H.streams[0],C=$.getConnection(O,J);C.type===B.ConnectionType.Media&&V._addStreamToMediaConnection(E,C)}},S.prototype.cleanup=function(){W.default.log("Cleaning up PeerConnection to "+this.connection.peer);var x=this.connection.peerConnection;if(x){this.connection.peerConnection=null,x.onicecandidate=x.oniceconnectionstatechange=x.ondatachannel=x.ontrack=function(){};var O=!1;if(this.connection.type===B.ConnectionType.Data){var M=this.connection.dataChannel;M&&(O=!!M.readyState&&"closed"!==M.readyState)}("closed"!==x.signalingState||O)&&x.close()}},S.prototype._makeOffer=function(){return U(this,void 0,void 0,function(){var x,V,O,J,M,$,H;return te(this,function(E){switch(E.label){case 0:x=this.connection.peerConnection,V=this.connection.provider,E.label=1;case 1:return E.trys.push([1,7,,8]),[4,x.createOffer(this.connection.options.constraints)];case 2:O=E.sent(),W.default.log("Created offer."),this.connection.options.sdpTransform&&"function"==typeof this.connection.options.sdpTransform&&(O.sdp=this.connection.options.sdpTransform(O.sdp)||O.sdp),E.label=3;case 3:return E.trys.push([3,5,,6]),[4,x.setLocalDescription(O)];case 4:return E.sent(),W.default.log("Set localDescription:",O,"for:"+this.connection.peer),J={sdp:O,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata,browser:X.util.browser},this.connection.type===B.ConnectionType.Data&&(M=this.connection,J=R(R({},J),{label:M.label,reliable:M.reliable,serialization:M.serialization})),V.socket.send({type:B.ServerMessageType.Offer,payload:J,dst:this.connection.peer}),[3,6];case 5:return"OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"!=($=E.sent())&&(V.emitError(B.PeerErrorType.WebRTC,$),W.default.log("Failed to setLocalDescription, ",$)),[3,6];case 6:return[3,8];case 7:return H=E.sent(),V.emitError(B.PeerErrorType.WebRTC,H),W.default.log("Failed to createOffer, ",H),[3,8];case 8:return[2]}})})},S.prototype._makeAnswer=function(){return U(this,void 0,void 0,function(){var x,V,O,J,M;return te(this,function($){switch($.label){case 0:x=this.connection.peerConnection,V=this.connection.provider,$.label=1;case 1:return $.trys.push([1,7,,8]),[4,x.createAnswer()];case 2:O=$.sent(),W.default.log("Created answer."),this.connection.options.sdpTransform&&"function"==typeof this.connection.options.sdpTransform&&(O.sdp=this.connection.options.sdpTransform(O.sdp)||O.sdp),$.label=3;case 3:return $.trys.push([3,5,,6]),[4,x.setLocalDescription(O)];case 4:return $.sent(),W.default.log("Set localDescription:",O,"for:"+this.connection.peer),V.socket.send({type:B.ServerMessageType.Answer,payload:{sdp:O,type:this.connection.type,connectionId:this.connection.connectionId,browser:X.util.browser},dst:this.connection.peer}),[3,6];case 5:return J=$.sent(),V.emitError(B.PeerErrorType.WebRTC,J),W.default.log("Failed to setLocalDescription, ",J),[3,6];case 6:return[3,8];case 7:return M=$.sent(),V.emitError(B.PeerErrorType.WebRTC,M),W.default.log("Failed to create answer, ",M),[3,8];case 8:return[2]}})})},S.prototype.handleSDP=function(x,V){return U(this,void 0,void 0,function(){var O,J,M,$;return te(this,function(H){switch(H.label){case 0:V=new RTCSessionDescription(V),O=this.connection.peerConnection,J=this.connection.provider,W.default.log("Setting remote description",V),M=this,H.label=1;case 1:return H.trys.push([1,5,,6]),[4,O.setRemoteDescription(V)];case 2:return H.sent(),W.default.log("Set remoteDescription:"+x+" for:"+this.connection.peer),"OFFER"!==x?[3,4]:[4,M._makeAnswer()];case 3:H.sent(),H.label=4;case 4:return[3,6];case 5:return $=H.sent(),J.emitError(B.PeerErrorType.WebRTC,$),W.default.log("Failed to setRemoteDescription, ",$),[3,6];case 6:return[2]}})})},S.prototype.handleCandidate=function(x){return U(this,void 0,void 0,function(){var V,O,J,M,$,H;return te(this,function(E){switch(E.label){case 0:W.default.log("handleCandidate:",x),V=x.candidate,O=x.sdpMLineIndex,J=x.sdpMid,M=this.connection.peerConnection,$=this.connection.provider,E.label=1;case 1:return E.trys.push([1,3,,4]),[4,M.addIceCandidate(new RTCIceCandidate({sdpMid:J,sdpMLineIndex:O,candidate:V}))];case 2:return E.sent(),W.default.log("Added ICE candidate for:"+this.connection.peer),[3,4];case 3:return H=E.sent(),$.emitError(B.PeerErrorType.WebRTC,H),W.default.log("Failed to handleCandidate, ",H),[3,4];case 4:return[2]}})})},S.prototype._addTracksToConnection=function(x,V){if(W.default.log("add tracks from stream "+x.id+" to peer connection"),!V.addTrack)return W.default.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");x.getTracks().forEach(function(O){V.addTrack(O,x)})},S.prototype._addStreamToMediaConnection=function(x,V){W.default.log("add stream "+x.id+" to media connection "+V.connectionId),V.addStream(x)},S}();j.Negotiator=T},163:function(Ke,j,I){"use strict";var M,R=this&&this.__extends||(M=function($,H){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,C){E.__proto__=C}||function(E,C){for(var G in C)Object.prototype.hasOwnProperty.call(C,G)&&(E[G]=C[G])})($,H)},function($,H){if("function"!=typeof H&&null!==H)throw new TypeError("Class extends value "+String(H)+" is not a constructor or null");function E(){this.constructor=$}M($,H),$.prototype=null===H?Object.create(H):(E.prototype=H.prototype,new E)}),U=this&&this.__assign||function(){return(U=Object.assign||function(M){for(var $,H=1,E=arguments.length;H<E;H++)for(var C in $=arguments[H])Object.prototype.hasOwnProperty.call($,C)&&(M[C]=$[C]);return M}).apply(this,arguments)},te=this&&this.__importDefault||function(M){return M&&M.__esModule?M:{default:M}};Object.defineProperty(j,"__esModule",{value:!0}),j.Peer=void 0;var A=I(624),X=I(487),W=te(I(794)),B=I(244),T=I(848),S=I(465),x=I(387),V=I(782),J=function(M){function $(H,E){var G,C=M.call(this)||this;return C._id=null,C._lastServerId=null,C._destroyed=!1,C._disconnected=!1,C._open=!1,C._connections=new Map,C._lostMessages=new Map,H&&H.constructor==Object?E=H:H&&(G=H.toString()),E=U({debug:0,host:X.util.CLOUD_HOST,port:X.util.CLOUD_PORT,path:"/",key:$.DEFAULT_KEY,token:X.util.randomToken(),config:X.util.defaultConfig},E),C._options=E,"/"===C._options.host&&(C._options.host=window.location.hostname),C._options.path&&("/"!==C._options.path[0]&&(C._options.path="/"+C._options.path),"/"!==C._options.path[C._options.path.length-1]&&(C._options.path+="/")),void 0===C._options.secure&&C._options.host!==X.util.CLOUD_HOST?C._options.secure=X.util.isSecure():C._options.host==X.util.CLOUD_HOST&&(C._options.secure=!0),C._options.logFunction&&W.default.setLogFunction(C._options.logFunction),W.default.logLevel=C._options.debug||0,C._api=new V.API(E),C._socket=C._createServerConnection(),X.util.supports.audioVideo||X.util.supports.data?G&&!X.util.validateId(G)?(C._delayedAbort(x.PeerErrorType.InvalidID,'ID "'+G+'" is invalid'),C):(G?C._initialize(G):C._api.retrieveId().then(function(Y){return C._initialize(Y)}).catch(function(Y){return C._abort(x.PeerErrorType.ServerError,Y)}),C):(C._delayedAbort(x.PeerErrorType.BrowserIncompatible,"The current browser does not support WebRTC"),C)}return R($,M),Object.defineProperty($.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"socket",{get:function(){return this._socket},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"connections",{get:function(){for(var H=Object.create(null),E=0,C=this._connections;E<C.length;E++){var G=C[E];H[G[0]]=G[1]}return H},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"disconnected",{get:function(){return this._disconnected},enumerable:!1,configurable:!0}),$.prototype._createServerConnection=function(){var H=this,E=new B.Socket(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return E.on(x.SocketEventType.Message,function(C){H._handleMessage(C)}),E.on(x.SocketEventType.Error,function(C){H._abort(x.PeerErrorType.SocketError,C)}),E.on(x.SocketEventType.Disconnected,function(){H.disconnected||(H.emitError(x.PeerErrorType.Network,"Lost connection to server."),H.disconnect())}),E.on(x.SocketEventType.Close,function(){H.disconnected||H._abort(x.PeerErrorType.SocketClosed,"Underlying socket is already closed.")}),E},$.prototype._initialize=function(H){this._id=H,this.socket.start(H,this._options.token)},$.prototype._handleMessage=function(H){var E=H.type,C=H.payload,G=H.src;switch(E){case x.ServerMessageType.Open:this._lastServerId=this.id,this._open=!0,this.emit(x.PeerEventType.Open,this.id);break;case x.ServerMessageType.Error:this._abort(x.PeerErrorType.ServerError,C.msg);break;case x.ServerMessageType.IdTaken:this._abort(x.PeerErrorType.UnavailableID,'ID "'+this.id+'" is taken');break;case x.ServerMessageType.InvalidKey:this._abort(x.PeerErrorType.InvalidKey,'API KEY "'+this._options.key+'" is invalid');break;case x.ServerMessageType.Leave:W.default.log("Received leave message from "+G),this._cleanupPeer(G),this._connections.delete(G);break;case x.ServerMessageType.Expire:this.emitError(x.PeerErrorType.PeerUnavailable,"Could not connect to peer "+G);break;case x.ServerMessageType.Offer:if((re=this.getConnection(G,Y=C.connectionId))&&(re.close(),W.default.warn("Offer received for existing Connection ID:"+Y)),C.type===x.ConnectionType.Media)re=new T.MediaConnection(G,this,{connectionId:Y,_payload:C,metadata:C.metadata}),this._addConnection(G,re),this.emit(x.PeerEventType.Call,re);else{if(C.type!==x.ConnectionType.Data)return void W.default.warn("Received malformed connection type:"+C.type);re=new S.DataConnection(G,this,{connectionId:Y,_payload:C,metadata:C.metadata,label:C.label,serialization:C.serialization,reliable:C.reliable}),this._addConnection(G,re),this.emit(x.PeerEventType.Connection,re)}for(var Se=0,Ue=this._getMessages(Y);Se<Ue.length;Se++)re.handleMessage(Ue[Se]);break;default:if(!C)return void W.default.warn("You received a malformed message from "+G+" of type "+E);var Y,re;(re=this.getConnection(G,Y=C.connectionId))&&re.peerConnection?re.handleMessage(H):Y?this._storeMessage(Y,H):W.default.warn("You received an unrecognized message:",H)}},$.prototype._storeMessage=function(H,E){this._lostMessages.has(H)||this._lostMessages.set(H,[]),this._lostMessages.get(H).push(E)},$.prototype._getMessages=function(H){var E=this._lostMessages.get(H);return E?(this._lostMessages.delete(H),E):[]},$.prototype.connect=function(H,E){if(void 0===E&&(E={}),this.disconnected)return W.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),void this.emitError(x.PeerErrorType.Disconnected,"Cannot connect to new Peer after disconnecting from server.");var C=new S.DataConnection(H,this,E);return this._addConnection(H,C),C},$.prototype.call=function(H,E,C){if(void 0===C&&(C={}),this.disconnected)return W.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),void this.emitError(x.PeerErrorType.Disconnected,"Cannot connect to new Peer after disconnecting from server.");if(E){C._stream=E;var G=new T.MediaConnection(H,this,C);return this._addConnection(H,G),G}W.default.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.")},$.prototype._addConnection=function(H,E){W.default.log("add connection "+E.type+":"+E.connectionId+" to peerId:"+H),this._connections.has(H)||this._connections.set(H,[]),this._connections.get(H).push(E)},$.prototype._removeConnection=function(H){var E=this._connections.get(H.peer);if(E){var C=E.indexOf(H);-1!==C&&E.splice(C,1)}this._lostMessages.delete(H.connectionId)},$.prototype.getConnection=function(H,E){var C=this._connections.get(H);if(!C)return null;for(var G=0,Y=C;G<Y.length;G++){var re=Y[G];if(re.connectionId===E)return re}return null},$.prototype._delayedAbort=function(H,E){var C=this;setTimeout(function(){C._abort(H,E)},0)},$.prototype._abort=function(H,E){W.default.error("Aborting!"),this.emitError(H,E),this._lastServerId?this.disconnect():this.destroy()},$.prototype.emitError=function(H,E){var C;W.default.error("Error:",E),(C="string"==typeof E?new Error(E):E).type=H,this.emit(x.PeerEventType.Error,C)},$.prototype.destroy=function(){this.destroyed||(W.default.log("Destroy peer with ID:"+this.id),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit(x.PeerEventType.Close))},$.prototype._cleanup=function(){for(var H=0,E=this._connections.keys();H<E.length;H++){var C=E[H];this._cleanupPeer(C),this._connections.delete(C)}this.socket.removeAllListeners()},$.prototype._cleanupPeer=function(H){var E=this._connections.get(H);if(E)for(var C=0,G=E;C<G.length;C++)G[C].close()},$.prototype.disconnect=function(){if(!this.disconnected){var H=this.id;W.default.log("Disconnect peer with ID:"+H),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=H,this._id=null,this.emit(x.PeerEventType.Disconnected,H)}},$.prototype.reconnect=function(){if(this.disconnected&&!this.destroyed)W.default.log("Attempting reconnection to server with ID "+this._lastServerId),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(this.disconnected||this.open)throw new Error("Peer "+this.id+" cannot reconnect because it is not disconnected from the server!");W.default.error("In a hurry? We're still trying to make the initial connection!")}},$.prototype.listAllPeers=function(H){var E=this;void 0===H&&(H=function(C){}),this._api.listAllPeers().then(function(C){return H(C)}).catch(function(C){return E._abort(x.PeerErrorType.ServerError,C)})},$.DEFAULT_KEY="peerjs",$}(A.EventEmitter);j.Peer=J},805:function(Ke,j,I){"use strict";var R=this&&this.__createBinding||(Object.create?function(A,X,W,B){void 0===B&&(B=W),Object.defineProperty(A,B,{enumerable:!0,get:function(){return X[W]}})}:function(A,X,W,B){void 0===B&&(B=W),A[B]=X[W]}),U=this&&this.__exportStar||function(A,X){for(var W in A)"default"!==W&&!Object.prototype.hasOwnProperty.call(X,W)&&R(X,A,W)};Object.defineProperty(j,"__esModule",{value:!0});var te=I(163);U(I(204),j),j.default=te.Peer},253:(Ke,j)=>{"use strict";Object.defineProperty(j,"__esModule",{value:!0}),j.ServerMessage=void 0,j.ServerMessage=function(){}},244:function(Ke,j,I){"use strict";var T,R=this&&this.__extends||(T=function(S,x){return(T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(V,O){V.__proto__=O}||function(V,O){for(var J in O)Object.prototype.hasOwnProperty.call(O,J)&&(V[J]=O[J])})(S,x)},function(S,x){if("function"!=typeof x&&null!==x)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function V(){this.constructor=S}T(S,x),S.prototype=null===x?Object.create(x):(V.prototype=x.prototype,new V)}),U=this&&this.__spreadArray||function(T,S){for(var x=0,V=S.length,O=T.length;x<V;x++,O++)T[O]=S[x];return T},te=this&&this.__importDefault||function(T){return T&&T.__esModule?T:{default:T}};Object.defineProperty(j,"__esModule",{value:!0}),j.Socket=void 0;var A=I(624),X=te(I(794)),W=I(387),B=function(T){function S(x,V,O,J,M,$){void 0===$&&($=5e3);var H=T.call(this)||this;return H.pingInterval=$,H._disconnected=!0,H._messagesQueue=[],H._baseUrl=(x?"wss://":"ws://")+V+":"+O+J+"peerjs?key="+M,H}return R(S,T),S.prototype.start=function(x,V){var O=this;this._id=x,this._socket||!this._disconnected||(this._socket=new WebSocket(this._baseUrl+"&id="+x+"&token="+V),this._disconnected=!1,this._socket.onmessage=function(M){var $;try{$=JSON.parse(M.data),X.default.log("Server message received:",$)}catch(H){return void X.default.log("Invalid server message",M.data)}O.emit(W.SocketEventType.Message,$)},this._socket.onclose=function(M){O._disconnected||(X.default.log("Socket closed.",M),O._cleanup(),O._disconnected=!0,O.emit(W.SocketEventType.Disconnected))},this._socket.onopen=function(){O._disconnected||(O._sendQueuedMessages(),X.default.log("Socket open"),O._scheduleHeartbeat())})},S.prototype._scheduleHeartbeat=function(){var x=this;this._wsPingTimer=setTimeout(function(){x._sendHeartbeat()},this.pingInterval)},S.prototype._sendHeartbeat=function(){if(this._wsOpen()){var x=JSON.stringify({type:W.ServerMessageType.Heartbeat});this._socket.send(x),this._scheduleHeartbeat()}else X.default.log("Cannot send heartbeat, because socket closed")},S.prototype._wsOpen=function(){return!!this._socket&&1===this._socket.readyState},S.prototype._sendQueuedMessages=function(){var x=U([],this._messagesQueue);this._messagesQueue=[];for(var V=0,O=x;V<O.length;V++)this.send(O[V])},S.prototype.send=function(x){if(!this._disconnected){if(!this._id)return void this._messagesQueue.push(x);if(!x.type)return void this.emit(W.SocketEventType.Error,"Invalid message");if(this._wsOpen()){var V=JSON.stringify(x);this._socket.send(V)}}},S.prototype.close=function(){this._disconnected||(this._cleanup(),this._disconnected=!0)},S.prototype._cleanup=function(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)},S}(A.EventEmitter);j.Socket=B},559:(Ke,j,I)=>{"use strict";Object.defineProperty(j,"__esModule",{value:!0}),j.Supports=void 0;var R=I(568);j.Supports=new(function(){function U(){this.isIOS=["iPad","iPhone","iPod"].includes(navigator.platform),this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}return U.prototype.isWebRTCSupported=function(){return"undefined"!=typeof RTCPeerConnection},U.prototype.isBrowserSupported=function(){var te=this.getBrowser(),A=this.getVersion();return!!this.supportedBrowsers.includes(te)&&("chrome"===te?A>=this.minChromeVersion:"firefox"===te?A>=this.minFirefoxVersion:"safari"===te&&!this.isIOS&&A>=this.minSafariVersion)},U.prototype.getBrowser=function(){return R.webRTCAdapter.browserDetails.browser},U.prototype.getVersion=function(){return R.webRTCAdapter.browserDetails.version||0},U.prototype.isUnifiedPlanSupported=function(){var te=this.getBrowser(),A=R.webRTCAdapter.browserDetails.version||0;if("chrome"===te&&A<72)return!1;if("firefox"===te&&A>=59)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;var X,W=!1;try{(X=new RTCPeerConnection).addTransceiver("audio"),W=!0}catch(B){}finally{X&&X.close()}return W},U.prototype.toString=function(){return"Supports: \n    browser:"+this.getBrowser()+" \n    version:"+this.getVersion()+" \n    isIOS:"+this.isIOS+" \n    isWebRTCSupported:"+this.isWebRTCSupported()+" \n    isBrowserSupported:"+this.isBrowserSupported()+" \n    isUnifiedPlanSupported:"+this.isUnifiedPlanSupported()},U}())},487:function(Ke,j,I){"use strict";var R=this&&this.__createBinding||(Object.create?function(B,T,S,x){void 0===x&&(x=S),Object.defineProperty(B,x,{enumerable:!0,get:function(){return T[S]}})}:function(B,T,S,x){void 0===x&&(x=S),B[x]=T[S]}),U=this&&this.__setModuleDefault||(Object.create?function(B,T){Object.defineProperty(B,"default",{enumerable:!0,value:T})}:function(B,T){B.default=T}),te=this&&this.__importStar||function(B){if(B&&B.__esModule)return B;var T={};if(null!=B)for(var S in B)"default"!==S&&Object.prototype.hasOwnProperty.call(B,S)&&R(T,B,S);return U(T,B),T};Object.defineProperty(j,"__esModule",{value:!0}),j.util=void 0;var A=te(I(715)),X=I(559),W={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"turn:0.peerjs.com:3478",username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};j.util=new(function(){function B(){this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.chunkedMTU=16300,this.defaultConfig=W,this.browser=X.Supports.getBrowser(),this.browserVersion=X.Supports.getVersion(),this.supports=function(){var S,T={browser:X.Supports.isBrowserSupported(),webRTC:X.Supports.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!T.webRTC)return T;try{S=new RTCPeerConnection(W),T.audioVideo=!0;var x=void 0;try{x=S.createDataChannel("_PEERJSTEST",{ordered:!0}),T.data=!0,T.reliable=!!x.ordered;try{x.binaryType="blob",T.binaryBlob=!X.Supports.isIOS}catch(V){}}catch(V){}finally{x&&x.close()}}catch(V){}finally{S&&S.close()}return T}(),this.pack=A.pack,this.unpack=A.unpack,this._dataCount=1}return B.prototype.noop=function(){},B.prototype.validateId=function(T){return!T||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(T)},B.prototype.chunk=function(T){for(var S=[],x=T.size,V=Math.ceil(x/j.util.chunkedMTU),O=0,J=0;J<x;){var M=Math.min(x,J+j.util.chunkedMTU),$=T.slice(J,M);S.push({__peerData:this._dataCount,n:O,data:$,total:V}),J=M,O++}return this._dataCount++,S},B.prototype.blobToArrayBuffer=function(T,S){var x=new FileReader;return x.onload=function(V){V.target&&S(V.target.result)},x.readAsArrayBuffer(T),x},B.prototype.binaryStringToArrayBuffer=function(T){for(var S=new Uint8Array(T.length),x=0;x<T.length;x++)S[x]=255&T.charCodeAt(x);return S.buffer},B.prototype.randomToken=function(){return Math.random().toString(36).substr(2)},B.prototype.isSecure=function(){return"https:"===location.protocol},B}())},535:(Ke,j,I)=>{"use strict";var R=I(390);function te(S,x,V,O,J){var M=R.writeRtpDescription(S.kind,x);if(M+=R.writeIceParameters(S.iceGatherer.getLocalParameters()),M+=R.writeDtlsParameters(S.dtlsTransport.getLocalParameters(),"offer"===V?"actpass":J||"active"),M+="a=mid:"+S.mid+"\r\n",M+=S.rtpSender&&S.rtpReceiver?"a=sendrecv\r\n":S.rtpSender?"a=sendonly\r\n":S.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",S.rtpSender){var $=S.rtpSender._initialTrackId||S.rtpSender.track.id;S.rtpSender._initialTrackId=$;var H="msid:"+(O?O.id:"-")+" "+$+"\r\n";M+="a="+H,M+="a=ssrc:"+S.sendEncodingParameters[0].ssrc+" "+H,S.sendEncodingParameters[0].rtx&&(M+="a=ssrc:"+S.sendEncodingParameters[0].rtx.ssrc+" "+H,M+="a=ssrc-group:FID "+S.sendEncodingParameters[0].ssrc+" "+S.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return M+="a=ssrc:"+S.sendEncodingParameters[0].ssrc+" cname:"+R.localCName+"\r\n",S.rtpSender&&S.sendEncodingParameters[0].rtx&&(M+="a=ssrc:"+S.sendEncodingParameters[0].rtx.ssrc+" cname:"+R.localCName+"\r\n"),M}function X(S,x){var V={codecs:[],headerExtensions:[],fecMechanisms:[]},O=function(M,$){M=parseInt(M,10);for(var H=0;H<$.length;H++)if($[H].payloadType===M||$[H].preferredPayloadType===M)return $[H]},J=function(M,$,H,E){var C=O(M.parameters.apt,H),G=O($.parameters.apt,E);return C&&G&&C.name.toLowerCase()===G.name.toLowerCase()};return S.codecs.forEach(function(M){for(var $=0;$<x.codecs.length;$++){var H=x.codecs[$];if(M.name.toLowerCase()===H.name.toLowerCase()&&M.clockRate===H.clockRate){if("rtx"===M.name.toLowerCase()&&M.parameters&&H.parameters.apt&&!J(M,H,S.codecs,x.codecs))continue;(H=JSON.parse(JSON.stringify(H))).numChannels=Math.min(M.numChannels,H.numChannels),V.codecs.push(H),H.rtcpFeedback=H.rtcpFeedback.filter(function(E){for(var C=0;C<M.rtcpFeedback.length;C++)if(M.rtcpFeedback[C].type===E.type&&M.rtcpFeedback[C].parameter===E.parameter)return!0;return!1});break}}}),S.headerExtensions.forEach(function(M){for(var $=0;$<x.headerExtensions.length;$++){var H=x.headerExtensions[$];if(M.uri===H.uri){V.headerExtensions.push(H);break}}}),V}function W(S,x,V){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[x][S].indexOf(V)}function B(S,x){var V=S.getRemoteCandidates().find(function(O){return x.foundation===O.foundation&&x.ip===O.ip&&x.port===O.port&&x.priority===O.priority&&x.protocol===O.protocol&&x.type===O.type});return V||S.addRemoteCandidate(x),!V}function T(S,x){var V=new Error(x);return V.name=S,V.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[S],V}Ke.exports=function(S,x){function V(E,C){C.addTrack(E),C.dispatchEvent(new S.MediaStreamTrackEvent("addtrack",{track:E}))}function J(E,C,G,Y){var re=new Event("track");re.track=C,re.receiver=G,re.transceiver={receiver:G},re.streams=Y,S.setTimeout(function(){E._dispatchEvent("track",re)})}var M=function(E){var C=this,G=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(re){C[re]=G[re].bind(G)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",E=JSON.parse(JSON.stringify(E||{})),this.usingBundle="max-bundle"===E.bundlePolicy,"negotiate"===E.rtcpMuxPolicy)throw T("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(E.rtcpMuxPolicy||(E.rtcpMuxPolicy="require"),E.iceTransportPolicy){case"all":case"relay":break;default:E.iceTransportPolicy="all"}switch(E.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:E.bundlePolicy="balanced"}if(E.iceServers=function(S,x){var V=!1;return(S=JSON.parse(JSON.stringify(S))).filter(function(O){if(O&&(O.urls||O.url)){var J=O.urls||O.url;O.url&&!O.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var M="string"==typeof J;return M&&(J=[J]),J=J.filter(function($){return 0!==$.indexOf("turn:")||-1===$.indexOf("transport=udp")||-1!==$.indexOf("turn:[")||V?0===$.indexOf("stun:")&&x>=14393&&-1===$.indexOf("?transport=udp"):(V=!0,!0)}),delete O.url,O.urls=M?J[0]:J,!!J.length}})}(E.iceServers||[],x),this._iceGatherers=[],E.iceCandidatePoolSize)for(var Y=E.iceCandidatePoolSize;Y>0;Y--)this._iceGatherers.push(new S.RTCIceGatherer({iceServers:E.iceServers,gatherPolicy:E.iceTransportPolicy}));else E.iceCandidatePoolSize=0;this._config=E,this.transceivers=[],this._sdpSessionId=R.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(M.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(M.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),M.prototype.onicecandidate=null,M.prototype.onaddstream=null,M.prototype.ontrack=null,M.prototype.onremovestream=null,M.prototype.onsignalingstatechange=null,M.prototype.oniceconnectionstatechange=null,M.prototype.onconnectionstatechange=null,M.prototype.onicegatheringstatechange=null,M.prototype.onnegotiationneeded=null,M.prototype.ondatachannel=null,M.prototype._dispatchEvent=function(E,C){this._isClosed||(this.dispatchEvent(C),"function"==typeof this["on"+E]&&this["on"+E](C))},M.prototype._emitGatheringStateChange=function(){var E=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",E)},M.prototype.getConfiguration=function(){return this._config},M.prototype.getLocalStreams=function(){return this.localStreams},M.prototype.getRemoteStreams=function(){return this.remoteStreams},M.prototype._createTransceiver=function(E,C){var Y={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:E,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&this.transceivers.length>0)Y.iceTransport=this.transceivers[0].iceTransport,Y.dtlsTransport=this.transceivers[0].dtlsTransport;else{var re=this._createIceAndDtlsTransports();Y.iceTransport=re.iceTransport,Y.dtlsTransport=re.dtlsTransport}return C||this.transceivers.push(Y),Y},M.prototype.addTrack=function(E,C){if(this._isClosed)throw T("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");if(this.transceivers.find(function(ve){return ve.track===E}))throw T("InvalidAccessError","Track already exists.");for(var Y,re=0;re<this.transceivers.length;re++)!this.transceivers[re].track&&this.transceivers[re].kind===E.kind&&(Y=this.transceivers[re]);return Y||(Y=this._createTransceiver(E.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(C)&&this.localStreams.push(C),Y.track=E,Y.stream=C,Y.rtpSender=new S.RTCRtpSender(E,Y.dtlsTransport),Y.rtpSender},M.prototype.addStream=function(E){var C=this;if(x>=15025)E.getTracks().forEach(function(Y){C.addTrack(Y,E)});else{var G=E.clone();E.getTracks().forEach(function(Y,re){var ve=G.getTracks()[re];Y.addEventListener("enabled",function(Se){ve.enabled=Se.enabled})}),G.getTracks().forEach(function(Y){C.addTrack(Y,G)})}},M.prototype.removeTrack=function(E){if(this._isClosed)throw T("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(E instanceof S.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var C=this.transceivers.find(function(re){return re.rtpSender===E});if(!C)throw T("InvalidAccessError","Sender was not created by this connection.");var G=C.stream;C.rtpSender.stop(),C.rtpSender=null,C.track=null,C.stream=null,-1===this.transceivers.map(function(re){return re.stream}).indexOf(G)&&this.localStreams.indexOf(G)>-1&&this.localStreams.splice(this.localStreams.indexOf(G),1),this._maybeFireNegotiationNeeded()},M.prototype.removeStream=function(E){var C=this;E.getTracks().forEach(function(G){var Y=C.getSenders().find(function(re){return re.track===G});Y&&C.removeTrack(Y)})},M.prototype.getSenders=function(){return this.transceivers.filter(function(E){return!!E.rtpSender}).map(function(E){return E.rtpSender})},M.prototype.getReceivers=function(){return this.transceivers.filter(function(E){return!!E.rtpReceiver}).map(function(E){return E.rtpReceiver})},M.prototype._createIceGatherer=function(E,C){var G=this;if(C&&E>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var Y=new S.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(Y,"state",{value:"new",writable:!0}),this.transceivers[E].bufferedCandidateEvents=[],this.transceivers[E].bufferCandidates=function(re){var ve=!re.candidate||0===Object.keys(re.candidate).length;Y.state=ve?"completed":"gathering",null!==G.transceivers[E].bufferedCandidateEvents&&G.transceivers[E].bufferedCandidateEvents.push(re)},Y.addEventListener("localcandidate",this.transceivers[E].bufferCandidates),Y},M.prototype._gather=function(E,C){var G=this,Y=this.transceivers[C].iceGatherer;if(!Y.onlocalcandidate){var re=this.transceivers[C].bufferedCandidateEvents;this.transceivers[C].bufferedCandidateEvents=null,Y.removeEventListener("localcandidate",this.transceivers[C].bufferCandidates),Y.onlocalcandidate=function(ve){if(!(G.usingBundle&&C>0)){var Se=new Event("icecandidate");Se.candidate={sdpMid:E,sdpMLineIndex:C};var Ue=ve.candidate,Ze=!Ue||0===Object.keys(Ue).length;if(Ze)("new"===Y.state||"gathering"===Y.state)&&(Y.state="completed");else{"new"===Y.state&&(Y.state="gathering"),Ue.component=1,Ue.ufrag=Y.getLocalParameters().usernameFragment;var be=R.writeCandidate(Ue);Se.candidate=Object.assign(Se.candidate,R.parseCandidate(be)),Se.candidate.candidate=be,Se.candidate.toJSON=function(){return{candidate:Se.candidate.candidate,sdpMid:Se.candidate.sdpMid,sdpMLineIndex:Se.candidate.sdpMLineIndex,usernameFragment:Se.candidate.usernameFragment}}}var Ae=R.getMediaSections(G._localDescription.sdp);Ae[Se.candidate.sdpMLineIndex]+=Ze?"a=end-of-candidates\r\n":"a="+Se.candidate.candidate+"\r\n",G._localDescription.sdp=R.getDescription(G._localDescription.sdp)+Ae.join("");var ye=G.transceivers.every(function(ke){return ke.iceGatherer&&"completed"===ke.iceGatherer.state});"gathering"!==G.iceGatheringState&&(G.iceGatheringState="gathering",G._emitGatheringStateChange()),Ze||G._dispatchEvent("icecandidate",Se),ye&&(G._dispatchEvent("icecandidate",new Event("icecandidate")),G.iceGatheringState="complete",G._emitGatheringStateChange())}},S.setTimeout(function(){re.forEach(function(ve){Y.onlocalcandidate(ve)})},0)}},M.prototype._createIceAndDtlsTransports=function(){var E=this,C=new S.RTCIceTransport(null);C.onicestatechange=function(){E._updateIceConnectionState(),E._updateConnectionState()};var G=new S.RTCDtlsTransport(C);return G.ondtlsstatechange=function(){E._updateConnectionState()},G.onerror=function(){Object.defineProperty(G,"state",{value:"failed",writable:!0}),E._updateConnectionState()},{iceTransport:C,dtlsTransport:G}},M.prototype._disposeIceAndDtlsTransports=function(E){var C=this.transceivers[E].iceGatherer;C&&(delete C.onlocalcandidate,delete this.transceivers[E].iceGatherer);var G=this.transceivers[E].iceTransport;G&&(delete G.onicestatechange,delete this.transceivers[E].iceTransport);var Y=this.transceivers[E].dtlsTransport;Y&&(delete Y.ondtlsstatechange,delete Y.onerror,delete this.transceivers[E].dtlsTransport)},M.prototype._transceive=function(E,C,G){var Y=X(E.localCapabilities,E.remoteCapabilities);C&&E.rtpSender&&(Y.encodings=E.sendEncodingParameters,Y.rtcp={cname:R.localCName,compound:E.rtcpParameters.compound},E.recvEncodingParameters.length&&(Y.rtcp.ssrc=E.recvEncodingParameters[0].ssrc),E.rtpSender.send(Y)),G&&E.rtpReceiver&&Y.codecs.length>0&&("video"===E.kind&&E.recvEncodingParameters&&x<15019&&E.recvEncodingParameters.forEach(function(re){delete re.rtx}),Y.encodings=E.recvEncodingParameters.length?E.recvEncodingParameters:[{}],Y.rtcp={compound:E.rtcpParameters.compound},E.rtcpParameters.cname&&(Y.rtcp.cname=E.rtcpParameters.cname),E.sendEncodingParameters.length&&(Y.rtcp.ssrc=E.sendEncodingParameters[0].ssrc),E.rtpReceiver.receive(Y))},M.prototype.setLocalDescription=function(E){var G,Y,C=this;if(-1===["offer","answer"].indexOf(E.type))return Promise.reject(T("TypeError",'Unsupported type "'+E.type+'"'));if(!W("setLocalDescription",E.type,C.signalingState)||C._isClosed)return Promise.reject(T("InvalidStateError","Can not set local "+E.type+" in state "+C.signalingState));if("offer"===E.type)G=R.splitSections(E.sdp),Y=G.shift(),G.forEach(function(ve,Se){var Ue=R.parseRtpParameters(ve);C.transceivers[Se].localCapabilities=Ue}),C.transceivers.forEach(function(ve,Se){C._gather(ve.mid,Se)});else if("answer"===E.type){G=R.splitSections(C._remoteDescription.sdp),Y=G.shift();var re=R.matchPrefix(Y,"a=ice-lite").length>0;G.forEach(function(ve,Se){var Ue=C.transceivers[Se],Ze=Ue.iceGatherer,be=Ue.iceTransport,Ae=Ue.dtlsTransport,ye=Ue.localCapabilities,ke=Ue.remoteCapabilities;if(!(R.isRejected(ve)&&0===R.matchPrefix(ve,"a=bundle-only").length||Ue.rejected)){var je=R.getIceParameters(ve,Y),It=R.getDtlsParameters(ve,Y);re&&(It.role="server"),(!C.usingBundle||0===Se)&&(C._gather(Ue.mid,Se),"new"===be.state&&be.start(Ze,je,re?"controlling":"controlled"),"new"===Ae.state&&Ae.start(It));var Pt=X(ye,ke);C._transceive(Ue,Pt.codecs.length>0,!1)}})}return C._localDescription={type:E.type,sdp:E.sdp},C._updateSignalingState("offer"===E.type?"have-local-offer":"stable"),Promise.resolve()},M.prototype.setRemoteDescription=function(E){var C=this;if(-1===["offer","answer"].indexOf(E.type))return Promise.reject(T("TypeError",'Unsupported type "'+E.type+'"'));if(!W("setRemoteDescription",E.type,C.signalingState)||C._isClosed)return Promise.reject(T("InvalidStateError","Can not set remote "+E.type+" in state "+C.signalingState));var G={};C.remoteStreams.forEach(function(be){G[be.id]=be});var Y=[],re=R.splitSections(E.sdp),ve=re.shift(),Se=R.matchPrefix(ve,"a=ice-lite").length>0,Ue=R.matchPrefix(ve,"a=group:BUNDLE ").length>0;C.usingBundle=Ue;var Ze=R.matchPrefix(ve,"a=ice-options:")[0];return C.canTrickleIceCandidates=!!Ze&&Ze.substr(14).split(" ").indexOf("trickle")>=0,re.forEach(function(be,Ae){var ye=R.splitLines(be),ke=R.getKind(be),st=R.isRejected(be)&&0===R.matchPrefix(be,"a=bundle-only").length,je=ye[0].substr(2).split(" ")[2],It=R.getDirection(be,ve),Pt=R.parseMsid(be),Kr=R.getMid(be)||R.generateIdentifier();if(st||"application"===ke&&("DTLS/SCTP"===je||"UDP/DTLS/SCTP"===je))C.transceivers[Ae]={mid:Kr,kind:ke,protocol:je,rejected:!0};else{!st&&C.transceivers[Ae]&&C.transceivers[Ae].rejected&&(C.transceivers[Ae]=C._createTransceiver(ke,!0));var He,or,In,Ji,Ie,Ar,kn,sr,fn,Si,Pn,Rr=R.parseRtpParameters(be);st||(Si=R.getIceParameters(be,ve),(Pn=R.getDtlsParameters(be,ve)).role="client"),kn=R.parseRtpEncodingParameters(be);var Xi=R.parseRtcpParameters(be),Nn=R.matchPrefix(be,"a=end-of-candidates",ve).length>0,ar=R.matchPrefix(be,"a=candidate:").map(function(Ut){return R.parseCandidate(Ut)}).filter(function(Ut){return 1===Ut.component});if(("offer"===E.type||"answer"===E.type)&&!st&&Ue&&Ae>0&&C.transceivers[Ae]&&(C._disposeIceAndDtlsTransports(Ae),C.transceivers[Ae].iceGatherer=C.transceivers[0].iceGatherer,C.transceivers[Ae].iceTransport=C.transceivers[0].iceTransport,C.transceivers[Ae].dtlsTransport=C.transceivers[0].dtlsTransport,C.transceivers[Ae].rtpSender&&C.transceivers[Ae].rtpSender.setTransport(C.transceivers[0].dtlsTransport),C.transceivers[Ae].rtpReceiver&&C.transceivers[Ae].rtpReceiver.setTransport(C.transceivers[0].dtlsTransport)),"offer"!==E.type||st)"answer"!==E.type||st||(or=(He=C.transceivers[Ae]).iceGatherer,In=He.iceTransport,Ji=He.dtlsTransport,Ie=He.rtpReceiver,Ar=He.sendEncodingParameters,sr=He.localCapabilities,C.transceivers[Ae].recvEncodingParameters=kn,C.transceivers[Ae].remoteCapabilities=Rr,C.transceivers[Ae].rtcpParameters=Xi,ar.length&&"new"===In.state&&(!Se&&!Nn||Ue&&0!==Ae?ar.forEach(function(Ut){B(He.iceTransport,Ut)}):In.setRemoteCandidates(ar)),(!Ue||0===Ae)&&("new"===In.state&&In.start(or,Si,"controlling"),"new"===Ji.state&&Ji.start(Pn)),!X(He.localCapabilities,He.remoteCapabilities).codecs.filter(function(Ut){return"rtx"===Ut.name.toLowerCase()}).length&&He.sendEncodingParameters[0].rtx&&delete He.sendEncodingParameters[0].rtx,C._transceive(He,"sendrecv"===It||"recvonly"===It,"sendrecv"===It||"sendonly"===It),!Ie||"sendrecv"!==It&&"sendonly"!==It?delete He.rtpReceiver:(fn=Ie.track,Pt?(G[Pt.stream]||(G[Pt.stream]=new S.MediaStream),V(fn,G[Pt.stream]),Y.push([fn,Ie,G[Pt.stream]])):(G.default||(G.default=new S.MediaStream),V(fn,G.default),Y.push([fn,Ie,G.default]))));else{(He=C.transceivers[Ae]||C._createTransceiver(ke)).mid=Kr,He.iceGatherer||(He.iceGatherer=C._createIceGatherer(Ae,Ue)),ar.length&&"new"===He.iceTransport.state&&(!Nn||Ue&&0!==Ae?ar.forEach(function(Ut){B(He.iceTransport,Ut)}):He.iceTransport.setRemoteCandidates(ar)),sr=S.RTCRtpReceiver.getCapabilities(ke),x<15019&&(sr.codecs=sr.codecs.filter(function(Ut){return"rtx"!==Ut.name})),Ar=He.sendEncodingParameters||[{ssrc:1001*(2*Ae+2)}];var Et,ut=!1;"sendrecv"===It||"sendonly"===It?(ut=!He.rtpReceiver,Ie=He.rtpReceiver||new S.RTCRtpReceiver(He.dtlsTransport,ke),ut&&(fn=Ie.track,Pt&&"-"===Pt.stream||(Pt?(G[Pt.stream]||(G[Pt.stream]=new S.MediaStream,Object.defineProperty(G[Pt.stream],"id",{get:function(){return Pt.stream}})),Object.defineProperty(fn,"id",{get:function(){return Pt.track}}),Et=G[Pt.stream]):(G.default||(G.default=new S.MediaStream),Et=G.default)),Et&&(V(fn,Et),He.associatedRemoteMediaStreams.push(Et)),Y.push([fn,Ie,Et]))):He.rtpReceiver&&He.rtpReceiver.track&&(He.associatedRemoteMediaStreams.forEach(function(Ut){var Ro=Ut.getTracks().find(function(Xr){return Xr.id===He.rtpReceiver.track.id});Ro&&function(E,C){C.removeTrack(E),C.dispatchEvent(new S.MediaStreamTrackEvent("removetrack",{track:E}))}(Ro,Ut)}),He.associatedRemoteMediaStreams=[]),He.localCapabilities=sr,He.remoteCapabilities=Rr,He.rtpReceiver=Ie,He.rtcpParameters=Xi,He.sendEncodingParameters=Ar,He.recvEncodingParameters=kn,C._transceive(C.transceivers[Ae],!1,ut)}}}),void 0===C._dtlsRole&&(C._dtlsRole="offer"===E.type?"active":"passive"),C._remoteDescription={type:E.type,sdp:E.sdp},C._updateSignalingState("offer"===E.type?"have-remote-offer":"stable"),Object.keys(G).forEach(function(be){var Ae=G[be];if(Ae.getTracks().length){if(-1===C.remoteStreams.indexOf(Ae)){C.remoteStreams.push(Ae);var ye=new Event("addstream");ye.stream=Ae,S.setTimeout(function(){C._dispatchEvent("addstream",ye)})}Y.forEach(function(ke){Ae.id===ke[2].id&&J(C,ke[0],ke[1],[Ae])})}}),Y.forEach(function(be){be[2]||J(C,be[0],be[1],[])}),S.setTimeout(function(){!C||!C.transceivers||C.transceivers.forEach(function(be){be.iceTransport&&"new"===be.iceTransport.state&&be.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),be.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},M.prototype.close=function(){this.transceivers.forEach(function(E){E.iceTransport&&E.iceTransport.stop(),E.dtlsTransport&&E.dtlsTransport.stop(),E.rtpSender&&E.rtpSender.stop(),E.rtpReceiver&&E.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},M.prototype._updateSignalingState=function(E){this.signalingState=E;var C=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",C)},M.prototype._maybeFireNegotiationNeeded=function(){var E=this;"stable"!==this.signalingState||!0===this.needNegotiation||(this.needNegotiation=!0,S.setTimeout(function(){if(E.needNegotiation){E.needNegotiation=!1;var C=new Event("negotiationneeded");E._dispatchEvent("negotiationneeded",C)}},0))},M.prototype._updateIceConnectionState=function(){var E,C={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(Y){Y.iceTransport&&!Y.rejected&&C[Y.iceTransport.state]++}),E="new",C.failed>0?E="failed":C.checking>0?E="checking":C.disconnected>0?E="disconnected":C.new>0?E="new":C.connected>0?E="connected":C.completed>0&&(E="completed"),E!==this.iceConnectionState){this.iceConnectionState=E;var G=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",G)}},M.prototype._updateConnectionState=function(){var E,C={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(Y){Y.iceTransport&&Y.dtlsTransport&&!Y.rejected&&(C[Y.iceTransport.state]++,C[Y.dtlsTransport.state]++)}),C.connected+=C.completed,E="new",C.failed>0?E="failed":C.connecting>0?E="connecting":C.disconnected>0?E="disconnected":C.new>0?E="new":C.connected>0&&(E="connected"),E!==this.connectionState){this.connectionState=E;var G=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",G)}},M.prototype.createOffer=function(){var E=this;if(E._isClosed)return Promise.reject(T("InvalidStateError","Can not call createOffer after close"));var C=E.transceivers.filter(function(Se){return"audio"===Se.kind}).length,G=E.transceivers.filter(function(Se){return"video"===Se.kind}).length,Y=arguments[0];if(Y){if(Y.mandatory||Y.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==Y.offerToReceiveAudio&&(C=!0===Y.offerToReceiveAudio?1:!1===Y.offerToReceiveAudio?0:Y.offerToReceiveAudio),void 0!==Y.offerToReceiveVideo&&(G=!0===Y.offerToReceiveVideo?1:!1===Y.offerToReceiveVideo?0:Y.offerToReceiveVideo)}for(E.transceivers.forEach(function(Se){"audio"===Se.kind?--C<0&&(Se.wantReceive=!1):"video"===Se.kind&&--G<0&&(Se.wantReceive=!1)});C>0||G>0;)C>0&&(E._createTransceiver("audio"),C--),G>0&&(E._createTransceiver("video"),G--);var re=R.writeSessionBoilerplate(E._sdpSessionId,E._sdpSessionVersion++);E.transceivers.forEach(function(Se,Ue){var Ze=Se.track,be=Se.kind,Ae=Se.mid||R.generateIdentifier();Se.mid=Ae,Se.iceGatherer||(Se.iceGatherer=E._createIceGatherer(Ue,E.usingBundle));var ye=S.RTCRtpSender.getCapabilities(be);x<15019&&(ye.codecs=ye.codecs.filter(function(st){return"rtx"!==st.name})),ye.codecs.forEach(function(st){"H264"===st.name&&void 0===st.parameters["level-asymmetry-allowed"]&&(st.parameters["level-asymmetry-allowed"]="1"),Se.remoteCapabilities&&Se.remoteCapabilities.codecs&&Se.remoteCapabilities.codecs.forEach(function(je){st.name.toLowerCase()===je.name.toLowerCase()&&st.clockRate===je.clockRate&&(st.preferredPayloadType=je.payloadType)})}),ye.headerExtensions.forEach(function(st){(Se.remoteCapabilities&&Se.remoteCapabilities.headerExtensions||[]).forEach(function(It){st.uri===It.uri&&(st.id=It.id)})});var ke=Se.sendEncodingParameters||[{ssrc:1001*(2*Ue+1)}];Ze&&x>=15019&&"video"===be&&!ke[0].rtx&&(ke[0].rtx={ssrc:ke[0].ssrc+1}),Se.wantReceive&&(Se.rtpReceiver=new S.RTCRtpReceiver(Se.dtlsTransport,be)),Se.localCapabilities=ye,Se.sendEncodingParameters=ke}),"max-compat"!==E._config.bundlePolicy&&(re+="a=group:BUNDLE "+E.transceivers.map(function(Se){return Se.mid}).join(" ")+"\r\n"),re+="a=ice-options:trickle\r\n",E.transceivers.forEach(function(Se,Ue){re+=te(Se,Se.localCapabilities,"offer",Se.stream,E._dtlsRole),re+="a=rtcp-rsize\r\n",Se.iceGatherer&&"new"!==E.iceGatheringState&&(0===Ue||!E.usingBundle)&&(Se.iceGatherer.getLocalCandidates().forEach(function(Ze){Ze.component=1,re+="a="+R.writeCandidate(Ze)+"\r\n"}),"completed"===Se.iceGatherer.state&&(re+="a=end-of-candidates\r\n"))});var ve=new S.RTCSessionDescription({type:"offer",sdp:re});return Promise.resolve(ve)},M.prototype.createAnswer=function(){var E=this;if(E._isClosed)return Promise.reject(T("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==E.signalingState&&"have-local-pranswer"!==E.signalingState)return Promise.reject(T("InvalidStateError","Can not call createAnswer in signalingState "+E.signalingState));var C=R.writeSessionBoilerplate(E._sdpSessionId,E._sdpSessionVersion++);E.usingBundle&&(C+="a=group:BUNDLE "+E.transceivers.map(function(re){return re.mid}).join(" ")+"\r\n"),C+="a=ice-options:trickle\r\n";var G=R.getMediaSections(E._remoteDescription.sdp).length;E.transceivers.forEach(function(re,ve){if(!(ve+1>G)){if(re.rejected)return"application"===re.kind?C+="DTLS/SCTP"===re.protocol?"m=application 0 DTLS/SCTP 5000\r\n":"m=application 0 "+re.protocol+" webrtc-datachannel\r\n":"audio"===re.kind?C+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===re.kind&&(C+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(C+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+re.mid+"\r\n");var Se;re.stream&&("audio"===re.kind?Se=re.stream.getAudioTracks()[0]:"video"===re.kind&&(Se=re.stream.getVideoTracks()[0]),Se&&x>=15019&&"video"===re.kind&&!re.sendEncodingParameters[0].rtx&&(re.sendEncodingParameters[0].rtx={ssrc:re.sendEncodingParameters[0].ssrc+1}));var Ue=X(re.localCapabilities,re.remoteCapabilities);!Ue.codecs.filter(function(be){return"rtx"===be.name.toLowerCase()}).length&&re.sendEncodingParameters[0].rtx&&delete re.sendEncodingParameters[0].rtx,C+=te(re,Ue,"answer",re.stream,E._dtlsRole),re.rtcpParameters&&re.rtcpParameters.reducedSize&&(C+="a=rtcp-rsize\r\n")}});var Y=new S.RTCSessionDescription({type:"answer",sdp:C});return Promise.resolve(Y)},M.prototype.addIceCandidate=function(E){var G,C=this;return E&&void 0===E.sdpMLineIndex&&!E.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(Y,re){if(!C._remoteDescription)return re(T("InvalidStateError","Can not add ICE candidate without a remote description"));if(E&&""!==E.candidate){var Se=E.sdpMLineIndex;if(E.sdpMid)for(var Ue=0;Ue<C.transceivers.length;Ue++)if(C.transceivers[Ue].mid===E.sdpMid){Se=Ue;break}var Ze=C.transceivers[Se];if(!Ze)return re(T("OperationError","Can not add ICE candidate"));if(Ze.rejected)return Y();var be=Object.keys(E.candidate).length>0?R.parseCandidate(E.candidate):{};if("tcp"===be.protocol&&(0===be.port||9===be.port)||be.component&&1!==be.component)return Y();if((0===Se||Se>0&&Ze.iceTransport!==C.transceivers[0].iceTransport)&&!B(Ze.iceTransport,be))return re(T("OperationError","Can not add ICE candidate"));var Ae=E.candidate.trim();0===Ae.indexOf("a=")&&(Ae=Ae.substr(2)),(G=R.getMediaSections(C._remoteDescription.sdp))[Se]+="a="+(be.type?Ae:"end-of-candidates")+"\r\n",C._remoteDescription.sdp=R.getDescription(C._remoteDescription.sdp)+G.join("")}else for(var ve=0;ve<C.transceivers.length&&(C.transceivers[ve].rejected||(C.transceivers[ve].iceTransport.addRemoteCandidate({}),(G=R.getMediaSections(C._remoteDescription.sdp))[ve]+="a=end-of-candidates\r\n",C._remoteDescription.sdp=R.getDescription(C._remoteDescription.sdp)+G.join(""),!C.usingBundle));ve++);Y()})},M.prototype.getStats=function(E){if(E&&E instanceof S.MediaStreamTrack){var C=null;if(this.transceivers.forEach(function(Y){Y.rtpSender&&Y.rtpSender.track===E?C=Y.rtpSender:Y.rtpReceiver&&Y.rtpReceiver.track===E&&(C=Y.rtpReceiver)}),!C)throw T("InvalidAccessError","Invalid selector.");return C.getStats()}var G=[];return this.transceivers.forEach(function(Y){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(re){Y[re]&&G.push(Y[re].getStats())})}),Promise.all(G).then(function(Y){var re=new Map;return Y.forEach(function(ve){ve.forEach(function(Se){re.set(Se.id,Se)})}),re})},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach(function(E){var C=S[E];if(C&&C.prototype&&C.prototype.getStats){var G=C.prototype.getStats;C.prototype.getStats=function(){return G.apply(this).then(function(Y){var re=new Map;return Object.keys(Y).forEach(function(ve){Y[ve].type=function(S){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[S.type]||S.type}(Y[ve]),re.set(ve,Y[ve])}),re})}}});var H=["createOffer","createAnswer"];return H.forEach(function(E){var C=M.prototype[E];M.prototype[E]=function(){var G=arguments;return"function"==typeof G[0]||"function"==typeof G[1]?C.apply(this,[arguments[2]]).then(function(Y){"function"==typeof G[0]&&G[0].apply(null,[Y])},function(Y){"function"==typeof G[1]&&G[1].apply(null,[Y])}):C.apply(this,arguments)}}),(H=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach(function(E){var C=M.prototype[E];M.prototype[E]=function(){var G=arguments;return"function"==typeof G[1]||"function"==typeof G[2]?C.apply(this,arguments).then(function(){"function"==typeof G[1]&&G[1].apply(null)},function(Y){"function"==typeof G[2]&&G[2].apply(null,[Y])}):C.apply(this,arguments)}}),["getStats"].forEach(function(E){var C=M.prototype[E];M.prototype[E]=function(){var G=arguments;return"function"==typeof G[1]?C.apply(this,arguments).then(function(){"function"==typeof G[1]&&G[1].apply(null)}):C.apply(this,arguments)}}),M}},390:Ke=>{"use strict";var j={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};j.localCName=j.generateIdentifier(),j.splitLines=function(I){return I.trim().split("\n").map(function(R){return R.trim()})},j.splitSections=function(I){return I.split("\nm=").map(function(U,te){return(te>0?"m="+U:U).trim()+"\r\n"})},j.getDescription=function(I){var R=j.splitSections(I);return R&&R[0]},j.getMediaSections=function(I){var R=j.splitSections(I);return R.shift(),R},j.matchPrefix=function(I,R){return j.splitLines(I).filter(function(U){return 0===U.indexOf(R)})},j.parseCandidate=function(I){for(var R,U={foundation:(R=0===I.indexOf("a=candidate:")?I.substring(12).split(" "):I.substring(10).split(" "))[0],component:parseInt(R[1],10),protocol:R[2].toLowerCase(),priority:parseInt(R[3],10),ip:R[4],address:R[4],port:parseInt(R[5],10),type:R[7]},te=8;te<R.length;te+=2)switch(R[te]){case"raddr":U.relatedAddress=R[te+1];break;case"rport":U.relatedPort=parseInt(R[te+1],10);break;case"tcptype":U.tcpType=R[te+1];break;case"ufrag":U.ufrag=R[te+1],U.usernameFragment=R[te+1];break;default:U[R[te]]=R[te+1]}return U},j.writeCandidate=function(I){var R=[];R.push(I.foundation),R.push(I.component),R.push(I.protocol.toUpperCase()),R.push(I.priority),R.push(I.address||I.ip),R.push(I.port);var U=I.type;return R.push("typ"),R.push(U),"host"!==U&&I.relatedAddress&&I.relatedPort&&(R.push("raddr"),R.push(I.relatedAddress),R.push("rport"),R.push(I.relatedPort)),I.tcpType&&"tcp"===I.protocol.toLowerCase()&&(R.push("tcptype"),R.push(I.tcpType)),(I.usernameFragment||I.ufrag)&&(R.push("ufrag"),R.push(I.usernameFragment||I.ufrag)),"candidate:"+R.join(" ")},j.parseIceOptions=function(I){return I.substr(14).split(" ")},j.parseRtpMap=function(I){var R=I.substr(9).split(" "),U={payloadType:parseInt(R.shift(),10)};return R=R[0].split("/"),U.name=R[0],U.clockRate=parseInt(R[1],10),U.channels=3===R.length?parseInt(R[2],10):1,U.numChannels=U.channels,U},j.writeRtpMap=function(I){var R=I.payloadType;void 0!==I.preferredPayloadType&&(R=I.preferredPayloadType);var U=I.channels||I.numChannels||1;return"a=rtpmap:"+R+" "+I.name+"/"+I.clockRate+(1!==U?"/"+U:"")+"\r\n"},j.parseExtmap=function(I){var R=I.substr(9).split(" ");return{id:parseInt(R[0],10),direction:R[0].indexOf("/")>0?R[0].split("/")[1]:"sendrecv",uri:R[1]}},j.writeExtmap=function(I){return"a=extmap:"+(I.id||I.preferredId)+(I.direction&&"sendrecv"!==I.direction?"/"+I.direction:"")+" "+I.uri+"\r\n"},j.parseFmtp=function(I){for(var U,R={},te=I.substr(I.indexOf(" ")+1).split(";"),A=0;A<te.length;A++)R[(U=te[A].trim().split("="))[0].trim()]=U[1];return R},j.writeFmtp=function(I){var R="",U=I.payloadType;if(void 0!==I.preferredPayloadType&&(U=I.preferredPayloadType),I.parameters&&Object.keys(I.parameters).length){var te=[];Object.keys(I.parameters).forEach(function(A){te.push(I.parameters[A]?A+"="+I.parameters[A]:A)}),R+="a=fmtp:"+U+" "+te.join(";")+"\r\n"}return R},j.parseRtcpFb=function(I){var R=I.substr(I.indexOf(" ")+1).split(" ");return{type:R.shift(),parameter:R.join(" ")}},j.writeRtcpFb=function(I){var R="",U=I.payloadType;return void 0!==I.preferredPayloadType&&(U=I.preferredPayloadType),I.rtcpFeedback&&I.rtcpFeedback.length&&I.rtcpFeedback.forEach(function(te){R+="a=rtcp-fb:"+U+" "+te.type+(te.parameter&&te.parameter.length?" "+te.parameter:"")+"\r\n"}),R},j.parseSsrcMedia=function(I){var R=I.indexOf(" "),U={ssrc:parseInt(I.substr(7,R-7),10)},te=I.indexOf(":",R);return te>-1?(U.attribute=I.substr(R+1,te-R-1),U.value=I.substr(te+1)):U.attribute=I.substr(R+1),U},j.parseSsrcGroup=function(I){var R=I.substr(13).split(" ");return{semantics:R.shift(),ssrcs:R.map(function(U){return parseInt(U,10)})}},j.getMid=function(I){var R=j.matchPrefix(I,"a=mid:")[0];if(R)return R.substr(6)},j.parseFingerprint=function(I){var R=I.substr(14).split(" ");return{algorithm:R[0].toLowerCase(),value:R[1]}},j.getDtlsParameters=function(I,R){return{role:"auto",fingerprints:j.matchPrefix(I+R,"a=fingerprint:").map(j.parseFingerprint)}},j.writeDtlsParameters=function(I,R){var U="a=setup:"+R+"\r\n";return I.fingerprints.forEach(function(te){U+="a=fingerprint:"+te.algorithm+" "+te.value+"\r\n"}),U},j.parseCryptoLine=function(I){var R=I.substr(9).split(" ");return{tag:parseInt(R[0],10),cryptoSuite:R[1],keyParams:R[2],sessionParams:R.slice(3)}},j.writeCryptoLine=function(I){return"a=crypto:"+I.tag+" "+I.cryptoSuite+" "+("object"==typeof I.keyParams?j.writeCryptoKeyParams(I.keyParams):I.keyParams)+(I.sessionParams?" "+I.sessionParams.join(" "):"")+"\r\n"},j.parseCryptoKeyParams=function(I){if(0!==I.indexOf("inline:"))return null;var R=I.substr(7).split("|");return{keyMethod:"inline",keySalt:R[0],lifeTime:R[1],mkiValue:R[2]?R[2].split(":")[0]:void 0,mkiLength:R[2]?R[2].split(":")[1]:void 0}},j.writeCryptoKeyParams=function(I){return I.keyMethod+":"+I.keySalt+(I.lifeTime?"|"+I.lifeTime:"")+(I.mkiValue&&I.mkiLength?"|"+I.mkiValue+":"+I.mkiLength:"")},j.getCryptoParameters=function(I,R){return j.matchPrefix(I+R,"a=crypto:").map(j.parseCryptoLine)},j.getIceParameters=function(I,R){var U=j.matchPrefix(I+R,"a=ice-ufrag:")[0],te=j.matchPrefix(I+R,"a=ice-pwd:")[0];return U&&te?{usernameFragment:U.substr(12),password:te.substr(10)}:null},j.writeIceParameters=function(I){return"a=ice-ufrag:"+I.usernameFragment+"\r\na=ice-pwd:"+I.password+"\r\n"},j.parseRtpParameters=function(I){for(var R={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},te=j.splitLines(I)[0].split(" "),A=3;A<te.length;A++){var X=te[A],W=j.matchPrefix(I,"a=rtpmap:"+X+" ")[0];if(W){var B=j.parseRtpMap(W),T=j.matchPrefix(I,"a=fmtp:"+X+" ");switch(B.parameters=T.length?j.parseFmtp(T[0]):{},B.rtcpFeedback=j.matchPrefix(I,"a=rtcp-fb:"+X+" ").map(j.parseRtcpFb),R.codecs.push(B),B.name.toUpperCase()){case"RED":case"ULPFEC":R.fecMechanisms.push(B.name.toUpperCase())}}}return j.matchPrefix(I,"a=extmap:").forEach(function(S){R.headerExtensions.push(j.parseExtmap(S))}),R},j.writeRtpDescription=function(I,R){var U="";U+="m="+I+" ",U+=R.codecs.length>0?"9":"0",U+=" UDP/TLS/RTP/SAVPF ",U+=R.codecs.map(function(A){return void 0!==A.preferredPayloadType?A.preferredPayloadType:A.payloadType}).join(" ")+"\r\n",U+="c=IN IP4 0.0.0.0\r\n",U+="a=rtcp:9 IN IP4 0.0.0.0\r\n",R.codecs.forEach(function(A){U+=j.writeRtpMap(A),U+=j.writeFmtp(A),U+=j.writeRtcpFb(A)});var te=0;return R.codecs.forEach(function(A){A.maxptime>te&&(te=A.maxptime)}),te>0&&(U+="a=maxptime:"+te+"\r\n"),U+="a=rtcp-mux\r\n",R.headerExtensions&&R.headerExtensions.forEach(function(A){U+=j.writeExtmap(A)}),U},j.parseRtpEncodingParameters=function(I){var B,R=[],U=j.parseRtpParameters(I),te=-1!==U.fecMechanisms.indexOf("RED"),A=-1!==U.fecMechanisms.indexOf("ULPFEC"),X=j.matchPrefix(I,"a=ssrc:").map(function(x){return j.parseSsrcMedia(x)}).filter(function(x){return"cname"===x.attribute}),W=X.length>0&&X[0].ssrc,T=j.matchPrefix(I,"a=ssrc-group:FID").map(function(x){return x.substr(17).split(" ").map(function(O){return parseInt(O,10)})});T.length>0&&T[0].length>1&&T[0][0]===W&&(B=T[0][1]),U.codecs.forEach(function(x){if("RTX"===x.name.toUpperCase()&&x.parameters.apt){var V={ssrc:W,codecPayloadType:parseInt(x.parameters.apt,10)};W&&B&&(V.rtx={ssrc:B}),R.push(V),te&&((V=JSON.parse(JSON.stringify(V))).fec={ssrc:W,mechanism:A?"red+ulpfec":"red"},R.push(V))}}),0===R.length&&W&&R.push({ssrc:W});var S=j.matchPrefix(I,"b=");return S.length&&(S=0===S[0].indexOf("b=TIAS:")?parseInt(S[0].substr(7),10):0===S[0].indexOf("b=AS:")?1e3*parseInt(S[0].substr(5),10)*.95-16e3:void 0,R.forEach(function(x){x.maxBitrate=S})),R},j.parseRtcpParameters=function(I){var R={},U=j.matchPrefix(I,"a=ssrc:").map(function(X){return j.parseSsrcMedia(X)}).filter(function(X){return"cname"===X.attribute})[0];U&&(R.cname=U.value,R.ssrc=U.ssrc);var te=j.matchPrefix(I,"a=rtcp-rsize");R.reducedSize=te.length>0,R.compound=0===te.length;var A=j.matchPrefix(I,"a=rtcp-mux");return R.mux=A.length>0,R},j.parseMsid=function(I){var R,U=j.matchPrefix(I,"a=msid:");if(1===U.length)return{stream:(R=U[0].substr(7).split(" "))[0],track:R[1]};var te=j.matchPrefix(I,"a=ssrc:").map(function(A){return j.parseSsrcMedia(A)}).filter(function(A){return"msid"===A.attribute});return te.length>0?{stream:(R=te[0].value.split(" "))[0],track:R[1]}:void 0},j.parseSctpDescription=function(I){var te,R=j.parseMLine(I),U=j.matchPrefix(I,"a=max-message-size:");U.length>0&&(te=parseInt(U[0].substr(19),10)),isNaN(te)&&(te=65536);var A=j.matchPrefix(I,"a=sctp-port:");if(A.length>0)return{port:parseInt(A[0].substr(12),10),protocol:R.fmt,maxMessageSize:te};if(j.matchPrefix(I,"a=sctpmap:").length>0){var W=j.matchPrefix(I,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(W[0],10),protocol:W[1],maxMessageSize:te}}},j.writeSctpDescription=function(I,R){var U=[];return U="DTLS/SCTP"!==I.protocol?["m="+I.kind+" 9 "+I.protocol+" "+R.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+R.port+"\r\n"]:["m="+I.kind+" 9 "+I.protocol+" "+R.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+R.port+" "+R.protocol+" 65535\r\n"],void 0!==R.maxMessageSize&&U.push("a=max-message-size:"+R.maxMessageSize+"\r\n"),U.join("")},j.generateSessionId=function(){return Math.random().toString().substr(2,21)},j.writeSessionBoilerplate=function(I,R,U){var A=void 0!==R?R:2;return"v=0\r\no="+(U||"thisisadapterortc")+" "+(I||j.generateSessionId())+" "+A+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},j.writeMediaSection=function(I,R,U,te){var A=j.writeRtpDescription(I.kind,R);if(A+=j.writeIceParameters(I.iceGatherer.getLocalParameters()),A+=j.writeDtlsParameters(I.dtlsTransport.getLocalParameters(),"offer"===U?"actpass":"active"),A+="a=mid:"+I.mid+"\r\n",A+=I.direction?"a="+I.direction+"\r\n":I.rtpSender&&I.rtpReceiver?"a=sendrecv\r\n":I.rtpSender?"a=sendonly\r\n":I.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",I.rtpSender){var X="msid:"+te.id+" "+I.rtpSender.track.id+"\r\n";A+="a="+X,A+="a=ssrc:"+I.sendEncodingParameters[0].ssrc+" "+X,I.sendEncodingParameters[0].rtx&&(A+="a=ssrc:"+I.sendEncodingParameters[0].rtx.ssrc+" "+X,A+="a=ssrc-group:FID "+I.sendEncodingParameters[0].ssrc+" "+I.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return A+="a=ssrc:"+I.sendEncodingParameters[0].ssrc+" cname:"+j.localCName+"\r\n",I.rtpSender&&I.sendEncodingParameters[0].rtx&&(A+="a=ssrc:"+I.sendEncodingParameters[0].rtx.ssrc+" cname:"+j.localCName+"\r\n"),A},j.getDirection=function(I,R){for(var U=j.splitLines(I),te=0;te<U.length;te++)switch(U[te]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return U[te].substr(2)}return R?j.getDirection(R):"sendrecv"},j.getKind=function(I){return j.splitLines(I)[0].split(" ")[0].substr(2)},j.isRejected=function(I){return"0"===I.split(" ",2)[1]},j.parseMLine=function(I){var U=j.splitLines(I)[0].substr(2).split(" ");return{kind:U[0],port:parseInt(U[1],10),protocol:U[2],fmt:U.slice(3).join(" ")}},j.parseOLine=function(I){var U=j.matchPrefix(I,"o=")[0].substr(2).split(" ");return{username:U[0],sessionId:U[1],sessionVersion:parseInt(U[2],10),netType:U[3],addressType:U[4],address:U[5]}},j.isValidSDP=function(I){if("string"!=typeof I||0===I.length)return!1;for(var R=j.splitLines(I),U=0;U<R.length;U++)if(R[U].length<2||"="!==R[U].charAt(1))return!1;return!0},Ke.exports=j},958:(Ke,j,I)=>{"use strict";I.r(j),I.d(j,{default:()=>Ys});var R={};I.r(R),I.d(R,{fixNegotiationNeeded:()=>st,shimAddTrackRemoveTrack:()=>ye,shimAddTrackRemoveTrackWithNative:()=>Ae,shimGetDisplayMedia:()=>re,shimGetSendersWithDtmf:()=>Ue,shimGetStats:()=>Ze,shimGetUserMedia:()=>Y,shimMediaStream:()=>ve,shimOnTrack:()=>Se,shimPeerConnection:()=>ke,shimSenderReceiverGetStats:()=>be});var U={};I.r(U),I.d(U,{shimGetDisplayMedia:()=>He,shimGetUserMedia:()=>Kr,shimPeerConnection:()=>or,shimReplaceTrack:()=>In});var te={};I.r(te),I.d(te,{shimAddTransceiver:()=>Pn,shimCreateAnswer:()=>ar,shimCreateOffer:()=>Nn,shimGetDisplayMedia:()=>Ie,shimGetParameters:()=>Xi,shimGetUserMedia:()=>Ji,shimOnTrack:()=>Ar,shimPeerConnection:()=>kn,shimRTCDataChannel:()=>Si,shimReceiverGetStats:()=>fn,shimRemoveStream:()=>Rr,shimSenderGetStats:()=>sr});var A={};I.r(A),I.d(A,{shimAudioContext:()=>cr,shimCallbacksAPI:()=>Jr,shimConstraints:()=>Ut,shimCreateOfferLegacy:()=>Yt,shimGetUserMedia:()=>Wn,shimLocalStreamsAPI:()=>ut,shimRTCIceServerUrls:()=>Ro,shimRemoteStreamsAPI:()=>Et,shimTrackEventTransceiver:()=>Xr});var X={};I.r(X),I.d(X,{removeExtmapAllowMixed:()=>Oo,shimAddIceCandidateNullOrEmpty:()=>Ti,shimConnectionState:()=>Zr,shimMaxMessageSize:()=>ur,shimRTCIceCandidate:()=>Or,shimSendThrowTypeError:()=>wi});let W=!0,B=!0;function T(_,z,oe){const N=_.match(z);return N&&N.length>=oe&&parseInt(N[oe],10)}function S(_,z,oe){if(!_.RTCPeerConnection)return;const N=_.RTCPeerConnection.prototype,K=N.addEventListener;N.addEventListener=function(ee,ne){if(ee!==z)return K.apply(this,arguments);const ae=pe=>{const ge=oe(pe);ge&&(ne.handleEvent?ne.handleEvent(ge):ne(ge))};return this._eventMap=this._eventMap||{},this._eventMap[z]||(this._eventMap[z]=new Map),this._eventMap[z].set(ne,ae),K.apply(this,[ee,ae])};const le=N.removeEventListener;N.removeEventListener=function(ee,ne){if(ee!==z||!this._eventMap||!this._eventMap[z])return le.apply(this,arguments);if(!this._eventMap[z].has(ne))return le.apply(this,arguments);const ae=this._eventMap[z].get(ne);return this._eventMap[z].delete(ne),0===this._eventMap[z].size&&delete this._eventMap[z],0===Object.keys(this._eventMap).length&&delete this._eventMap,le.apply(this,[ee,ae])},Object.defineProperty(N,"on"+z,{get(){return this["_on"+z]},set(ee){this["_on"+z]&&(this.removeEventListener(z,this["_on"+z]),delete this["_on"+z]),ee&&this.addEventListener(z,this["_on"+z]=ee)},enumerable:!0,configurable:!0})}function x(_){return"boolean"!=typeof _?new Error("Argument type: "+typeof _+". Please use a boolean."):(W=_,_?"adapter.js logging disabled":"adapter.js logging enabled")}function V(_){return"boolean"!=typeof _?new Error("Argument type: "+typeof _+". Please use a boolean."):(B=!_,"adapter.js deprecation warnings "+(_?"disabled":"enabled"))}function O(){if("object"==typeof window){if(W)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function J(_,z){!B||console.warn(_+" is deprecated, please use "+z+" instead.")}function $(_){return"[object Object]"===Object.prototype.toString.call(_)}function H(_){return $(_)?Object.keys(_).reduce(function(z,oe){const N=$(_[oe]),K=N?H(_[oe]):_[oe],le=N&&!Object.keys(K).length;return void 0===K||le?z:Object.assign(z,{[oe]:K})},{}):_}function E(_,z,oe){!z||oe.has(z.id)||(oe.set(z.id,z),Object.keys(z).forEach(N=>{N.endsWith("Id")?E(_,_.get(z[N]),oe):N.endsWith("Ids")&&z[N].forEach(K=>{E(_,_.get(K),oe)})}))}function C(_,z,oe){const N=oe?"outbound-rtp":"inbound-rtp",K=new Map;if(null===z)return K;const le=[];return _.forEach(ee=>{"track"===ee.type&&ee.trackIdentifier===z.id&&le.push(ee)}),le.forEach(ee=>{_.forEach(ne=>{ne.type===N&&ne.trackId===ee.id&&E(_,ne,K)})}),K}const G=O;function Y(_,z){const oe=_&&_.navigator;if(!oe.mediaDevices)return;const N=function(ne){if("object"!=typeof ne||ne.mandatory||ne.optional)return ne;const ae={};return Object.keys(ne).forEach(pe=>{if("require"===pe||"advanced"===pe||"mediaSource"===pe)return;const ge="object"==typeof ne[pe]?ne[pe]:{ideal:ne[pe]};void 0!==ge.exact&&"number"==typeof ge.exact&&(ge.min=ge.max=ge.exact);const _e=function(de,it){return de?de+it.charAt(0).toUpperCase()+it.slice(1):"deviceId"===it?"sourceId":it};if(void 0!==ge.ideal){ae.optional=ae.optional||[];let de={};"number"==typeof ge.ideal?(de[_e("min",pe)]=ge.ideal,ae.optional.push(de),de={},de[_e("max",pe)]=ge.ideal,ae.optional.push(de)):(de[_e("",pe)]=ge.ideal,ae.optional.push(de))}void 0!==ge.exact&&"number"!=typeof ge.exact?(ae.mandatory=ae.mandatory||{},ae.mandatory[_e("",pe)]=ge.exact):["min","max"].forEach(de=>{void 0!==ge[de]&&(ae.mandatory=ae.mandatory||{},ae.mandatory[_e(de,pe)]=ge[de])})}),ne.advanced&&(ae.optional=(ae.optional||[]).concat(ne.advanced)),ae},K=function(ne,ae){if(z.version>=61)return ae(ne);if((ne=JSON.parse(JSON.stringify(ne)))&&"object"==typeof ne.audio){const pe=function(ge,_e,de){_e in ge&&!(de in ge)&&(ge[de]=ge[_e],delete ge[_e])};pe((ne=JSON.parse(JSON.stringify(ne))).audio,"autoGainControl","googAutoGainControl"),pe(ne.audio,"noiseSuppression","googNoiseSuppression"),ne.audio=N(ne.audio)}if(ne&&"object"==typeof ne.video){let pe=ne.video.facingMode;pe=pe&&("object"==typeof pe?pe:{ideal:pe});const ge=z.version<66;if(pe&&("user"===pe.exact||"environment"===pe.exact||"user"===pe.ideal||"environment"===pe.ideal)&&(!oe.mediaDevices.getSupportedConstraints||!oe.mediaDevices.getSupportedConstraints().facingMode||ge)){let _e;if(delete ne.video.facingMode,"environment"===pe.exact||"environment"===pe.ideal?_e=["back","rear"]:("user"===pe.exact||"user"===pe.ideal)&&(_e=["front"]),_e)return oe.mediaDevices.enumerateDevices().then(de=>{let it=(de=de.filter(kt=>"videoinput"===kt.kind)).find(kt=>_e.some(Nt=>kt.label.toLowerCase().includes(Nt)));return!it&&de.length&&_e.includes("back")&&(it=de[de.length-1]),it&&(ne.video.deviceId=pe.exact?{exact:it.deviceId}:{ideal:it.deviceId}),ne.video=N(ne.video),G("chrome: "+JSON.stringify(ne)),ae(ne)})}ne.video=N(ne.video)}return G("chrome: "+JSON.stringify(ne)),ae(ne)},le=function(ne){return z.version>=64?ne:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[ne.name]||ne.name,message:ne.message,constraint:ne.constraint||ne.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(oe.getUserMedia=function(ne,ae,pe){K(ne,ge=>{oe.webkitGetUserMedia(ge,ae,_e=>{pe&&pe(le(_e))})})}.bind(oe),oe.mediaDevices.getUserMedia){const ne=oe.mediaDevices.getUserMedia.bind(oe.mediaDevices);oe.mediaDevices.getUserMedia=function(ae){return K(ae,pe=>ne(pe).then(ge=>{if(pe.audio&&!ge.getAudioTracks().length||pe.video&&!ge.getVideoTracks().length)throw ge.getTracks().forEach(_e=>{_e.stop()}),new DOMException("","NotFoundError");return ge},ge=>Promise.reject(le(ge))))}}}function re(_,z){if((!_.navigator.mediaDevices||!("getDisplayMedia"in _.navigator.mediaDevices))&&_.navigator.mediaDevices){if("function"!=typeof z)return void console.error("shimGetDisplayMedia: getSourceId argument is not a function");_.navigator.mediaDevices.getDisplayMedia=function(N){return z(N).then(K=>{const le=N.video&&N.video.width,ee=N.video&&N.video.height;return N.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:K,maxFrameRate:N.video&&N.video.frameRate||3}},le&&(N.video.mandatory.maxWidth=le),ee&&(N.video.mandatory.maxHeight=ee),_.navigator.mediaDevices.getUserMedia(N)})}}}function ve(_){_.MediaStream=_.MediaStream||_.webkitMediaStream}function Se(_){if("object"==typeof _&&_.RTCPeerConnection&&!("ontrack"in _.RTCPeerConnection.prototype)){Object.defineProperty(_.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(oe){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=oe)},enumerable:!0,configurable:!0});const z=_.RTCPeerConnection.prototype.setRemoteDescription;_.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=N=>{N.stream.addEventListener("addtrack",K=>{let le;le=_.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(ne=>ne.track&&ne.track.id===K.track.id):{track:K.track};const ee=new Event("track");ee.track=K.track,ee.receiver=le,ee.transceiver={receiver:le},ee.streams=[N.stream],this.dispatchEvent(ee)}),N.stream.getTracks().forEach(K=>{let le;le=_.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(ne=>ne.track&&ne.track.id===K.id):{track:K};const ee=new Event("track");ee.track=K,ee.receiver=le,ee.transceiver={receiver:le},ee.streams=[N.stream],this.dispatchEvent(ee)})},this.addEventListener("addstream",this._ontrackpoly)),z.apply(this,arguments)}}else S(_,"track",z=>(z.transceiver||Object.defineProperty(z,"transceiver",{value:{receiver:z.receiver}}),z))}function Ue(_){if("object"==typeof _&&_.RTCPeerConnection&&!("getSenders"in _.RTCPeerConnection.prototype)&&"createDTMFSender"in _.RTCPeerConnection.prototype){const z=function(K,le){return{track:le,get dtmf(){return void 0===this._dtmf&&(this._dtmf="audio"===le.kind?K.createDTMFSender(le):null),this._dtmf},_pc:K}};if(!_.RTCPeerConnection.prototype.getSenders){_.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const K=_.RTCPeerConnection.prototype.addTrack;_.RTCPeerConnection.prototype.addTrack=function(ne,ae){let pe=K.apply(this,arguments);return pe||(pe=z(this,ne),this._senders.push(pe)),pe};const le=_.RTCPeerConnection.prototype.removeTrack;_.RTCPeerConnection.prototype.removeTrack=function(ne){le.apply(this,arguments);const ae=this._senders.indexOf(ne);-1!==ae&&this._senders.splice(ae,1)}}const oe=_.RTCPeerConnection.prototype.addStream;_.RTCPeerConnection.prototype.addStream=function(le){this._senders=this._senders||[],oe.apply(this,[le]),le.getTracks().forEach(ee=>{this._senders.push(z(this,ee))})};const N=_.RTCPeerConnection.prototype.removeStream;_.RTCPeerConnection.prototype.removeStream=function(le){this._senders=this._senders||[],N.apply(this,[le]),le.getTracks().forEach(ee=>{const ne=this._senders.find(ae=>ae.track===ee);ne&&this._senders.splice(this._senders.indexOf(ne),1)})}}else if("object"==typeof _&&_.RTCPeerConnection&&"getSenders"in _.RTCPeerConnection.prototype&&"createDTMFSender"in _.RTCPeerConnection.prototype&&_.RTCRtpSender&&!("dtmf"in _.RTCRtpSender.prototype)){const z=_.RTCPeerConnection.prototype.getSenders;_.RTCPeerConnection.prototype.getSenders=function(){const N=z.apply(this,[]);return N.forEach(K=>K._pc=this),N},Object.defineProperty(_.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&(this._dtmf="audio"===this.track.kind?this._pc.createDTMFSender(this.track):null),this._dtmf}})}}function Ze(_){if(!_.RTCPeerConnection)return;const z=_.RTCPeerConnection.prototype.getStats;_.RTCPeerConnection.prototype.getStats=function(){const[N,K,le]=arguments;if(arguments.length>0&&"function"==typeof N)return z.apply(this,arguments);if(0===z.length&&(0===arguments.length||"function"!=typeof N))return z.apply(this,[]);const ee=function(ae){const pe={};return ae.result().forEach(_e=>{const de={id:_e.id,timestamp:_e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[_e.type]||_e.type};_e.names().forEach(it=>{de[it]=_e.stat(it)}),pe[de.id]=de}),pe},ne=function(ae){return new Map(Object.keys(ae).map(pe=>[pe,ae[pe]]))};return arguments.length>=2?z.apply(this,[function(pe){K(ne(ee(pe)))},N]):new Promise((ae,pe)=>{z.apply(this,[function(ge){ae(ne(ee(ge)))},pe])}).then(K,le)}}function be(_){if(!("object"==typeof _&&_.RTCPeerConnection&&_.RTCRtpSender&&_.RTCRtpReceiver))return;if(!("getStats"in _.RTCRtpSender.prototype)){const oe=_.RTCPeerConnection.prototype.getSenders;oe&&(_.RTCPeerConnection.prototype.getSenders=function(){const le=oe.apply(this,[]);return le.forEach(ee=>ee._pc=this),le});const N=_.RTCPeerConnection.prototype.addTrack;N&&(_.RTCPeerConnection.prototype.addTrack=function(){const le=N.apply(this,arguments);return le._pc=this,le}),_.RTCRtpSender.prototype.getStats=function(){const le=this;return this._pc.getStats().then(ee=>C(ee,le.track,!0))}}if(!("getStats"in _.RTCRtpReceiver.prototype)){const oe=_.RTCPeerConnection.prototype.getReceivers;oe&&(_.RTCPeerConnection.prototype.getReceivers=function(){const K=oe.apply(this,[]);return K.forEach(le=>le._pc=this),K}),S(_,"track",N=>(N.receiver._pc=N.srcElement,N)),_.RTCRtpReceiver.prototype.getStats=function(){const K=this;return this._pc.getStats().then(le=>C(le,K.track,!1))}}if(!("getStats"in _.RTCRtpSender.prototype)||!("getStats"in _.RTCRtpReceiver.prototype))return;const z=_.RTCPeerConnection.prototype.getStats;_.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof _.MediaStreamTrack){const N=arguments[0];let K,le,ee;return this.getSenders().forEach(ne=>{ne.track===N&&(K?ee=!0:K=ne)}),this.getReceivers().forEach(ne=>(ne.track===N&&(le?ee=!0:le=ne),ne.track===N)),ee||K&&le?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):K?K.getStats():le?le.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return z.apply(this,arguments)}}function Ae(_){_.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(ee=>this._shimmedLocalStreams[ee][0])};const z=_.RTCPeerConnection.prototype.addTrack;_.RTCPeerConnection.prototype.addTrack=function(ee,ne){if(!ne)return z.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const ae=z.apply(this,arguments);return this._shimmedLocalStreams[ne.id]?-1===this._shimmedLocalStreams[ne.id].indexOf(ae)&&this._shimmedLocalStreams[ne.id].push(ae):this._shimmedLocalStreams[ne.id]=[ne,ae],ae};const oe=_.RTCPeerConnection.prototype.addStream;_.RTCPeerConnection.prototype.addStream=function(ee){this._shimmedLocalStreams=this._shimmedLocalStreams||{},ee.getTracks().forEach(pe=>{if(this.getSenders().find(_e=>_e.track===pe))throw new DOMException("Track already exists.","InvalidAccessError")});const ne=this.getSenders();oe.apply(this,arguments);const ae=this.getSenders().filter(pe=>-1===ne.indexOf(pe));this._shimmedLocalStreams[ee.id]=[ee].concat(ae)};const N=_.RTCPeerConnection.prototype.removeStream;_.RTCPeerConnection.prototype.removeStream=function(ee){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[ee.id],N.apply(this,arguments)};const K=_.RTCPeerConnection.prototype.removeTrack;_.RTCPeerConnection.prototype.removeTrack=function(ee){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},ee&&Object.keys(this._shimmedLocalStreams).forEach(ne=>{const ae=this._shimmedLocalStreams[ne].indexOf(ee);-1!==ae&&this._shimmedLocalStreams[ne].splice(ae,1),1===this._shimmedLocalStreams[ne].length&&delete this._shimmedLocalStreams[ne]}),K.apply(this,arguments)}}function ye(_,z){if(!_.RTCPeerConnection)return;if(_.RTCPeerConnection.prototype.addTrack&&z.version>=65)return Ae(_);const oe=_.RTCPeerConnection.prototype.getLocalStreams;_.RTCPeerConnection.prototype.getLocalStreams=function(){const ge=oe.apply(this);return this._reverseStreams=this._reverseStreams||{},ge.map(_e=>this._reverseStreams[_e.id])};const N=_.RTCPeerConnection.prototype.addStream;_.RTCPeerConnection.prototype.addStream=function(ge){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},ge.getTracks().forEach(_e=>{if(this.getSenders().find(it=>it.track===_e))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[ge.id]){const _e=new _.MediaStream(ge.getTracks());this._streams[ge.id]=_e,this._reverseStreams[_e.id]=ge,ge=_e}N.apply(this,[ge])};const K=_.RTCPeerConnection.prototype.removeStream;function le(pe,ge){let _e=ge.sdp;return Object.keys(pe._reverseStreams||[]).forEach(de=>{const it=pe._reverseStreams[de];_e=_e.replace(new RegExp(pe._streams[it.id].id,"g"),it.id)}),new RTCSessionDescription({type:ge.type,sdp:_e})}function ee(pe,ge){let _e=ge.sdp;return Object.keys(pe._reverseStreams||[]).forEach(de=>{const it=pe._reverseStreams[de],kt=pe._streams[it.id];_e=_e.replace(new RegExp(it.id,"g"),kt.id)}),new RTCSessionDescription({type:ge.type,sdp:_e})}_.RTCPeerConnection.prototype.removeStream=function(ge){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},K.apply(this,[this._streams[ge.id]||ge]),delete this._reverseStreams[this._streams[ge.id]?this._streams[ge.id].id:ge.id],delete this._streams[ge.id]},_.RTCPeerConnection.prototype.addTrack=function(ge,_e){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const de=[].slice.call(arguments,1);if(1!==de.length||!de[0].getTracks().find(Nt=>Nt===ge))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(Nt=>Nt.track===ge))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const kt=this._streams[_e.id];if(kt)kt.addTrack(ge),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const Nt=new _.MediaStream([ge]);this._streams[_e.id]=Nt,this._reverseStreams[Nt.id]=_e,this.addStream(Nt)}return this.getSenders().find(Nt=>Nt.track===ge)},["createOffer","createAnswer"].forEach(function(pe){const ge=_.RTCPeerConnection.prototype[pe];_.RTCPeerConnection.prototype[pe]={[pe](){const de=arguments;return arguments.length&&"function"==typeof arguments[0]?ge.apply(this,[kt=>{const Nt=le(this,kt);de[0].apply(null,[Nt])},kt=>{de[1]&&de[1].apply(null,kt)},arguments[2]]):ge.apply(this,arguments).then(kt=>le(this,kt))}}[pe]});const ne=_.RTCPeerConnection.prototype.setLocalDescription;_.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=ee(this,arguments[0]),ne.apply(this,arguments)):ne.apply(this,arguments)};const ae=Object.getOwnPropertyDescriptor(_.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(_.RTCPeerConnection.prototype,"localDescription",{get(){const pe=ae.get.apply(this);return""===pe.type?pe:le(this,pe)}}),_.RTCPeerConnection.prototype.removeTrack=function(ge){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!ge._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(ge._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let de;this._streams=this._streams||{},Object.keys(this._streams).forEach(it=>{this._streams[it].getTracks().find(Nt=>ge.track===Nt)&&(de=this._streams[it])}),de&&(1===de.getTracks().length?this.removeStream(this._reverseStreams[de.id]):de.removeTrack(ge.track),this.dispatchEvent(new Event("negotiationneeded")))}}function ke(_,z){!_.RTCPeerConnection&&_.webkitRTCPeerConnection&&(_.RTCPeerConnection=_.webkitRTCPeerConnection),_.RTCPeerConnection&&z.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(oe){const N=_.RTCPeerConnection.prototype[oe];_.RTCPeerConnection.prototype[oe]={[oe](){return arguments[0]=new("addIceCandidate"===oe?_.RTCIceCandidate:_.RTCSessionDescription)(arguments[0]),N.apply(this,arguments)}}[oe]})}function st(_,z){S(_,"negotiationneeded",oe=>{const N=oe.target;if(!(z.version<72||N.getConfiguration&&"plan-b"===N.getConfiguration().sdpSemantics)||"stable"===N.signalingState)return oe})}var It=I(535),Pt=I.n(It);function Kr(_){const z=_&&_.navigator,N=z.mediaDevices.getUserMedia.bind(z.mediaDevices);z.mediaDevices.getUserMedia=function(K){return N(K).catch(le=>Promise.reject(function(K){return{name:{PermissionDeniedError:"NotAllowedError"}[K.name]||K.name,message:K.message,constraint:K.constraint,toString(){return this.name}}}(le)))}}function He(_){"getDisplayMedia"in _.navigator&&(!_.navigator.mediaDevices||_.navigator.mediaDevices&&"getDisplayMedia"in _.navigator.mediaDevices||(_.navigator.mediaDevices.getDisplayMedia=_.navigator.getDisplayMedia.bind(_.navigator)))}function or(_,z){if(_.RTCIceGatherer&&(_.RTCIceCandidate||(_.RTCIceCandidate=function(K){return K}),_.RTCSessionDescription||(_.RTCSessionDescription=function(K){return K}),z.version<15025)){const N=Object.getOwnPropertyDescriptor(_.MediaStreamTrack.prototype,"enabled");Object.defineProperty(_.MediaStreamTrack.prototype,"enabled",{set(K){N.set.call(this,K);const le=new Event("enabled");le.enabled=K,this.dispatchEvent(le)}})}_.RTCRtpSender&&!("dtmf"in _.RTCRtpSender.prototype)&&Object.defineProperty(_.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new _.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),_.RTCDtmfSender&&!_.RTCDTMFSender&&(_.RTCDTMFSender=_.RTCDtmfSender);const oe=Pt()(_,z.version);_.RTCPeerConnection=function(K){return K&&K.iceServers&&(K.iceServers=function(_,z){let oe=!1;return(_=JSON.parse(JSON.stringify(_))).filter(N=>{if(N&&(N.urls||N.url)){let K=N.urls||N.url;N.url&&!N.urls&&J("RTCIceServer.url","RTCIceServer.urls");const le="string"==typeof K;return le&&(K=[K]),K=K.filter(ee=>{if(0===ee.indexOf("stun:"))return!1;const ne=ee.startsWith("turn")&&!ee.startsWith("turn:[")&&ee.includes("transport=udp");return ne&&!oe?(oe=!0,!0):ne&&!oe}),delete N.url,N.urls=le?K[0]:K,!!K.length}})}(K.iceServers),O("ICE servers after filtering:",K.iceServers)),new oe(K)},_.RTCPeerConnection.prototype=oe.prototype}function In(_){_.RTCRtpSender&&!("replaceTrack"in _.RTCRtpSender.prototype)&&(_.RTCRtpSender.prototype.replaceTrack=_.RTCRtpSender.prototype.setTrack)}function Ji(_,z){const oe=_&&_.navigator,N=_&&_.MediaStreamTrack;if(oe.getUserMedia=function(K,le,ee){J("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),oe.mediaDevices.getUserMedia(K).then(le,ee)},!(z.version>55&&"autoGainControl"in oe.mediaDevices.getSupportedConstraints())){const K=function(ee,ne,ae){ne in ee&&!(ae in ee)&&(ee[ae]=ee[ne],delete ee[ne])},le=oe.mediaDevices.getUserMedia.bind(oe.mediaDevices);if(oe.mediaDevices.getUserMedia=function(ee){return"object"==typeof ee&&"object"==typeof ee.audio&&(ee=JSON.parse(JSON.stringify(ee)),K(ee.audio,"autoGainControl","mozAutoGainControl"),K(ee.audio,"noiseSuppression","mozNoiseSuppression")),le(ee)},N&&N.prototype.getSettings){const ee=N.prototype.getSettings;N.prototype.getSettings=function(){const ne=ee.apply(this,arguments);return K(ne,"mozAutoGainControl","autoGainControl"),K(ne,"mozNoiseSuppression","noiseSuppression"),ne}}if(N&&N.prototype.applyConstraints){const ee=N.prototype.applyConstraints;N.prototype.applyConstraints=function(ne){return"audio"===this.kind&&"object"==typeof ne&&(ne=JSON.parse(JSON.stringify(ne)),K(ne,"autoGainControl","mozAutoGainControl"),K(ne,"noiseSuppression","mozNoiseSuppression")),ee.apply(this,[ne])}}}}function Ie(_,z){_.navigator.mediaDevices&&"getDisplayMedia"in _.navigator.mediaDevices||!_.navigator.mediaDevices||(_.navigator.mediaDevices.getDisplayMedia=function(N){if(!N||!N.video){const K=new DOMException("getDisplayMedia without video constraints is undefined");return K.name="NotFoundError",K.code=8,Promise.reject(K)}return!0===N.video?N.video={mediaSource:z}:N.video.mediaSource=z,_.navigator.mediaDevices.getUserMedia(N)})}function Ar(_){"object"==typeof _&&_.RTCTrackEvent&&"receiver"in _.RTCTrackEvent.prototype&&!("transceiver"in _.RTCTrackEvent.prototype)&&Object.defineProperty(_.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function kn(_,z){if("object"!=typeof _||!_.RTCPeerConnection&&!_.mozRTCPeerConnection)return;!_.RTCPeerConnection&&_.mozRTCPeerConnection&&(_.RTCPeerConnection=_.mozRTCPeerConnection),z.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(K){const le=_.RTCPeerConnection.prototype[K];_.RTCPeerConnection.prototype[K]={[K](){return arguments[0]=new("addIceCandidate"===K?_.RTCIceCandidate:_.RTCSessionDescription)(arguments[0]),le.apply(this,arguments)}}[K]});const oe={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},N=_.RTCPeerConnection.prototype.getStats;_.RTCPeerConnection.prototype.getStats=function(){const[le,ee,ne]=arguments;return N.apply(this,[le||null]).then(ae=>{if(z.version<53&&!ee)try{ae.forEach(pe=>{pe.type=oe[pe.type]||pe.type})}catch(pe){if("TypeError"!==pe.name)throw pe;ae.forEach((ge,_e)=>{ae.set(_e,Object.assign({},ge,{type:oe[ge.type]||ge.type}))})}return ae}).then(ee,ne)}}function sr(_){if("object"!=typeof _||!_.RTCPeerConnection||!_.RTCRtpSender||_.RTCRtpSender&&"getStats"in _.RTCRtpSender.prototype)return;const z=_.RTCPeerConnection.prototype.getSenders;z&&(_.RTCPeerConnection.prototype.getSenders=function(){const K=z.apply(this,[]);return K.forEach(le=>le._pc=this),K});const oe=_.RTCPeerConnection.prototype.addTrack;oe&&(_.RTCPeerConnection.prototype.addTrack=function(){const K=oe.apply(this,arguments);return K._pc=this,K}),_.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function fn(_){if("object"!=typeof _||!_.RTCPeerConnection||!_.RTCRtpSender||_.RTCRtpSender&&"getStats"in _.RTCRtpReceiver.prototype)return;const z=_.RTCPeerConnection.prototype.getReceivers;z&&(_.RTCPeerConnection.prototype.getReceivers=function(){const N=z.apply(this,[]);return N.forEach(K=>K._pc=this),N}),S(_,"track",oe=>(oe.receiver._pc=oe.srcElement,oe)),_.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function Rr(_){!_.RTCPeerConnection||"removeStream"in _.RTCPeerConnection.prototype||(_.RTCPeerConnection.prototype.removeStream=function(oe){J("removeStream","removeTrack"),this.getSenders().forEach(N=>{N.track&&oe.getTracks().includes(N.track)&&this.removeTrack(N)})})}function Si(_){_.DataChannel&&!_.RTCDataChannel&&(_.RTCDataChannel=_.DataChannel)}function Pn(_){if("object"!=typeof _||!_.RTCPeerConnection)return;const z=_.RTCPeerConnection.prototype.addTransceiver;z&&(_.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const N=arguments[1],K=N&&"sendEncodings"in N;K&&N.sendEncodings.forEach(ee=>{if("rid"in ee&&!/^[a-z0-9]{0,16}$/i.test(ee.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in ee&&!(parseFloat(ee.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in ee&&!(parseFloat(ee.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const le=z.apply(this,arguments);if(K){const{sender:ee}=le,ne=ee.getParameters();(!("encodings"in ne)||1===ne.encodings.length&&0===Object.keys(ne.encodings[0]).length)&&(ne.encodings=N.sendEncodings,ee.sendEncodings=N.sendEncodings,this.setParametersPromises.push(ee.setParameters(ne).then(()=>{delete ee.sendEncodings}).catch(()=>{delete ee.sendEncodings})))}return le})}function Xi(_){if("object"!=typeof _||!_.RTCRtpSender)return;const z=_.RTCRtpSender.prototype.getParameters;z&&(_.RTCRtpSender.prototype.getParameters=function(){const N=z.apply(this,arguments);return"encodings"in N||(N.encodings=[].concat(this.sendEncodings||[{}])),N})}function Nn(_){if("object"!=typeof _||!_.RTCPeerConnection)return;const z=_.RTCPeerConnection.prototype.createOffer;_.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>z.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):z.apply(this,arguments)}}function ar(_){if("object"!=typeof _||!_.RTCPeerConnection)return;const z=_.RTCPeerConnection.prototype.createAnswer;_.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>z.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):z.apply(this,arguments)}}function ut(_){if("object"==typeof _&&_.RTCPeerConnection){if("getLocalStreams"in _.RTCPeerConnection.prototype||(_.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in _.RTCPeerConnection.prototype)){const z=_.RTCPeerConnection.prototype.addTrack;_.RTCPeerConnection.prototype.addStream=function(N){this._localStreams||(this._localStreams=[]),this._localStreams.includes(N)||this._localStreams.push(N),N.getAudioTracks().forEach(K=>z.call(this,K,N)),N.getVideoTracks().forEach(K=>z.call(this,K,N))},_.RTCPeerConnection.prototype.addTrack=function(N,...K){return K&&K.forEach(le=>{this._localStreams?this._localStreams.includes(le)||this._localStreams.push(le):this._localStreams=[le]}),z.apply(this,arguments)}}"removeStream"in _.RTCPeerConnection.prototype||(_.RTCPeerConnection.prototype.removeStream=function(oe){this._localStreams||(this._localStreams=[]);const N=this._localStreams.indexOf(oe);if(-1===N)return;this._localStreams.splice(N,1);const K=oe.getTracks();this.getSenders().forEach(le=>{K.includes(le.track)&&this.removeTrack(le)})})}}function Et(_){if("object"==typeof _&&_.RTCPeerConnection&&("getRemoteStreams"in _.RTCPeerConnection.prototype||(_.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in _.RTCPeerConnection.prototype))){Object.defineProperty(_.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(oe){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=oe),this.addEventListener("track",this._onaddstreampoly=N=>{N.streams.forEach(K=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(K))return;this._remoteStreams.push(K);const le=new Event("addstream");le.stream=K,this.dispatchEvent(le)})})}});const z=_.RTCPeerConnection.prototype.setRemoteDescription;_.RTCPeerConnection.prototype.setRemoteDescription=function(){const N=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(K){K.streams.forEach(le=>{if(N._remoteStreams||(N._remoteStreams=[]),N._remoteStreams.indexOf(le)>=0)return;N._remoteStreams.push(le);const ee=new Event("addstream");ee.stream=le,N.dispatchEvent(ee)})}),z.apply(N,arguments)}}}function Jr(_){if("object"!=typeof _||!_.RTCPeerConnection)return;const z=_.RTCPeerConnection.prototype,oe=z.createOffer,N=z.createAnswer,K=z.setLocalDescription,le=z.setRemoteDescription,ee=z.addIceCandidate;z.createOffer=function(pe,ge){const _e=arguments.length>=2?arguments[2]:arguments[0],de=oe.apply(this,[_e]);return ge?(de.then(pe,ge),Promise.resolve()):de},z.createAnswer=function(pe,ge){const _e=arguments.length>=2?arguments[2]:arguments[0],de=N.apply(this,[_e]);return ge?(de.then(pe,ge),Promise.resolve()):de};let ne=function(ae,pe,ge){const _e=K.apply(this,[ae]);return ge?(_e.then(pe,ge),Promise.resolve()):_e};z.setLocalDescription=ne,ne=function(ae,pe,ge){const _e=le.apply(this,[ae]);return ge?(_e.then(pe,ge),Promise.resolve()):_e},z.setRemoteDescription=ne,ne=function(ae,pe,ge){const _e=ee.apply(this,[ae]);return ge?(_e.then(pe,ge),Promise.resolve()):_e},z.addIceCandidate=ne}function Wn(_){const z=_&&_.navigator;if(z.mediaDevices&&z.mediaDevices.getUserMedia){const oe=z.mediaDevices,N=oe.getUserMedia.bind(oe);z.mediaDevices.getUserMedia=K=>N(Ut(K))}!z.getUserMedia&&z.mediaDevices&&z.mediaDevices.getUserMedia&&(z.getUserMedia=function(N,K,le){z.mediaDevices.getUserMedia(N).then(K,le)}.bind(z))}function Ut(_){return _&&void 0!==_.video?Object.assign({},_,{video:H(_.video)}):_}function Ro(_){if(!_.RTCPeerConnection)return;const z=_.RTCPeerConnection;_.RTCPeerConnection=function(N,K){if(N&&N.iceServers){const le=[];for(let ee=0;ee<N.iceServers.length;ee++){let ne=N.iceServers[ee];!ne.hasOwnProperty("urls")&&ne.hasOwnProperty("url")?(J("RTCIceServer.url","RTCIceServer.urls"),ne=JSON.parse(JSON.stringify(ne)),ne.urls=ne.url,delete ne.url,le.push(ne)):le.push(N.iceServers[ee])}N.iceServers=le}return new z(N,K)},_.RTCPeerConnection.prototype=z.prototype,"generateCertificate"in z&&Object.defineProperty(_.RTCPeerConnection,"generateCertificate",{get:()=>z.generateCertificate})}function Xr(_){"object"==typeof _&&_.RTCTrackEvent&&"receiver"in _.RTCTrackEvent.prototype&&!("transceiver"in _.RTCTrackEvent.prototype)&&Object.defineProperty(_.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Yt(_){const z=_.RTCPeerConnection.prototype.createOffer;_.RTCPeerConnection.prototype.createOffer=function(N){if(N){void 0!==N.offerToReceiveAudio&&(N.offerToReceiveAudio=!!N.offerToReceiveAudio);const K=this.getTransceivers().find(ee=>"audio"===ee.receiver.track.kind);!1===N.offerToReceiveAudio&&K?"sendrecv"===K.direction?K.setDirection?K.setDirection("sendonly"):K.direction="sendonly":"recvonly"===K.direction&&(K.setDirection?K.setDirection("inactive"):K.direction="inactive"):!0===N.offerToReceiveAudio&&!K&&this.addTransceiver("audio"),void 0!==N.offerToReceiveVideo&&(N.offerToReceiveVideo=!!N.offerToReceiveVideo);const le=this.getTransceivers().find(ee=>"video"===ee.receiver.track.kind);!1===N.offerToReceiveVideo&&le?"sendrecv"===le.direction?le.setDirection?le.setDirection("sendonly"):le.direction="sendonly":"recvonly"===le.direction&&(le.setDirection?le.setDirection("inactive"):le.direction="inactive"):!0===N.offerToReceiveVideo&&!le&&this.addTransceiver("video")}return z.apply(this,arguments)}}function cr(_){"object"!=typeof _||_.AudioContext||(_.AudioContext=_.webkitAudioContext)}var os=I(390),lr=I.n(os);function Or(_){if(!_.RTCIceCandidate||_.RTCIceCandidate&&"foundation"in _.RTCIceCandidate.prototype)return;const z=_.RTCIceCandidate;_.RTCIceCandidate=function(N){if("object"==typeof N&&N.candidate&&0===N.candidate.indexOf("a=")&&((N=JSON.parse(JSON.stringify(N))).candidate=N.candidate.substr(2)),N.candidate&&N.candidate.length){const K=new z(N),le=lr().parseCandidate(N.candidate),ee=Object.assign(K,le);return ee.toJSON=function(){return{candidate:ee.candidate,sdpMid:ee.sdpMid,sdpMLineIndex:ee.sdpMLineIndex,usernameFragment:ee.usernameFragment}},ee}return new z(N)},_.RTCIceCandidate.prototype=z.prototype,S(_,"icecandidate",oe=>(oe.candidate&&Object.defineProperty(oe,"candidate",{value:new _.RTCIceCandidate(oe.candidate),writable:"false"}),oe))}function ur(_,z){if(!_.RTCPeerConnection)return;"sctp"in _.RTCPeerConnection.prototype||Object.defineProperty(_.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const oe=function(ne){if(!ne||!ne.sdp)return!1;const ae=lr().splitSections(ne.sdp);return ae.shift(),ae.some(pe=>{const ge=lr().parseMLine(pe);return ge&&"application"===ge.kind&&-1!==ge.protocol.indexOf("SCTP")})},N=function(ne){const ae=ne.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===ae||ae.length<2)return-1;const pe=parseInt(ae[1],10);return pe!=pe?-1:pe},K=function(ne){let ae=65536;return"firefox"===z.browser&&(ae=z.version<57?-1===ne?16384:2147483637:z.version<60?57===z.version?65535:65536:2147483637),ae},le=function(ne,ae){let pe=65536;"firefox"===z.browser&&57===z.version&&(pe=65535);const ge=lr().matchPrefix(ne.sdp,"a=max-message-size:");return ge.length>0?pe=parseInt(ge[0].substr(19),10):"firefox"===z.browser&&-1!==ae&&(pe=2147483637),pe},ee=_.RTCPeerConnection.prototype.setRemoteDescription;_.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===z.browser&&z.version>=76){const{sdpSemantics:ae}=this.getConfiguration();"plan-b"===ae&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(oe(arguments[0])){const ae=N(arguments[0]),pe=K(ae),ge=le(arguments[0],ae);let _e;_e=0===pe&&0===ge?Number.POSITIVE_INFINITY:0===pe||0===ge?Math.max(pe,ge):Math.min(pe,ge);const de={};Object.defineProperty(de,"maxMessageSize",{get:()=>_e}),this._sctp=de}return ee.apply(this,arguments)}}function wi(_){if(!_.RTCPeerConnection||!("createDataChannel"in _.RTCPeerConnection.prototype))return;function z(N,K){const le=N.send;N.send=function(){const ne=arguments[0],ae=ne.length||ne.size||ne.byteLength;if("open"===N.readyState&&K.sctp&&ae>K.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+K.sctp.maxMessageSize+" bytes)");return le.apply(N,arguments)}}const oe=_.RTCPeerConnection.prototype.createDataChannel;_.RTCPeerConnection.prototype.createDataChannel=function(){const K=oe.apply(this,arguments);return z(K,this),K},S(_,"datachannel",N=>(z(N.channel,N.target),N))}function Zr(_){if(!_.RTCPeerConnection||"connectionState"in _.RTCPeerConnection.prototype)return;const z=_.RTCPeerConnection.prototype;Object.defineProperty(z,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(z,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(oe){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),oe&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=oe)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(oe=>{const N=z[oe];z[oe]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=K=>{const le=K.target;if(le._lastConnectionState!==le.connectionState){le._lastConnectionState=le.connectionState;const ee=new Event("connectionstatechange",K);le.dispatchEvent(ee)}return K},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),N.apply(this,arguments)}})}function Oo(_,z){if(!_.RTCPeerConnection||"chrome"===z.browser&&z.version>=71||"safari"===z.browser&&z.version>=605)return;const oe=_.RTCPeerConnection.prototype.setRemoteDescription;_.RTCPeerConnection.prototype.setRemoteDescription=function(K){if(K&&K.sdp&&-1!==K.sdp.indexOf("\na=extmap-allow-mixed")){const le=K.sdp.split("\n").filter(ee=>"a=extmap-allow-mixed"!==ee.trim()).join("\n");_.RTCSessionDescription&&K instanceof _.RTCSessionDescription?arguments[0]=new _.RTCSessionDescription({type:K.type,sdp:le}):K.sdp=le}return oe.apply(this,arguments)}}function Ti(_,z){if(!_.RTCPeerConnection||!_.RTCPeerConnection.prototype)return;const oe=_.RTCPeerConnection.prototype.addIceCandidate;!oe||0===oe.length||(_.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===z.browser&&z.version<78||"firefox"===z.browser&&z.version<68||"safari"===z.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():oe.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}const Ys=function({window:_}={},z={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0}){const oe=O,N=function(_){const z={browser:null,version:null};if(void 0===_||!_.navigator)return z.browser="Not a browser.",z;const{navigator:oe}=_;if(oe.mozGetUserMedia)z.browser="firefox",z.version=T(oe.userAgent,/Firefox\/(\d+)\./,1);else if(oe.webkitGetUserMedia||!1===_.isSecureContext&&_.webkitRTCPeerConnection&&!_.RTCIceGatherer)z.browser="chrome",z.version=T(oe.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(oe.mediaDevices&&oe.userAgent.match(/Edge\/(\d+).(\d+)$/))z.browser="edge",z.version=T(oe.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!_.RTCPeerConnection||!oe.userAgent.match(/AppleWebKit\/(\d+)\./))return z.browser="Not a supported browser.",z;z.browser="safari",z.version=T(oe.userAgent,/AppleWebKit\/(\d+)\./,1),z.supportsUnifiedPlan=_.RTCRtpTransceiver&&"currentDirection"in _.RTCRtpTransceiver.prototype}return z}(_),K={browserDetails:N,commonShim:X,extractVersion:T,disableLog:x,disableWarnings:V};switch(N.browser){case"chrome":if(!R||!ke||!z.shimChrome)return oe("Chrome shim is not included in this adapter release."),K;if(null===N.version)return oe("Chrome shim can not determine version, not shimming."),K;oe("adapter.js shimming chrome."),K.browserShim=R,Ti(_,N),Y(_,N),ve(_),ke(_,N),Se(_),ye(_,N),Ue(_),Ze(_),be(_),st(_,N),Or(_),Zr(_),ur(_,N),wi(_),Oo(_,N);break;case"firefox":if(!te||!kn||!z.shimFirefox)return oe("Firefox shim is not included in this adapter release."),K;oe("adapter.js shimming firefox."),K.browserShim=te,Ti(_,N),Ji(_,N),kn(_,N),Ar(_),Rr(_),sr(_),fn(_),Si(_),Pn(_),Xi(_),Nn(_),ar(_),Or(_),Zr(_),ur(_,N),wi(_);break;case"edge":if(!U||!or||!z.shimEdge)return oe("MS edge shim is not included in this adapter release."),K;oe("adapter.js shimming edge."),K.browserShim=U,Kr(_),He(_),or(_,N),In(_),ur(_,N),wi(_);break;case"safari":if(!A||!z.shimSafari)return oe("Safari shim is not included in this adapter release."),K;oe("adapter.js shimming safari."),K.browserShim=A,Ti(_,N),Ro(_),Yt(_),Jr(_),ut(_),Et(_),Xr(_),Wn(_),cr(_),Or(_),ur(_,N),wi(_),Oo(_,N);break;default:oe("Unsupported browser!")}return K}({window:"undefined"==typeof window?void 0:window})},796:(Ke,j,I)=>{"use strict";function R(t){return"function"==typeof t}let U=!1;const te={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else U&&console.log("RxJS: Back to a better error behavior. Thank you. <3");U=t},get useDeprecatedSynchronousErrorHandling(){return U}};function A(t){setTimeout(()=>{throw t},0)}const X={closed:!0,next(t){},error(t){if(te.useDeprecatedSynchronousErrorHandling)throw t;A(t)},complete(){}},W=Array.isArray||(t=>t&&"number"==typeof t.length);function B(t){return null!==t&&"object"==typeof t}const S=(()=>{function t(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((n,r)=>`${r+1}) ${n.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return t.prototype=Object.create(Error.prototype),t})();class x{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:r,_unsubscribe:i,_subscriptions:o}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof x)n.remove(this);else if(null!==n)for(let s=0;s<n.length;++s)n[s].remove(this);if(R(i)){r&&(this._unsubscribe=void 0);try{i.call(this)}catch(s){e=s instanceof S?V(s.errors):[s]}}if(W(o)){let s=-1,a=o.length;for(;++s<a;){const u=o[s];if(B(u))try{u.unsubscribe()}catch(h){e=e||[],h instanceof S?e=e.concat(V(h.errors)):e.push(h)}}}if(e)throw new S(e)}add(e){let n=e;if(!e)return x.EMPTY;switch(typeof e){case"function":n=new x(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof x)){const o=n;n=new x,n._subscriptions=[o]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof x){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(e){const n=this._subscriptions;if(n){const r=n.indexOf(e);-1!==r&&n.splice(r,1)}}}var t;function V(t){return t.reduce((e,n)=>e.concat(n instanceof S?n.errors:n),[])}x.EMPTY=((t=new x).closed=!0,t);const O="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class M extends x{constructor(e,n,r){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=X;break;case 1:if(!e){this.destination=X;break}if("object"==typeof e){e instanceof M?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new $(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new $(this,e,n,r)}}[O](){return this}static create(e,n,r){const i=new M(e,n,r);return i.syncErrorThrowable=!1,i}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class $ extends M{constructor(e,n,r,i){super(),this._parentSubscriber=e;let o,s=this;R(n)?o=n:n&&(o=n.next,r=n.error,i=n.complete,n!==X&&(s=Object.create(n),R(s.unsubscribe)&&this.add(s.unsubscribe.bind(s)),s.unsubscribe=this.unsubscribe.bind(this))),this._context=s,this._next=o,this._error=r,this._complete=i}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:n}=this;te.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable?this.__tryOrSetError(n,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:n}=this,{useDeprecatedSynchronousErrorHandling:r}=te;if(this._error)r&&n.syncErrorThrowable?(this.__tryOrSetError(n,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(n.syncErrorThrowable)r?(n.syncErrorValue=e,n.syncErrorThrown=!0):A(e),this.unsubscribe();else{if(this.unsubscribe(),r)throw e;A(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const n=()=>this._complete.call(this._context);te.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,n){try{e.call(this._context,n)}catch(r){if(this.unsubscribe(),te.useDeprecatedSynchronousErrorHandling)throw r;A(r)}}__tryOrSetError(e,n,r){if(!te.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,r)}catch(i){return te.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=i,e.syncErrorThrown=!0,!0):(A(i),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const C="function"==typeof Symbol&&Symbol.observable||"@@observable";function G(t){return t}let ve=(()=>{class t{constructor(n){this._isScalar=!1,n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const{operator:o}=this,s=function(t,e,n){if(t){if(t instanceof M)return t;if(t[O])return t[O]()}return t||e||n?new M(t,e,n):new M(X)}(n,r,i);if(s.add(o?o.call(s,this.source):this.source||te.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),te.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){te.useDeprecatedSynchronousErrorHandling&&(n.syncErrorThrown=!0,n.syncErrorValue=r),function(t){for(;t;){const{closed:e,destination:n,isStopped:r}=t;if(e||r)return!1;t=n&&n instanceof M?n:null}return!0}(n)?n.error(r):console.warn(r)}}forEach(n,r){return new(r=Se(r))((i,o)=>{let s;s=this.subscribe(a=>{try{n(a)}catch(u){o(u),s&&s.unsubscribe()}},o,i)})}_subscribe(n){const{source:r}=this;return r&&r.subscribe(n)}[C](){return this}pipe(...n){return 0===n.length?this:function(t){return 0===t.length?G:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}(n)(this)}toPromise(n){return new(n=Se(n))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function Se(t){if(t||(t=te.Promise||Promise),!t)throw new Error("no Promise impl found");return t}const Ze=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})();class be extends x{constructor(e,n){super(),this.subject=e,this.subscriber=n,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,n=e.observers;if(this.subject=null,!n||0===n.length||e.isStopped||e.closed)return;const r=n.indexOf(this.subscriber);-1!==r&&n.splice(r,1)}}class Ae extends M{constructor(e){super(e),this.destination=e}}let ye=(()=>{class t extends ve{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[O](){return new Ae(this)}lift(n){const r=new ke(this,this);return r.operator=n,r}next(n){if(this.closed)throw new Ze;if(!this.isStopped){const{observers:r}=this,i=r.length,o=r.slice();for(let s=0;s<i;s++)o[s].next(n)}}error(n){if(this.closed)throw new Ze;this.hasError=!0,this.thrownError=n,this.isStopped=!0;const{observers:r}=this,i=r.length,o=r.slice();for(let s=0;s<i;s++)o[s].error(n);this.observers.length=0}complete(){if(this.closed)throw new Ze;this.isStopped=!0;const{observers:n}=this,r=n.length,i=n.slice();for(let o=0;o<r;o++)i[o].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(n){if(this.closed)throw new Ze;return super._trySubscribe(n)}_subscribe(n){if(this.closed)throw new Ze;return this.hasError?(n.error(this.thrownError),x.EMPTY):this.isStopped?(n.complete(),x.EMPTY):(this.observers.push(n),new be(this,n))}asObservable(){const n=new ve;return n.source=this,n}}return t.create=(e,n)=>new ke(e,n),t})();class ke extends ye{constructor(e,n){super(),this.destination=e,this.source=n}next(e){const{destination:n}=this;n&&n.next&&n.next(e)}error(e){const{destination:n}=this;n&&n.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:n}=this;return n?this.source.subscribe(e):x.EMPTY}}function st(t){return t&&"function"==typeof t.schedule}function je(t,e){return function(r){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return r.lift(new It(t,e))}}class It{constructor(e,n){this.project=e,this.thisArg=n}call(e,n){return n.subscribe(new Pt(e,this.project,this.thisArg))}}class Pt extends M{constructor(e,n,r){super(e),this.project=n,this.count=0,this.thisArg=r||this}_next(e){let n;try{n=this.project.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}this.destination.next(n)}}const Kr=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()},In="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",kn=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function sr(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}const fn=t=>{if(t&&"function"==typeof t[C])return(t=>e=>{const n=t[C]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)})(t);if(kn(t))return Kr(t);if(sr(t))return(t=>e=>(t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,A),e))(t);if(t&&"function"==typeof t[In])return(t=>e=>{const n=t[In]();for(;;){let r;try{r=n.next()}catch(i){return e.error(i),e}if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof n.return&&e.add(()=>{n.return&&n.return()}),e})(t);{const n=`You provided ${B(t)?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(n)}};function Pn(t,e){return new ve(n=>{const r=new x;let i=0;return r.add(e.schedule(function(){i!==t.length?(n.next(t[i++]),n.closed||r.add(this.schedule())):n.complete()})),r})}function Et(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[C]}(t))return function(t,e){return new ve(n=>{const r=new x;return r.add(e.schedule(()=>{const i=t[C]();r.add(i.subscribe({next(o){r.add(e.schedule(()=>n.next(o)))},error(o){r.add(e.schedule(()=>n.error(o)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(sr(t))return function(t,e){return new ve(n=>{const r=new x;return r.add(e.schedule(()=>t.then(i=>{r.add(e.schedule(()=>{n.next(i),r.add(e.schedule(()=>n.complete()))}))},i=>{r.add(e.schedule(()=>n.error(i)))}))),r})}(t,e);if(kn(t))return Pn(t,e);if(function(t){return t&&"function"==typeof t[In]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new ve(n=>{const r=new x;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[In](),r.add(e.schedule(function(){if(n.closed)return;let o,s;try{const a=i.next();o=a.value,s=a.done}catch(a){return void n.error(a)}s?n.complete():(n.next(o),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof ve?t:new ve(fn(t))}class Jr extends M{constructor(e){super(),this.parent=e}_next(e){this.parent.notifyNext(e)}_error(e){this.parent.notifyError(e),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class Ut extends M{notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.destination.complete()}}function Xr(t,e){if(e.closed)return;if(t instanceof ve)return t.subscribe(e);let n;try{n=fn(t)(e)}catch(r){e.error(r)}return n}function Yt(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?r=>r.pipe(Yt((i,o)=>Et(t(i,o)).pipe(je((s,a)=>e(i,s,o,a))),n)):("number"==typeof e&&(n=e),r=>r.lift(new cr(t,n)))}class cr{constructor(e,n=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=n}call(e,n){return n.subscribe(new os(e,this.project,this.concurrent))}}class os extends Ut{constructor(e,n,r=Number.POSITIVE_INFINITY){super(e),this.project=n,this.concurrent=r,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let n;const r=this.index++;try{n=this.project(e,r)}catch(i){return void this.destination.error(i)}this.active++,this._innerSub(n)}_innerSub(e){const n=new Jr(this),r=this.destination;r.add(n);const i=Xr(e,n);i!==n&&r.add(i)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyComplete(){const e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function Or(t=Number.POSITIVE_INFINITY){return Yt(G,t)}function ur(t,e){return e?Pn(t,e):new ve(Kr(t))}function Zr(){return function(e){return e.lift(new Oo(e))}}class Oo{constructor(e){this.connectable=e}call(e,n){const{connectable:r}=this;r._refCount++;const i=new Ti(e,r),o=n.subscribe(i);return i.closed||(i.connection=r.connect()),o}}class Ti extends M{constructor(e,n){super(e),this.connectable=n}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const n=e._refCount;if(n<=0)return void(this.connection=null);if(e._refCount=n-1,n>1)return void(this.connection=null);const{connection:r}=this,i=e._connection;this.connection=null,i&&(!r||i===r)&&i.unsubscribe()}}class ko extends ve{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new x,e.add(this.source.subscribe(new Ys(this.getSubject(),this))),e.closed&&(this._connection=null,e=x.EMPTY)),e}refCount(){return Zr()(this)}}const vc=(()=>{const t=ko.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class Ys extends Ae{constructor(e,n){super(e),this.connectable=n}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const n=e._connection;e._refCount=0,e._subject=null,e._connection=null,n&&n.unsubscribe()}}}function K(){return new ye}function ee(t){for(let e in t)if(t[e]===ee)return e;throw Error("Could not find renamed property on target object.")}function ne(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function ae(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(ae).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function pe(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const ge=ee({__forward_ref__:ee});function _e(t){return t.__forward_ref__=_e,t.toString=function(){return ae(this())},t}function de(t){return it(t)?t():t}function it(t){return"function"==typeof t&&t.hasOwnProperty(ge)&&t.__forward_ref__===_e}class Nt extends Error{constructor(e,n){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(e,n)),this.code=e}}function we(t){return"string"==typeof t?t:null==t?"":String(t)}function cn(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():we(t)}function Zi(t,e){const n=e?` in ${e}`:"";throw new Nt("201",`No provider for ${cn(t)} found${n}`)}function bn(t,e){null==t&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}(e,t,null,"!=")}function Oe(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Kt(t){return{providers:t.providers||[],imports:t.imports||[]}}function ei(t){return nu(t,xi)||nu(t,iu)}function nu(t,e){return t.hasOwnProperty(e)?t[e]:null}function Ks(t){return t&&(t.hasOwnProperty(cs)||t.hasOwnProperty(eo))?t[cs]:null}const xi=ee({\u0275prov:ee}),cs=ee({\u0275inj:ee}),iu=ee({ngInjectableDef:ee}),eo=ee({ngInjectorDef:ee});var Ne=(()=>((Ne=Ne||{})[Ne.Default=0]="Default",Ne[Ne.Host=1]="Host",Ne[Ne.Self=2]="Self",Ne[Ne.SkipSelf=4]="SkipSelf",Ne[Ne.Optional=8]="Optional",Ne))();let Js;function Ii(t){const e=Js;return Js=t,e}function Pi(t,e,n){const r=ei(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&Ne.Optional?null:void 0!==e?e:void Zi(ae(t),"Injector")}function vr(t){return{toString:t}.toString()}var Qn=(()=>((Qn=Qn||{})[Qn.OnPush=0]="OnPush",Qn[Qn.Default=1]="Default",Qn))(),en=(()=>((en=en||{})[en.Emulated=0]="Emulated",en[en.None=2]="None",en[en.ShadowDom=3]="ShadowDom",en))();const ls="undefined"!=typeof globalThis&&globalThis,us="undefined"!=typeof window&&window,su="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,yt=ls||"undefined"!=typeof global&&global||us||su,Mi={},Ve=[],ds=ee({\u0275cmp:ee}),to=ee({\u0275dir:ee}),no=ee({\u0275pipe:ee}),fs=ee({\u0275mod:ee}),Xs=ee({\u0275loc:ee}),Ht=ee({\u0275fac:ee}),hs=ee({__NG_ELEMENT_ID__:ee});let Lt=0;function _r(t){return vr(()=>{const n={},r={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:n,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===Qn.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||Ve,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||en.Emulated,id:"c",styles:t.styles||Ve,_:null,setInput:null,schemas:t.schemas||null,tView:null},i=t.directives,o=t.features,s=t.pipes;return r.id+=Lt++,r.inputs=lu(t.inputs,n),r.outputs=lu(t.outputs),o&&o.forEach(a=>a(r)),r.directiveDefs=i?()=>("function"==typeof i?i():i).map(cu):null,r.pipeDefs=s?()=>("function"==typeof s?s():s).map(Ai):null,r})}function cu(t){return Jt(t)||function(t){return t[to]||null}(t)}function Ai(t){return function(t){return t[no]||null}(t)}const Ec={};function Fn(t){return vr(()=>{const e={type:t.type,bootstrap:t.bootstrap||Ve,declarations:t.declarations||Ve,imports:t.imports||Ve,exports:t.exports||Ve,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(Ec[t.id]=t.type),e})}function lu(t,e){if(null==t)return Mi;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const Le=_r;function Jt(t){return t[ds]||null}function Yn(t,e){const n=t[fs]||null;if(!n&&!0===e)throw new Error(`Type ${ae(t)} does not have '\u0275mod' property.`);return n}function Xn(t){return Array.isArray(t)&&"object"==typeof t[1]}function hr(t){return Array.isArray(t)&&!0===t[1]}function ta(t){return 0!=(8&t.flags)}function ms(t){return 2==(2&t.flags)}function na(t){return 1==(1&t.flags)}function Er(t){return null!==t.template}function du(t){return 0!=(512&t[2])}function ao(t,e){return t.hasOwnProperty(Ht)?t[Ht]:null}class gu{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function nn(){return vs}function vs(t){return t.type.prototype.ngOnChanges&&(t.setInput=mu),oa}function oa(){const t=Lo(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===Mi)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function mu(t,e,n,r){const i=Lo(t)||function(t,e){return t[xc]=e}(t,{previous:Mi,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new gu(u&&u.currentValue,e,s===Mi),t[r]=e}nn.ngInherit=!0;const xc="__ngSimpleChanges__";function Lo(t){return t[xc]||null}let ca;function wt(t){return!!t.listen}const vu={createRenderer:(t,e)=>void 0!==ca?ca:"undefined"!=typeof document?document:void 0};function dt(t){for(;Array.isArray(t);)t=t[0];return t}function la(t,e){return dt(e[t])}function zt(t,e){return dt(e[t.index])}function ua(t,e){return t.data[e]}function Ln(t,e){const n=e[t];return Xn(n)?n:n[0]}function Oi(t){return 128==(128&t[2])}function ri(t,e){return null==e?null:t[e]}function Cu(t){t[18]=0}function ki(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const ze={lFrame:xu(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function ii(){return ze.bindingsEnabled}function me(){return ze.lFrame.lView}function at(){return ze.lFrame.tView}function Ni(t){return ze.lFrame.contextLView=t,t[8]}function rn(){let t=lo();for(;null!==t&&64===t.type;)t=t.parent;return t}function lo(){return ze.lFrame.currentTNode}function Vr(t,e){const n=ze.lFrame;n.currentTNode=t,n.isParent=e}function _s(){return ze.lFrame.isParent}function uo(){return ze.isInCheckNoChangesMode}function da(t){ze.isInCheckNoChangesMode=t}function Dr(){return ze.lFrame.bindingIndex}function fo(){return ze.lFrame.bindingIndex++}function oi(t){const e=ze.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Sr(t,e){const n=ze.lFrame;n.bindingIndex=n.bindingRootIndex=t,ho(e)}function ho(t){ze.lFrame.currentDirectiveIndex=t}function ha(t){ze.lFrame.currentQueryIndex=t}function Oc(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function wu(t,e,n){if(n&Ne.SkipSelf){let i=e,o=t;for(;!(i=i.parent,null!==i||n&Ne.Host||(i=Oc(o),null===i||(o=o[15],10&i.type))););if(null===i)return!1;e=i,t=o}const r=ze.lFrame=Tu();return r.currentTNode=e,r.lView=t,!0}function po(t){const e=Tu(),n=t[1];ze.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Tu(){const t=ze.lFrame,e=null===t?null:t.child;return null===e?xu(t):e}function xu(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function Es(){const t=ze.lFrame;return ze.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Iu=Es;function pa(){const t=Es();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function on(){return ze.lFrame.selectedIndex}function ai(t){ze.lFrame.selectedIndex=t}function $t(){const t=ze.lFrame;return ua(t.tView,t.selectedIndex)}function c(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:h,ngOnDestroy:g}=o;s&&(t.contentHooks||(t.contentHooks=[])).push(-n,s),a&&((t.contentHooks||(t.contentHooks=[])).push(n,a),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,a)),u&&(t.viewHooks||(t.viewHooks=[])).push(-n,u),h&&((t.viewHooks||(t.viewHooks=[])).push(n,h),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,h)),null!=g&&(t.destroyHooks||(t.destroyHooks=[])).push(n,g)}}function l(t,e,n){p(t,e,3,n)}function d(t,e,n,r){(3&t[2])===n&&p(t,e,n,r)}function f(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function p(t,e,n,r){const o=null!=r?r:-1,s=e.length-1;let a=0;for(let u=void 0!==r?65535&t[18]:0;u<s;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(t[18]+=65536),(a<o||-1==o)&&(m(t,n,e,u),t[18]=(4294901760&t[18])+u+2),u++}function m(t,e,n,r){const i=n[r]<0,o=n[r+1],a=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{o.call(a)}finally{}}}else try{o.call(a)}finally{}}const b=-1;class v{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function Te(t,e,n){const r=wt(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];Re(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function Ee(t){return 3===t||4===t||6===t}function Re(t){return 64===t.charCodeAt(0)}function Be(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||qe(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function qe(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const a=t[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<t.length;){const a=t[o];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function mt(t){return t!==b}function _t(t){return 32767&t}function ht(t,e){let n=function(t){return t>>16}(t),r=e;for(;n>0;)r=r[15],n--;return r}let Bn=!0;function gr(t){const e=Bn;return Bn=t,e}let Uw=0;function kc(t,e){const n=ch(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,ah(r.data,t),ah(e,null),ah(r.blueprint,null));const i=Ru(t,e),o=t.injectorIndex;if(mt(i)){const s=_t(i),a=ht(i,e),u=a[1].data;for(let h=0;h<8;h++)e[o+h]=a[s+h]|u[s+h]}return e[o+8]=i,o}function ah(t,e){t.push(0,0,0,0,0,0,0,0,e)}function ch(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Ru(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const o=i[1],s=o.type;if(r=2===s?o.declTNode:1===s?i[6]:null,null===r)return b;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return b}function Ou(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(hs)&&(r=n[hs]),null==r&&(r=n[hs]=Uw++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Ty(t,e,n){if(n&Ne.Optional)return t;Zi(e,"NodeInjector")}function xy(t,e,n,r){if(n&Ne.Optional&&void 0===r&&(r=null),0==(n&(Ne.Self|Ne.Host))){const i=t[9],o=Ii(void 0);try{return i?i.get(e,r,n&Ne.Optional):Pi(e,r,n&Ne.Optional)}finally{Ii(o)}}return Ty(r,e,n)}function Iy(t,e,n,r=Ne.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(hs)?t[hs]:void 0;return"number"==typeof e?e>=0?255&e:Gw:e}(n);if("function"==typeof o){if(!wu(e,t,r))return r&Ne.Host?Ty(i,n,r):xy(e,n,r,i);try{const s=o(r);if(null!=s||r&Ne.Optional)return s;Zi(n)}finally{Iu()}}else if("number"==typeof o){let s=null,a=ch(t,e),u=b,h=r&Ne.Host?e[16][6]:null;for((-1===a||r&Ne.SkipSelf)&&(u=-1===a?Ru(t,e):e[a+8],u!==b&&Ay(r,!1)?(s=e[1],a=_t(u),e=ht(u,e)):a=-1);-1!==a;){const g=e[1];if(My(o,a,g.data)){const y=zw(a,e,n,s,r,h);if(y!==Py)return y}u=e[a+8],u!==b&&Ay(r,e[1].data[a+8]===h)&&My(o,a,e)?(s=g,a=_t(u),e=ht(u,e)):a=-1}}}return xy(e,n,r,i)}const Py={};function Gw(){return new ma(rn(),me())}function zw(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],g=function(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,g=o>>20,w=i?a+g:t.directiveEnd;for(let P=r?a:a+g;P<w;P++){const F=s[P];if(P<u&&n===F||P>=u&&F.type===n)return P}if(i){const P=s[u];if(P&&Er(P)&&P.type===n)return u}return null}(a,s,n,null==r?ms(a)&&Bn:r!=s&&0!=(3&a.type),i&Ne.Host&&o===a);return null!==g?Nc(e,s,g,a):Py}function Nc(t,e,n,r){let i=t[n];const o=e.data;if(function(t){return t instanceof v}(i)){const s=i;s.resolving&&function(t,e){throw new Nt("200",`Circular dependency in DI detected for ${t}`)}(cn(o[n]));const a=gr(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?Ii(s.injectImpl):null;wu(t,r,Ne.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const s=vs(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,s)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&Ii(u),gr(a),s.resolving=!1,Iu()}}return i}function My(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function Ay(t,e){return!(t&Ne.Self||t&Ne.Host&&e)}class ma{constructor(e,n){this._tNode=e,this._lView=n}get(e,n){return Iy(this._tNode,this._lView,e,void 0,n)}}function Lr(t){return vr(()=>{const e=t.prototype.constructor,n=e[Ht]||lh(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const o=i[Ht]||lh(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function lh(t){return it(t)?()=>{const e=lh(de(t));return e&&e()}:ao(t)}const va="__parameters__";function Ds(t,e,n){return vr(()=>{const r=function(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;const s=new i(...o);return a.annotation=s,a;function a(u,h,g){const y=u.hasOwnProperty(va)?u[va]:Object.defineProperty(u,va,{value:[]})[va];for(;y.length<=g;)y.push(null);return(y[g]=y[g]||[]).push(s),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class nt{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Oe({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Yw=new nt("AnalyzeForEntryComponents"),Nu=Function;function Fi(t,e){t.forEach(n=>Array.isArray(n)?Fi(n,e):e(n))}function Vu(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Ss(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function wr(t,e,n){let r=ba(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function dh(t,e){const n=ba(t,e);if(n>=0)return t[1|n]}function ba(t,e){return function(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){const o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}(t,e,1)}const Bc={},hh="__NG_DI_FLAG__",Ca="ngTempTokenPath",oT=/\n/gm,ph="__source",gh=ee({provide:String,useValue:ee});let Uc;function Ea(t){const e=Uc;return Uc=t,e}function aT(t,e=Ne.Default){if(void 0===Uc)throw new Error("inject() must be called from an injection context");return null===Uc?Pi(t,void 0,e):Uc.get(t,e&Ne.Optional?null:void 0,e)}function De(t,e=Ne.Default){return(Js||aT)(de(t),e)}function ws(t){const e=[];for(let n=0;n<t.length;n++){const r=de(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let i,o=Ne.Default;for(let s=0;s<r.length;s++){const a=r[s],u=cT(a);"number"==typeof u?-1===u?i=a.token:o|=u:i=a}e.push(De(i,o))}else e.push(De(r))}return e}function Hc(t,e){return t[hh]=e,t.prototype[hh]=e,t}function cT(t){return t[hh]}function Vy(t,e,n,r){const i=t[Ca];throw e[ph]&&i.unshift(e[ph]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=ae(e);if(Array.isArray(e))i=e.map(ae).join(" -> ");else if("object"==typeof e){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):ae(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(oT,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[Ca]=null,t}const Da=Hc(Ds("Inject",t=>({token:t})),-1),mr=Hc(Ds("Optional"),8),$o=Hc(Ds("SkipSelf"),4);class Ts{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Tr(t){return t instanceof Ts?t.changingThisBreaksApplicationSecurity:t}function Vi(t,e){const n=function(t){return t instanceof Ts&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}const RT=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,OT=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Rt=(()=>((Rt=Rt||{})[Rt.NONE=0]="NONE",Rt[Rt.HTML=1]="HTML",Rt[Rt.STYLE=2]="STYLE",Rt[Rt.SCRIPT=3]="SCRIPT",Rt[Rt.URL=4]="URL",Rt[Rt.RESOURCE_URL=5]="RESOURCE_URL",Rt))();function Gu(t){const e=function(){const t=me();return t&&t[12]}();return e?e.sanitize(Rt.URL,t)||"":Vi(t,"URL")?Tr(t):function(t){return(t=String(t)).match(RT)||t.match(OT)?t:"unsafe:"+t}(we(t))}const nv="__ngContext__";function Un(t,e){t[nv]=e}function Sh(t){const e=function(t){return t[nv]||null}(t);return e?Array.isArray(e)?e:e.lView:null}function zu(t){return t.ngOriginalError}function tx(t,...e){t.error(...e)}class xs{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e),r=this._findContext(e),i=function(t){return t&&t.ngErrorLogger||tx}(e);i(this._console,"ERROR",e),n&&i(this._console,"ORIGINAL ERROR",n),r&&i(this._console,"ERROR CONTEXT",r)}_findContext(e){return e?function(t){return t.ngDebugContext}(e)||this._findContext(zu(e)):null}_findOriginalError(e){let n=e&&zu(e);for(;n&&zu(n);)n=zu(n);return n||null}}const dv=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(yt))();function ji(t){return t instanceof Function?t():t}var xr=(()=>((xr=xr||{})[xr.Important=1]="Important",xr[xr.DashCase=2]="DashCase",xr))();function xh(t,e){return undefined(t,e)}function Qc(t){const e=t[3];return hr(e)?e[3]:e}function Ih(t){return mv(t[13])}function Ph(t){return mv(t[4])}function mv(t){for(;null!==t&&!hr(t);)t=t[4];return t}function xa(t,e,n,r,i){if(null!=r){let o,s=!1;hr(r)?o=r:Xn(r)&&(s=!0,r=r[0]);const a=dt(r);0===t&&null!==n?null==i?Ev(e,n,a):Is(e,n,a,i||null,!0):1===t&&null!==n?Is(e,n,a,i||null,!0):2===t?function(t,e,n){const r=qu(t,e);r&&function(t,e,n,r){wt(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==dt(n)&&xa(e,t,r,o,i);for(let a=10;a<n.length;a++){const u=n[a];Yc(u[1],u,t,e,r,o)}}(e,t,o,n,i)}}function Ah(t,e,n){return wt(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function vv(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,ki(i,-1)),n.splice(r,1)}function Rh(t,e){if(t.length<=10)return;const n=10+e,r=t[n];if(r){const i=r[17];null!==i&&i!==t&&vv(i,r),e>0&&(t[n-1][4]=r[4]);const o=Ss(t,10+e);!function(t,e){Yc(t,e,e[11],2,null,null),e[0]=null,e[6]=null}(r[1],r);const s=o[19];null!==s&&s.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function _v(t,e){if(!(256&e[2])){const n=e[11];wt(n)&&n.destroyNode&&Yc(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Oh(t[1],t);for(;e;){let n=null;if(Xn(e))n=e[13];else{const r=e[10];r&&(n=r)}if(!n){for(;e&&!e[4]&&e!==t;)Xn(e)&&Oh(e[1],e),e=e[3];null===e&&(e=t),Xn(e)&&Oh(e[1],e),n=e&&e[4]}e=n}}(e)}}function Oh(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof v)){const o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],u=o[s+1];try{u.call(a)}finally{}}else try{o.call(i)}finally{}}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const s=n[o+1],a="function"==typeof s?s(e):dt(e[s]),u=r[i=n[o+2]],h=n[o+3];"boolean"==typeof h?a.removeEventListener(n[o],u,h):h>=0?r[i=h]():r[i=-h].unsubscribe(),o+=2}else{const s=r[i=n[o+1]];n[o].call(s)}if(null!==r){for(let o=i+1;o<r.length;o++)r[o]();e[7]=null}}(t,e),1===e[1].type&&wt(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&hr(e[3])){n!==e[3]&&vv(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function bv(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const i=t.data[r.directiveStart].encapsulation;if(i===en.None||i===en.Emulated)return null}return zt(r,n)}(t,e.parent,n)}function Is(t,e,n,r,i){wt(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Ev(t,e,n){wt(t)?t.appendChild(e,n):e.appendChild(n)}function Dv(t,e,n,r,i){null!==r?Is(t,e,n,r,i):Ev(t,e,n)}function qu(t,e){return wt(t)?t.parentNode(e):e.parentNode}let Tv=function(t,e,n){return 40&t.type?zt(t,n):null};function Qu(t,e,n,r){const i=bv(t,r,e),o=e[11],a=function(t,e,n){return Tv(t,e,n)}(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(let u=0;u<n.length;u++)Dv(o,i,n[u],a,!1);else Dv(o,i,n,a,!1)}function Yu(t,e){if(null!==e){const n=e.type;if(3&n)return zt(e,t);if(4&n)return Nh(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return Yu(t,r);{const i=t[e.index];return hr(i)?Nh(-1,i):dt(i)}}if(32&n)return xh(e,t)()||dt(t[e.index]);{const r=Iv(t,e);return null!==r?Array.isArray(r)?r[0]:Yu(Qc(t[16]),r):Yu(t,e.next)}}return null}function Iv(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Nh(t,e){const n=10+t+1;if(n<e.length){const r=e[n],i=r[1].firstChild;if(null!==i)return Yu(r,i)}return e[7]}function Fh(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&Un(dt(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)Fh(t,e,n.child,r,i,o,!1),xa(e,t,i,a,o);else if(32&u){const h=xh(n,r);let g;for(;g=h();)xa(e,t,i,g,o);xa(e,t,i,a,o)}else 16&u?Mv(t,e,r,n,i,o):xa(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Yc(t,e,n,r,i,o){Fh(n,r,t.firstChild,e,i,o,!1)}function Mv(t,e,n,r,i,o){const s=n[16],u=s[6].projection[r.projection];if(Array.isArray(u))for(let h=0;h<u.length;h++)xa(e,t,i,u[h],o);else Fh(t,e,u,s[3],i,o,!0)}function Av(t,e,n){wt(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Vh(t,e,n){wt(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function Rv(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}const Ov="ng-template";function xx(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==Rv(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function kv(t){return 4===t.type&&t.value!==Ov}function Ix(t,e,n){return e===(4!==t.type||n?t.value:Ov)}function Px(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(Ee(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!Ix(t,u,n)||""===u&&1===e.length){if(ci(r))return!1;s=!0}}else{const h=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!xx(t.attrs,h,n)){if(ci(r))return!1;s=!0}continue}const y=Mx(8&r?"class":u,i,kv(t),n);if(-1===y){if(ci(r))return!1;s=!0;continue}if(""!==h){let w;w=y>o?"":i[y+1].toLowerCase();const P=8&r?w:null;if(P&&-1!==Rv(P,h,0)||2&r&&h!==w){if(ci(r))return!1;s=!0}}}}else{if(!s&&!ci(r)&&!ci(u))return!1;if(s&&ci(u))continue;s=!1,r=u|1&r}}return ci(r)||s}function ci(t){return 0==(1&t)}function Mx(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){const s=e[i];if(s===t)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Nv(t,e,n=!1){for(let r=0;r<e.length;r++)if(Px(t,e[r],n))return!0;return!1}function Fv(t,e){return t?":not("+e.trim()+")":e}function Nx(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!ci(s)&&(e+=Fv(o,i),i=""),r=s,o=o||!ci(r);n++}return""!==i&&(e+=Fv(o,i)),e}const Qe={};function bt(t){Vv(at(),me(),on()+t,uo())}function Vv(t,e,n,r){if(!r)if(3==(3&e[2])){const o=t.preOrderCheckHooks;null!==o&&l(e,o,n)}else{const o=t.preOrderHooks;null!==o&&d(e,o,0,n)}ai(n)}function Ku(t,e){return t<<17|e<<2}function li(t){return t>>17&32767}function Lh(t){return 2|t}function mo(t){return(131068&t)>>2}function jh(t,e){return-131069&t|e<<2}function Bh(t){return 1|t}function qv(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const s=t.data[o];ha(i),s.contentQueries(2,e[o],o)}}}function Kc(t,e,n,r,i,o,s,a,u,h){const g=e.blueprint.slice();return g[0]=i,g[2]=140|r,Cu(g),g[3]=g[15]=t,g[8]=n,g[10]=s||t&&t[10],g[11]=a||t&&t[11],g[12]=u||t&&t[12]||null,g[9]=h||t&&t[9]||null,g[6]=o,g[16]=2==e.type?t[16]:g,g}function Ia(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=lo(),s=_s(),u=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=u),null!==o&&(s?null==o.child&&null!==u.parent&&(o.child=u):null===o.next&&(o.next=u)),u}(t,e,n,r,i),ze.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const s=function(){const t=ze.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return Vr(o,!0),o}function Pa(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Jc(t,e,n){po(e);try{const r=t.viewQuery;null!==r&&np(1,r,n);const i=t.template;null!==i&&Qv(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&qv(t,e),t.staticViewQueries&&np(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)pI(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[2]&=-5,pa()}}function Ma(t,e,n,r){const i=e[2];if(256==(256&i))return;po(e);const o=uo();try{Cu(e),function(t){ze.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&Qv(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const h=t.preOrderCheckHooks;null!==h&&l(e,h,null)}else{const h=t.preOrderHooks;null!==h&&d(e,h,0,null),f(e,0)}if(function(t){for(let e=Ih(t);null!==e;e=Ph(e)){if(!e[2])continue;const n=e[9];for(let r=0;r<n.length;r++){const i=n[r],o=i[3];0==(1024&i[2])&&ki(o,1),i[2]|=1024}}}(e),function(t){for(let e=Ih(t);null!==e;e=Ph(e))for(let n=10;n<e.length;n++){const r=e[n],i=r[1];Oi(r)&&Ma(i,r,i.template,r[8])}}(e),null!==t.contentQueries&&qv(t,e),!o)if(s){const h=t.contentCheckHooks;null!==h&&l(e,h)}else{const h=t.contentHooks;null!==h&&d(e,h,1),f(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const i=n[r];if(i<0)ai(~i);else{const o=i,s=n[++r],a=n[++r];Sr(s,o),a(2,e[o])}}}finally{ai(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)hI(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&np(2,u,r),!o)if(s){const h=t.viewCheckHooks;null!==h&&l(e,h)}else{const h=t.viewHooks;null!==h&&d(e,h,2),f(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,ki(e[3],-1))}finally{pa()}}function Qx(t,e,n,r){const i=e[10],o=!uo(),s=function(t){return 4==(4&t[2])}(e);try{o&&!s&&i.begin&&i.begin(),s&&Jc(t,e,r),Ma(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function Qv(t,e,n,r,i){const o=on(),s=2&r;try{ai(-1),s&&e.length>20&&Vv(t,e,20,uo()),n(r,i)}finally{ai(o)}}function Qh(t,e,n){!ii()||(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||kc(n,e),Un(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const u=t.data[a],h=Er(u);h&&cI(e,n,u);const g=Nc(e,t,a,n);Un(g,e),null!==s&&lI(0,a-i,g,u,0,s),h&&(Ln(n.index,e)[8]=g)}}(t,e,n,zt(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,a=ze.lFrame.currentDirectiveIndex;try{ai(s);for(let u=r;u<i;u++){const h=t.data[u],g=e[u];ho(u),(null!==h.hostBindings||0!==h.hostVars||null!==h.hostAttrs)&&r_(h,g)}}finally{ai(-1),ho(a)}}(t,e,n))}function Yh(t,e,n=zt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function Kv(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Zu(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Zu(t,e,n,r,i,o,s,a,u,h){const g=20+r,y=g+i,w=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Qe);return n}(g,y),P="function"==typeof h?h():h;return w[1]={type:t,blueprint:w,template:n,queries:null,viewQuery:a,declTNode:e,data:w.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:P,incompleteFirstPass:!1}}function e_(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Ir(t,e,n,r,i,o,s,a){const u=zt(e,n);let g,h=e.inputs;!a&&null!=h&&(g=h[r])?(h_(t,n,g,r,i),ms(e)&&function(t,e){const n=Ln(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r=function(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=s?s(i,e.value||"",r):i,wt(o)?o.setProperty(u,r,i):Re(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function Kh(t,e,n,r){let i=!1;if(ii()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];Nv(n,s.selectors,!1)&&(i||(i=[]),Ou(kc(n,e),t,s.type),Er(s)?(i_(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,o_(n,t.data.length,o.length);for(let g=0;g<o.length;g++){const y=o[g];y.providersResolver&&y.providersResolver(y)}let a=!1,u=!1,h=Pa(t,e,o.length,null);for(let g=0;g<o.length;g++){const y=o[g];n.mergedAttrs=Be(n.mergedAttrs,y.hostAttrs),s_(t,n,e,h,y),aI(h,y,s),null!==y.contentQueries&&(n.flags|=8),(null!==y.hostBindings||null!==y.hostAttrs||0!==y.hostVars)&&(n.flags|=128);const w=y.type.prototype;!a&&(w.ngOnChanges||w.ngOnInit||w.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),a=!0),!u&&(w.ngOnChanges||w.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),u=!0),h++}!function(t,e){const r=e.directiveEnd,i=t.data,o=e.attrs,s=[];let a=null,u=null;for(let h=e.directiveStart;h<r;h++){const g=i[h],y=g.inputs,w=null===o||kv(e)?null:uI(y,o);s.push(w),a=e_(y,h,a),u=e_(g.outputs,h,u)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=s,e.inputs=a,e.outputs=u}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const o=n[e[i+1]];if(null==o)throw new Nt("301",`Export of name '${e[i+1]}' not found!`);r.push(e[i],o)}}}(n,r,s)}return n.mergedAttrs=Be(n.mergedAttrs,n.attrs),i}function n_(t,e,n,r,i,o){const s=o.hostBindings;if(s){let a=t.hostBindingOpCodes;null===a&&(a=t.hostBindingOpCodes=[]);const u=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(a)!=u&&a.push(u),a.push(r,i,s)}}function r_(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function i_(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function aI(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Er(e)&&(n[""]=t)}}function o_(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function s_(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=ao(i.type)),s=new v(o,Er(i),null);t.blueprint[r]=s,n[r]=s,n_(t,e,0,r,Pa(t,n,i.hostVars,Qe),i)}function cI(t,e,n){const r=zt(e,t),i=Kv(n),o=t[10],s=ed(t,Kc(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function Bi(t,e,n,r,i,o){const s=zt(t,e);!function(t,e,n,r,i,o,s){if(null==o)wt(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?we(o):s(o,r||"",i);wt(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],s,o,t.value,n,r,i)}function lI(t,e,n,r,i,o){const s=o[e];if(null!==s){const a=r.setInput;for(let u=0;u<s.length;){const h=s[u++],g=s[u++],y=s[u++];null!==a?r.setInput(n,y,h,g):n[g]=y}}}function uI(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function a_(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function hI(t,e){const n=Ln(e,t);if(Oi(n)){const r=n[1];80&n[2]?Ma(r,n,r.template,n[8]):n[5]>0&&Xh(n)}}function Xh(t){for(let r=Ih(t);null!==r;r=Ph(r))for(let i=10;i<r.length;i++){const o=r[i];if(1024&o[2]){const s=o[1];Ma(s,o,s.template,o[8])}else o[5]>0&&Xh(o)}const n=t[1].components;if(null!==n)for(let r=0;r<n.length;r++){const i=Ln(n[r],t);Oi(i)&&i[5]>0&&Xh(i)}}function pI(t,e){const n=Ln(e,t),r=n[1];(function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])})(r,n),Jc(r,n,n[8])}function ed(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Zh(t){for(;t;){t[2]|=64;const e=Qc(t);if(du(t)&&!e)return t;t=e}return null}function tp(t,e,n){const r=e[10];r.begin&&r.begin();try{Ma(t,e,t.template,n)}catch(i){throw f_(e,i),i}finally{r.end&&r.end()}}function c_(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Sh(n),i=r[1];Qx(i,r,i.template,n)}}(t[8])}function np(t,e,n){ha(0),e(t,n)}const _I=(()=>Promise.resolve(null))();function l_(t){return t[7]||(t[7]=[])}function u_(t){return t.cleanup||(t.cleanup=[])}function f_(t,e){const n=t[9],r=n?n.get(xs,null):null;r&&r.handleError(e)}function h_(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],h=t.data[s];null!==h.setInput?h.setInput(u,i,r,a):u[a]=i}}function vo(t,e,n){const r=la(e,t);!function(t,e,n){wt(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}function td(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?i=pe(i,a):2==o&&(r=pe(r,a+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const Aa=new nt("INJECTOR",-1);class p_{get(e,n=Bc){if(n===Bc){const r=new Error(`NullInjectorError: No provider for ${ae(e)}!`);throw r.name="NullInjectorError",r}return n}}const Xc=new nt("Set Injector scope."),Zc={},EI={};let rp;function g_(){return void 0===rp&&(rp=new p_),rp}function m_(t,e=null,n=null,r){return new SI(t,n,e||g_(),r)}class SI{constructor(e,n,r,i=null){this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const o=[];n&&Fi(n,a=>this.processProvider(a,e,n)),Fi([e],a=>this.processInjectorType(a,[],o)),this.records.set(Aa,Ra(void 0,this));const s=this.records.get(Xc);this.scope=null!=s?s.value:null,this.source=i||("object"==typeof e?null:ae(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,n=Bc,r=Ne.Default){this.assertNotDestroyed();const i=Ea(this),o=Ii(void 0);try{if(!(r&Ne.SkipSelf)){let a=this.records.get(e);if(void 0===a){const u=function(t){return"function"==typeof t||"object"==typeof t&&t instanceof nt}(e)&&ei(e);a=u&&this.injectableDefInScope(u)?Ra(ip(e),Zc):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(r&Ne.Self?g_():this.parent).get(e,n=r&Ne.Optional&&n===Bc?null:n)}catch(s){if("NullInjectorError"===s.name){if((s[Ca]=s[Ca]||[]).unshift(ae(e)),i)throw s;return Vy(s,e,"R3InjectorError",this.source)}throw s}finally{Ii(o),Ea(i)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((r,i)=>e.push(ae(i))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(e,n,r){if(!(e=de(e)))return!1;let i=Ks(e);const o=null==i&&e.ngModule||void 0,s=void 0===o?e:o,a=-1!==r.indexOf(s);if(void 0!==o&&(i=Ks(o)),null==i)return!1;if(null!=i.imports&&!a){let g;r.push(s);try{Fi(i.imports,y=>{this.processInjectorType(y,n,r)&&(void 0===g&&(g=[]),g.push(y))})}finally{}if(void 0!==g)for(let y=0;y<g.length;y++){const{ngModule:w,providers:P}=g[y];Fi(P,F=>this.processProvider(F,w,P||Ve))}}this.injectorDefTypes.add(s);const u=ao(s)||(()=>new s);this.records.set(s,Ra(u,Zc));const h=i.providers;if(null!=h&&!a){const g=e;Fi(h,y=>this.processProvider(y,g,h))}return void 0!==o&&void 0!==e.providers}processProvider(e,n,r){let i=Oa(e=de(e))?e:de(e&&e.provide);const o=function(t,e,n){return v_(t)?Ra(void 0,t.useValue):Ra(y_(t),Zc)}(e);if(Oa(e)||!0!==e.multi)this.records.get(i);else{let s=this.records.get(i);s||(s=Ra(void 0,Zc,!0),s.factory=()=>ws(s.multi),this.records.set(i,s)),i=e,s.multi.push(e)}this.records.set(i,o)}hydrate(e,n){return n.value===Zc&&(n.value=EI,n.value=n.factory()),"object"==typeof n.value&&n.value&&function(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this.onDestroy.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=de(e.providedIn);return"string"==typeof n?"any"===n||n===this.scope:this.injectorDefTypes.has(n)}}function ip(t){const e=ei(t),n=null!==e?e.factory:ao(t);if(null!==n)return n;if(t instanceof nt)throw new Error(`Token ${ae(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const r=function(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}(e,"?");throw new Error(`Can't resolve all parameters for ${ae(t)}: (${r.join(", ")}).`)}const n=function(t){const e=t&&(t[xi]||t[iu]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function y_(t,e,n){let r;if(Oa(t)){const i=de(t);return ao(i)||ip(i)}if(v_(t))r=()=>de(t.useValue);else if(function(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...ws(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>De(de(t.useExisting));else{const i=de(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return ao(i)||ip(i);r=()=>new i(...ws(t.deps))}return r}function Ra(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function v_(t){return null!==t&&"object"==typeof t&&gh in t}function Oa(t){return"function"==typeof t}const __=function(t,e,n){return function(t,e=null,n=null,r){const i=m_(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let Tt=(()=>{class t{static create(n,r){return Array.isArray(n)?__(n,r,""):__(n.providers,n.parent,n.name||"")}}return t.THROW_IF_NOT_FOUND=Bc,t.NULL=new p_,t.\u0275prov=Oe({token:t,providedIn:"any",factory:()=>De(Aa)}),t.__NG_ELEMENT_ID__=-1,t})();function zI(t,e){c(Sh(t)[1],rn())}function jt(t){let e=function(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const r=[t];for(;e;){let i;if(Er(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const s=t;s.inputs=up(t.inputs),s.declaredInputs=up(t.declaredInputs),s.outputs=up(t.outputs);const a=i.hostBindings;a&&YI(t,a);const u=i.viewQuery,h=i.contentQueries;if(u&&qI(t,u),h&&QI(t,h),ne(t.inputs,i.inputs),ne(t.declaredInputs,i.declaredInputs),ne(t.outputs,i.outputs),Er(i)&&i.data.animation){const g=t.data;g.animation=(g.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(t),a===jt&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Be(i.hostAttrs,n=Be(n,i.hostAttrs))}}(r)}function up(t){return t===Mi?{}:t===Ve?[]:t}function qI(t,e){const n=t.viewQuery;t.viewQuery=n?(r,i)=>{e(r,i),n(r,i)}:e}function QI(t,e){const n=t.contentQueries;t.contentQueries=n?(r,i,o)=>{e(r,i,o),n(r,i,o)}:e}function YI(t,e){const n=t.hostBindings;t.hostBindings=n?(r,i)=>{e(r,i),n(r,i)}:e}let nd=null;function ka(){if(!nd){const t=yt.Symbol;if(t&&t.iterator)nd=t.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let n=0;n<e.length;++n){const r=e[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(nd=r)}}}return nd}function tl(t){return!!dp(t)&&(Array.isArray(t)||!(t instanceof Map)&&ka()in t)}function dp(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Hn(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Ps(t,e,n,r){const i=Hn(t,e,n);return Hn(t,e+1,r)||i}function Pr(t,e,n,r){const i=me();return Hn(i,fo(),e)&&(at(),Bi($t(),i,t,e,n,r)),Pr}function Fa(t,e,n,r){return Hn(t,fo(),n)?e+we(n)+r:Qe}function La(t,e,n,r,i,o,s,a){const h=function(t,e,n,r,i){const o=Ps(t,e,n,r);return Hn(t,e+2,i)||o}(t,Dr(),n,i,s);return oi(3),h?e+we(n)+r+we(i)+o+we(s)+a:Qe}function An(t,e,n,r,i,o,s,a){const u=me(),h=at(),g=t+20,y=h.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const h=e.consts,g=Ia(e,t,4,s||null,ri(h,a));Kh(e,n,g,ri(h,u)),c(e,g);const y=g.tViews=Zu(2,g,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,h);return null!==e.queries&&(e.queries.template(e,g),y.queries=e.queries.embeddedTView(g)),g}(g,h,u,e,n,r,i,o,s):h.data[g];Vr(y,!1);const w=u[11].createComment("");Qu(h,u,w,y),Un(w,u),ed(u,u[g]=a_(w,u,w,y)),na(y)&&Qh(h,u,y),null!=s&&Yh(u,y,a)}function he(t,e=Ne.Default){const n=me();return null===n?De(t,e):Iy(rn(),n,de(t),e)}function Ot(t,e,n){const r=me();return Hn(r,fo(),e)&&Ir(at(),$t(),r,t,e,r[11],n,!1),Ot}function mp(t,e,n,r,i){const s=i?"class":"style";h_(t,n,e.inputs[s],s,r)}function pt(t,e,n,r){const i=me(),o=at(),s=20+t,a=i[11],u=i[s]=Ah(a,e,ze.lFrame.currentNamespace),h=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,h=Ia(e,t,2,i,ri(a,o));return Kh(e,n,h,ri(a,s)),null!==h.attrs&&td(h,h.attrs,!1),null!==h.mergedAttrs&&td(h,h.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,h),h}(s,o,i,0,e,n,r):o.data[s];Vr(h,!0);const g=h.mergedAttrs;null!==g&&Te(a,u,g);const y=h.classes;null!==y&&Vh(a,u,y);const w=h.styles;null!==w&&Av(a,u,w),64!=(64&h.flags)&&Qu(o,i,u,h),0===ze.lFrame.elementDepthCount&&Un(u,i),ze.lFrame.elementDepthCount++,na(h)&&(Qh(o,i,h),function(t,e,n){if(ta(e)){const i=e.directiveEnd;for(let o=e.directiveStart;o<i;o++){const s=t.data[o];s.contentQueries&&s.contentQueries(1,n[o],o)}}}(o,h,i)),null!==r&&Yh(i,h)}function gt(){let t=rn();_s()?ze.lFrame.isParent=!1:(t=t.parent,Vr(t,!1));const e=t;ze.lFrame.elementDepthCount--;const n=at();n.firstCreatePass&&(c(n,t),ta(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&mp(n,e,me(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&mp(n,e,me(),e.stylesWithoutHost,!1)}function fi(t,e,n,r){pt(t,e,n,r),gt()}function Ms(){return me()}function rl(t){return!!t&&"function"==typeof t.then}const od=function(t){return!!t&&"function"==typeof t.subscribe};function Gt(t,e,n,r){const i=me(),o=at(),s=rn();return function(t,e,n,r,i,o,s,a){const u=na(r),g=t.firstCreatePass&&u_(t),y=e[8],w=l_(e);let P=!0;if(3&r.type||a){const Q=zt(r,e),fe=a?a(Q):Q,ce=w.length,Pe=a?Fe=>a(dt(Fe[r.index])):r.index;if(wt(n)){let Fe=null;if(!a&&u&&(Fe=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===n&&i[o+1]===r){const a=e[7],u=i[o+2];return a.length>u?a[u]:null}"string"==typeof s&&(o+=2)}return null}(t,e,i,r.index)),null!==Fe)(Fe.__ngLastListenerFn__||Fe).__ngNextListenerFn__=o,Fe.__ngLastListenerFn__=o,P=!1;else{o=yp(r,e,y,o,!1);const rt=n.listen(fe,i,o);w.push(o,rt),g&&g.push(i,Pe,ce,ce+1)}}else o=yp(r,e,y,o,!0),fe.addEventListener(i,o,s),w.push(o),g&&g.push(i,Pe,ce,s)}else o=yp(r,e,y,o,!1);const F=r.outputs;let Z;if(P&&null!==F&&(Z=F[i])){const Q=Z.length;if(Q)for(let fe=0;fe<Q;fe+=2){const _n=e[Z[fe]][Z[fe+1]].subscribe(o),Yr=w.length;w.push(o,_n),g&&g.push(i,r.index,Yr,-(Yr+1))}}}(o,i,i[11],s,t,e,!!n,r),Gt}function cb(t,e,n,r){try{return!1!==n(r)}catch(i){return f_(t,i),!1}}function yp(t,e,n,r,i){return function o(s){if(s===Function)return r;const a=2&t.flags?Ln(t.index,e):e;0==(32&e[2])&&Zh(a);let u=cb(e,0,r,s),h=o.__ngNextListenerFn__;for(;h;)u=cb(e,0,h,s)&&u,h=h.__ngNextListenerFn__;return i&&!1===u&&(s.preventDefault(),s.returnValue=!1),u}}function gn(t=1){return function(t){return(ze.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,ze.lFrame.contextLView))[8]}(t)}function sd(t,e,n,r,i){const o=me(),s=Fa(o,e,n,r);return s!==Qe&&Ir(at(),$t(),o,t,s,o[11],i,!1),sd}function vb(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?li(o):mo(o),u=!1;for(;0!==a&&(!1===u||s);){const g=t[a+1];FP(t[a],e)&&(u=!0,t[a+1]=r?Bh(g):Lh(g)),a=r?li(g):mo(g)}u&&(t[n+1]=r?Lh(o):Bh(o))}function FP(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&ba(t,e)>=0}const mn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function _b(t){return t.substring(mn.key,mn.keyEnd)}function bb(t,e){const n=mn.textEnd;return n===e?-1:(e=mn.keyEnd=function(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,mn.key=e,n),za(t,e,n))}function za(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function vp(t,e,n){return hi(t,e,n,!1),vp}function As(t,e){return hi(t,e,null,!0),As}function wb(t){!function(t,e,n,r){const i=at(),o=oi(2);i.firstUpdatePass&&xb(i,null,o,r);const s=me();if(n!==Qe&&Hn(s,o,n)){const a=i.data[on()];if(Ab(a,r)&&!Tb(i,o)){let u=r?a.classesWithoutHost:a.stylesWithoutHost;null!==u&&(n=pe(u,n||"")),mp(i,a,s,n,r)}else!function(t,e,n,r,i,o,s,a){i===Qe&&(i=Ve);let u=0,h=0,g=0<i.length?i[0]:null,y=0<o.length?o[0]:null;for(;null!==g||null!==y;){const w=u<i.length?i[u+1]:void 0,P=h<o.length?o[h+1]:void 0;let Z,F=null;g===y?(u+=2,h+=2,w!==P&&(F=y,Z=P)):null===y||null!==g&&g<y?(u+=2,F=g):(h+=2,F=y,Z=P),null!==F&&Pb(t,e,n,r,F,Z,s,a),g=u<i.length?i[u]:null,y=h<o.length?o[h]:null}}(i,a,s,s[11],s[o+1],s[o+1]=function(t,e,n){if(null==n||""===n)return Ve;const r=[],i=Tr(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if("object"==typeof i)for(const o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else"string"==typeof i&&e(r,i);return r}(t,e,n),r,o)}}(wr,$i,t,!0)}function $i(t,e){for(let n=function(t){return function(t){mn.key=0,mn.keyEnd=0,mn.value=0,mn.valueEnd=0,mn.textEnd=t.length}(t),bb(t,za(t,0,mn.textEnd))}(e);n>=0;n=bb(e,n))wr(t,_b(e),!0)}function hi(t,e,n,r){const i=me(),o=at(),s=oi(2);o.firstUpdatePass&&xb(o,t,s,r),e!==Qe&&Hn(i,s,e)&&Pb(o,o.data[on()],i,i[11],t,i[s+1]=function(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=ae(Tr(t)))),t}(e,n),r,s)}function Tb(t,e){return e>=t.expandoStartIndex}function xb(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[on()],s=Tb(t,n);Ab(o,r)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=ze.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=il(n=_p(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=_p(i,t,e,n,r),null===o){let u=function(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==mo(r))return t[li(r)]}(t,e,r);void 0!==u&&Array.isArray(u)&&(u=_p(null,t,e,u[1],r),u=il(u,e.attrs,r),function(t,e,n,r){t[li(n?e.classBindings:e.styleBindings)]=r}(t,e,r,u))}else o=function(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=il(r,t[o].hostAttrs,n);return il(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=li(s),u=mo(s);t[r]=n;let g,h=!1;if(Array.isArray(n)){const y=n;g=y[1],(null===g||ba(y,g)>0)&&(h=!0)}else g=n;if(i)if(0!==u){const w=li(t[a+1]);t[r+1]=Ku(w,a),0!==w&&(t[w+1]=jh(t[w+1],r)),t[a+1]=function(t,e){return 131071&t|e<<17}(t[a+1],r)}else t[r+1]=Ku(a,0),0!==a&&(t[a+1]=jh(t[a+1],r)),a=r;else t[r+1]=Ku(u,0),0===a?a=r:t[u+1]=jh(t[u+1],r),u=r;h&&(t[r+1]=Lh(t[r+1])),vb(t,g,r,!0),vb(t,g,r,!1),function(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&ba(o,e)>=0&&(n[r+1]=Bh(n[r+1]))}(e,g,t,r,o),s=Ku(a,u),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}function _p(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=il(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function il(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),wr(t,s,!!n||e[++o]))}return void 0===t?null:t}function Pb(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,h=u[a+1];ad(function(t){return 1==(1&t)}(h)?Mb(u,e,n,i,mo(h),s):void 0)||(ad(o)||function(t){return 2==(2&t)}(h)&&(o=Mb(u,null,n,i,a,s)),function(t,e,n,r,i){const o=wt(t);if(e)i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r);else{let s=-1===r.indexOf("-")?void 0:xr.DashCase;if(null==i)o?t.removeStyle(n,r,s):n.style.removeProperty(r);else{const a="string"==typeof i&&i.endsWith("!important");a&&(i=i.slice(0,-10),s|=xr.Important),o?t.setStyle(n,r,i,s):n.style.setProperty(r,i,a?"important":"")}}}(r,s,la(on(),n),i,o))}function Mb(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const u=t[i],h=Array.isArray(u),g=h?u[1]:u,y=null===g;let w=n[i+1];w===Qe&&(w=y?Ve:void 0);let P=y?dh(w,r):g===r?w:void 0;if(h&&!ad(P)&&(P=dh(u,r)),ad(P)&&(a=P,s))return a;const F=t[i+1];i=s?li(F):mo(F)}if(null!==e){let u=o?e.residualClasses:e.residualStyles;null!=u&&(a=dh(u,r))}return a}function ad(t){return void 0!==t}function Ab(t,e){return 0!=(t.flags&(e?16:32))}function sn(t,e=""){const n=me(),r=at(),i=t+20,o=r.firstCreatePass?Ia(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return wt(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Qu(r,n,s,o),Vr(o,!1)}function cd(t){return Rs("",t,""),cd}function Rs(t,e,n){const r=me(),i=Fa(r,t,e,n);return i!==Qe&&vo(r,on(),i),Rs}function ol(t,e,n,r,i){const o=me(),s=function(t,e,n,r,i,o){const a=Ps(t,Dr(),n,i);return oi(2),a?e+we(n)+r+we(i)+o:Qe}(o,t,e,n,r,i);return s!==Qe&&vo(o,on(),s),ol}function bp(t,e,n,r,i,o,s){const a=me(),u=La(a,t,e,n,r,i,o,s);return u!==Qe&&vo(a,on(),u),bp}const Os=void 0;var mM=["en",[["a","p"],["AM","PM"],Os],[["AM","PM"],Os,Os],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Os,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Os,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Os,"{1} 'at' {0}",Os],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){const e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let Wa={};function Yb(t){return t in Wa||(Wa[t]=yt.ng&&yt.ng.common&&yt.ng.common.locales&&yt.ng.common.locales[t]),Wa[t]}var Me=(()=>((Me=Me||{})[Me.LocaleId=0]="LocaleId",Me[Me.DayPeriodsFormat=1]="DayPeriodsFormat",Me[Me.DayPeriodsStandalone=2]="DayPeriodsStandalone",Me[Me.DaysFormat=3]="DaysFormat",Me[Me.DaysStandalone=4]="DaysStandalone",Me[Me.MonthsFormat=5]="MonthsFormat",Me[Me.MonthsStandalone=6]="MonthsStandalone",Me[Me.Eras=7]="Eras",Me[Me.FirstDayOfWeek=8]="FirstDayOfWeek",Me[Me.WeekendRange=9]="WeekendRange",Me[Me.DateFormat=10]="DateFormat",Me[Me.TimeFormat=11]="TimeFormat",Me[Me.DateTimeFormat=12]="DateTimeFormat",Me[Me.NumberSymbols=13]="NumberSymbols",Me[Me.NumberFormats=14]="NumberFormats",Me[Me.CurrencyCode=15]="CurrencyCode",Me[Me.CurrencySymbol=16]="CurrencySymbol",Me[Me.CurrencyName=17]="CurrencyName",Me[Me.Currencies=18]="Currencies",Me[Me.Directionality=19]="Directionality",Me[Me.PluralCase=20]="PluralCase",Me[Me.ExtraData=21]="ExtraData",Me))();const ld="en-US";let Kb=ld;function Ep(t){bn(t,"Expected localeId to be defined"),"string"==typeof t&&(Kb=t.toLowerCase().replace(/_/g,"-"))}function wp(t,e,n,r,i){if(t=de(t),Array.isArray(t))for(let o=0;o<t.length;o++)wp(t[o],e,n,r,i);else{const o=at(),s=me();let a=Oa(t)?t:de(t.provide),u=y_(t);const h=rn(),g=1048575&h.providerIndexes,y=h.directiveStart,w=h.providerIndexes>>20;if(Oa(t)||!t.multi){const P=new v(u,i,he),F=xp(a,e,i?g:g+w,y);-1===F?(Ou(kc(h,s),o,a),Tp(o,t,e.length),e.push(a),h.directiveStart++,h.directiveEnd++,i&&(h.providerIndexes+=1048576),n.push(P),s.push(P)):(n[F]=P,s[F]=P)}else{const P=xp(a,e,g+w,y),F=xp(a,e,g,g+w),Z=P>=0&&n[P],Q=F>=0&&n[F];if(i&&!Q||!i&&!Z){Ou(kc(h,s),o,a);const fe=function(t,e,n,r,i){const o=new v(t,n,he);return o.multi=[],o.index=e,o.componentProviders=0,bC(o,i,r&&!n),o}(i?hA:fA,n.length,i,r,u);!i&&Q&&(n[F].providerFactory=fe),Tp(o,t,e.length,0),e.push(a),h.directiveStart++,h.directiveEnd++,i&&(h.providerIndexes+=1048576),n.push(fe),s.push(fe)}else Tp(o,t,P>-1?P:F,bC(n[i?F:P],u,!i&&r));!i&&r&&Q&&n[F].componentProviders++}}}function Tp(t,e,n,r){const i=Oa(e);if(i||function(t){return!!t.useClass}(e)){const s=(e.useClass||e).prototype.ngOnDestroy;if(s){const a=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const u=a.indexOf(n);-1===u?a.push(n,[r,s]):a[u+1].push(r,s)}else a.push(n,s)}}}function bC(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function xp(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function fA(t,e,n,r){return Ip(this.multi,[])}function hA(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=Nc(n,n[1],this.providerFactory.index,r);o=a.slice(0,s),Ip(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],Ip(i,o);return o}function Ip(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function Bt(t,e=[]){return n=>{n.providersResolver=(r,i)=>function(t,e,n){const r=at();if(r.firstCreatePass){const i=Er(t);wp(n,r.data,r.blueprint,i,!0),wp(e,r.data,r.blueprint,i,!1)}}(r,i?i(t):t,e)}}class CC{}const DC="ngComponent";class mA{resolveComponentFactory(e){throw function(t){const e=Error(`No component factory found for ${ae(t)}. Did you add it to @NgModule.entryComponents?`);return e[DC]=t,e}(e)}}let ks=(()=>{class t{}return t.NULL=new mA,t})();function pd(...t){}function Qa(t,e){return new Sn(zt(t,e))}const _A=function(){return Qa(rn(),me())};let Sn=(()=>{class t{constructor(n){this.nativeElement=n}}return t.__NG_ELEMENT_ID__=_A,t})();class gd{}let bo=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>CA(),t})();const CA=function(){const t=me(),n=Ln(rn().index,t);return function(t){return t[11]}(Xn(n)?n:t)};let Mp=(()=>{class t{}return t.\u0275prov=Oe({token:t,providedIn:"root",factory:()=>null}),t})();class ul{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const wC=new ul("12.2.10");class TC{constructor(){}supports(e){return tl(e)}create(e){return new wA(e)}}const SA=(t,e)=>e;class wA{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||SA}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){const s=!r||n&&n.currentIndex<IC(r,i,o)?n:r,a=IC(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,null==s.previousIndex)i++;else{o||(o=[]);const h=a-i,g=u-i;if(h!=g){for(let w=0;w<h;w++){const P=w<o.length?o[w]:o[w]=0,F=P+w;g<=F&&F<h&&(o[w]=P+1)}o[s.previousIndex]=g-h}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!tl(e))throw new Error(`Error trying to diff '${ae(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,o,s,n=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)):(n=this._mismatch(n,o,s,a),r=!0),n=n._next}else i=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[ka()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(e,a=>{s=this._trackByFn(i,a),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,s,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new TA(n,r),o,i),e}_verifyReinsertion(e,n,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,o=e._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){const i=null===n?this._itHead:n._next;return e._next=i,e._prev=n,null===i?this._itTail=e:i._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new xC),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,r=e._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new xC),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class TA{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class xA{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const n=e._prevDup,r=e._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class xC{constructor(){this.map=new Map}put(e){const n=e.trackById;let r=this.map.get(n);r||(r=new xA,this.map.set(n,r)),r.add(e)}get(e,n){const i=this.map.get(e);return i?i.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function IC(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class PC{constructor(){}supports(e){return e instanceof Map||dp(e)}create(){return new IA}}class IA{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let n;for(n=this._mapHead;null!==n;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;null!==n;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}diff(e){if(e){if(!(e instanceof Map||dp(e)))throw new Error(`Error trying to diff '${ae(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(n&&n.key===i)this._maybeAddToChanges(n,r),this._appendAfter=n,n=n._next;else{const o=this._getOrCreateRecordForKey(i,r);n=this._insertBeforeOrAppend(n,o)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){const r=e._prev;return n._next=e,n._prev=r,e._prev=n,r&&(r._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,n);const o=i._prev,s=i._next;return o&&(o._next=s),s&&(s._prev=o),i._next=null,i._prev=null,i}const r=new PA(e);return this._records.set(e,r),r.currentValue=n,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(r=>n(e[r],r))}}class PA{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function MC(){return new dl([new TC])}let dl=(()=>{class t{constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||MC()),deps:[[t,new $o,new mr]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new Error(`Cannot find a differ supporting object '${n}' of type '${function(t){return t.name||typeof t}(n)}'`)}}return t.\u0275prov=Oe({token:t,providedIn:"root",factory:MC}),t})();function AC(){return new Ya([new PC])}let Ya=(()=>{class t{constructor(n){this.factories=n}static create(n,r){if(r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||AC()),deps:[[t,new $o,new mr]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(r)return r;throw new Error(`Cannot find a differ supporting object '${n}'`)}}return t.\u0275prov=Oe({token:t,providedIn:"root",factory:AC}),t})();function md(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(dt(o)),hr(o))for(let a=10;a<o.length;a++){const u=o[a],h=u[1].firstChild;null!==h&&md(u[1],u,h,r)}const s=n.type;if(8&s)md(t,e,n.child,r);else if(32&s){const a=xh(n,e);let u;for(;u=a();)r.push(u)}else if(16&s){const a=Iv(e,n);if(Array.isArray(a))r.push(...a);else{const u=Qc(e[16]);md(u[1],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}class fl{constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,n=e[1];return md(n,e,n.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(hr(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(Rh(e,r),Ss(n,r))}this._attachedToViewContainer=!1}_v(this._lView[1],this._lView)}onDestroy(e){!function(t,e,n,r){const i=l_(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&u_(t).push(r,i.length-1))}(this._lView[1],this._lView,null,e)}markForCheck(){Zh(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){tp(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){da(!0);try{tp(t,e,n)}finally{da(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function(t,e){Yc(t,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}class AA extends fl{constructor(e){super(e),this._view=e}detectChanges(){c_(this._view)}checkNoChanges(){!function(t){da(!0);try{c_(t)}finally{da(!1)}}(this._view)}get context(){return null}}const OA=function(t){return function(t,e,n){if(ms(t)&&!n){const r=Ln(t.index,e);return new fl(r,r)}return 47&t.type?new fl(e[16],e):null}(rn(),me(),16==(16&t))};let Ap=(()=>{class t{}return t.__NG_ELEMENT_ID__=OA,t})();const FA=[new PC],LA=new dl([new TC]),jA=new Ya(FA),UA=function(){return function(t,e){return 4&t.type?new $A(e,t,Qa(t,e)):null}(rn(),me())};let Co=(()=>{class t{}return t.__NG_ELEMENT_ID__=UA,t})();const HA=Co,$A=class extends HA{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}createEmbeddedView(e){const n=this._declarationTContainer.tViews,r=Kc(this._declarationLView,n,e,16,null,n.declTNode,null,null,null,null);r[17]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[19];return null!==o&&(r[19]=o.createEmbeddedView(n)),Jc(n,r,e),new fl(r)}};class Gi{}class RC{}const WA=function(){return function(t,e){let n;const r=e[t.index];if(hr(r))n=r;else{let i;if(8&t.type)i=dt(r);else{const o=e[11];i=o.createComment("");const s=zt(t,e);Is(o,qu(o,s),i,function(t,e){return wt(t)?t.nextSibling(e):e.nextSibling}(o,s),!1)}e[t.index]=n=a_(r,e,i,t),ed(e,n)}return new OC(n,t,e)}(rn(),me())};let gi=(()=>{class t{}return t.__NG_ELEMENT_ID__=WA,t})();const QA=gi,OC=class extends QA{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Qa(this._hostTNode,this._hostLView)}get injector(){return new ma(this._hostTNode,this._hostLView)}get parentInjector(){const e=Ru(this._hostTNode,this._hostLView);if(mt(e)){const n=ht(e,this._hostLView),r=_t(e);return new ma(n[1].data[r+8],n)}return new ma(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=kC(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,n,r){const i=e.createEmbeddedView(n||{});return this.insert(i,r),i}createComponent(e,n,r,i,o){const s=r||this.parentInjector;if(!o&&null==e.ngModule&&s){const u=s.get(Gi,null);u&&(o=u)}const a=e.create(s,i,void 0,o);return this.insert(a.hostView,n),a}insert(e,n){const r=e._lView,i=r[1];if(function(t){return hr(t[3])}(r)){const g=this.indexOf(e);if(-1!==g)this.detach(g);else{const y=r[3],w=new OC(y,y[6],y[3]);w.detach(w.indexOf(e))}}const o=this._adjustIndex(n),s=this._lContainer;!function(t,e,n,r){const i=10+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-10?(e[4]=n[i],Vu(n,10+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(i,r,s,o);const a=Nh(o,s),u=r[11],h=qu(u,s[7]);return null!==h&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,Yc(t,r,n,1,i,o)}(i,s[6],u,r,h,a),e.attachToViewContainerRef(),Vu(Rp(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=kC(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=Rh(this._lContainer,n);r&&(Ss(Rp(this._lContainer),n),_v(r[1],r))}detach(e){const n=this._adjustIndex(e,-1),r=Rh(this._lContainer,n);return r&&null!=Ss(Rp(this._lContainer),n)?new fl(r):null}_adjustIndex(e,n=0){return null==e?this.length+n:e}};function kC(t){return t[8]}function Rp(t){return t[8]||(t[8]=[])}const Za={};class t0 extends ks{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=Jt(e);return new r0(n,this.ngModule)}}function n0(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const GR=new nt("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>dv});class r0 extends CC{constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function(t){return t.map(Nx).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}get inputs(){return n0(this.componentDef.inputs)}get outputs(){return n0(this.componentDef.outputs)}create(e,n,r,i){const o=(i=i||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,Za,i);return o!==Za||r===Za?o:e.get(n,r,i)}}}(e,i.injector):e,s=o.get(gd,vu),a=o.get(Mp,null),u=s.createRenderer(null,this.componentDef),h=this.componentDef.selectors[0][0]||"div",g=r?function(t,e,n){if(wt(t))return t.selectRootElement(e,n===en.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(u,r,this.componentDef.encapsulation):Ah(s.createRenderer(null,this.componentDef),h,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(h)),y=this.componentDef.onPush?576:528,w=function(t,e){return{components:[],scheduler:t||dv,clean:_I,playerHandler:e||null,flags:0}}(),P=Zu(0,null,null,1,0,null,null,null,null,null),F=Kc(null,P,w,y,null,null,s,u,a,o);let Z,Q;po(F);try{const fe=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const u=Ia(s,20,2,"#host",null),h=u.mergedAttrs=e.hostAttrs;null!==h&&(td(u,h,!0),null!==t&&(Te(i,t,h),null!==u.classes&&Vh(i,t,u.classes),null!==u.styles&&Av(i,t,u.styles)));const g=r.createRenderer(t,e),y=Kc(n,Kv(e),null,e.onPush?64:16,n[20],u,r,g,o||null,null);return s.firstCreatePass&&(Ou(kc(u,n),s,e.type),i_(s,u),o_(u,n.length,1)),ed(n,y),n[20]=y}(g,this.componentDef,F,s,u);if(g)if(r)Te(u,g,["ng-version",wC.full]);else{const{attrs:ce,classes:Pe}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!ci(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);ce&&Te(u,g,ce),Pe&&Pe.length>0&&Vh(u,g,Pe.join(" "))}if(Q=ua(P,20),void 0!==n){const ce=Q.projection=[];for(let Pe=0;Pe<this.ngContentSelectors.length;Pe++){const Fe=n[Pe];ce.push(null!=Fe?Array.from(Fe):null)}}Z=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=rn();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),s_(t,r,e,Pa(t,e,1,null),n));const i=Nc(e,t,r.directiveStart,r);Un(i,e);const o=zt(r,e);return o&&Un(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(u=>u(s,e)),e.contentQueries){const u=rn();e.contentQueries(1,s,u.directiveStart)}const a=rn();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(ai(a.index),n_(n[1],a,0,a.directiveStart,a.directiveEnd,e),r_(e,s)),s}(fe,this.componentDef,F,w,[zI]),Jc(P,F,null)}finally{pa()}return new qR(this.componentType,Z,Qa(Q,F),F,Q)}}class qR extends class{}{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.instance=n,this.hostView=this.changeDetectorRef=new AA(i),this.componentType=e}get injector(){return new ma(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}const ec=new Map;class KR extends Gi{constructor(e,n){super(),this._parent=n,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new t0(this);const r=Yn(e),i=function(t){return t[Xs]||null}(e);i&&Ep(i),this._bootstrapComponents=ji(r.bootstrap),this._r3Injector=m_(e,n,[{provide:Gi,useValue:this},{provide:ks,useValue:this.componentFactoryResolver}],ae(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,n=Tt.THROW_IF_NOT_FOUND,r=Ne.Default){return e===Tt||e===Gi||e===Aa?this:this._r3Injector.get(e,n,r)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class zp extends RC{constructor(e){super(),this.moduleType=e,null!==Yn(e)&&function(t){const e=new Set;!function n(r){const i=Yn(r,!0),o=i.id;null!==o&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${ae(e)} vs ${ae(e.name)}`)}(o,ec.get(o),r),ec.set(o,r));const s=ji(i.imports);for(const a of s)e.has(a)||(e.add(a),n(a))}(t)}(e)}create(e){return new KR(this.moduleType,e)}}function Wp(t){return e=>{setTimeout(t,void 0,e)}}const yn=class extends ye{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){var i,o,s;let a=e,u=n||(()=>null),h=r;if(e&&"object"==typeof e){const y=e;a=null===(i=y.next)||void 0===i?void 0:i.bind(y),u=null===(o=y.error)||void 0===o?void 0:o.bind(y),h=null===(s=y.complete)||void 0===s?void 0:s.bind(y)}this.__isAsync&&(u=Wp(u),a&&(a=Wp(a)),h&&(h=Wp(h)));const g=super.subscribe({next:a,error:u,complete:h});return e instanceof x&&e.add(g),g}};Symbol;const Sl=new nt("Application Initializer");let nc=(()=>{class t{constructor(n){this.appInits=n,this.resolve=pd,this.reject=pd,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const n=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const o=this.appInits[i]();if(rl(o))n.push(o);else if(od(o)){const s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});n.push(s)}}Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}}return t.\u0275fac=function(n){return new(n||t)(De(Sl,8))},t.\u0275prov=Oe({token:t,factory:t.\u0275fac}),t})();const wl=new nt("AppId"),XO={provide:wl,useFactory:function(){return`${sg()}${sg()}${sg()}`},deps:[]};function sg(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const O0=new nt("Platform Initializer"),wd=new nt("Platform ID"),k0=new nt("appBootstrapListener");let Td=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Oe({token:t,factory:t.\u0275fac}),t})();const qo=new nt("LocaleId"),N0=new nt("DefaultCurrencyCode");class e1{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}const ag=function(t){return new zp(t)},t1=ag,n1=function(t){return Promise.resolve(ag(t))},F0=function(t){const e=ag(t),r=ji(Yn(t).declarations).reduce((i,o)=>{const s=Jt(o);return s&&i.push(new r0(s)),i},[]);return new e1(e,r)},r1=F0,i1=function(t){return Promise.resolve(F0(t))};let Vs=(()=>{class t{constructor(){this.compileModuleSync=t1,this.compileModuleAsync=n1,this.compileModuleAndAllComponentsSync=r1,this.compileModuleAndAllComponentsAsync=i1}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Oe({token:t,factory:t.\u0275fac}),t})();const a1=(()=>Promise.resolve(0))();function cg(t){"undefined"==typeof Zone?a1.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Zt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new yn(!1),this.onMicrotaskEmpty=new yn(!1),this.onStable=new yn(!1),this.onError=new yn(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function(){let t=yt.requestAnimationFrame,e=yt.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(yt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,ug(t),t.isCheckStableRunning=!0,lg(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),ug(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return V0(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),L0(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return V0(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),L0(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&("microTask"==o.change?(t._hasPendingMicrotasks=o.microTask,ug(t),lg(t)):"macroTask"==o.change&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Zt.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Zt.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,l1,pd,pd);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const l1={};function lg(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function ug(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function V0(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function L0(t){t._nesting--,lg(t)}class f1{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new yn,this.onMicrotaskEmpty=new yn,this.onStable=new yn,this.onError=new yn}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}let dg=(()=>{class t{constructor(n){this._ngZone=n,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Zt.assertNotInAngularZone(),cg(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())cg(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:o,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(n,r,i){return[]}}return t.\u0275fac=function(n){return new(n||t)(De(Zt))},t.\u0275prov=Oe({token:t,factory:t.\u0275fac}),t})(),j0=(()=>{class t{constructor(){this._applications=new Map,fg.addToWindow(this)}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return fg.findTestabilityInTree(this,n,r)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Oe({token:t,factory:t.\u0275fac}),t})();class h1{addToWindow(e){}findTestabilityInTree(e,n,r){return null}}let fg=new h1,B0=!0,U0=!1;let vi;const $0=new nt("AllowMultipleToken");class hg{constructor(e,n){this.name=e,this.token=n}}function G0(t,e,n=[]){const r=`Platform: ${e}`,i=new nt(r);return(o=[])=>{let s=z0();if(!s||s.injector.get($0,!1))if(t)t(n.concat(o).concat({provide:i,useValue:!0}));else{const a=n.concat(o).concat({provide:i,useValue:!0},{provide:Xc,useValue:"platform"});!function(t){if(vi&&!vi.destroyed&&!vi.injector.get($0,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");vi=t.get(W0);const e=t.get(O0,null);e&&e.forEach(n=>n())}(Tt.create({providers:a,name:r}))}return function(t){const e=z0();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function z0(){return vi&&!vi.destroyed?vi:null}let W0=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const a=function(t,e){let n;return n="noop"===t?new f1:("zone.js"===t?void 0:t)||new Zt({enableLongStackTrace:(U0=!0,B0),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(r?r.ngZone:void 0,{ngZoneEventCoalescing:r&&r.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:r&&r.ngZoneRunCoalescing||!1}),u=[{provide:Zt,useValue:a}];return a.run(()=>{const h=Tt.create({providers:u,parent:this.injector,name:n.moduleType.name}),g=n.create(h),y=g.injector.get(xs,null);if(!y)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return a.runOutsideAngular(()=>{const w=a.onError.subscribe({next:P=>{y.handleError(P)}});g.onDestroy(()=>{pg(this._modules,g),w.unsubscribe()})}),function(t,e,n){try{const r=n();return rl(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(y,a,()=>{const w=g.injector.get(nc);return w.runInitializers(),w.donePromise.then(()=>(Ep(g.injector.get(qo,ld)||ld),this._moduleDoBootstrap(g),g))})})}bootstrapModule(n,r=[]){const i=q0({},r);return function(t,e,n){const r=new zp(n);return Promise.resolve(r)}(0,0,n).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(n){const r=n.injector.get(rc);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new Error(`The module ${ae(n.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(n=>n.destroy()),this._destroyListeners.forEach(n=>n()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(n){return new(n||t)(De(Tt))},t.\u0275prov=Oe({token:t,factory:t.\u0275fac}),t})();function q0(t,e){return Array.isArray(e)?e.reduce(q0,t):Object.assign(Object.assign({},t),e)}let rc=(()=>{class t{constructor(n,r,i,o,s){this._zone=n,this._injector=r,this._exceptionHandler=i,this._componentFactoryResolver=o,this._initStatus=s,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const a=new ve(h=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{h.next(this._stable),h.complete()})}),u=new ve(h=>{let g;this._zone.runOutsideAngular(()=>{g=this._zone.onStable.subscribe(()=>{Zt.assertNotInAngularZone(),cg(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,h.next(!0))})})});const y=this._zone.onUnstable.subscribe(()=>{Zt.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{h.next(!1)}))});return()=>{g.unsubscribe(),y.unsubscribe()}});this.isStable=function(...t){let e=Number.POSITIVE_INFINITY,n=null,r=t[t.length-1];return st(r)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof r&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof ve?t[0]:Or(e)(ur(t,n))}(a,u.pipe(t=>Zr()(function(t,e){return function(r){let i;i="function"==typeof t?t:function(){return t};const o=Object.create(r,vc);return o.source=r,o.subjectFactory=i,o}}(K)(t))))}bootstrap(n,r){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let i;i=n instanceof CC?n:this._componentFactoryResolver.resolveComponentFactory(n),this.componentTypes.push(i.componentType);const o=function(t){return t.isBoundToModule}(i)?void 0:this._injector.get(Gi),a=i.create(Tt.NULL,[],r||i.selector,o),u=a.location.nativeElement,h=a.injector.get(dg,null),g=h&&a.injector.get(j0);return h&&g&&g.registerApplication(u,h),a.onDestroy(()=>{this.detachView(a.hostView),pg(this.components,a),g&&g.unregisterApplication(u)}),this._loadComponent(a),a}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;pg(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(k0,[]).concat(this._bootstrapListeners).forEach(i=>i(n))}ngOnDestroy(){this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(n){return new(n||t)(De(Zt),De(Tt),De(xs),De(ks),De(nc))},t.\u0275prov=Oe({token:t,factory:t.\u0275fac}),t})();function pg(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Id{}class I1{}const P1={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let M1=(()=>{class t{constructor(n,r){this._compiler=n,this._config=r||P1}load(n){return this.loadAndCompile(n)}loadAndCompile(n){let[r,i]=n.split("#");return void 0===i&&(i="default"),I(255)(r).then(o=>o[i]).then(o=>J0(o,r,i)).then(o=>this._compiler.compileModuleAsync(o))}loadFactory(n){let[r,i]=n.split("#"),o="NgFactory";return void 0===i&&(i="default",o=""),I(255)(this._config.factoryPathPrefix+r+this._config.factoryPathSuffix).then(s=>s[i+o]).then(s=>J0(s,r,i))}}return t.\u0275fac=function(n){return new(n||t)(De(Vs),De(I1,8))},t.\u0275prov=Oe({token:t,factory:t.\u0275fac}),t})();function J0(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const B1=G0(null,"core",[{provide:wd,useValue:"unknown"},{provide:W0,deps:[Tt]},{provide:j0,deps:[]},{provide:Td,deps:[]}]),z1=[{provide:rc,useClass:rc,deps:[Zt,Tt,xs,ks,nc]},{provide:GR,deps:[Zt],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(n){e.push(n)}}},{provide:nc,useClass:nc,deps:[[new mr,Sl]]},{provide:Vs,useClass:Vs,deps:[]},XO,{provide:dl,useFactory:function(){return LA},deps:[]},{provide:Ya,useFactory:function(){return jA},deps:[]},{provide:qo,useFactory:function(t){return Ep(t=t||"undefined"!=typeof $localize&&$localize.locale||ld),t},deps:[[new Da(qo),new mr,new $o]]},{provide:N0,useValue:"USD"}];let q1=(()=>{class t{constructor(n){}}return t.\u0275fac=function(n){return new(n||t)(De(rc))},t.\u0275mod=Fn({type:t}),t.\u0275inj=Kt({providers:z1}),t})(),Ld=null;function zi(){return Ld}const xn=new nt("DocumentToken");let Yo=(()=>{class t{historyGo(n){throw new Error("Not implemented")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Oe({factory:Wk,token:t,providedIn:"platform"}),t})();function Wk(){return De(CE)}const qk=new nt("Location Initialized");let CE=(()=>{class t extends Yo{constructor(n){super(),this._doc=n,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return zi().getBaseHref(this._doc)}onPopState(n){const r=zi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=zi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(n){this.location.pathname=n}pushState(n,r,i){EE()?this._history.pushState(n,r,i):this.location.hash=i}replaceState(n,r,i){EE()?this._history.replaceState(n,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}}return t.\u0275fac=function(n){return new(n||t)(De(xn))},t.\u0275prov=Oe({factory:Qk,token:t,providedIn:"platform"}),t})();function EE(){return!!window.history.pushState}function Qk(){return new CE(De(xn))}function Pg(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function DE(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function Do(t){return t&&"?"!==t[0]?"?"+t:t}let sc=(()=>{class t{historyGo(n){throw new Error("Not implemented")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Oe({factory:Yk,token:t,providedIn:"root"}),t})();function Yk(t){const e=De(xn).location;return new SE(De(Yo),e&&e.origin||"")}const ac=new nt("appBaseHref");let SE=(()=>{class t extends sc{constructor(n,r){if(super(),this._platformLocation=n,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Pg(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+Do(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){const s=this.prepareExternalUrl(i+Do(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){const s=this.prepareExternalUrl(i+Do(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(n=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,n)}}return t.\u0275fac=function(n){return new(n||t)(De(Yo),De(ac,8))},t.\u0275prov=Oe({token:t,factory:t.\u0275fac}),t})(),Kk=(()=>{class t extends sc{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=Pg(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+Do(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+Do(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(n=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,n)}}return t.\u0275fac=function(n){return new(n||t)(De(Yo),De(ac,8))},t.\u0275prov=Oe({token:t,factory:t.\u0275fac}),t})(),jd=(()=>{class t{constructor(n,r){this._subject=new yn,this._urlChangeListeners=[],this._platformStrategy=n;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=DE(wE(i)),this._platformStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}path(n=!1){return this.normalize(this._platformStrategy.path(n))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Do(r))}normalize(n){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,wE(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._platformStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._platformStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Do(r)),i)}replaceState(n,r="",i=null){this._platformStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Do(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(n=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,n)}onUrlChange(n){this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}}return t.\u0275fac=function(n){return new(n||t)(De(sc),De(Yo))},t.normalizeQueryParams=Do,t.joinWithSlash=Pg,t.stripTrailingSlash=DE,t.\u0275prov=Oe({factory:Jk,token:t,providedIn:"root"}),t})();function Jk(){return new jd(De(sc),De(Yo))}function wE(t){return t.replace(/\/index.html$/,"")}var ln=(()=>((ln=ln||{})[ln.Zero=0]="Zero",ln[ln.One=1]="One",ln[ln.Two=2]="Two",ln[ln.Few=3]="Few",ln[ln.Many=4]="Many",ln[ln.Other=5]="Other",ln))();const oN=function(t){return function(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=Yb(e);if(n)return n;const r=e.split("-")[0];if(n=Yb(r),n)return n;if("en"===r)return mM;throw new Error(`Missing locale data for the locale "${t}".`)}(t)[Me.PluralCase]};class Yd{}let kN=(()=>{class t extends Yd{constructor(n){super(),this.locale=n}getPluralCategory(n,r){switch(oN(r||this.locale)(n)){case ln.Zero:return"zero";case ln.One:return"one";case ln.Two:return"two";case ln.Few:return"few";case ln.Many:return"many";default:return"other"}}}return t.\u0275fac=function(n){return new(n||t)(De(qo))},t.\u0275prov=Oe({token:t,factory:t.\u0275fac}),t})();function kE(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,o]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}class VN{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Kd=(()=>{class t{constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(r){throw new Error(`Cannot find a differ supporting object '${n}' of type '${function(t){return t.name||typeof t}(n)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=[];n.forEachOperation((i,o,s)=>{if(null==i.previousIndex){const a=this._viewContainer.createEmbeddedView(this._template,new VN(null,this._ngForOf,-1,-1),null===s?void 0:s),u=new NE(i,a);r.push(u)}else if(null==s)this._viewContainer.remove(null===o?void 0:o);else if(null!==o){const a=this._viewContainer.get(o);this._viewContainer.move(a,s);const u=new NE(i,a);r.push(u)}});for(let i=0;i<r.length;i++)this._perViewChange(r[i].view,r[i].record);for(let i=0,o=this._viewContainer.length;i<o;i++){const s=this._viewContainer.get(i);s.context.index=i,s.context.count=o,s.context.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{this._viewContainer.get(i.currentIndex).context.$implicit=i.item})}_perViewChange(n,r){n.context.$implicit=r.item}static ngTemplateContextGuard(n,r){return!0}}return t.\u0275fac=function(n){return new(n||t)(he(gi),he(Co),he(dl))},t.\u0275dir=Le({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class NE{constructor(e,n){this.record=e,this.view=n}}let Jd=(()=>{class t{constructor(n,r){this._viewContainer=n,this._context=new jN,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){FE("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){FE("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}}return t.\u0275fac=function(n){return new(n||t)(he(gi),he(Co))},t.\u0275dir=Le({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class jN{constructor(){this.$implicit=null,this.ngIf=null}}function FE(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${ae(e)}'.`)}let dF=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Fn({type:t}),t.\u0275inj=Kt({providers:[{provide:Yd,useClass:kN}]}),t})();let BE=(()=>{class t{}return t.\u0275prov=Oe({token:t,providedIn:"root",factory:()=>new gF(De(xn),window)}),t})();class gF{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const n=function(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}(this.document,e);n&&(this.scrollToElement(n),this.attemptFocus(n))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const n=this.window.history;n&&n.scrollRestoration&&(n.scrollRestoration=e)}}scrollToElement(e){const n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=UE(this.window.history)||UE(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function UE(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class HE{}class Hg extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function(t){Ld||(Ld=t)}(new Hg)}onAndCancel(e,n,r){return e.addEventListener(n,r,!1),()=>{e.removeEventListener(n,r,!1)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=(Rl=Rl||document.querySelector("base"),Rl?Rl.getAttribute("href"):null);return null==n?null:function(t){Xd=Xd||document.createElement("a"),Xd.setAttribute("href",t);const e=Xd.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){Rl=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return kE(document.cookie,e)}}let Xd,Rl=null;const $E=new nt("TRANSITION_ID"),CF=[{provide:Sl,useFactory:function(t,e,n){return()=>{n.get(nc).donePromise.then(()=>{const r=zi(),i=e.querySelectorAll(`style[ng-transition="${t}"]`);for(let o=0;o<i.length;o++)r.remove(i[o])})}},deps:[$E,xn,Tt],multi:!0}];class $g{static init(){!function(t){fg=t}(new $g)}addToWindow(e){yt.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new Error("Could not find testability for element.");return o},yt.getAllAngularTestabilities=()=>e.getAllTestabilities(),yt.getAllAngularRootElements=()=>e.getAllRootElements(),yt.frameworkStabilizers||(yt.frameworkStabilizers=[]),yt.frameworkStabilizers.push(r=>{const i=yt.getAllAngularTestabilities();let o=i.length,s=!1;const a=function(u){s=s||u,o--,0==o&&r(s)};i.forEach(function(u){u.whenStable(a)})})}findTestabilityInTree(e,n,r){if(null==n)return null;const i=e.getTestability(n);return null!=i?i:r?zi().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null}}let EF=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Oe({token:t,factory:t.\u0275fac}),t})();const Ol=new nt("EventManagerPlugins");let ef=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>i.manager=this),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}addGlobalEventListener(n,r,i){return this._findPluginFor(r).addGlobalEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){const r=this._eventNameToPlugin.get(n);if(r)return r;const i=this._plugins;for(let o=0;o<i.length;o++){const s=i[o];if(s.supports(n))return this._eventNameToPlugin.set(n,s),s}throw new Error(`No event manager plugin found for event ${n}`)}}return t.\u0275fac=function(n){return new(n||t)(De(Ol),De(Zt))},t.\u0275prov=Oe({token:t,factory:t.\u0275fac}),t})();class Gg{constructor(e){this._doc=e}addGlobalEventListener(e,n,r){const i=zi().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${n}`);return this.addEventListener(i,n,r)}}let zE=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(n){const r=new Set;n.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(n){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Oe({token:t,factory:t.\u0275fac}),t})(),kl=(()=>{class t extends zE{constructor(n){super(),this._doc=n,this._hostNodes=new Map,this._hostNodes.set(n.head,[])}_addStylesToHost(n,r,i){n.forEach(o=>{const s=this._doc.createElement("style");s.textContent=o,i.push(r.appendChild(s))})}addHost(n){const r=[];this._addStylesToHost(this._stylesSet,n,r),this._hostNodes.set(n,r)}removeHost(n){const r=this._hostNodes.get(n);r&&r.forEach(WE),this._hostNodes.delete(n)}onStylesAdded(n){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(n,i,r)})}ngOnDestroy(){this._hostNodes.forEach(n=>n.forEach(WE))}}return t.\u0275fac=function(n){return new(n||t)(De(xn))},t.\u0275prov=Oe({token:t,factory:t.\u0275fac}),t})();function WE(t){zi().remove(t)}const zg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Wg=/%COMP%/g;function tf(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?tf(t,i,n):(i=i.replace(Wg,t),n.push(i))}return n}function YE(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let qg=(()=>{class t{constructor(n,r,i){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Qg(n)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;switch(r.encapsulation){case en.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new VF(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(n),i}case 1:case en.ShadowDom:return new LF(this.eventManager,this.sharedStylesHost,n,r);default:if(!this.rendererByCompId.has(r.id)){const i=tf(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(n){return new(n||t)(De(ef),De(kl),De(wl))},t.\u0275prov=Oe({token:t,factory:t.\u0275fac}),t})();class Qg{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,n){return n?document.createElementNS(zg[n]||n,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,n){e.appendChild(n)}insertBefore(e,n,r){e&&e.insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const o=zg[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=zg[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(xr.DashCase|xr.Important)?e.style.setProperty(n,r,i&xr.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&xr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e[n]=r}setValue(e,n){e.nodeValue=n}listen(e,n,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,n,YE(r)):this.eventManager.addEventListener(e,n,YE(r))}}class VF extends Qg{constructor(e,n,r,i){super(e),this.component=r;const o=tf(i+"-"+r.id,r.styles,[]);n.addStyles(o),this.contentAttr=function(t){return"_ngcontent-%COMP%".replace(Wg,t)}(i+"-"+r.id),this.hostAttr=function(t){return"_nghost-%COMP%".replace(Wg,t)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}class LF extends Qg{constructor(e,n,r,i){super(e),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=tf(i.id,i.styles,[]);for(let s=0;s<o.length;s++){const a=document.createElement("style");a.textContent=o[s],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let jF=(()=>{class t extends Gg{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}}return t.\u0275fac=function(n){return new(n||t)(De(xn))},t.\u0275prov=Oe({token:t,factory:t.\u0275fac}),t})();const XE=["alt","control","meta","shift"],WF={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ZE={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},qF={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let QF=(()=>{class t extends Gg{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i){const o=t.parseEventName(r),s=t.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>zi().onAndCancel(n,o.domEventName,s))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=t._normalizeKey(r.pop());let s="";if(XE.forEach(u=>{const h=r.indexOf(u);h>-1&&(r.splice(h,1),s+=u+".")}),s+=o,0!=r.length||0===o.length)return null;const a={};return a.domEventName=i,a.fullKey=s,a}static getEventFullKey(n){let r="",i=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&ZE.hasOwnProperty(e)&&(e=ZE[e]))}return WF[e]||e}(n);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),XE.forEach(o=>{o!=i&&qF[o](n)&&(r+=o+".")}),r+=i,r}static eventCallback(n,r,i){return o=>{t.getEventFullKey(o)===n&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){switch(n){case"esc":return"escape";default:return n}}}return t.\u0275fac=function(n){return new(n||t)(De(xn))},t.\u0275prov=Oe({token:t,factory:t.\u0275fac}),t})();const nV=G0(B1,"browser",[{provide:wd,useValue:"browser"},{provide:O0,useValue:function(){Hg.makeCurrent(),$g.init()},multi:!0},{provide:xn,useFactory:function(){return function(t){ca=t}(document),document},deps:[]}]),rV=[[],{provide:Xc,useValue:"root"},{provide:xs,useFactory:function(){return new xs},deps:[]},{provide:Ol,useClass:jF,multi:!0,deps:[xn,Zt,wd]},{provide:Ol,useClass:QF,multi:!0,deps:[xn]},[],{provide:qg,useClass:qg,deps:[ef,kl,wl]},{provide:gd,useExisting:qg},{provide:zE,useExisting:kl},{provide:kl,useClass:kl,deps:[xn]},{provide:dg,useClass:dg,deps:[Zt]},{provide:ef,useClass:ef,deps:[Ol,Zt]},{provide:HE,useClass:EF,deps:[]},[]];let iV=(()=>{class t{constructor(n){if(n)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(n){return{ngModule:t,providers:[{provide:wl,useValue:n.appId},{provide:$E,useExisting:wl},CF]}}}return t.\u0275fac=function(n){return new(n||t)(De(t,12))},t.\u0275mod=Fn({type:t}),t.\u0275inj=Kt({providers:rV,imports:[dF,q1]}),t})();function Je(...t){let e=t[t.length-1];return st(e)?(t.pop(),Pn(t,e)):ur(t)}"undefined"!=typeof window&&window;class Di extends ye{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return n&&!n.closed&&e.next(this._value),n}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Ze;return this._value}next(e){super.next(this._value=e)}}class fV extends M{notifyNext(e,n,r,i,o){this.destination.next(n)}notifyError(e,n){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class hV extends M{constructor(e,n,r){super(),this.parent=e,this.outerValue=n,this.outerIndex=r,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function pV(t,e,n,r,i=new hV(t,n,r)){if(!i.closed)return e instanceof ve?e.subscribe(i):fn(e)(i)}const tD={};class mV{constructor(e){this.resultSelector=e}call(e,n){return n.subscribe(new yV(e,this.resultSelector))}}class yV extends fV{constructor(e,n){super(e),this.resultSelector=n,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(tD),this.observables.push(e)}_complete(){const e=this.observables,n=e.length;if(0===n)this.destination.complete();else{this.active=n,this.toRespond=n;for(let r=0;r<n;r++)this.add(pV(this,e[r],void 0,r))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,n,r){const i=this.values,s=this.toRespond?i[r]===tD?--this.toRespond:this.toRespond:0;i[r]=n,0===s&&(this.resultSelector?this._tryResultSelector(i):this.destination.next(i.slice()))}_tryResultSelector(e){let n;try{n=this.resultSelector.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(n)}}const nf=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();function Zg(...t){return Or(1)(Je(...t))}const cc=new ve(t=>t.complete());function rf(t){return t?function(t){return new ve(e=>t.schedule(()=>e.complete()))}(t):cc}function nD(t){return new ve(e=>{let n;try{n=t()}catch(i){return void e.error(i)}return(n?Et(n):rf()).subscribe(e)})}function wo(t,e){return"function"==typeof e?n=>n.pipe(wo((r,i)=>Et(t(r,i)).pipe(je((o,s)=>e(r,o,i,s))))):n=>n.lift(new bV(t))}class bV{constructor(e){this.project=e}call(e,n){return n.subscribe(new CV(e,this.project))}}class CV extends Ut{constructor(e,n){super(e),this.project=n,this.index=0}_next(e){let n;const r=this.index++;try{n=this.project(e,r)}catch(i){return void this.destination.error(i)}this._innerSub(n)}_innerSub(e){const n=this.innerSubscription;n&&n.unsubscribe();const r=new Jr(this),i=this.destination;i.add(r),this.innerSubscription=Xr(e,r),this.innerSubscription!==r&&i.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}const rD=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function em(t){return e=>0===t?rf():e.lift(new EV(t))}class EV{constructor(e){if(this.total=e,this.total<0)throw new rD}call(e,n){return n.subscribe(new DV(e,this.total))}}class DV extends M{constructor(e,n){super(e),this.total=n,this.count=0}_next(e){const n=this.total,r=++this.count;r<=n&&(this.destination.next(e),r===n&&(this.destination.complete(),this.unsubscribe()))}}function iD(...t){const e=t[t.length-1];return st(e)?(t.pop(),n=>Zg(t,n,e)):n=>Zg(t,n)}function oD(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(i){return i.lift(new SV(t,e,n))}}class SV{constructor(e,n,r=!1){this.accumulator=e,this.seed=n,this.hasSeed=r}call(e,n){return n.subscribe(new wV(e,this.accumulator,this.seed,this.hasSeed))}}class wV extends M{constructor(e,n,r,i){super(e),this.accumulator=n,this._seed=r,this.hasSeed=i,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const n=this.index++;let r;try{r=this.accumulator(this.seed,e,n)}catch(i){this.destination.error(i)}this.seed=r,this.destination.next(r)}}function Bs(t,e){return function(r){return r.lift(new TV(t,e))}}class TV{constructor(e,n){this.predicate=e,this.thisArg=n}call(e,n){return n.subscribe(new xV(e,this.predicate,this.thisArg))}}class xV extends M{constructor(e,n,r){super(e),this.predicate=n,this.thisArg=r,this.count=0}_next(e){let n;try{n=this.predicate.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}n&&this.destination.next(e)}}function Us(t){return function(n){const r=new IV(t),i=n.lift(r);return r.caught=i}}class IV{constructor(e){this.selector=e}call(e,n){return n.subscribe(new PV(e,this.selector,this.caught))}}class PV extends Ut{constructor(e,n,r){super(e),this.selector=n,this.caught=r}error(e){if(!this.isStopped){let n;try{n=this.selector(e,this.caught)}catch(o){return void super.error(o)}this._unsubscribeAndRecycle();const r=new Jr(this);this.add(r);const i=Xr(n,r);i!==r&&this.add(i)}}}function lc(t,e){return Yt(t,e,1)}function tm(t){return function(n){return 0===t?rf():n.lift(new MV(t))}}class MV{constructor(e){if(this.total=e,this.total<0)throw new rD}call(e,n){return n.subscribe(new AV(e,this.total))}}class AV extends M{constructor(e,n){super(e),this.total=n,this.ring=new Array,this.count=0}_next(e){const n=this.ring,r=this.total,i=this.count++;n.length<r?n.push(e):n[i%r]=e}_complete(){const e=this.destination;let n=this.count;if(n>0){const r=this.count>=this.total?this.total:this.count,i=this.ring;for(let o=0;o<r;o++){const s=n++%r;e.next(i[s])}}e.complete()}}function sD(t=kV){return e=>e.lift(new RV(t))}class RV{constructor(e){this.errorFactory=e}call(e,n){return n.subscribe(new OV(e,this.errorFactory))}}class OV extends M{constructor(e,n){super(e),this.errorFactory=n,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(n){e=n}this.destination.error(e)}}}function kV(){return new nf}function aD(t=null){return e=>e.lift(new NV(t))}class NV{constructor(e){this.defaultValue=e}call(e,n){return n.subscribe(new FV(e,this.defaultValue))}}class FV extends M{constructor(e,n){super(e),this.defaultValue=n,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function uc(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Bs((i,o)=>t(i,o,r)):G,em(1),n?aD(e):sD(()=>new nf))}function Jo(){}function Mr(t,e,n){return function(i){return i.lift(new LV(t,e,n))}}class LV{constructor(e,n,r){this.nextOrObserver=e,this.error=n,this.complete=r}call(e,n){return n.subscribe(new jV(e,this.nextOrObserver,this.error,this.complete))}}class jV extends M{constructor(e,n,r,i){super(e),this._tapNext=Jo,this._tapError=Jo,this._tapComplete=Jo,this._tapError=r||Jo,this._tapComplete=i||Jo,R(n)?(this._context=this,this._tapNext=n):n&&(this._context=n,this._tapNext=n.next||Jo,this._tapError=n.error||Jo,this._tapComplete=n.complete||Jo)}_next(e){try{this._tapNext.call(this._context,e)}catch(n){return void this.destination.error(n)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(n){return void this.destination.error(n)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}class UV{constructor(e){this.callback=e}call(e,n){return n.subscribe(new HV(e,this.callback))}}class HV extends M{constructor(e,n){super(e),this.add(new x(n))}}class To{constructor(e,n){this.id=e,this.url=n}}class nm extends To{constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Nl extends To{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class cD extends To{constructor(e,n,r){super(e,n),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class $V extends To{constructor(e,n,r){super(e,n),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class GV extends To{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zV extends To{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class WV extends To{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class qV extends To{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class QV extends To{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class lD{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class uD{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class YV{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class KV{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class JV{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class XV{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dD{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const ot="primary";class ZV{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function dc(t){return new ZV(t)}const fD="ngNavigationCancelingError";function rm(t){const e=Error("NavigationCancelingError: "+t);return e[fD]=!0,e}function tL(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const s=r[o],a=t[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Wi(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!hD(t[i],e[i]))return!1;return!0}function hD(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}return t===e}function pD(t){return Array.prototype.concat.apply([],t)}function gD(t){return t.length>0?t[t.length-1]:null}function Rn(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function qi(t){return od(t)?t:rl(t)?Et(Promise.resolve(t)):Je(t)}const iL={exact:function vD(t,e,n){if(!$s(t.segments,e.segments)||!of(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!vD(t.children[r],e.children[r],n))return!1;return!0},subset:_D},mD={exact:function(t,e){return Wi(t,e)},subset:function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>hD(t[n],e[n]))},ignored:()=>!0};function yD(t,e,n){return iL[n.paths](t.root,e.root,n.matrixParams)&&mD[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function _D(t,e,n){return bD(t,e,e.segments,n)}function bD(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!(!$s(i,n)||e.hasChildren()||!of(i,n,r))}if(t.segments.length===n.length){if(!$s(t.segments,n)||!of(t.segments,n,r))return!1;for(const i in e.children)if(!t.children[i]||!_D(t.children[i],e.children[i],r))return!1;return!0}{const i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!!($s(t.segments,i)&&of(t.segments,i,r)&&t.children[ot])&&bD(t.children[ot],e,o,r)}}function of(t,e,n){return e.every((r,i)=>mD[n](t[i].parameters,r.parameters))}class Hs{constructor(e,n,r){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=dc(this.queryParams)),this._queryParamMap}toString(){return lL.serialize(this)}}class ft{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Rn(n,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return sf(this)}}class Fl{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=dc(this.parameters)),this._parameterMap}toString(){return SD(this)}}function $s(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}class im{}class CD{parse(e){const n=new vL(e);return new Hs(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){return`${`/${Vl(e.root,!0)}`}${function(t){const e=Object.keys(t).map(n=>{const r=t[n];return Array.isArray(r)?r.map(i=>`${af(n)}=${af(i)}`).join("&"):`${af(n)}=${af(r)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}(e.queryParams)}${"string"==typeof e.fragment?`#${function(t){return encodeURI(t)}(e.fragment)}`:""}`}}const lL=new CD;function sf(t){return t.segments.map(e=>SD(e)).join("/")}function Vl(t,e){if(!t.hasChildren())return sf(t);if(e){const n=t.children[ot]?Vl(t.children[ot],!1):"",r=[];return Rn(t.children,(i,o)=>{o!==ot&&r.push(`${o}:${Vl(i,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function(t,e){let n=[];return Rn(t.children,(r,i)=>{i===ot&&(n=n.concat(e(r,i)))}),Rn(t.children,(r,i)=>{i!==ot&&(n=n.concat(e(r,i)))}),n}(t,(r,i)=>i===ot?[Vl(t.children[ot],!1)]:[`${i}:${Vl(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[ot]?`${sf(t)}/${n[0]}`:`${sf(t)}/(${n.join("//")})`}}function ED(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function af(t){return ED(t).replace(/%3B/gi,";")}function om(t){return ED(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function cf(t){return decodeURIComponent(t)}function DD(t){return cf(t.replace(/\+/g,"%20"))}function SD(t){return`${om(t.path)}${function(t){return Object.keys(t).map(e=>`;${om(e)}=${om(t[e])}`).join("")}(t.parameters)}`}const hL=/^[^\/()?;=#]+/;function lf(t){const e=t.match(hL);return e?e[0]:""}const pL=/^[^=?&#]+/,mL=/^[^?&#]+/;class vL{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ft([],{}):new ft([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[ot]=new ft(e,n)),r}parseSegment(){const e=lf(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Fl(cf(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=lf(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=lf(this.remaining);i&&(r=i,this.capture(r))}e[cf(n)]=cf(r)}parseQueryParam(e){const n=function(t){const e=t.match(pL);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const s=function(t){const e=t.match(mL);return e?e[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const i=DD(n),o=DD(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=lf(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let o;r.indexOf(":")>-1?(o=r.substr(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ot);const s=this.parseChildren();n[o]=1===Object.keys(s).length?s[ot]:new ft([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class wD{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=sm(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=sm(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=am(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return am(e,this._root).map(n=>n.value)}}function sm(t,e){if(t===e.value)return e;for(const n of e.children){const r=sm(t,n);if(r)return r}return null}function am(t,e){if(t===e.value)return[e];for(const n of e.children){const r=am(t,n);if(r.length)return r.unshift(e),r}return[]}class xo{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function Ll(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class TD extends wD{constructor(e,n){super(e),this.snapshot=n,cm(this,e)}toString(){return this.snapshot.toString()}}function xD(t,e){const n=function(t,e){const s=new uf([],{},{},"",{},ot,e,null,t.root,-1,{});return new PD("",new xo(s,[]))}(t,e),r=new Di([new Fl("",{})]),i=new Di({}),o=new Di({}),s=new Di({}),a=new Di(""),u=new Io(r,i,s,a,o,ot,e,n.root);return u.snapshot=n.root,new TD(new xo(u,[]),n)}class Io{constructor(e,n,r,i,o,s,a,u){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this._futureSnapshot=u}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(je(e=>dc(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(je(e=>dc(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ID(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const i=n[r],o=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function(t){return t.reduce((e,n)=>({params:Object.assign(Object.assign({},e.params),n.params),data:Object.assign(Object.assign({},e.data),n.data),resolve:Object.assign(Object.assign({},e.resolve),n._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class uf{constructor(e,n,r,i,o,s,a,u,h,g,y){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._urlSegment=h,this._lastPathIndex=g,this._resolve=y}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=dc(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=dc(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class PD extends wD{constructor(e,n){super(n),this.url=e,cm(this,n)}toString(){return MD(this._root)}}function cm(t,e){e.value._routerState=t,e.children.forEach(n=>cm(t,n))}function MD(t){const e=t.children.length>0?` { ${t.children.map(MD).join(", ")} } `:"";return`${t.value}${e}`}function lm(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Wi(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Wi(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Wi(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Wi(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function um(t,e){return Wi(t.params,e.params)&&function(t,e){return $s(t,e)&&t.every((n,r)=>Wi(n.parameters,e[r].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||um(t.parent,e.parent))}function df(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(r=>{for(const i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return df(t,r,i);return df(t,r)})}(t,e,n);return new xo(r,i)}{if(t.shouldAttach(e.value)){const o=t.retrieve(e.value);if(null!==o){const s=o.route;return AD(e,s),s}}const r=function(t){return new Io(new Di(t.url),new Di(t.params),new Di(t.queryParams),new Di(t.fragment),new Di(t.data),t.outlet,t.component,t)}(e.value),i=e.children.map(o=>df(t,o));return new xo(r,i)}}function AD(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)AD(t.children[n],e.children[n])}function ff(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function jl(t){return"object"==typeof t&&null!=t&&t.outlets}function dm(t,e,n,r,i){let o={};return r&&Rn(r,(s,a)=>{o[a]=Array.isArray(s)?s.map(u=>`${u}`):`${s}`}),new Hs(n.root===t?e:RD(n.root,t,e),o,i)}function RD(t,e,n){const r={};return Rn(t.children,(i,o)=>{r[o]=i===e?n:RD(i,e,n)}),new ft(t.segments,r)}class OD{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&ff(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(jl);if(i&&i!==gD(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class fm{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function kD(t,e,n){if(t||(t=new ft([],{})),0===t.segments.length&&t.hasChildren())return hf(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const s=t.segments[i],a=n[r];if(jl(a))break;const u=`${a}`,h=r<n.length-1?n[r+1]:null;if(i>0&&void 0===u)break;if(u&&h&&"object"==typeof h&&void 0===h.outlets){if(!FD(u,h,s))return o;r+=2}else{if(!FD(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const o=new ft(t.segments.slice(0,r.pathIndex),{});return o.children[ot]=new ft(t.segments.slice(r.pathIndex),t.children),hf(o,0,i)}return r.match&&0===i.length?new ft(t.segments,{}):r.match&&!t.hasChildren()?hm(t,e,n):r.match?hf(t,0,i):hm(t,e,n)}function hf(t,e,n){if(0===n.length)return new ft(t.segments,{});{const r=function(t){return jl(t[0])?t[0].outlets:{[ot]:t}}(n),i={};return Rn(r,(o,s)=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=kD(t.children[s],e,o))}),Rn(t.children,(o,s)=>{void 0===r[s]&&(i[s]=o)}),new ft(t.segments,i)}}function hm(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(jl(o)){const u=ML(o.outlets);return new ft(r,u)}if(0===i&&ff(n[0])){r.push(new Fl(t.segments[e].path,ND(n[0]))),i++;continue}const s=jl(o)?o.outlets[ot]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&ff(a)?(r.push(new Fl(s,ND(a))),i+=2):(r.push(new Fl(s,{})),i++)}return new ft(r,{})}function ML(t){const e={};return Rn(t,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(e[r]=hm(new ft([],{}),0,n))}),e}function ND(t){const e={};return Rn(t,(n,r)=>e[r]=`${n}`),e}function FD(t,e,n){return t==n.path&&Wi(e,n.parameters)}class RL{constructor(e,n,r,i){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),lm(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const i=Ll(n);e.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Rn(i,(o,s)=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){const i=e.value,o=n?n.value:null;if(i===o)if(i.component){const s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet);if(r&&r.outlet){const i=r.outlet.detach(),o=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:i,route:e,contexts:o})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Ll(e);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,n,r){const i=Ll(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new XV(o.value.snapshot))}),e.children.length&&this.forwardEvent(new KV(e.value.snapshot))}activateRoutes(e,n,r){const i=e.value,o=n?n.value:null;if(lm(i),i===o)if(i.component){const s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){const s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),VD(a.route)}else{const a=function(t){for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(i.snapshot),u=a?a.module.componentFactoryResolver:null;s.attachRef=null,s.route=i,s.resolver=u,s.outlet&&s.outlet.activateWith(i,u),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}}function VD(t){lm(t.value),t.children.forEach(VD)}class pm{constructor(e,n){this.routes=e,this.module=n}}function Xo(t){return"function"==typeof t}function Gs(t){return t instanceof Hs}const Bl=Symbol("INITIAL_VALUE");function Ul(){return wo(t=>function(...t){let e,n;return st(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&W(t[0])&&(t=t[0]),ur(t,n).lift(new mV(e))}(t.map(e=>e.pipe(em(1),iD(Bl)))).pipe(oD((e,n)=>{let r=!1;return n.reduce((i,o,s)=>i!==Bl?i:(o===Bl&&(r=!0),r||!1!==o&&s!==n.length-1&&!Gs(o)?i:o),e)},Bl),Bs(e=>e!==Bl),je(e=>Gs(e)?e:!0===e),em(1)))}let LD=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=_r({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(n,r){1&n&&fi(0,"router-outlet")},directives:function(){return[Cm]},encapsulation:2}),t})();function jD(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];jL(r,BL(e,r))}}function jL(t,e){t.children&&jD(t.children,e)}function BL(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function gm(t){const e=t.children&&t.children.map(gm),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ot&&(n.component=LD),n}function Wr(t){return t.outlet||ot}function BD(t,e){const n=t.filter(r=>Wr(r)===e);return n.push(...t.filter(r=>Wr(r)!==e)),n}const UD={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function pf(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},UD):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const o=(e.matcher||tL)(n,t,e);if(!o)return Object.assign({},UD);const s={};Rn(o.posParams,(u,h)=>{s[h]=u.path});const a=o.consumed.length>0?Object.assign(Object.assign({},s),o.consumed[o.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:o.consumed,lastChild:o.consumed.length,parameters:a,positionalParamSegments:null!==(r=o.posParams)&&void 0!==r?r:{}}}function gf(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(r=>mf(t,e,r)&&Wr(r)!==ot)}(t,n,r)){const s=new ft(e,function(t,e,n,r){const i={};i[ot]=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&Wr(o)!==ot){const s=new ft([],{});s._sourceSegment=t,s._segmentIndexShift=e.length,i[Wr(o)]=s}return i}(t,e,r,new ft(n,t.children)));return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(r=>mf(t,e,r))}(t,n,r)){const s=new ft(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(mf(t,n,a)&&!i[Wr(a)]){const u=new ft([],{});u._sourceSegment=t,u._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[Wr(a)]=u}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}const o=new ft(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function mf(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function HD(t,e,n,r){return!!(Wr(t)===r||r!==ot&&mf(e,n,t))&&("**"===t.path||pf(e,t,n).matched)}function $D(t,e,n){return 0===e.length&&!t.children[n]}class Hl{constructor(e){this.segmentGroup=e||null}}class GD{constructor(e){this.urlTree=e}}function yf(t){return new ve(e=>e.error(new Hl(t)))}function zD(t){return new ve(e=>e.error(new GD(t)))}function zL(t){return new ve(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class QL{constructor(e,n,r,i,o){this.configLoader=n,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=e.get(Gi)}apply(){const e=gf(this.urlTree.root,[],[],this.config).segmentGroup,n=new ft(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,n,ot).pipe(je(o=>this.createUrlTree(mm(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Us(o=>{if(o instanceof GD)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof Hl?this.noMatchError(o):o}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,ot).pipe(je(i=>this.createUrlTree(mm(i),e.queryParams,e.fragment))).pipe(Us(i=>{throw i instanceof Hl?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,n,r){const i=e.segments.length>0?new ft([],{[ot]:e}):e;return new Hs(i,n,r)}expandSegmentGroup(e,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,n,r).pipe(je(o=>new ft([],o))):this.expandSegment(e,r,n,r.segments,i,!0)}expandChildren(e,n,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return Et(i).pipe(lc(o=>{const s=r.children[o],a=BD(n,o);return this.expandSegmentGroup(e,a,s,o).pipe(je(u=>({segment:u,outlet:o})))}),oD((o,s)=>(o[s.outlet]=s.segment,o),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Bs((i,o)=>t(i,o,r)):G,tm(1),n?aD(e):sD(()=>new nf))}())}expandSegment(e,n,r,i,o,s){return Et(r).pipe(lc(a=>this.expandSegmentAgainstRoute(e,n,r,a,i,o,s).pipe(Us(h=>{if(h instanceof Hl)return Je(null);throw h}))),uc(a=>!!a),Us((a,u)=>{if(a instanceof nf||"EmptyError"===a.name){if($D(n,i,o))return Je(new ft([],{}));throw new Hl(n)}throw a}))}expandSegmentAgainstRoute(e,n,r,i,o,s,a){return HD(i,n,o,s)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,n,i,o,s):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s):yf(n):yf(n)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,s):this.expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,i){const o=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?zD(o):this.lineralizeSegments(r,o).pipe(Yt(s=>{const a=new ft(s,{});return this.expandSegment(e,a,n,s,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s){const{matched:a,consumedSegments:u,lastChild:h,positionalParamSegments:g}=pf(n,i,o);if(!a)return yf(n);const y=this.applyRedirectCommands(u,i.redirectTo,g);return i.redirectTo.startsWith("/")?zD(y):this.lineralizeSegments(i,y).pipe(Yt(w=>this.expandSegment(e,n,r,w.concat(o.slice(h)),s,!1)))}matchSegmentAgainstRoute(e,n,r,i,o){if("**"===r.path)return r.loadChildren?(r._loadedConfig?Je(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe(je(w=>(r._loadedConfig=w,new ft(i,{})))):Je(new ft(i,{}));const{matched:s,consumedSegments:a,lastChild:u}=pf(n,r,i);if(!s)return yf(n);const h=i.slice(u);return this.getChildConfig(e,r,i).pipe(Yt(y=>{const w=y.module,P=y.routes,{segmentGroup:F,slicedSegments:Z}=gf(n,a,h,P),Q=new ft(F.segments,F.children);if(0===Z.length&&Q.hasChildren())return this.expandChildren(w,P,Q).pipe(je(Fe=>new ft(a,Fe)));if(0===P.length&&0===Z.length)return Je(new ft(a,{}));const fe=Wr(r)===o;return this.expandSegment(w,Q,P,Z,fe?ot:o,!0).pipe(je(Pe=>new ft(a.concat(Pe.segments),Pe.children)))}))}getChildConfig(e,n,r){return n.children?Je(new pm(n.children,e)):n.loadChildren?void 0!==n._loadedConfig?Je(n._loadedConfig):this.runCanLoadGuards(e.injector,n,r).pipe(Yt(i=>i?this.configLoader.load(e.injector,n).pipe(je(o=>(n._loadedConfig=o,o))):function(t){return new ve(e=>e.error(rm(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(n))):Je(new pm([],e))}runCanLoadGuards(e,n,r){const i=n.canLoad;return i&&0!==i.length?Je(i.map(s=>{const a=e.get(s);let u;if(function(t){return t&&Xo(t.canLoad)}(a))u=a.canLoad(n,r);else{if(!Xo(a))throw new Error("Invalid CanLoad guard");u=a(n,r)}return qi(u)})).pipe(Ul(),Mr(s=>{if(!Gs(s))return;const a=rm(`Redirecting to "${this.urlSerializer.serialize(s)}"`);throw a.url=s,a}),je(s=>!0===s)):Je(!0)}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Je(r);if(i.numberOfChildren>1||!i.children[ot])return zL(e.redirectTo);i=i.children[ot]}}applyRedirectCommands(e,n,r){return this.applyRedirectCreatreUrlTree(n,this.urlSerializer.parse(n),e,r)}applyRedirectCreatreUrlTree(e,n,r,i){const o=this.createSegmentGroup(e,n.root,r,i);return new Hs(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return Rn(e,(i,o)=>{if("string"==typeof i&&i.startsWith(":")){const a=i.substring(1);r[o]=n[a]}else r[o]=i}),r}createSegmentGroup(e,n,r,i){const o=this.createSegments(e,n.segments,r,i);let s={};return Rn(n.children,(a,u)=>{s[u]=this.createSegmentGroup(e,a,r,i)}),new ft(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){const i=r[n.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${n.path}'.`);return i}findOrReturn(e,n){let r=0;for(const i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}}function mm(t){const e={};for(const r of Object.keys(t.children)){const o=mm(t.children[r]);(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function(t){if(1===t.numberOfChildren&&t.children[ot]){const e=t.children[ot];return new ft(t.segments.concat(e.segments),e.children)}return t}(new ft(t.segments,e))}class WD{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class vf{constructor(e,n){this.component=e,this.route=n}}function JL(t,e,n){const r=t._root;return $l(r,e?e._root:null,n,[r.value])}function _f(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function $l(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Ll(e);return t.children.forEach(s=>{(function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!$s(t.url,e.url);case"pathParamsOrQueryParamsChange":return!$s(t.url,e.url)||!Wi(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!um(t,e)||!Wi(t.queryParams,e.queryParams);case"paramsChange":default:return!um(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new WD(r)):(o.data=s.data,o._resolvedData=s._resolvedData),$l(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new vf(a.outlet.component,s))}else s&&Gl(e,a,i),i.canActivateChecks.push(new WD(r)),$l(t,null,o.component?a?a.children:null:n,r,i)})(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Rn(o,(s,a)=>Gl(s,n.getContext(a),i)),i}function Gl(t,e,n){const r=Ll(t),i=t.value;Rn(r,(o,s)=>{Gl(o,i.component?e?e.children.getContext(s):null:e,n)}),n.canDeactivateChecks.push(new vf(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class uj{}function qD(t){return new ve(e=>e.error(t))}class fj{constructor(e,n,r,i,o,s){this.rootComponentType=e,this.config=n,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=s}recognize(){const e=gf(this.urlTree.root,[],[],this.config.filter(s=>void 0===s.redirectTo),this.relativeLinkResolution).segmentGroup,n=this.processSegmentGroup(this.config,e,ot);if(null===n)return null;const r=new uf([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},ot,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new xo(r,n),o=new PD(this.url,i);return this.inheritParamsAndData(o._root),o}inheritParamsAndData(e){const n=e.value,r=ID(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,n,r){return 0===n.segments.length&&n.hasChildren()?this.processChildren(e,n):this.processSegment(e,n,n.segments,r)}processChildren(e,n){const r=[];for(const o of Object.keys(n.children)){const s=n.children[o],a=BD(e,o),u=this.processSegmentGroup(a,s,o);if(null===u)return null;r.push(...u)}const i=QD(r);return function(t){t.sort((e,n)=>e.value.outlet===ot?-1:n.value.outlet===ot?1:e.value.outlet.localeCompare(n.value.outlet))}(i),i}processSegment(e,n,r,i){for(const o of e){const s=this.processSegmentAgainstRoute(o,n,r,i);if(null!==s)return s}return $D(n,r,i)?[]:null}processSegmentAgainstRoute(e,n,r,i){if(e.redirectTo||!HD(e,n,r,i))return null;let o,s=[],a=[];if("**"===e.path){const P=r.length>0?gD(r).parameters:{};o=new uf(r,P,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,JD(e),Wr(e),e.component,e,YD(n),KD(n)+r.length,XD(e))}else{const P=pf(n,e,r);if(!P.matched)return null;s=P.consumedSegments,a=r.slice(P.lastChild),o=new uf(s,P.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,JD(e),Wr(e),e.component,e,YD(n),KD(n)+s.length,XD(e))}const u=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(e),{segmentGroup:h,slicedSegments:g}=gf(n,s,a,u.filter(P=>void 0===P.redirectTo),this.relativeLinkResolution);if(0===g.length&&h.hasChildren()){const P=this.processChildren(u,h);return null===P?null:[new xo(o,P)]}if(0===u.length&&0===g.length)return[new xo(o,[])];const y=Wr(e)===i,w=this.processSegment(u,h,g,y?ot:i);return null===w?null:[new xo(o,w)]}}function gj(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function QD(t){const e=[],n=new Set;for(const r of t){if(!gj(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):e.push(r)}for(const r of n){const i=QD(r.children);e.push(new xo(r.value,i))}return e.filter(r=>!n.has(r))}function YD(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function KD(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function JD(t){return t.data||{}}function XD(t){return t.resolve||{}}function ym(t){return wo(e=>{const n=t(e);return n?Et(n).pipe(je(()=>e)):Je(e)})}class Dj extends class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}{}const vm=new nt("ROUTES");class ZD{constructor(e,n,r,i){this.loader=e,this.compiler=n,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,n){if(n._loader$)return n._loader$;this.onLoadStartListener&&this.onLoadStartListener(n);const i=this.loadModuleFactory(n.loadChildren).pipe(je(o=>{this.onLoadEndListener&&this.onLoadEndListener(n);const s=o.create(e);return new pm(pD(s.injector.get(vm,void 0,Ne.Self|Ne.Optional)).map(gm),s)}),Us(o=>{throw n._loader$=void 0,o}));return n._loader$=new ko(i,()=>new ye).pipe(Zr()),n._loader$}loadModuleFactory(e){return"string"==typeof e?Et(this.loader.load(e)):qi(e()).pipe(Yt(n=>n instanceof RC?Je(n):Et(this.compiler.compileModuleAsync(n))))}}class Sj{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new fc,this.attachRef=null}}class fc{constructor(){this.contexts=new Map}onChildOutletCreated(e,n){const r=this.getOrCreateContext(e);r.outlet=n,this.contexts.set(e,r)}onChildOutletDestroyed(e){const n=this.getContext(e);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let n=this.getContext(e);return n||(n=new Sj,this.contexts.set(e,n)),n}getContext(e){return this.contexts.get(e)||null}}class Tj{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,n){return e}}function xj(t){throw t}function Ij(t,e,n){return e.parse("/")}function eS(t,e){return Je(null)}const Pj={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Mj={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let On=(()=>{class t{constructor(n,r,i,o,s,a,u,h){this.rootComponentType=n,this.urlSerializer=r,this.rootContexts=i,this.location=o,this.config=h,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ye,this.errorHandler=xj,this.malformedUriErrorHandler=Ij,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:eS,afterPreactivation:eS},this.urlHandlingStrategy=new Tj,this.routeReuseStrategy=new Dj,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=s.get(Gi),this.console=s.get(Td);const w=s.get(Zt);this.isNgZoneEnabled=w instanceof Zt&&Zt.isInAngularZone(),this.resetConfig(h),this.currentUrlTree=new Hs(new ft([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new ZD(a,u,P=>this.triggerEvent(new lD(P)),P=>this.triggerEvent(new uD(P))),this.routerState=xD(this.currentUrlTree,this.rootComponentType),this.transitions=new Di({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var n;return null===(n=this.location.getState())||void 0===n?void 0:n.\u0275routerPageId}setupNavigations(n){const r=this.events;return n.pipe(Bs(i=>0!==i.id),je(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),wo(i=>{let o=!1,s=!1;return Je(i).pipe(Mr(a=>{this.currentNavigation={id:a.id,initialUrl:a.currentRawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),wo(a=>{const u=this.browserUrlTree.toString(),h=!this.navigated||a.extractedUrl.toString()!==u||u!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||h)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return bf(a.source)&&(this.browserUrlTree=a.extractedUrl),Je(a).pipe(wo(y=>{const w=this.transitions.getValue();return r.next(new nm(y.id,this.serializeUrl(y.extractedUrl),y.source,y.restoredState)),w!==this.transitions.getValue()?cc:Promise.resolve(y)}),function(t,e,n,r){return wo(i=>function(t,e,n,r,i){return new QL(t,e,n,r,i).apply()}(t,e,n,i.extractedUrl,r).pipe(je(o=>Object.assign(Object.assign({},i),{urlAfterRedirects:o}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Mr(y=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:y.urlAfterRedirects})}),function(t,e,n,r,i){return Yt(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){try{const s=new fj(t,e,n,r,i,o).recognize();return null===s?qD(new uj):Je(s)}catch(s){return qD(s)}}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(je(s=>Object.assign(Object.assign({},o),{targetSnapshot:s}))))}(this.rootComponentType,this.config,y=>this.serializeUrl(y),this.paramsInheritanceStrategy,this.relativeLinkResolution),Mr(y=>{"eager"===this.urlUpdateStrategy&&(y.extras.skipLocationChange||this.setBrowserUrl(y.urlAfterRedirects,y),this.browserUrlTree=y.urlAfterRedirects);const w=new GV(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);r.next(w)}));if(h&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:w,extractedUrl:P,source:F,restoredState:Z,extras:Q}=a,fe=new nm(w,this.serializeUrl(P),F,Z);r.next(fe);const ce=xD(P,this.rootComponentType).snapshot;return Je(Object.assign(Object.assign({},a),{targetSnapshot:ce,urlAfterRedirects:P,extras:Object.assign(Object.assign({},Q),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=a.rawUrl,this.browserUrlTree=a.urlAfterRedirects,a.resolve(null),cc}),ym(a=>{const{targetSnapshot:u,id:h,extractedUrl:g,rawUrl:y,extras:{skipLocationChange:w,replaceUrl:P}}=a;return this.hooks.beforePreactivation(u,{navigationId:h,appliedUrlTree:g,rawUrlTree:y,skipLocationChange:!!w,replaceUrl:!!P})}),Mr(a=>{const u=new zV(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(u)}),je(a=>Object.assign(Object.assign({},a),{guards:JL(a.targetSnapshot,a.currentSnapshot,this.rootContexts)})),function(t,e){return Yt(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Je(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Et(t).pipe(Yt(i=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?Je(o.map(a=>{const u=_f(a,e,i);let h;if(function(t){return t&&Xo(t.canDeactivate)}(u))h=qi(u.canDeactivate(t,e,n,r));else{if(!Xo(u))throw new Error("Invalid CanDeactivate guard");h=qi(u(t,e,n,r))}return h.pipe(uc())})).pipe(Ul()):Je(!0)}(i.component,i.route,n,e,r)),uc(i=>!0!==i,!0))}(s,r,i,t).pipe(Yt(a=>a&&function(t){return"boolean"==typeof t}(a)?function(t,e,n,r){return Et(e).pipe(lc(i=>Zg(function(t,e){return null!==t&&e&&e(new YV(t)),Je(!0)}(i.route.parent,r),function(t,e){return null!==t&&e&&e(new JV(t)),Je(!0)}(i.route,r),function(t,e,n){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(s)).filter(s=>null!==s).map(s=>nD(()=>Je(s.guards.map(u=>{const h=_f(u,s.node,n);let g;if(function(t){return t&&Xo(t.canActivateChild)}(h))g=qi(h.canActivateChild(r,t));else{if(!Xo(h))throw new Error("Invalid CanActivateChild guard");g=qi(h(r,t))}return g.pipe(uc())})).pipe(Ul())));return Je(o).pipe(Ul())}(t,i.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;return r&&0!==r.length?Je(r.map(o=>nD(()=>{const s=_f(o,e,n);let a;if(function(t){return t&&Xo(t.canActivate)}(s))a=qi(s.canActivate(e,t));else{if(!Xo(s))throw new Error("Invalid CanActivate guard");a=qi(s(e,t))}return a.pipe(uc())}))).pipe(Ul()):Je(!0)}(t,i.route,n))),uc(i=>!0!==i,!0))}(r,o,t,e):Je(a)),je(a=>Object.assign(Object.assign({},n),{guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),Mr(a=>{if(Gs(a.guardsResult)){const h=rm(`Redirecting to "${this.serializeUrl(a.guardsResult)}"`);throw h.url=a.guardsResult,h}const u=new WV(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(u)}),Bs(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,""),!1)),ym(a=>{if(a.guards.canActivateChecks.length)return Je(a).pipe(Mr(u=>{const h=new qV(u.id,this.serializeUrl(u.extractedUrl),this.serializeUrl(u.urlAfterRedirects),u.targetSnapshot);this.triggerEvent(h)}),wo(u=>{let h=!1;return Je(u).pipe(function(t,e){return Yt(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return Je(n);let o=0;return Et(i).pipe(lc(s=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Je({});const o={};return Et(i).pipe(Yt(s=>function(t,e,n,r){const i=_f(t,e,r);return qi(i.resolve?i.resolve(e,n):i(e,n))}(t[s],e,n,r).pipe(Mr(a=>{o[s]=a}))),tm(1),Yt(()=>Object.keys(o).length===i.length?Je(o):cc))}(t._resolve,t,e,r).pipe(je(o=>(t._resolvedData=o,t.data=Object.assign(Object.assign({},t.data),ID(t,n).resolve),null)))}(s.route,r,t,e)),Mr(()=>o++),tm(1),Yt(s=>o===i.length?Je(n):cc))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Mr({next:()=>h=!0,complete:()=>{h||(this.restoreHistory(u),this.cancelNavigationTransition(u,"At least one route resolver didn't emit any value."))}}))}),Mr(u=>{const h=new QV(u.id,this.serializeUrl(u.extractedUrl),this.serializeUrl(u.urlAfterRedirects),u.targetSnapshot);this.triggerEvent(h)}))}),ym(a=>{const{targetSnapshot:u,id:h,extractedUrl:g,rawUrl:y,extras:{skipLocationChange:w,replaceUrl:P}}=a;return this.hooks.afterPreactivation(u,{navigationId:h,appliedUrlTree:g,rawUrlTree:y,skipLocationChange:!!w,replaceUrl:!!P})}),je(a=>{const u=function(t,e,n){const r=df(t,e._root,n?n._root:void 0);return new TD(r,e)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return Object.assign(Object.assign({},a),{targetRouterState:u})}),Mr(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((t,e,n)=>je(r=>(new RL(e,r.targetRouterState,r.currentRouterState,n).activate(t),r)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),Mr({next(){o=!0},complete(){o=!0}}),function(t){return e=>e.lift(new UV(t))}(()=>{if(!o&&!s){const a=`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(i),this.cancelNavigationTransition(i,a)):this.cancelNavigationTransition(i,a)}this.currentNavigation=null}),Us(a=>{if(s=!0,function(t){return t&&t[fD]}(a)){const u=Gs(a.url);u||(this.navigated=!0,this.restoreHistory(i,!0));const h=new cD(i.id,this.serializeUrl(i.extractedUrl),a.message);r.next(h),u?setTimeout(()=>{const g=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),y={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||bf(i.source)};this.scheduleNavigation(g,"imperative",null,y,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const u=new $V(i.id,this.serializeUrl(i.extractedUrl),a);r.next(u);try{i.resolve(this.errorHandler(a))}catch(h){i.reject(h)}}return cc}))}))}resetRootComponentType(n){this.rootComponentType=n,this.routerState.root.component=this.rootComponentType}getTransition(){const n=this.transitions.value;return n.urlAfterRedirects=this.browserUrlTree,n}setTransition(n){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),n))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r=this.extractLocationChangeInfoFromEvent(n);this.shouldScheduleNavigation(this.lastLocationChangeInfo,r)&&setTimeout(()=>{const{source:i,state:o,urlTree:s}=r,a={replaceUrl:!0};if(o){const u=Object.assign({},o);delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(a.state=u)}this.scheduleNavigation(s,i,o,a)},0),this.lastLocationChangeInfo=r}))}extractLocationChangeInfoFromEvent(n){var r;return{source:"popstate"===n.type?"popstate":"hashchange",urlTree:this.parseUrl(n.url),state:(null===(r=n.state)||void 0===r?void 0:r.navigationId)?n.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(n,r){if(!n)return!0;const i=r.urlTree.toString()===n.urlTree.toString();return r.transitionId!==n.transitionId||!i||!("hashchange"===r.source&&"popstate"===n.source||"popstate"===r.source&&"hashchange"===n.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(n){this.events.next(n)}resetConfig(n){jD(n),this.config=n.map(gm),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(n,r={}){const{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,h=i||this.routerState.root,g=u?this.currentUrlTree.fragment:s;let y=null;switch(a){case"merge":y=Object.assign(Object.assign({},this.currentUrlTree.queryParams),o);break;case"preserve":y=this.currentUrlTree.queryParams;break;default:y=o||null}return null!==y&&(y=this.removeEmptyProps(y)),function(t,e,n,r,i){if(0===n.length)return dm(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new OD(!0,0,t);let e=0,n=!1;const r=t.reduce((i,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return Rn(o.outlets,(u,h)=>{a[h]="string"==typeof u?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===s?(o.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?n=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,o]},[]);return new OD(n,e,r)}(n);if(o.toRoot())return dm(e.root,new ft([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new fm(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const o=n.snapshot._urlSegment;return new fm(o,o===e.root,0)}const r=ff(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new fm(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?hf(s.segmentGroup,s.index,o.commands):kD(s.segmentGroup,s.index,o.commands);return dm(s.segmentGroup,a,e,r,i)}(h,this.currentUrlTree,n,y,null!=g?g:null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=Gs(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,"imperative",null,r)}navigate(n,r={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,n)}return r}isActive(n,r){let i;if(i=!0===r?Object.assign({},Pj):!1===r?Object.assign({},Mj):r,Gs(n))return yD(this.currentUrlTree,n,i);const o=this.parseUrl(n);return yD(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.keys(n).reduce((r,i)=>{const o=n[i];return null!=o&&(r[i]=o),r},{})}processNavigations(){this.navigations.subscribe(n=>{this.navigated=!0,this.lastSuccessfulId=n.id,this.currentPageId=n.targetPageId,this.events.next(new Nl(n.id,this.serializeUrl(n.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,n.resolve(!0)},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)})}scheduleNavigation(n,r,i,o,s){var a,u;if(this.disposed)return Promise.resolve(!1);const h=this.getTransition(),g=bf(r)&&h&&!bf(h.source),P=(this.lastSuccessfulId===h.id||this.currentNavigation?h.rawUrl:h.urlAfterRedirects).toString()===n.toString();if(g&&P)return Promise.resolve(!0);let F,Z,Q;s?(F=s.resolve,Z=s.reject,Q=s.promise):Q=new Promise((Pe,Fe)=>{F=Pe,Z=Fe});const fe=++this.navigationId;let ce;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),ce=i&&i.\u0275routerPageId?i.\u0275routerPageId:o.replaceUrl||o.skipLocationChange?null!==(a=this.browserPageId)&&void 0!==a?a:0:(null!==(u=this.browserPageId)&&void 0!==u?u:0)+1):ce=0,this.setTransition({id:fe,targetPageId:ce,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:n,extras:o,resolve:F,reject:Z,promise:Q,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Q.catch(Pe=>Promise.reject(Pe))}setBrowserUrl(n,r){const i=this.urlSerializer.serialize(n),o=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",o):this.location.go(i,"",o)}restoreHistory(n,r=!1){var i,o;if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-n.targetPageId;"popstate"!==n.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===s?this.currentUrlTree===(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)&&0===s&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(s)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(n,r){const i=new cD(n.id,this.serializeUrl(n.extractedUrl),r);this.triggerEvent(i),n.resolve(!1)}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}}return t.\u0275fac=function(n){return new(n||t)(De(Nu),De(im),De(fc),De(jd),De(Tt),De(Id),De(Vs),De(void 0))},t.\u0275prov=Oe({token:t,factory:t.\u0275fac}),t})();function bf(t){return"imperative"!==t}let Cm=(()=>{class t{constructor(n,r,i,o,s){this.parentContexts=n,this.location=r,this.resolver=i,this.changeDetector=s,this.activated=null,this._activatedRoute=null,this.activateEvents=new yn,this.deactivateEvents=new yn,this.name=o||ot,n.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const n=this.parentContexts.getContext(this.name);n&&n.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=n;const s=(r=r||this.resolver).resolveComponentFactory(n._futureSnapshot.routeConfig.component),a=this.parentContexts.getOrCreateContext(this.name).children,u=new kj(n,a,this.location.injector);this.activated=this.location.createComponent(s,this.location.length,u),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(n){return new(n||t)(he(fc),he(gi),he(ks),function(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const r=n.length;let i=0;for(;i<r;){const o=n[i];if(Ee(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(o===e)return n[i+1];i+=2}}}return null}(rn(),t)}("name"),he(Ap))},t.\u0275dir=Le({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class kj{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Io?this.route:e===fc?this.childContexts:this.parent.get(e,n)}}class tS{}class nS{preload(e,n){return Je(null)}}let rS=(()=>{class t{constructor(n,r,i,o,s){this.router=n,this.injector=o,this.preloadingStrategy=s,this.loader=new ZD(r,i,h=>n.triggerEvent(new lD(h)),h=>n.triggerEvent(new uD(h)))}setUpPreloading(){this.subscription=this.router.events.pipe(Bs(n=>n instanceof Nl),lc(()=>this.preload())).subscribe(()=>{})}preload(){const n=this.injector.get(Gi);return this.processRoutes(n,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const i=[];for(const o of r)if(o.loadChildren&&!o.canLoad&&o._loadedConfig){const s=o._loadedConfig;i.push(this.processRoutes(s.module,s.routes))}else o.loadChildren&&!o.canLoad?i.push(this.preloadConfig(n,o)):o.children&&i.push(this.processRoutes(n,o.children));return Et(i).pipe(Or(),je(o=>{}))}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?Je(r._loadedConfig):this.loader.load(n.injector,r)).pipe(Yt(o=>(r._loadedConfig=o,this.processRoutes(o.module,o.routes)))))}}return t.\u0275fac=function(n){return new(n||t)(De(On),De(Id),De(Vs),De(Tt),De(tS))},t.\u0275prov=Oe({token:t,factory:t.\u0275fac}),t})(),Em=(()=>{class t{constructor(n,r,i={}){this.router=n,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(n=>{n instanceof nm?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof Nl&&(this.lastId=n.id,this.scheduleScrollEvent(n,this.router.parseUrl(n.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(n=>{n instanceof dD&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.router.triggerEvent(new dD(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(n){return new(n||t)(De(On),De(BE),De(void 0))},t.\u0275prov=Oe({token:t,factory:t.\u0275fac}),t})();const zs=new nt("ROUTER_CONFIGURATION"),iS=new nt("ROUTER_FORROOT_GUARD"),Fj=[jd,{provide:im,useClass:CD},{provide:On,useFactory:function(t,e,n,r,i,o,s,a={},u,h){const g=new On(null,t,e,n,r,i,o,pD(s));return u&&(g.urlHandlingStrategy=u),h&&(g.routeReuseStrategy=h),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(a,g),a.enableTracing&&g.events.subscribe(y=>{var w,P;null===(w=console.group)||void 0===w||w.call(console,`Router Event: ${y.constructor.name}`),console.log(y.toString()),console.log(y),null===(P=console.groupEnd)||void 0===P||P.call(console)}),g},deps:[im,fc,jd,Tt,Id,Vs,vm,zs,[class{},new mr],[class{},new mr]]},fc,{provide:Io,useFactory:function(t){return t.routerState.root},deps:[On]},{provide:Id,useClass:M1},rS,nS,class{preload(e,n){return n().pipe(Us(()=>Je(null)))}},{provide:zs,useValue:{enableTracing:!1}}];function Vj(){return new hg("Router",On)}let oS=(()=>{class t{constructor(n,r){}static forRoot(n,r){return{ngModule:t,providers:[Fj,sS(n),{provide:iS,useFactory:Bj,deps:[[On,new mr,new $o]]},{provide:zs,useValue:r||{}},{provide:sc,useFactory:jj,deps:[Yo,[new Da(ac),new mr],zs]},{provide:Em,useFactory:Lj,deps:[On,BE,zs]},{provide:tS,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:nS},{provide:hg,multi:!0,useFactory:Vj},[Dm,{provide:Sl,multi:!0,useFactory:Gj,deps:[Dm]},{provide:aS,useFactory:zj,deps:[Dm]},{provide:k0,multi:!0,useExisting:aS}]]}}static forChild(n){return{ngModule:t,providers:[sS(n)]}}}return t.\u0275fac=function(n){return new(n||t)(De(iS,8),De(On,8))},t.\u0275mod=Fn({type:t}),t.\u0275inj=Kt({}),t})();function Lj(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new Em(t,e,n)}function jj(t,e,n={}){return n.useHash?new Kk(t,e):new SE(t,e)}function Bj(t){return"guarded"}function sS(t){return[{provide:Yw,multi:!0,useValue:t},{provide:vm,multi:!0,useValue:t}]}let Dm=(()=>{class t{constructor(n){this.injector=n,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ye}appInitializer(){return this.injector.get(qk,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(a=>r=a),o=this.injector.get(On),s=this.injector.get(zs);return"disabled"===s.initialNavigation?(o.setUpLocationChangeListener(),r(!0)):"enabled"===s.initialNavigation||"enabledBlocking"===s.initialNavigation?(o.hooks.afterPreactivation=()=>this.initNavigation?Je(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),o.initialNavigation()):r(!0),i})}bootstrapListener(n){const r=this.injector.get(zs),i=this.injector.get(rS),o=this.injector.get(Em),s=this.injector.get(On),a=this.injector.get(rc);n===a.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&s.initialNavigation(),i.setUpPreloading(),o.init(),s.resetRootComponentType(a.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return t.\u0275fac=function(n){return new(n||t)(De(Tt))},t.\u0275prov=Oe({token:t,factory:t.\u0275fac}),t})();function Gj(t){return t.appInitializer.bind(t)}function zj(t){return t.bootstrapListener.bind(t)}const aS=new nt("Router Initializer");var qr=(()=>(function(t){t.HOME="",t.LOBBY="lobby",t.GAME="game",t.LOCAL="local",t.JOIN="join"}(qr||(qr={})),qr))();function cS(t,e,n,r,i,o,s){try{var a=t[o](s),u=a.value}catch(h){return void n(h)}a.done?e(u):Promise.resolve(u).then(r,i)}function Po(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function s(u){cS(o,r,i,s,a,"next",u)}function a(u){cS(o,r,i,s,a,"throw",u)}s(void 0)})}}var qj=I(805),lS=I.n(qj);class Qj extends x{constructor(e,n){super()}schedule(e,n=0){return this}}class uS extends Qj{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){if(this.closed)return this;this.state=e;const r=this.id,i=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(i,r,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(i,this.id,n),this}requestAsyncId(e,n,r=0){return setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(null!==r&&this.delay===r&&!1===this.pending)return n;clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i,r=!1;try{this.work(e)}catch(o){r=!0,i=!!o&&o||new Error(o)}if(r)return this.unsubscribe(),i}_unsubscribe(){const e=this.id,n=this.scheduler,r=n.actions,i=r.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==i&&r.splice(i,1),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null}}let dS=(()=>{class t{constructor(n,r=t.now){this.SchedulerAction=n,this.now=r}schedule(n,r=0,i){return new this.SchedulerAction(this,n).schedule(i,r)}}return t.now=()=>Date.now(),t})();class Mo extends dS{constructor(e,n=dS.now){super(e,()=>Mo.delegate&&Mo.delegate!==this?Mo.delegate.now():n()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,n=0,r){return Mo.delegate&&Mo.delegate!==this?Mo.delegate.schedule(e,n,r):super.schedule(e,n,r)}flush(e){const{actions:n}=this;if(this.active)return void n.push(e);let r;this.active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=n.shift());if(this.active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}}const Jj=new class extends Mo{}(class extends uS{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return null!==r&&r>0||null===r&&this.delay>0?super.requestAsyncId(e,n,r):e.flush(this)}});class Qr{constructor(e,n,r){this.kind=e,this.value=n,this.error=r,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,n,r){switch(this.kind){case"N":return e&&e(this.value);case"E":return n&&n(this.error);case"C":return r&&r()}}accept(e,n,r){return e&&"function"==typeof e.next?this.observe(e):this.do(e,n,r)}toObservable(){switch(this.kind){case"N":return Je(this.value);case"E":return function(t,e){return new ve(n=>n.error(t))}(this.error);case"C":return rf()}throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new Qr("N",e):Qr.undefinedValueNotification}static createError(e){return new Qr("E",void 0,e)}static createComplete(){return Qr.completeNotification}}Qr.completeNotification=new Qr("C"),Qr.undefinedValueNotification=new Qr("N",void 0);class Cf extends M{constructor(e,n,r=0){super(e),this.scheduler=n,this.delay=r}static dispatch(e){const{notification:n,destination:r}=e;n.observe(r),this.unsubscribe()}scheduleMessage(e){this.destination.add(this.scheduler.schedule(Cf.dispatch,this.delay,new t2(e,this.destination)))}_next(e){this.scheduleMessage(Qr.createNext(e))}_error(e){this.scheduleMessage(Qr.createError(e)),this.unsubscribe()}_complete(){this.scheduleMessage(Qr.createComplete()),this.unsubscribe()}}class t2{constructor(e,n){this.notification=e,this.destination=n}}class n2 extends ye{constructor(e=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY,r){super(),this.scheduler=r,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const n=this._events;n.push(e),n.length>this._bufferSize&&n.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new r2(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=r.length;let s;if(this.closed)throw new Ze;if(this.isStopped||this.hasError?s=x.EMPTY:(this.observers.push(e),s=new be(this,e)),i&&e.add(e=new Cf(e,i)),n)for(let a=0;a<o&&!e.closed;a++)e.next(r[a]);else for(let a=0;a<o&&!e.closed;a++)e.next(r[a].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),s}_getNow(){return(this.scheduler||Jj).now()}_trimBufferThenGetEvents(){const e=this._getNow(),n=this._bufferSize,r=this._windowTime,i=this._events,o=i.length;let s=0;for(;s<o&&!(e-i[s].time<r);)s++;return o>n&&(s=Math.max(s,o-n)),s>0&&i.splice(0,s),i}}class r2{constructor(e,n){this.time=e,this.value=n}}const fS=new Mo(uS);function s2(t){const{subscriber:e,counter:n,period:r}=t;e.next(n),this.schedule({subscriber:e,counter:n+1,period:r},r)}var Ef=I(330),hS=I(686);function Ws(t){const e=Ef.getLogger(t);return e.setLevel("INFO"),e}hS.reg(Ef),hS.apply(Ef,{format:(t,e,n)=>`[${n}] ${t} ${e}:`});const Qi=Ws("peer-to-peer.service");let Zo=(()=>{class t{constructor(){this.messageSubject=function(t){const e=new ye,n=new ye;let r=t(),i=n.subscribe(r);return{observable:e.asObservable().pipe(iD(null),wo(()=>r)),reset:()=>{i.unsubscribe(),r=t(),i=n.subscribe(r),e.next()},subject:n}}(()=>new n2(100)),this.peer=null,this.isHost=!0,this.isConnected=!1,this.connections={},this.connectionAdded=new ye,this.connectionRemoved=new ye,this.getConnections=()=>Object.keys(this.connections),this.getId=()=>{var n,r;return null!==(r=null===(n=this.peer)||void 0===n?void 0:n.id)&&void 0!==r?r:"default"},this.getIsHost=()=>this.isHost,this.getIsConnected=()=>this.isConnected,this.getMessageObservable=()=>this.messageSubject.observable}setupAsHost(){var n=this;return Po(function*(){var r;null===(r=n.peer)||void 0===r||r.destroy(),n.peer=new(lS())(n.getPeerConfig()),n.isHost=!0,yield n.connectToPeerServer(),n.isConnected=!0,n.peer.on("connection",i=>{i.on("open",()=>{n.addConnectionIfNotExist(i.peer,i)}),i.on("data",n.messageHandler.bind(n)),n.attachErrorAndCloseConnEvents(i)}),n.peer.on("close",()=>{Qi.warn("NOT ACCEPTING INCOMING CONNECTIONS??")})})()}setupByConnectingToId(n){var r=this;return Po(function*(){return r.destroy(),r.peer=new(lS())(r.getPeerConfig()),r.isHost=!1,yield r.connectToPeerServer(),new Promise((i,o)=>{const s=function(t=0,e=fS){return(!function(t){return!W(t)&&t-parseFloat(t)+1>=0}(t)||t<0)&&(t=0),(!e||"function"!=typeof e.schedule)&&(e=fS),new ve(n=>(n.add(e.schedule(s2,t,{subscriber:n,counter:0,period:t})),n))}(5e3).subscribe(u=>{o(`Could not connect after 5000ms. Is the host ${n} correct?`),s.unsubscribe()});Qi.info(`connecting to ${n}`);const a=r.peer.connect(n,{reliable:!0});a.on("data",u=>{r.messageHandler(u)}),a.on("open",()=>{Qi.info(`connected to ${n}!`),r.addConnectionIfNotExist(n,a),r.isConnected=!0,i(!0),s.unsubscribe()}),r.attachErrorAndCloseConnEvents(a,u=>{o(u),a.close(),s.unsubscribe()})})})()}getHostId(){return this.isHost?this.getId():this.getConnections()[0]}broadcastAndToSelf(n,r){const i=this.broadcast(n,r);return this.messageSubject.subject.next(i),i}broadcast(n,r){var i;const o=null!==(i=null==r?void 0:r.from)&&void 0!==i?i:this.getId(),s={from:o,type:"BROADCAST",data:n};(null==r?void 0:r.echo)&&(s.echoBroadcast=!0);for(const a in this.connections)a===o&&!(null==r?void 0:r.echo)||this.sendMessage(a,s);return s}sendSingleMessage(n,r){const i={from:this.getId(),type:"SINGLE",data:r};this.sendMessage(n,i)}dispose(){this.destroy()}getPeerConfig(){return{host:"heroku-chess-123.herokuapp.com",port:443,secure:!0}}connectToPeerServer(){return new Promise((n,r)=>{this.peer.on("open",i=>{Qi.info(`I am connected to peer server as (${this.getId()})`),n(!0)}),this.peer.on("error",i=>{r(i)})})}attachErrorAndCloseConnEvents(n,r){n.on("error",i=>{Qi.error(`connection: ${n.peer} error! ${i}`),this.onPeerDisconnected(n),null!=r&&r(i)}),this.attachToConnCloseEvents(n,()=>{Qi.info(`connection: ${n.peer} closed!`),this.onPeerDisconnected(n),null!=r&&r()})}attachToConnCloseEvents(n,r){n.on("close",()=>r()),n.on("iceStateChanged",i=>{"disconnected"===i&&r()})}onPeerDisconnected(n){this.isHost||(this.isConnected=!1),this.deleteConnectionIfExists(n.peer),this.broadcastAndToSelf({command:"DISCONNECTED",name:n.peer})}destroy(){var n;null===(n=this.peer)||void 0===n||n.destroy(),this.isConnected=!1,this.isHost=!1,this.messageSubject.reset(),this.connections={}}messageHandler(n){Qi.debug("incomingMessage",n),this.isHost&&"BROADCAST"===n.type?this.broadcast(n.data,{from:n.from,echo:n.echoBroadcast}):"DISCONNECTED"===n.data.command&&this.deleteConnectionIfExists(n.data.name),this.messageSubject.subject.next(n)}addConnectionIfNotExist(n,r){n in this.connections||(Qi.info(`new connection! ${n}`),this.connections[n]=r,this.connectionAdded.next(n))}deleteConnectionIfExists(n){n in this.connections&&(delete this.connections[n],this.connectionRemoved.next(n))}sendMessage(n,r){if(!(n in this.connections))return n===this.getId()?void this.messageSubject.subject.next(r):void Qi.warn(`cant send message ${this.getId()} ==> ${n}, ${r}`);Qi.debug(`SEND MESSAGE TO ${n}`,r),this.connections[n].send(r)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Oe({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),gS=(()=>{class t{constructor(n,r){this.peerToPeerService=n,this.router=r}canActivate(n,r){return!!this.peerToPeerService.getIsConnected()||this.router.parseUrl(qr.JOIN+"/"+n.params.id)}}return t.\u0275fac=function(n){return new(n||t)(De(Zo),De(On))},t.\u0275prov=Oe({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class mS{constructor(e){this.x=0,this.y=0,this.letter="A",this.dropIndex=-1,this.lastClicked=!1,this.id=e,this.invalid=!1}}const d2=Ws("board");class yS{constructor(){this.squares=[]}createNewSquare(){let e=0;for(const i of this.squares)e=Math.max(e,i.id);const r=new mS(e+1);return this.squares.push(r),r}getSquareFromId(e){const n=this.squares.find(i=>i.id===e);if(n)return n;d2.warn("New square created from getSquareFromId...");const r=new mS(e);return this.squares.push(r),r}getSquareFromEl(e){return this.getSquareFromId(parseInt(e.getAttribute("data-id")))}}class vS{constructor(e){this.tilesUsed=0,this.totalTiles=0,this.boardState=new yS,this.isEliminated=!1,this.isSpectator=!1,this.disconnected=!1,this.id=e}}class f2{constructor(){this.subject=new ye,this.q=[]}add(e){this.q.push(e),this.subject.next()}getLength(){return this.q.length}pop(){return this.q.shift()}}class bS{constructor(e){this.v=e}updateByAssignment(e,n){n in e&&(this.v[n]=e[n])}}class h2{updateBoard(e,n){const r=this.getInvSquares(e.squares),i=this.getInvSquares(n.squares),o=[];for(let s of e.squares){if(!(s.id in i)){o.push(s.id);continue}const a=i[s.id],u=new bS(s);u.updateByAssignment(a,"dropIndex"),u.updateByAssignment(a,"lastClicked"),u.updateByAssignment(a,"letter"),u.updateByAssignment(a,"x"),u.updateByAssignment(a,"y"),u.updateByAssignment(a,"invalid")}for(let s of n.squares)s.id in r||e.squares.push(s);e.squares=e.squares.filter(s=>!o.includes(s.id))}getInvSquares(e){const n={};for(let r of e)n[r.id]=r;return n}}const CS=["isEliminated","isSpectator","tilesUsed","nameEncoded","disconnected"];class p2{updatePlayer(e,n){const r=new bS(e);"nameEncoded"in n&&e.nameEncoded!==n.nameEncoded&&(e.name=decodeURI(n.nameEncoded));for(let i of CS)r.updateByAssignment(n,i);(new h2).updateBoard(e.boardState,n.boardState)}}const g2=["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"];let m2=(()=>{class t{constructor(){}isOneComponent(n){return 1===this.getNumComponents(n)}getNumComponents(n){const r=n.map(h=>h.dropIndex),i=new Set(r),o=[],s={},a={};for(const h of r)o.push(h);let u=0;for(;o.length;){const h=o.pop();if(!(h in a)){a[h]=1,h in s||(s[h]=u++);for(const g of this.getAdjacentSquares(h))i.has(g)&&(s[g]=s[h],a[g]||o.push(g))}}return u}*getAdjacentSquares(n){const r=n%22;yield n-22,yield n+22,r>0&&(yield n-1),r<21&&(yield n+1)}getMovedSquareIds(n,r){const i="ArrowLeft"===r||"ArrowRight"===r,s={ArrowLeft:-1,ArrowRight:1,ArrowDown:22,ArrowUp:-22}[r],a=[];for(let u of n)if(i){const g=u.dropIndex%22+s;a.push(0<=g&&g<22?u.dropIndex+s:u.dropIndex)}else{let h=u.dropIndex+s;(h<0||h>=484)&&(h=u.dropIndex),a.push(h)}return a}sortTwoArrays(n,r,i){if(n.length!==r.length)throw new Error(`expected same length ${n.length}, ${r.length}`);const o=Array(n.length).fill(null).map((s,a)=>a);return o.sort((s,a)=>i(n[s],n[a])),[o.map(s=>n[s]),o.map(s=>r[s])]}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Oe({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class ES{}class DS{}class Ao{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(n=>{const r=n.indexOf(":");if(r>0){const i=n.slice(0,r),o=i.toLowerCase(),s=n.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(n=>{let r=e[n];const i=n.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(n,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof Ao?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){const n=new Ao;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof Ao?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){const n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,n);const i=("a"===e.op?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":const o=e.value;if(o){let s=this.headers.get(n);if(!s)return;s=s.filter(a=>-1===o.indexOf(a)),0===s.length?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}else this.headers.delete(n),this.normalizedNames.delete(n)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}}class y2{encodeKey(e){return SS(e)}encodeValue(e){return SS(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const _2=/%(\d[a-f0-9])/gi,b2={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function SS(t){return encodeURIComponent(t).replace(_2,(e,n)=>{var r;return null!==(r=b2[n])&&void 0!==r?r:e})}function wS(t){return`${t}`}class es{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new y2,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{const o=i.indexOf("="),[s,a]=-1==o?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],u=n.get(s)||[];u.push(a),n.set(s,u)}),n}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{const r=e.fromObject[n];this.map.set(n,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){const n=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const n=new es({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const n=("a"===e.op?this.map.get(e.param):void 0)||[];n.push(wS(e.value)),this.map.set(e.param,n);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(wS(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class C2{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}keys(){return this.map.keys()}}function TS(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function xS(t){return"undefined"!=typeof Blob&&t instanceof Blob}function IS(t){return"undefined"!=typeof FormData&&t instanceof FormData}class zl{constructor(e,n,r,i){let o;if(this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new Ao),this.context||(this.context=new C2),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=n;else{const a=n.indexOf("?");this.urlWithParams=n+(-1===a?"?":a<n.length-1?"&":"")+s}}else this.params=new es,this.urlWithParams=n}serializeBody(){return null===this.body?null:TS(this.body)||xS(this.body)||IS(this.body)||function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof es?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||IS(this.body)?null:xS(this.body)?this.body.type||null:TS(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof es?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var n;const r=e.method||this.method,i=e.url||this.url,o=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,a=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,u=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let h=e.headers||this.headers,g=e.params||this.params;const y=null!==(n=e.context)&&void 0!==n?n:this.context;return void 0!==e.setHeaders&&(h=Object.keys(e.setHeaders).reduce((w,P)=>w.set(P,e.setHeaders[P]),h)),e.setParams&&(g=Object.keys(e.setParams).reduce((w,P)=>w.set(P,e.setParams[P]),g)),new zl(r,i,s,{params:g,headers:h,context:y,reportProgress:u,responseType:o,withCredentials:a})}}var dn=(()=>((dn=dn||{})[dn.Sent=0]="Sent",dn[dn.UploadProgress=1]="UploadProgress",dn[dn.ResponseHeader=2]="ResponseHeader",dn[dn.DownloadProgress=3]="DownloadProgress",dn[dn.Response=4]="Response",dn[dn.User=5]="User",dn))();class wm{constructor(e,n=200,r="OK"){this.headers=e.headers||new Ao,this.status=void 0!==e.status?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Tm extends wm{constructor(e={}){super(e),this.type=dn.ResponseHeader}clone(e={}){return new Tm({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Df extends wm{constructor(e={}){super(e),this.type=dn.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Df({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class PS extends wm{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function xm(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let MS=(()=>{class t{constructor(n){this.handler=n}request(n,r,i={}){let o;if(n instanceof zl)o=n;else{let u,h;u=i.headers instanceof Ao?i.headers:new Ao(i.headers),i.params&&(h=i.params instanceof es?i.params:new es({fromObject:i.params})),o=new zl(n,r,void 0!==i.body?i.body:null,{headers:u,context:i.context,params:h,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const s=Je(o).pipe(lc(u=>this.handler.handle(u)));if(n instanceof zl||"events"===i.observe)return s;const a=s.pipe(Bs(u=>u instanceof Df));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(je(u=>{if(null!==u.body&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return a.pipe(je(u=>{if(null!==u.body&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return a.pipe(je(u=>{if(null!==u.body&&"string"!=typeof u.body)throw new Error("Response is not a string.");return u.body}));case"json":default:return a.pipe(je(u=>u.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:(new es).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,i={}){return this.request("PATCH",n,xm(i,r))}post(n,r,i={}){return this.request("POST",n,xm(i,r))}put(n,r,i={}){return this.request("PUT",n,xm(i,r))}}return t.\u0275fac=function(n){return new(n||t)(De(ES))},t.\u0275prov=Oe({token:t,factory:t.\u0275fac}),t})();class AS{constructor(e,n){this.next=e,this.interceptor=n}handle(e){return this.interceptor.intercept(e,this.next)}}const RS=new nt("HTTP_INTERCEPTORS");let S2=(()=>{class t{intercept(n,r){return r.handle(n)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Oe({token:t,factory:t.\u0275fac}),t})();const w2=/^\)\]\}',?\n/;let OS=(()=>{class t{constructor(n){this.xhrFactory=n}handle(n){if("JSONP"===n.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new ve(r=>{const i=this.xhrFactory.build();if(i.open(n.method,n.urlWithParams),n.withCredentials&&(i.withCredentials=!0),n.headers.forEach((P,F)=>i.setRequestHeader(P,F.join(","))),n.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!n.headers.has("Content-Type")){const P=n.detectContentTypeHeader();null!==P&&i.setRequestHeader("Content-Type",P)}if(n.responseType){const P=n.responseType.toLowerCase();i.responseType="json"!==P?P:"text"}const o=n.serializeBody();let s=null;const a=()=>{if(null!==s)return s;const P=1223===i.status?204:i.status,F=i.statusText||"OK",Z=new Ao(i.getAllResponseHeaders()),Q=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(i)||n.url;return s=new Tm({headers:Z,status:P,statusText:F,url:Q}),s},u=()=>{let{headers:P,status:F,statusText:Z,url:Q}=a(),fe=null;204!==F&&(fe=void 0===i.response?i.responseText:i.response),0===F&&(F=fe?200:0);let ce=F>=200&&F<300;if("json"===n.responseType&&"string"==typeof fe){const Pe=fe;fe=fe.replace(w2,"");try{fe=""!==fe?JSON.parse(fe):null}catch(Fe){fe=Pe,ce&&(ce=!1,fe={error:Fe,text:fe})}}ce?(r.next(new Df({body:fe,headers:P,status:F,statusText:Z,url:Q||void 0})),r.complete()):r.error(new PS({error:fe,headers:P,status:F,statusText:Z,url:Q||void 0}))},h=P=>{const{url:F}=a(),Z=new PS({error:P,status:i.status||0,statusText:i.statusText||"Unknown Error",url:F||void 0});r.error(Z)};let g=!1;const y=P=>{g||(r.next(a()),g=!0);let F={type:dn.DownloadProgress,loaded:P.loaded};P.lengthComputable&&(F.total=P.total),"text"===n.responseType&&!!i.responseText&&(F.partialText=i.responseText),r.next(F)},w=P=>{let F={type:dn.UploadProgress,loaded:P.loaded};P.lengthComputable&&(F.total=P.total),r.next(F)};return i.addEventListener("load",u),i.addEventListener("error",h),i.addEventListener("timeout",h),i.addEventListener("abort",h),n.reportProgress&&(i.addEventListener("progress",y),null!==o&&i.upload&&i.upload.addEventListener("progress",w)),i.send(o),r.next({type:dn.Sent}),()=>{i.removeEventListener("error",h),i.removeEventListener("abort",h),i.removeEventListener("load",u),i.removeEventListener("timeout",h),n.reportProgress&&(i.removeEventListener("progress",y),null!==o&&i.upload&&i.upload.removeEventListener("progress",w)),i.readyState!==i.DONE&&i.abort()}})}}return t.\u0275fac=function(n){return new(n||t)(De(HE))},t.\u0275prov=Oe({token:t,factory:t.\u0275fac}),t})();const Im=new nt("XSRF_COOKIE_NAME"),Pm=new nt("XSRF_HEADER_NAME");class kS{}let x2=(()=>{class t{constructor(n,r,i){this.doc=n,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=kE(n,this.cookieName),this.lastCookieString=n),this.lastToken}}return t.\u0275fac=function(n){return new(n||t)(De(xn),De(wd),De(Im))},t.\u0275prov=Oe({token:t,factory:t.\u0275fac}),t})(),Mm=(()=>{class t{constructor(n,r){this.tokenService=n,this.headerName=r}intercept(n,r){const i=n.url.toLowerCase();if("GET"===n.method||"HEAD"===n.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(n);const o=this.tokenService.getToken();return null!==o&&!n.headers.has(this.headerName)&&(n=n.clone({headers:n.headers.set(this.headerName,o)})),r.handle(n)}}return t.\u0275fac=function(n){return new(n||t)(De(kS),De(Pm))},t.\u0275prov=Oe({token:t,factory:t.\u0275fac}),t})(),I2=(()=>{class t{constructor(n,r){this.backend=n,this.injector=r,this.chain=null}handle(n){if(null===this.chain){const r=this.injector.get(RS,[]);this.chain=r.reduceRight((i,o)=>new AS(i,o),this.backend)}return this.chain.handle(n)}}return t.\u0275fac=function(n){return new(n||t)(De(DS),De(Tt))},t.\u0275prov=Oe({token:t,factory:t.\u0275fac}),t})(),P2=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:Mm,useClass:S2}]}}static withOptions(n={}){return{ngModule:t,providers:[n.cookieName?{provide:Im,useValue:n.cookieName}:[],n.headerName?{provide:Pm,useValue:n.headerName}:[]]}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Fn({type:t}),t.\u0275inj=Kt({providers:[Mm,{provide:RS,useExisting:Mm,multi:!0},{provide:kS,useClass:x2},{provide:Im,useValue:"XSRF-TOKEN"},{provide:Pm,useValue:"X-XSRF-TOKEN"}]}),t})(),M2=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Fn({type:t}),t.\u0275inj=Kt({providers:[MS,{provide:ES,useClass:I2},OS,{provide:DS,useExisting:OS}],imports:[[P2.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})();const A2=Ws("dictionary");let R2=(()=>{class t{constructor(n,r){this.httpClient=n,this.baseHref=r,this.dict=new Set,window.fixDictionary=()=>this.init(),window.checkWord=i=>this.hasWord(i),this.init()}init(){var n=this;return Po(function*(){return n.httpClient.get(n.baseHref+"assets/csw2019.txt",{responseType:"text"}).subscribe(r=>{n.addAllWords(r.split("\r\n")),n.addAllWords(r.split("\n"))})})()}addAllWords(n){for(let r of n)this.dict.add(r)}hasWord(n){return n=n.toUpperCase(),A2.debug(`hasWord(${n}) = ${this.dict.has(n)}`),this.dict.has(n)}}return t.\u0275fac=function(n){return new(n||t)(De(MS),De(ac))},t.\u0275prov=Oe({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),NS=(()=>{class t{constructor(n){this.dictionaryService=n}getInvalidSquares(n){const r=[];for(let g=0;g<22;++g)r.push(Array(22).fill(null));for(const g of n)r[Math.floor(g.dropIndex/22)][g.dropIndex%22]=g;const i=new FS,o=new FS;for(let g=0;g<22;++g){for(let y=0;y<22;++y)i.next(r[g][y]),o.next(r[y][g]);i.clear(),o.clear()}const a=i.squares.concat(o.squares).filter(g=>this.isInvalidWord(g)),u=new Set,h=[];for(let g of a)for(let y of g)y.id in u||(u.add(y.id),h.push(y));return h}isInvalidWord(n){if(1===n.length)return!1;const r=n.map(i=>i.letter);return!this.dictionaryService.hasWord(r.join(""))}}return t.\u0275fac=function(n){return new(n||t)(De(R2))},t.\u0275prov=Oe({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class FS{constructor(){this.squares=[],this.currentArr=[]}next(e){e?this.currentArr.push(e):this.clear()}clear(){this.currentArr.length&&this.squares.push(this.currentArr),this.currentArr=[]}}const VS="bananagrams-";let O2=(()=>{class t{constructor(){this.localState=this.getLocalState()}getLocalState(){const n=localStorage.getItem(VS);if(null===n)return this.getDefaultLocalState();try{return JSON.parse(n)}catch(r){return this.getDefaultLocalState()}}getDefaultLocalState(){return{previousIds:[]}}updateLocalState(){localStorage.setItem(VS,JSON.stringify(this.localState))}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Oe({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Am=(()=>{class t{constructor(n,r,i){this.peerToPeerService=n,this.router=r,this.ngZone=i}wrappedNavigate(n,r){this.ngZone.run(()=>this.router.navigate(n,r))}gotoLobby(){return this.wrappedNavigate([qr.LOBBY+"/"+this.peerToPeerService.getHostId()])}gotoGame(){return this.wrappedNavigate([qr.GAME+"/"+this.peerToPeerService.getHostId()])}}return t.\u0275fac=function(n){return new(n||t)(De(Zo),De(On),De(Zt))},t.\u0275prov=Oe({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Wl=Ws("game");let qs=(()=>{class t{constructor(n,r,i,o,s){this.peerToPeerService=n,this.invalidSquareFinderService=r,this.boardAlgorithmsService=i,this.localStorageService=o,this.navigationService=s,this.letter$=new f2,this.gameStart$=new ye,this.winner$=new ye,this.loser$=new ye,this.subs=[],this.state=t.getInitialState()}initFromPeerToPeer(){if(this.subs.length>0)return;this.state.players=[];const n=this.peerToPeerService.getId(),r=this.localStorageService.localState.previousIds;r.includes(n)||(r.push(n),this.localStorageService.localState.previousIds=r.slice(Math.max(r.length-10,0)),this.localStorageService.updateLocalState()),this.subs=[this.peerToPeerService.connectionRemoved.subscribe(i=>{this.peerToPeerService.getIsHost();const o=this.getPlayerById(i);o&&(o.disconnected=!0)}),this.peerToPeerService.getMessageObservable().subscribe(i=>{switch(i.data.command){case"UPDATE_PLAYER":{let o=this.getPlayerById(i.data.playerId);o||(o=new vS(i.data.playerId),this.state.players.push(o),this.localStorageService.localState.previousIds.includes(o.id)&&o.id!==this.peerToPeerService.getId()&&(Wl.info(`has been ${o.id} before.`),this.state.rejoinCandidate=o)),(new p2).updatePlayer(o,i.data.state)}break;case"GAME_START":for(;this.letter$.getLength()>0;)this.letter$.pop();this.resetLocalState(),this.state.gameId++,Wl.debug(`START GAME ${this.state.gameId}`),this.gameStart$.next(!0);break;case"REJOIN_AS_PLAYER":{Wl.info("REJOIN AS PLAYER",i);const o=this.getPlayerById(i.data.toPlayer);o&&(this.state.players=this.state.players.filter(s=>s.id!==i.from),o.id=i.from,o.disconnected=!1,o.id===this.peerToPeerService.getId()&&(this.state.rejoinCandidate=null))}break;case"RECEIVE_LETTERS":{const o=this.getPlayerById(i.data.playerId),s=i.data.playerId===this.peerToPeerService.getId();if(s){Wl.debug("received letters ",i.data.letters);for(let a of i.data.letters)this.letter$.add(a)}o.totalTiles=i.data.playerTotalTiles,s&&this.updateAfterDrop()}break;case"LOSER":this.getPlayerById(i.data.playerId).isEliminated=!0,i.data.playerId===this.peerToPeerService.getId()&&this.loser$.next();break;case"PLAYER_DISCONNECTED":{let o=this.getPlayerById(i.data.playerId);o&&(o.disconnected=!0),this.peerToPeerService.getIsConnected()&&i.data.playerId!==this.peerToPeerService.getHostId()||(this.getOrCreateMyPlayer().disconnected=!0)}break;case"WINNER":this.winner$.next();break;case"UPDATE_SHARED_STATE":Object.assign(this.state,i.data.state);break;case"RETURN_TO_LOBBY":this.navigationService.gotoLobby()}})],this.peerToPeerService.sendSingleMessage(this.peerToPeerService.getHostId(),{command:"REQUEST_ALL_STATE"})}dispose(){this.state=t.getInitialState(),this.subs.forEach(n=>n.unsubscribe),this.subs=[]}resetLocalState(){this.state.players.forEach(n=>{n.boardState=new yS,n.tilesUsed=0,n.isEliminated=!1,n.isSpectator=!1}),this.state.canClaimSuccess=!1}rejoinAsPlayer(n){this.peerToPeerService.broadcastAndToSelf({command:"REJOIN_AS_PLAYER",toPlayer:n.id})}updatePlayer(n){let r=this.getOrCreateMyPlayer();r.name=n,r.nameEncoded=encodeURI(r.name),this.sendPlayerUpdateMessage(r),this.sendPlayerUpdateMessage(r,this.peerToPeerService.getId())}updateAfterDrop(){let n=this.getOrCreateMyPlayer();n.tilesUsed=n.boardState.squares.reduce((r,i)=>r+(i.dropIndex<484?1:0),0),this.state.canClaimSuccess=this.canClaimSuccess(),this.sendUpdateMessage(this.getOrCreateMyPlayer())}canClaimSuccess(){const n=this.getOrCreateMyPlayer();return n.tilesUsed===n.totalTiles&&this.boardAlgorithmsService.isOneComponent(n.boardState.squares)}sendUpdateMessage(n){this.sendPlayerUpdateMessage(n)}sendPlayerUpdateMessage(n,r=null){let i={};for(const s of CS)i[s]=n[s];i.boardState=n.boardState;const o={command:"UPDATE_PLAYER",state:i,playerId:n.id};r?this.peerToPeerService.sendSingleMessage(r,o):this.peerToPeerService.broadcast(o)}claimSuccess(){let n=this.getPlayerById(this.peerToPeerService.getId());const r=this.invalidSquareFinderService.getInvalidSquares(n.boardState.squares);this.peerToPeerService.sendSingleMessage(this.peerToPeerService.getHostId(),{command:"CLAIM_SUCCESS",boardValid:0===r.length,numLetters:n.totalTiles})}dump(n){let r=this.getPlayerById(this.peerToPeerService.getId());r.boardState.squares=r.boardState.squares.filter(i=>i.id!==n.id),this.peerToPeerService.sendSingleMessage(this.peerToPeerService.getHostId(),{command:"DUMP_LETTER",letter:n.letter})}getOrCreateMyPlayer(){let n=this.getPlayerById(this.peerToPeerService.getId());return n||(n=new vS(this.peerToPeerService.getId())),this.state.myPlayer=n}moveAllSquares(n){const r=g2.find(g=>g===n);if(!r)return{shouldMove:!1};let o=this.getOrCreateMyPlayer().boardState.squares.filter(g=>g.dropIndex<484),s=this.boardAlgorithmsService.getMovedSquareIds(o,r);const a=new Set(s);if(a.size!==o.length)return Wl.debug(`refused to moved squares ${a.size} != ${o.length}`,a,s),{shouldMove:!1};const h={ArrowRight:(g,y)=>y.dropIndex-g.dropIndex,ArrowLeft:(g,y)=>g.dropIndex-y.dropIndex,ArrowUp:(g,y)=>g.dropIndex-y.dropIndex,ArrowDown:(g,y)=>y.dropIndex-g.dropIndex}[n];return[o,s]=this.boardAlgorithmsService.sortTwoArrays(o,s,h),{shouldMove:!0,squaresInPlay:o,movedIds:s}}static getInitialState(){return{gameId:0,canDump:!0,canClaimSuccess:!1,winnerId:null,totalTilesInGame:0,tilesUsedByPlayers:0,tilesRemaining:0,players:[],totalPeerCount:0,inGame:!1,nextPeelWins:!1,gameOver:!1,myPlayer:null,rejoinCandidate:null}}getPlayerById(n){return this.state.players.find(r=>r.id==n)}}return t.\u0275fac=function(n){return new(n||t)(De(Zo),De(NS),De(m2),De(O2),De(Am))},t.\u0275prov=Oe({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const k2=Ws("banana-animation"),Yi=140;class N2{constructor(e){this.ngZone=e,this.animations=[]}runAnimation(e){this.stopAnimation();const n=this.getAnimationsToAnimate();for(const o of this.animations)e.appendChild(o.div);let r=0;this.frameTimer=new V2({onGenerateFrame:()=>{for(let o of n[r]){const s=o.calcFrames[r];o.div.style.transform=s.transform,o.div.style.opacity=s.opacity}++r>=Yi&&(r=0)}}),this.frameTimer.start()}stopAnimation(){clearTimeout(this.timer),this.animations.forEach(e=>e.div.remove()),this.frameTimer&&this.frameTimer.stop(),this.frameTimer=null,this.animations=[]}getAnimationsToAnimate(){let e=[];for(let r=0;r<50;++r){const i=document.createElement("div");i.classList.add("banana");const o={div:i,endX:600*Math.random()-300,rot:(Math.random()<=.5?-1:1)*(720+360*Math.random()*5),offsetT:Math.floor(Math.random()*Yi)};o.calcFrames=this.calculateFrames(o),e.push(o)}let n=new Array(Yi).fill(null);for(let r=0;r<Yi;++r)n[r]=e.filter(i=>!i.calcFrames[r].skip);return this.debugInfo(e),this.animations=e,n}calculateFrames(e){let n=[];for(let o=0;o<Yi;++o){const s=this.roundToPrecision(e.rot*(o/Yi),0),a=this.roundToPrecision(e.endX*(o/Yi),0),u=this.roundToPrecision(350+.035*(o+80)*(o-140),0),g={transform:`translate(${a}px, ${u}px) rotate(${s}deg)`,opacity:this.roundToPrecision(o>=40&&o<=100?1:o<40?o/40:(Yi-o)/40).toString(),skip:u<=-43};n.push(g)}let r=Array(Yi).fill(null);const i=this.calculateOffsets(e,Yi);for(let o=0;o<i.length;++o)r[i[o]]=n[o];return r}calculateOffsets(e,n){return Array(n).fill(null).map((r,i)=>(e.offsetT+i)%n)}roundToPrecision(e,n=2){const r=10**n;return Math.round((e+Number.EPSILON)*r)/r}debugInfo(e){let n=0,r=0;for(let i of e)for(let o of i.calcFrames)n+=o.skip?1:0,r++;k2.info(`skipping ${n}/${r} frames (${(100*n/r).toFixed(1)}%)`)}}class V2{constructor(e){this.lastFrameTime=null,this.requestId=null,this.running=!1,this.onAnimationFrame=n=>{this.requestId=window.__zone_symbol__requestAnimationFrame(this.onAnimationFrame);const i=~~((n-this.lastFrameTime)/this.interval);this.lastFrameTime+=i*this.interval,0!==i&&this.onGenerateFrame()},this.onAnimationFrame=this.onAnimationFrame.bind(this),this.onGenerateFrame=e.onGenerateFrame,this.interval=1e3/60.098}start(){this.running=!0,this.lastFrameTime=0,this.onAnimationFrame(0)}stop(){this.running=!1,this.requestId&&cancelAnimationFrame(this.requestId),this.lastFrameTime=null}}class Rm{constructor(){this.d=new Map,this._size=0}get size(){return this._size}add(e){this.d.has(e)?(this.d.set(e,this.d.get(e)+1),this._size++):(this.d.set(e,1),this._size++)}delete(e){this.d.has(e)&&(this.d.set(e,this.d.get(e)-1),this._size--)}get(e){return this.d.get(e)}[Symbol.iterator](){let e=0,n=[];for(let[r,i]of this.d.entries())for(let o=0;o<i;++o)n.push(r);return{next:()=>({done:e===n.length,value:n[e++]})}}}let LS=(()=>{class t{constructor(){this.numTilesPerPlayerOverride=null,this.initialTilesOverride=null}getInitialTiles(n){if(this.initialTilesOverride)return this.initialTilesOverride;let r=new Array;const i=1+Math.floor((n-1)/8);for(let[o,s]of L2.entries())for(let a=0;a<s*i;++a)r.push(o);return r}getNumTilesPerPlayer(n){return this.numTilesPerPlayerOverride?this.numTilesPerPlayerOverride:1<=n&&n<=4?21:5<=n&&n<=6?15:11}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Oe({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const L2=new Map([["A",13],["B",3],["C",3],["D",6],["E",18],["F",3],["G",4],["H",3],["I",12],["J",2],["K",2],["L",5],["M",3],["N",8],["O",11],["P",3],["Q",2],["R",9],["S",6],["T",9],["U",6],["V",3],["W",3],["X",2],["Y",3],["Z",2]]),j2=(0,Ef.getLogger)("game-host");let Sf=(()=>{class t{constructor(n,r,i){this.peerToPeerService=n,this.gameService=r,this.initialTilesProviderService=i,this.state=t.getDefaultState(),this.subs=[],this.subs=[this.peerToPeerService.connectionAdded.subscribe(()=>this.updateSharedState()),this.peerToPeerService.connectionRemoved.subscribe(o=>{const s=this.gameService.getPlayerById(o);s&&this.peerToPeerService.broadcastAndToSelf({command:"PLAYER_DISCONNECTED",playerId:s.id}),this.updateSharedState()}),this.peerToPeerService.getMessageObservable().subscribe(o=>{var s;switch(o.data.command){case"DUMP_LETTER":{this.state.lettersPerPlayer[o.from].delete(o.data.letter);let u=[o.data.letter];this.canDump&&(u=this.takeLetters(3),this.state.letters.push(o.data.letter)),this.sendPlayerLetters(o.from,u),this.updateSharedState()}break;case"CLAIM_SUCCESS":{const a=this.state.lettersPerPlayer[o.from];if(a.size!==o.data.numLetters){j2.warn(`CLAIM_SUCCESS: host suggests ${a.size}, message has ${o.data.numLetters}`);break}this.nextPeelWins?o.data.boardValid?this.state.winnerId||(this.state.winnerId=o.from,this.updateSharedState(),this.peerToPeerService.broadcastAndToSelf({command:"WINNER"})):(this.state.losers.push(o.from),this.peerToPeerService.broadcastAndToSelf({command:"LOSER",playerId:o.from}),this.addLetters(a)):this.giveEveryPlayerNLetters(1),this.updateSharedState()}break;case"REQUEST_ALL_STATE":for(let a of this.gameService.state.players)this.gameService.sendPlayerUpdateMessage(a,o.from);this.updateSharedState();break;case"REJOIN_AS_PLAYER":this.state.lettersPerPlayer[o.from]=null!==(s=this.state.lettersPerPlayer[o.data.toPlayer])&&void 0!==s?s:new Rm,this.state.lettersPerPlayer[o.data.toPlayer]=new Rm}})]}createGame(){var n=this;return Po(function*(){yield n.peerToPeerService.setupAsHost()})()}startGame(){var n=this;return Po(function*(){n.dispose(),n.updateSharedState(),n.state.inGame=!0,n.peerToPeerService.broadcastAndToSelf({command:"GAME_START"});const r=n.gameService.state.players.length;for(let o of n.gameService.state.players)n.state.lettersPerPlayer[o.id]=new Rm;n.state.letters=n.initialTilesProviderService.getInitialTiles(r),t.shuffleArray(n.state.letters);const i=n.initialTilesProviderService.getNumTilesPerPlayer(r);n.state.totalTilesInGame=n.state.letters.length,n.giveEveryPlayerNLetters(i,!0),n.updateSharedState()})()}dispose(){this.state=t.getDefaultState()}updateSharedState(){this.peerToPeerService.broadcastAndToSelf({command:"UPDATE_SHARED_STATE",state:this.getSharedState()})}returnToLobby(){this.state.inGame=!1,this.updateSharedState(),this.peerToPeerService.broadcastAndToSelf({command:"RETURN_TO_LOBBY"})}giveEveryPlayerNLetters(n,r=!1){for(const i of this.getActivePlayers(r)){if(i.disconnected)continue;const o=this.takeLetters(n);this.sendPlayerLetters(i.id,o)}}getActivePlayers(n=!1){return this.gameService.state.players.filter(r=>{var i,o;return!r.isEliminated&&(n||(null!==(o=null===(i=this.state.lettersPerPlayer[r.id])||void 0===i?void 0:i.size)&&void 0!==o?o:0)>0)})}sendPlayerLetters(n,r){for(const i of r)this.state.lettersPerPlayer[n].add(i);this.peerToPeerService.broadcastAndToSelf({command:"RECEIVE_LETTERS",playerId:n,playerTotalTiles:this.state.lettersPerPlayer[n].size,letters:r})}get nextPeelWins(){const n=this.getActivePlayers().length;return this.state.letters.length<n}get canDump(){return this.state.letters.length>=3}addLetters(n){this.state.letters=this.state.letters.concat([...n]),t.shuffleArray(this.state.letters)}static shuffleArray(n){for(let r=n.length-1;r>0;r--){const i=Math.floor(Math.random()*(r+1));[n[r],n[i]]=[n[i],n[r]]}}takeLetters(n){if(n>this.state.letters.length)throw new Error(`tried to take ${n} letters, only ${this.state.letters.length} available`);const r=this.state.letters.slice(0,n);return this.state.letters=this.state.letters.slice(n),r}static getDefaultState(){return{letters:t.getDefaultLetters(),lettersPerPlayer:{},totalTilesInGame:0,losers:[],winnerId:null,inGame:!1}}static getDefaultLetters(){let n=new Array;for(let r=0;r<26;++r){let i=String.fromCharCode("A".charCodeAt(0)+r);for(let o=0;o<2;++o)n.push(i)}return t.shuffleArray(n),n}getSharedState(){let n=0;for(let i of Object.keys(this.state.lettersPerPlayer))this.state.losers.includes(i)||(n+=this.state.lettersPerPlayer[i].size);const r=null!=this.state.winnerId||this.state.losers.length===Object.keys(this.state.lettersPerPlayer).length;return{winnerId:this.state.winnerId,canDump:!r&&this.canDump,nextPeelWins:this.nextPeelWins,tilesUsedByPlayers:n,totalTilesInGame:this.state.totalTilesInGame,tilesRemaining:this.state.letters.length,totalPeerCount:1+this.peerToPeerService.getConnections().length,inGame:this.state.inGame,gameOver:r}}}return t.\u0275fac=function(n){return new(n||t)(De(Zo),De(qs),De(LS))},t.\u0275prov=Oe({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var B2=I(748),Om=I.n(B2);let jS=(()=>{class t{constructor(){this.seenKeys=new Set,this.attached=!1,this.keydownFirstTime=new ye,this.keydownHandlerVar=this.keydownHandler.bind(this),this.keyupHandlerVar=this.keyupHandler.bind(this)}attachListeners(){if(this.attached)throw new Error("already attached!");document.addEventListener("keydown",this.keydownHandlerVar),document.addEventListener("keyup",this.keyupHandlerVar),this.attached=!0}detachListeners(){document.removeEventListener("keydown",this.keydownHandlerVar),document.removeEventListener("keyup",this.keyupHandlerVar),this.seenKeys=new Set,this.attached=!1}keydownHandler(n){this.seenKeys.has(n.key)||(this.keydownFirstTime.next(n.key),this.seenKeys.add(n.key))}keyupHandler(n){this.seenKeys.delete(n.key)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Oe({token:t,factory:t.\u0275fac}),t})();function U2(t,e){if(1&t&&(pt(0,"div",10),sn(1),gt()),2&t){const n=e.$implicit,r=gn();vp("transform","translate("+n.x+"px, "+n.y+"px"),As("draggable",!r.readonly)("last-clicked",n.lastClicked)("invalid",n.invalid),Pr("data-id",n.id),bt(1),cd(n.letter)}}function H2(t,e){1&t&&fi(0,"div",11),2&t&&Pr("data-id",e.$implicit)}function $2(t,e){1&t&&fi(0,"div",11),2&t&&Pr("data-id",e.$implicit)}const km=Ws("board");let z2=(()=>{class t{constructor(n,r){this.gameService=n,this.keyboardEventsService=r,this.readonly=!1,this.GRID_SIZE=22,this.topDropzones=Array(484).fill(null).map((i,o)=>o),this.bottomDropzones=Array(44).fill(null).map((i,o)=>484+o),this.dropIndexHasTile=new Array(528).fill(!1),this.interactables=[],this.subs=[],this.gameServiceState=n.state,this.clickHander=this.clickEventListener.bind(this),this.gameServiceGameId=n.state.gameId}ngOnInit(){let n=this.boardState.squares.filter(r=>r.lastClicked);n.length&&(this.lastSquare=n[0]);for(let r=1;r<n.length;++r)n[r].lastClicked=!1;for(let r of this.boardState.squares)this.setDropIndexHasTile(r.dropIndex,!0)}ngOnDestroy(){this.subs.forEach(n=>n.unsubscribe()),this.interactables.forEach(n=>n.unset()),document.removeEventListener("click",this.clickHander),this.keyboardEventsService.detachListeners()}get boardState(){return this.playerModel.boardState}ngAfterViewInit(){this.readonly||(this.keyboardEventsService.attachListeners(),this.unloadQueue(),this.subs=[this.gameService.letter$.subject.subscribe(()=>{this.unloadQueue()}),this.keyboardEventsService.keydownFirstTime.subscribe(n=>{this.moveAllSquares(n)})],this.interactables=[Om()(".draggable").draggable({listeners:{start:n=>{},end:n=>{const i=this.boardState.getSquareFromEl(n.target);this.dropIndexHasTile[i.dropIndex]?(km.info("unlikely event - an incoming square from another peel has taken the square the tile was being dropped on"),this.dropSquareInNearestDropzone(i)):this.setCoordsBasedOnDropIndex(i,i.dropIndex),this.gameService.updateAfterDrop()},move:n=>{const r=this.boardState.getSquareFromEl(n.target),o=document.getElementById("board").getBoundingClientRect();this.setElementCoords(r,n.clientX-o.left-12.5,n.clientY-o.top-12.5)}}}).on("down",n=>{const i=this.boardState.getSquareFromEl(n.target);this.updateLastSquare(i),this.setDropIndexHasTile(i.dropIndex,!1)}),Om()(".dropzone.droppable").dropzone({overlap:.25,ondragenter:n=>{const i=this.boardState.getSquareFromEl(n.relatedTarget),s=parseInt(n.target.getAttribute("data-id"));s&&!this.dropIndexHasTile[s]&&(i.dropIndex=s,n.target.classList.add("drop-target"))},ondragleave:function(n){n.target.classList.remove("drop-target")},ondropdeactivate:function(n){n.target.classList.remove("drop-target")},ondrop:n=>{}})],document.addEventListener("click",this.clickHander))}claimSuccess(){this.gameService.claimSuccess()}dump(){if(!this.lastSquare)return;const n=this.lastSquare;this.setDropIndexHasTile(n.dropIndex,!1),this.gameService.dump(n),this.updateLastSquare(null),this.gameService.updateAfterDrop()}setDropIndexHasTile(n,r){this.dropIndexHasTile[n]=r}clickEventListener(n){const r=n.target;(null==r?void 0:r.classList.contains("draggable"))||this.updateLastSquare(null)}unloadQueue(){if(this.gameServiceGameId!==this.gameServiceState.gameId)return void km.warn(`gameid: ${this.gameServiceGameId} does not match game service id ${this.gameServiceState.gameId}`);const n=[];for(;this.gameService.letter$.getLength()>0;)n.push(this.gameService.letter$.pop());for(const r of n)this.createSquareAndDropInDropzone(r)}createSquareAndDropInDropzone(n){const i=this.boardState.createNewSquare();i.letter=n,this.dropSquareInNearestDropzone(i)}dropSquareInNearestDropzone(n){(()=>{const i=o=>!this.dropIndexHasTile[o]&&(this.setCoordsBasedOnDropIndex(n,o),!0);for(let o=0;o<44;++o)if(i(484+o))return;for(let o=483;o>=0;--o)if(i(o))return})(),this.gameService.updateAfterDrop()}setCoordsBasedOnDropIndex(n,r){this.dropIndexHasTile[r]&&km.warn("dropping square on dropzone that already has a tile???");const i=document.querySelector(`.dropzone[data-id='${r}']`),o=Om().getElementRect(i),a=document.getElementById("board").getBoundingClientRect();this.setElementCoords(n,o.left-a.left-window.scrollX,o.top-a.top-window.scrollY),n.dropIndex=r,this.setDropIndexHasTile(n.dropIndex,!0)}setElementCoords(n,r,i){n.x=r,n.y=i}updateLastSquare(n){this.lastSquare&&(this.lastSquare.lastClicked=!1),this.lastSquare=n,this.lastSquare&&(this.lastSquare.lastClicked=!0)}moveAllSquares(n){const r=this.gameService.moveAllSquares(n);if(r.shouldMove){for(let i=0;i<r.squaresInPlay.length;++i){const o=r.squaresInPlay[i],s=r.movedIds[i];o.dropIndex!==s&&(this.setDropIndexHasTile(o.dropIndex,!1),this.setCoordsBasedOnDropIndex(o,s))}this.gameService.updateAfterDrop()}}}return t.\u0275fac=function(n){return new(n||t)(he(qs),he(jS))},t.\u0275cmp=_r({type:t,selectors:[["app-board"]],inputs:{playerModel:"playerModel",readonly:"readonly"},features:[Bt([jS])],decls:15,vars:7,consts:[[2,"margin","auto","width","100%"],["id","board",2,"margin","auto","position","relative"],[1,"dropzoneHelper"],["class","square",3,"draggable","last-clicked","invalid","transform",4,"ngFor","ngForOf"],["id","topArea"],["class","dropzone droppable",4,"ngFor","ngForOf"],["id","startArea"],[2,"font-size","15px"],[1,"win",3,"disabled","click"],[1,"dump",3,"disabled","click"],[1,"square"],[1,"dropzone","droppable"]],template:function(n,r){1&n&&(pt(0,"body",0),pt(1,"div",1),pt(2,"div",2),An(3,U2,2,10,"div",3),pt(4,"div",4),An(5,H2,1,1,"div",5),gt(),pt(6,"div",6),pt(7,"div"),pt(8,"div",7),sn(9),gt(),pt(10,"button",8),Gt("click",function(){return r.claimSuccess()}),sn(11),gt(),pt(12,"button",9),Gt("click",function(){return r.dump()}),sn(13,"dump"),gt(),gt(),An(14,$2,1,1,"div",5),gt(),gt(),gt(),gt()),2&n&&(bt(3),Ot("ngForOf",r.boardState.squares),bt(2),Ot("ngForOf",r.topDropzones),bt(4),Rs("tiles remaining: ",r.gameServiceState.tilesRemaining,""),bt(1),Ot("disabled",!r.gameServiceState.canClaimSuccess||r.readonly),bt(1),cd(r.gameServiceState.nextPeelWins?"win?":"peel"),bt(1),Ot("disabled",!r.gameServiceState.canDump||!r.lastSquare),bt(2),Ot("ngForOf",r.bottomDropzones))},directives:[Kd],styles:[".square[_ngcontent-%COMP%]{background-color:#efe1ca;left:0;top:0;position:absolute;z-index:500;box-sizing:border-box;width:25px;height:25px;line-height:25px;border:1px solid;border-radius:2px;text-align:center;margin:0;padding:0;display:inline-block;font-size:20px}.square.draggable[_ngcontent-%COMP%]{cursor:pointer!important}.square.last-clicked[_ngcontent-%COMP%]{background:orange;z-index:50000}.square.invalid[_ngcontent-%COMP%]{background:red}#board[_ngcontent-%COMP%]{width:538px;font-size:0}#topArea[_ngcontent-%COMP%], #startArea[_ngcontent-%COMP%]{padding:5px}#topArea[_ngcontent-%COMP%]{background-color:brown}#startArea[_ngcontent-%COMP%]{background-color:gray;margin-top:0}.dropzoneHelper[_ngcontent-%COMP%]{font-size:0}.row[_ngcontent-%COMP%]{height:25px}.row[_ngcontent-%COMP%], .dropzone[_ngcontent-%COMP%]{margin:0;padding:0;display:inline-block}.pad-5[_ngcontent-%COMP%]{padding:5px}.dropzone[_ngcontent-%COMP%]{width:24px;height:24px}.drop-target[_ngcontent-%COMP%]{background-color:#29e;opacity:.6}[_ngcontent-%COMP%]:export{boardSize:22;startAreaRows:2}"]}),t})();function W2(t,e){if(1&t&&(pt(0,"p"),sn(1),gt()),2&t){const n=gn().$implicit;bt(1),ol("",n.tilesUsed," / ",n.totalTiles,"")}}function q2(t,e){1&t&&(pt(0,"p"),sn(1,":("),gt())}function Q2(t,e){if(1&t){const n=Ms();pt(0,"button",5),Gt("click",function(){const o=Ni(n).$implicit;return gn().selectPlayer(o)}),sn(1),fi(2,"br"),An(3,W2,2,2,"p",2),An(4,q2,2,0,"p",2),gt()}if(2&t){const n=e.$implicit,r=gn();As("disconnected",n.disconnected)("active",(null==r.activePlayer?null:r.activePlayer.id)===n.id),bt(1),bp(" ",n.name,"",n.id===r.hostId?"(host)":"","",n.id===r.myId?"(you)":"",""),bt(2),Ot("ngIf",!n.isEliminated),bt(1),Ot("ngIf",n.isEliminated)}}function Y2(t,e){if(1&t&&(pt(0,"p"),sn(1),gt()),2&t){const n=gn();bt(1),Rs("",n.winner.name," wins!")}}function K2(t,e){if(1&t){const n=Ms();pt(0,"button",5),Gt("click",function(){return Ni(n),gn().returnToLobby()}),sn(1,"Return to lobby"),gt()}}function J2(t,e){if(1&t&&fi(0,"app-board",8),2&t){const n=gn().$implicit,r=gn();Ot("playerModel",n)("readonly",n.id!==r.myId||null!==r.gameServiceState.winnerId||n.isEliminated||n.disconnected)}}function X2(t,e){if(1&t&&(pt(0,"div",6),An(1,J2,1,2,"app-board",7),gt()),2&t){const n=e.$implicit,r=gn();wb("board-"+n.id),bt(1),Ot("ngIf",n.id===(null==r.activePlayer?null:r.activePlayer.id))}}let BS=(()=>{class t{constructor(n,r,i,o,s){this.gameService=n,this.peerToPeerService=r,this.gameHostService=i,this.invalidSquareService=o,this.ngZone=s,this.isHost=!1,this.animation=new N2(this.ngZone)}ngOnInit(){this.isHost=this.peerToPeerService.getIsHost(),this.activePlayer=this.gameService.getOrCreateMyPlayer(),this.myId=this.gameService.getOrCreateMyPlayer().id,this.hostId=this.peerToPeerService.getHostId(),this.gameServiceState=this.gameService.state,this.subs=[this.gameService.winner$.subscribe(()=>{this.winner=this.gameService.getPlayerById(this.gameServiceState.winnerId),this.setActivePlayer(this.winner,!0)}),this.gameService.loser$.subscribe(()=>{let n=this.gameService.getOrCreateMyPlayer().boardState.squares;this.gameService.getOrCreateMyPlayer().isEliminated=!0,this.invalidSquareService.getInvalidSquares(n).forEach(i=>{i.invalid=!0}),this.gameService.updateAfterDrop()})]}ngAfterViewInit(){}ngOnDestroy(){this.destroyAnimation(),this.subs.forEach(n=>n.unsubscribe())}selectPlayer(n){this.setActivePlayer(n)}returnToLobby(){this.gameHostService.returnToLobby()}setActivePlayer(n,r=!1){var i,o;let s=!1;n.id===(null===(i=this.activePlayer)||void 0===i?void 0:i.id)||(this.activePlayer=n,s=!0);const a=this.activePlayer.id===(null===(o=this.winner)||void 0===o?void 0:o.id);(s||r)&&a&&this.activePlayer.id===this.myId?this.playAnimation():s&&this.destroyAnimation()}playAnimation(){const n=document.getElementsByClassName("board-"+this.winner.id)[0];this.ngZone.runOutsideAngular(()=>this.animation.runAnimation(n))}destroyAnimation(){this.animation.stopAnimation()}}return t.\u0275fac=function(n){return new(n||t)(he(qs),he(Zo),he(Sf),he(NS),he(Zt))},t.\u0275cmp=_r({type:t,selectors:[["app-board-container"]],decls:6,vars:4,consts:[[2,"display","flex"],[3,"disconnected","active","click",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"click",4,"ngIf"],["style","position: relative",3,"class",4,"ngFor","ngForOf"],[3,"click"],[2,"position","relative"],[3,"playerModel","readonly",4,"ngIf"],[3,"playerModel","readonly"]],template:function(n,r){1&n&&(pt(0,"div",0),pt(1,"div"),An(2,Q2,5,9,"button",1),An(3,Y2,2,1,"p",2),An(4,K2,2,0,"button",3),gt(),An(5,X2,2,3,"div",4),gt()),2&n&&(bt(2),Ot("ngForOf",r.gameServiceState.players),bt(1),Ot("ngIf",r.winner),bt(1),Ot("ngIf",r.isHost&&r.gameServiceState.gameOver),bt(1),Ot("ngForOf",r.gameServiceState.players))},directives:[Kd,Jd,z2],styles:[".active[_ngcontent-%COMP%]{background:orange}p[_ngcontent-%COMP%]{margin:0;padding:0}button[_ngcontent-%COMP%]{display:block;width:100%}.disconnected[_ngcontent-%COMP%]{color:gray}"]}),t})(),Z2=(()=>{class t{constructor(n){this.gameService=n}}return t.\u0275fac=function(n){return new(n||t)(he(qs))},t.\u0275cmp=_r({type:t,selectors:[["app-game"]],decls:1,vars:0,template:function(n,r){1&n&&fi(0,"app-board-container")},directives:[BS],styles:[""]}),t})();const US=Ws("param-override");let HS=(()=>{class t{constructor(n){this.initialTilesProviderService=n}setupOverrides(n){(null==n?void 0:n.tiles)&&(US.info("tiles override applied"),this.initialTilesProviderService.initialTilesOverride=null==n?void 0:n.tiles.split("")),(null==n?void 0:n.numTiles)&&(US.info("numTiles override applied"),this.initialTilesProviderService.numTilesPerPlayerOverride=n.numTiles)}}return t.\u0275fac=function(n){return new(n||t)(De(LS))},t.\u0275prov=Oe({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),eB=(()=>{class t{constructor(n,r,i,o,s,a){this.gameHostService=n,this.gameService=r,this.peerToPeerService=i,this.navigationService=o,this.activatedRoute=s,this.paramOverrideService=a,this.loading=!1}ngOnInit(){this.gameHostService.dispose(),this.gameService.dispose(),this.peerToPeerService.dispose(),this.paramOverrideService.setupOverrides(this.activatedRoute.snapshot.queryParams)}createGame(){var n=this;return Po(function*(){n.loading=!0;try{yield n.gameHostService.createGame(),n.navigationService.gotoLobby()}finally{n.loading=!1}})()}}return t.\u0275fac=function(n){return new(n||t)(he(Sf),he(qs),he(Zo),he(Am),he(Io),he(HS))},t.\u0275cmp=_r({type:t,selectors:[["app-home"]],decls:4,vars:1,consts:[[3,"disabled","click"]],template:function(n,r){1&n&&(pt(0,"h1"),sn(1,"Bananagrams"),gt(),pt(2,"button",0),Gt("click",function(){return r.createGame()}),sn(3,"create game"),gt()),2&n&&(bt(2),Ot("disabled",r.loading))},styles:[""]}),t})();function tB(t,e){1&t&&(pt(0,"div"),fi(1,"div",1),gt())}function nB(t,e){if(1&t){const n=Ms();pt(0,"div"),pt(1,"p"),sn(2),gt(),pt(3,"button",2),Gt("click",function(){return Ni(n),gn().tryConnect()}),sn(4,"try again"),gt(),gt()}if(2&t){const n=gn();bt(2),Rs("Error: ",n.error,"")}}let rB=(()=>{class t{constructor(n,r,i){this.peerToPeerService=n,this.activatedRoute=r,this.router=i,this.error=null}ngOnInit(){var n=this;return Po(function*(){yield n.tryConnect()})()}tryConnect(){var n=this;return Po(function*(){n.error=null;try{(!n.peerToPeerService.getIsConnected()||!n.peerToPeerService.getIsHost())&&(yield n.peerToPeerService.setupByConnectingToId(n.activatedRoute.snapshot.params.id)),n.router.navigate([qr.LOBBY+"/"+n.peerToPeerService.getHostId()])}catch(r){n.error=r}})()}}return t.\u0275fac=function(n){return new(n||t)(he(Zo),he(Io),he(On))},t.\u0275cmp=_r({type:t,selectors:[["app-join"]],decls:4,vars:2,consts:[[4,"ngIf"],[1,"loader"],[3,"click"]],template:function(n,r){1&n&&(pt(0,"p"),sn(1,"joining..."),gt(),An(2,tB,2,0,"div",0),An(3,nB,5,1,"div",0)),2&n&&(bt(2),Ot("ngIf",!r.error),bt(1),Ot("ngIf",r.error))},directives:[Jd],styles:[".loader[_ngcontent-%COMP%]{border:5px solid #f3f3f3;border-top:5px solid #555;border-radius:50%;width:50px;height:50px;animation:spin 1s linear infinite}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]}),t})();function wf(t,e){return new ve(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const u=Et(t[a]);let h=!1;n.add(u.subscribe({next:g=>{h||(h=!0,s++),i[a]=g},error:g=>n.error(g),complete:()=>{o++,(o===r||!h)&&(s===r&&n.next(e?e.reduce((g,y,w)=>(g[y]=i[w],g),{}):i),n.complete())}}))}})}let $S=(()=>{class t{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}}return t.\u0275fac=function(n){return new(n||t)(he(bo),he(Sn))},t.\u0275dir=Le({type:t}),t})(),Qs=(()=>{class t extends $S{}return t.\u0275fac=function(){let e;return function(r){return(e||(e=Lr(t)))(r||t)}}(),t.\u0275dir=Le({type:t,features:[jt]}),t})();const Ki=new nt("NgValueAccessor"),sB={provide:Ki,useExisting:_e(()=>Tf),multi:!0},cB=new nt("CompositionEventMode");let Tf=(()=>{class t extends $S{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=zi()?zi().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(n){this.setProperty("value",null==n?"":n)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}}return t.\u0275fac=function(n){return new(n||t)(he(bo),he(Sn),he(cB,8))},t.\u0275dir=Le({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,r){1&n&&Gt("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[Bt([sB]),jt]}),t})();const zn=new nt("NgValidators"),ns=new nt("NgAsyncValidators");function rs(t){return null}function ew(t){return null!=t}function tw(t){const e=rl(t)?Et(t):t;return od(e),e}function nw(t){let e={};return t.forEach(n=>{e=null!=n?Object.assign(Object.assign({},e),n):e}),0===Object.keys(e).length?null:e}function rw(t,e){return e.map(n=>n(t))}function iw(t){return t.map(e=>function(t){return!t.validate}(e)?e:n=>e.validate(n))}function Nm(t){return null!=t?function(t){if(!t)return null;const e=t.filter(ew);return 0==e.length?null:function(n){return nw(rw(n,e))}}(iw(t)):null}function Fm(t){return null!=t?function(t){if(!t)return null;const e=t.filter(ew);return 0==e.length?null:function(n){return function(...t){if(1===t.length){const e=t[0];if(W(e))return wf(e,null);if(B(e)&&Object.getPrototypeOf(e)===Object.prototype){const n=Object.keys(e);return wf(n.map(r=>e[r]),n)}}if("function"==typeof t[t.length-1]){const e=t.pop();return wf(t=1===t.length&&W(t[0])?t[0]:t,null).pipe(je(n=>e(...n)))}return wf(t,null)}(rw(n,e).map(tw)).pipe(je(nw))}}(iw(t)):null}function aw(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function Vm(t){return t?Array.isArray(t)?t:[t]:[]}function xf(t,e){return Array.isArray(t)?t.includes(e):t===e}function uw(t,e){const n=Vm(e);return Vm(t).forEach(i=>{xf(n,i)||n.push(i)}),n}function dw(t,e){return Vm(e).filter(n=>!xf(t,n))}let fw=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=Nm(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=Fm(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n){this.control&&this.control.reset(n)}hasError(n,r){return!!this.control&&this.control.hasError(n,r)}getError(n,r){return this.control?this.control.getError(n,r):null}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=Le({type:t}),t})(),ir=(()=>{class t extends fw{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(){let e;return function(r){return(e||(e=Lr(t)))(r||t)}}(),t.\u0275dir=Le({type:t,features:[jt]}),t})();class is extends fw{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let pw=(()=>{class t extends class{constructor(e){this._cd=e}is(e){var n,r,i;return"submitted"===e?!!(null===(n=this._cd)||void 0===n?void 0:n.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}{constructor(n){super(n)}}return t.\u0275fac=function(n){return new(n||t)(he(is,2))},t.\u0275dir=Le({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,r){2&n&&As("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[jt]}),t})();function ql(t,e){(function(t,e){const n=function(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(aw(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=function(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(aw(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();Af(e._rawValidators,i),Af(e._rawAsyncValidators,i)})(t,e),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&gw(t,e)})}(t,e),function(t,e){const n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&gw(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function Af(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function gw(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Of(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Ql="VALID",kf="INVALID",pc="PENDING",Yl="DISABLED";function $m(t){return(zm(t)?t.validators:t)||null}function vw(t){return Array.isArray(t)?Nm(t):t||null}function Gm(t,e){return(zm(e)?e.asyncValidators:t)||null}function _w(t){return Array.isArray(t)?Fm(t):t||null}function zm(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class Wm{constructor(e,n){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=n,this._composedValidatorFn=vw(this._rawValidators),this._composedAsyncValidatorFn=_w(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Ql}get invalid(){return this.status===kf}get pending(){return this.status==pc}get disabled(){return this.status===Yl}get enabled(){return this.status!==Yl}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=vw(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=_w(e)}addValidators(e){this.setValidators(uw(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(uw(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(dw(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(dw(e,this._rawAsyncValidators))}hasValidator(e){return xf(this._rawValidators,e)}hasAsyncValidator(e){return xf(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=pc,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=Yl,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=Ql,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ql||this.status===pc)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Yl:Ql}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=pc,this._hasOwnPendingAsyncValidator=!0;const n=tw(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent)}get(e){return function(t,e,n){if(null==e||(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length))return null;let r=t;return e.forEach(i=>{r=r instanceof qm?r.controls.hasOwnProperty(i)?r.controls[i]:null:r instanceof DB&&r.at(i)||null}),r}(this,e)}getError(e,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new yn,this.statusChanges=new yn}_calculateStatus(){return this._allControlsDisabled()?Yl:this.errors?kf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(pc)?pc:this._anyControlsHaveStatus(kf)?kf:Ql}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){zm(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Nf extends Wm{constructor(e=null,n,r){super($m(n),Gm(r,n)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=null,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Of(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Of(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class qm extends Wm{constructor(e,n,r){super($m(n),Gm(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(r=>{this._throwIfControlMissing(r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n instanceof Nf?n.value:n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>!!r._syncPendingControls()||n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(n=>{const r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const n of Object.keys(this.controls)){const r=this.controls[n];if(this.contains(n)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,n,r)=>((n.enabled||this.disabled)&&(e[r]=n.value),e))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((n,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control with name: '${r}'.`)})}}class DB extends Wm{constructor(e,n,r){super($m(n),Gm(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,n={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(e,n,r={}){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),n&&(this.controls.splice(e,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,n={}){this._checkAllValuesPresent(e),e.forEach((r,i)=>{this._throwIfControlMissing(i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e=[],n={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(e=>e instanceof Nf?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((n,r)=>!!r._syncPendingControls()||n,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((n,r)=>{e(n,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(n=>n.enabled&&e(n))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((n,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control at index: ${r}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const TB={provide:is,useExisting:_e(()=>Ym)},Ew=(()=>Promise.resolve(null))();let Ym=(()=>{class t extends is{constructor(n,r,i,o){super(),this.control=new Nf,this._registered=!1,this.update=new yn,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(o=>{o.constructor===Tf?n=o:function(t){return Object.getPrototypeOf(t.constructor)===Qs}(o)?r=o:i=o}),i||r||n||null}(0,o)}ngOnChanges(n){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in n&&this._updateDisabled(n),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(t,e){return[...e.path,t]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){ql(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(n){Ew.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1})})}_updateDisabled(n){const r=n.isDisabled.currentValue,i=""===r||r&&"false"!==r;Ew.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(n){return new(n||t)(he(ir,9),he(zn,10),he(ns,10),he(Ki,10))},t.\u0275dir=Le({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Bt([TB]),jt,nn]}),t})(),Sw=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Fn({type:t}),t.\u0275inj=Kt({}),t})();const YB={provide:zn,useExisting:_e(()=>ry),multi:!0};let ry=(()=>{class t{constructor(){this._validator=rs}ngOnChanges(n){"maxlength"in n&&(this._createValidator(),this._onChange&&this._onChange())}validate(n){return this.enabled()?this._validator(n):null}registerOnValidatorChange(n){this._onChange=n}_createValidator(){this._validator=this.enabled()?function(t){return e=>function(t){return null!=t&&"number"==typeof t.length}(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}(function(t){return"number"==typeof t?t:parseInt(t,10)}(this.maxlength)):rs}enabled(){return null!=this.maxlength}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=Le({type:t,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(n,r){2&n&&Pr("maxlength",r.enabled()?r.maxlength:null)},inputs:{maxlength:"maxlength"},features:[Bt([YB]),nn]}),t})(),Bw=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Fn({type:t}),t.\u0275inj=Kt({imports:[[Sw]]}),t})(),JB=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Fn({type:t}),t.\u0275inj=Kt({imports:[Bw]}),t})();function XB(t,e){if(1&t&&(pt(0,"li"),sn(1),gt()),2&t){const n=e.$implicit,r=gn();As("strikethrough",n.disconnected),bt(1),ol(" ",n.name,"",n.id===(null==r.gameServiceState.myPlayer?null:r.gameServiceState.myPlayer.id)?"(you)":""," ")}}function ZB(t,e){if(1&t){const n=Ms();pt(0,"button",3),Gt("click",function(){return Ni(n),gn().rejoin()}),sn(1),gt()}if(2&t){const n=gn();Ot("disabled",n.rejoining),bt(1),Rs("rejoin as ",n.gameServiceState.rejoinCandidate.name,"?")}}function eU(t,e){if(1&t){const n=Ms();pt(0,"button",3),Gt("click",function(){return Ni(n),gn().joinAsSpectator()}),sn(1,"join as spectator"),gt()}if(2&t){const n=gn();Ot("disabled",n.rejoining||!n.gameServiceState.inGame)}}function tU(t,e){if(1&t){const n=Ms();pt(0,"button",3),Gt("click",function(){return Ni(n),gn().startGame()}),sn(1,"Start Game"),gt()}2&t&&Ot("disabled",null===gn().gameServiceState.myPlayer)}let nU=(()=>{class t{constructor(n,r,i,o,s){this.gameService=n,this.peerToPeerService=r,this.gameHostService=i,this.navigationService=o,this.baseHref=s,this.rejoining=!1}ngOnInit(){var n=this;return Po(function*(){n.isHost=n.peerToPeerService.getIsHost(),n.gameServiceState=n.gameService.state,n.gameService.initFromPeerToPeer(),n.subs=[n.gameService.gameStart$.subscribe(r=>n.gotoGame())]})()}gotoGame(){this.navigationService.gotoGame()}ngOnDestroy(){this.subs.forEach(n=>n.unsubscribe)}setName(){this.gameService.updatePlayer(this.name)}startGame(){this.gameHostService.startGame()}rejoin(){this.rejoining=!0,this.gameService.rejoinAsPlayer(this.gameServiceState.rejoinCandidate),setTimeout(()=>this.rejoining=!1,500),this.gameServiceState.inGame&&this.gotoGame()}joinAsSpectator(){this.gameService.getOrCreateMyPlayer().isSpectator=!0,this.gotoGame()}}return t.\u0275fac=function(n){return new(n||t)(he(qs),he(Zo),he(Sf),he(Am),he(ac))},t.\u0275cmp=_r({type:t,selectors:[["app-lobby"]],decls:11,vars:9,consts:[[3,"src"],[3,"strikethrough",4,"ngFor","ngForOf"],["type","text","maxlength","32",3,"ngModel","ngModelChange"],[3,"disabled","click"],[3,"disabled","click",4,"ngIf"]],template:function(n,r){1&n&&(fi(0,"img",0),pt(1,"p"),sn(2),gt(),pt(3,"ul"),An(4,XB,2,4,"li",1),gt(),pt(5,"input",2),Gt("ngModelChange",function(o){return r.name=o}),gt(),pt(6,"button",3),Gt("click",function(){return r.setName()}),sn(7,"Set name"),gt(),An(8,ZB,2,2,"button",4),An(9,eU,2,1,"button",4),An(10,tU,2,1,"button",4)),2&n&&(sd("src","",r.baseHref,"assets/banana.jpeg",Gu),bt(2),ol("",r.gameServiceState.players.length," players. ",r.gameServiceState.totalPeerCount," in room."),bt(2),Ot("ngForOf",r.gameServiceState.players),bt(1),Ot("ngModel",r.name),bt(1),Ot("disabled",!r.name||0===r.gameServiceState.totalPeerCount||r.rejoining),bt(2),Ot("ngIf",!r.isHost&&r.gameServiceState.rejoinCandidate),bt(1),Ot("ngIf",!r.isHost),bt(1),Ot("ngIf",r.isHost))},directives:[Kd,Tf,ry,pw,Ym,Jd],styles:[".strikethrough[_ngcontent-%COMP%]{text-decoration:line-through}button[_ngcontent-%COMP%]{display:block;margin-top:1em}img[_ngcontent-%COMP%]{display:block;width:200px}"]}),t})();const iU=[{path:qr.HOME,component:eB},{path:qr.LOCAL,component:(()=>{class t{constructor(n,r,i,o){this.gameService=n,this.gameHostService=r,this.activatedRoute=i,this.paramOverrideService=o}ngOnInit(){this.paramOverrideService.setupOverrides(this.activatedRoute.snapshot.queryParams),this.gameService.initFromPeerToPeer(),this.gameService.updatePlayer("abc"),this.gameHostService.startGame()}}return t.\u0275fac=function(n){return new(n||t)(he(qs),he(Sf),he(Io),he(HS))},t.\u0275cmp=_r({type:t,selectors:[["app-local"]],decls:1,vars:0,template:function(n,r){1&n&&fi(0,"app-board-container")},directives:[BS],styles:[""]}),t})()},{path:qr.JOIN+"/:id",component:rB},{path:qr.LOBBY+"/:id",component:nU,canActivate:[gS]},{path:qr.GAME+"/:id",component:Z2,canActivate:[gS]}];let oU=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Fn({type:t}),t.\u0275inj=Kt({imports:[[oS.forRoot(iU)],oS]}),t})(),sU=(()=>{class t{constructor(){this.title="bananagrams"}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=_r({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(n,r){1&n&&fi(0,"router-outlet")},directives:[Cm],styles:[""]}),t})(),aU=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Fn({type:t,bootstrap:[sU]}),t.\u0275inj=Kt({providers:[{provide:ac,useFactory:e=>e.getBaseHrefFromDOM(),deps:[Yo]}],imports:[[iV,oU,JB,M2]]}),t})();(function(){if(U0)throw new Error("Cannot enable prod mode after platform setup.");B0=!1})(),nV().bootstrapModule(aU).catch(t=>console.error(t))}},Ke=>{Ke(Ke.s=796)}]);